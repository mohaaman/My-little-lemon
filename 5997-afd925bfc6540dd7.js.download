"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5997],{73299:function(n,e,t){t.d(e,{C:function(){return a},Gw:function(){return i},Tg:function(){return c},so:function(){return u},ss:function(){return l},tc:function(){return o}});var r=t(55749);function u(n,e){for(var t=[],r=n.split(e),u=0;u<r.length;u++){var o=r[u].trim();""!==o&&t.push(o)}return t}function o(n){return n.replace(/^<|>$/g,"")}function i(n){return"'".concat(n.replace(/'/g,"'\\''"),"'")}function a(n){return n.replace(/^refs\/(?:heads|remotes)\//,"")}function c(n){if(-1===n.indexOf("/"))return[null,null];if(n.startsWith("refs/heads/"))return[null,null];if(n.startsWith("refs/remotes/")){var e=(0,r.Z)(n.split("/"));return[e[2],e.slice(3).join("/")]}var t=(0,r.Z)(n.split("/"));return[t[0],t.slice(1).join("/")]}function l(n){return n.replace(/^refs\/remotes\//,"")}},49760:function(n,e,t){t.d(e,{Z:function(){return m},h:function(){return u}});var r,u,o=t(57135),i=t(2272),a=t(96583),c=t(73299),l="# branch.oid ",s="# branch.head ",f="# branch.upstream ",d="# branch.ab ",p="# stash ",h=/^(\S)(\S) (\S{4}) (\S+) (\S+) (\S+) (\S+) (\S+) (.*)$/,g=/^([RC])([0-9]+) (.+?)\t(.+)$/,v=/^(\S)(\S) (\S{4}) (\S+) (\S+) (\S+) (\S+) (\S+) (\S+) (\S+) (.*)$/,E=/([RC][0-9]+ .+?)\0(.+?(?:\0|$))/g;function m(n){return N.apply(this,arguments)}function N(){return(N=(0,o.Z)((function(n){var e,t,r,u,o,h,g,v,m,N,R,k,S,A,w,O,D,I,b,T,y;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return e=null,t=null,r=null,u=0,o=[],[4,n("git status ".concat(["-z","--porcelain=v2","--branch","--show-stash","--untracked-files=all"].join(" ")))];case 1:if((h=a.sent()).error)return[2,h];g=h.output.replaceAll(E,"$1\t$2"),v=(0,c.so)(g,"\0"),m=!0,N=!1,R=void 0;try{for(k=v[Symbol.iterator]();!(m=(S=k.next()).done);m=!0)(A=S.value).startsWith("#")?A.startsWith(l)?"(initial)"!==(w=A.substring(l.length))&&(e=w):A.startsWith(s)?"(detached)"!==(O=A.substring(s.length))&&(t=O):A.startsWith(f)?"(not queried)"!==(D=A.substring(f.length))&&(r={branch:D,ahead:0,behind:0}):A.startsWith(d)?r&&(I=(0,i.Z)(A.substring(d.length).split(" ").map((function(n){return Math.abs(parseInt(n,10))})),2),b=I[0],T=I[1],r.ahead=b,r.behind=T):A.startsWith(p)&&(u=parseInt(A.substring(p.length),10)):null!==(y=C(A))&&o.push(y)}catch(_){N=!0,R=_}finally{try{m||null==k.return||k.return()}finally{if(N)throw R}}return[2,{commit:e,branch:t,upstream:r,stashes:u,changes:o,error:null}]}}))}))).apply(this,arguments)}function C(n){var e=n[0];switch(n=n.substring(2),e){case r.IGNORED:return null;case r.UNTRACKED:return{type:{index:u.UNTRACKED,worktree:u.UNTRACKED},path:n,staged:!1,unmerged:!1};case r.UNMERGED:var t=n.match(v);if(!t)return null;var o=(0,i.Z)(t,12),a=o[1],c=o[2],l=o[11],s=R(a);return{type:{index:s,worktree:R(c)},path:l,staged:s!==u.UNMODIFIED,unmerged:!0};case r.ORDINARY:case r.RENAMED_OR_COPIED:var f=n.match(h);if(!f)return null;var d=(0,i.Z)(f,10),p=d[1],E=d[2],m=d[9],N=R(p),C=R(E),S=N!==u.UNMODIFIED;if(e===r.ORDINARY)return{type:{index:N,worktree:C},path:m,staged:S,unmerged:!1};if(e===r.RENAMED_OR_COPIED){var A=m.match(g);if(!A)return null;var w=(0,i.Z)(A,5),O=w[1],D=w[2],I=w[3],b=w[4];return{type:{index:N,worktree:C},path:I,staged:S,unmerged:!1,source:{type:k(O),score:parseInt(D,10),path:b}}}return null;default:return null}}function R(n){switch(n){case".":default:return u.UNMODIFIED;case"M":return u.MODIFIED;case"T":return u.TYPE_CHANGED;case"A":return u.ADDED;case"D":return u.DELETED;case"R":return u.RENAMED;case"C":return u.COPIED;case"U":return u.UNMERGED}}function k(n){switch(n){case"R":default:return u.RENAMED;case"C":return u.COPIED}}!function(n){n.ORDINARY="1",n.RENAMED_OR_COPIED="2",n.UNMERGED="u",n.UNTRACKED="?",n.IGNORED="!"}(r||(r={})),function(n){n.UNTRACKED="UNTRACKED",n.UNMODIFIED="UNMODIFIED",n.MODIFIED="MODIFIED",n.TYPE_CHANGED="TYPE_CHANGED",n.ADDED="ADDED",n.DELETED="DELETED",n.RENAMED="RENAMED",n.COPIED="COPIED",n.UNMERGED="UNMERGED"}(u||(u={}))},89334:function(n,e,t){t.d(e,{Z:function(){return N}});var r=t(57135),u=t(96583),o=t(91926),i=t(29118),a=t(10841),c=t(27327),l=t(29457),s=t(25528);function f(n){var e=n.container,t=n.toolchain,f=n.beforeRun,d=function(){var n=function(n){g!==n&&(g=n,p.emit(a.zW.STATE_CHANGE,g))};n(h?E?a.Ah.STOPPING:"none"===v?a.Ah.IDLE:a.Ah.RUNNING:a.Ah.OFFLINE)},p=(0,c.ZP)(),h=null,g=a.Ah.OFFLINE,v="none",E=!1,m=Math.random();function N(){return(N=(0,r.Z)((function(n){var r,o,i,c,E,N,C,R;return(0,u.__generator)(this,(function(u){switch(u.label){case 0:if(g!==a.Ah.IDLE&&g!==a.Ah.STOPPING)throw new Error("Cannot run while state is not IDLE or STOPPING, got state: "+g);return o=Math.random(),m=o,p.emit(a.zW.LOCAL_RUN),v="before-run",d(),n||(c=(0,s.Z)(t.configs.current,[],null,(null===(i=t.configs.current)||void 0===i?void 0:i.entrypoint)||null)).length>0&&(n=c[0]),E=l.kg.timeStart({runnerId:null===n||void 0===n?void 0:n.runner.id,filePath:null===n||void 0===n?void 0:n.filePath,isInterpreter:null===n||void 0===n?void 0:n.runner.interpreter,replLanguage:null===(r=e.getContext())||void 0===r?void 0:r.repl.language}),[4,f(E,{runId:o.toString(),channelId:null===h||void 0===h?void 0:h.id,type:"shellrunner",runConfig:n})];case 1:if(u.sent(),m!==o)return[2];if("none"===v)return[2];if("server"===v)return[2];if(!h)throw new Error("State is RUNNING but shellrunner is null?");return"open"!==h.status||(v="optimistic",N={},n&&(N.runnerId=n.runner.id,N.filePath=n.filePath),C=performance.now(),h.send({runMain:N}),R=h.onCommand((function(n){if("state"===n.body){R();var e=performance.now()-C;E("run finished",{timeToRunningMs:e})}}))),[2]}}))}))).apply(this,arguments)}function C(){return(C=(0,r.Z)((function(n){return(0,u.__generator)(this,(function(e){if(g!==a.Ah.IDLE&&g!==a.Ah.RUNNING)throw new Error("Can only send input when running or idle");if(!h)throw new Error("State is not OFFLINE but shellrunner is null?");return h.send({input:n}),[2]}))}))).apply(this,arguments)}return e.openChannel({name:"shellrunner",service:"shellrun2",skip:function(n){var e,t=n.repl;return!("nix"===(e=t.language)||!0===o.ZP.usesInterpreter(e)||!1!==o.ZP.usesRunProject(e))}},(function(n){var e=n.channel;return h=e,d(),e.onCommand((function(n){if(null!=n.state){var e=n.state===i.api.State.Stopped;E&&e&&(E=!1),e?"server"===v&&(v="none"):v="server",d()}else null!=n.output?p.emit(a.zW.OUTPUT,n.output):n.hint&&p.emit(a.zW.OUTPUT,"\r\n\x1b[0m\x1b[33m".concat(n.hint.text,"\x1b[0m\r\n"))})),function(){v="none",E=!1,h=null,d()}})),{mode:"shellrunner",run:function(n){return N.apply(this,arguments)},stopRun:function(){if(g!==a.Ah.RUNNING)throw new Error("stopRun must be called when running but got ".concat(g));if(!h)throw new Error("State is RUNNING but shellrunner is null?");if("before-run"===v)return v="none",void d();v="none",E=!0,d(),h.send({clear:{}})},sendInput:function(n){return C.apply(this,arguments)},resizeTerminal:function(n){if(!h)throw new Error("resizeTerminal must be called when online");h.send({resizeTerm:n})},onOutput:function(n){return p.on(a.zW.OUTPUT,n),function(){p.removeListener(a.zW.OUTPUT,n)}},onLocalRun:function(n){return p.on(a.zW.LOCAL_RUN,n),function(){p.removeListener(a.zW.LOCAL_RUN,n)}},onStateChanged:function(n){return p.on(a.zW.STATE_CHANGE,n),function(){p.removeListener(a.zW.STATE_CHANGE,n)}},getRunState:function(){return g}}}var d=t(87861);var p=t(92674),h=t.n(p),g=t(92153);function v(n){return 1e3*n.seconds+n.nanos/1e6}var E;function m(n){var e=n.container,t=n.toolchain,o=n.beforeRun,f=n.packager,d=n.debuggest,p=function(n){O=(0,g.ZP)(O,n)},m=function(n){var e=O.outputBlocks.filter((function(e){return e.type===n})),t=e[e.length-1];t&&A.emit(a.zW.BLOCK_CHANGED,t)},N=function(){A.emit(a.zW.ALL_BLOCKS_CHANGED,O.outputBlocks)},C=function(n){O.runState!==n&&(p((function(e){e.runState=n})),A.emit(a.zW.STATE_CHANGE,n))},R=function(){w?O.runningStage!==E.STOPPING?O.runningStage===E.NONE?C(a.Ah.IDLE):C(a.Ah.RUNNING):C(a.Ah.STOPPING):C(a.Ah.OFFLINE)},k=function(n,e){var t=!1;p((function(r){var u=r.outputBlocks.filter((function(e){return e.type===n})),o=u[u.length-1];o&&(e(o),t=!0)})),t&&m(n)},S=function(){var n=d.mainClient.current,e=null===n||void 0===n?void 0:n.state.current;return{client:n,state:e,sendInput:function(e){return null===n||void 0===n?void 0:n.sendInput(e)},stop:function(){return null===n||void 0===n?void 0:n.stop()},isRunning:"running"===e,isStopped:void 0===e||null===e||"terminated"===e}},A=(0,c.ZP)(),w=null,O={runId:h()(),runState:a.Ah.OFFLINE,runningStage:E.NONE,outputBlocks:[]},D=function(n){var e=n.packager,t=n.updateState,r=n.updateCurrentBlock,u=n.emitCurrentBlockUpdate,o=[];return o.push(e.onOutput((function(n){r(a.kH.PACKAGER,(function(e){e.output+=n.replace(/\n/g,"\n\r")}))}))),o.push(e.onError((function(n){r(a.kH.PACKAGER,(function(e){e.error?e.error+="\n"+n:e.error=n}))}))),o.push(e.onStateChanged((function(n){n?(t((function(n){n.outputBlocks.push({id:h()(),localStartTime:Date.now(),isDone:!1,type:a.kH.PACKAGER,output:""}),n.outputBlocks.length>20&&n.outputBlocks.shift()})),u(a.kH.PACKAGER)):r(a.kH.PACKAGER,(function(n){n.localEndTime=Date.now(),n.isDone=!0}))}))),o}({packager:f,updateState:p,updateCurrentBlock:k,emitCurrentBlockUpdate:m}),I=function(n){var e,t,r=n.debuggest,u=n.updateState,o=n.updateCurrentBlock,i=n.emitRunState,c=n.emitCurrentBlockUpdate,l=n.stopCurrentRun,s=r.mainClient.subscribe((function(n){n&&(null===t||void 0===t||t(),null===e||void 0===e||e(),t=n.state.subscribe((function(n){"initializing"===n&&(l(),u((function(n){n.outputBlocks.push({id:h()(),localStartTime:Date.now(),isDone:!1,type:a.kH.DEBUGGER,debugState:"paused",output:""})})),c(a.kH.DEBUGGER),i(a.Ah.RUNNING)),"paused"===n&&o(a.kH.DEBUGGER,(function(n){n.debugState="paused"})),"running"===n&&o(a.kH.DEBUGGER,(function(n){n.debugState="running"})),"stopping"===n&&i(a.Ah.STOPPING),"terminated"===n&&(o(a.kH.DEBUGGER,(function(n){n.localEndTime=Date.now(),n.isDone=!0})),i(a.Ah.IDLE))})),e=n.onOutput((function(n){o(a.kH.DEBUGGER,(function(e){e.output+=n}))})))}));return[e,t,s]}({debuggest:d,updateState:p,updateCurrentBlock:k,emitRunState:C,emitCurrentBlockUpdate:m,stopCurrentRun:function(){p((function(n){n.runningStage=E.BEFORE_RUN})),null===w||void 0===w||w.send({clear:{}})}}),b=e.openChannel({name:"output",service:"output"},(function(n){var e=n.channel;return w=e,R(),e.onCommand((function(n){if(null!=n.state){var e=n.state===i.api.State.Stopped;return O.runningStage===E.STOPPING&&e&&p((function(n){n.runningStage=E.NONE})),e?O.runningStage===E.SERVER&&p((function(n){n.runningStage=E.NONE})):p((function(n){n.runningStage=E.SERVER})),void R()}if(null!=n.outputBlockStartEvent&&null!=n.outputBlockStartEvent.measureStartTime){if(void 0!==O.outputBlocks.find((function(n){return n.type===a.kH.EXECUTION&&!n.isDone})))return;var t=n.outputBlockStartEvent.executionMode===i.api.OutputBlockStartEvent.ExecutionMode.Run?"run":"interpret",r=v(n.outputBlockStartEvent.measureStartTime);p((function(n){n.outputBlocks.push({id:h()(),localStartTime:Date.now(),startTime:r,isDone:!1,type:a.kH.EXECUTION,output:"",executionMode:t}),n.outputBlocks.length>20&&n.outputBlocks.shift()})),m(a.kH.EXECUTION)}if(null!=n.output&&k(a.kH.EXECUTION,(function(e){e.output+=n.output})),null!=n.stderr&&k(a.kH.EXECUTION,(function(e){e.stderr=(e.stderr||"")+n.stderr})),null!=n.error){var u=n.error;k(a.kH.EXECUTION,(function(n){n.error?n.error+="\n"+u:n.error=u}))}if(null!=n.outputBlockEndEvent&&null!=n.outputBlockEndEvent.measureEndTime){var o=n.outputBlockEndEvent.exitCode,c=v(n.outputBlockEndEvent.measureEndTime);k(a.kH.EXECUTION,(function(n){n.exitCode=o,n.localEndTime=Date.now(),n.endTime=c,n.isDone=!0}))}})),function(){w=null,p((function(n){n.runId=h()(),n.runState=a.Ah.OFFLINE,n.runningStage=E.NONE,n.outputBlocks.forEach((function(n){n.isDone||(n.localEndTime=Date.now(),n.isDone=!0)}))})),R(),N()}}));function T(){return(T=(0,r.Z)((function(n){var r,i,c,f,d,g,v,m;return(0,u.__generator)(this,(function(u){switch(u.label){case 0:if(O.runState!==a.Ah.IDLE&&O.runState!==a.Ah.STOPPING)throw new Error("Cannot run while state is not IDLE or STOPPING, got state: "+O.runState);return i=h()(),p((function(n){n.runId=i})),A.emit(a.zW.LOCAL_RUN),p((function(n){n.runningStage=E.BEFORE_RUN})),R(),n||(f=(0,s.Z)(t.configs.current,[],null,(null===(c=t.configs.current)||void 0===c?void 0:c.entrypoint)||null)).length>0&&(n=f[0]),d=l.kg.timeStart({runnerId:null===n||void 0===n?void 0:n.runner.id,filePath:null===n||void 0===n?void 0:n.filePath,isInterpreter:null===n||void 0===n?void 0:n.runner.interpreter,replLanguage:null===(r=e.getContext())||void 0===r?void 0:r.repl.language}),[4,o(d,{runId:i,channelId:null===w||void 0===w?void 0:w.id,type:"outputs",runConfig:n})];case 1:if(u.sent(),O.runId!==i)return[2];if(O.runningStage===E.NONE)return[2];if(O.runningStage===E.SERVER)return[2];if(!w)throw new Error("State is RUNNING but outputs is null?");return"open"!==w.status||((g=S()).isStopped||g.stop(),v={},n&&(v.runnerId=n.runner.id,v.filePath=n.filePath),w.send({runMain:v}),m=w.onCommand((function(n){"state"===n.body&&(m(),d("run finished"))}))),[2]}}))}))).apply(this,arguments)}function y(){return(y=(0,r.Z)((function(n){var e,t;return(0,u.__generator)(this,(function(r){if(e=S(),t=O.outputBlocks[O.outputBlocks.length-1].type===a.kH.DEBUGGER,e.isRunning&&t&&e.sendInput(n),O.runState!==a.Ah.IDLE&&O.runState!==a.Ah.RUNNING)throw new Error("Can only send input when running or idle");if(!w)throw new Error("State is not OFFLINE but outputs is null?");return w.send({input:n}),[2]}))}))).apply(this,arguments)}return{mode:"outputs",run:function(n){return T.apply(this,arguments)},stopRun:function(){if(O.runState===a.Ah.RUNNING){var n=S();if(!n.isStopped)return n.stop(),p((function(n){n.runningStage=E.STOPPING})),void R();if(O.runningStage===E.BEFORE_RUN)return p((function(n){n.runningStage=E.NONE})),void R();p((function(n){n.runningStage=E.STOPPING})),R(),null===w||void 0===w||w.send({clear:{}})}},sendInput:function(n){return y.apply(this,arguments)},onLocalRun:function(n){return A.on(a.zW.LOCAL_RUN,n),function(){A.removeListener(a.zW.LOCAL_RUN,n)}},onStateChanged:function(n){return A.on(a.zW.STATE_CHANGE,n),function(){return A.removeListener(a.zW.STATE_CHANGE,n)}},dispose:function(){b(),I.forEach((function(n){return null===n||void 0===n?void 0:n()})),D.forEach((function(n){return null===n||void 0===n?void 0:n()}))},getRunState:function(){return O.runState},getOutputBlocks:function(){return O.outputBlocks},clearBlockHistory:function(){p((function(n){n.outputBlocks=n.outputBlocks.filter((function(n){return!n.isDone}))})),N()},onBlockChanged:function(n){return A.on(a.zW.BLOCK_CHANGED,n),function(){return A.removeListener(a.zW.BLOCK_CHANGED,n)}},onAllBlocksChanged:function(n){return A.on(a.zW.ALL_BLOCKS_CHANGED,n),function(){return A.removeListener(a.zW.ALL_BLOCKS_CHANGED,n)}},resizeTerminalForBlock:function(n,e){if(w){var t=O.outputBlocks.find((function(e){return e.id===n}));if(!t)throw new Error("tried to resize terminal of non-existing block");t.isDone||w.send({resizeTerm:e})}}}}function N(n){var e,t=n.container,o=n.toolchain,i=n.beforeRun,s=n.packager,p=n.debuggest,h=n.mode;if("shellrunner"===h)e=f({container:t,toolchain:o,beforeRun:i});else if("outputs"===h){if(!s)throw new Error("outputs mode requires packager");if(!p)throw new Error("outputs mode requires debugger");e=m({container:t,toolchain:o,beforeRun:i,packager:s,debuggest:p})}else"html"===h&&(e=function(n){var e=n.beforeRun,t=n.container,o=function(){(function(n){s!==n&&(s=n,i.emit(a.zW.STATE_CHANGE,s))})("none"===f?a.Ah.IDLE:a.Ah.RUNNING)},i=(0,c.ZP)(),s=a.Ah.OFFLINE,f="none",p=Math.random();function h(){return(h=(0,r.Z)((function(){var n,t;return(0,u.__generator)(this,(function(r){switch(r.label){case 0:if(s!==a.Ah.IDLE&&s!==a.Ah.STOPPING)throw new Error("Cannot run while state is not IDLE or STOPPING, got state: "+s);return n=Math.random(),p=n,i.emit(a.zW.LOCAL_RUN),f="before-run",o(),t=l.kg.timeStart({replLanguage:"html"}),[4,e(t,{runId:n.toString(),type:"html"})];case 1:return r.sent(),p!==n||"none"===f||(f="running",o(),f="none",o()),[2]}}))}))).apply(this,arguments)}return t.onConnectionStateChanged((function(n){n===d.em.CONNECTED&&(f="none",o())})),{mode:"html",run:function(){return h.apply(this,arguments)},stopRun:function(){if(s!==a.Ah.RUNNING)throw new Error("stopRun must be called when running but got ".concat(s));f="none",o()},onStateChanged:function(n){return i.on(a.zW.STATE_CHANGE,n),function(){i.removeListener(a.zW.STATE_CHANGE,n)}},onLocalRun:function(n){return i.on(a.zW.LOCAL_RUN,n),function(){i.removeListener(a.zW.LOCAL_RUN,n)}},getRunState:function(){return s}}}({beforeRun:i,container:t}));if(!e)throw new Error("mode not supported: "+h);return e}!function(n){n.BEFORE_RUN="BEFORE_RUN",n.SERVER="SERVER",n.NONE="NONE",n.STOPPING="STOPPING"}(E||(E={}))},10841:function(n,e,t){var r,u,o;t.d(e,{Ah:function(){return u},kH:function(){return o},zW:function(){return r}}),function(n){n.STATE_CHANGE="STATE_CHANGE",n.OUTPUT="OUTPUT",n.LOCAL_RUN="RUN",n.BLOCK_CHANGED="BLOCK_CHANGED",n.ALL_BLOCKS_CHANGED="ALL_BLOCKS_CHANGED"}(r||(r={})),function(n){n.OFFLINE="OFFLINE",n.IDLE="IDLE",n.RUNNING="RUNNING",n.STOPPING="STOPPING"}(u||(u={})),function(n){n.EXECUTION="EXECUTION",n.DEBUGGER="DEBUGGER",n.PACKAGER="PACKAGER"}(o||(o={}))},25528:function(n,e,t){t.d(e,{Z:function(){return o}});var r=t(68525),u=t(97532);function o(n,e,t,o){if(!(null===n||void 0===n?void 0:n.runs))return[];var a=[];if(e=e.slice(),t){var c=e.indexOf(t);-1!==c&&(e.splice(c,1),e.splice(0,0,t))}if(o){var l=e.indexOf(o);-1!==l&&e.splice(l,1),e.splice(0,0,o)}var s=!0,f=!1,d=void 0;try{for(var p,h=e[Symbol.iterator]();!(s=(p=h.next()).done);s=!0){var g=p.value;if(g.match(/(\.[a-z0-9]+)$/)){var v=!0,E=!1,m=void 0;try{for(var N,C=n.runs[Symbol.iterator]();!(v=(N=C.next()).done);v=!0){var R=N.value;if(R.fileParam||R.optionalFileParam){var k=(0,r.rF)(R.fileTypeAttrs);null===k&&R.language&&(k=r.$R.from(R.language)),k&&(0,u.JW)(g,k)&&a.push({runner:R,filePath:g})}}}catch(b){E=!0,m=b}finally{try{v||null==C.return||C.return()}finally{if(E)throw m}}}}}catch(b){f=!0,d=b}finally{try{s||null==h.return||h.return()}finally{if(f)throw d}}var S=!0,A=!1,w=void 0;try{for(var O,D=n.runs[Symbol.iterator]();!(S=(O=D.next()).done);S=!0){var I=O.value;I.fileParam||a.push({runner:I})}}catch(b){A=!0,w=b}finally{try{S||null==D.return||D.return()}finally{if(A)throw w}}return function(n){n.sort((function(n,e){var t=i(n),r=i(e);return t!==r?t-r:n.runner.interpreter===e.runner.interpreter?0:n.runner.interpreter?-1:1}))}(a),a}function i(n){var e,t,r;return(null===(e=n.runner.id)||void 0===e?void 0:e.startsWith(".replit/"))?0:(null===(t=n.runner.id)||void 0===t?void 0:t.startsWith("module:"))?1:(null===(r=n.runner.id)||void 0===r?void 0:r.startsWith("language:"))?2:3}},19065:function(n,e,t){var r=t(57389),u=t(72006),o=t(4405),i=t(77637),a=t(74985),c=t(48306),l=t.n(c),s=(t(50959),t(97754)),f=t.n(s),d=t(38749);e.Z=function(n){var e,t=n.level,c=n.fontFamily,s=void 0===c?"sans-serif":c,p=n.fontWeight,h=void 0===p?"medium":p,g=n.foreground,v=void 0===g?1:g,E=n.align,m=void 0===E?"left":E,N=n.truncate,C=void 0!==N&&N,R=n.className,k=void 0===R?"":R,S=n.children,A=(0,i.Z)(n,["level","fontFamily","fontWeight","foreground","align","truncate","className","children"]),w="h".concat(t);return(0,a.BX)(w,(0,o.Z)((0,u.Z)({},A),{className:l().dynamic([["a6394f28fee3116d",[d.Z.levels[t],d.Z.fontFamily[s],d.Z.fontWeight[h],d.Z.foreground[v],m]]])+" "+(f()("heading",(e={},(0,r.Z)(e,k,Boolean(k)),(0,r.Z)(e,"truncate",C),e))||""),children:[S,(0,a.tZ)(l(),{id:"a6394f28fee3116d",dynamic:[d.Z.levels[t],d.Z.fontFamily[s],d.Z.fontWeight[h],d.Z.foreground[v],m],children:".heading.__jsx-style-dynamic-selector{font-size:".concat(d.Z.levels[t],";font-family:").concat(d.Z.fontFamily[s],";font-weight:").concat(d.Z.fontWeight[h],";color:").concat(d.Z.foreground[v],";text-align:").concat(m,"}.truncate.__jsx-style-dynamic-selector{overflow:hidden;white-space:nowrap;-o-text-overflow:ellipsis;text-overflow:ellipsis;max-width:100%}")})]}))}},8885:function(n,e,t){t.d(e,{Z:function(){return _}});var r=t(57135),u=t(2272),o=t(55749),i=t(9970),a=t(96583),c=t(74985),l=t(48306),s=t.n(l),f=t(19065),d=t(24743),p=t(27522),h=t(35301),g=t(2041),v=t(39541),E=t(90349),m=t(13424),N=t(72006),C=t(43119),R=t(71440),k=t(24635);function S(){var n=(0,C.Z)(["\n  query BSODComponent {\n    currentUser {\n      id\n      username\n      image\n      isStaff: hasRole(role: REPLIT_STAFF)\n      isAdmin: hasRole(role: ADMIN)\n    }\n  }\n"]);return S=function(){return n},n}var A={},w=(0,R.Ps)(S());var O=t(50959),D=/at (.+) \((https:\/\/.+\.js):(\d+):(\d+)\)/,I=/at (https:\/\/.+\.js):(\d+):(\d+)/;function b(n){return T.apply(this,arguments)}function T(){return T=(0,r.Z)((function(n){var e,c,l,s,f,d,p,h,g;function v(n){return E.apply(this,arguments)}function E(){return(E=(0,r.Z)((function(n){var t,r,u;return(0,a.__generator)(this,(function(o){switch(o.label){case 0:if(t=e.get(n))return[2,t];o.label=1;case 1:return o.trys.push([1,3,,4]),[4,fetch(n).then((function(n){return n.json()}))];case 2:return r=o.sent(),u=new c.SourceMapConsumer(r),e.set(n,u),[2,u];case 3:return o.sent(),[2,null];case 4:return[2]}}))}))).apply(this,arguments)}return(0,a.__generator)(this,(function(E){switch(E.label){case 0:e=new Map,E.label=1;case 1:return E.trys.push([1,3,,4]),[4,t.e(4552).then(t.t.bind(t,94552,19))];case 2:return c=E.sent(),[3,4];case 3:throw E.sent(),new Error("source-map not available");case 4:if(!(l=n.stack))throw new Error("expected error.stack to be defined");return s=l.split("\n").map((function(n){return n.trim()})).filter((function(n){return!!n})),f=(0,o.Z)(s),d=f[0],p=f.slice(1),[4,Promise.all(p.map(function(){var n=(0,r.Z)((function(n){var e,t,r,o,i,c,l,s,f;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:if(D.test(n)){if(!(o=D.exec(n)))throw new Error("expected result");i=(0,u.Z)(o.slice(2),3),e=i[0],t=i[1],r=i[2]}else{if(!I.test(n))return[2,n];if(!(c=I.exec(n)))throw new Error("expected result");l=(0,u.Z)(c.slice(1),3),e=l[0],t=l[1],r=l[2]}return[4,v("".concat(e,".map"))];case 1:return(s=a.sent())?(f=s.originalPositionFor({line:Number(t),column:Number(r)}),[2,"    at ".concat(f.source,":").concat(f.line,":").concat(f.column)]):[2,"    ".concat(n)]}}))}));return function(e){return n.apply(this,arguments)}}()))];case 5:return h=E.sent(),g=new Error,Object.assign(g,{name:n.name,stack:[d].concat((0,i.Z)(h)).join("\n"),message:n.message},n),[2,g]}}))})),T.apply(this,arguments)}var y=function(n){var e=n.bsod,t=(0,u.Z)(O.useState(null),2),o=t[0],i=t[1];O.useEffect((function(){(0,r.Z)((function(){var n;return(0,a.__generator)(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,b(e.error)];case 1:return n=t.sent(),i(n),[3,3];case 2:return t.sent(),[2];case 3:return[2]}}))}))()}),[e.error]);var l=O.useMemo((function(){var n,t,r,u;return o?null!==(r=null===(t=o.stack)||void 0===t?void 0:t.split("\n"))&&void 0!==r?r:[]:null!==(u=null===(n=e.error.stack)||void 0===n?void 0:n.split("\n"))&&void 0!==u?u:[]}),[o,e.error.stack]);return(0,c.tZ)("div",{css:[v.l0.p(16),v.l0.width("100%"),v.l0.backgroundColor.backgroundHigher,v.l0.borderRadius(8),v.l0.overflowY("hidden"),{whiteSpace:"pre"}],children:(0,c.tZ)(h.gC,{spacing:1,children:(0,c.BX)("div",{css:[v.l0.font.code,v.l0.fontSize(12)],children:[(0,c.BX)("div",{children:["Origin: ",e.origin]}),null===l||void 0===l?void 0:l.map((function(n,e){var t=n.replace("webpack-internal:///./",""),r=t.includes("node_modules");return(0,c.tZ)("div",{css:r?v.l0.color.foregroundDimmest:null,children:t},e)}))]})})})},_=function(){var n,e,t=(0,u.Z)((0,m.qg)(),1)[0],r=function(n){var e=(0,N.Z)({},A,n);return k.a(w,e)}({skip:!t}),o=r.data,i=r.loading;(0,m.ic)();if(!t)return null;var a=(null===o||void 0===o||null===(n=o.currentUser)||void 0===n?void 0:n.isStaff)||(null===o||void 0===o||null===(e=o.currentUser)||void 0===e?void 0:e.isAdmin);return(0,c.BX)(g.u,{isOpen:!0,preventClose:!0,onRequestClose:function(){},maxWidth:872,children:[(0,c.BX)(h.gC,{spacing:2,align:"center",children:[(0,c.tZ)(f.Z,{level:2,children:" Your Repl is having a bit of trouble."}),(0,c.tZ)("div",{className:s().dynamic([["a3ce5d5b024408a4",[v.n0]]])+" spacer"}),(0,c.tZ)(d.Z,{size:"large",children:"The issue has been logged and the Replit team will look into it. Try reloading the page to get back to coding."}),(0,c.tZ)("div",{css:[v.l0.p(16),v.l0.width("100%"),v.l0.backgroundColor.backgroundHigher,v.l0.borderRadius(8)],className:s().dynamic([["a3ce5d5b024408a4",[v.n0]]]),children:(0,c.BX)(h.gC,{spacing:1,children:[!i&&(null===o||void 0===o?void 0:o.currentUser)?(0,c.BX)(h.Ug,{spacing:2,align:"center",children:[(0,c.tZ)(E.q,{src:o.currentUser.image,username:o.currentUser.username,size:48}),(0,c.tZ)(d.Z,{size:"medium",children:o.currentUser.username})]}):null,(0,c.BX)("div",{css:[v.l0.font.code],className:s().dynamic([["a3ce5d5b024408a4",[v.n0]]]),children:["Error: ",t.eventId]})]})}),a?(0,c.tZ)(y,{bsod:t}):null,(0,c.tZ)("div",{className:s().dynamic([["a3ce5d5b024408a4",[v.n0]]])+" spacer"}),(0,c.tZ)(p.Z,{onClick:function(){return window.location.reload()},color:"primary",filled:!0,fullWidth:!0,children:"reload"}),!1]}),(0,c.tZ)(s(),{id:"a3ce5d5b024408a4",dynamic:[v.n0],children:".sentry-error-embed-wrapper{z-index:".concat(v.n0,"!important}")})]})}},13424:function(n,e,t){t.d(e,{I7:function(){return E},Id:function(){return v},ic:function(){return C},jT:function(){return g},qg:function(){return N},uV:function(){return m}});var r=t(72006),u=t(4405),o=t(91398),i=t(92683),a=t(92153),c=t(1468),l=t(82325),s=t(50959),f=(0,o.cn)(null),d=(0,o.cn)(null,(function(n,e,t){var o=t.error,i=t.tags,a=t.extras,l=t.origin,s=(0,u.Z)((0,r.Z)({},i),{origin:l});"statusCode"in o?s.statusCode=o.statusCode:"status"in o&&(s.statusCode=o.status);var d=(0,c.Qw)(o,{tags:s,extras:a});e(f,{eventId:d,error:o,sentry:{tags:s,extras:a},origin:l})})),p=(0,o.cn)(null,(function(n,e){e(f,null)})),h=(0,o.cn)(new Map);function g(){return(0,l.lV)((0,s.useCallback)((function(n,e,t){var r=t.filePath;return n(h).get(r)}),[]))}function v(){return(0,l.lV)((0,s.useCallback)((function(n,e,t){var r=t.filePath,u=t.version;e(h,(function(n){return(0,a.ZP)(n,(function(n){n.set(r,u)}))}))}),[]))}function E(){return(0,l.lV)((0,s.useCallback)((function(n,e,t){var r=t.filePath;e(h,(function(n){return(0,a.ZP)(n,(function(n){n.delete(r)}))}))}),[]))}function m(){return(0,i.b9)(d)}function N(){return[(0,i.Dv)(f),m()]}function C(){return(0,i.b9)(p)}},22126:function(n,e,t){function r(n,e){return{ok:!1,error:n,errorExtras:e}}function u(n){return{ok:!0,value:n}}t.d(e,{Ok:function(){return u},U:function(){return r}});var o={Ok:u,Err:r};e.Z=o},51446:function(n,e,t){t.d(e,{Y:function(){return o}});var r=t(57135),u=t(96583);function o(n){return i.apply(this,arguments)}function i(){return(i=(0,r.Z)((function(n){var e,t;return(0,u.__generator)(this,(function(r){return e=n.container,t=n.service,[2,new Promise((function(n){var r=e.openChannel({service:t},(function(e){var t=e.channel;return n([t,r]),r}))}))]}))}))).apply(this,arguments)}},22946:function(n,e,t){t.d(e,{Z:function(){return h}});var r,u=t(57135),o=t(2272),i=t(96583),a=t(29118),c=t(88254),l=t(45005),s=t.n(l),f=t(27327),d=t(22126),p=t(51446);function h(n){var e=n.container,t=n.toolchain,l=function(n){var e=v.get(n);return e||(e={packagerChannel:null,didCallOpenChannel:!1,closeChannel:null},v.set(n,e),e)},h=function(n){var t=l(n);if(t.didCallOpenChannel)throw new Error("Already called open channel");t.didCallOpenChannel=!0,t.closeChannel=e.openChannel({service:"packager3",name:n||"packager"},(function(e){var u=e.channel;return u.onCommand((function(e){if(null!=e.state){var t=e.state===a.api.State.Running;g.emit(r.STATE_CHANGED,t,n)}else null!=e.output?g.emit(r.OUTPUT,e.output,n):null!=e.error&&g.emit(r.ERROR,e.error,n)})),n?u.request({packageSetPackagerRequest:{packagerId:n}}).then((function(){t.packagerChannel=u,g.emit(r.CHANNEL_OPENED,u,n)})):(t.packagerChannel=u,g.emit(r.CHANNEL_OPENED,u,n)),function(){t.packagerChannel=null}}))},g=(0,f.ZP)(),v=new Map;function E(n){return m.apply(this,arguments)}function m(){return m=(0,u.Z)((function(n){var t,r,u,a,c=arguments;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return t=c.length>1&&void 0!==c[1]?c[1]:0,[4,(0,p.Y)({container:e,service:"packager3"})];case 1:return r=o.Z.apply(void 0,[i.sent(),2]),u=r[0],a=r[1],n?[4,u.request({packageSetPackagerRequest:{packagerId:n}})]:[3,3];case 2:i.sent(),i.label=3;case 3:if("open"!==u.status){if(t>5)throw new Error("Failed to getAnonymousPackagerChannel");return[2,E(n,t+1)]}return[2,[u,a]]}}))})),m.apply(this,arguments)}function N(n){return C.apply(this,arguments)}function C(){return(C=(0,u.Z)((function(n){var e;return(0,i.__generator)(this,(function(t){return(e=l(n)).didCallOpenChannel||h(n),e.packagerChannel&&"open"===e.packagerChannel.status?[2,e.packagerChannel]:[2,new Promise((function(e){g.once(r.CHANNEL_OPENED,(function(t,r){r===n&&e(t)}))}))]}))}))).apply(this,arguments)}return{addPackages:function(n,e){return(0,u.Z)((function(){var t,r,u;return(0,i.__generator)(this,(function(o){switch(o.label){case 0:return[4,N(e)];case 1:return t=o.sent(),r=n.map((function(n){return{name:n.name,spec:n.version}})),[4,t.request({packageAdd:{pkgs:r}})];case 2:return(u=o.sent()).channelClosed?[2,!1]:[2,Boolean(u.ok)]}}))}))()},removePackages:function(n,e){return(0,u.Z)((function(){var t,r,u;return(0,i.__generator)(this,(function(o){switch(o.label){case 0:return[4,N(e)];case 1:return t=o.sent(),r=n.map((function(n){return{name:n}})),[4,t.request({packageRemove:{pkgs:r}})];case 2:return(u=o.sent()).channelClosed?[2,!1]:[2,Boolean(u.ok)]}}))}))()},searchPackages:function(n,e){return(0,u.Z)((function(){var r,u,a,l,f,d,p,h;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return[4,t.getConfigs()];case 1:if(r=i.sent(),u=r.packagers,a=u.find((function(n){return n.id===e})),(null===(l=null===a||void 0===a?void 0:a.language)||void 0===l?void 0:l.includes("python"))||"pygame"===l)try{return[2,s()("https://pipsearch.replit.com/search?name="+encodeURIComponent(n),{mode:"cors"}).then((function(n){return n.json()}))]}catch(g){return c.Tb(g),[2,[]]}return[4,E(e)];case 2:return f=o.Z.apply(void 0,[i.sent(),2]),d=f[0],p=f[1],[4,d.request({packageSearch:{query:n}})];case 3:return(h=i.sent()).channelClosed?[2,[]]:(p(),"packageSearchResp"===h.body&&h.packageSearchResp?[2,h.packageSearchResp.results||[]]:(c.Tb(new Error("Unknown packager3 command ".concat(h.body,". ")+"Expected packageSearchResp. Received error: ".concat(h.error))),[2,[]]))}}))}))()},fetchPackageInfo:function(n,e){return(0,u.Z)((function(){var t,r,u,a;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return[4,E(e)];case 1:return t=o.Z.apply(void 0,[i.sent(),2]),r=t[0],u=t[1],[4,r.request({packageInfo:{pkg:{name:n}}})];case 2:return(a=i.sent()).channelClosed?[2,void 0]:(u(),"packageInfoResp"===a.body&&a.packageInfoResp?[2,a.packageInfoResp.pkg||void 0]:(c.Tb(new Error("Unknown packager3 command ".concat(a.body,". ")+"Expected packageInfoResp. Received error: ".concat(a.error))),[2,void 0]))}}))}))()},installPackages:function(n){return(0,u.Z)((function(){var e,t;return(0,i.__generator)(this,(function(r){switch(r.label){case 0:return[4,N(n)];case 1:return[4,r.sent().request({packageInstall:{useNewResponse:!0}})];case 2:return(e=r.sent()).error?[2,(0,d.U)(e.error)]:e.channelClosed?[2,(0,d.U)("ChannelClosed")]:(t=e.packageInstallResponse)?[2,(0,d.Ok)(t)]:[2,(0,d.U)("No package install response found")]}}))}))()},listSpecfile:function(n){return(0,u.Z)((function(){var e,t,r,u,a,l,s;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return[4,E(n)];case 1:return e=o.Z.apply(void 0,[i.sent(),2]),t=e[0],r=e[1],[4,t.request({packageListSpecfile:{}})];case 2:if((u=i.sent()).channelClosed)return[2,{packages:null,error:"channel closed"}];switch(r(),u.body){case"error":return[2,{packages:null,error:"list specfile failed: ".concat(u.error)}];case"packageListSpecfileResp":return(l=null===(a=u.packageListSpecfileResp)||void 0===a?void 0:a.pkgs)?[2,{packages:l,error:null}]:[2,{packages:null,error:"list specfile returned an empty response"}];default:return s="Unknown packager3 listSpecFile command ".concat(u.body,". ")+"Expected error or packageListSpecfileResp",c.Tb(new Error(s)),[2,{packages:null,error:s}]}return[2]}}))}))()},getPackagerIds:function(){return Array.from(v.keys())},clearPackager:function(n){var e=v.get(n);(null===e||void 0===e?void 0:e.closeChannel)&&e.closeChannel(),v.delete(n)},onOutput:function(n){return g.on(r.OUTPUT,n),function(){g.removeListener(r.OUTPUT,n)}},onError:function(n){return g.on(r.ERROR,n),function(){g.removeListener(r.ERROR,n)}},onStateChanged:function(n){return g.on(r.STATE_CHANGED,n),function(){g.removeListener(r.STATE_CHANGED,n)}}}}!function(n){n.OUTPUT="OUTPUT",n.ERROR="ERROR",n.STATE_CHANGED="STATE_CHANGED",n.CHANNEL_OPENED="CHANNEL_OPENED"}(r||(r={}))},62069:function(n,e,t){t.d(e,{Z:function(){return a}});var r=t(57135),u=t(96583),o=t(50968),i=t(88688);function a(n){var e=n.container,t=n.dotReplit,a=(0,o.u)(null),c=(0,o.u)(null),l=(0,o.u)(null);return e.openChannel({service:"toolchain"},(function(n){var e=n.channel;l.set(e);var t=e.onCommand((function(n){n.toolchainChanged?a.current=n.toolchainChanged.configs:n.nixModulesChanged&&(c.current=n.nixModulesChanged.modules)}));return e.request({toolchainGetRequest:{}}).then((function(n){var e;a.current=(null===(e=n.toolchainGetResponse)||void 0===e?void 0:e.configs)||null})),e.request({nixModulesGetRequest:{}}).then((function(n){var e;c.current=(null===(e=n.nixModulesGetResponse)||void 0===e?void 0:e.modules)||null})),function(){t()}})),{configs:a,modules:c,getConfigs:function(){return a.current?Promise.resolve(a.current):new Promise((function(n){var e=a.subscribe((function(t){if(e(),null===t)throw new Error("Returned toolchain config should not be null");n(t)}))}))},getRegistry:function(){return(0,r.Z)((function(){return(0,u.__generator)(this,(function(n){switch(n.label){case 0:return[4,l.current?Promise.resolve(l.current):new Promise((function(n){var e=l.subscribe((function(t){t&&(e(),n(t))}))}))];case 1:return[4,n.sent().request({nixModulesGetRegistryRequest:{}})];case 2:return[2,n.sent().nixModulesGetRegistryResponse||null]}}))}))()},addModule:function(n){return(0,r.Z)((function(){var e,r,o;return(0,u.__generator)(this,(function(u){switch(u.label){case 0:return r=[],[4,t.getConfig()];case 1:if((o=u.sent()).error&&o.error!==i.Yt.NotFound)throw new Error("Failed to read .replit"+o.error);return-1!==(r=(null===(e=o.config)||void 0===e?void 0:e.modules)||[]).indexOf(n)?[3,3]:(r.push(n),[4,t.updateDotReplit([{op:"add",path:"modules",value:JSON.stringify(r)}])]);case 2:u.sent(),u.label=3;case 3:return[2]}}))}))()},removeModule:function(n){return(0,r.Z)((function(){var e,r,o,a;return(0,u.__generator)(this,(function(u){switch(u.label){case 0:return r=[],[4,t.getConfig()];case 1:if((o=u.sent()).error&&o.error!==i.Yt.NotFound)throw new Error("Failed to read .replit"+o.error);return r=(null===(e=o.config)||void 0===e?void 0:e.modules)||[],(a=r.filter((function(e){if(n===e)return!1;var t=e.match(/^(.+)\.nix$/);return(t&&t[1])!==n}))).length===r.length?[2]:[4,t.updateDotReplit([{op:"add",path:"modules",value:JSON.stringify(a)}])];case 2:return u.sent(),[2]}}))}))()},upgradeModule:function(n,e){return(0,r.Z)((function(){var r,o,a,c;return(0,u.__generator)(this,(function(u){switch(u.label){case 0:return[4,t.getConfig()];case 1:if((o=u.sent()).error&&o.error!==i.Yt.NotFound)throw new Error("Failed to read .replit"+o.error);return a=(null===(r=o.config)||void 0===r?void 0:r.modules)||[],c=a.map((function(t){return n===t?e:t})),[4,t.updateDotReplit([{op:"add",path:"modules",value:JSON.stringify(c)}])];case 2:return u.sent(),[2]}}))}))()}}}}}]);
//# sourceMappingURL=5997-afd925bfc6540dd7.js.map