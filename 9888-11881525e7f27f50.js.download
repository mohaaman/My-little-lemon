"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9888],{89888:function(e,t,r){r.d(t,{Z:function(){return be}});var n=r(57389),a=r(74985),o=r(57135),i=r(96583),s=r(94971),u=r(95572),l=r(8622),c=r(32104),h=r(66091),d=r(5683),f=r(72006),p=r(4405),g=r(83451),m=r(45347),v=r(24824),Z=r(55021),b=r(625),w=function(e){(0,d.Z)(r,e);var t=(0,m.Z)(r);function r(e){var n;return(0,h.Z)(this,r),(n=t.call(this,e)).name="UnauthorizedError",n.status=401,n}return r}((0,g.Z)(Error)),y=function(e){var t;e.isLoggedIn&&(0,b.yV)((0,p.Z)((0,f.Z)({id:e.id.toString(),email:e.email,roles:e.roles,verified:e.isVerified,emailPreference:e.emailNotifications,createdAt:e.timeCreated},!!e.loginMethod&&{loginMethod:e.loginMethod}),{signupMethod:null!==(t=e.signupMethod)&&void 0!==t?t:Z.OU}))};function C(e){return S.apply(this,arguments)}function S(){return(S=(0,o.Z)((function(e){var t,r,n,a,o,s,u,l,c,h;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:t=e.username,r=e.email,n=e.password,a=e.teacher,o=e.organization,s=e.hCaptchaResponse,u=e.hCaptchaSiteKey,l=e.privacyInvite,c=e.source,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,(0,v.uz)("/signup",(0,p.Z)((0,f.Z)((0,p.Z)((0,f.Z)({},t?{username:t}:{}),{email:r,password:n}),a?{teacher:a}:{},o?{organization:o}:{},l?{privacyInvite:l}:{}),{hCaptchaResponse:s,hCaptchaSiteKey:u,source:c,formVariant:"d"}))];case 2:return h=i.sent(),[3,4];case 3:return[2,{isLoggedIn:!1,error:i.sent()}];case 4:return y(h),[2,h]}}))}))).apply(this,arguments)}function T(e){return _.apply(this,arguments)}function _(){return(_=(0,o.Z)((function(e){var t,r,n,a,o,s,u,l,c,h;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:t=e.username,r=e.password,n=e.teacher,a=e.hCaptchaResponse,o=e.hCaptchaSiteKey,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,(0,v.uz)("/login",(0,p.Z)((0,f.Z)({username:t,password:r},n?{teacher:n}:{}),{hCaptchaResponse:a,hCaptchaSiteKey:o}))];case 2:return s=i.sent(),[3,4];case 3:return u=i.sent(),401===(null===(l=(h=u).extras)||void 0===l||null===(c=l.responseData)||void 0===c?void 0:c.status)&&(u.status=h.extras.responseData.status),[2,{isLoggedIn:!1,error:u}];case 4:return y(s),[2,s]}}))}))).apply(this,arguments)}function k(){return E.apply(this,arguments)}function E(){return(E=(0,o.Z)((function(){var e,t;return(0,i.__generator)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,(0,v.LK)("/is_authenticated")];case 1:return e=r.sent(),[3,3];case 2:return[2,{isLoggedIn:!1,error:r.sent()}];case 3:return e.success?(y(e.user),[2,e.user]):((t=new w("Unauthorized")).status=401,[2,{isLoggedIn:!1,error:t}])}}))}))).apply(this,arguments)}var R=r(3425),L=r(12318),U=r(85368),D=r(45510),F=r(39541),G=r(27691),P=r(82568),x=r(63837),B=r(7258),I=r.n(B);function A(e){var t=e.user,r=I().get("shouldUseMobileAppAuthComplete");if("string"!==typeof r||r.length<1)return null;var n=t.postLoginRedirectUrl;return"string"!==typeof n||n.length<1?null:"/authComplete?redirectUrl=".concat(encodeURI(n))}var V=r(88254),W=r(77511),z=r(90171),M=r(50959),X=r(59545);function O(e){if(e.error)return[{message:e.error.message,state:"error"}];if(e.warning)return[{message:e.warning.message,state:"warning"}];if(e.value){if(e.isValid)return[{message:"",state:"success"}];if(e.touched)return[{message:"",state:"loading"}]}}var H=(0,P.X)({form:[F.l0.colWithGap(8),F.l0.width("100%")],buttonWrapper:[F.l0.colWithGap(4)],button:[F.l0.borderRadius(4)],buttonLoading:[G.p.backgroundPulse(F.TV.accentPrimaryDimmest,F.TV.accentPrimaryDimmer)],buttonSuccess:{cursor:"default"}});var N=function(e){var t=e.onSubmit,r=e.trackSource,n=void 0===r?"explicit":r,h=(0,z.useRouter)(),d=(0,X.F)(),f=d.privacyInvite,p=d.isTeacher,g=d.seededEmail,m=d.seededUsername,v=(0,M.useState)(!1),Z=v[0],w=v[1],y=(0,M.useState)(!1),S=y[0],T=y[1],_=(0,L.Y)(f&&m?m:"",f?u.Z.username:function(){return null}),k=(0,L.Y)(f?"".concat(m,"@teams.noreply.replit.com"):g||"",p?u.Z.teacherEmail:u.Z.email),E=(0,L.Y)("",u.Z.password),F=(0,L.Y)("",u.Z.school),G=function(){var e=(0,o.Z)((function(e){var r,a,o,s,u;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return e.preventDefault(),w(!0),_.isValid?[3,2]:[4,_.validate()];case 1:if(i.sent())return w(!1),[2];i.label=2;case 2:return k.isValid?[3,4]:[4,k.validate()];case 3:if(i.sent())return w(!1),[2];i.label=4;case 4:return E.isValid?[3,6]:[4,E.validate()];case 5:if(i.sent())return w(!1),[2];i.label=6;case 6:return!p||F.isValid?[3,8]:[4,F.validate()];case 7:if(i.sent())return w(!1),[2];i.label=8;case 8:return i.trys.push([8,10,,11]),[4,(0,R.ZP)(R.o$,(function(){(0,b.j)(b.U3.AUTH_FORM_CAPTCHA_TRIGGERED,{authenticationType:"signup"})}))];case 9:return r=i.sent(),[3,11];case 10:return a=i.sent(),V.Tb(a,(function(e){return e.setTag("bonsai",(0,W.Fj)(h))})),t({error:"Something went wrong trying to submit. Please try again."}),w(!1),[2];case 11:return[4,C({username:_.value,password:E.value,privacyInvite:f,email:k.value,teacher:p,organization:F.value,hCaptchaResponse:r,hCaptchaSiteKey:R.o$,source:n})];case 12:if(o=i.sent(),w(!1),"error"in o){if(s=o.error,t({error:s.message||"Something went wrong"}),s.status&&s.status>=500)throw s;return[2]}return T(!0),(u=A({user:o}))?(window.location.href=u,[2]):(t({user:o,newUser:!0,organization:F.value}),[2])}}))}));return function(t){return e.apply(this,arguments)}}(),P=p&&!F.value,B=f&&!k.value;return(0,a.tZ)("form",{onSubmit:G,css:H.form,children:(0,a.BX)(U.G,{css:H.form,children:[f?(0,a.tZ)(s.ZP,{label:"Use our default or pick a username that\u2019s not your real name.",name:"username",placeholder:"Username",onBlur:_.handleBlur,validationResults:O(_),onChange:function(e){return _.setValue(e.target.value)},value:_.value,autoComplete:"on",autoCorrect:"off",autoCapitalize:"off"}):(0,a.tZ)(s.ZP,{name:"email",placeholder:"Email","aria-label":"Email",onBlur:k.handleBlur,validationResults:O(k),onChange:function(e){return k.setValue(e.target.value)},value:k.value,autoComplete:"on",autoCorrect:"off",autoCapitalize:"off"}),(0,a.tZ)(s.ZP,{name:"password",type:"password","aria-label":"Password",placeholder:"Password",onBlur:E.handleBlur,validationResults:O(E),onChange:function(e){return E.setValue(e.target.value)},value:E.value}),p?(0,a.tZ)(s.ZP,{type:"text",name:"organization",placeholder:"School or Organization name","aria-label":"School or Organization name",onBlur:F.handleBlur,validationResults:O(F),onChange:function(e){return F.setValue(e.target.value)},value:F.value}):null,(0,a.tZ)(U.G,{css:H.buttonWrapper,children:(0,a.tZ)(D.zx,{type:"submit",colorway:S?"positive":"primary",big:!0,stretch:!0,disabled:!E.value||B||P||S||Z,iconLeft:Z?(0,a.tZ)(c.Z,{}):S?(0,a.tZ)(x.Z,{}):(0,a.tZ)(l.Z,{}),dataCy:"signup-create-account",text:"Create Account",css:[H.button,Z?H.buttonLoading:{},S||Z?H.buttonSuccess:{}]})}),null]})})},j=r(82893),Y=r.n(j),K=r(22770),q=r(35004),Q=r(61284),$=r(81669),J=r(97807),ee=(0,P.X)({form:[F.l0.colWithGap(8),F.l0.width("100%")],buttonWrapper:[F.l0.colWithGap(4)],button:[F.l0.borderRadius(4)],buttonLoading:[G.p.backgroundPulse(F.TV.accentPrimaryDimmest,F.TV.accentPrimaryDimmer)],buttonSuccess:{color:"".concat(F.TV.foregroundDefault," !important"),cursor:"default"},secondaryAction:[F.l0.width("100%"),F.l0.textAlign.center]});function te(e){var t=e.onSubmit,r=e.trackSource,n=(0,X.F)().isTeacher,u=(0,M.useState)(!1),l=u[0],h=u[1],d=(0,M.useState)(!1),f=d[0],p=d[1],g=(0,M.useRef)(null),m=(0,L.Y)("",(function(){return null})),v=(0,L.Y)("",(function(){return null})),Z=(0,z.useRouter)(),w=function(){var e=(0,o.Z)((function(e){var a,o,s,u,c,d;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return e&&e.preventDefault&&e.preventDefault(),l?[2]:(h(!0),[4,m.validate()]);case 1:return i.sent()?(null===(a=g.current)||void 0===a||a.focus(),h(!1),[2]):[4,v.validate()];case 2:if(i.sent())return h(!1),[2];i.label=3;case 3:return i.trys.push([3,5,,6]),[4,(0,R.ZP)(void 0,(function(){(0,b.j)(b.U3.AUTH_FORM_CAPTCHA_TRIGGERED,{authenticationType:"login"})}))];case 4:return o=i.sent(),[3,6];case 5:return s=i.sent(),V.Tb(s,(function(e){return e.setTag("bonsai",(0,W.Fj)(Z))})),t({error:"Something went wrong trying to submit. Please try again."}),h(!1),[2];case 6:return[4,T({username:m.value,password:v.value,hCaptchaResponse:o,hCaptchaSiteKey:R.wE,teacher:n})];case 7:if(u=i.sent(),h(!1),"error"in u){if(c=u.error,t({error:c.message||"Something went wrong"}),c.status&&c.status>=500)throw c;return[2]}return p(!0),(0,b.j)(b.U3.LOGIN_SUCCESSFUL,{source:r,siteVersion:(0,J.Z)()?"firewall":"regular"}),(d=A({user:u}))?(window.location.href=d,[2]):(t({user:u}),[2])}}))}));return function(t){return e.apply(this,arguments)}}();return(0,a.tZ)("form",{className:"login-form",onSubmit:w,method:"POST",action:"/login",css:ee.form,children:(0,a.BX)(U.G,{css:ee.form,children:[(0,a.tZ)(s.ZP,{ref:g,name:"username",placeholder:"Email or Username","aria-label":"Email or Username",value:m.value,onBlur:m.handleBlur,onChange:function(e){return m.setValue(e.currentTarget.value)},autoComplete:"on",autoFocus:!0,autoCorrect:"off",autoCapitalize:"off",validationResults:m.error?[{message:m.error.message,state:"error"}]:void 0,required:!0}),(0,a.tZ)(K.Z,{validated:!1,name:"password",placeholder:"Password","aria-label":"Password",value:v.value,onBlur:v.handleBlur,onChange:function(e){return v.setValue(e.currentTarget.value)},validationResults:v.error?[{message:v.error.message,state:"error"}]:void 0,required:!0},"password"),(0,a.tZ)(D.zx,{type:"submit",onClick:w,colorway:f?"positive":"primary",big:!0,stretch:!0,disabled:!v.value||!m.value||l||f,iconRight:l?(0,a.tZ)(c.Z,{}):f?(0,a.tZ)(x.Z,{}):(0,a.tZ)(q.Z,{}),dataCy:"log-in-btn",text:"Log In",css:[ee.button,l?ee.buttonSuccess:{},f||l?ee.buttonSuccess:{}]}),(0,a.tZ)($.Z,{}),(0,a.tZ)(Q.xv,{css:ee.secondaryAction,multiline:!1,children:(0,a.tZ)(Y(),{href:"/forgot",passHref:!0,children:(0,a.tZ)("a",{css:ee.secondaryAction,children:"Forgot password?"})})}),!1]})})}var re=r(9970),ne=r(27522),ae=(0,P.X)({ssoButton:[F.l0.height(36),{borderRadius:"6px !important"}],ssoWrapper:[F.l0.rowWithGap(8),F.l0.align.center,F.l0.justify.center],ssoText:[F.l0.fontSize(15),F.l0.color.foregroundDefault,F.l0.fontWeight.normal],ssoIcon:[F.l0.width(20),F.l0.height(20),{backgroundSize:"contain"}]}),oe=function(e){var t=e.onClick,r=e.provider;return(0,a.tZ)(ne.Z,{onClick:t,fullWidth:!0,size:"small",css:ae.ssoButton,children:(0,a.BX)(U.G,{css:ae.ssoWrapper,children:[(0,a.tZ)("div",{style:{backgroundImage:"url(/public/images/".concat(r,".png)")},css:[ae.ssoIcon,("github"===r||"apple"===r)&&{filter:"brightness(0) invert(1)"}]}),(0,a.BX)(Q.xv,{css:ae.ssoText,multiline:!1,children:["Continue with"," ","".concat(r.substring(0,1).toUpperCase()).concat(r.substring(1))]})]})})},ie=(0,P.X)({ssoContainer:[F.l0.width(280),F.l0.colWithGap(8)]});var se=function(e){var t,r=e.onSubmit,n=e.source,s=(0,X.F)(),u=s.isLogin,l=s.isTeacher,c=s.isGoogleClassroom,h=(0,M.useRef)(null),d=["google","github"],f=(0,re.Z)(d).concat(["facebook","apple"]),p=function(e,t){e.preventDefault();var a="/auth/".concat(t,"/get?close=1");l&&(a+="&teacher=1"),n&&(a+="&source=".concat(n)),(0,b.j)(b.U3.AUTH_FORM_SSO_REQUESTED,{provider:t,authenticationType:u?"login":"signup",isTeacher:l?"true":"false"});var s=window.open(a),c=function(){var e=(0,o.Z)((function(e){var a,o,c;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return e.origin!==window.location.origin&&"https://replit.com"!==e.origin&&"https://repl.it"!==e.origin&&"https://firewalledreplit.com"!==e.origin&&"https://staging.replit.com"!==e.origin||"authenticated"!==e.data&&"authenticated:new_user"!==e.data?[2]:(h.current&&h.current(),s&&s.close(),[4,k()]);case 1:if("error"in(a=i.sent())){if(o=a.error,r({error:o.message||"Something went wrong"}),(0,b.j)(b.U3.AUTH_FORM_SUBMISSION_FAILED,{provider:t,authenticationType:u?"login":"signup",isTeacher:l?"true":"false",errorStatus:o.status}),401!==o.status)throw o;return[2]}return c="authenticated:new_user"===e.data,u&&!c&&(0,b.j)(b.U3.LOGIN_SUCCESSFUL,{source:n,siteVersion:(0,J.Z)()?"firewall":"regular"}),r({user:a,social:!0,newUser:c}),[2]}}))}));return function(t){return e.apply(this,arguments)}}();window.addEventListener("message",c),h.current=function(){h.current=null,window.removeEventListener("message",c)}};return(0,M.useEffect)((function(){return function(){h.current&&h.current()}}),[]),t=c?[(0,a.tZ)(oe,{provider:"google",onClick:function(e){return p(e,"google")}},"google")]:u?f.map((function(e){return(0,a.tZ)(oe,{onClick:function(t){return p(t,e)},provider:e},e)})):d.map((function(e){return(0,a.tZ)(oe,{onClick:function(t){return p(t,e)},provider:e},e)})),(0,a.tZ)(U.G,{css:ie.ssoContainer,children:t})},ue=r(33280),le=r(41666),ce=(0,P.X)({signupFormEmailDisclaimerContainer:[F.l0.width("100%")],signupFormEmailDisclaimer:[F.l0.fontSize(F.TV.fontSizeSmall),F.l0.textAlign.center,F.l0.color.foregroundDimmer,F.l0.width("100%")],link:[F.l0.fontWeight.bold,F.l0.color.foregroundDefault,{textDecoration:"none"}]}),he=function(){return(0,a.tZ)(U.G,{css:ce.signupFormEmailDisclaimerContainer,children:(0,a.BX)(Q.xv,{css:ce.signupFormEmailDisclaimer,children:["By continuing, you agree to Replit's",(0,a.tZ)("br",{}),(0,a.tZ)("a",{css:ce.link,href:"/site/terms",target:"_blank",children:"Terms of Service"})," ","and"," ",(0,a.tZ)("a",{css:ce.link,href:"/site/privacy",target:"_blank",children:"Privacy Policy"})]})})},de=(0,P.X)({footerLinkWrapper:[F.l0.textAlign.center,F.l0.color.foregroundDimmest],footerLink:[F.l0.color.accentPrimaryStronger],footerContainer:[F.l0.width(280),F.l0.pt(32),F.l0.align.center,F.l0.bottom(24),F.l0.colWithGap(16)],footerContainerModal:[F.l0.pt(24)],cssLastRow:[F.l0.rowWithGap(16),F.l0.align.center],heightWrapper:[F.l0.height(132)]}),fe=function(){var e=(0,X.E)(),t=(0,X.F)().isLogin,r=function(r){r.preventDefault(),(0,le.uk)(t),e({isLogin:!t})};return(0,a.BX)(Q.xv,{css:de.footerLinkWrapper,variant:"small",multiline:!1,children:[t?"New to Replit? ":"Already have an account? ",(0,a.tZ)("a",{role:"button",tabIndex:0,onKeyDown:function(e){"Enter"===e.key&&r(e)},onClick:function(e){return r(e)},css:de.footerLink,children:t?"Sign up":"Log in"})]})},pe=function(){var e=(0,X.E)(),t=(0,X.F)().isTeacher,r=function(r){r.preventDefault(),e({isTeacher:!t})};return(0,a.tZ)(Q.xv,{css:de.footerLinkWrapper,variant:"small",multiline:!1,children:(0,a.tZ)("a",{role:"button",tabIndex:0,onKeyDown:function(e){"Enter"===e.key&&r(e)},onClick:function(e){return r(e)},css:de.footerLink,children:t?"Not a teacher?":"Sign up for teachers"})})},ge=function(){var e=(0,X.F)(),t=e.isLogin,r=e.isModal;return(0,a.tZ)(U.G,{css:de.heightWrapper,children:(0,a.BX)(U.G,{css:[de.footerContainer,r?de.footerContainerModal:null],children:[(0,a.tZ)(ue.R,{}),(0,a.tZ)(fe,{}),t?null:(0,a.tZ)(he,{}),(0,a.BX)(U.G,{css:de.cssLastRow,children:[(0,a.tZ)(Q.xv,{css:de.footerLinkWrapper,variant:"small",multiline:!1,children:(0,a.tZ)("a",{href:"https://replit.com/help",target:"_blank",rel:"noopener noreferrer",css:de.footerLink,children:"Get help"})}),(0,a.tZ)(Q.xv,{multiline:!1,children:"\u2022"}),(0,a.tZ)(pe,{})]})]})})},me=r(25198),ve=function(){var e=(0,X.F)(),t=e.isLogin,r=e.isTeacher,n=e.isGoogleClassroom,o=e.customAuthMessage;if("customHeader"in e&&e.customHeader)return(0,a.tZ)(a.HY,{});if(n)return(0,a.tZ)(a.HY,{});var i="Create a Replit account";return t?i="Log in to your account":!n&&r&&(i="Create a teacher account"),(0,a.BX)(a.HY,{children:[(0,a.tZ)(Q.h4,{variant:"headerDefault",level:1,children:i}),(0,a.tZ)($.Z,{}),o?(0,a.BX)(a.HY,{children:[(0,a.tZ)(me.E,{colorway:"primary",text:o}),(0,a.tZ)($.Z,{})]}):null,(0,a.tZ)($.Z,{})]})},Ze=(0,P.X)({authForm:[F.l0.pt(128),F.l0.width(280),(0,n.Z)({margin:"auto"},F.BC.max("mobileMax"),[F.l0.pt(96)])],authFormModal:[F.l0.pt(0)],switchFormType:[F.l0.width("100%"),F.l0.color.accentPrimaryStronger,F.l0.textAlign.center,F.l0.pt(8),{backgroundColor:"transparent",":hover":{color:F.TV.accentPrimaryStrongest,backgroundColor:"transparent"},height:36,borderRadius:6}],switchFormTypeContainer:[F.l0.pt(8),F.l0.width("100%")]}),be=function(e){var t=e.onSubmit,r=e.trackSource,n=void 0===r?"explicit":r,o=(0,X.F)(),i=o.formType,s=o.isLogin,u=o.privacyInvite,l=o.isGoogleClassroom,c=o.isModal,h=(0,X.E)(),d=(0,M.useRef)(!0);(0,M.useEffect)((function(){(u||l)&&(d.current=!1,h({formType:u?"email":"sso"}))}),[u,l]);return(0,a.BX)(U.G,{css:[Ze.authForm,c?Ze.authFormModal:null],children:[(0,a.tZ)(ve,{}),s?(0,a.tZ)(te,{onSubmit:t,trackSource:n}):null,"email"!==i||s?null:(0,a.tZ)(N,{onSubmit:t,trackSource:n}),"sso"===i||s?(0,a.BX)(a.HY,{children:[(0,a.tZ)($.Z,{size:2}),(0,a.tZ)("div",{className:"social-spacer"}),(0,a.tZ)($.Z,{}),(0,a.tZ)(se,{onSubmit:t,source:n})]}):null,!s&&d.current?(0,a.tZ)(U.G,{css:Ze.switchFormTypeContainer,dataCy:"change-form-type-btn",children:(0,a.tZ)("a",{href:"#",css:Ze.switchFormType,onClick:function(e){e.preventDefault(),d&&(h({formType:"sso"===i?"email":"sso"}),(0,b.j)(b.U3.SIGNUP_FORM_TYPE_SWITCHED,{from:i,to:"email"===i?"sso":"email"}))},children:"email"===i?"\u2190 Use One-Tap options instead":"Continue with email \u2192"})}):null,(0,a.tZ)(ge,{})]})}},59545:function(e,t,r){r.d(t,{E:function(){return u},F:function(){return s}});var n=r(72006),a=r(91398),o=r(92683),i=(0,a.cn)({isRedirectingAfterSuccessfulAuth:!1,isLogin:!1,formType:"sso",isTeacher:!1,seededState:!0,isModal:!0}),s=function(){return(0,o.Dv)(i)},u=function(){var e=(0,o.b9)(i);return function(t){return e((function(e){return(0,n.Z)({},e,t)}))}}},41666:function(e,t,r){r.d(t,{jw:function(){return o},uk:function(){return i}});var n=r(625),a=r(85603),o=function(e){var t=a.Z.get("gfa_ref")||void 0,r=a.Z.get("gfa_campaign")||void 0,o=a.Z.get("gfa_landed_on")||void 0;(0,n.yV)({id:e,firstAcquisitionSource:t,firstAcquisitionCampaign:r,firstAcquisitionLandedOn:o})},i=function(e){(0,n.j)(e?n.U3.SIGNUP_REQUESTED:n.U3.LOGIN_REQUESTED,{location:"form",authFormPlacement:"state-change"})}}}]);
//# sourceMappingURL=9888-11881525e7f27f50.js.map