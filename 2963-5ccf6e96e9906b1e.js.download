"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2963,3432],{59976:function(e,t,n){n.d(t,{Z:function(){return k}});var r=n(74985),i=n(50959),o=n(52035),a=n(39541),l=n(25198),c=n(61284),u=n(85368),s=n(27691),d=n(1819),f=n(72006),p=n(43119),h=n(71440),v=n(24635);function m(){var e=(0,p.Z)(["\n  fragment ReplAnalyticsDurationResult on ReplAnalyticsDuration {\n    __typename\n    results {\n      __typename\n      value\n      count\n    }\n  }\n"]);return m=function(){return e},e}function g(){var e=(0,p.Z)(["\n  query ReplAnalyticsDuration(\n    $id: String!\n    $input: ReplAnalyticsDurationInput!\n  ) {\n    repl(id: $id) {\n      ... on Repl {\n        __typename\n        id\n        analyticsDuration(input: $input) {\n          ... on ReplAnalyticsDuration {\n            ...ReplAnalyticsDurationResult\n          }\n          ... on NotFoundError {\n            __typename\n            message\n          }\n          ... on UserError {\n            __typename\n            message\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return g=function(){return e},e}var y={},Z=(0,h.Ps)(m()),b=(0,h.Ps)(g(),Z);var w=n(28737),x=function(e){var t=e.data;o.kL.register(o.ZL);var n=(0,w.F)().values;return(0,r.tZ)(d.$Q,{options:{responsive:!0,maintainAspectRatio:!1,datasets:{bar:{categoryPercentage:1,barPercentage:1}},scales:{y:{title:{display:!0,text:"# Requests"},ticks:{callback:function(e){if("number"===typeof e&&Math.floor(e)===e)return e}}},x:{title:{display:!0,text:"Duration (ms)"},ticks:{autoSkip:!1,minRotation:20,maxRotation:20,color:n.global.foregroundDimmer}}}},data:{labels:t.results.map((function(e){return e.value.replace("ms","").replace("s+","000+")})),datasets:[{borderWidth:0,data:t.results.map((function(e){return e.count})),backgroundColor:Array(t.results.length).fill(n.global.tealDefault)}]}})},k=function(e){var t,n,o=e.replId,d=e.start,p=e.hours,h=e.deployment,m=(0,i.useState)(void 0),g=m[0],Z=m[1],w=function(e){var t=(0,f.Z)({},y,e);return v.a(b,t)}({variables:{id:o,input:{start:d,hours:p,deployment:h}},ssr:!1,onCompleted:function(e){if("Repl"===e.repl.__typename)switch(e.repl.analyticsDuration.__typename){case"UserError":case"NotFoundError":Z(new Error(e.repl.analyticsDuration.message))}}}),k=w.data,C=w.loading,S=w.error;return S&&Z(S),(0,r.BX)(u.G,{css:a.l0.colWithGap(8),children:[(0,r.tZ)(c.xv,{variant:"subheadDefault",children:"Request Durations (ms)"}),(0,r.BX)(u.G,{children:[C?(0,r.tZ)(u.G,{css:[a.l0.width("100%"),{aspectRatio:"2 / 1"},a.l0.borderRadius(8),s.p.backgroundPulse()]}):null,g?(0,r.tZ)(l.E,{text:g.message,colorway:"negative"}):null,"Repl"===(null===k||void 0===k||null===(t=k.repl)||void 0===t?void 0:t.__typename)&&"ReplAnalyticsDuration"===(null===(n=k.repl.analyticsDuration)||void 0===n?void 0:n.__typename)?(0,r.tZ)(x,{data:k.repl.analyticsDuration}):null]})]})}},30502:function(e,t,n){var r=n(72006),i=n(4405),o=n(74985),a=n(52035),l=n(56412),c=n(81995),u=n(1819),s=n(28737);a.kL.register(a.uw,a.f$,a.od,a.jn,a.u);t.Z=function(e){var t=e.labels,n=e.datasets,a=(0,s.F)().values,d={labels:t.map((function(e){return e.toISOString()})),datasets:n.map((function(e){return(0,i.Z)((0,r.Z)({},e),{data:e.data.map((function(e){var t=e.x,n=e.y;return{x:t.toISOString(),y:n}})),pointRadius:1,tension:.1})}))},f=t.length;return(0,o.tZ)(u.x1,{options:{responsive:!0,plugins:{tooltip:{callbacks:{title:function(e){var t=new Date(e[0].label);return(0,l.Z)(t,"MMM d, HH:mm (z)")}}}},scales:{y:{grid:{borderColor:a.global.backgroundHigher,color:a.global.backgroundHigher},title:{display:!0,text:"# Requests"},ticks:{color:a.global.foregroundDimmer,callback:function(e){if("number"===typeof e&&Math.floor(e)===e)return e}},min:0},x:{title:{display:!0,text:"Time"},grid:{borderColor:a.global.backgroundHighest,color:a.global.backgroundHighest},ticks:{color:a.global.foregroundDimmer,callback:function(e,n){var r=t[n];if(f<=24){if(r.getHours()%4!==0)return;return(0,l.Z)(r,"HH:mm")}if(r.toISOString()===(0,c.Z)(r).toISOString())return(0,l.Z)(r,"MMM d")}}}}},data:d})}},10434:function(e,t,n){n.d(t,{Z:function(){return S}});var r=n(74985),i=n(86306),o=n(50959),a=n(39541),l=n(25198),c=n(61284),u=n(85368),s=n(28737),d=n(27691),f=n(72006),p=n(43119),h=n(71440),v=n(24635);function m(){var e=(0,p.Z)(["\n  fragment ReplAnalyticsPageViewDataPoint on ReplAnalyticsPageViewsData {\n    __typename\n    timestamp\n    success\n    failure\n  }\n"]);return m=function(){return e},e}function g(){var e=(0,p.Z)(["\n  fragment ReplAnalyticsPageViews on ReplAnalyticsPageViews {\n    __typename\n    uniques\n    results {\n      ...ReplAnalyticsPageViewDataPoint\n    }\n  }\n  ","\n"]);return g=function(){return e},e}function y(){var e=(0,p.Z)(["\n  query ReplAnalyticsPageViews(\n    $id: String!\n    $input: ReplAnalyticsPageViewsInput!\n  ) {\n    repl(id: $id) {\n      ... on Repl {\n        __typename\n        id\n        analyticsPageViews(input: $input) {\n          ... on ReplAnalyticsPageViews {\n            ...ReplAnalyticsPageViews\n          }\n          ... on NotFoundError {\n            __typename\n            message\n          }\n          ... on UserError {\n            __typename\n            message\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return y=function(){return e},e}var Z={},b=(0,h.Ps)(m()),w=(0,h.Ps)(g(),b),x=(0,h.Ps)(y(),w);var k=n(30502),C=function(e){var t=e.data,n=e.start,o=e.hours,a=(0,s.F)().values,l=new Array(o).fill(0).map((function(e,t){return(0,i.Z)(n,t)})),c=t.results.reduce((function(e,t){return e.set(t.timestamp,t),e}),new Map),u=[{label:"Connected",data:l.map((function(e){var t;return{y:(null!==(t=c.get(e.toISOString()))&&void 0!==t?t:{success:0}).success,x:e}})),borderColor:a.global.accentPrimaryDefault,backgroundColor:a.global.accentPrimaryDefault},{label:"Failed",data:l.map((function(e){var t;return{y:(null!==(t=c.get(e.toISOString()))&&void 0!==t?t:{failure:0}).failure,x:e}})),borderColor:a.global.accentNegativeDefault,backgroundColor:a.global.accentNegativeDefault}];return(0,r.tZ)(k.Z,{labels:l,datasets:u})},S=function(e){var t,n,i=e.replId,s=e.start,p=e.hours,h=e.deployment,m=(0,o.useState)(void 0),g=m[0],y=m[1],b=function(e){var t=(0,f.Z)({},Z,e);return v.a(x,t)}({variables:{id:i,input:{start:s,hours:p,deployment:h}},ssr:!1,onCompleted:function(e){if("Repl"===e.repl.__typename)switch(e.repl.analyticsPageViews.__typename){case"UserError":case"NotFoundError":y(new Error(e.repl.analyticsPageViews.message))}}}),w=b.data,k=b.loading,S=b.error,T="Repl"===(null===w||void 0===w||null===(t=w.repl)||void 0===t?void 0:t.__typename)&&"ReplAnalyticsPageViews"===(null===(n=w.repl.analyticsPageViews)||void 0===n?void 0:n.__typename)?w.repl.analyticsPageViews:void 0,E=T?T.uniques:void 0;return S&&y(S),(0,r.BX)(u.G,{css:[a.l0.colWithGap(8)],children:[(0,r.BX)(u.G,{css:[a.l0.flex.row,a.l0.align.center,a.l0.justify.spaceBetween],children:[(0,r.tZ)(c.xv,{variant:"subheadDefault",multiline:!1,children:"Requests"}),E?(0,r.BX)(c.xv,{multiline:!1,children:[(0,r.tZ)("strong",{children:E})," unique visitors"]}):null]}),(0,r.BX)(u.G,{children:[k?(0,r.tZ)(u.G,{css:[a.l0.width("100%"),{aspectRatio:"2 / 1"},a.l0.borderRadius(8),d.p.backgroundPulse()]}):null,g?(0,r.tZ)(l.E,{text:g.message,colorway:"negative"}):null,T?(0,r.tZ)(C,{data:T,start:s,hours:p}):null]})]})}},38068:function(e,t,n){n.d(t,{Z:function(){return S}});var r=n(9970),i=n(74985),o=n(86306),a=n(50959),l=n(39541),c=n(25198),u=n(61284),s=n(85368),d=n(27691),f=n(72006),p=n(43119),h=n(71440),v=n(24635);function m(){var e=(0,p.Z)(["\n  fragment ReplAnalyticsTimeSeriesDataPoint on ReplAnalyticsTimeSeriesData {\n    __typename\n    timestamp\n    value\n    count\n  }\n"]);return m=function(){return e},e}function g(){var e=(0,p.Z)(["\n  fragment ReplAnalyticsTimeSeries on ReplAnalyticsTimeSeries {\n    __typename\n    results {\n      ...ReplAnalyticsTimeSeriesDataPoint\n    }\n  }\n  ","\n"]);return g=function(){return e},e}function y(){var e=(0,p.Z)(["\n  query ReplAnalyticsTimeSeries(\n    $id: String!\n    $input: ReplAnalyticsTimeSeriesInput!\n  ) {\n    repl(id: $id) {\n      ... on Repl {\n        __typename\n        id\n        analyticsTimeSeries(input: $input) {\n          ... on ReplAnalyticsTimeSeries {\n            ...ReplAnalyticsTimeSeries\n          }\n          ... on NotFoundError {\n            __typename\n            message\n          }\n          ... on UserError {\n            __typename\n            message\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return y=function(){return e},e}var Z={},b=(0,h.Ps)(m()),w=(0,h.Ps)(g(),b),x=(0,h.Ps)(y(),w);var k=n(30502),C=function(e){var t=e.data,n=e.start,a=e.hours,l=e.colorFn,c=new Array(a).fill(0).map((function(e,t){return(0,o.Z)(n,t)})),u=t.results.reduce((function(e,t){var n,r=t.timestamp,i=t.value,o=t.count,a=null!==(n=e.get(i))&&void 0!==n?n:new Map;return a.set(r,o),e.set(i,a),e}),new Map),s=(0,r.Z)(u.keys()).map((function(e,t){var n=l(e,t),r=u.get(e);return{label:e,data:c.map((function(e){var t,n=null!==(t=null===r||void 0===r?void 0:r.get(e.toISOString()))&&void 0!==t?t:0;return{x:new Date(e),y:n}})),borderColor:n,backgroundColor:n}}));return(0,i.tZ)(k.Z,{labels:c,datasets:s})},S=function(e){var t,n,r=e.replId,o=e.title,p=e.metric,h=e.start,m=e.hours,g=e.deployment,y=e.colorFn,b=(0,a.useState)(void 0),w=b[0],k=b[1],S=function(e){var t=(0,f.Z)({},Z,e);return v.a(x,t)}({variables:{id:r,input:{metric:p,start:h,hours:m,deployment:g}},ssr:!1,onCompleted:function(e){if("Repl"===e.repl.__typename)switch(e.repl.analyticsTimeSeries.__typename){case"UserError":case"NotFoundError":k(new Error(e.repl.analyticsTimeSeries.message))}}}),T=S.data,E=S.loading,R=S.error,G="Repl"===(null===T||void 0===T||null===(t=T.repl)||void 0===t?void 0:t.__typename)&&"ReplAnalyticsTimeSeries"===(null===(n=T.repl.analyticsTimeSeries)||void 0===n?void 0:n.__typename)?T.repl.analyticsTimeSeries:void 0;return R&&k(R),(0,i.BX)(s.G,{css:[l.l0.colWithGap(8)],children:[(0,i.tZ)(s.G,{css:[l.l0.flex.row,l.l0.align.center,l.l0.justify.spaceBetween],children:(0,i.tZ)(u.xv,{variant:"subheadDefault",multiline:!1,children:o})}),(0,i.BX)(s.G,{children:[E?(0,i.tZ)(s.G,{css:[l.l0.width("100%"),{aspectRatio:"2 / 1"},l.l0.borderRadius(8),d.p.backgroundPulse()]}):null,w?(0,i.tZ)(c.E,{text:w.message,colorway:"negative"}):null,G?(0,i.tZ)(C,{data:G,start:h,hours:m,colorFn:y}):null]})]})}},76232:function(e,t,n){n.d(t,{Z:function(){return I}});var r=n(9970),i=n(74985),o=n(50959),a=n(52035),l=n(39541),c=n(25198),u=n(61284),s=n(85368),d=n(27691),f=n(55021),p=n(1819),h=n(72006),v=n(43119),m=n(71440),g=n(24635);function y(){var e=(0,v.Z)(["\n  fragment ReplAnalyticsTopListResult on ReplAnalyticsTopList {\n    __typename\n    results {\n      __typename\n      value\n      count\n    }\n  }\n"]);return y=function(){return e},e}function Z(){var e=(0,v.Z)(["\n  query ReplAnalyticsTopList($id: String!, $input: ReplAnalyticsTopInput!) {\n    repl(id: $id) {\n      ... on Repl {\n        __typename\n        id\n        analyticsTopList(input: $input) {\n          ... on ReplAnalyticsTopList {\n            ...ReplAnalyticsTopListResult\n          }\n          ... on NotFoundError {\n            __typename\n            message\n          }\n          ... on UserError {\n            __typename\n            message\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return Z=function(){return e},e}var b={},w=(0,m.Ps)(y()),x=(0,m.Ps)(Z(),w);var k=n(28737),C=n(73194),S=n.n(C),T=function(e){var t=e.data,n=e.variant;if(0===t.results.length)return(0,i.tZ)(u.xv,{multiline:!1,children:"No results"});switch(n){case"map":return(0,i.tZ)(G,{data:t});case"pie":return(0,i.tZ)(R,{data:t,devices:!1});case"device-pie":return(0,i.tZ)(R,{data:t,devices:!0});case"table":return(0,i.tZ)(E,{data:t})}},E=function(e){var t=e.data;return a.kL.register(a.qi),(0,i.tZ)(s.G,{children:t.results.map((function(e){return(0,i.BX)(s.G,{css:[l.l0.rowWithGap(16),l.l0.py(8),{borderBottom:"1px solid ".concat(l.TV.outlineDimmest)},{"&:last-of-type":{borderBottom:"none"}}],children:[(0,i.tZ)(s.G,{css:[l.l0.flex.grow(1),l.l0.maxWidth("90%")],children:(0,i.tZ)(u.xv,{title:e.value,multiline:!1,children:e.value})}),(0,i.tZ)(s.G,{children:(0,i.tZ)(u.xv,{multiline:!1,children:e.count})})]})}))})},R=function(e){var t=e.data,n=e.devices,o=(0,k.F)().values,a=[o.global.blueDefault,o.global.blurpleDefault,o.global.greenDefault,o.global.limeDefault,o.global.magentaDefault,o.global.orangeDefault,o.global.pinkDefault,o.global.purpleDefault,o.global.redDefault,o.global.tealDefault,o.global.yellowDefault],l=new Map;return n?t.results.forEach((function(e){var t=e.value,n=e.count,r=t.match(/\(.*\)/);if(r&&r.length){var i=r[0].substring(1,r[0].length-1),o=l.get(i)||0;l.set(i,o+n)}else{var a=l.get("Unknown")||0;l.set("Unknown",a+n)}})):t.results.forEach((function(e){var t=e.value,n=e.count,r=t.replace(/ \(.*\)/,""),i=l.get(r)||0;l.set(r,i+n)})),(0,i.tZ)(p.by,{options:{radius:"80%"},data:{labels:(0,r.Z)(l.keys()),datasets:[{hoverOffset:20,borderWidth:2,data:(0,r.Z)(l.values()),backgroundColor:Array(l.size).fill(0).map((function(e,t){return a[t%a.length]}))}]}})},G=function(e){var t=e.data,r=S()((function(){return Promise.all([n.e(5381),n.e(4096),n.e(8742),n.e(7016)]).then(n.bind(n,17016))}),{loadableGenerated:{webpack:function(){return[17016]}},ssr:!1}),o=t.results.map((function(e){return{country:e.value,numHits:e.count}}));return(0,i.tZ)(s.G,{css:[l.l0.maxWidth(450)],children:(0,i.tZ)(r,{countries:o})})},I=function(e){var t,n,r=e.replId,a=e.start,p=e.hours,v=e.metric,m=e.deployment,y=e.count,Z=e.variant,w=void 0===Z?"table":Z,k=(0,f.CZ)(v),C=(0,o.useState)(void 0),S=C[0],E=C[1],R=function(e){var t=(0,h.Z)({},b,e);return g.a(x,t)}({variables:{id:r,input:{metric:v,start:a,hours:p,deployment:m,count:y}},ssr:!1,onCompleted:function(e){if("Repl"===e.repl.__typename)switch(e.repl.analyticsTopList.__typename){case"UserError":case"NotFoundError":E(new Error(e.repl.analyticsTopList.message))}}}),G=R.data,I=R.loading,_=R.error;return _&&E(_),(0,i.BX)(s.G,{css:l.l0.colWithGap(8),children:[(0,i.tZ)(u.xv,{variant:"subheadDefault",multiline:!1,children:"device-pie"===w?"Top Devices":"Top ".concat(k)}),(0,i.BX)(s.G,{children:[I?(0,i.tZ)(s.G,{css:[l.l0.width("100%"),{aspectRatio:"1 / 1"},l.l0.borderRadius(8),d.p.backgroundPulse()]}):null,S?(0,i.tZ)(c.E,{text:S.message,colorway:"negative"}):null,"Repl"===(null===G||void 0===G||null===(t=G.repl)||void 0===t?void 0:t.__typename)&&"ReplAnalyticsTopList"===(null===(n=G.repl.analyticsTopList)||void 0===n?void 0:n.__typename)?(0,i.tZ)(T,{variant:w,data:G.repl.analyticsTopList}):null]})]})}},67036:function(e,t,n){n.d(t,{Z:function(){return c}});var r=n(74985),i=n(48306),o=n.n(i),a=(n(50959),n(97754)),l=n.n(a);function c(e){var t=e.unreadDot,n=e.size,i=void 0===n?12:n,a=e.count,c=void 0===a?null:a,u=c&&c>99,s=u?"99+":null===c||void 0===c?void 0:c.toString();return(0,r.BX)("span",{className:"jsx-1c7f3b9066c4c334",children:[(0,r.tZ)("svg",{width:i,height:i,viewBox:"0 0 24 24",fill:"none",style:{color:"currentColor"},xmlns:"http://www.w3.org/2000/svg",className:"jsx-1c7f3b9066c4c334",children:(0,r.tZ)("path",{d:"M21 15C21 15.5304 20.7893 16.0391 20.4142 16.4142C20.0391 16.7893 19.5304 17 19 17H7L3 21V5C3 4.46957 3.21071 3.96086 3.58579 3.58579C3.96086 3.21071 4.46957 3 5 3H19C19.5304 3 20.0391 3.21071 20.4142 3.58579C20.7893 3.96086 21 4.46957 21 5V15Z",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",className:"jsx-1c7f3b9066c4c334"})}),t?(0,r.tZ)("div",{className:"jsx-1c7f3b9066c4c334 unread-indicator"}):null,Boolean(c)&&(0,r.tZ)("div",{className:"jsx-1c7f3b9066c4c334 "+(l()("count",{overflow:u})||""),children:s}),(0,r.tZ)(o(),{id:"1c7f3b9066c4c334",children:"span.jsx-1c7f3b9066c4c334{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex}.unread-indicator.jsx-1c7f3b9066c4c334{width:5px;height:5px;-webkit-border-radius:10px;-moz-border-radius:10px;border-radius:10px;background-color:var(--accent-red-default);-webkit-transform:translate(8px,-1px);-moz-transform:translate(8px,-1px);-ms-transform:translate(8px,-1px);-o-transform:translate(8px,-1px);transform:translate(8px,-1px);position:absolute}.count.jsx-1c7f3b9066c4c334{-webkit-border-radius:10px;-moz-border-radius:10px;border-radius:10px;background-color:var(--accent-negative-default);-webkit-transform:translate(50%,-50%);-moz-transform:translate(50%,-50%);-ms-transform:translate(50%,-50%);-o-transform:translate(50%,-50%);transform:translate(50%,-50%);position:absolute;min-width:16px;padding:2px 3px;height:16px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;color:white;font-size:var(--font-size-small)}.overflow.jsx-1c7f3b9066c4c334{-webkit-transform:translate(25%,-50%);-moz-transform:translate(25%,-50%);-ms-transform:translate(25%,-50%);-o-transform:translate(25%,-50%);transform:translate(25%,-50%)}"})]})}},91015:function(e,t,n){n.d(t,{AS:function(){return R},Hj:function(){return P},Rp:function(){return I},Tt:function(){return L},gE:function(){return D},j7:function(){return C},xT:function(){return T},yi:function(){return S}});var r=n(72006),i=n(43119),o=n(71440),a=n(24635),l=n(50216),c=n(86615);function u(){var e=(0,i.Z)(["\n  fragment AnnotationsUser on User {\n    id\n    username\n    image\n  }\n"]);return u=function(){return e},e}function s(){var e=(0,i.Z)(["\n  fragment AnnotationMessageContent on MessageContentType {\n    __typename\n    ... on TextMessageContentType {\n      text\n    }\n    ... on PreviewMessageContentType {\n      preview\n    }\n    ... on StatusMessageContentType {\n      status\n    }\n  }\n"]);return s=function(){return e},e}function d(){var e=(0,i.Z)(["\n  fragment AnnotationsUIMessage on AnnotationMessage {\n    id\n    user {\n      id\n      ...AnnotationsUser\n    }\n    anchor {\n      id\n    }\n    timeCreated\n    content {\n      __typename\n      ...AnnotationMessageContent\n    }\n    currentUserIsAuthor\n    seen\n  }\n  ","\n  ","\n"]);return d=function(){return e},e}function f(){var e=(0,i.Z)(["\n  fragment AnnotationsUIAnchor on AnnotationAnchor {\n    id\n    user {\n      id\n      ...AnnotationsUser\n    }\n    path\n    otVersion\n    indexStart\n    indexEnd\n    isResolved\n    isGeneral\n    messages {\n      id\n      ...AnnotationsUIMessage\n    }\n  }\n  ","\n  ","\n"]);return f=function(){return e},e}function p(){var e=(0,i.Z)(["\n  query AnnotationAnchorsByRepl($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        annotationAnchors {\n          id\n          ...AnnotationsUIAnchor\n        }\n      }\n    }\n    currentUser {\n      id\n      username\n      image\n    }\n  }\n  ","\n"]);return p=function(){return e},e}function h(){var e=(0,i.Z)(["\n  mutation CreateAnnotationAnchor(\n    $annotationAnchor: AnnotationAnchorInput!\n    $annotationMessage: AnnotationMessageInput\n    $highlight: AnnotationHighlightInput\n  ) {\n    createAnnotationAnchor(\n      annotationAnchor: $annotationAnchor\n      annotationMessage: $annotationMessage\n      highlight: $highlight\n    ) {\n      ... on UserError {\n        message\n      }\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n    }\n  }\n  ","\n"]);return h=function(){return e},e}function v(){var e=(0,i.Z)(["\n  mutation UpdateAnnotationAnchor(\n    $id: String!\n    $changes: AnnotationAnchorChangesInput!\n  ) {\n    updateAnnotationAnchor(id: $id, changes: $changes) {\n      ... on UserError {\n        message\n      }\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n    }\n  }\n  ","\n"]);return v=function(){return e},e}function m(){var e=(0,i.Z)(["\n  mutation CreateAnnotationMessage(\n    $replId: String!\n    $anchorId: String!\n    $annotationMessage: AnnotationMessageInput!\n    $highlight: AnnotationHighlightInput\n  ) {\n    createAnnotationMessage(\n      replId: $replId\n      anchorId: $anchorId\n      annotationMessage: $annotationMessage\n      highlight: $highlight\n    ) {\n      ... on UserError {\n        message\n      }\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n    }\n  }\n  ","\n"]);return m=function(){return e},e}function g(){var e=(0,i.Z)(["\n  mutation updateThreadPreview(\n    $threadId: String!\n    $messageId: String!\n    $message: String\n  ) {\n    updateThreadPreview(\n      threadId: $threadId\n      messageId: $messageId\n      message: $message\n    )\n  }\n"]);return g=function(){return e},e}function y(){var e=(0,i.Z)(["\n  subscription AnnotationUpdates($replId: String!) {\n    updatedAnnotation: annotationUpdatesByRepl(replId: $replId) {\n      id\n      ...AnnotationsUIAnchor\n    }\n  }\n  ","\n"]);return y=function(){return e},e}function Z(){var e=(0,i.Z)(["\n  subscription MessagePreview($threadId: String!) {\n    threadPreview(threadId: $threadId) {\n      userId\n      messageId\n      message\n    }\n  }\n"]);return Z=function(){return e},e}var b={},w=(0,o.Ps)(u()),x=(0,o.Ps)(s()),k=(0,o.Ps)(d(),w,x),C=(0,o.Ps)(f(),w,k),S=(0,o.Ps)(p(),C);function T(e){var t=(0,r.Z)({},b,e);return a.a(S,t)}var E=(0,o.Ps)(h(),C);function R(e){var t=(0,r.Z)({},b,e);return l.D(E,t)}var G=(0,o.Ps)(v(),C);function I(e){var t=(0,r.Z)({},b,e);return l.D(G,t)}var _=(0,o.Ps)(m(),C);function D(e){var t=(0,r.Z)({},b,e);return l.D(_,t)}var B=(0,o.Ps)(g());function P(e){var t=(0,r.Z)({},b,e);return l.D(B,t)}var A=(0,o.Ps)(y(),C);function L(e){var t=(0,r.Z)({},b,e);return c.m(A,t)}Z()},62199:function(e,t,n){n.d(t,{Ft:function(){return f},Vy:function(){return m},kL:function(){return v}});var r=n(57135),i=n(2272),o=n(96583),a=n(14806);function l(e,t,n){return c.apply(this,arguments)}function c(){return(c=(0,r.Z)((function(e,t,n){var r;return(0,o.__generator)(this,(function(i){switch(i.label){case 0:return e.path&&"number"===typeof e.indexStart&&"number"===typeof e.indexEnd&&e.otVersion?n===e.otVersion?[2,{path:e.path,indexStart:e.indexStart,indexEnd:e.indexEnd,otVersion:e.otVersion}]:[4,t({indexStart:e.indexStart,indexEnd:e.indexEnd,versionFrom:e.otVersion,versionTo:n})]:[2];case 1:return r=i.sent(),[2,{path:e.path,indexStart:r.indexStart,indexEnd:r.indexEnd,otVersion:n}]}}))}))).apply(this,arguments)}var u=n(45285),s=n(1468),d=n(50959);function f(e){return p.apply(this,arguments)}function p(){return(p=(0,r.Z)((function(e){var t,n,r,i,c;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return t=e.anchor,n=e.version,r=e.transformSelection,i=e.content,t.path?[4,l(t,r,n)]:[2,null];case 1:return(c=o.sent())?[2,{anchor:t,newSelection:c,newPosition:undefined,getHighlight:function(){if(c){var e=c.indexStart,t=c.indexEnd;try{var n=a.xv.of(i.split("\n")),r=n.lineAt(e),o=n.lineAt(t),l=n.sliceString(n.line(Math.max(r.number-2,1)).from,e),u=n.sliceString(t,n.line(Math.min(o.number+2,n.lines)).to);return{precode:l,code:n.sliceString(e,t),postcode:u}}catch(d){s.c_.captureException(d)}}},snippet:h(i,c)}]:[2,null]}}))}))).apply(this,arguments)}var h=function(e,t){var n=a.xv.of(e.split("\n")),r=n.lineAt(t.indexStart).number,i=n.lineAt(t.indexEnd).number,o=[];r===i&&(r=Math.max(1,r-1),i=Math.min(n.lines,i+1));for(var l=r;l<=i;l++)o.push(n.line(l).text);return{startLineNumber:r,lines:o}};function v(e){var t=(0,u.Z)().fs,n=d.useRef(null),r=d.useRef(null),o=(0,i.Z)(d.useState(!1),2),a=o[0],l=o[1];return d.useEffect((function(){if(e){var i=function(){r.current=null,l(!1)},o=t.watchTextFile(e,{onReady:function(e){var t=e.transformSelection,i=e.initialContent;n.current=i.toString(),r.current=t,l(!0)},onMoveOrDelete:function(){i()},onError:function(){i()},onChange:function(e){var t=e.latestContent;n.current=t}});return function(){i(),o()}}}),[e,t]),{contentRef:n,transformSelectionRef:r,loadedFile:a}}function m(e){var t=(0,u.Z)().fs,n=(0,i.Z)(d.useState(null),2),r=n[0],o=n[1],a=v(null===e||void 0===e?void 0:e.path),l=a.contentRef,c=a.loadedFile,p=a.transformSelectionRef;return d.useEffect((function(){(null===e||void 0===e?void 0:e.path)&&c&&p.current&&null!==l.current&&f({anchor:e,version:t.getOTVersion(e.path),transformSelection:p.current,content:l.current}).then((function(e){o(e)})).catch((function(e){o(null),s.c_.captureException(e)}))}),[t,e,c,p,l]),r}},35856:function(e,t,n){n.d(t,{n:function(){return s}});var r=n(72006),i=n(43119),o=n(71440),a=n(50216);function l(){var e=(0,i.Z)(["\n  mutation MarkMessagesAsSeen(\n    $replId: String!\n    $threadId: String\n    $messageIds: [String!]\n  ) {\n    markMessagesAsSeen(\n      replId: $replId\n      threadId: $threadId\n      messageIds: $messageIds\n    ) {\n      ... on AnnotationMessageList {\n        messages {\n          id\n          seen\n        }\n      }\n    }\n  }\n"]);return l=function(){return e},e}var c={},u=(0,o.Ps)(l());function s(e){var t=(0,r.Z)({},c,e);return a.D(u,t)}},73785:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(2272),i=n(50959),o=n(48330),a=n(35856);function l(e){var t=(0,o.Z)(),n=(0,r.Z)((0,a.n)(),1)[0];i.useEffect((function(){if(e){var r=e.messages.filter((function(e){return!e.seen})).map((function(e){return e.id}));0!==r.length&&n({variables:{replId:t,threadId:e.id,messageIds:r},optimisticResponse:{__typename:"RootMutationType",markMessagesAsSeen:{messages:r.map((function(e){return{id:e,seen:!0,__typename:"AnnotationMessage"}})),__typename:"AnnotationMessageList"}}})}}),[t,e,n])}},46179:function(e,t,n){n.d(t,{Z:function(){return d}});var r=n(72006),i=n(43119),o=n(71440),a=n(24635);function l(){var e=(0,i.Z)(["\n  query ThreadReplCollaborators($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        owner {\n          ... on User {\n            id\n            username\n            image\n          }\n          ... on Team {\n            id\n            username\n            image\n          }\n        }\n        permissions {\n          id\n          user {\n            id\n            username\n            image\n          }\n        }\n      }\n    }\n  }\n"]);return l=function(){return e},e}var c={},u=(0,o.Ps)(l());var s=n(48330);function d(){var e,t=function(e){var t=(0,r.Z)({},c,e);return a.a(u,t)}({variables:{replId:(0,s.Z)()}}).data;if("Repl"!==(null===t||void 0===t?void 0:t.repl.__typename))return[];var n=[];(null===(e=t.repl.owner)||void 0===e?void 0:e.username)&&"User"===t.repl.owner.__typename&&n.push(t.repl.owner);var i=!0,o=!1,l=void 0;try{for(var d,f=t.repl.permissions[Symbol.iterator]();!(i=(d=f.next()).done);i=!0){var p,h=d.value;(null===(p=h.user)||void 0===p?void 0:p.username)&&n.push(h.user)}}catch(v){o=!0,l=v}finally{try{i||null==f.return||f.return()}finally{if(o)throw l}}return n}},75015:function(e,t,n){n.d(t,{S:function(){return o}});var r=n(59053),i=n(7225);function o(e,t,n){if(i.Command.is(e))t.request.executeCommand(e.command,e.arguments);else{var o=e.edit,a=e.command;if(o&&(0,r.w)({edit:o,fs:n,client:t}),a&&"java.apply.workspaceEdit"===a.command&&a.arguments){var l=!0,c=!1,u=void 0;try{for(var s,d=a.arguments[Symbol.iterator]();!(l=(s=d.next()).done);l=!0){var f=s.value;i.WorkspaceEdit.is(f)&&(0,r.w)({edit:f,fs:n,client:t})}}catch(p){c=!0,u=p}finally{try{l||null==d.return||d.return()}finally{if(c)throw u}}}a&&t.request.executeCommand(a.command,a.arguments)}}},27256:function(e,t,n){n.d(t,{R$:function(){return ne},Wo:function(){return ee},D2:function(){return q},XZ:function(){return oe},JJ:function(){return J},sN:function(){return le},ZP:function(){return ae},s3:function(){return te}});var r=n(57389),i=n(72006),o=n(4405),a=n(2272),l=n(74985),c=n(50959),u=n(39541),s=n(61284),d=n(85368),f=n(99964),p=n(9839),h=n(12260),v=n(1050),m=n(15544),g=n(50575),y=n(22642),Z=n(24941),b=n(77806),w=n(49085),x=n(32973),k=n(42256),C=n(63128),S=n(35086),T=n(88477),E=n(71540),R=n(99397),G=n(21134),I=n(85577),_=n(13233),D=n(625),B=n(87076),P=n(17807),A=n(57913),L=n(32104),U=n(64491),X=n(45285),M=n(1468),N=n(1169),O=n(56169),F=n(75015),W=n(951),H=n(13405),V=n(82568),z=(0,V.X)({item:[P.gU.listItem,u.l0.p(8),u.l0.flex.row,u.l0.align.center,{border:"none"}],text:[u.l0.pl(8),u.l0.flex.growAndShrink(1)],dropdownWrapper:[u.l0.height(16),u.l0.width(16),u.l0.center],loading:[u.l0.py(8),u.l0.px(12),u.l0.rowWithGap(8),u.l0.align.center,u.l0.color.foregroundDimmest],subItem:{paddingLeft:20,maxWidth:"100%"},none:[u.l0.py(8),u.l0.px(12),u.l0.flex.row,u.l0.align.center]});function j(e){var t=e.view,n=e.metadata,r=e.closeMenu,i=n.text,o=n.icon,u=(0,_.Z)().showError,f=c.useRef(!1),p=(0,a.Z)(c.useState(!1),2),h=p[0],v=p[1],m=(0,a.Z)(c.useState(null),2),g=m[0],y=m[1],Z=(0,X.Z)().fs,b=t.state.facet(W.Yp),w=(0,U.Z)(b||""),x=(0,O.H)(),k=x("label"),C=x("menu"),S=c.useRef(null),T=(0,a.Z)((0,N.XZ)(S,!1),4),E=(T[0],T[1]),R=T[2],G=T[3];return(0,N.Ym)(E,S),c.useEffect((function(){if(w&&b&&h&&w.isOpen(b)&&!f.current){var e=t.state,n=e.selection.main,r={start:(0,I.s)(e.doc,n.from),end:(0,I.s)(e.doc,n.to)};f.current=!0,w.request.codeActions(b,r).then((function(e){if((0,D.j)(D.U3.EDITOR_CONTEXT_MENU_CODE_ACTIONS_REQUESTED,{success:!("error"in e),numActions:"result"in e&&e.result?e.result.length:null}),"error"in e)return f.current=!1,y([]),u("Something went wrong fetching code actions"),void M.c_.captureException(new Error(e.error.message));null!==e.result&&0!==e.result.length?y(e.result):y([])}))}}),[w,h,b,g,t,u]),(0,l.BX)(d.G,{tag:"li",onClick:function(e){e.stopPropagation(),v((function(e){return!e}))},children:[(0,l.BX)(d.G,{css:z.item,children:[o,(0,l.tZ)(d.G,{css:z.text,children:(0,l.tZ)(s.xv,{id:k,multiline:!1,height:"singleLine",children:i})}),(0,l.tZ)(d.G,{css:z.dropdownWrapper,children:(0,l.tZ)(B.h,{alt:"Toggle Code Actions",tooltipHidden:!0,"aria-expanded":h,"aria-controls":C,onClick:function(){G(),v((function(e){return!e}))},innerRef:S,onKeyDown:R,children:(0,l.tZ)(A.Z,{rotate:h?90:0,style:{transition:"120ms ease"}})})})]}),h&&!g?(0,l.BX)(d.G,{css:z.loading,children:[(0,l.tZ)(L.Z,{}),(0,l.tZ)(s.xv,{multiline:!1,height:"singleLine",children:"Loading actions..."})]}):null,h&&g&&w?(0,l.BX)(d.G,{tag:"ul",role:"menubar","aria-orientation":"vertical","aria-labelledby":k,id:C,children:[g.map((function(e,t){return(0,l.tZ)(H.Z,{onClick:function(){(0,F.S)(e,w,Z),r()},children:(0,l.tZ)(d.G,{css:z.item,children:(0,l.tZ)(s.xv,{css:z.subItem,multiline:!1,height:"singleLine",children:e.title})})},t)})),0===g.length?(0,l.tZ)(d.G,{css:z.none,children:(0,l.tZ)(s.xv,{color:"dimmer",multiline:!1,height:"singleLine",children:"No actions available"})}):null]}):null]})}var q,$,Y=n(1809),K=n(72370),Q=n(49459),J="Divider";!function(e){e.Cut="Cut",e.Copy="Copy",e.Paste="Paste",e.JumpToDefinition="JumpToDefinition",e.JumpToTypeDefinition="JumpToTypeDefinition",e.JumpToImplementation="JumpToImplementation",e.FindReferences="FindReferences",e.Rename="Rename",e.SelectAllOccurrences="SelectAllOccurrences",e.CodeActions="CodeActions",e.CopyLinkToPos="CopyLinkToPos",e.ToggleBreakpoint="ToggleBreakpoint",e.StartThread="StartThread",e.ExplainCode="ExplainCode",e.GenerateCode="GenerateCode",e.TransformCode="TransformCode",e.SearchCode="SearchCode"}(q||(q={}));var ee=($={},(0,r.Z)($,q.Cut,{text:"Cut",icon:(0,l.tZ)(Z.Z,{}),keyboardShortcut:{cmdOrCtrlKey:!0,key:"X"}}),(0,r.Z)($,q.Copy,{text:"Copy",icon:(0,l.tZ)(b.Z,{}),keyboardShortcut:{cmdOrCtrlKey:!0,key:"C"}}),(0,r.Z)($,q.Paste,{text:"Paste",icon:(0,l.tZ)(w.Z,{}),keyboardShortcut:{cmdOrCtrlKey:!0,key:"V"}}),(0,r.Z)($,q.JumpToDefinition,{text:"Jump to definition",icon:(0,l.tZ)(x.Z,{}),keyboardShortcut:{cmdOrCtrlKey:!0,key:"F12"}}),(0,r.Z)($,q.JumpToTypeDefinition,{text:"Jump to type definition",icon:(0,l.tZ)(R.Z,{})}),(0,r.Z)($,q.JumpToImplementation,{text:"Jump to implementation",icon:(0,l.tZ)(G.Z,{})}),(0,r.Z)($,q.FindReferences,{text:"Find references",icon:(0,l.tZ)(h.Z,{}),keyboardShortcut:{shiftKey:!0,key:"F12"}}),(0,r.Z)($,q.Rename,{text:"Rename all occurrences",icon:(0,l.tZ)(v.Z,{}),keyboardShortcut:{key:"F2"}}),(0,r.Z)($,q.SelectAllOccurrences,{text:"Select all occurrences",icon:(0,l.tZ)(p.Z,{}),keyboardShortcut:{key:"F2",cmdOrCtrlKey:!0}}),(0,r.Z)($,q.CodeActions,{text:"Code actions",icon:(0,l.tZ)(E.Z,{}),keyboardShortcut:{key:".",cmdOrCtrlKey:!0}}),(0,r.Z)($,q.CopyLinkToPos,{text:"Copy link to position",icon:(0,l.tZ)(m.Z,{})}),(0,r.Z)($,q.ToggleBreakpoint,{text:"Toggle breakpoint",icon:(0,l.tZ)(g.Z,{})}),(0,r.Z)($,q.StartThread,{text:"Start thread",icon:(0,l.tZ)(y.Z,{}),keyboardShortcut:{key:"/",altKey:!0}}),(0,r.Z)($,q.ExplainCode,{text:"Explain code",icon:(0,l.tZ)(T.Z,{})}),(0,r.Z)($,q.GenerateCode,{text:"Generate code",icon:(0,l.tZ)(Y.Z,{}),keyboardShortcut:{key:"g",altKey:!0}}),(0,r.Z)($,q.TransformCode,{text:"Edit code",icon:(0,l.tZ)(K.Z,{}),keyboardShortcut:{key:"t",altKey:!0}}),(0,r.Z)($,q.SearchCode,{text:"Search code",icon:(0,l.tZ)(h.Z,{})}),$);function te(e){return e===J}var ne=35;function re(e){var t=e.dom,n=e.verticalOffset,r=e.coords,i=r.x,o=r.y,a=t.getBoundingClientRect().bottom,l=document.documentElement.clientWidth;if(i+275>l&&(i=l-275-5),o+n>a){var c=o-n;return c<0?{x:i+5,y:0}:{x:i,y:c}}return{x:i,y:o}}var ie=(0,V.X)({ul:[u.l0.maxHeight("100vh"),u.l0.overflowY("auto"),{"& > button":[P.gU.listItem,{margin:0,borderRadius:0}]}],divider:[u.l0.my(2),{borderBottom:"1px solid ".concat(u.TV.outlineDimmer)}],menuItem:[u.l0.p(8),u.l0.pr(4),u.l0.flex.row,u.l0.align.center],actionMenuItem:[u.l0.px(8),u.l0.flex.growAndShrink(1),u.l0.align.start]});function oe(e){var t=e.view,n=e.coords,r=e.closeMenu,i=e.verticalOffset,o=e.children,s=e.width,p=void 0===s?275:s,h=t.dom,v=(0,f.Z)(r,[]),m=(0,a.Z)(c.useState((function(){return re({dom:h,verticalOffset:i,coords:n})})),2),g=m[0],y=g.x,Z=g.y,b=m[1];return c.useEffect((function(){b(re({dom:h,verticalOffset:i,coords:n}))}),[n,i,h]),(0,l.tZ)(C.Tg,{innerRef:v,background:"higher",className:"cm-custom-context-menu",css:[u.l0.position.fixed,u.l0.flex.column,u.l0.justify.center,u.l0.borderRadius(8),u.l0.shadow(2),u.l0.width(p),u.l0.zIndex(101),{left:y,top:Z,overflow:"hidden",border:"1px solid ".concat(u.TV.outlineDefault)}],children:(0,l.tZ)(Q.ZP,{children:(0,l.tZ)(N.uP,{options:{direction:"vertical"},children:(0,l.tZ)(d.G,{tag:"ul",role:"menubar","aria-orientation":"vertical","aria-label":"Context",css:ie.ul,children:o})})})})}function ae(e){var t=e.view,n=e.closeMenu,r=e.actions,a=e.onAction,c=r.filter((function(e){switch(e){case q.TransformCode:case q.ExplainCode:return!t.state.selection.main.empty;case q.StartThread:return 0!==t.state.doc.length;default:return!0}})),u=c.map((function(e){return te(e)?1:ne})).reduce((function(e,t){return e+t}),0);return(0,l.tZ)(oe,(0,o.Z)((0,i.Z)({verticalOffset:u},e),{children:c.map((function(e,r){return te(e)?(0,l.tZ)(d.G,{css:ie.divider},r):e===q.CodeActions?(0,l.tZ)(j,{view:t,closeMenu:n,metadata:ee[e]},e):(0,l.tZ)(H.Z,{onClick:function(t){var r=(0,k.j)(t);a(e,{isCmdOrCtrl:r}),n()},children:(0,l.tZ)(ce,{item:e})},e)}))}))}function le(e){var t=e.children,n=e.item;return(0,l.tZ)(d.G,{"data-cy":n?"context-menu-".concat(n):null,css:ie.menuItem,children:t})}function ce(e){var t=e.item,n=ee[t],r=n.text,i=n.icon,o=n.keyboardShortcut;return(0,l.BX)(le,{item:t,children:[i,(0,l.tZ)(d.G,{css:ie.actionMenuItem,children:(0,l.tZ)(s.xv,{multiline:!1,height:"singleLine",children:r})}),o?(0,l.tZ)(d.G,{children:(0,l.tZ)(S.ZP,{shortcut:o,size:"small",css:u.l0.color.foregroundDimmest})}):null]})}},13405:function(e,t,n){var r=n(2272),i=n(74985),o=n(1169),a=n(85368),l=n(17807),c=n(39541),u=n(50959),s=n(43312),d=a.K.button,f=(0,s.iv)([c.l0.reset.button,l.gU.listItem,c.l0.mx(4),c.l0.borderRadius(4),{border:"none"}]);t.Z=function(e){var t=e.onClick,n=e.children,a=u.useRef(null),l=(0,r.Z)((0,o.XZ)(a,!1),4),c=l[0],s=l[1],p=l[2],h=l[3];return(0,o.Ym)(s,a),(0,i.tZ)(d,{ref:a,role:"menuitem",css:f,onClick:function(e){h(),t(e)},onKeyDown:p,tabIndex:c,children:n})}},83293:function(e,t,n){n.d(t,{q:function(){return I},J:function(){return G}});var r=n(72006),i=n(4405),o=n(77637),a=n(2272),l=n(74985),c=n(66091),u=n(5683),s=n(45347),d=n(14806),f=n(69994),p=n(63230),h=f.tk.baseTheme({".cm-diff-inserted":{backgroundColor:"#0053A644",borderLeft:"#0053A6 solid 3px"},".cm-diff-deleted":{backgroundColor:"#c93c3733",borderLeft:"#c93c37 solid 3px"}}),v=f.p.line({attributes:{class:"cm-diff-inserted"}}),m=f.p.line({attributes:{class:"cm-diff-deleted"}}),g=d.Py.define({map:function(e,t){return e.map(t)}}),y=function(e){(0,u.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,c.Z)(this,n),t.apply(this,arguments)}var r=n.prototype;return r.toDOM=function(){var e=document.createElement("div");return e.className="cm-diff-alignment cm-line",e.innerHTML="&nbsp;",e},r.ignoreEvent=function(){return!1},n}(f.l9);function Z(e){var t=new d.f_,n=new y;e.sort((function(e,t){return e.character-t.character}));var r=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done);r=!0)for(var c=a.value,u=c.character,s=c.padding,p=0;p<s;p++)t.add(u,u,f.p.widget({widget:n,side:-1,block:!0}))}catch(h){i=!0,o=h}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return t.finish()}function b(e){var t=e.coloredLines,n=e.colorDecoration,r=f.lg.fromClass((function e(r){(0,c.Z)(this,e);var i=new d.f_,o=!0,a=!1,l=void 0;try{for(var u,s=t[Symbol.iterator]();!(o=(u=s.next()).done);o=!0){var f=u.value,p=r.state.doc.line(f);i.add(p.from,p.from,n)}}catch(h){a=!0,l=h}finally{try{o||null==s.return||s.return()}finally{if(a)throw l}}this.decorations=i.finish()}),{decorations:function(e){return e.decorations}}),i=d.QQ.define({create:function(){return f.p.none},update:function(e,t){var n=!0,r=!1,i=void 0;try{for(var o,a=t.effects[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value;if(l.is(g))return l.value}}catch(c){r=!0,i=c}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return t.docChanged?e.map(t.changes):e},provide:function(e){return f.tk.decorations.from(e)}});return[h,r,i]}var w=function(){var e=function(e,t){return f.tk.domEventHandlers({scroll:function(n,r){if(r===e&&n.target){var i=n.target;if(i.scrollTop){var o=i.scrollTop;t.scrollDOM.scrollTo({top:o})}}}})},t=new d.F6,n=new d.F6;return{extensions:function(){return{right:t.of([]),left:n.of([])}},setup:function(r,i){r.dispatch({effects:n.reconfigure(e(r,i))}),i.dispatch({effects:t.reconfigure(e(i,r))})}}},x=n(34227),k=n(64804),C=n(50959),S=n(6394),T=w(),E=T.extensions,R=T.setup;function G(e){var t=e.left,n=e.right,l=e.showDiffDecorations,c=void 0===l||l,u=t.code,s=(0,o.Z)(t,["code"]),f=n.code,h=(0,o.Z)(n,["code"]),y=(0,k.Z)(),w=y.ref,x=y.view,S=(0,k.Z)(),T=S.ref,G=S.view,I=C.useMemo((function(){var e=E().left;return s.extensions?[s.extensions,e]:e}),[s.extensions]),_=C.useMemo((function(){var e=E().right;return h.extensions?[h.extensions,e]:e}),[h.extensions]);s=(0,i.Z)((0,r.Z)({},s),{extensions:I}),h=(0,i.Z)((0,r.Z)({},h),{extensions:_});var D=(0,a.Z)(C.useState(!1),2),B=D[0],P=D[1],A=(0,a.Z)(C.useState(!1),2),L=A[0],U=A[1];return C.useEffect((function(){if(x&&G&&B&&L&&c){var e=setTimeout((function(){R(x,G),function(e,t){var n=(0,p.Bz)(e.state.doc.sliceString(0),t.state.doc.sliceString(0));e.dispatch({effects:[d.Py.appendConfig.of(b({coloredLines:n.leftColored.sort((function(e,t){return e-t})),colorDecoration:m})),g.of(Z(n.leftPadded))]}),t.dispatch({effects:[d.Py.appendConfig.of(b({coloredLines:n.rightColored.sort((function(e,t){return e-t})),colorDecoration:v})),g.of(Z(n.rightPadded))]})}(x,G)}));return function(){return clearTimeout(e)}}}),[x,G,B,L,c]),C.useEffect((function(){x&&(x.dispatch({changes:{from:0,to:x.state.doc.length,insert:u}}),P(!0))}),[u,x]),C.useEffect((function(){G&&(G.dispatch({changes:{from:0,to:G.state.doc.length,insert:f}}),U(!0))}),[f,G]),{left:{view:x,ref:w,code:u,options:s,ready:B},right:{view:G,ref:T,code:f,options:h,ready:L}}}function I(e){var t=e.diffViewer,n=(0,o.Z)(e,["diffViewer"]),i=(0,r.Z)({},t.options,n);return(0,l.BX)(l.HY,{children:[(0,l.tZ)(x.Z,(0,r.Z)({ref:t.ref,css:{height:t.ready?0:"auto"},initialDoc:t.code,lineWrapping:!1,readOnly:!0},i)),!t.ready&&(0,l.tZ)(S.Z,{code:t.code,language:i.language,filePath:i.filePath,lineNumbers:!i.hideGutter,fontSize:i.fontSize})]})}},63230:function(e,t,n){n.d(t,{Bz:function(){return v},PO:function(){return m}});var r=n(66091),i=n(2272),o=n(96583),a=n(85386),l=n.n(a),c=l().DIFF_DELETE,u=l().DIFF_INSERT,s=l().DIFF_EQUAL;function d(e,t){var n=new(l()),r=n.diff_linesToChars_(e,t),i=r.chars1,o=r.chars2,a=r.lineArray,c=n.diff_main(i,o,!1);return n.diff_charsToLines_(c,a),c}function f(e){return e.split("\n").length-1}function p(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(0===t)return 0;var r=e.indexOf("\n",n);return-1===r?null:1===t?r+1:p(e,t-1,r+1)}function h(e,t,n){if(e>0){var r=p(n,t);if(null!==r)return{lineNumber:t,character:r,padding:e}}return null}function v(e,t){for(var n,r,o=d(e+((n="\n"===e[e.length-1])?"":"\n"),t+((r="\n"===t[t.length-1])?"":"\n")),a=0,l=0,p=[],v=[],m=[],g=[],y=0,Z=0,b=0;b<o.length;b++){var w=(0,i.Z)(o[b],2),x=w[0],k=f(w[1]);switch(x){case c:var C,S=(0,i.Z)(null!==(C=o[b+1])&&void 0!==C?C:[],2),T=S[0],E=S[1];a+=k;for(var R=0;R<k;R++)p.push(a-R);var G=k;T===u&&(G-=f(E));var I=h(G,l,t);I&&g.push(I);break;case u:var _,D=(0,i.Z)(null!==(_=o[b-1])&&void 0!==_?_:[],2),B=D[0],P=D[1];l+=k;for(var A=0;A<k;A++)v.push(l-A);var L=k;B===c&&(L-=f(P));var U=h(L,a,e);U&&m.push(U);break;case s:l>Z&&(Z=l),a>y&&(y=a),a+=k,l+=k}}var X=m.filter((function(e){return e.lineNumber<Z})),M=g.filter((function(e){return e.lineNumber<y}));return{leftPadded:X,rightPadded:M,leftColored:p,rightColored:v,changedTrailingNewline:n!==r,leftTrailingNewline:n,rightTrailingNewline:r}}var m=function(){function e(t,n){(0,r.Z)(this,e),this.deleted=new Set,this.inserted=new Map,this.linePositions=new Map,this.lineLengths=new Map,this.currentTrailingNewline="\n"===t[t.length-1],this.otherTrailingNewline="\n"===n[n.length-1],this.changedTrailingNewline=this.currentTrailingNewline!==this.otherTrailingNewline;var o=d(t,n),a=[],l=!0,f=!1,p=void 0;try{for(var h,v=o[Symbol.iterator]();!(l=(h=v.next()).done);l=!0){var m=(0,i.Z)(h.value,2),g=m[0],y=m[1].split("\n");""===y[y.length-1]&&y.pop();var Z=!0,b=!1,w=void 0;try{for(var x,k=y[Symbol.iterator]();!(Z=(x=k.next()).done);Z=!0){var C=x.value;a.push([g,C])}}catch(X){b=!0,w=X}finally{try{Z||null==k.return||k.return()}finally{if(b)throw w}}}}catch(X){f=!0,p=X}finally{try{l||null==v.return||v.return()}finally{if(f)throw p}}this.currentTrailingNewline&&!this.otherTrailingNewline?a.push([c,""]):!this.currentTrailingNewline&&this.otherTrailingNewline?a.push([u,""]):this.currentTrailingNewline&&this.otherTrailingNewline&&a.push([s,""]);var S=1,T=0,E=1,R=!0,G=!1,I=void 0;try{for(var _,D=a[Symbol.iterator]();!(R=(_=D.next()).done);R=!0){var B=(0,i.Z)(_.value,2),P=B[0],A=B[1];switch(P){case c:this.linePositions.set(S,T),this.lineLengths.set(S,A.length),this.deleted.add(S),T+=A.length+1,S++;break;case u:var L=S-1,U=this.inserted.get(L);U||(U=[],this.inserted.set(L,U)),U.push({number:E,content:A}),E++;break;case s:this.linePositions.set(S,T),this.lineLengths.set(S,A.length),T+=A.length+1,S++,E++}}}catch(X){G=!0,I=X}finally{try{R||null==D.return||D.return()}finally{if(G)throw I}}}var t=e.prototype;return t.startInsertions=function(){var e=this.inserted.get(0);return e&&0!==e.length?e:null},t.lineIsDeleted=function(e){return this.deleted.has(e)},t.lineInsertions=function(e){var t=this.inserted.get(e);return t&&0!==t.length?t:null},t.lineInsertedContent=function(e){var t=this.lineInsertions(e);return t?t.map((function(e){return e.content})).join("\n"):null},t.offsetFor=function(e){var t,n,r=0;r+=null!==(n=null===(t=this.inserted.get(0))||void 0===t?void 0:t.length)&&void 0!==n?n:0;for(var i=1;i<e;i++){this.lineIsDeleted(i)&&r--;var o=this.lineInsertions(i);o&&(r+=o.length)}return r},t.linePosition=function(e){var t;return null!==(t=this.linePositions.get(e))&&void 0!==t?t:null},t.lineLength=function(e){var t;return null!==(t=this.lineLengths.get(e))&&void 0!==t?t:null},t.line=function(e){var t=this.linePosition(e),n=this.lineLength(e);return null===t||null===n?null:{number:e,from:t,to:t+n,length:n,offset:this.offsetFor(e),isDeleted:this.lineIsDeleted(e),insertions:this.lineInsertions(e)}},t.lines=function(){var e,t,n,r,a,l,c,u,s;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:e=!0,t=!1,n=void 0,o.label=1;case 1:o.trys.push([1,6,7,8]),r=this.linePositions[Symbol.iterator](),o.label=2;case 2:if(e=(a=r.next()).done)return[3,5];if(l=(0,i.Z)(a.value,1),c=l[0],!(u=this.line(c)))throw new Error("line should not be null");return[4,u];case 3:o.sent(),o.label=4;case 4:return e=!0,[3,2];case 5:return[3,8];case 6:return s=o.sent(),t=!0,n=s,[3,8];case 7:try{e||null==r.return||r.return()}finally{if(t)throw n}return[7];case 8:return[2]}}))},e}()},88253:function(e,t,n){n.d(t,{U:function(){return l}});var r=n(69994),i=n(55143),o=r.tk.theme({".cm-content":{paddingBottom:"".concat(80,"px")}}),a=r.tk.theme({".cm-content":{paddingBottom:"".concat(400,"px")}}),l=new i.j((function(e){return e?o:a}))},16988:function(e,t,n){n.d(t,{v:function(){return p}});var r=n(11619),i=n(64918),o=n(5894),a=n(72006),l=n(43119),c=n(71440),u=n(24635);function s(){var e=(0,l.Z)(['\n  query ChatEngine {\n    currentUser {\n      id\n      defaultEngine: gateVariation(feature: "flag-ghostwriter-chat-engine")\n      hasOverride: gate(feature: "flag-ghostwriter-chat-engine-override")\n    }\n  }\n']);return s=function(){return e},e}var d={},f=(0,c.Ps)(s());function p(){var e,t,n=(0,r.Z)().preferences,l=function(e){var t=(0,a.Z)({},d,e);return u.a(f,t)}().data,c=null===l||void 0===l||null===(e=l.currentUser)||void 0===e?void 0:e.hasOverride,s=null===n||void 0===n?void 0:n.chatEngine,p=null===l||void 0===l||null===(t=l.currentUser)||void 0===t?void 0:t.defaultEngine;return c&&s&&(0,i.uL)(s)?s:(0,i.uL)(p)?p:o.Fp}},31858:function(e,t,n){n.d(t,{Z:function(){return f}});var r=n(11619),i=n(98416),o=n(72006),a=n(43119),l=n(71440),c=n(24635);function u(){var e=(0,a.Z)(['\n  query CompleteCodeEngine {\n    currentUser {\n      id\n      defaultEngine: gateVariation(feature: "flag-ghostwriter-complete-engine")\n      hasOverride: gate(feature: "flag-code-suggestion-engine")\n    }\n  }\n']);return u=function(){return e},e}var s={},d=(0,l.Ps)(u());function f(){var e,t,n,a=(0,r.Z)().preferences,l=function(e){var t=(0,o.Z)({},s,e);return c.a(d,t)}().data,u=null===a||void 0===a?void 0:a.completeCodeEngine;if(u&&(null===l||void 0===l||null===(e=l.currentUser)||void 0===e?void 0:e.hasOverride)&&i.vw.has(u))return{engine:u,settings:i.Uw[u]};var f=null!==(n=null===l||void 0===l||null===(t=l.currentUser)||void 0===t?void 0:t.defaultEngine)&&void 0!==n?n:i.OO;return{engine:f,settings:i.Uw[f]}}},52367:function(e,t,n){n.d(t,{Z:function(){return Se}});var r=n(45853),i=n(11619),o=n(48330),a=n(18171),l=n(50959),c=n(9608),u=n(66091),s=n(95844),d=n(65210),f=function(){function e(){(0,u.Z)(this,e),this.cache=new s.L(d.vq)}var t=e.prototype;return t.has=function(e){return this.cache.has(e)},t.get=function(e){return this.cache.get(e)},t.set=function(e,t){this.cache.set(e,t)},t.setSuggestion=function(e,t){this.cache.set(e,JSON.stringify({text:t})+"\n")},e}(),p=n(88733),h=n(57135),v=n(72006),m=n(4405),g=n(96583),y=n(71284),Z=n(68935),b=n(14806),w=n(69994),x=n(88254),k=n(45634),C=n(625);var S,T=n(86763),E=n.n(T),R=n(2272),G=n(74985),I=n(23262),_=n(45447),D=n(13233),B=n(11969),P=n(2041),A=n(39541),L=n(85368),U=n(61284),X=n(93658),M=function(e){var t=e.onClose,n=(0,D.Z)(),r=n.showNotice,i=n.hideMessage,o=(0,R.Z)(l.useState(!1),2),a=o[0],c=o[1];return(0,l.useEffect)((function(){var e=function(){c(!0),i(t)},t=r((0,G.BX)(L.G,{css:[A.l0.rowWithGap(4),A.l0.align.center],children:[(0,G.tZ)(X.Z,{}),(0,G.BX)(U.xv,{multiline:!1,css:{fontSize:"calc(".concat(A.TV.fontSizeSubheadDefault," - 1px)"),"@media (max-width: 768px)":A.l0.fontSize(14)},children:["Thanks for trying Ghostwriter!",(0,G.tZ)("a",{role:"button",tabIndex:0,css:{color:"inherit",textDecoration:"underline",marginLeft:"3px"},onKeyPress:function(t){"Enter"!==t.key&&" "!==t.key||(t.preventDefault(),e())},onClick:function(t){t.preventDefault(),e()},children:"Give feedback"})]})]}),0,{color:A.TV.accentPrimaryStrongest,fontWeight:A.TV.fontWeightRegular})}),[i,r,t]),(0,G.tZ)(_.b5,{children:(0,G.tZ)(P.u,{isOpen:a,onRequestClose:function(){c(!1)},children:(0,G.tZ)(I.Z,{setFeedbackFormOpen:c,feature:I.l.GhostWriter})})})};!function(e){e.Acceptance="ghostWriter.acceptance",e.Rejection="ghostWriter.rejection"}(S||(S={}));var N=n(24601),O=n(38353),F=n(36577),W=n(57806);function H(e){var t=e.onComplete,n=e.onEscape,r=null,i=null;return w.tk.domEventHandlers({touchstart:function(e){i=null,r=e.targetTouches[0].clientX},touchmove:function(e){i=e.targetTouches[0].clientX},touchend:function(e,o){if(r&&i)return r-i<-50&&t(o),n(o),!0}})}var V=n(1468),z=n(250);var j=n(49500);function q(e,t){var n=null,r=function(){};return{queue:function(i){n&&clearTimeout(n);var o=function(){(0,C.j)(C.U3.CODE_SUGGESTION_USED,(0,v.Z)({type:e},i))};n=setTimeout(o,t),r=o},flush:function(){n&&clearTimeout(n),r()},cancel:function(){n&&clearTimeout(n)}}}function $(e){var t=e.language,n=e.infill,r=e.completeCode,i=e.decorations,o=e.logMetadata,a=e.newRendering,l=e.keybindings,c=function(){var e;return{abort:function(){null===e||void 0===e||e.abort()},requestSignal:function(){var t=new AbortController;return null===e||void 0===e||e.abort(),e=t,t.signal}}}(),u=q("suggestionPresented",500),s=q("suggestionCompletelyPresented",500),f=null,S=E()(function(){var e=(0,h.Z)((function(e){var i,a,l,h,b,w,x,k,S,T,E,R,G,I,_,D,B,P,A,L;return(0,g.__generator)(this,(function(g){switch(g.label){case 0:if(a=e.state,l=a.doc,h=a.selection,0===(b=h.main.head))return[2];if(w=l.sliceString(b-1,b),[";",")","}","]","{"].includes(w))return[2];if(!(x=l.sliceString(Math.max(0,b-d.ed),b))||x.length<d.jr)return[2];f=x.length,x=e.state.facet(Z.c)+"\n"+x,k=n?function(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.split("\n"),r=0;r<n.length;r++){var i=n[r];if(i[0]&&i[0].match(/\S/))return t?n.slice(0,r).join("\n")+"\n":n.slice(0,r+1).join("\n")}return e}(l.sliceString(b),d.NX.has(t)):void 0,S=(0,F.i)(e.state)?d.Pz:d._7,T=null===(i=x.match(/[^\s]([ \t]+)$/))||void 0===i?void 0:i[1],g.label=1;case 1:g.trys.push([1,14,,15]),E=!0,R=!1,G=!1,g.label=2;case 2:g.trys.push([2,7,8,13]),_=(0,p.Z)(r({code:T?x.slice(0,-T.length):x,suffix:k,maxTokens:S,signal:c.requestSignal()})),g.label=3;case 3:return[4,_.next()];case 4:if(!(R=!(D=g.sent()).done))return[3,6];if(B=D.value,P=B,"active"===(0,y.LR)(e.state))return c.abort(),[3,6];if(E&&T){if(!P.startsWith(T))return c.abort(),[3,6];P=P.slice(T.length)}E&&(V.c_.addBreadcrumb({category:"ghostwriter",message:"Suggestion presented",level:"debug"}),u.queue((0,m.Z)((0,v.Z)({},o),{prefixLength:f}))),e.dispatch({effects:E?N.t8.of({code:P,language:t,infill:n}):N.R3.of(P)}),E=!1,g.label=5;case 5:return R=!1,[3,3];case 6:return[3,13];case 7:return A=g.sent(),G=!0,I=A,[3,13];case 8:return g.trys.push([8,,11,12]),R&&null!=_.return?[4,_.return()]:[3,10];case 9:g.sent(),g.label=10;case 10:return[3,12];case 11:if(G)throw I;return[7];case 12:return[7];case 13:return!1!==E?(V.c_.addBreadcrumb({category:"ghostwriter",message:"Exited completeCode iteration with no suggestion.",level:"info"}),(0,C.j)(C.U3.CODE_SUGGESTION_USED,(0,m.Z)((0,v.Z)({type:"suggestionNotPresented"},o),{reason:"noSuggestion"})),e.dispatch({effects:N.t8.of(null)}),[2]):(V.c_.addBreadcrumb({category:"ghostwriter",message:"Suggestion completely presented",level:"debug"}),s.queue((0,m.Z)((0,v.Z)({},o),{prefixLength:f})),e.dispatch({effects:N.dp.of(!0)}),[3,15]);case 14:return"AbortError"===(null===(L=g.sent())||void 0===L?void 0:L.name)?[2]:(V.c_.withScope((function(e){e.setExtra("prefix",x),e.setExtra("maxTokens",S),e.setExtra("language",t),e.setExtra("selection-head",b),e.setExtra("previous-character",w),e.setExtras(o),e.setTag("ghostwriter",!0),V.c_.captureException(L)})),j.error("CodeSuggestionExtension"),j.error(L),[3,15]);case 15:return[2]}}))}));return function(t){return e.apply(this,arguments)}}(),d.co),T=function(e){var t=function(){e.update((function(e){return e.delete("feedback")}))},n=function(){var n,r,i=(null!==(n=B.Z.get("ghostWriter.acceptance","number"))&&void 0!==n?n:0)+(null!==(r=B.Z.get("ghostWriter.rejection","number"))&&void 0!==r?r:0);d.B2.includes(i)?e.update((function(e){return e.set("feedback",(0,G.tZ)(M,{onClose:t}))})):t()};return{recordAccept:function(){B.Z.update("ghostWriter.acceptance","number",(function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)+1})),n()},recordReject:function(){B.Z.update("ghostWriter.rejection","number",(function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)+1})),n()}}}(i),R=function(e){var t=(0,O.$o)(e);if(t){var n=t.texts.reduce((function(e,t){return e+t.text.length}),0);return u.flush(),s.flush(),(0,C.j)(C.U3.CODE_SUGGESTION_USED,(0,m.Z)((0,v.Z)({type:"suggestionAccepted"},o),{prefixLength:f,suggestionLength:n})),V.c_.addBreadcrumb({category:"ghostwriter",message:"Suggestion accepted",level:"info"}),T.recordAccept(),(0,y._B)(e),!0}return!1};return[b.Wl.high(w.$f.of([{key:(0,z.cU)(l.acceptPrimaryCompletion),run:R},{key:(0,z.cU)(l.cancelCompletion),run:function(e){return!!(0,O._n)(e)&&(c.abort(),u.flush(),s.flush(),(0,C.j)(C.U3.CODE_SUGGESTION_USED,(0,m.Z)((0,v.Z)({type:"suggestionDismissed"},o),{prefixLength:f})),x.n_({category:"ghostwriter",message:"Suggestion explicitly dismissed",level:"info"}),T.recordReject(),!0)}},{key:"Enter",run:O.gT}])),w.tk.domEventHandlers({blur:function(e,t){setTimeout((function(){t.dispatch({effects:N.t8.of(null)})}),100),u.cancel(),s.cancel(),c.abort()}}),w.tk.updateListener.of((function(e){(0,k.j)(e,N.he,(function(t){var n,r;t.value!==W.z.Stop?(n=e.view,r=t.value,u.cancel(),s.cancel(),c.abort(),S(n),r===W.z.Now&&S.flush()):(u.cancel(),s.cancel(),c.abort())}))})),(0,O.G0)(a),H({onComplete:R,onEscape:O._n})]}var Y=n(31858),K=n(88541),Q=n(45285),J=n(87978);function ee(e,t,n){var r=(0,c.S)(t),i=e.split("\n");return{code:i.slice(Math.max(0,i.length-n)).join("\n"),language:r,filePath:t}}var te=n(13716);function ne(e,t,n){var r=(0,l.useState)([]),i=r[0],o=r[1],a=(0,l.useState)(!1),c=a[0],u=a[1];return(0,l.useEffect)((function(){e&&(u(!0),(0,h.Z)((function(){var r;return(0,g.__generator)(this,(function(i){switch(i.label){case 0:return[4,Promise.all(e.map(function(){var e=(0,h.Z)((function(e){var r,i;return(0,g.__generator)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,n(e)];case 1:return(r=o.sent()).error?[2,!1]:(i=r.content.toString(),[2,t(i,e)]);case 2:return o.sent(),[2,!1];case 3:return[2]}}))}));return function(t){return e.apply(this,arguments)}}()))];case 1:return r=i.sent().filter(Boolean),u(!1),o(r),[2]}}))}))())}),[e,n,t]),{cachedFiles:i,loading:c}}var re={javascript:["javascript","typescript"],python:["python","python3"],python3:["python","python3"],typescript:["javascript","typescript"]},ie=["json"];function oe(e,t){var n=e.toLowerCase(),r=t.toLowerCase();return n===r||(!!ie.includes(n)||!!re[n]&&re[n].includes(r))}function ae(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6,r=(0,K.P5)({controlName:"flag-ghostwriter-neighboring-context",logFlagToAnalytics:!1}),i=(0,te.Bx)(),o=(0,l.useState)(null),a=o[0],u=o[1];return(0,l.useEffect)((function(){u(r?i.filter((function(n){return oe((0,c.S)(n),e)&&n!==t&&(0,J.Mb)(n)})).slice(0,n):null)}),[e,t,r,n,i]),a}var le=n(82001),ce=n(52841),ue=n(43119),se=n(71440),de=n(24635);function fe(){var e=(0,ue.Z)(['\n  query CompleteCode {\n    currentUser {\n      id\n      userPowerUpsByType {\n        __typename\n        ... on UnauthorizedError {\n          message\n        }\n        ... on UserPowerUpsTypes {\n          ghostwriter {\n            active\n          }\n        }\n      }\n      hasKillswitch: gate(feature: "flag-killswitch-ghostwriter")\n    }\n  }\n']);return fe=function(){return e},e}var pe={},he=(0,se.Ps)(fe());function ve(){var e,t,n,r=function(e){var t=(0,v.Z)({},pe,e);return de.a(he,t)}().data;return!("UserPowerUpsTypes"!==(null===r||void 0===r||null===(e=r.currentUser)||void 0===e||null===(t=e.userPowerUpsByType)||void 0===t?void 0:t.__typename)||!(null===r||void 0===r?void 0:r.currentUser.userPowerUpsByType.ghostwriter.active))&&!(null===r||void 0===r||null===(n=r.currentUser)||void 0===n?void 0:n.hasKillswitch)}var me=n(73012),ge=n(81962),ye=n(11858),Ze=n(95851);var be=n(49520),we=n(29457),xe=new Map,ke={beforeCompletion:function(e){x.n_({category:"ghostwriter",message:"Called completeCode: "+e.engine,level:"debug"});var t=be.YX.add(e),n=we.kg.timeStart({language:e.language,engine:e.engine,replid:e.replId,codeLength:e.code.length});return xe.set(t,n),t},afterCompletion:function(e,t,n,r){switch(e){case"aborted":be.YX.abort(r),xe.delete(r);break;case"success":x.n_({category:"ghostwriter",message:"Suggestion emitted: "+n.partialSuggestion,level:"debug"});var i=xe.get(r);if(!i)throw new Error("No latency logger found for handle: "+JSON.stringify(r));i("code suggestion",{type:"success"}),xe.delete(r);break;case"finished":be.YX.complete(r,{__typename:"CompleteCodeResult",id:Date.now().toString(),code:n.completeSuggestion});break;case"error":be.YX.abort(r),xe.delete(r),we.kg.error("CompleteCode: error in completion provider",{err:String(n.error)});break;default:throw new Error("Unknown completion kind: "+e)}}},Ce=n(11796);function Se(e){var t,n=e.filePath,u=e.view,s=e.decorations,m=(0,o.Z)(),y=(0,c.S)(n),Z=(0,i.Z)().preferences,b=(0,Y.Z)(),w=b.engine,k=b.settings,C=null!==(t=null===k||void 0===k?void 0:k.infill)&&void 0!==t&&t,S=(0,le.gf)(ce.CN.acceptPrimaryCompletion.id),T=(0,le.gf)(ce.CN.cancelCompletion.id),E=ve(),R=(0,K.P5)({controlName:"flag-code-suggestion-markdown",logFlagToAnalytics:!1}),G="markdown"===y&&R,I=(0,K.P5)({controlName:"flag-gw-new-ghost-text",logFlagToAnalytics:!1}),_=(0,r.Z)({view:u});(0,l.useEffect)((function(){be.YX.toggle(Boolean(Z.codeSuggestion))}),[Z.codeSuggestion]);var D=(0,a.Z)((function(){return function(){var e=function(){var e=(0,h.Z)((function(e,t){var n,r,i,o,a,l;return(0,g.__generator)(this,(function(c){switch(c.label){case 0:return[4,fetch("/ai/complete",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"},signal:t,body:JSON.stringify(e)})];case 1:return n=c.sent(),r=n.body,200===(i=n.status)?[3,3]:(o=Error.bind,l=(a="Error (".concat(i,") response from /ai/complete: ")).concat,[4,n.text()]);case 2:throw new(o.apply(Error,[void 0,l.apply(a,[c.sent()])]));case 3:if(!r)throw new Error("No body in response");return[2,function(){return(0,Ce.n)(r)}]}}))}));return function(t,n){return e.apply(this,arguments)}}();return e}()}),[]),B=(0,a.Z)((function(){return new f}),[y,n,m,w]),P=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:6,i=(0,Q.Z)().fs,o=ne(ae(e,t,r),(0,l.useCallback)((function(e,t){return ee(e,t,n)}),[n]),(0,l.useCallback)(function(){var e=(0,h.Z)((function(e){return(0,g.__generator)(this,(function(t){switch(t.label){case 0:return[4,i.readFile(e)];case 1:return[2,t.sent()]}}))}));return function(t){return e.apply(this,arguments)}}(),[i])).cachedFiles;return null!==o&&void 0!==o?o:[]}(y,n),A=function(e){var t=e.language,n=e.engine,r=e.replId,i=e.filePath,o=e.additionalContext,a=e.settings,c=e.provider,u=e.cache,s=e.hooks,d=a.infill,f=a.isMarkdownOverridden,h=(0,l.useCallback)(function(){var e=(0,ye.Z)((function(e){var a,l,h,m,y,Z,b,w,x,k,C,S,T,E,R,G,I,_,D,B,P,A,L,U,X,M,N,O;return(0,g.__generator)(this,(function(F){switch(F.label){case 0:return a=s.beforeCompletion,l=s.afterCompletion,h=e.code,m=e.suffix,y=e.signal,Z=e.maxTokens,h?(b=f?{maxTokens:75,stop:[]}:{},w=(0,v.Z)({language:t,code:h,suffix:d?m:void 0,replId:r,filePath:i,engine:n,maxTokens:Z,additionalContext:o,stop:["\n\n","```"]},b),x=a(w),null==(C=u.get(h))?[3,1]:(k=(0,ye.Z)((function(){return(0,g.__generator)(this,(function(e){switch(e.label){case 0:return[4,C];case 1:return e.sent(),[2]}}))})),[3,4])):[2];case 1:return F.trys.push([1,3,,4]),[4,(0,me.Z)(c(w,y))];case 2:return k=F.sent(),[3,4];case 3:return S=F.sent(),l("error",w,{error:(0,ge.Z)(S,Error)?S:new Error("Unknown error")},x),[2];case 4:T="",E="",R=!0,G=!1,y.addEventListener("abort",(function(){l("aborted",w,{},x),G=!0})),I=!1,_=!1,F.label=5;case 5:F.trys.push([5,13,14,19]),B=(0,p.Z)(k()),F.label=6;case 6:return[4,(0,me.Z)(B.next())];case 7:if(!(I=!(P=F.sent()).done))return[3,12];A=P.value,E+=A,L=void 0,F.label=8;case 8:return-1===(L=E.indexOf("\n"))?[3,11]:(U=JSON.parse(E.substring(0,L)),X=U.text,E=E.substring(L+1),M=(0,Ze.Hy)(X,t),N=M.replacementSuggestion,T+=N,G?[3,10]:[4,N]);case 9:F.sent(),F.label=10;case 10:return R&&(l("success",w,{fromCache:!!C,partialSuggestion:N},x),R=!1),(0,Ze.cx)(T).haltAfter&&(G=!0),[3,8];case 11:return I=!1,[3,6];case 12:return[3,19];case 13:return O=F.sent(),_=!0,D=O,[3,19];case 14:return F.trys.push([14,,17,18]),I&&null!=B.return?[4,B.return()]:[3,16];case 15:F.sent(),F.label=16;case 16:return[3,18];case 17:if(_)throw D;return[7];case 18:return[7];case 19:return T.trim().length&&!u.has(h)&&u.setSuggestion(h,T),G||!E?[3,21]:[4,E];case 20:F.sent(),F.label=21;case 21:return l("finished",w,{completeSuggestion:T,fromCache:!!C},x),[2]}}))}));return function(t){return e.apply(this,arguments)}}(),[t,n,r,i,o,d,f,u,s,c]);return h}({language:y,engine:w,replId:m,filePath:n,additionalContext:P,settings:{infill:C,isMarkdownOverridden:G},provider:D,cache:B,hooks:ke});(0,l.useEffect)((function(){if(u&&E){if(Z.codeSuggestion&&(d.PE.has(y)||G)){var e={filePath:n,language:y,engine:w,additionalContextCount:P.length,additionalContextLength:P.reduce((function(e,t){return e+t.code.length}),0)};return u.dispatch({effects:_.reconfigure($({language:y,infill:C,completeCode:A,decorations:s,logMetadata:e,newRendering:I,keybindings:{acceptPrimaryCompletion:S,cancelCompletion:T}}))}),function(){u.dispatch({effects:_.reconfigure([])})}}x.n_({category:"ghostwriter",message:"Explicitly skipped useCompleteCode effect.",level:"info"})}}),[u,B,A,E,_,n,y,m,s,w,Z.codeSuggestion,C,P,S,T,G,I])}},22917:function(e,t,n){n.d(t,{S:function(){return l},Z:function(){return c}});var r=n(50959),i=n(14806),o=n(45285),a=n(69994);function l(e){var t=e.view,n=e.line,r=e.col,o=t.state.doc,l=Math.max(1,Math.min(n,o.lines)),c=o.line(l),u=c.to,s=c.from,d=r||0,f=Math.min(s+d,u),p=i.jT.cursor(f);t.dispatch({selection:p,effects:[a.tk.scrollIntoView(f,{x:"center",y:"center"})]})}function c(e){var t=e.filePath,n=e.view,i=e.isLoading,a=e.deeplink,c=e.onDeeplinkUpdated,u=(0,o.Z)().session;r.useEffect((function(){if(n&&!i&&a){var e=a.line,t=a.col;void 0!==e&&(l({view:n,line:e,col:t}),c&&c())}}),[n,i,a,c]),r.useEffect((function(){if(n&&!i)return u.onDeeplinkUpdated((function(e){var r=e.path,i=e.line,o=e.col;r===t&&i&&l({view:n,line:i,col:o})}))}),[u,n,t,i])}},42785:function(e,t,n){n.d(t,{EE:function(){return h},Gj:function(){return a},ZF:function(){return v},_j:function(){return l},f3:function(){return f},fI:function(){return p},gm:function(){return d},yK:function(){return u}});var r=n(2272),i=n(56440),o=n(4385),a={regexp:/-?\b\d+\.?\d*\b/g,cursor:"ew-resize",onDrag:function(e,t,n){var r=Number(e)+n.movementX;isNaN(r)||t(r.toString())}},l={regexp:/true|false/g,cursor:"pointer",onClick:function(e,t){switch(e){case"true":return t("false");case"false":return t("true")}}};function c(e){var t=new RegExp("".concat(e,"\\(-?\\b\\d+\\.?\\d*\\b\\s*(,\\s*-?\\b\\d+\\.?\\d*\\b)?"),"g"),n=new RegExp("".concat(e,"\\((?<x>-?\\b\\d+\\.?\\d*\\b)\\s*(,\\s*(?<y>-?\\b\\d+\\.?\\d*\\b))?"));return{regexp:t,cursor:"move",onDrag:function(t,r,i){var o,a,l=n.exec(t),c=Number(null===l||void 0===l||null===(o=l.groups)||void 0===o?void 0:o.x),u=Number(null===l||void 0===l||null===(a=l.groups)||void 0===a?void 0:a.y);isNaN(c)||(isNaN(u)&&(u=c),r("".concat(e,"(").concat(c+i.movementX,", ").concat(u+i.movementY)))}}}var u=c("vec2");c("ellipse"),c("circle"),c("point"),c("rect"),c("square"),c("vertex");function s(e){var t=new RegExp("".concat(e,"\\(.*\\)"),"g"),n=new RegExp("".concat(e,"\\((?<r>\\d+)\\s*,\\s*(?<g>\\d+)\\s*,\\s*(?<b>\\d+)\\)"));return{regexp:t,cursor:"pointer",onClick:function(t,o){var a,l,c,u=n.exec(t),s=Number(null===u||void 0===u||null===(a=u.groups)||void 0===a?void 0:a.r),d=Number(null===u||void 0===u||null===(l=u.groups)||void 0===l?void 0:l.g),f=Number(null===u||void 0===u||null===(c=u.groups)||void 0===c?void 0:c.b),p=document.createElement("input");p.type="color",isNaN(s+d+f)||(p.value=(0,i.C)(s,d,f)),p.addEventListener("input",(function(t){var n=t.target;if(n.value){var a=(0,r.Z)((0,i.w)(n.value),3),l=a[0],c=a[1],u=a[2];o("".concat(e,"(").concat(l,", ").concat(c,", ").concat(u,")"))}})),p.click()}}}var d=s("rgb"),f=s("background"),p=s("fill"),h=s("stroke"),v={regexp:/https?:\/\/[^\s)"']+/g,cursor:"pointer",onClick:function(e){(0,o.Z)(e)&&window.open(e,"_blank")}}},49129:function(e,t,n){n.d(t,{Iq:function(){return s},Lh:function(){return u}});var r=n(2272),i=n(74985),o=n(50959),a=n(50968),l=n(73872),c=n(18171);n(21449);function u(){var e=o.useRef((0,a.u)(new Map)).current,t=o.useCallback((function(t){var n=new Map(e.current);t(n),e.current=n}),[e]),n=o.useCallback((function(){e.current=new Map}),[e]);return(0,c.Z)((function(){return{observable:e,update:t,unmount:n}}),[t,e,n])}var s=function(e){var t=e.source,n=(0,l.Z)(t);return(0,i.tZ)(i.HY,{children:Array.from(n,(function(e){var t=(0,r.Z)(e,2),n=t[0],a=t[1];return(0,i.tZ)(o.Fragment,{children:a},n)}))})}},21449:function(e,t,n){n.d(t,{w:function(){return X},h:function(){return U}});var r,i=n(57135),o=n(72006),a=n(4405),l=n(2272),c=n(9970),u=n(96583),s=n(74985),d=n(14806),f=n(69994),p=n(85577),h=n(4653),v=n(57389),m=n(77637),g=n(40871),y=n(93970),Z=n(99964),b=n(61284),w=n(39541),x=n(85368),k=n(64491),C=n(45285),S=n(27522),T=n(80336),E=n(32104),R=n(50959),G=n(10422);function I(e){var t=e.dom,n=(0,m.Z)(e,["dom"]);return G.createPortal((0,s.tZ)(D,(0,o.Z)({},n)),t)}function _(e){var t=e.matchesMap,n=e.fileToContents,i=e.type,o=e.onClose,a=e.jumpToPosition,c=Object.keys(t);if(0===c.length){var u=i===r.REFERENCES?"No references found":"No definitions found";return(0,s.tZ)(b.xv,{color:"dimmer",css:[w.l0.pl(8),w.l0.py(8)],multiline:!1,children:u})}return(0,s.tZ)(x.G,{children:c.map((function(e){var r=t[e],i=n[e],u=(0,g.Z)(r,i);return(0,s.tZ)(x.G,{css:[w.l0.p(4)],children:(0,s.tZ)(y.V,{path:e,extensions:[u],doc:i,numMatches:r.length,initiallyExpanded:1===c.length,onNavigateToCode:function(t){if(null!==t)a({path:e,line:t.line+1,col:t.character});else{var n=(0,l.Z)(r,1)[0],c=i.lineAt(n.from),u=n.from-c.from;a({path:e,line:c.number,col:u})}o()}})},e)}))})}function D(e){var t=e.files,n=e.onClose,a=e.references,f=e.definitions,p=e.currentFile,h=e.currentFileContents,m=e.jumpToPosition,g=function(e,t){if(!G)throw new Error("Expected LSP Client");var n=G.documentUriToPath(e.uri),r=e.range,i=r.start,o=r.end;n in t||(t[n]=[]);var a=B[n],l=a.line(i.line+1),c=a.line(o.line+1);t[n].push({from:l.from+i.character,to:c.from+o.character})},y=(0,C.Z)().fs,G=(0,k.Z)(p),I=(0,Z.Z)(n,[]),D=(0,l.Z)(R.useState((0,v.Z)({},p,d.xv.of(h.split("\n")))),2),B=D[0],P=D[1];R.useEffect((function(){if(t.length){var e=!1;return function(){n.apply(this,arguments)}(),function(){e=!0}}function n(){return n=(0,i.Z)((function(){var n;return(0,u.__generator)(this,(function(r){switch(r.label){case 0:return n={},[4,Promise.all(t.map(function(){var e=(0,i.Z)((function(e){var t;return(0,u.__generator)(this,(function(r){switch(r.label){case 0:return[4,y.readFile(e)];case 1:if((t=r.sent()).error)throw new Error("Something went wrong reading file with path ".concat(e,". Received error: ").concat(t.error));return n[e]=d.xv.of(t.content.toString().split("\n")),[2]}}))}));return function(t){return e.apply(this,arguments)}}()))];case 1:return r.sent(),e?[2]:(P((function(e){return(0,o.Z)({},e,n)})),[2])}}))})),n.apply(this,arguments)}}),[y,t]);var A=(0,c.Z)(a).concat((0,c.Z)(f));if(!G||A.some((function(e){return!(G.documentUriToPath(e.uri)in B)})))return(0,s.tZ)(x.G,{style:{width:w.TV.space128,height:w.TV.space128,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,s.tZ)(E.Z,{size:32})});var L={},U={};return a.forEach((function(e){g(e,L)})),f.forEach((function(e){g(e,U)})),(0,s.BX)(x.G,{innerRef:I,css:[w.l0.minWidth("375px"),w.l0.maxWidth("500px"),w.l0.pt(4),w.l0.maxHeight("100%"),{overflowY:"scroll"}],children:[(0,s.tZ)(x.G,{css:{borderBottom:"1px solid var(--background-highest)"},children:(0,s.BX)(x.G,{css:[w.l0.p(4)],children:[(0,s.BX)(x.G,{css:[w.l0.flex.row,w.l0.justify.spaceBetween,w.l0.align.center,w.l0.pr(4)],children:[(0,s.tZ)(b.h4,{level:2,variant:"subheadDefault",css:[w.l0.p(4),w.l0.pl(8)],children:"Definitions"}),(0,s.tZ)(S.Z,{filled:!1,border:!1,onClick:n,children:(0,s.tZ)(T.Z,{})})]}),(0,s.tZ)(_,{matchesMap:U,fileToContents:B,type:r.DEFINITION,onClose:n,currentFile:p,jumpToPosition:m})]})}),(0,s.tZ)(x.G,{children:(0,s.BX)(x.G,{css:[w.l0.p(4)],children:[(0,s.tZ)(b.h4,{level:2,variant:"subheadDefault",css:[w.l0.p(4),w.l0.pl(8)],children:"References"}),(0,s.tZ)(_,{matchesMap:L,fileToContents:B,type:r.REFERENCES,onClose:n,currentFile:p,jumpToPosition:m})]})})]})}!function(e){e.DEFINITION="DEFINITION",e.REFERENCES="REFERENCES"}(r||(r={}));var B=n(9951),P=n(22917),A=n(87042),L=n(99935),U=d.Py.define();function X(e){var t=e.setDecoration,n=e.lspClient,r=e.path,v=e.openFile,m=d.Py.define(),g=d.Py.define(),y=f.tk.updateListener.of(function(){var e=(0,i.Z)((function(e){var t,i,o,a,s,d,f,v,y,Z,b,w,x,k,C,S,T,E,R,G,I,_,D,P,X,M,N,O,F,W,H,V;return(0,u.__generator)(this,(function(u){switch(u.label){case 0:t=null,i=!0,o=!1,a=void 0;try{for(s=e.transactions[Symbol.iterator]();!(i=(d=s.next()).done);i=!0){f=d.value,v=!0,y=!1,Z=void 0;try{for(b=f.effects[Symbol.iterator]();!(v=(w=b.next()).done);v=!0)(x=w.value).is(U)&&(t=x.value)}catch(z){y=!0,Z=z}finally{try{v||null==b.return||b.return()}finally{if(y)throw Z}}}}catch(z){o=!0,a=z}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}return t?(k=(0,h.Z)(n),C=e.state.doc,S=(0,p.s)(C,t),T=Promise.all([k.isFindReferencesSupported?n.request.findReferences(r,S,{includeDeclaration:!1}):{result:null},k.isFindDefinitionSupported?n.request.findDefinitions(r,S):{result:null}]),(0,A.SC)(e.view,T),[4,T]):[2];case 1:if(E=l.Z.apply(void 0,[u.sent(),2]),R=E[0],G=E[1],"error"in R)throw new Error("Something went wrong fetching references: ".concat(R.error.message));if("error"in G)throw new Error("Something went wrong fetching definition: ".concat(G.error.message));return I=R.result,_=G.result,D=(0,L.g)(_),P=I&&I.length>0,X=D&&D.length>0,P||X?(M=[],N=[],I&&I.length>0&&(O=M).push.apply(O,(0,c.Z)(I)),D&&D.length>0&&(F=N).push.apply(F,(0,c.Z)(D)),W=(0,c.Z)(M).concat((0,c.Z)(N)).map((function(e){return n.documentUriToPath(e.uri)})).filter((function(e){return e!==r})),H=(0,c.Z)(new Set(W)),V=C.toJSON().join("\n"),e.view.dispatch({effects:m.of({references:M,definitions:N,currentFile:r,currentFileContents:V,files:H})}),[2]):((0,B.J)(e.view,{message:"No references found",offset:t}),e.view.dispatch({effects:g.of(null)}),[2])}}))}));return function(t){return e.apply(this,arguments)}}());return[y,d.QQ.define({create:function(){return null},update:function(e,t){var n=e,r=!0,i=!1,o=void 0;try{for(var a,l=t.effects[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value;c.is(m)&&(n=c.value),c.is(g)&&(n=null)}}catch(u){i=!0,o=u}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return n},provide:function(e){return f.hJ.compute([e],(function(n){var i=n.field(e);if(!i)return t(null),null;var l=n.selection.asSingle().main;return{pos:l.from,end:l.to,create:function(e){var n=document.createElement("div");return n.classList.add("cm-lsp-tooltip"),n.classList.add("replit-tooltip"),n.style.padding="0",t((0,s.tZ)(I,(0,a.Z)((0,o.Z)({},i),{onClose:function(){e.dispatch({effects:g.of(null)})},dom:n,jumpToPosition:function(t){if(t.path===r){var n=t.line,i=t.col;(0,P.S)({view:e,line:n,col:i})}else v(t)}}))),{dom:n}}}}))}})]}},93970:function(e,t,n){n.d(t,{F:function(){return R},V:function(){return G}});var r=n(2272),i=n(74985),o=n(48306),a=n.n(o),l=n(50959),c=n(24025),u=n(97754),s=n.n(u),d=n(69994),f=n(83005),p=n(85368),h=n(39541),v=n(87076),m=n(36443),g=n(61284),y=n(2757),Z=n(45853),b=n(85577),w=n(34227),x=n(43312),k=n(64804);function C(e){var t=e.height,n=e.loading;return(0,i.BX)("div",{className:a().dynamic([["5a8d0f5b84417a3b",[t]]])+" "+(s()("loader",{loading:n})||""),children:[(0,i.BX)(c.Z,{viewBox:"0 0 100 36",backgroundColor:h.TV.backgroundHighest,foregroundColor:h.TV.backgroundHigher,children:[(0,i.tZ)("rect",{x:"0",y:"0",rx:"3",ry:"3",width:"4",height:"4",className:a().dynamic([["5a8d0f5b84417a3b",[t]]])}),(0,i.tZ)("rect",{x:"6",y:"0",rx:"2",ry:"2",width:"92",height:"4",className:a().dynamic([["5a8d0f5b84417a3b",[t]]])})]}),(0,i.tZ)(a(),{id:"5a8d0f5b84417a3b",dynamic:[t],children:".loader.__jsx-style-dynamic-selector{padding:var(--space-8);display:none}.loader.loading.__jsx-style-dynamic-selector{height:".concat(t,";display:block}")})]})}var S=(0,x.iv)({scrollbarWidth:"thin",outline:"none",overflow:"auto",".cm-content":{paddingBottom:0},"::-webkit-scrollbar":{width:4},".cm-gutters":{minWidth:"unset"}}),T=(0,x.iv)({overflow:"hidden",".cm-scroller":{overflow:"hidden"}}),E={root:h.l0.backgroundColor.backgroundRoot,higher:h.l0.backgroundColor.backgroundHigher,highest:h.l0.backgroundColor.backgroundHighest,default:h.l0.backgroundColor.backgroundDefault};function R(e){var t=e.maxHeight,n=e.minHeight,o=e.extensions,a=void 0===o?[]:o,c=e.allowScroll,u=void 0===c||c,s=e.fontSize,f=e.hideGutter,p=e.path,h=e.snippet,v=e.style,m=e.elevation,g=e.onNavigateToCode,y=(0,r.Z)(l.useState(!1),2),R=y[0],G=y[1],I=(0,k.Z)(),_=I.ref,D=I.view,B=l.useMemo((function(){return function(e){return(0,x.iv)({".cm-editor":e,".cm-gutters":e})}(E[null!==m&&void 0!==m?m:"default"])}),[m]),P=(0,Z.Z)({view:D});return l.useEffect((function(){if(D&&h&&p){var e="lines"in h?h.lines.join("\n"):h.doc;return D.dispatch({changes:{from:0,to:D.state.doc.length,insert:e},effects:P.reconfigure([(0,d.Eu)({formatNumber:function(e,t){for(var n=String(t.doc.lines).length,r=String(e+h.startLineNumber-1);n>r.length;)r="\xa0"+r;return r}}),a])}),G(!0),function(){D.dispatch({effects:P.reconfigure([])})}}}),[D,h,p,P,a,m]),(0,i.BX)("div",{style:v,children:[(0,i.tZ)(w.Z,{ref:_,css:[S,B,u?null:T],style:{minHeight:n,maxHeight:null!==t&&void 0!==t?t:"10em"},hideGutter:f,filePath:p,fontSize:s,readOnly:!0,onClick:function(e){if(g&&D){var t=e.clientX,n=e.clientY,r=D.posAtCoords({x:t,y:n}),i=null!==r?(0,b.s)(D.state.doc,r):null;g(i)}}}),(0,i.tZ)(C,{loading:!R,height:t})]})}function G(e){var t=e.path,n=e.doc,o=e.extensions,a=void 0===o?[]:o,c=e.numMatches,u=e.onNavigateToCode,s=e.initiallyExpanded,d=(0,r.Z)(l.useState(s),2),Z=d[0],b=d[1],w=Z?"block":"none",x=Z?180:0,k=Z?"Collapse snippet":"Expand snippet";return(0,i.BX)(p.G,{children:[(0,i.BX)(p.G,{css:[h.l0.width("100%"),h.l0.p(4),h.l0.rowWithGap(8),{alignItems:"center"}],children:[(0,i.tZ)(f.Z,{path:t}),(0,i.tZ)(g.xv,{multiline:!1,title:t,css:[h.l0.flex.shrink(1),{textOverflow:"ellipsis"}],children:t}),(0,i.tZ)(g.xv,{color:"dimmest",multiline:!1,children:(0,y.Z)("match",c,!0)}),(0,i.tZ)(p.G,{css:h.l0.flex.grow(1)}),(0,i.tZ)(v.h,{alt:k,tooltipHidden:!0,onClick:function(){return b((function(e){return!e}))},children:(0,i.tZ)(m.Z,{rotate:x,style:{transition:"200ms ease"}})})]}),(0,i.tZ)(p.G,{css:[h.l0.p(4),{display:w}],children:(0,i.tZ)(R,{path:t,snippet:{doc:n,startLineNumber:1},extensions:a,maxHeight:"max-content",allowScroll:!0,hideGutter:!0,onNavigateToCode:u})})]})}},40871:function(e,t,n){n.d(t,{Z:function(){return h}});var r=n(66091),i=n(5683),o=n(45347),a=n(69994),l=n(14806),c=n(39541),u=n(2757),s=new(function(e){(0,i.Z)(n,e);var t=(0,o.Z)(n);function n(){var e;return(0,r.Z)(this,n),(e=t.call(this)).elementClass="cm-gutterElement-hidden",e}return n.prototype.toDOM=function(){var e=document.createElement("span");e.classList.add("cm-hidden-lines-gutter");var t=document.createElement("span");return t.classList.add("cm-dot"),e.appendChild(t),e},n}(a.SJ)),d=function(e){(0,i.Z)(n,e);var t=(0,o.Z)(n);function n(e){var i;return(0,r.Z)(this,n),(i=t.call(this)).numLines=e,i}var a=n.prototype;return a.eq=function(e){return e.numLines===this.numLines},a.toDOM=function(){var e=document.createElement("span");return e.textContent="".concat(this.numLines," hidden ").concat((0,u.Z)("line",this.numLines)),e.className="cm-hidden-lines",e},n}(a.l9),f=a.p.mark({class:"cm-searchResultMatch"}),p=a.tk.baseTheme({".cm-hidden-lines":{color:"var(--foreground-dimmer)",backgroundColor:"var(--background-highest)",display:"inline-block",width:"100%"},".cm-gutterElement-hidden":{backgroundColor:"var(--background-highest)"},".cm-hidden-lines-gutter":{backgroundColor:"var(--background-highest)",display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%"},".cm-dot":{height:"5px",width:"5px",backgroundColor:"var(--foreground-dimmest)",borderRadius:"50%",display:"inline-block"},".cm-tooltip .cm-scroller":{border:"2px solid var(--background-highest)",borderRadius:"var(--border-radius-4)"},".cm-tooltip .cm-scroller:hover":{border:"2px solid var(--accent-primary-dimmest)",boxShadow:"var(--shadow-1)",cursor:"pointer"},".cm-searchResultMatch":{color:c.TV.foregroundDefault,backgroundColor:c.TV.accentPrimaryDimmest,outline:c.TV.accentPrimaryDimmer+" solid 1px"},".cm-searchResultMatch span":{color:c.TV.foregroundDefault},".cm-tooltip .cm-searchResultMatch:hover":{opacity:.8},".cm-tooltip .cm-gutterElement":{display:"flex",marginTop:0,textAlign:"center",alignItems:"center",justifyContent:"center",lineHeight:"21px"},".cm-tooltip .cm-line":{padding:0},".cm-tooltip .cm-gutters":{padding:0},".cm-tooltip .cm-content":{paddingTop:0},".cm-tooltip .cm-lineWrapping":{whiteSpace:"pre"},".cm-tooltip .cm-cursor":{display:"none"},".cm-tooltip .cm-selectionBackground":{display:"none"}});function h(e,t){var n=e.sort((function(e,t){return e.from-t.from})),r=n.map((function(e){var t=e.from,n=e.to;return f.range(t,n)})),i=a.lg.define((function(){return{}}),{decorations:function(){return a.p.set(r)}}),o=function(e,t){var n=[],r=1;e.forEach((function(i,o){var a=t.lineAt(i.from),l=t.lineAt(i.to);r<a.number-2&&n.push({startLine:r,endLine:a.number-2}),r=l.number+2,o===e.length-1&&r<t.lines&&n.push({startLine:r,endLine:t.lines})}));var i=n.map((function(e){var n=t.line(e.startLine),r=t.line(e.endLine);return a.p.replace({widget:new d(e.endLine-e.startLine+1)}).range(n.from,r.to)})),o=n.map((function(e){var n=t.line(e.startLine);return a.p.line({class:"cm-line-hidden"}).range(n.from)})),c=l.QQ.define({create:function(){return a.p.set(i)},update:function(e){return e},provide:function(e){return a.tk.decorations.from(e)}}),u=l.QQ.define({create:function(){return a.p.set(o)},update:function(e){return e},provide:function(e){return a.tk.decorations.from(e)}}),f=n.map((function(e){var n=t.line(e.startLine);return s.range(n.from)})),h=a.p2.of(l.Xs.of(f));return[c,u,p,h]}(n,t);return[i,o]}},93766:function(e,t,n){n.d(t,{Ny:function(){return f},_S:function(){return d},oZ:function(){return s}});var r=n(72006),i=n(4405),o=n(2272),a=n(50959),l=n(14806),c=n(74376),u=n(95844);function s(e){var t=Array.from(e.fileMap.entries()).map((function(e){var t,n=(0,o.Z)(e,2),a=n[0],l=n[1];return[a,(t=l,(0,i.Z)((0,r.Z)({},t),{editorState:t.editorState.toJSON({history:c.cE})}))]}));return JSON.stringify({fileMap:t})}function d(e){var t=JSON.parse(e).fileMap,n=new u.L(20);return t.forEach((function(e){var t,a=(0,o.Z)(e,2),u=a[0],s=a[1];n.set(u,(t=s,(0,i.Z)((0,r.Z)({},t),{editorState:l.yy.fromJSON(t.editorState,void 0,{history:c.cE})})))})),{fileMap:n}}function f(){return{fileMap:new u.L(20)}}var p=a.createContext(null);t.ZP=p},67530:function(e,t,n){n.d(t,{nE:function(){return K},OQ:function(){return q},qi:function(){return F},UQ:function(){return W},YM:function(){return z},PQ:function(){return Y},ZS:function(){return $},eR:function(){return V},zj:function(){return J},cR:function(){return j}});var r=n(66091),i=n(57389),o=n(5683),a=n(72006),l=n(4405),c=n(45347),u=n(74985),s=n(50959),d=n(44478),f=n(14806),p=n(45634),h=n(39541),v=n(69994),m=n(87076),g=n(67036),y=n(58784),Z=n(71888),b=function(e){var t=e.isOpen,n=e.threadId,r=(0,s.useState)(!1),i=r[0],o=r[1],a=(0,y.GD)({variables:{id:n}});(0,s.useEffect)((function(){var e;if(a&&!a.error){var t=null===(e=a.data)||void 0===e?void 0:e.thread;t&&o("AnnotationAnchor"===(null===t||void 0===t?void 0:t.__typename)&&(null===t||void 0===t?void 0:t.messages.some((function(e){return!e.seen}))))}}),[a]);var l={alt:{default:"View threads",close:"Dismiss thread"}};return(0,u.tZ)(m.h,{alt:t?l.alt.close:l.alt.default,size:24,className:"thread-indicator",css:[h.l0.width(20),h.l0.height(20),h.l0.transition.snappy,h.l0.cursor.pointer,h.l0.display.flex,h.l0.borderRadius(8),h.l0.position.relative,h.l0.overflow("visible"),t?h.l0.color.accentPrimaryStrongest:h.l0.color.foregroundDimmest,{borderWidth:h.TV.borderWidthDefault,borderStyle:"solid",borderColor:t?h.TV.accentPrimaryDefault:"transparent",backgroundColor:t?h.TV.accentPrimaryDimmer:h.TV.backgroundHigher,outline:0},{":hover":{borderColor:t?h.TV.accentPrimaryStronger:h.TV.outlineDimmer,color:t?h.TV.accentPrimaryStrongest:h.TV.foregroundDimmer,background:t?h.TV.accentPrimaryDefault+" !important":h.TV.backgroundHighest},svg:{width:12,height:12}}],children:(0,u.BX)(u.HY,{children:[i?(0,u.tZ)("div",{css:[h.l0.width(8),h.l0.height(8),h.l0.backgroundColor.redStronger,h.l0.position.absolute,h.l0.top(-1),h.l0.left(-1),h.l0.borderRadius("full")]}):null,(0,u.tZ)(g.Z,{})]})})},w=function(e){return e.apolloClient?(0,u.tZ)(Z.e,{client:e.apolloClient,children:(0,u.tZ)(b,(0,a.Z)({},e))}):null},x=n(91513),k=function(e){(0,o.Z)(n,e);var t=(0,c.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}var i=n.prototype;return i.compare=function(e){return this==e||this.constructor==e.constructor&&this.eq(e)},i.eq=function(e){return!1},i.destroy=function(e){},n}(f.uU);k.prototype.elementClass="",k.prototype.toDOM=void 0,k.prototype.mapMode=f.gc.TrackBefore,k.prototype.startSide=k.prototype.endSide=-1,k.prototype.point=!0;var C=f.r$.define(),S={class:"",renderEmptyElements:!1,elementStyle:"",markers:function(){return f.Xs.empty},lineMarker:function(){return null},lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},T=f.r$.define();var E=f.r$.define({combine:function(e){return e.some((function(e){return e}))}});function R(e){var t=[G];return e&&!1===e.fixed&&t.push(E.of(!0)),t}var G=v.lg.fromClass(function(){function e(t){(0,r.Z)(this,e),this.view=t,this.prevViewport=t.viewport,this.dom=document.createElement("div"),this.dom.className="cm-right-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.width="0px",this.dom.style.minHeight=this.view.contentHeight+"px",this.gutters=t.state.facet(T).map((function(e){return new B(t,e)}));var n=!0,i=!1,o=void 0;try{for(var a,l=this.gutters[Symbol.iterator]();!(n=(a=l.next()).done);n=!0){var c=a.value;this.dom.appendChild(c.dom)}}catch(u){i=!0,o=u}finally{try{n||null==l.return||l.return()}finally{if(i)throw o}}this.fixed=!t.state.facet(E),this.fixed&&(this.dom.style.position="sticky",this.dom.style.right="0"),this.syncGutters(!1),t.scrollDOM.insertBefore(this.dom,t.contentDOM.nextSibling)}var t=e.prototype;return t.update=function(e){if(this.updateGutters(e)){var t=this.prevViewport,n=e.view.viewport,r=Math.min(t.to,n.to)-Math.max(t.from,n.from);this.syncGutters(r<.8*(n.to-n.from))}e.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight+"px"),this.view.state.facet(E)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=e.view.viewport},t.syncGutters=function(e){var t=this,n=this.dom.nextSibling;e&&this.dom.remove();var r=f.Xs.iter(this.view.state.facet(C),this.view.viewport.from),i=[],o=this.gutters.map((function(e){return new D(e,t.view.viewport,-t.view.documentPadding.top)})),a=!0,l=!1,c=void 0;try{for(var u,s=this.view.viewportLineBlocks[Symbol.iterator]();!(a=(u=s.next()).done);a=!0){var d=u.value,p=void 0;if(Array.isArray(d.type)){var h=!0,m=!1,g=void 0;try{for(var y,Z=d.type[Symbol.iterator]();!(h=(y=Z.next()).done);h=!0){var b=y.value;if(b.type==v.kH.Text){p=b;break}}}catch(P){m=!0,g=P}finally{try{h||null==Z.return||Z.return()}finally{if(m)throw g}}}else p=d.type==v.kH.Text?d:void 0;if(p){i.length&&(i=[]),_(r,i,d.from);var w=!0,x=!1,k=void 0;try{for(var S,T=o[Symbol.iterator]();!(w=(S=T.next()).done);w=!0){S.value.line(this.view,p,i)}}catch(P){x=!0,k=P}finally{try{w||null==T.return||T.return()}finally{if(x)throw k}}}}}catch(P){l=!0,c=P}finally{try{a||null==s.return||s.return()}finally{if(l)throw c}}var E=!0,R=!1,G=void 0;try{for(var I,B=o[Symbol.iterator]();!(E=(I=B.next()).done);E=!0){I.value.finish()}}catch(P){R=!0,G=P}finally{try{E||null==B.return||B.return()}finally{if(R)throw G}}e&&this.view.scrollDOM.insertBefore(this.dom,n)},t.updateGutters=function(e){var t=e.startState.facet(T),n=e.state.facet(T),r=e.docChanged||e.heightChanged||e.viewportChanged||!f.Xs.eq(e.startState.facet(C),e.state.facet(C),e.view.viewport.from,e.view.viewport.to);if(t==n){var i=!0,o=!1,a=void 0;try{for(var l,c=this.gutters[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){l.value.update(e)&&(r=!0)}}catch(D){o=!0,a=D}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}}else{r=!0;var u=[],s=!0,d=!1,p=void 0;try{for(var h,v=n[Symbol.iterator]();!(s=(h=v.next()).done);s=!0){var m=h.value,g=t.indexOf(m);g<0?u.push(new B(this.view,m)):(this.gutters[g].update(e),u.push(this.gutters[g]))}}catch(D){d=!0,p=D}finally{try{s||null==v.return||v.return()}finally{if(d)throw p}}var y=!0,Z=!1,b=void 0;try{for(var w,x=this.gutters[Symbol.iterator]();!(y=(w=x.next()).done);y=!0){var k=w.value;k.dom.remove(),u.indexOf(k)<0&&k.destroy()}}catch(D){Z=!0,b=D}finally{try{y||null==x.return||x.return()}finally{if(Z)throw b}}var S=!0,E=!1,R=void 0;try{for(var G,I=u[Symbol.iterator]();!(S=(G=I.next()).done);S=!0){var _=G.value;this.dom.appendChild(_.dom)}}catch(D){E=!0,R=D}finally{try{S||null==I.return||I.return()}finally{if(E)throw R}}this.gutters=u}return r},t.destroy=function(){var e=!0,t=!1,n=void 0;try{for(var r,i=this.gutters[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){r.value.destroy()}}catch(o){t=!0,n=o}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}this.dom.remove()},e}(),{provide:function(e){return v.tk.scrollMargins.of((function(t){var n=t.plugin(e);return n&&0!=n.gutters.length&&n.fixed?t.textDirection==v.Nm.LTR?{left:n.dom.offsetWidth}:{right:n.dom.offsetWidth}:null}))}});function I(e){return Array.isArray(e)?e:[e]}function _(e,t,n){for(;e.value&&e.from<=n;)e.from==n&&t.push(e.value),e.next()}var D=function(){function e(t,n,i){(0,r.Z)(this,e),this.gutter=t,this.height=i,this.localMarkers=[],this.i=0,this.cursor=f.Xs.iter(t.markers,n.from)}var t=e.prototype;return t.line=function(e,t,n){this.localMarkers.length&&(this.localMarkers=[]),_(this.cursor,this.localMarkers,t.from);var r=n.length?this.localMarkers.concat(n):this.localMarkers,i=this.gutter.config.lineMarker(e,t,r);i&&r.unshift(i);var o=this.gutter;if(0!=r.length||o.config.renderEmptyElements){var a=t.top-this.height;if(this.i==o.elements.length){var l=new P(e,t.height,a,r);o.elements.push(l),o.dom.appendChild(l.dom)}else o.elements[this.i].update(e,t.height,a,r);this.height=t.bottom,this.i++}},t.finish=function(){for(var e=this.gutter;e.elements.length>this.i;){var t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}},e}(),B=function(){function e(t,n){var i=this,o=function(e){i.dom.addEventListener(e,(function(r){var i=t.lineBlockAtHeight(r.clientY-t.documentTop);n.domEventHandlers[e](t,i,r)&&r.preventDefault()}))};for(var a in(0,r.Z)(this,e),this.view=t,this.config=n,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:""),n.domEventHandlers)o(a);this.markers=I(n.markers(t)),n.initialSpacer&&(this.spacer=new P(t,0,0,[n.initialSpacer(t)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}var t=e.prototype;return t.update=function(e){var t=this.markers;if(this.markers=I(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){var n=this.config.updateSpacer(this.spacer.markers[0],e);n!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[n])}var r=e.view.viewport;return!f.Xs.eq(this.markers,t,r.from,r.to)||!!this.config.lineMarkerChange&&this.config.lineMarkerChange(e)},t.destroy=function(){var e=!0,t=!1,n=void 0;try{for(var r,i=this.elements[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){r.value.destroy()}}catch(o){t=!0,n=o}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}},e}(),P=function(){function e(t,n,i,o){(0,r.Z)(this,e),this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(t,n,i,o)}var t=e.prototype;return t.update=function(e,t,n,r){this.height!=t&&(this.dom.style.height=(this.height=t)+"px"),this.above!=n&&(this.dom.style.marginTop=(this.above=n)?n+"px":""),function(e,t){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].compare(t[n]))return!1;return!0}(this.markers,r)||this.setMarkers(e,r)},t.setMarkers=function(e,t){for(var n="cm-gutterElement",r=this.dom.firstChild,i=0,o=0;;){var a=o,l=i<t.length?t[i++]:null,c=!1;if(l){var u=l.elementClass;u&&(n+=" "+u);for(var s=o;s<this.markers.length;s++)if(this.markers[s].compare(l)){a=s,c=!0;break}}else a=this.markers.length;for(;o<a;){var d=this.markers[o++];if(d.toDOM){d.destroy(r);var f=r.nextSibling;r.remove(),r=f}}if(!l)break;l.toDOM&&(c?r=r.nextSibling:this.dom.insertBefore(l.toDOM(e),r)),c&&o++}this.dom.className=n,this.markers=t},t.destroy=function(){this.setMarkers(null,[])},e}();var A=f.r$.define(),L=f.r$.define({combine:function(e){return(0,f.BO)(e,{formatNumber:String,domEventHandlers:{}},{domEventHandlers:function(e,t){var n=function(e){var n=r[e],i=t[e];r[e]=n?function(e,t,r){return n(e,t,r)||i(e,t,r)}:i},r=Object.assign({},e);for(var i in t)n(i);return r}})}}),U=function(e){(0,o.Z)(n,e);var t=(0,c.Z)(n);function n(e){var i;return(0,r.Z)(this,n),(i=t.call(this)).number=e,i}var i=n.prototype;return i.eq=function(e){return this.number==e.number},i.toDOM=function(){return document.createTextNode(this.number)},n}(k);function X(e,t){return e.state.facet(L).formatNumber(t,e.state)}T.compute([L],(function(e){return{class:"cm-lineNumbers",renderEmptyElements:!1,markers:function(e){return e.state.facet(A)},lineMarker:function(e,t,n){return n.some((function(e){return e.toDOM}))?null:new U(X(e,e.state.doc.lineAt(t.from).number))},lineMarkerChange:function(e){return e.startState.facet(L)!=e.state.facet(L)},initialSpacer:function(e){return new U(X(e,M(e.state.doc.lines)))},updateSpacer:function(e,t){var n=X(t.view,M(t.view.state.doc.lines));return n==e.number?e:new U(n)},domEventHandlers:e.facet(L).domEventHandlers}}));function M(e){for(var t=9;t<e;)t=10*t+9;return t}var N=new(function(e){(0,o.Z)(n,e);var t=(0,c.Z)(n);function n(){var e;return(0,r.Z)(this,n),(e=t.apply(this,arguments)).elementClass="cm-activeLineGutter",e}return n}(k));C.compute(["selection"],(function(e){var t=[],n=-1,r=!0,i=!1,o=void 0;try{for(var a,l=e.selection.ranges[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value;if(c.empty){var u=e.doc.lineAt(c.head).from;u>n&&(n=u,t.push(N.range(u)))}}}catch(s){i=!0,o=s}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return f.Xs.of(t)}));var O=n(43e3),F=f.Py.define(),W=f.Py.define(),H=f.Py.define(),V=f.Py.define(),z=f.Py.define(),j=v.tk.baseTheme({".replit-thread-highlight":{background:h.TV.accentPrimaryDimmest,transition:"".concat(h.TV.transitionDurationSnappy," all\n            ").concat(h.TV.transitionTimingFunctionSnappy)},".replit-thread-highlight .replit-thread-highlight":{background:"transparent"},".cm-thread-indicator-gutter":{transform:"translate(calc(-100% - var(--space-8)));",width:"20px",overflow:"visible"}}),q=f.QQ.define({create:function(){return{}},update:function(e,t){var n=e;return(0,p.j)(t,F,(function(e){n=e.value})),t.changes.empty?n:n=Object.values(n).map((function(e){var n=e.indexStart>t.state.doc.length?t.state.doc.length:t.changes.mapPos(e.indexStart),r=e.indexEnd>t.state.doc.length?t.state.doc.length:t.changes.mapPos(e.indexEnd);return(0,l.Z)((0,a.Z)({},e),{indexStart:n,indexEnd:r})})).reduce((function(e,t){return e[t.id]=t,e}),{})}}),$=f.QQ.define({create:function(){return null},update:function(e,t){var n=e;return(0,p.j)(t,W,(function(e){var r=t.state,i=r.selection.main,o=i.from,a=i.to;if(o===a){var l=r.doc.lineAt(o);o=Math.max(l.from-1,0),a=l.to}n={id:e.value,indexStart:o,indexEnd:a}})),(0,p.j)(t,H,(function(){n=null})),(0,p.j)(t,z,(function(){n=null})),null!==n&&(0,p.j)(t,F,(function(e){if(!n)throw new Error("expected newPlaceholder");e.value[n.id]&&(n=null)})),!t.changes.empty&&n&&(n=(0,l.Z)((0,a.Z)({},n),{indexStart:t.changes.mapPos(n.indexStart),indexEnd:t.changes.mapPos(n.indexEnd)})),n}}),Y=f.QQ.define({create:function(){return null},update:function(e,t){var n=e;return(0,p.j)(t,z,(function(e){n=e.value})),(0,p.j)(t,W,(function(e){n=e.value})),n}}),K=function(e){(0,o.Z)(n,e);var t=(0,c.Z)(n);function n(e,i){var o;return(0,r.Z)(this,n),(o=t.call(this)).id=e,o.setThreadElements=i,o}var u=n.prototype;return u.eq=function(e){return e.id===this.id},u.toDOM=function(e){var t=this,n=document.createElement("div");n.className="cm-thread-portal-widget";var r=e.dom.querySelector(".cm-scroller"),o=e.dom.querySelector(".cm-gutters");return r&&o&&(0,x.L)(n,r,o),setTimeout((function(){t.setThreadElements((function(e){return(0,l.Z)((0,a.Z)({},e),(0,i.Z)({},t.id,n))}))})),n},u.destroy=function(e){var t=this;e.remove(),setTimeout((function(){t.setThreadElements((function(e){var n=(0,a.Z)({},e);return delete n[t.id],n}))}))},u.ignoreEvent=function(){return!0},n}(v.l9),Q=function(e){(0,o.Z)(n,e);var t=(0,c.Z)(n);function n(e,i,o){var a;return(0,r.Z)(this,n),(a=t.call(this)).id=e,a.active=i,a.apolloClient=o,a}var i=n.prototype;return i.toDOM=function(e){var t=this,n=document.createElement("span");return n.setAttribute("aria-hidden","true"),n.className="cm-thread-indicator-widget",(0,d.createRoot)(n).render((0,u.tZ)(O.C,{children:(0,u.tZ)(w,{isOpen:this.active,threadId:this.id,apolloClient:this.apolloClient})})),n.style.cursor="pointer",n.onclick=function(n){n.stopPropagation(),n.preventDefault(),e.dispatch({effects:[z.of(e.state.field(Y)===t.id?null:t.id)]})},n},i.eq=function(e){return e.id===this.id&&e.active===this.active},n}(k),J=function(e){return t={class:"cm-thread-indicator-gutter",markers:function(t){var n=t.state.field(q),r=t.state.field(Y);return f.Xs.of(Object.values(n).filter((function(e){return e.indexEnd!==e.indexStart})).map((function(n){var i=t.state.doc.lineAt(Math.min(n.indexStart,n.indexEnd)).from;return new Q(n.id,n.id===r,e).range(i)})),!0)},initialSpacer:function(){return new Q("initial-spacer",!1)}},[R(),T.of((0,a.Z)({},S,t))];var t}},91513:function(e,t,n){function r(e,t,n){var r=t.clientWidth,i=n.clientWidth;e.style.maxWidth="".concat(r,"px"),e.style.position="sticky",e.style.zIndex="201",e.style.marginLeft="-".concat(i,"px")}n.d(t,{L:function(){return r}})},58784:function(e,t,n){n.d(t,{AL:function(){return w},GD:function(){return v},VO:function(){return h},Y:function(){return Z},tT:function(){return g}});var r=n(72006),i=n(43119),o=n(71440),a=n(91015),l=n(24635),c=n(50216);function u(){var e=(0,i.Z)(["\n  query CodemirrorThread($id: String!) {\n    thread: annotationAnchor(id: $id) {\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n    }\n    currentUser {\n      id\n      username\n      image\n    }\n  }\n  ","\n"]);return u=function(){return e},e}function s(){var e=(0,i.Z)(["\n  mutation CreateThread(\n    $thread: AnnotationAnchorInput!\n    $message: AnnotationMessageInput\n    $highlight: AnnotationHighlightInput\n  ) {\n    createThread: createAnnotationAnchor(\n      annotationAnchor: $thread\n      annotationMessage: $message\n      highlight: $highlight\n    ) {\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return s=function(){return e},e}function d(){var e=(0,i.Z)(["\n  mutation UpdateThread($id: String!, $changes: AnnotationAnchorChangesInput!) {\n    updateThread: updateAnnotationAnchor(id: $id, changes: $changes) {\n      ... on UserError {\n        message\n      }\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n    }\n  }\n  ","\n"]);return d=function(){return e},e}function f(){var e=(0,i.Z)(["\n  mutation CreateThreadMessage(\n    $replId: String!\n    $threadId: String!\n    $threadMessage: AnnotationMessageInput!\n    $highlight: AnnotationHighlightInput\n  ) {\n    createThreadMessage: createAnnotationMessage(\n      replId: $replId\n      anchorId: $threadId\n      annotationMessage: $threadMessage\n      highlight: $highlight\n    ) {\n      ... on UserError {\n        message\n      }\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n    }\n  }\n  ","\n"]);return f=function(){return e},e}var p={},h=(0,o.Ps)(u(),a.j7);function v(e){var t=(0,r.Z)({},p,e);return l.a(h,t)}var m=(0,o.Ps)(s(),a.j7);function g(e){var t=(0,r.Z)({},p,e);return c.D(m,t)}var y=(0,o.Ps)(d(),a.j7);function Z(e){var t=(0,r.Z)({},p,e);return c.D(y,t)}var b=(0,o.Ps)(f(),a.j7);function w(e){var t=(0,r.Z)({},p,e);return c.D(b,t)}},97318:function(e,t,n){n.d(t,{Z:function(){return x}});var r=n(72006),i=n(4405),o=n(2272),a=n(9970),l=n(50959),c=n(13233),u=n(58784),s=n(53828),d=n(91015),f=n(46179),p=n(48330),h=n(29599),v=n(45285),m=n(67530),g=n(18171),y=n(30826),Z=n.n(y);function b(e,t){if(!e)return null;var n,r=e.state.field(m.OQ),i=e.state.field(m.ZS),o=null!==(n=r[t])&&void 0!==n?n:(null===i||void 0===i?void 0:i.id)===t?i:null;return o||null}function w(e,t){if(!e)return null;var n=b(e,t);if(!n)return null;var r=Math.min(n.indexStart,n.indexEnd),i=Math.max(n.indexStart,n.indexEnd),o=e.state.doc.lineAt(r),a=e.state.doc.lineAt(i),l=e.state.doc.sliceString(e.state.doc.line(Math.max(o.number-2,1)).from,r),c=e.state.doc.sliceString(i,e.state.doc.line(Math.min(a.number+2,e.state.doc.lines)).to);return{precode:l,code:e.state.doc.sliceString(r,i),postcode:c}}function x(e,t,n){var y=(0,c.Z)().showError,x=(0,p.Z)(),k=(0,f.Z)().map((function(e){return e.username})),C=(0,v.Z)().fs,S=(0,u.GD)({variables:{id:e}}),T=S.data,E=S.error,R=S.loading,G=S.client,I=function(){var n;return R||!T?!!t&&(null===(n=t.state.field(m.ZS))||void 0===n?void 0:n.id)===e:"AnnotationAnchor"!==T.thread.__typename}(),_=R,D=l.useMemo((function(){return _||!T?null:"UserError"===T.thread.__typename?{id:e,__typename:"AnnotationAnchor",messages:[],isGeneral:!1,isResolved:!1}:"AnnotationAnchor"===T.thread.__typename?T.thread:null}),[T,e,_]),B=(0,o.Z)((0,u.tT)({onError:function(e){return y(e.message)},update:function(e,t){var n,r;t.errors?t.errors.forEach((function(e){return y(e.message)})):"UserError"!==(null===(n=t.data)||void 0===n||null===(r=n.createThread)||void 0===r?void 0:r.__typename)||y(t.data.createThread.message)}}),1),P=B[0],A=(0,o.Z)((0,u.AL)({onError:function(e){return y(e.message)},update:function(e,t){var n;if(t.errors)t.errors.forEach((function(e){return y(e.message)}));else{var r=null===(n=t.data)||void 0===n?void 0:n.createThreadMessage;r&&"UserError"===r.__typename&&y(r.message)}}}),1),L=A[0],U=(0,o.Z)((0,u.Y)({onError:function(e){return y(e.message)},update:function(e,t){var n;if(t.errors)t.errors.forEach((function(e){return y(e.message)}));else{var r=null===(n=t.data)||void 0===n?void 0:n.updateThread;r&&"UserError"===r.__typename&&y(r.message)}}}),1),X=U[0],M=(0,o.Z)((0,d.Hj)(),1)[0],N=(0,g.Z)((function(){return Z()(M,1e3,{trailing:!1})}),[M]),O=function(){var e=null===T||void 0===T?void 0:T.currentUser;return e?{user:{__typename:"User",id:e.id,username:e.username,image:e.image}}:{}};return{thread:D,isPlaceholder:I,error:E,loading:_,getHighlight:w,getLatestAnchor:function(){return b(t,e)},updateThread:function(e){var t,n=e.changes,o="AnnotationAnchor"===(null===T||void 0===T||null===(t=T.thread)||void 0===t?void 0:t.__typename)?T.thread:null;if(!o)throw new Error("expected thread");X({variables:{id:o.id,changes:n},optimisticResponse:{__typename:"RootMutationType",updateThread:(0,i.Z)((0,r.Z)({},o,n),{isResolved:"boolean"===typeof n.isResolved?n.isResolved:o.isResolved})}})},finalizeThreadMessage:function(o){var l,c=o.message,d=o.messageId,f={id:d,text:c,mentions:(0,h.kW)(c,{users:(0,a.Z)(k).concat(["everyone"])}).mentions};if(I&&t&&n){var p=t.state.field(m.ZS),v={id:e,replId:x,indexStart:null===p||void 0===p?void 0:p.indexStart,indexEnd:null===p||void 0===p?void 0:p.indexEnd,otVersion:C.getOTVersion(n),path:n};P({variables:{thread:v,message:f,highlight:w(t,e)},optimisticResponse:{__typename:"RootMutationType",createThread:(0,i.Z)((0,r.Z)({__typename:"AnnotationAnchor"},v,O()),{messages:[(0,i.Z)((0,r.Z)({id:d,timeCreated:(new Date).toISOString(),currentUserIsAuthor:!0},O()),{content:{text:c,__typename:"TextMessageContentType"},anchor:{id:v.id,__typename:"AnnotationAnchor"},__typename:"AnnotationMessage",seen:!0})],isResolved:!1,isGeneral:!1})}}),G.writeQuery({query:u.VO,variables:{id:e},data:{__typename:"RootQueryType",thread:(0,i.Z)((0,r.Z)((0,i.Z)((0,r.Z)({},v),{isResolved:!1,isGeneral:!1}),O()),{messages:[(0,i.Z)((0,r.Z)({id:d,timeCreated:(new Date).toISOString(),currentUserIsAuthor:!0},O()),{content:{text:c,__typename:"TextMessageContentType"},anchor:{id:v.id,__typename:"AnnotationAnchor"},__typename:"AnnotationMessage",seen:!0})],__typename:"AnnotationAnchor"}),currentUser:null===T||void 0===T?void 0:T.currentUser}});var g=G.readQuery({query:s.Jq,variables:{replId:x,path:n}});if(g){var y,Z="ThreadsByFileResult"===(null===(y=g.threadsByFile)||void 0===y?void 0:y.__typename)?g.threadsByFile.threads:[],b=O().user;G.writeQuery({query:s.Jq,variables:{replId:x,path:n},data:{__typename:"RootQueryType",threadsByFile:{__typename:"ThreadsByFileResult",threads:(0,a.Z)(Z).concat([(0,r.Z)({messageCount:1,unreadCount:0,__typename:"AnnotationAnchor",isGeneral:!1,user:b,isResolved:!1,participants:[b]},v)])}}})}}else{var S="AnnotationAnchor"===(null===T||void 0===T||null===(l=T.thread)||void 0===l?void 0:l.__typename)?T.thread:null;if(!S)throw new Error("expected thread");L({variables:{replId:x,threadId:S.id,threadMessage:f,highlight:w(t,S.id)},optimisticResponse:{__typename:"RootMutationType",createThreadMessage:(0,i.Z)((0,r.Z)({},S),{messages:(0,a.Z)(S.messages.filter((function(e){return!e.id.startsWith("chat-")}))).concat([(0,i.Z)((0,r.Z)({},O(),f),{content:{text:f.text,__typename:"TextMessageContentType"},anchor:{id:S.id,__typename:"AnnotationAnchor"},__typename:"AnnotationMessage",timeCreated:(new Date).toISOString(),currentUserIsAuthor:!0,seen:!0})])})}})}},changeThreadMessage:function(t){var n=t.messageId;N({variables:{threadId:e,messageId:n,message:null}})}}}},53828:function(e,t,n){n.d(t,{Jq:function(){return u},eR:function(){return s}});var r=n(72006),i=n(43119),o=n(71440),a=n(24635);function l(){var e=(0,i.Z)(["\n  query ThreadsByFileHook($replId: String!, $path: String!) {\n    threadsByFile(replId: $replId, path: $path) {\n      ... on ThreadsByFileResult {\n        threads {\n          id\n          path\n          otVersion\n          indexStart\n          indexEnd\n          messageCount\n          unreadCount\n          user {\n            id\n            image\n            username\n          }\n          participants {\n            id\n            image\n            username\n          }\n          isGeneral\n          isResolved\n        }\n      }\n    }\n  }\n"]);return l=function(){return e},e}var c={},u=(0,o.Ps)(l());function s(e){var t=(0,r.Z)({},c,e);return a.a(u,t)}},45634:function(e,t,n){function r(e,t,n){if("effects"in e){var i=!0,o=!1,a=void 0;try{for(var l,c=e.effects[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var u=l.value;u.is(t)&&n(u)}}catch(v){o=!0,a=v}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}}else{var s=!0,d=!1,f=void 0;try{for(var p,h=e.transactions[Symbol.iterator]();!(s=(p=h.next()).done);s=!0){r(p.value,t,n)}}catch(v){d=!0,f=v}finally{try{s||null==h.return||h.return()}finally{if(d)throw f}}}}n.d(t,{j:function(){return r}})},47581:function(e,t,n){n.d(t,{B:function(){return o}});var r=n(14806),i=n(45634);function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){return e},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=r.Py.define(),o=r.QQ.define({create:function(){return t},update:function(t,r){return(0,i.j)(r,n,(function(n){t=e(n.value,t)})),t}});return{effect:n,state:o}}},2954:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(74985),i=n(6394),o=n(50959);function a(e){var t=e.json,n=(0,o.useMemo)((function(){return JSON.stringify(t,null,2)}),[t]);return(0,r.tZ)(i.Z,{language:"json",code:n})}},52564:function(e,t,n){n.d(t,{X:function(){return Ut}});var r=n(57389),i=n(72006),o=n(74985),a=n(45353),l=n(48468),c=n(82568),u=n(27691),s=n(39541),d=n(25198),f=n(85368),p=n(50959),h=n(18171),v=n(94716),m=n(32104),g=n(17807),y=n(57135),Z=n(2272),b=n(96583),w=n(91398),x=n(92153),k=n(56169),C=n(9970);function S(e){return e.map((function(e){return"group"===e.data.type?e.data.key:e.data.key||e.data.label})).join(":")}function T(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,l=e.slice(t)[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value;"group"!==c.data.type&&n.push(c.data.label)}}catch(u){i=!0,o=u}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return(0,C.Z)(new Set(n))}function E(e,t){for(var n=e.indexPath,r=t.indexPath,i=Math.min(n.length,r.length),o=0;o<i;o++){if(n[o]>r[o])return 1;if(n[o]<r[o])return-1}return n.length-r.length}var R=n(92683),G=n(13525),I=n(82325),_=(0,p.createContext)(void 0);function D(){var e=(0,p.useContext)(_);if(!e)throw new Error("Expected store in context");return e}function B(e){var t=D();return(0,R.Dv)(e,{store:t})}function P(e){return(0,I.lV)((0,p.useCallback)((function(t){return t(e)}),[e]),{store:D()})}var A=function(e){var t=D();return(0,R.b9)(e,{store:t})};function L(e){return(0,G.b)(e,D())}var U=n(56581),X=function(e){return"item-"+e},M=(0,w.cn)(0),N=(0,w.cn)(0),O=(0,w.cn)(0),F=(0,w.cn)((function(e){return e(M)+e(N)+e(O)})),W=(0,w.cn)({path:[],rows:[],items:[],placeholder:"",isLoading:!1}),H=(0,w.cn)(!0);function V(){return B(H)}var z=(0,w.cn)(!1);function j(){return B(z)}var q,$=(0,w.cn)(null),Y=(0,w.cn)({}),K=(0,U.kv)(Y,(function(e){return Boolean(e.openOnInput)})),Q=(0,U.kv)(Y,(function(e){return Boolean(e.autoFocus)})),J=(0,U.kv)(Y,(function(e){return e.keyboardShortcut})),ee=(0,U.kv)(Y,(function(e){return e.command})),te=(0,U.kv)(Y,(function(e){return e.overscan})),ne=(0,U.kv)(Y,(function(e){return e.footer})),re=(0,U.kv)(Y,(function(e){return e.focusRef})),ie=(0,U.kv)(Y,(function(e){return null!==(q=e.fontSize)&&void 0!==q?q:14})),oe=(0,w.cn)((function(e){return!e(K)})),ae=(0,U.kv)(Y,(function(e){return Boolean(e.iconBreadcrumbs)})),le=(0,w.cn)(null),ce=(0,w.cn)((function(e){return e(he)>-1})),ue=(0,w.cn)((function(e){var t=e(W);return!t.isLoading&&0===t.rows.length})),se=(0,w.cn)({label:"",input:"",menu:""});var de=(0,w.cn)(""),fe=(0,w.cn)(""),pe=(0,w.cn)(""),he=(0,w.cn)(-1),ve=(0,w.cn)((function(e){var t=e(he);return e(me).findIndex((function(e){return"item"===e.type&&e.index===t}))}));var me=(0,w.cn)((function(e){return e(W).rows})),ge=(0,w.cn)((function(e){return e(W).items})),ye=(0,w.cn)((function(e){return e(ge).length})),Ze=(0,w.cn)((function(e){return e(Ge).filter((function(e){return"context"===e.data.type&&Boolean(e.match)}))})),be=(0,w.cn)((function(e){return e(Ze).length>0})),we=(0,w.cn)(!1),xe=(0,w.cn)(null,(function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(t(we,!0),t(W,(function(e){return(0,x.ZP)(e,(function(e){e.path=[e.path[0]]}))})),e(Fe).setPath(e(Ge)),t(he,-1),t(de,""),t(fe,""),t(pe,""),e(K)&&t(H,!1),r.focus)&&(null===(n=e(Ue))||void 0===n||n.focus())})),ke=(0,w.cn)((function(e){return e(W).placeholder}));var Ce=(0,w.cn)((function(e){return e(W).isLoading}));var Se=(0,w.cn)((function(e){return e(W).path.length}));function Te(){return B(Se)}var Ee=(0,w.cn)((function(e){return e(be)||Boolean(e(de))}));var Re=(0,w.cn)(null,function(){var e=(0,y.Z)((function(e,t,n,r){var i,o,a,l,c,u;function s(n){var r;t(Pe,null!==n&&void 0!==n?n:"Something went wrong"),null===(r=e(Ue))||void 0===r||r.focus()}return(0,b.__generator)(this,(function(d){switch(d.label){case 0:if("group"===n.data.type)return[2];if(t(le,n),o=e(Y),"context"===n.data.type)return l=n.path,t(Le,l),t(he,-1),e(Fe).setPath(l),null===(a=e(Ue))||void 0===a||a.focus(),[2];switch(n.data.type){case"output":case"openPane":case"error":return t(xe),null===(c=o.onSelect)||void 0===c||c.call(o,n),[2]}t(z,!0),u=null,d.label=1;case 1:return d.trys.push([1,3,,4]),[4,Promise.resolve(n.data.run(r.nativeEvent))];case 2:return u=d.sent(),[3,4];case 3:return d.sent(),t(z,!1),s(),[2];case 4:return t(z,!1),"error"===(null===u||void 0===u?void 0:u.type)?(s(u.message),[2]):(t(xe),null===(i=o.onAction)||void 0===i||i.call(o),[2])}}))}));return function(t,n,r,i){return e.apply(this,arguments)}}());var Ge=(0,w.cn)((function(e){return e(W).path})),Ie=(0,w.cn)((function(e){return 1===e(Ge).length})),_e=(0,w.cn)(null,(function(e,t,n){var r=e(Ge),i=r.indexOf(n);-1!==i&&(r=r.slice(0,i+1),t(he,0),e(Fe).setPath(r),t(de,""))}));function De(e,t){return t.match.score-e.match.score}var Be=(0,w.cn)(null,(function(e,t,n){var r=e(pe);if(r===e(pe)){var i,o=n.items.sort(De),a=n.path.length?n.path[n.path.length-1]:null,l=function(e,t){var n=new Map;e.forEach((function(e){var t=e.path.slice(0,-1),r="section:"+S(t),i=n.get(r);if(i)i.items.push(e);else{var o=t[t.length-1],a="group"===(null===o||void 0===o?void 0:o.data.type);n.set(r,{type:"section",path:t,score:e.match.score,items:[e],unlabeled:a,key:r})}}));var r=(0,C.Z)(n.entries()).sort((function(e,n){var r=(0,Z.Z)(e,2),i=r[0],o=r[1],a=(0,Z.Z)(n,2),l=a[0],c=a[1];if(!t||!t.includes(i)&&!t.includes(l))return c.score-o.score;var u=t.indexOf(i),s=t.indexOf(l);return u>-1&&s>-1?u-s:-1===u?1:-1})),i={items:[],rows:[]},o=0;return r.forEach((function(e){var t=(0,Z.Z)(e,2),n=t[0],r=t[1];i.rows.push({type:r.type,key:n,path:r.path,unlabeled:r.unlabeled}),r.items.forEach((function(e){i.items.push(e),i.rows.push({type:"item",item:e,index:o++})}))})),i}(o,r?e(W).rows.filter((function(e){return"section"===e.type})).map((function(e){return e.key})):void 0),c=l.items,u=l.rows,s=null!==(i=null===a||void 0===a?void 0:a.data)&&void 0!==i?i:null,d=null===s||void 0===s?void 0:s.description;e(ae)&&"group"!==(null===s||void 0===s?void 0:s.type)&&(d=null===s||void 0===s?void 0:s.label),t(W,(function(e){return{items:c,rows:u,isLoading:Boolean(n.partial),path:n.path,placeholder:d||e.placeholder}}))}})),Pe=(0,w.cn)(null,(function(e,t,n){t($,n),t(W,(function(e){return{items:[],rows:[],isLoading:!1,path:e.path,placeholder:e.placeholder}}))})),Ae=(0,w.cn)(null,(function(e,t,n){t(de,n),t(he,n?0:-1),t($,null),t(W,(function(e){return(0,x.ZP)(e,(function(e){e.isLoading=Boolean(n)}))})),e(K)&&t(H,Boolean(n))}));var Le=(0,w.cn)(null,(function(e,t,n){t(W,(function(e){return(0,x.ZP)(e,(function(e){e.items=[],e.rows=[],e.path=n}))})),t(Ae,""),t(fe,""),t(pe,"")})),Ue=(0,w.cn)(null),Xe=(0,w.cn)(null,(function(e,t,n){var r=e(he);if(!(r<0)){var i=e(ge)[r];i&&t(Re,i,n)}})),Me=(0,w.cn)(null,(function(e,t,n){var r=e(H),i=e(ye),o=e(he);switch(n.key){case"ArrowDown":n.preventDefault();var a=o+1;return t(he,a<i?a:0),void t(H,!0);case"ArrowUp":n.preventDefault();var l=o-1;return void t(he,Math.max(-1,l));case"Home":return n.preventDefault(),void(n.shiftKey?n.currentTarget.selectionStart=0:n.currentTarget.setSelectionRange(0,0));case"End":n.preventDefault();var c=n.currentTarget.value.length;return void(n.shiftKey?n.currentTarget.selectionEnd=c:n.currentTarget.setSelectionRange(c,c));case"Escape":if(!e(de))return;if(n.preventDefault(),t(Ae,""),t(fe,""),e(oe))return;return void t(H,!1);case"Enter":if(!r)return;return n.preventDefault(),void t(Xe,n);case"PageUp":case"PageDown":if(!r)return;n.preventDefault();var u="PageUp"===n.key?-10:10;return void t(he,(function(e){return Math.max(Math.min(e+u,i-1),0)}))}}));function Ne(){var e=A(Ue),t=B(ke),n=(0,Z.Z)(function(){var e=B(de),t=A(Ae),n=A(fe),r=(0,p.useTransition)()[1];return[e,(0,p.useCallback)((function(e){var i="string"===typeof e?e:e.currentTarget.value;t(i),r((function(){return n(i)}))}),[t,r,n])]}(),2),r=n[0],i=n[1],o=A(he),a=B(he),l=B(se),c=V();return{onBlur:function(){return o(-1)},onChange:i,placeholder:t,value:r,ref:e,disabled:j(),ariaAttrs:{id:l.input,role:"combobox",autoComplete:"off","aria-autocomplete":"list","aria-activedescendant":a>-1?X(a):"","aria-controls":l.menu,"aria-expanded":c,"aria-labelledby":l.label}}}var Oe=(0,w.cn)(null,(function(e,t,n){var r=Array.isArray(n)?n:[n];e(we)&&(r=[r[0]]);var i=e(fe);t(pe,i),e(Fe).setPath(r,i)})),Fe=(0,w.cn)({});var We=(0,w.cn)(null,(function(e,t){var n=e(Ge),r=e(Ze);if(r.pop()){var i=r.pop();if(i){var o=n.indexOf(i);n=n.slice(0,o+1),t(he,0),t(Le,n),e(Fe).setPath(n)}else t(xe)}}));function He(){var e=V(),t=B(Ee),n=B(de),r=B(ue),i=j(),o=B($),a=A(Me),l=B(ce),c=A(xe),u=P(Ue);!function(){var e=B(Fe),t=B(ee),n=L(Ie),r=L(fe),i=A(pe),o=A(Oe),a=(0,v.Z)(t);(0,p.useEffect)((function(){n.current&&o(t)}),[e,n,t,r,o]),(0,p.useEffect)((function(){return n.subscribe((function(e){e&&o(a.current)}))}),[e,r,n,o,a]),(0,p.useEffect)((function(){var t=function(t){i(t),e.search(t)};return t(r.current),r.subscribe(t)}),[e,r,n,i,a])}();var s=(0,h.Z)((function(){return function(){var e;return null===(e=u())||void 0===e?void 0:e.focus()}}),[u]),d=A(We);return{focus:s,onKeyDown:(0,h.Z)((function(){return function(e){if("Backspace"!==e.key||e.currentTarget.value)return a(e);d()}}),[a,d]),inputValue:n,isOpen:e,isClearable:t,noResults:r,hasHighlightedItem:l,isRunning:i,actionError:o,clearCommads:c}}function Ve(e){var t={label:(0,k.D)(),input:(0,k.D)(),menu:(0,k.D)()},n=(0,p.useState)((function(){var n,r=(0,w.MT)();r.set(se,t),r.set(Y,e),r.set(H,!e.openOnInput),r.set(Fe,function(e){var t=e.initialPath,n=e.partialUpdateTimeout,r=e.onUpdate,i=function(e){a&&clearTimeout(a);var t=++l,i=0,c=[],u=o[o.length-1];u.commands?(void 0!==n&&(a=setTimeout((function(){c.length&&r({items:(0,C.Z)(c).sort(E),partial:!0,path:o})}),n)),function n(u,s,d){if(i++,!u.commands)throw new Error("Expected commands");var f=(0,C.Z)(s).concat([u]),p=f.length===o.length;Promise.resolve(u.commands({active:p,search:e,path:f})).then((function(u){t===l?(i--,u.forEach((function(t,r){var i=(0,C.Z)(f).concat([t]),o=(0,C.Z)(d).concat([r]),a=t.match?t.match({search:e,data:t.data,path:i,active:p}):null;a&&c.push({path:i,data:t.data,match:a,indexPath:o}),t.commands&&n(t,f,o)})),i>0||(a&&clearTimeout(a),r({items:(0,C.Z)(c).sort(E),path:o}))):a&&clearTimeout(a)}))}(u,o.slice(0,o.length-1),[])):r({items:c,path:o})},o=t,a=null,l=0;return{search:i,setPath:function(e){o=e,i(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"")},getPath:function(){return o}}}({initialPath:Array.isArray(e.command)?e.command:[e.command],partialUpdateTimeout:30,onUpdate:function(e){return r.set(Be,e)}}));var i,o=Array.isArray(e.command)?e.command[0]:e.command,a=null!==(i=null===o||void 0===o||null===(n=o.data)||void 0===n?void 0:n.description)&&void 0!==i?i:null;return a&&r.set(W,(function(e){return(0,x.ZP)(e,(function(e){e.placeholder=a}))})),r})),r=n[0];return(0,p.useEffect)((function(){r.set(Y,e)}),[r,e]),r}var ze=n(57913),je=(0,n(68973).$)(["fontSize"]),qe=je.cssVars,$e=je.styleTokens,Ye=function(e){return e/14+"em"},Ke=function(e){var t=e/14+"em";return{"&& svg":{minWidth:t,minHeight:t,width:t,height:t}}},Qe=(0,c.X)({root:[s.l0.reset.button,s.l0.viewStyle,s.l0.flex.row,s.l0.align.center,s.l0.borderRadius(0),s.l0.cursor.pointer,s.l0.color.foregroundDimmer,{gap:Ye(4),paddingLeft:Ye(4),paddingRight:Ye(4),"&:hover":{color:s.TV.foregroundDefault}}],icon:[s.l0.position.relative,Ke(16),{width:Ye(16),height:Ye(16)}],iconRight:[Ke(12),{width:Ye(12),height:Ye(12)}],text:[s.l0.truncate,s.l0.flex.shrink(1),{fontSize:"1em"}]}),Je=(0,p.memo)((function(){var e={iconOnly:B(ae),breadcrumbs:B(Ze),onClick:A(_e)},t=e.breadcrumbs,n=e.iconOnly,r=e.onClick;return t.length?(0,o.tZ)(o.HY,{children:t.map((function(e,t){if(!e.data)return null;if(!("label"in e.data))return null;var i=e.data,a=i.label,l=i.icon,c=a+t;return(0,o.BX)("button",{css:Qe.root,onClick:function(){return r(e)},children:[(0,o.tZ)(f.G,{css:Qe.icon,children:l}),n?null:(0,o.tZ)(f.G,{css:Qe.text,children:a}),(0,o.tZ)(f.G,{css:Qe.iconRight,children:(0,o.tZ)(ze.Z,{})})]},c)}))}):null})),et=n(43312),tt=n(80336),nt=(0,et.iv)([s.l0.reset.button,s.l0.viewStyle,s.l0.center,s.l0.height("100%"),s.l0.cursor.pointer,s.l0.color.foregroundDimmest,{paddingLeft:Ye(4),paddingRight:Ye(4),"&:hover":{color:s.TV.foregroundDefault}},Ke(16)]);function rt(e){return(0,o.tZ)("button",{css:nt,onClick:e.onClick,title:e.isLoading?"Loading":"Clear",children:e.isLoading?(0,o.tZ)(m.Z,{}):(0,o.tZ)(tt.Z,{})})}var it=n(4405),ot=n(94629),at=n(63128),lt=n(4421),ct=n(92508),ut=n(13716),st=n(71321),dt=n(49944);function ft(e){var t=e.data,n="openPane"===t.type?t.pane:void 0;return n&&!(0,ct.Ur)(n)?n:null}var pt=function(e){return Math.round(e.value/14*e.fontSize)};var ht={transitionDuration:lt.H.duration,transitionTimingFunction:lt.H.timingFunction},vt=(0,c.X)({background:[ht,{transitionProperty:"background-color"}],opacity:[ht,{transitionProperty:"opacity"}],color:[ht,{transitionProperty:"color"}]}),mt=[s.l0.position.absolute,s.l0.top(0),s.l0.left(0),s.l0.width("100%")],gt=(0,c.X)({item:[mt,{userSelect:"none",cursor:"pointer","&:hover > div":{backgroundColor:"var(".concat(g.dj.interactiveBackground,")")},"& > div > div":{transition:"120ms ease-out"},"&:hover > div > div":{backgroundColor:"var(".concat(g.dj.interactiveBackground,")"),color:"".concat(s.TV.foregroundDefault," !important")}}],divider:[mt,s.l0.justify.center,{padding:"0 ".concat(Ye(8))}]}),yt=(0,p.memo)((function(e){var t=function(e){var t=A(Re),n=(0,p.useRef)(null),r=B((0,p.useMemo)((function(){return(0,U.kv)(me,(function(t){return t[e]}))}),[e])),i="item"===r.type?r.index:null,o=B((0,p.useMemo)((function(){return(0,w.cn)((function(e){return null!==i&&e(he)===i}))}),[i])),a="item"===(null===r||void 0===r?void 0:r.type)?function(e){return t(r.item,e)}:void 0,l="item"===r.type?{id:X(e),role:"option","aria-selected":o}:void 0;return{row:r,active:o,ref:n,onClick:a,ariaAttrs:l}}(e.index),n=t.row,r=t.active,a=t.onClick,l=t.ariaAttrs,c=t.ref;if(!n)return null;var u={height:e.height,transform:"translateY(".concat(e.y,"px)")};if("section"===n.type)return(0,o.tZ)(Tt,{path:n.path,style:u,border:e.index>0});var s=n.item,d=s.data,h=s.match;if("group"===d.type)return null;var v=h.render;if(v&&"content"in v&&v.content)return(0,o.tZ)(f.G,(0,it.Z)((0,i.Z)({innerRef:c,css:gt.item,style:u,onClick:a},l),{children:(0,o.tZ)(at.Tg,{elevated:r,css:vt.background,children:(0,p.cloneElement)(v.content,{active:r})})}));var m=ft(s),g=d.label,y=d.icon,Z=v&&"ranges"in v?v.ranges:void 0;return(0,o.tZ)(f.G,(0,it.Z)((0,i.Z)({innerRef:c,css:gt.item,style:u,onClick:a},l),{children:m?(0,o.tZ)(Ct,{active:r,pane:m,highlight:Z}):(0,o.tZ)(wt,{active:r,icon:y,text:g,highlight:Z,description:d.description,shortcut:d.keyboardShortcut,hasChildren:"context"===s.data.type})}))})),Zt=[{padding:Ye(8)},vt.background],bt=(0,c.X)({root:[Zt,s.l0.align.center,s.l0.flex.row,{gap:Ye(8),userSelect:"none"}],iconText:[s.l0.align.center,s.l0.flex.row,{gap:Ye(8)}],description:[s.l0.truncate,s.l0.flex.growAndShrink(1),{fontSize:"0.9em"}],right:[s.l0.flex.row,s.l0.align.center,{gap:Ye(4),justifySelf:"end",marginLeft:"auto"}],shortcut:[{"& > div > div":{fontSize:"0.8em",paddingLeft:Ye(4),paddingRight:Ye(4),paddingTop:Ye(2),paddingBottom:Ye(2)}}],chevron:Ke(12)});function wt(e){return(0,o.BX)(at.Tg,{elevated:e.active,css:bt.root,children:[(0,o.BX)(f.G,{css:bt.iconText,children:[(0,o.tZ)(f.G,{css:kt.root,style:{opacity:e.active?1:.7},children:e.icon}),(0,o.tZ)(dt.x,{dimmed:!e.active,text:e.text,highlight:e.highlight})]}),e.description?(0,o.tZ)(f.G,{style:{color:e.active?s.TV.foregroundDimmer:s.TV.foregroundDimmest},css:bt.description,children:e.description}):null,(0,o.BX)(f.G,{css:bt.right,children:[e.shortcut?(0,o.tZ)(f.G,{css:bt.shortcut,children:(0,o.tZ)(a.bM,{keyCombo:e.shortcut,small:!0})}):null,e.hasChildren?(0,o.tZ)(f.G,{css:bt.chevron,children:(0,o.tZ)(ze.Z,{size:12})}):null]})]})}var xt=(0,c.X)({root:[Zt,s.l0.align.center,s.l0.flex.row,{gap:Ye(8)}],iconSurface:[{padding:Ye(8),borderRadius:Ye(8)},s.l0.position.relative,vt.background]}),kt=(0,c.X)({root:[vt.opacity,s.l0.position.relative,Ke(16),{width:Ye(16),height:Ye(16)}]});function Ct(e){var t=e.pane,n=e.active,r=e.highlight,i=(0,ct.Se)(),a=i.Icon({pane:t}),l=i.getTitle(t),c=(0,ut.b2)({paneType:t.type});return(0,o.BX)(at.Tg,{elevated:n,css:xt.root,children:[(0,o.tZ)(at.Tg,{elevated:!0,css:xt.iconSurface,children:(0,o.BX)(f.G,{css:kt.root,style:{opacity:e.active?1:.7},children:[a,c?(0,o.tZ)(st.B,{}):null]})}),(0,o.tZ)(dt.x,{dimmed:!n,text:l,highlight:r})]})}var St=(0,c.X)({borderHeaderWrap:[{userSelect:"none",padding:[8,8,4,8].map(Ye).join(" ")},mt,s.l0.colWithGap(0),s.l0.justify.spaceBetween],borderWrap:[{userSelect:"none",paddingLeft:Ye(8),paddingRight:Ye(8)},mt,s.l0.justify.center],headerWrap:[{userSelect:"none",paddingLeft:Ye(8),paddingRight:Ye(8),paddingBottom:Ye(4)},mt,s.l0.justify.end],header:[{userSelect:"none"},s.l0.align.center,s.l0.flex.row,{gap:Ye(4)},Ke(12)],text:[{userSelect:"none"},s.l0.flex.shrink(1),s.l0.color.foregroundDimmest,s.l0.truncate,{fontSize:"0.9em"}],border:[s.l0.height(1),s.l0.width("100%")]}),Tt=(0,p.memo)((function(e){var t=Te(),n=T(e.path,t),r=(0,o.tZ)(at.Tg,{elevated:!0,css:St.border}),i=0===n.length;if(e.border&&i)return(0,o.tZ)(f.G,{css:St.borderWrap,style:e.style,children:r});var a=(0,o.tZ)(f.G,{css:St.header,children:n.map((function(e,t){return(0,o.BX)(p.Fragment,{children:[t>0?(0,o.tZ)(ze.Z,{color:s.TV.foregroundDimmest}):null,(0,o.tZ)(f.G,{css:St.text,children:e})]},e+t)}))});return e.border||i?(0,o.BX)(f.G,{css:St.borderHeaderWrap,style:e.style,children:[r,a]}):(0,o.tZ)(f.G,{css:St.headerWrap,style:e.style,children:a})})),Et=(0,c.X)({root:[s.l0.flex.growAndShrink(1),s.l0.overflow("hidden"),{paddingTop:Ye(8)}],scrollParent:[s.l0.height("100%"),s.l0.overflowY("auto"),s.l0.flex.growAndShrink(1)]}),Rt=(0,p.memo)((function(e){var t,n=function(){var e=B(me),t=V(),n=(0,p.useRef)(null),r=Te(),i=B(se);return{rows:e,isOpen:t,scrollRef:n,currentPathIndex:r,ariaAttrs:{id:i.menu,"aria-labelledby":i.label,role:"listbox"}}}(),r=n.rows,a=n.isOpen,l=n.scrollRef,c=n.currentPathIndex,u=n.ariaAttrs,d=A(N),h=B(ie),v=(0,ot.MG)({count:r.length,overscan:null!==(t=e.overscan)&&void 0!==t?t:1,getScrollElement:function(){return l.current},getItemKey:function(e){var t=r[e];return t?"section"===t.type?t.key:S(t.item.path):""},estimateSize:function(e){var t=r[e];return t?function(e){var t=e.row,n=e.currentPathIndex,r=e.isFirst,i=e.fontSize;if("section"===t.type){var o=T(t.path,n).length?24:0;return r?0===o?o:pt({fontSize:i,value:o}):o+pt({fontSize:i,value:16})}var a,l=t.item.match.render;return l&&"content"in l?null!==(a=l.height)&&void 0!==a?a:pt({fontSize:i,value:32}):pt({fontSize:i,value:ft(t.item)?48:32})}({fontSize:h,row:t,currentPathIndex:c,isFirst:0===e}):0},onChange:function(e){d(e.getTotalSize())}}),m={borderRadius:e.hasFooter?void 0:s.TV.space8,display:a?void 0:"none"},g=v.scrollToIndex,y=B(ve);return(0,p.useEffect)((function(){var e=y;e<0||null==e||(1===e&&(e=0),g(e,{behavior:"smooth"}))}),[g,y]),(0,o.tZ)(f.G,(0,it.Z)((0,i.Z)({css:Et.root},u),{style:m,children:(0,o.tZ)(f.G,{innerRef:l,css:Et.scrollParent,children:(0,o.tZ)(f.G,{style:{height:"".concat(v.getTotalSize(),"px"),position:"relative",overflow:"hidden"},children:a?v.getVirtualItems().map((function(e){return(0,o.tZ)(yt,{index:e.index,height:e.size,y:e.start},e.key)})):null})})}))})),Gt=(0,c.X)({root:[s.l0.flex.shrink(1),s.l0.height("100%"),{fontSize:$e.fontSize}],footer:{paddingTop:Ye(8)},keyComboBlocks:{paddingRight:Ye(8)},menuWrap:[s.l0.flex.shrink(1)],row:[s.l0.position.absolute,s.l0.top(0),s.l0.left(0),s.l0.width("100%")],menu:[s.l0.flex.shrink(1),s.l0.overflow("auto")],running:[s.l0.center,s.l0.flex.growAndShrink(1)],error:{padding:Ye(8)}}),It=(0,c.X)({root:[s.l0.viewStyle,s.l0.flex.growAndShrink(1),s.l0.height("100%"),{fontSize:"1em",padding:"0 ".concat(Ye(8)),backgroundColor:"transparent",border:"0 none",outline:"0 none","::placeholder":{color:s.TV.foregroundDimmest},"&:hover::placeholder":{color:s.TV.foregroundDimmer},"&:focus::placeholder, &:hover:focus::placeholder":{color:s.TV.foregroundDimmest}}]}),_t=(0,p.memo)((function(e){var t=Ne();return(0,o.tZ)("input",(0,i.Z)({autoFocus:e.autoFocus,onKeyDown:e.onKeyDown,css:It.root,placeholder:t.placeholder,value:t.value,onChange:t.onChange,ref:t.ref,onBlur:t.onBlur,disabled:t.disabled,autoComplete:"off"},t.ariaAttrs))})),Dt=[g.gU.filled,s.l0.viewStyle,s.l0.flex.row,s.l0.align.center,s.l0.flex.growAndShrink(1),{height:Ye(32),borderRadius:Ye(8)}],Bt=(0,c.X)({container:[{padding:Ye(8),"& > div > button + input":{paddingLeft:0}},s.l0.pb(0)],surface:Dt,surfaceRunning:[Dt,u.p.foregroundPulse()]});function Pt(e){var t=j(),n=A(M),r=(0,l.Z)((function(e){var t=e.height;return n(t)}));return(0,o.tZ)(f.G,{css:Bt.container,innerRef:r,children:(0,o.tZ)(f.G,{css:t?Bt.surfaceRunning:Bt.surface,children:e.children})})}var At=(0,p.memo)((function(e){var t=B(Ee),n=B(Ce);return t?(0,o.tZ)(rt,{onClick:e.onClick,isLoading:n}):null}));var Lt=(0,p.memo)((function(){var e=He(),t=e.isOpen,n=e.focus,i=e.clearCommads,c=e.isClearable,u=e.onKeyDown,g=e.inputValue,y=e.noResults,Z=e.hasHighlightedItem,b=e.isRunning,w=e.actionError,x=(0,v.Z)({inputValue:g,noResults:y,hasHighlightedItem:Z});!function(){var e=P(Y),t=B(M),n=L(F);(0,p.useEffect)((function(){var r=function(t){var n=e().onTotalHeightChange;n&&(0===i&&(i=t),n({initial:i,current:t}))};if(0!==t){var i=0;return r(n.current),n.subscribe(r)}}),[t,e,n])}();var k=B(Q),C=B(J),S=B(te),T=B(ne),E=B(re),R=P(Y),G=(0,h.Z)((function(){return function(e){var t,n=x.current,r=R();null===(t=r.onKeyDown)||void 0===t||t.call(r,e,{inputValue:n.inputValue,noResults:n.noResults,hasHighlightedItem:n.hasHighlightedItem}),e.defaultPrevented||("Enter"===e.key&&n.inputValue&&n.noResults&&r.onSubmit?r.onSubmit(n.inputValue):u(e))}}),[x,u,R]);(0,p.useEffect)((function(){E&&(E.current=n)}),[n,E]);var I=B(se),_=A(O),D=(0,l.Z)((function(e){var t=e.height;return _(t)})),U=B(ie);return(0,o.BX)(f.G,{css:Gt.root,style:(0,r.Z)({},qe.fontSize,U+"px"),children:[(0,o.tZ)("label",{id:I.label,htmlFor:I.input,css:s.l0.visuallyHidden,children:"Commands"}),(0,o.BX)(Pt,{children:[(0,o.tZ)(Je,{}),(0,o.tZ)(_t,{autoFocus:k,onKeyDown:G}),(0,o.tZ)(At,{onClick:function(){return i({focus:!0})}}),C&&!c?(0,o.tZ)(f.G,{css:Gt.keyComboBlocks,children:(0,o.tZ)(a.bM,{keyCombo:C,small:!0})}):null]}),w?(0,o.tZ)(f.G,{css:Gt.error,children:(0,o.tZ)(d.E,{colorway:"warning",text:w})}):null,t&&!b?(0,o.BX)(o.HY,{children:[(0,o.tZ)(Rt,{overscan:S,hasFooter:Boolean(T)}),T?(0,o.tZ)(f.G,{innerRef:D,css:Gt.footer,children:T}):null]}):null,b?(0,o.tZ)(f.G,{css:Gt.running,children:(0,o.tZ)(m.Z,{size:24})}):null]})}));function Ut(e){var t=Ve(e);return(0,o.tZ)(_.Provider,{value:t,children:(0,o.tZ)(Lt,{})})}},56029:function(e,t,n){n.d(t,{m:function(){return f}});var r=n(72006),i=n(4405),o=n(77637),a=n(2272),l=n(74985),c=n(50959),u=n(45510),s=n(60566),d=n(66539);function f(e){var t=e.textToCopy,n=e.tooltip,f=(0,o.Z)(e,["textToCopy","tooltip"]),p=(0,a.Z)(c.useState(!1),2),h=p[0],v=p[1],m=c.useRef(null);return c.useEffect((function(){return function(){m.current&&clearTimeout(m.current)}}),[]),(0,l.tZ)(d.u,{isOpen:h,tooltip:null!==n&&void 0!==n?n:"".concat(t," copied to clipboard"),placement:"bottom-end",children:(0,l.tZ)(u.zx,(0,i.Z)((0,r.Z)({},f),{onClick:function(e){(0,s.Z)(t),v(!0),m.current&&clearTimeout(m.current),m.current=setTimeout((function(){return v(!1)}),4e3),f.onClick&&f.onClick(e)}}))})}},43454:function(e,t,n){n.d(t,{E:function(){return p}});var r=n(74985),i=n(625),o=n(45510),a=n(61284),l=n(2041),c=n(39541),u=n(85368),s=n(45285),d=n(63837),f=n(50959);function p(){var e=(0,s.Z)().replspaceApi,t=(0,f.useState)(null),n=t[0],p=t[1];return(0,f.useEffect)((function(){return e.onConfirmSendToken((function(e){e&&(0,i.j)(i.U3.MODAL_VIEWED,{modalName:"git_token_modal"}),p((function(){return e}))}))}),[e]),(0,r.tZ)(l.u,{isOpen:"function"===typeof n,onRequestClose:function(){null===n||void 0===n||n(!1),(0,i.j)(i.U3.GIT_TOKEN_MODAL_ACCEPTED,{response:"close"}),p(null)},children:(0,r.BX)(u.G,{css:[c.l0.colWithGap(16)],children:[(0,r.tZ)(a.h4,{variant:"headerDefault",level:3,children:"Pass GitHub Credentials"}),(0,r.tZ)(a.xv,{children:"It looks like you're trying to connect to your GitHub repository through the shell. Pass your token to the shell?"}),(0,r.tZ)(a.xv,{children:"If you did not initiate a git command, you should deny this."}),(0,r.BX)(u.G,{css:[c.l0.justify.end,c.l0.rowWithGap(16)],children:[(0,r.tZ)(o.zx,{onClick:function(){null===n||void 0===n||n(!1),(0,i.j)(i.U3.GIT_TOKEN_MODAL_ACCEPTED,{response:"deny"}),p(null)},text:"Deny"}),(0,r.tZ)(o.zx,{onClick:function(){null===n||void 0===n||n(!0),(0,i.j)(i.U3.GIT_TOKEN_MODAL_ACCEPTED,{response:"confirm"}),p(null)},iconLeft:(0,r.tZ)(d.Z,{}),text:"Confirm for this session",colorway:"primary"})]})]})})}},78828:function(e,t,n){n.d(t,{LU:function(){return s},Ot:function(){return f}});var r=n(72006),i=n(43119),o=n(71440),a=n(50216);function l(){var e=(0,i.Z)(["\n  fragment ReplInfoEditReplDescriptionRepl on Repl {\n    id\n    description\n  }\n"]);return l=function(){return e},e}function c(){var e=(0,i.Z)(["\n  mutation ReplInfoEditReplDescriptionUpdateRepl($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        ...ReplInfoEditReplDescriptionRepl\n      }\n    }\n  }\n  ","\n"]);return c=function(){return e},e}var u={},s=(0,o.Ps)(l()),d=(0,o.Ps)(c(),s);function f(e){var t=(0,r.Z)({},u,e);return a.D(d,t)}},45941:function(e,t,n){n.d(t,{Jr:function(){return s},ie:function(){return f}});var r=n(72006),i=n(43119),o=n(71440),a=n(50216);function l(){var e=(0,i.Z)(["\n  fragment ReplInfoEditReplTemplateLabelRepl on Repl {\n    id\n    templateLabel\n  }\n"]);return l=function(){return e},e}function c(){var e=(0,i.Z)(["\n  mutation ReplInfoEditReplTemplateLabelUpdateRepl($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        ...ReplInfoEditReplTemplateLabelRepl\n      }\n    }\n  }\n  ","\n"]);return c=function(){return e},e}var u={},s=(0,o.Ps)(l()),d=(0,o.Ps)(c(),s);function f(e){var t=(0,r.Z)({},u,e);return a.D(d,t)}},27923:function(e,t,n){n.d(t,{C4:function(){return m},Zx:function(){return f},uB:function(){return h}});var r=n(72006),i=n(43119),o=n(71440),a=n(50216),l=n(9125);function c(){var e=(0,i.Z)(["\n  fragment ReplInfoEditReplTitleRepl on Repl {\n    id\n    title\n    isRenamed\n    owner {\n      ... on Team {\n        id\n        __typename\n      }\n      ... on User {\n        id\n      }\n    }\n  }\n"]);return c=function(){return e},e}function u(){var e=(0,i.Z)(["\n  mutation ReplInfoEditReplTitleUpdateRepl($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        ...ReplInfoEditReplTitleRepl\n      }\n    }\n  }\n  ","\n"]);return u=function(){return e},e}function s(){var e=(0,i.Z)(["\n  query ReplInfoEditReplTitleAvailableReplTitle(\n    $input: AvailableReplTitleInput!\n  ) {\n    availableReplTitle(input: $input) {\n      ... on AvailableReplTitleResult {\n        isAvailable\n      }\n    }\n  }\n"]);return s=function(){return e},e}var d={},f=(0,o.Ps)(c()),p=(0,o.Ps)(u(),f);function h(e){var t=(0,r.Z)({},d,e);return a.D(p,t)}var v=(0,o.Ps)(s());function m(e){var t=(0,r.Z)({},d,e);return l.t(v,t)}},38785:function(e,t,n){n.d(t,{X:function(){return H},$:function(){return W}});var r=n(2272),i=n(9970),o=n(74985),a=n(50959),l=n(85368),c=n(82568),u=n(39541),s=n(57389),d=n(72006),f=n(4405),p=u.tX.categorical,h=.0075,v=n(51523),m=n(82893),g=n.n(m),y=n(12259),Z=n(66539),b=n(61284),w=n(31992),x=n(75863),k=(0,c.X)({self:[u.l0.rowWithGap(8),u.l0.align.center],dot:[u.l0.width(8),u.l0.height(8),{borderRadius:"50%"}],title:[u.l0.flex.grow(1)]}),C=function(e){var t=e.title,n=e.usage,r=e.resourceUsageType,i=e.iconUrl;return(0,o.BX)(l.G,{css:k.self,children:["string"===typeof i?(0,o.tZ)(x.ZP,{size:16,iconUrl:i,alt:t}):null,(0,o.tZ)(b.xv,{css:k.title,multiline:!1,children:t}),(0,o.tZ)(b.xv,{color:"dimmer",multiline:!1,children:(0,w.fZ)(n,{resourceUsageType:r})})]})},S=(0,c.X)({self:[u.l0.height("100%")],empty:[u.l0.height("100%")]}),T=l.K.a,E=function(e){var t=e.percentage,n=e.color,r=e.linkedRepl,i=e.count,l=e.usage,c=e.resourceUsageType,u=r?(0,v.aq)(r):y.$I,p=(0,a.useState)(!1),h=p[0],m=p[1];return(0,o.tZ)(Z.u,{tooltip:r?(0,o.tZ)(C,{title:r.title,usage:l,resourceUsageType:c,iconUrl:r.iconUrl}):(0,o.tZ)(C,{title:"+".concat(i," more"),usage:l,resourceUsageType:c}),placement:"top",delay:"none",isOpen:h,maxWidth:400,children:function(e,r){return(0,o.tZ)(g(),(0,f.Z)((0,d.Z)({},u),{passHref:!0,children:(0,o.tZ)(T,{onMouseOver:function(){return m(!0)},onMouseLeave:function(){return m(!1)},ref:r,css:S.self,style:(0,s.Z)({minWidth:"calc(".concat(.75,"%)"),width:"calc(".concat(t,"% - 1px)"),backgroundColor:n},"&:lastOfType",{width:"".concat(t,"%")})})}))}})},R=n(27691),G=n(87076),I=n(36443),_=n(94045),D=n(77712),B=n(34338),P=(0,c.X)({self:[u.l0.rowWithGap(8),u.l0.align.center],dot:[u.l0.flex.grow(1),u.l0.width(8),u.l0.height(8),u.l0.minWidth(8),u.l0.maxHeight(8),{borderRadius:"50%"}],title:[u.l0.flex.grow(1),u.l0.color.foregroundDefault,(0,s.Z)({},(0,B.EM)("mobileMax"),[u.l0.flex.shrink(1),u.l0.truncate])],line:[u.l0.flex.growAndShrink(1),u.l0.height(8),u.l0.width("100%"),(0,s.Z)({},(0,B.EM)("mobileMax"),[u.l0.flex.shrink(4)])]}),A=l.K.a,L=l.K.li,U=function(e){var t=e.color,n=e.title,r=e.usage,i=e.resourceUsageType,a=e.linkedRepl,c=e.username,s=a?(0,v.aq)(a):(0,D.Ru)(c);return(0,o.tZ)(L,{children:(0,o.tZ)(g(),(0,f.Z)((0,d.Z)({},s),{passHref:!0,children:(0,o.tZ)(A,{children:(0,o.BX)(l.G,{css:P.self,children:[(0,o.tZ)("div",{css:P.dot,style:{backgroundColor:t}}),a?(0,o.tZ)(x.ZP,{size:16,iconUrl:a.iconUrl,alt:n}):null,(0,o.tZ)(b.xv,{css:P.title,multiline:!1,children:n}),(0,o.tZ)(l.G,{css:P.line,children:(0,o.tZ)("svg",{width:"100%",xmlns:"http://www.w3.org/2000/svg",children:(0,o.tZ)("line",{x1:"0%",y1:"50%",x2:"100%",y2:"50%",stroke:u.TV.outlineDefault})})}),(0,o.tZ)(b.xv,{color:"dimmer",multiline:!1,children:(0,w.fZ)(r,{resourceUsageType:i})})]})})}))})},X=(0,c.X)({self:[u.l0.colWithGap(4)]}),M=l.K.ul,N=function(e){var t=e.topRepls,n=e.groupedRepls,r=e.groupedTotal,i=e.context,a=e.username,c=e.resourceUsageType;if("workspace_info_modal"===i.type){var s=t.findIndex((function(e){return e.repl.id===i.replId}));return-1===s?(0,o.tZ)(l.G,{css:X.self,children:(0,o.tZ)(b.xv,{multiline:!1,children:"No storage usage"})}):(0,o.BX)(M,{css:X.self,children:[t.map((function(e,t){return(0,o.tZ)(U,{color:t===s?u.TV.accentPrimaryDefault:u.TV.accentPrimaryDimmer,title:e.repl.title,usage:e.usage,resourceUsageType:c,linkedRepl:e.repl,username:a},t)})),0!==n.length?(0,o.tZ)(U,{color:u.TV.backgroundHighest,title:"+".concat(n.length," more"),usage:r,resourceUsageType:c,username:a}):null]})}return(0,o.BX)(M,{css:X.self,children:[0===t.length?(0,o.tZ)(b.xv,{multiline:!1,children:"No resource usage"}):null,t.map((function(e,t){return(0,o.tZ)(U,{color:p[t%p.length],title:e.repl.title,usage:e.usage,resourceUsageType:c,linkedRepl:e.repl,username:a},t)})),0!==n.length?(0,o.tZ)(U,{color:p[t.length%p.length],title:"+".concat(n.length," more"),usage:r,resourceUsageType:c,username:a}):null]})},O=n(33280),F=(0,c.X)({bar:[u.l0.width("100%"),u.l0.rowWithGap(1),u.l0.height(16),u.l0.borderRadius(4),u.l0.overflow("hidden"),u.l0.backgroundColor.backgroundHigher],selfPlaceholder:[u.l0.width("100%"),u.l0.rowWithGap(1),u.l0.height(16),u.l0.borderRadius(4),u.l0.overflow("hidden"),u.l0.backgroundColor.backgroundHigher,R.p.backgroundPulse(u.TV.backgroundHigher,u.TV.backgroundRoot)],barWrapper:[u.l0.flex.grow(1)],barAndTriggerWrapper:[u.l0.rowWithGap(8),u.l0.align.center],self:[u.l0.colWithGap(8)]}),W=function(e){var t=e.summary,n=e.context,c=e.username,s=e.resourceUsageType,d=(0,a.useState)(!1),f=d[0],v=d[1],m=t.perRepl,g=t.total,y=t.limit,Z=Math.max(g,y),b=(0,i.Z)(m).filter((function(e){return e.percentage>0})).sort((function(e,t){return t.usage-e.usage})),w=(0,r.Z)(function(e,t){if("workspace_info_modal"!==t.type)return[e.slice(0,8),e.slice(8)];var n=e.findIndex((function(e){return e.repl.id===t.replId}));if(n<8)return[e.slice(0,8),e.slice(8)];var r=e[n];return[e.slice(0,8).concat(r),e.slice(8,n).concat(e.slice(n+1))]}(b,n),2),x=w[0],k=w[1],C=new Map(x.map((function(e){return[e.repl.id,e]}))),S=k.reduce((function(e,t){return e+t.usage}),0),T=function(e,t,n){var r=new Array,i=0,o=!0,a=!1,l=void 0;try{for(var c,u=e[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var s=c.value,d=Math.max(s.percentage,h),f=d-s.percentage;0!==f&&(i+=f),r.push({percentage:d,adjusted:0!==f,grouped:!1,replIds:new Set([s.repl.id])})}}catch(C){a=!0,l=C}finally{try{o||null==u.return||u.return()}finally{if(a)throw l}}var p=0===t?0:Math.max(t,h);if(p>0){var v=p-t;v>0&&(i+=v),r.push({percentage:p,adjusted:v>0,grouped:!0,replIds:n})}if(i>0){var m=r.filter((function(e){return!e.adjusted})),g=m.length;if(g>0){var y=i/g,Z=!0,b=!1,w=void 0;try{for(var x,k=m[Symbol.iterator]();!(Z=(x=k.next()).done);Z=!0)x.value.percentage-=y}catch(C){b=!0,w=C}finally{try{Z||null==k.return||k.return()}finally{if(b)throw w}}}}return r}(x,0===Z?0:S/Z,new Set(k.map((function(e){return e.repl.id})))),R="workspace_info_modal"===n.type,D="cycles_page"===n.type?u.TV.backgroundHighest:u.TV.backgroundHigher,B=(0,o.tZ)(G.h,{alt:f?"Hide Repls":"Show Repls",children:f?(0,o.tZ)(_.Z,{onClick:function(){return v(!f)}}):(0,o.tZ)(I.Z,{onClick:function(){return v(!f)}})}),P=T.length>0;return(0,o.BX)(l.G,{css:F.self,children:[(0,o.BX)(l.G,{css:F.barAndTriggerWrapper,children:[(0,o.tZ)(l.G,{css:F.barWrapper,children:(0,o.tZ)(l.G,{css:F.bar,style:{backgroundColor:D},children:T.map((function(e,t){var r,i=C.get(z(e));return(0,o.tZ)(E,{percentage:100*e.percentage,color:R?V(e,n.replId):p[t%p.length],linkedRepl:null===i||void 0===i?void 0:i.repl,count:e.replIds.size,usage:null!==(r=null===i||void 0===i?void 0:i.usage)&&void 0!==r?r:S,resourceUsageType:s},t)}))})}),P?B:null]}),P&&f?(0,o.BX)(o.HY,{children:[(0,o.tZ)(N,{topRepls:x,groupedRepls:k,groupedTotal:S,context:n,username:c,resourceUsageType:s}),R?(0,o.tZ)(O.R,{}):null]}):null]})},H=function(){return(0,o.tZ)(l.G,{children:(0,o.tZ)(l.G,{css:F.selfPlaceholder})})},V=function(e,t){return e.replIds.has(t)?u.TV.accentPrimaryDefault:u.TV.accentPrimaryDimmest},z=function(e){return e.replIds.keys().next().value}},31366:function(e,t,n){n.d(t,{_:function(){return a},l:function(){return u}});var r=n(72006),i=n(4405),o=n(70232),a=function(e){switch(e.__typename){case"AccountStorageUtilization":return l(e);case"MonthlyEgressSummary":return c(e);default:(0,o.Z)(e)}},l=function(e){var t=e.total,n=e.perRepl,r=e.quota;return{total:Number(t),limit:Number(r),perRepl:n.map(s)}},c=function(e){var t=e.usage,n=e.limit,r=e.perRepl;return{total:Number(t),limit:Number(n),perRepl:r.map(s)}};function u(e){var t=e.billingPeriodSummary,n=e.billableMetric,r={total:0,limit:0,perRepl:[]};if(null!=t){var i=t.totals.find((function(e){return e.billableMetric===n}));if(null==i)return r;var o=[],a=!0,l=!1,c=void 0;try{for(var u,s=t.perRepl[Symbol.iterator]();!(a=(u=s.next()).done);a=!0){var d=u.value,f=d.usage.find((function(e){return e.billableMetric===n}));if(null!=f){var p={usage:f.usage,percentage:f.percentage,repl:d.repl};o.push(p)}}}catch(h){l=!0,c=h}finally{try{a||null==s.return||s.return()}finally{if(l)throw c}}return r.total=i.usage,r.limit=i.freeUnits,r.perRepl=o,r}}var s=function(e){return(0,i.Z)((0,r.Z)({},e),{usage:Number(e.usage)})}},31992:function(e,t,n){n.d(t,{$s:function(){return c},fZ:function(){return o},p6:function(){return l}});var r=n(70232),i=1048576,o=function(e,t){var n=t.resourceUsageType,r=t.forceGib,i=void 0!==r&&r,o=t.precision,l=void 0===o?4:o,c=t.skipUnits,u=void 0!==c&&c,s=a({input:e,resourceUsageType:n,forceGib:i,precision:l});return u?s.formattedValue:[s.formattedValue,s.units].join(" ")},a=function(e){var t=e.input,n=e.resourceUsageType,o=e.forceGib,a=e.precision;switch(n){case"Bytes":return t>i||o?{formattedValue:c(t).toFixed(a),units:"GiB"}:{formattedValue:l(t).toFixed(a),units:"MiB"};case"ComputeSeconds":return{formattedValue:t.toFixed(2),units:"compute-seconds"};default:(0,r.Z)(n)}},l=function(e){return e/i},c=function(e){return e/1073741824}},59066:function(e,t,n){n.d(t,{Z:function(){return c}});var r=n(2272),i=n(74985),o=n(45510),a=n(50959),l=n(45157);function c(e){var t=e.context,n=(0,r.Z)(a.useState(!1),2),c=n[0],u=n[1];return(0,i.BX)(i.HY,{children:[(0,i.tZ)(o.zx,{text:"Activate",colorway:"primary",onClick:function(){return u(!0)}}),(0,i.tZ)(l.Z,{context:t,isOpen:c,onRequestClose:function(){return u(!1)},uponPurchaseGoTo:"cyclesPage",powerUp:"ghostwriter"})]})}},652:function(e,t,n){n.d(t,{$:function(){return l},i:function(){return a}});var r=n(51631),i=n(70232),o=n(14351);function a(e,t){if(void 0!==t)switch(t){case r.DZ.HostingTierE2Micro:return e.hostingTierE2Micro;case r.DZ.HostingTierE2Small:return e.hostingTierE2Small;case r.DZ.HostingTierE2Medium:return e.hostingTierE2Medium;case r.DZ.HostingTierN1Custom_1_4:return e.hostingTierN1Custom1_4;case r.DZ.HostingTierE2Standard_2:return e.hostingTierE2Standard2;case r.DZ.HostingTierE2Standard_4:return e.hostingTierE2Standard4;default:(0,i.Z)(t)}}function l(e){var t=o.r4[e],n=t.vCpu,r=t.ram,i=t.dedicated;return"".concat(i?"Dedicated ":"").concat(n," vCPU / ").concat(r," GiB RAM")}},29102:function(e,t,n){n.d(t,{$:function(){return l}});var r=n(74985),i=n(50959),o=n(55523),a=n(38270);function l(e){var t=(0,i.useState)((function(){return(0,a.N2)()}))[0];return(0,r.BX)(a.aT.Provider,{value:t,children:[e.children,(0,r.tZ)(o.jd,{replId:e.replId})]})}},28170:function(e,t,n){var r,i;function o(e){return"string"===typeof e&&Object.values(r).includes(e)}function a(e){return"tabs"in e&&void 0!==e.tabs&&e.tabs}function l(e){return"alias"in e}function c(e){return null!==e&&"object"===typeof e&&"view"in e}function u(e,t){return e.view===t?null===e||void 0===e?void 0:e.data:void 0}n.d(t,{BJ:function(){return l},D1:function(){return o},Em:function(){return c},Zs:function(){return a},ap:function(){return i},kO:function(){return r},yF:function(){return u}}),function(e){e.Intro="intro",e.ReservedVMTierSelection="reserved_vm_tier_selection",e.OnDemandMachineConfiguration="on_demand_machine_configuration",e.Deployment="deployment",e.DeploymentOptions="deployment_options",e.DeploymentInProgress="deployment_in_progress",e.History="history",e.Analytics="analytics",e.Logs="logs",e.Settings="settings"}(r||(r={})),function(e){e.SendDeploymentLifecycleCommand="send_deployment_lifecycle_command",e.CheckoutSuccess="checkout_success",e.ChangeView="change_view",e.GoBack="go_back"}(i||(i={}))},71813:function(e,t,n){n.d(t,{E:function(){return r},c:function(){return i}});var r="Procfile";function i(e){var t={};return e.split("\n").forEach((function(e){if(""!==e){var n=e.match(/^([A-Za-z0-9_]+):\s*(.+)$/);if(n){var r=n[2].trim().split(" "),i=n[1];t[i]={command:r[0],options:r.slice(1)}}}})),t}},44807:function(e,t,n){n.d(t,{Z:function(){return i}});var r=n(50959);function i(){return(0,r.useMemo)((function(){return function(){if("undefined"===typeof document)return!1;var e=document.createElement("input");return"webkitdirectory"in e||"mozdirectory"in e||"msdirectory"in e||"odirectory"in e||"directory"in e}()}),[])}},57370:function(e,t,n){n.d(t,{d:function(){return s}});var r=n(72006),i=n(43119),o=n(71440),a=n(24635);function l(){var e=(0,i.Z)(["\n  query CurrentUserId {\n    currentUser {\n      id\n    }\n  }\n"]);return l=function(){return e},e}var c={},u=(0,o.Ps)(l());function s(){var e,t=function(e){var t=(0,r.Z)({},c,e);return a.a(u,t)}().data;return(null===t||void 0===t||null===(e=t.currentUser)||void 0===e?void 0:e.id)||null}},5795:function(e,t,n){var r=n(50959);t.Z=function(e,t,n){r.useEffect((function(){var t=setTimeout(e,n);return function(){clearTimeout(t)}}),t)}},94488:function(e,t,n){n.d(t,{f6:function(){return c},oj:function(){return l},xZ:function(){return s}});var r=n(2272),i=n(50959),o=n(45285);function a(e){var t=(0,r.Z)(i.useState(!1),2),n=t[0],a=t[1],l=(0,o.Z)().dotReplit;return i.useEffect((function(){var t=!1;return l.getConfig().then((function(n){t||n.error||n.config.language===e&&a(!0)})),function(){t=!0}}),[e,l]),n}function l(){return a("kaboom")}function c(){return a("kaboomdraw")}var u=/^draw.[tj]s$/;function s(e){return c()&&Boolean(null===e||void 0===e?void 0:e.match(u))}},10464:function(e,t,n){function r(){return"ontouchstart"in window||navigator.maxTouchPoints>0}function i(){return!!/iPad|iPhone|iPod/.test(navigator.platform)||navigator.maxTouchPoints&&navigator.maxTouchPoints>2&&/MacIntel/.test(navigator.platform)}n.d(t,{Z:function(){return r},y:function(){return i}})},59331:function(e,t,n){n.d(t,{Z:function(){return d}});var r=n(90171),i=n.n(r),o=n(45285),a=n(50959),l=n(4561),c=n(56997),u=n(34937),s="You have unsaved changes";function d(){var e=(0,u.Z)(),t=(0,o.Z)().fs,n=(0,r.useRouter)(),d=(0,a.useRef)(!1),f=(0,a.useCallback)((function(){if(!e&&(!d.current&&t.getStatus()!==l.kO.Clean&&!window.confirm(s)))throw i().events.emit("routeChangeError"),new Error("Abort route change. Please ignore this error.")}),[t,e]);return(0,a.useEffect)((function(){var r=function(n){if(!e&&!d.current&&t.getStatus()!==l.kO.Clean)return n.preventDefault(),n.returnValue=s,s};return window.addEventListener("beforeunload",r),c.gn||n.events.on("routeChangeStart",f),function(){window.removeEventListener("beforeunload",r),c.gn||n.events.off("routeChangeStart",f)}}),[n.events,t,f,e]),function(e){return d.current=e}}},82475:function(e,t,n){n.d(t,{Z:function(){return v}});var r=n(2272),i=n(50959),o=n(72006),a=n(43119),l=n(71440),c=n(50216);function u(){var e=(0,a.Z)(["\n  mutation ReplFsUpdated($replId: String!) {\n    updateReplTimeUpdated(id: $replId) {\n      ... on Repl {\n        id\n        timeUpdated\n      }\n    }\n  }\n"]);return u=function(){return e},e}var s={},d=(0,l.Ps)(u());var f=n(12290),p=n(68825),h=n(45285);function v(){var e=(0,r.Z)(function(e){var t=(0,o.Z)({},s,e);return c.D(d,t)}(),1)[0],t=(0,h.Z)().fs,n=(0,p.Z)(),a=null===n||void 0===n?void 0:n.currentUserPermissions.containerWrite,l=null===n||void 0===n?void 0:n.id;(0,i.useEffect)((function(){if(a&&l){var n=(0,f.Z)((function(){return e({variables:{replId:l}})}),{wait:6e4,maxWait:6e5}),r=t.onStatusChange((function(){n()}));return function(){n.isScheduled()&&n.flush(),r()}}}),[t,l,a,e])}},60471:function(e,t,n){n.d(t,{T:function(){return o}});var r=n(45285),i=n(73872);function o(){var e=(0,r.Z)().toolchain;return(0,i.Z)(e.configs)}},2187:function(e,t,n){n.d(t,{Z:function(){return o}});var r=n(50959),i=n(77511);function o(){var e=(0,r.useRef)(0),t=(0,r.useState)(!1),n=t[0],o=t[1],a=(0,i.T3)(),l=window.visualViewport;return(0,r.useEffect)((function(){if(l&&a){var t=function(){var t=l.height<.8*e.current;o(t)};return e.current=l.height,l.addEventListener("resize",t),function(){l.removeEventListener("resize",t)}}}),[l,a]),n}},50910:function(e,t,n){n.d(t,{Z:function(){return d}});var r=n(72006),i=n(4405),o=n(29457),a=n(63763),l=n(45285),c=n(50959);function u(){var e=function(){var e=(0,l.Z)().container,t=(0,c.useState)(null),n=t[0],r=t[1];return(0,c.useEffect)((function(){if(e)return e.onConnectionStateChanged((function(){var t=e.getConnectionMetadata();r(t)}))}),[e]),n}();return(0,c.useMemo)((function(){return e?(0,a.he)(e.token):null}),[e])}var s=n(91926);function d(e,t){var n=u();(0,c.useEffect)((function(){var a,l,c;if(e&&t){var u="Repl"===(null===(a=e.origin)||void 0===a?void 0:a.__typename)?e.origin.id:null,d=(0,s.cR)(e.rootOriginReplUrl);return(0,o.Fy)((0,i.Z)((0,r.Z)({id:e.id,slug:e.slug,originId:u,roles:t.roles&&t.roles.map((function(e){return e.name})),rootOriginReplUrl:e.rootOriginReplUrl,rootOriginReplReleaseId:null===(l=e.source)||void 0===l||null===(c=l.release)||void 0===c?void 0:c.id},0!==d.length&&{languages:d}),{tokenCluster:null===n||void 0===n?void 0:n.cluster})),function(){(0,o.dv)()}}}),[e,t,n])}},56440:function(e,t,n){n.d(t,{C:function(){return i},w:function(){return r}});var r=function(e){var t=parseInt(e.substring(1),16);return[t>>16&255,t>>8&255,255&t]},i=function(e,t,n){return"#"+e.toString(16)+t.toString(16)+n.toString(16)}},71045:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(57135),i=n(96583),o=n(87978),a=/\(copy\)( \d+)?$/,l=/\d+$/;function c(e,t){for(var n=(0,o.r6)(e),r=(0,o.eb)(e),i=a.test(r)?e:"".concat(r," (copy)").concat(n.length>0?".".concat(n):""),c=1;c<=t.size;c++){if(!t.has(i))return i;var u=(0,o.eb)(i),s=u.split(" ");l.test(u)&&s.pop(),i="".concat(s.join(" ")," ").concat(c),n.length>0&&(i+=".".concat(n))}return i}var u=n(12583);function s(e,t){return d.apply(this,arguments)}function d(){return(d=(0,r.Z)((function(e,t){var n,r,a,l,s,d;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return n=(0,o.Il)(e),[4,t.readDir(0===n.length?u.Ql:n)];case 1:if((r=i.sent()).error)throw r.error;return a=new Set(r.children.map((function(e){return e.filename}))),l=c((0,o.UO)(e),a),s=n?"".concat(n,"/").concat(l):l,[4,t.copyFile(e,s)];case 2:if((d=i.sent()).error)throw d.error;return[2,s]}}))}))).apply(this,arguments)}},9608:function(e,t,n){n.d(t,{S:function(){return a}});var r=n(87978),i={js:"javascript",jsx:"javascript",ts:"typescript",tsx:"typescript",py:"python",go:"go"},o={rs:"rust",lsp:"lisp",sh:"bash",cpp:"c++",hs:"haskell",go:"go",rb:"ruby",md:"markdown"};function a(e){var t=(0,r.r6)(e);return Object.prototype.hasOwnProperty.call(i,t)?i[t]:Object.prototype.hasOwnProperty.call(o,t)?o[t]:t}},4385:function(e,t,n){function r(e){if(!e)return!1;try{var t=new URL(e);return Boolean(t)}catch(n){return!1}}n.d(t,{Z:function(){return r}})},64999:function(e,t,n){n.d(t,{Z:function(){return A}});var r=n(2272),i=n(74985),o=(n(50959),n(85368)),a=n(39541),l=n(63128),c=n(39137),u=n(61284),s=n(44333),d=n(82568),f=n(47161),p=n(13233),h=n(72006),v=n(43119),m=n(71440),g=n(24635),y=n(50216);function Z(){var e=(0,v.Z)(["\n  query MultiplayerInviteUrl($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        inviteUrl\n        owner {\n          ... on User {\n            id\n          }\n          ... on Team {\n            id\n            capabilities {\n              isBusinessPlan\n              hasValidSubscription\n            }\n          }\n        }\n      }\n    }\n  }\n"]);return Z=function(){return e},e}function b(){var e=(0,v.Z)(["\n  mutation MultiplayerRefreshInviteUrl($replId: String!) {\n    refreshMultiplayerInviteLink(replId: $replId) {\n      id\n      ... on Repl {\n        id\n        inviteUrl\n      }\n    }\n  }\n"]);return b=function(){return e},e}function w(){var e=(0,v.Z)(["\n  mutation DeleteMultiplayerInviteUrl($replId: String!) {\n    deleteMultiplayerInviteLink(replId: $replId) {\n      ... on Repl {\n        id\n        inviteUrl\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return w=function(){return e},e}var x={},k=(0,m.Ps)(Z());var C=(0,m.Ps)(b());var S=(0,m.Ps)(w());var T=n(14654),E=n(56029),R=n(15544),G=n(32104),I=n(76735),_=n(60566),D=n(625),B=(0,d.X)({container:[a.l0.colWithGap(12),a.l0.px(16),a.l0.pt(12),{borderTop:"solid 1px ".concat(a.TV.outlineDimmest)}],header:[a.l0.flex.row,a.l0.justify.spaceBetween],globeIconContainer:[a.l0.width(40),a.l0.height(40),a.l0.backgroundColor.accentPrimaryDimmer,a.l0.borderRadius("full"),a.l0.align.center,a.l0.justify.center],title:[a.l0.fontWeight.medium],loading:[a.l0.rowWithGap(4),a.l0.align.center],inviteUrlContainer:[a.l0.borderRadius(8),a.l0.flex.row],input:[a.l0.borderRadius(8,0,0,8),a.l0.color.foregroundDimmer],copyToClipboard:[a.l0.borderRadius(0,8,8,0)],titleGroup:[a.l0.rowWithGap(12)]}),P=function(){return(0,i.BX)(o.G,{css:B.titleGroup,children:[(0,i.tZ)(o.G,{css:B.globeIconContainer,children:(0,i.tZ)(T.Z,{color:a.TV.accentPrimaryStrongest,size:20})}),(0,i.BX)(o.G,{children:[(0,i.tZ)(u.xv,{css:B.title,id:"link-switch-label",multiline:!1,children:"Private join link"}),(0,i.tZ)(u.xv,{variant:"small",color:"dimmest",multiline:!1,children:"Anyone with this link can edit files"})]})]})};function A(e){var t,n,d,v,m,Z,b,w,T=e.replId,A=(0,p.Z)(),L=A.showConfirm,U=A.showError,X=function(e){var t=(0,h.Z)({},x,e);return g.a(k,t)}({variables:{replId:T}}),M=X.data,N=X.loading,O=X.error,F=X.refetch,W=(0,r.Z)(function(e){var t=(0,h.Z)({},x,e);return y.D(C,t)}({variables:{replId:T},onError:function(e){return U(e.message)},onCompleted:function(){return L("Join link created")}}),2),H=W[0],V=W[1],z=(0,r.Z)(function(e){var t=(0,h.Z)({},x,e);return y.D(S,t)}({variables:{replId:T},optimisticResponse:{deleteMultiplayerInviteLink:{id:T,inviteUrl:null,__typename:"Repl"},__typename:"RootMutationType"},onError:function(e){return U(e.message)},onCompleted:function(e){"UserError"!==e.deleteMultiplayerInviteLink.__typename?"Repl"===e.deleteMultiplayerInviteLink.__typename&&L("Join link deleted"):U(e.deleteMultiplayerInviteLink.message)}}),2),j=z[0],q=z[1],$="Repl"===(null===M||void 0===M||null===(t=M.repl)||void 0===t?void 0:t.__typename)?M.repl:null,Y=V.loading||q.loading,K="Repl"===(null===M||void 0===M||null===(n=M.repl)||void 0===n?void 0:n.__typename)&&"Team"===(null===$||void 0===$||null===(d=$.owner)||void 0===d?void 0:d.__typename),Q="Repl"===(null===M||void 0===M||null===(v=M.repl)||void 0===v?void 0:v.__typename)&&"Team"===(null===$||void 0===$||null===(m=$.owner)||void 0===m?void 0:m.__typename)&&(null===(Z=null===$||void 0===$?void 0:$.owner.capabilities)||void 0===Z?void 0:Z.isBusinessPlan)&&(null===(b=null===$||void 0===$?void 0:$.owner.capabilities)||void 0===b?void 0:b.hasValidSubscription),J="Repl"===(null===M||void 0===M||null===(w=M.repl)||void 0===w?void 0:w.__typename)&&(null===$||void 0===$?void 0:$.inviteUrl)?window.location.origin+(null===$||void 0===$?void 0:$.inviteUrl):null;return N||K&&!Q?null:O?(0,i.BX)(o.G,{css:B.container,children:[(0,i.BX)(o.G,{css:B.header,children:[(0,i.tZ)(P,{}),(0,i.tZ)(s.r,{isSelected:!1,isDisabled:!0,"aria-labelledby":"link-switch-label"})]}),(0,i.tZ)(f.u,{css:[a.l0.textAlign.left],icon:(0,i.tZ)(I.Z,{color:a.TV.accentNegativeStrongest}),colorway:"negative",text:"Error loading join link. Click here to try again, or contact support.",onClick:function(){return F({replId:T})}})]}):(0,i.BX)(o.G,{css:B.container,children:[(0,i.BX)(o.G,{css:B.header,children:[(0,i.tZ)(P,{}),N?(0,i.BX)(o.G,{css:B.loading,children:[(0,i.tZ)(G.Z,{color:a.TV.foregroundDimmer}),(0,i.tZ)(u.xv,{color:"dimmer",multiline:!1,children:"Loading..."})]}):(0,i.tZ)(s.r,{isSelected:!!J,isDisabled:Y,onChange:function(e){Y||(e?H():j())},"aria-labelledby":"link-switch-label"})]}),!N&&J?(0,i.BX)(i.HY,{children:[(0,i.BX)(l.Tg,{css:B.inviteUrlContainer,children:[(0,i.tZ)(c.II,{type:"url",readOnly:!0,disabled:!0,value:Y?"Loading...":J,css:B.input}),(0,i.tZ)(E.m,{textToCopy:J,onClick:function(){J?((0,_.Z)(J),(0,D.j)(D.U3.JOIN_LINK_COPIED,{replId:null===$||void 0===$?void 0:$.id,isTeamRepl:K,source:"replEnvironment"}),L("Link copied")):U("Could not copy link")},tooltip:"Copied to clipboard",text:"Copy join link",iconLeft:(0,i.tZ)(R.Z,{}),css:B.copyToClipboard,colorway:"primary",disabled:Y})]}),(0,i.tZ)(o.G,{children:(0,i.BX)(u.xv,{color:"dimmer",variant:"small",multiline:!1,children:["Want to revoke access to this link?"," ",(0,i.tZ)("a",{css:a.l0.linkStyle,role:"button",tabIndex:0,onKeyDown:function(e){if("Enter"===e.key){if(e.preventDefault(),Y)return;H()}},onClick:function(e){e.preventDefault(),Y||H()},children:"Generate a new link"})]})})]}):null]})}},96453:function(e,t,n){n.d(t,{Jh:function(){return k},RJ:function(){return E},U:function(){return w},dE:function(){return g},mH:function(){return Z},z8:function(){return S}});var r=n(72006),i=n(43119),o=n(71440),a=n(24635),l=n(50216);function c(){var e=(0,i.Z)(["\n  fragment MultiplayerManagerUser on User {\n    id\n    image\n    username\n    url\n  }\n"]);return c=function(){return e},e}function u(){var e=(0,i.Z)(["\n  fragment MultiplayerManagerEmailInviteReplPermission on ReplPermission {\n    id\n    type\n    user {\n      id\n      image\n      username\n      url\n    }\n  }\n"]);return u=function(){return e},e}function s(){var e=(0,i.Z)(["\n  query MultiplayerManager($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        isOwner\n        multiplayers {\n          ...MultiplayerManagerUser\n        }\n        currentUserPermissions {\n          editMultiplayers\n        }\n        multiplayerInvites {\n          email\n          type\n        }\n      }\n    }\n    currentUser {\n      id\n      isSubscribed\n    }\n  }\n  ","\n"]);return s=function(){return e},e}function d(){var e=(0,i.Z)(["\n  mutation MultiplayerManagerAddMultiplayerUser(\n    $replId: String!\n    $username: String!\n    $type: String!\n  ) {\n    addMultiplayerUser(replId: $replId, username: $username, type: $type) {\n      id\n      type\n      user {\n        ...MultiplayerManagerUser\n      }\n      repl {\n        id\n        multiplayers {\n          ...MultiplayerManagerUser\n        }\n        multiplayerInvites {\n          email\n          type\n        }\n      }\n    }\n  }\n  ","\n"]);return d=function(){return e},e}function f(){var e=(0,i.Z)(["\n  mutation MultiplayerManagerRemoveMultiplayerUser(\n    $replId: String!\n    $username: String!\n  ) {\n    removeMultiplayerUser(replId: $replId, username: $username) {\n      id\n      user {\n        id\n        ...MultiplayerManagerUser\n      }\n      repl {\n        id\n        multiplayers {\n          ...MultiplayerManagerUser\n        }\n      }\n    }\n  }\n  ","\n"]);return f=function(){return e},e}function p(){var e=(0,i.Z)(["\n  mutation MultiplayerManagerCreateMultiplayerInvite(\n    $replId: String!\n    $email: String!\n    $type: String!\n  ) {\n    createMultiplayerInvite2(replId: $replId, email: $email, type: $type) {\n      ... on MultiplayerInvite {\n        email\n        repl {\n          id\n          multiplayers {\n            ...MultiplayerManagerUser\n          }\n          multiplayerInvites {\n            email\n            type\n          }\n        }\n      }\n      ... on UserError {\n        message\n      }\n      ... on ReplPermission {\n        id\n        ...MultiplayerManagerEmailInviteReplPermission\n      }\n    }\n  }\n  ","\n  ","\n"]);return p=function(){return e},e}function h(){var e=(0,i.Z)(["\n  mutation MultiplayerManagerDeleteMultiplayerInvite(\n    $replId: String!\n    $email: String!\n  ) {\n    deleteMultiplayerInvite(replId: $replId, email: $email) {\n      ... on MultiplayerInvite {\n        email\n        type\n        repl {\n          id\n          multiplayers {\n            ...MultiplayerManagerUser\n          }\n          multiplayerInvites {\n            email\n            type\n          }\n        }\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return h=function(){return e},e}var v={},m=(0,o.Ps)(c()),g=(0,o.Ps)(u()),y=(0,o.Ps)(s(),m);function Z(e){var t=(0,r.Z)({},v,e);return a.a(y,t)}var b=(0,o.Ps)(d(),m);function w(e){var t=(0,r.Z)({},v,e);return l.D(b,t)}var x=(0,o.Ps)(f(),m);function k(e){var t=(0,r.Z)({},v,e);return l.D(x,t)}var C=(0,o.Ps)(p(),m,g);function S(e){var t=(0,r.Z)({},v,e);return l.D(C,t)}var T=(0,o.Ps)(h(),m);function E(e){var t=(0,r.Z)({},v,e);return l.D(T,t)}},6785:function(e,t,n){n.d(t,{_U:function(){return G},ln:function(){return I}});var r=n(2272),i=n(9970),o=n(74985),a=n(38467),l=n(13233),c=n(77511),u=n(625),s=n(30872),d=n(84563),f=n(63128),p=n(61284),h=n(85368),v=n(39541),m=n(26992),g=n(32104),y=n(90171),Z=n(50959),b=n(4821),w=n(96453),x=n(8441),k=n(13716),C=n(14709),S=n.n(C),T=n(66539),E=n(93658);function R(e,t){return t.some((function(t){return t.id===e}))}var G={root:[v.l0.color.foregroundDefault,v.l0.flex.column,v.l0.colWithGap(12),v.l0.align.stretch,v.l0.flex.growAndShrink(1)],header:[v.l0.flex.row,v.l0.justify.spaceBetween,v.l0.align.center,v.l0.px(16)],header_mobile:[v.l0.px(0)],titleContainer:[v.l0.flex.row,v.l0.rowWithGap(4),v.l0.align.center],limitsContainer:[v.l0.align.center,v.l0.rowWithGap(8)],loading:[v.l0.rowWithGap(4),v.l0.align.center,v.l0.flex.grow(1),v.l0.justify.center],measureBar:[v.l0.height(8),v.l0.width(60)],searchContainer:[v.l0.px(16),v.l0.position.relative,v.l0.maxHeight(32)],userList:[v.l0.flex.column,v.l0.colWithGap(16),v.l0.scrollbar.thin,v.l0.position.relative,v.l0.overflowY("auto"),v.l0.flex.growAndShrink(1),v.l0.pb(8),{maxHeight:300,"::-webkit-scrollbar-thumb":[v.l0.backgroundColor.backgroundHighest,v.l0.borderRadius(4)],scrollbarColor:"".concat(v.TV.backgroundDefault," ").concat(v.TV.backgroundHighest)}],userGroup:{root:[v.l0.colWithGap(8)],titleContainer:[v.l0.rowWithGap(4),v.l0.align.center,v.l0.px(16)],title:[v.l0.fontWeight.medium]},emptyContainer:[v.l0.position.relative,v.l0.flex.row,v.l0.rowWithGap(12),v.l0.py(64),v.l0.center,v.l0.px(16),{maxHeight:220,borderBottom:"solid 1px ".concat(v.TV.outlineDimmest)}]},I=function(e){var t=e.title,n=e.count,r=e.color,i=e.tooltip;return(0,o.BX)(h.G,{css:G.userGroup.titleContainer,children:[(0,o.tZ)(m.Z,{color:r,size:6}),(0,o.tZ)(p.xv,{variant:"small",css:G.userGroup.title,multiline:!1,children:t}),(0,o.tZ)(p.xv,{multiline:!1,variant:"small",color:"dimmest",css:G.userGroup.title,children:n}),i?(0,o.tZ)(T.u,{tooltip:i,children:(0,o.tZ)(E.Z,{})}):null]})};t.ZP=function(e){var t=e.replId,n=e.handleUpgradeTriggered,m=(0,y.useRouter)(),C=(0,c.Vg)(m),T=(0,l.Z)(),E=T.showConfirm,_=T.showError,D=(0,k.aG)(),B=(0,w.mH)({variables:{replId:t},pollInterval:8e3}),P=B.data,A=B.loading,L=(0,r.Z)((0,w.U)({onCompleted:function(e){var n,r=null===(n=e.addMultiplayerUser.user)||void 0===n?void 0:n.username;r&&((0,u.j)(u.U3.MULTIPLAYER_INVITED,{replId:t,inviteMethod:"username"}),E("Added @".concat(r)))}}),2),U=L[0],X=L[1],M=(0,r.Z)((0,w.z8)({update:function(e,n){var r,o=null===(r=n.data)||void 0===r?void 0:r.createMultiplayerInvite2;if(o)if("UserError"!==o.__typename){if("MultiplayerInvite"===o.__typename){var a=o.email;return(0,u.j)(u.U3.MULTIPLAYER_INVITED,{replId:t,inviteMethod:"email"}),void E("Invited ".concat(a," via email"))}if("ReplPermission"===o.__typename){var l;e.modify({id:e.identify({__typename:"Repl",id:t}),fields:{permissions:function(t){var n=e.writeFragment({data:o,fragment:w.dE});return(0,i.Z)(t).concat([n])}}});var c=null===(l=o.user)||void 0===l?void 0:l.username;if(!c)return;(0,u.j)(u.U3.MULTIPLAYER_INVITED,{replId:t,inviteMethod:"email"}),E("Invited @".concat(c))}}else _(o.message)}}),2),N=M[0],O=M[1];(0,Z.useEffect)((function(){var e=X.error||O.error;e&&(e.message.includes("reached the limit")?C?_("You have reached the invite limit for a free account, visit https://replit.com/pricing to upgrade."):n&&n(!0):_(e.message))}),[X.error,O.error,_,C,n]);var F="Repl"===(null===P||void 0===P?void 0:P.repl.__typename)?P.repl:null,W=null===P||void 0===P?void 0:P.currentUser,H=null===F||void 0===F?void 0:F.multiplayers.reduce((function(e,t){return(0,i.Z)(e).concat([t.username])}),[]),V=(null===F||void 0===F?void 0:F.currentUserPermissions.editMultiplayers)||!1,z=Boolean(F&&!F.multiplayers.length&&!F.multiplayerInvites.length),j=null===F||void 0===F?void 0:F.multiplayers.filter((function(e){return e.id!==(null===W||void 0===W?void 0:W.id)})),q=null===j||void 0===j?void 0:j.filter((function(e){return e&&R(e.id,D)})),$=null===j||void 0===j?void 0:j.filter((function(e){return e&&!R(e.id,D)})),Y=j?j.length:null;return(0,o.BX)(f.Tg,{background:"default",css:G.root,children:[(0,o.BX)(h.G,{css:[G.header,C&&G.header_mobile],children:[(0,o.tZ)(h.G,{css:G.titleContainer,children:(0,o.tZ)(p.xv,{variant:"subheadDefault",multiline:!1,children:"Multiplayers"})}),(0,o.BX)(h.G,{css:G.limitsContainer,children:[A?(0,o.BX)(h.G,{css:G.loading,children:[(0,o.tZ)(g.Z,{color:v.TV.foregroundDimmer}),(0,o.tZ)(p.xv,{color:"dimmer",multiline:!1,children:"Loading..."})]}):null,null===Y||(null===W||void 0===W?void 0:W.isSubscribed)?null:(0,o.BX)(o.HY,{children:[(0,o.BX)(p.xv,{variant:"small",color:"dimmest","aria-hidden":!0,multiline:!1,children:[Y," / ",b.z]}),(0,o.tZ)(d.J,{css:G.measureBar,total:b.z,current:Y,tooltip:"".concat(b.z-Y," free editors remaining")})]}),A||(null===W||void 0===W?void 0:W.isSubscribed)||C?null:(0,o.tZ)(a.Z,{small:!0,context:"workspace_multiplayer_header",onClickCallback:function(){n&&n(!0)},onCancel:function(){n&&n(!1)}})]})]}),V&&H&&F?(0,o.tZ)(h.G,{css:G.searchContainer,children:(0,o.tZ)(s.Z,{existingUsernames:H,onSubmit:function(e){A&&!(null===W||void 0===W?void 0:W.isSubscribed)||(!S()(e)||O.loading?X.loading||U({variables:{username:e,replId:t,type:"rw"}}):N({variables:{replId:t,email:e,type:"rw"}}))}})}):null,z?(0,o.tZ)(h.G,{css:G.emptyContainer,children:(0,o.tZ)(h.G,{children:(0,o.tZ)(p.xv,{variant:"subheadDefault",color:"dimmer",multiline:!1,children:"No one else is here"})})}):(0,o.BX)(f.Tg,{css:G.userList,children:[(null===q||void 0===q?void 0:q.length)?(0,o.BX)(h.G,{css:G.userGroup.root,children:[(0,o.tZ)(I,{title:"Online",count:q.length||0,color:v.TV.greenStrongest}),q.map((function(e){return e?(0,o.tZ)(x.Z,{isPendingInvitation:!1,replId:t,canEditMultiplayers:V,user:e},e.id):null}))]}):null,(null===$||void 0===$?void 0:$.length)?(0,o.BX)(h.G,{css:G.userGroup.root,children:[(0,o.tZ)(I,{title:"Offline",count:$.length||0,color:v.TV.outlineStrongest}),null===$||void 0===$?void 0:$.map((function(e){return e?(0,o.tZ)(x.Z,{canEditMultiplayers:V,isPendingInvitation:!1,user:e,replId:t},e.id):null}))]}):null,(null===F||void 0===F?void 0:F.multiplayerInvites.length)?(0,o.BX)(h.G,{css:G.userGroup.root,children:[(0,o.tZ)(I,{title:"Pending Invitations",count:(null===F||void 0===F?void 0:F.multiplayerInvites.length)||0,color:v.TV.outlineStrongest}),F.multiplayerInvites.map((function(e){return(0,o.tZ)(x.Z,{canEditMultiplayers:V,replId:t,isPendingInvitation:!0,email:e.email},e.email)}))]}):null]})]})}},8441:function(e,t,n){var r=n(2272),i=n(74985),o=n(9247),a=n(87076),l=n(61284),c=n(17755),u=n(85368),s=n(82568),d=n(39541),f=n(27399),p=n(80336),h=n(55923),v=n(82893),m=n.n(v),g=n(96453),y=n(13233),Z=(0,s.X)({root:[d.l0.px(16),d.l0.py(4),d.l0.flex.row,d.l0.rowWithGap(8),d.l0.align.center,d.l0.cursor.default,d.l0.justify.spaceBetween],userContainer:d.l0.color.foregroundDefault,userContainer_pending:[d.l0.flex.grow(1),d.l0.flex.row,d.l0.rowWithGap(8),d.l0.align.center,{fontStyle:"italic"}],permissionsContainer:[d.l0.flex.row,d.l0.rowWithGap(8),d.l0.align.center]});t.Z=function(e){var t,n=e.isPendingInvitation,s=e.canEditMultiplayers,v=e.replId,b=(0,y.Z)(),w=b.showError,x=b.showConfirm,k=(0,r.Z)((0,g.Jh)({onError:function(e){return w(e.message)},onCompleted:function(e){var t,n=null===(t=e.removeMultiplayerUser.user)||void 0===t?void 0:t.username;n&&x("".concat(n," removed"))}}),2),C=k[0],S=k[1],T=(0,r.Z)((0,g.RJ)({onError:function(e){return w(e.message)},onCompleted:function(e){if("UserError"!==e.deleteMultiplayerInvite.__typename){if("MultiplayerInvite"===e.deleteMultiplayerInvite.__typename){var t=e.deleteMultiplayerInvite.email;x("Invite canceled for ".concat(t))}}else w(e.deleteMultiplayerInvite.message)}}),2),E=T[0],R=T[1],G=!n,I=G?(0,i.tZ)(o.Z,{size:"m",url:e.user.image}):(0,i.tZ)(f.Z,{color:d.TV.outlineDefault,size:32}),_=G?e.user.username:e.email;return(0,i.BX)(u.G,{css:Z.root,children:[G?(0,i.tZ)(h.Z,{username:e.user.username,children:(0,i.tZ)(m(),{href:"/@".concat(e.user.username),passHref:!0,children:(0,i.tZ)(u.G,{tag:"a",css:Z.userContainer,children:(0,i.tZ)(c.n,{username:e.user.username,src:null!==(t=e.user.image)&&void 0!==t?t:null})})})}):(0,i.BX)(u.G,{css:[Z.userContainer_pending],children:[I,(0,i.tZ)(l.xv,{color:G?"default":"dimmest",multiline:!1,children:_})]}),(0,i.BX)(u.G,{css:Z.permissionsContainer,children:[(0,i.tZ)(l.xv,{color:"dimmest",variant:"small",multiline:!1,children:e.isPendingInvitation?"Invited":"Can edit"}),s?(0,i.tZ)(a.h,{alt:G?"Remove member":"Cancel invitation",onClick:function(){s&&(S.loading||R.loading||(G?C({variables:{replId:v,username:e.user.username}}):E({variables:{replId:v,email:e.email}})))},children:(0,i.tZ)(p.Z,{size:12})}):null]})]})}},42469:function(e,t,n){n.d(t,{sk:function(){return f},zq:function(){return s}});var r=n(72006),i=n(43119),o=n(71440),a=n(24635);function l(){var e=(0,i.Z)(["\n  fragment MultiplayerUsernameSearchUser on User {\n    id\n    firstName\n    lastName\n    username\n    image\n  }\n"]);return l=function(){return e},e}function c(){var e=(0,i.Z)(["\n  query MultiplayerUsernameSearch($query: String!, $limit: Int) {\n    usernameSearch(query: $query, limit: $limit) {\n      id\n      ...MultiplayerUsernameSearchUser\n    }\n  }\n  ","\n"]);return c=function(){return e},e}var u={},s=(0,o.Ps)(l()),d=(0,o.Ps)(c(),s);function f(e){var t=(0,r.Z)({},u,e);return a.a(d,t)}},30872:function(e,t,n){n.d(t,{Z:function(){return T}});var r=n(72006),i=n(4405),o=n(2272),a=n(74985),l=n(9247),c=n(84358),u=n(13233),s=n(45510),d=n(39137),f=n(63128),p=n(61284),h=n(85368),v=n(82568),m=n(39541),g=n(63837),y=n(32104),Z=n(21371),b=n(50959),w=n(56169),x=n(14709),k=n.n(x),C=n(42469),S=(0,v.X)({form:[m.l0.align.start,m.l0.display.flex,m.l0.rowWithGap(8),m.l0.width("100%")],searchContainer:[m.l0.position.relative,m.l0.flex.growAndShrink(1)],dropdownMenu:[m.l0.borderRadius(8),m.l0.overflow("hidden"),m.l0.mt(2),m.l0.zIndex(2),m.l0.border({color:m.TV.outlineDimmer,width:1,style:"solid"}),m.l0.maxHeight(280),m.l0.overflowY("auto"),m.l0.scrollbar.thin,{scrollbarColor:m.TV.backgroundHigher+" "+m.TV.backgroundHighest,"&::-webkit-scrollbar-thumb":{backgroundColor:m.TV.backgroundHighest}}],result:[m.l0.p(8),m.l0.rowWithGap(8),m.l0.justify.spaceBetween,m.l0.align.center,m.l0.cursor.pointer],result_active:[m.l0.backgroundColor.accentPrimaryDimmer],userContainer:[m.l0.rowWithGap(8),m.l0.align.center],loadingContainer:[m.l0.align.center,m.l0.m(8),m.l0.rowWithGap(8),m.l0.align.center],emptyText:[m.l0.m(8)]});function T(e){var t=e.onSubmit,n=e.existingUsernames,v=e.isDisabled,x=e.onChange,T=e.placeholder,E=(0,o.Z)(b.useState(""),2),R=E[0],G=E[1],I=(0,w.H)(),_=(0,c.Z)(R.trim().replace(/^@/,""),250),D=(0,C.sk)({skip:!_||k()(R),variables:{query:_,limit:6}}),B=D.data,P=D.loading,A=D.error,L=(0,u.Z)().showError;b.useEffect((function(){A&&L(A.message)}),[A,L]);var U=null===B||void 0===B?void 0:B.usernameSearch,X=function(e){G(e.currentTarget.value),null===x||void 0===x||x(e.currentTarget.value)},M=function(e){"Enter"===e.key&&R.match(/.+@.+/)&&(t(R),G(""),e.currentTarget.blur())};return(0,a.BX)("form",{onSubmit:function(e){e.preventDefault(),t(R),G("")},css:S.form,children:[(0,a.tZ)(Z.ZP,{onChange:function(e){e&&G(e.username)},itemToString:function(e){return(null===e||void 0===e?void 0:e.username)||""},initialHighlightedIndex:0,defaultHighlightedIndex:0,children:function(e){var t=e.getInputProps,o=e.getItemProps,c=e.getMenuProps,u=e.isOpen,s=e.highlightedIndex,v=e.getRootProps;return(0,a.BX)(h.G,(0,i.Z)((0,r.Z)({css:S.searchContainer},v({refKey:"innerRef"})),{children:[(0,a.tZ)(d.II,(0,r.Z)({id:I("username-search")},t({ref:null,value:R,onChange:X,placeholder:null!==T&&void 0!==T?T:"Add people by username or email",autoComplete:"off",onKeyDown:M}))),u?(0,a.BX)(h.G,{children:[U&&U.length?(0,a.tZ)(f.Tg,(0,i.Z)((0,r.Z)({elevated:!0,css:S.dropdownMenu,tag:"ul"},c({refKey:"innerRef"})),{children:U.map((function(e,t){return(0,a.BX)(h.G,(0,i.Z)((0,r.Z)({tag:"li"},o({item:e,index:t})),{css:[S.result,t===s&&S.result_active],children:[(0,a.BX)(h.G,{css:S.userContainer,children:[(0,a.tZ)(l.Z,{size:"m",url:e.image}),(0,a.tZ)(p.xv,{multiline:!1,children:e.username})]}),n.includes(e.username)?(0,a.tZ)(h.G,{children:(0,a.tZ)(g.Z,{color:m.TV.accentPositiveStronger})}):null]}),t)}))})):null,P?(0,a.tZ)(f.Tg,{elevated:!0,css:S.dropdownMenu,children:(0,a.BX)(h.G,{css:S.loadingContainer,children:[(0,a.tZ)(y.Z,{}),(0,a.tZ)(p.xv,{color:"dimmer",multiline:!1,children:"Loading\u2026"})]})}):null,U&&0===U.length?(0,a.tZ)(f.Tg,{elevated:!0,css:S.dropdownMenu,children:(0,a.BX)(p.xv,{css:S.emptyText,color:"dimmer",multiline:!1,children:['No results found for "',R,'"']})}):null]}):null]}))}}),(0,a.tZ)(h.G,{children:(0,a.tZ)(s.zx,{colorway:"primary",type:"submit",disabled:v||!R,text:"Invite"})})]})}},95308:function(e,t,n){n.d(t,{s:function(){return He}});var r=n(74985),i=n(18200),o=n(625),a=n(13339),l=n(57135),c=n(72006),u=n(4405),s=n(2272),d=n(96583),f=n(14366),p=n(82108),h=n(38861),v=n(4706),m=n(33066),g=n(39541),y=n(61284),Z=n(85368),b=n(39902);function w(e){var t=e.amount,n=e.includeUsd,i=e.variant,o=e.color,a=void 0===o?"default":o,l=(0,m.$E)(t),c=(0,m.H2)(t);return(0,r.BX)(Z.G,{css:[g.l0.rowWithGap(2),g.l0.align.center],children:[(0,r.tZ)(b.Z,{size:"small"===i?12:16,css:[y.E_[a]]}),(0,r.BX)(y.xv,{variant:i,color:a,multiline:!1,children:[c,n?" (".concat(l,")"):""]})]})}var x=n(31430),k=n(51631),C={boost:k.kL.Boost,hosting_tier:k.kL.HostingTier},S={boost_2cpu_2ram:k.s2.Boost_2cpu_2ram,boost_4cpu_4ram:k.s2.Boost_4cpu_4ram,boost_8cpu_8ram:k.s2.Boost_8cpu_8ram,boost_16cpu_16ram:k.s2.Boost_16cpu_16ram,hosting_tier_e2_micro:k.s2.HostingTierE2Micro,hosting_tier_e2_small:k.s2.HostingTierE2Small,hosting_tier_e2_medium:k.s2.HostingTierE2Medium,hosting_tier_n1_custom_1_4:k.s2.HostingTierN1Custom_1_4,hosting_tier_e2_standard_2:k.s2.HostingTierE2Standard_2,hosting_tier_e2_standard_4:k.s2.HostingTierE2Standard_4},T=n(24154),E=n(34393),R=n(45510),G=n(33280),I=n(87076),_=n(82568),D=n(1050),B=n(32104),P=n(8622),A=n(4648),L=n(52444),U=n(50959),X=n(14351),M=n(91861),N=n(43119),O=n(71440),F=n(33281),W=n(27081),H=n(9125);function V(){var e=(0,N.Z)(["\n  query RefetchPowerUps($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        ...MultiBoostReplPowerUps\n        ...ReplPowerUpMutationReturnFields\n      }\n    }\n    currentUser {\n      ...PowerUpMutationReturnFields\n    }\n  }\n  ","\n  ","\n  ","\n"]);return V=function(){return e},e}var z={},j=(0,O.Ps)(V(),F.s1,W.sh,W.E_);function q(e){var t=e.cycles,n=e.description;return(0,r.BX)(Z.G,{css:[g.l0.rowWithGap(8),g.l0.align.center],children:[(0,r.tZ)(y.xv,{color:"dimmest",multiline:!1,children:n}),(0,r.tZ)(G.R,{}),(0,r.tZ)(w,{amount:t,includeUsd:!1,color:"dimmest"})]})}var $=(0,_.X)({iconBackground:[g.l0.width(40),g.l0.height(40),g.l0.borderRadius(8),g.l0.justify.center,g.l0.align.center,g.l0.backgroundColor.blueDimmer],loadingContainer:[g.l0.justify.center,g.l0.align.center,g.l0.minHeight(80)]});function Y(e){var t=e.powerUpCategory,n=e.cyclesCost,o=e.description,a=i.S0[t];return(0,r.tZ)(Z.G,{css:[g.l0.colWithGap(16)],children:(0,r.BX)(Z.G,{css:[g.l0.flex.row,g.l0.justify.spaceBetween],children:[(0,r.BX)(Z.G,{css:[g.l0.rowWithGap(8),g.l0.align.center],children:[(0,r.tZ)(Z.G,{css:$.iconBackground,children:(0,r.tZ)(a.iconComponent,{size:24})}),(0,r.BX)(Z.G,{css:[g.l0.px(8),g.l0.py(2),g.l0.colWithGap(4),g.l0.justify.spaceBetween],children:[(0,r.tZ)(y.xv,{variant:"subheadDefault",multiline:!1,children:a.name}),(0,r.tZ)(y.xv,{variant:"small",color:"dimmer",multiline:!1,children:o})]})]}),(0,r.BX)(Z.G,{css:[g.l0.px(8),g.l0.py(2),g.l0.colWithGap(4),g.l0.justify.spaceBetween,g.l0.align.end],children:[(0,r.tZ)(w,{amount:n,includeUsd:!0}),(0,r.BX)(y.xv,{variant:"small",color:"dimmer",multiline:!1,children:["per / ",a.orderDuration]})]})]})})}function K(e){var t=e.product,n=e.goToCheckoutSuccess,o=e.goToNewPaymentMethodForm,a=(0,f.useStripe)(),m=(0,p.Z)({forceFetch:!0}),b=m.cycles,w=m.loading,k=(0,E.Q)(),_=k.paymentMethod,N=k.loading,O=i.S0[t.powerUpCategory],F=i.$[t.powerUpSku].provisionDescription,W=(0,U.useState)(null),V=W[0],K=W[1],Q=(0,U.useState)(!1),J=Q[0],ee=Q[1],te=(0,U.useState)(!1),ne=te[0],re=te[1],ie=(0,T.M)().createCheckoutSession,oe=(0,s.Z)(function(e){var t=(0,c.Z)({},z,e);return H.t(j,t)}({variables:{replId:t.replId}}),1)[0],ae=(0,M.B)().startPolling,le=(0,h.kr)({defaultAutoRefillEnabledValue:!0}),ce=le.autoRefillEnabled,ue=le.autoRefillMonthlyBudget,se=le.autoRefillHasError,de=le.autoRefillHasChanged,fe=le.cardAutoRefillPreferencesProps,pe=function(e){var t=e.productCost,n=e.cyclesBalance;if(t<=n)return{cyclesToBePurchased:0,cyclesBalanceAfterUpgrade:n,excessPurchaseExplanation:"no-purchase"};var r,i=t-n,o="no-excess";return i>=X.gp?(r=i,o="no-excess"):(r=X.gp,o="minimum"),{cyclesToBePurchased:r,cyclesBalanceAfterUpgrade:n+r-t,excessPurchaseExplanation:o}}({productCost:t.cyclesCostNow,cyclesBalance:null!==b&&void 0!==b?b:0}),he="This will purchase ".concat(pe.cyclesToBePurchased.toLocaleString()," Cycles for ").concat((0,X.qJ)(pe.cyclesToBePurchased)," and activate your ").concat(O.name,".");"minimum"===pe.excessPurchaseExplanation&&(he="This will purchase the minimum purchase amount of ".concat(pe.cyclesToBePurchased.toLocaleString()," Cycles for ").concat((0,X.qJ)(pe.cyclesToBePurchased)," and activate your ").concat(O.name,"."));var ve=(0,U.useState)("Processing..."),me=ve[0],ge=ve[1],ye=(0,L.i)(),Ze=ye.isPurchaseAllowed,be=ye.reasonPurchaseNotAllowed;if(!Ze&&be)return(0,r.tZ)(A.Z,{reason:be});var we=function(){ee(!1)},xe=function(){var e=(0,l.Z)((function(){return(0,d.__generator)(this,(function(e){switch(e.label){case 0:if(ee(!0),null==_)throw new Error("paymentMethod is null");if(null==a)throw new Error("stripe is null");return ge("Checking out..."),[4,ie({input:{cyclesQuantity:pe.cyclesToBePurchased,postPurchasePowerUp:{replPowerUp:{replId:t.replId,sku:S[t.powerUpSku],type:C[t.powerUpCategory]}},cyclesAutoRefillConfiguration:de?{enabled:ce,monthlyBudget:ue}:null},onError:function(e){K(e),we()},onSucceed:function(){var e=(0,l.Z)((function(e){var r,i;return(0,d.__generator)(this,(function(o){switch(o.label){case 0:return ge("Processing payment..."),[4,a.confirmCardPayment(e.clientSecret)];case 1:return(r=o.sent().error)?(K(null!==(i=r.message)&&void 0!==i?i:"An error occurred. Please try again."),we(),[2]):(ge("Provisioning Power Up..."),function(e){var r=e.checkoutSessionId;ae({checkoutSessionId:r,onSucceeded:function(){re(!0),oe(),n(t)},onFailed:function(){K("Payment failed. Please try again."),we(),oe()},onError:function(e){K(e),we(),oe()}})}({checkoutSessionId:e.checkoutSessionId}),[2])}}))}));return function(t){return e.apply(this,arguments)}}()})];case 1:return e.sent(),[2]}}))}));return function(){return e.apply(this,arguments)}}(),ke=N||w||null==b,Ce=null!=_&&!ke&&!J;return(0,r.BX)(Z.G,{css:[g.l0.colWithGap(16)],children:[(0,r.tZ)(Y,{powerUpCategory:t.powerUpCategory,cyclesCost:X.z4[t.powerUpSku],description:F}),(0,r.tZ)(G.R,{}),ke?(0,r.tZ)(Z.G,{css:$.loadingContainer,children:(0,r.tZ)(B.Z,{})}):(0,r.tZ)(Z.G,{css:[g.l0.colWithGap(12),g.l0.align.start],children:null==_?(0,r.BX)(r.HY,{children:[(0,r.tZ)(y.xv,{color:"dimmer",children:"You need to add a payment method to complete this purchase."}),(0,r.tZ)(R.zx,{iconLeft:(0,r.tZ)(P.Z,{}),text:"Add Payment Method",big:!0,onClick:o,colorway:"primary",stretch:!0})]}):(0,r.tZ)(r.HY,{children:(0,r.tZ)(Z.G,{css:[g.l0.colWithGap(16)],children:(0,r.BX)(Z.G,{css:[g.l0.colWithGap(4)],children:[(0,r.BX)(Z.G,{css:[g.l0.rowWithGap(8),g.l0.align.center],children:[(0,r.tZ)(I.h,{alt:"Update Payment Method",onClick:o,children:(0,r.tZ)(D.Z,{})}),(0,r.tZ)(v.R,{last4:_.last4})]}),(0,r.tZ)(Z.G,{css:[g.l0.pl(24),g.l0.pr(16),g.l0.colWithGap(8)],children:(0,r.tZ)(h.OK,(0,u.Z)((0,c.Z)({},fe),{loading:fe.loading||J,showSaveButton:!1}))})]})})})}),null!==_?(0,r.BX)(r.HY,{children:[(0,r.tZ)(G.R,{}),(0,r.tZ)(y.xv,{variant:"small",css:[g.l0.color.foregroundDimmer],children:he}),(0,r.tZ)(x.q,{isMakingPayment:!0,showSuccessState:ne,showProcessingState:J,disabled:!Ce||se,initialStateTextOverride:"Purchase ".concat(pe.cyclesToBePurchased.toLocaleString()," Cycles & Upgrade ").concat(O.name),processingStateTextOverride:me,big:!0,onClick:xe}),null!=V?(0,r.tZ)(y.xv,{css:[g.l0.color.accentNegativeDefault],children:V}):null,(0,r.BX)(Z.G,{css:[g.l0.colWithGap(4)],children:[(0,r.tZ)(q,{description:"Cycles balance after purchase",cycles:pe.cyclesToBePurchased}),(0,r.tZ)(q,{description:"1st ".concat(O.orderDuration," of ").concat(O.name),cycles:-1*t.cyclesCostNow}),(0,r.tZ)(q,{description:"Cycles balance after upgrade",cycles:pe.cyclesBalanceAfterUpgrade})]})]}):null]})}var Q=n(24635);function J(){var e=(0,N.Z)(["\n  query CheckOutSuccess($replId: String!) {\n    currentUser {\n      id\n      cyclesAutoRefillConfiguration {\n        ... on CyclesAutoRefillConfiguration {\n          id\n          enabled\n          refillAmount\n          monthlyBudget\n        }\n        ... on UnauthorizedError {\n          message\n        }\n      }\n    }\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        owner {\n          ... on Team {\n            id\n          }\n          ... on User {\n            id\n          }\n        }\n      }\n    }\n  }\n"]);return J=function(){return e},e}var ee={},te=(0,O.Ps)(J());var ne=n(25198),re=n(96864),ie=n(76735);function oe(e){var t=e.autoRefillEnabled;return e.loadingAutoRefill?"...":t?"on":"off"}var ae=(0,_.X)({powerUpIconBackground:[g.l0.width(32),g.l0.height(32),g.l0.borderRadius(8),g.l0.justify.center,g.l0.align.center,g.l0.backgroundColor.blueDimmer],autoRefillIconBackground:[g.l0.width(32),g.l0.height(32),g.l0.borderRadius(8),g.l0.justify.center,g.l0.align.center,g.l0.backgroundColor.greyDimmer]});function le(e){var t,n,o,a=e.product,l=e.goToCardPreferences,u=e.goToPowerUpDetails,s=(0,p.Z)({forceFetch:!0}).cycles,d=function(e){var t=(0,c.Z)({},ee,e);return Q.a(te,t)}({variables:{replId:a.replId}}),f=d.data,h=d.loading,v="CyclesAutoRefillConfiguration"===(null===f||void 0===f||null===(t=f.currentUser)||void 0===t||null===(n=t.cyclesAutoRefillConfiguration)||void 0===n?void 0:n.__typename)?f.currentUser.cyclesAutoRefillConfiguration:null,m="Repl"===(null===f||void 0===f?void 0:f.repl.__typename)&&"Team"===(null===(o=f.repl.owner)||void 0===o?void 0:o.__typename),b=Boolean(null===v||void 0===v?void 0:v.enabled),x=i.S0[a.powerUpCategory],k=i.$[a.powerUpSku];return(0,r.BX)(Z.G,{css:[g.l0.colWithGap(16)],children:[(0,r.BX)(Z.G,{css:[g.l0.rowWithGap(8),g.l0.justify.spaceBetween,g.l0.align.center],children:[(0,r.BX)(Z.G,{css:[g.l0.rowWithGap(8),g.l0.align.center],children:[(0,r.tZ)(Z.G,{css:ae.powerUpIconBackground,children:(0,r.tZ)(x.iconComponent,{size:20})}),(0,r.BX)(Z.G,{css:[g.l0.flex.column],children:[(0,r.BX)(y.xv,{multiline:!1,children:[x.name," activated"]}),(0,r.BX)(Z.G,{css:g.l0.rowWithGap(8),children:[(0,r.tZ)(y.xv,{variant:"small",color:"dimmer",multiline:!1,children:k.provisionDescription}),(0,r.BX)(Z.G,{css:[g.l0.rowWithGap(4)],children:[(0,r.tZ)(w,{amount:X.z4[a.powerUpSku],includeUsd:!0,variant:"small",color:"dimmer"}),(0,r.BX)(y.xv,{variant:"small",color:"dimmer",multiline:!1,children:["/ ",x.orderDuration]})]})]})]})]}),(0,r.tZ)(y.xv,{multiline:!1,children:(0,r.tZ)("a",{role:"button",tabIndex:0,onKeyDown:function(){return u(a.powerUpCategory)},onClick:function(){return u(a.powerUpCategory)},css:[g.l0.color.foregroundDimmer,{textDecoration:"underline"}],children:"Edit"})})]}),m||h?null:(0,r.BX)(Z.G,{css:[g.l0.rowWithGap(8),g.l0.justify.spaceBetween,g.l0.align.center],children:[(0,r.BX)(Z.G,{css:[g.l0.rowWithGap(8),g.l0.align.center],children:[(0,r.tZ)(Z.G,{css:ae.autoRefillIconBackground,children:(0,r.tZ)(re.Z,{size:20})}),(0,r.BX)(Z.G,{css:[g.l0.flex.column],children:[(0,r.BX)(y.xv,{multiline:!1,children:["Auto-Refill is"," ",oe({autoRefillEnabled:b,loadingAutoRefill:h})]}),(0,r.tZ)(Z.G,{css:g.l0.rowWithGap(4),children:null==s?(0,r.tZ)(B.Z,{}):(0,r.BX)(r.HY,{children:[(0,r.tZ)(w,{amount:s,includeUsd:!1,variant:"small",color:"dimmer"}),(0,r.tZ)(y.xv,{variant:"small",color:"dimmer",multiline:!1,children:"left"})]})})]})]}),(0,r.tZ)(y.xv,{multiline:!1,children:(0,r.tZ)("a",{role:"button",tabIndex:0,onKeyDown:function(){return l(a.powerUpCategory)},onClick:function(){return l(a.powerUpCategory)},css:[g.l0.color.foregroundDimmer,{textDecoration:"underline"}],children:"Edit"})})]}),h||b||m?null:(0,r.tZ)(ne.E,{colorway:"warning",icon:(0,r.tZ)(ie.Z,{}),text:"Add a payment method and enable Auto-Refill to prevent your ".concat(x.name," Power Up from being disabled when you run out of Cycles.")})]})}var ce=n(13961),ue=n(3652),se=n(63837),de=n(70232),fe=n(31740),pe=n(31854),he=n(63128),ve=n(43312),me=n(652),ge={tier:(0,ve.iv)([g.l0.borderRadius(12),g.l0.colWithGap(12),g.l0.p(12)]),tierHeader:(0,ve.iv)([g.l0.rowWithGap(8),g.l0.flex.grow(1),g.l0.justify.spaceBetween,g.l0.align.baseline]),tierHeaderTitle:(0,ve.iv)(g.l0.rowWithGap(8)),tierHeaderCost:(0,ve.iv)([g.l0.rowWithGap(4),g.l0.align.baseline]),tierFeatures:(0,ve.iv)(g.l0.colWithGap(8)),tierFeature:(0,ve.iv)(g.l0.rowWithGap(4),g.l0.align.center),tierPicker:(0,ve.iv)([g.l0.border({color:g.TV.outlineDefault})])},ye=function(e){var t=e.selectedOption,n=e.onChange,i=e.disabled,o=X.r4[t.sku].egress,a=["".concat(o," GiB egress"),"Deploy to any URL, cover page optional","Configurable machine","Always on"];return(0,r.BX)(he.Tg,{elevated:!0,css:ge.tier,children:[(0,r.BX)(Z.G,{css:ge.tierHeader,children:[(0,r.tZ)(Z.G,{css:ge.tierHeaderTitle,children:(0,r.tZ)(y.xv,{variant:"subheadBig",multiline:!1,children:"Reserved VM"})}),(0,r.tZ)(Z.G,{css:g.l0.rowWithGap(4),children:(0,r.BX)(Z.G,{css:[g.l0.rowWithGap(2),g.l0.align.center],children:[(0,r.tZ)(b.Z,{}),(0,r.BX)(Z.G,{css:[ge.tierHeaderCost],children:[(0,r.tZ)(y.xv,{variant:"subheadDefault",multiline:!1,children:t.cost.cyclesCostRecurring}),(0,r.tZ)(y.xv,{color:"dimmer",variant:"small",multiline:!1,children:"per day"})]})]})})]}),(0,r.tZ)(pe.P,{css:ge.tierPicker,initialSelectedItem:{title:(0,me.$)(t.sku),sku:t.sku},items:Object.keys(X.r4).map((function(e){return{title:(0,me.$)(e),sku:e}})),onChange:function(e){var t=e.sku;return n(t)},disabled:i}),(0,r.tZ)(Z.G,{css:ge.tierFeatures,children:a.map((function(e,t){return(0,r.BX)(Z.G,{css:ge.tierFeature,children:[(0,r.tZ)(se.Z,{}),(0,r.tZ)(y.xv,{multiline:!1,children:e})]},t)}))})]})},Ze=n(48330),be=n(66539),we=n(93658),xe=n(30504),ke=n(88254),Ce=n(63064),Se=n(13233),Te=n(35004),Ee=n(27942),Re=function(e){var t=e.context,n=e.selectedOption,i=e.currentOption,a=e.onBuyMoreCycles,c=e.onPowerUpUpdated,u=e.onPowerUpRequested,f=(0,Ze.Z)(),p=(0,Ce.Z)(),v=(0,Se.Z)().showError,m=(0,s.Z)(U.useState(!1),2),y=m[0],Z=m[1],b=(0,h.kr)({}).autoRefillEnabled,w=(0,s.Z)((0,Ee.IN)({onCompleted:function(){var e=(0,l.Z)((function(e){var t;return(0,d.__generator)(this,(function(r){switch(r.label){case 0:return"UserError"===(t=e.setHostingTier).__typename?(v(t.message),[2]):(Z(!0),[4,new Promise((function(e){return setTimeout(e,2e3)}))]);case 1:return r.sent(),c({type:"powerUp",powerUpCategory:"hosting_tier",powerUpSku:n.sku,cyclesCostNow:n.cost.cyclesCostNow,replId:f}),p.current,[2]}}))}));return function(t){return e.apply(this,arguments)}}(),onError:function(e){u(!1),ke.Tb(e),v(e.message)}}),2),x=w[0],C=w[1].loading;if(y)return(0,r.tZ)(R.zx,{text:"Tier Purchased",colorway:"positive",disabled:!0,loading:!0,css:{color:"".concat(g.TV.accentPositiveStronger," !important")}});var S,T=(null===i||void 0===i?void 0:i.sku)===n.sku,E=!0;switch(n.cost.explanation){case k.Ch.IncludedInExistingOrder:case k.Ch.ActivateExistingOrder:case k.Ch.SpendCycles:case k.Ch.NeedsCycles:case k.Ch.IncludedInSubscription:E=!1}return C?(E=!0,S="Processing"):T?(E=!0,S="Current tier"):S="Purchase and deploy",(0,r.tZ)(R.zx,{text:S,disabled:E,loading:C,colorway:C||!E?"primary":void 0,iconRight:C?void 0:(0,r.tZ)(Te.Z,{}),onClick:function(){var e;(u(!0),C)||(n.cost.explanation!==k.Ch.NeedsCycles?(x({variables:{input:{replId:f,sku:n.sku}}}),null!==(e=n.cost.cyclesCostNow)&&void 0!==e&&e&&((0,o.j)(o.U3.CHECKOUT_REQUESTED,{source:t,powerUpCategory:"boost"}),(0,o.j)(o.U3.CYCLES_USED,{powerUp:"hosting_tier",sku:n.sku,source:t}),(0,o.j)(o.U3.CHECKOUT_COMPLETED,{source:t,powerUpCategory:"boost",autoRefill:b}))):a({type:"powerUp",powerUpCategory:"hosting_tier",powerUpSku:n.sku,cyclesCostNow:n.cost.cyclesCostNow,replId:f}))},css:C&&{color:"".concat(g.TV.accentPrimaryStronger," !important")}})},Ge=function(e){var t=e.context,n=e.onBuyMoreCycles,i=e.onPowerUpUpdated,o=(0,Ze.Z)(),a=(0,s.Z)(U.useState("ready"),2),l=a[0],c=a[1],u=(0,s.Z)(U.useState(null),2),d=u[0],f=u[1],p=(0,s.Z)(U.useState(null),2),h=p[0],v=p[1],b=(0,s.Z)(U.useState(null),2),w=b[0],x=b[1],C=(0,Ee.s7)({fetchPolicy:"network-only",ssr:!1,variables:{replId:o},onCompleted:function(e){var t,n,r,i,o;if("Repl"===(null===e||void 0===e?void 0:e.repl.__typename)&&"ReplPowerUpTypes"===(null===(t=e.repl)||void 0===t||null===(n=t.powerUps)||void 0===n?void 0:n.__typename)&&"PowerUpCostsType"===(null===(r=e.repl)||void 0===r||null===(i=r.powerUpCosts)||void 0===i?void 0:i.__typename)){var a=null===(o=e.repl.powerUps.hostingTier)||void 0===o?void 0:o.sku,l=a||k.DZ.HostingTierE2Small,c=(0,me.i)(e.repl.powerUpCosts,a),u=(0,me.i)(e.repl.powerUpCosts,l);c&&a&&v({sku:a,cost:c}),u&&f({sku:l,cost:u}),x(e.repl.powerUpCosts)}}}).loading;if(C||!d||!w)return(0,r.tZ)(Z.G,{css:[g.l0.flex.row,g.l0.justify.center],children:(0,r.tZ)(B.Z,{})});var S=null;if("INCLUDED_IN_SUBSCRIPTION"===d.cost.explanation)S="Included in your subscription plan.";else if(d.cost.cyclesCostRecurring>0){var T=(0,m.$E)(d.cost.cyclesCostRecurring),E=(0,m.$E)(d.cost.cyclesCostRecurring*xe.Dj);S="".concat(T,"/day (Approximately ").concat(E,"/month).")}var R=null;switch(d.cost.explanation){case k.Ch.IncludedInExistingOrder:break;case k.Ch.NeedsCycles:R="You'll be able to purchase Cycles while activating.";break;case k.Ch.SpendCycles:R="Today's charge will be ".concat(d.cost.cyclesCostNow," Cycles.")}return(0,r.BX)(Z.G,{css:g.l0.colWithGap(16),children:[(0,r.tZ)(ye,{selectedOption:d,onChange:function(e){var t=(0,me.i)(w,e);t&&f({sku:e,cost:t})},disabled:"requesting"===l}),(0,r.tZ)(Z.G,{css:[g.l0.colWithGap(12)],children:(0,r.BX)(Z.G,{css:[g.l0.colWithGap(8)],children:[(0,r.BX)(Z.G,{css:[g.l0.minHeight(50),g.l0.colWithGap(16),g.l0.justify.end,g.l0.mb(16)],children:[null!=S?(0,r.tZ)(y.xv,{css:[g.l0.textAlign.center],multiline:!1,children:S}):null,null!=R?(0,r.BX)(Z.G,{css:[g.l0.rowWithGap(8),g.l0.justify.center,g.l0.color.foregroundDimmer],children:[(0,r.tZ)(y.xv,{multiline:!1,children:R}),(0,r.tZ)(be.u,{tooltip:"Upgrades and downgrades are immediate. Upgrading within a 24 hour period following a downgrade will incur a charge.",children:(0,r.tZ)(we.Z,{})})]}):null]}),(0,r.tZ)(Re,{context:t,selectedOption:d,currentOption:h,onBuyMoreCycles:n,onPowerUpUpdated:i,onPowerUpRequested:function(e){return c(e?"requesting":"ready")}})]})})]})},Ie=n(5884),_e=n(26721),De=n(88541),Be=n(34937),Pe=n(74230),Ae=n(45157),Le=(0,_.X)({self:[g.l0.flex.column]}),Ue="workspace_info_modal",Xe=function(){var e=(0,Be.Z)(),t=(0,U.useState)(!1),n=t[0],i=t[1],o=(0,Ie.Pf)({fetchPolicy:"network-only",ssr:!1,notifyOnNetworkStatusChange:!0}),a=o.data,l=o.loading,c=o.refetch,u=(0,De.P5)({controlName:"flag-buzzing-astrophage",type:"boolean",logFlagToAnalytics:!1});return(0,r.BX)(r.HY,{children:[(0,r.tZ)(Z.G,{css:Le.self,children:(0,r.tZ)(Pe.h,{loading:l,isInDesktopApp:e,data:a,setShowUpgradeModal:i,slim:!0})}),u?(0,r.tZ)(Ae.Z,{isOpen:n,context:Ue,powerUp:"storage",uponPurchaseGoTo:"workspace",onRequestClose:function(){c(),i(!1)}}):(0,r.tZ)(_e.Z,{isOpen:n,initialTab:"plans",context:Ue,uponPurchaseGoTo:"workspace",onPlanCheckoutComplete:function(){c(),i(!1)},onRequestClose:function(){i(!1)}})]})},Me=n(19102),Ne=n(85686),Oe="workspace_info_modal";function Fe(e){var t=e.powerUpCategory,n=e.goToCheckout,i=e.goToCheckoutSuccess,o=e.onRequestPowerUp,a=(0,s.Z)(U.useState(null),2),l=a[0],c=a[1];switch(t){case"boost":return(0,r.tZ)(fe.Z,{isCheckoutFlow:!0,powerUp:t,onPowerUpUpdated:i,onBuyMoreCycles:n,context:Oe});case"hosting_tier":return(0,r.tZ)(Ge,{context:"workspace_hosting_pane",onPowerUpUpdated:i,onBuyMoreCycles:n});case"storage":return(0,r.tZ)(Xe,{});case"always-on":return(0,r.BX)(r.HY,{children:[(0,r.tZ)(_e.Z,{initialTab:"default",isOpen:l===Ne.x.BuyCycles,onRequestClose:function(){return c(null)},uponPurchaseGoTo:"workspace",context:Oe}),(0,r.tZ)(Me.Z,{onRequestBuyMore:function(){return c(Ne.x.BuyCycles)},powerUp:"always-on",context:Oe,onRequestPowerUp:o})]});case"gpu":return(0,r.BX)(r.HY,{children:[(0,r.tZ)(_e.Z,{initialTab:"default",isOpen:l===Ne.x.BuyCycles,onRequestClose:function(){return c(null)},uponPurchaseGoTo:"workspace",context:Oe}),(0,r.tZ)(Me.Z,{onRequestBuyMore:function(){return c(Ne.x.BuyCycles)},powerUp:"gpu",context:Oe,onRequestPowerUp:o})]});default:throw new Error("Unknown power up category: ".concat(t))}}function We(e){var t=e.title,n=e.children,i=e.goBack,o=e.canGoBack,a=e.allowBack,l=void 0===a||a;return(0,r.BX)(r.HY,{children:[(0,r.BX)(Z.G,{css:[g.l0.rowWithGap(8),g.l0.p(8),g.l0.align.center],children:[l&&o?(0,r.tZ)(I.h,{alt:"Back",tooltipHidden:!0,onClick:function(){return i()},children:(0,r.tZ)(ue.Z,{})}):null,"string"===typeof t?(0,r.tZ)(y.xv,{variant:"subheadDefault",multiline:!1,children:t}):t]}),(0,r.tZ)(Z.G,{css:[g.l0.colWithGap(8),g.l0.p(8)],children:n})]})}function He(e){var t=e.currentStep,n=e.goBack,l=e.canGoBack,c=e.goTo,u=e.analyticsContext,s=e.onRequestPowerUp;switch(t.step){case"power_up_details":var d=t.powerUpCategory,f=i.S0[d];return(0,r.tZ)(We,{goBack:n,canGoBack:l,title:f.name,children:(0,r.tZ)(Fe,{powerUpCategory:d,goToCheckout:function(e){c({step:"checkout",product:e}),(0,o.j)(o.U3.CHECKOUT_REQUESTED,{source:u,powerUpCategory:d})},goToCheckoutSuccess:function(e){c({step:"checkout_success",product:e})},onRequestPowerUp:s})});case"checkout":return(0,r.tZ)(We,{goBack:n,canGoBack:l,title:"Checkout",children:(0,r.tZ)(K,{product:t.product,goToCheckoutSuccess:function(e){c({step:"checkout_success",product:e})},goToNewPaymentMethodForm:function(){return c({step:"new_payment_method_form"})},context:u})});case"checkout_success":return(0,r.tZ)(We,{goBack:n,canGoBack:l,allowBack:!1,title:(0,r.BX)(Z.G,{css:[g.l0.rowWithGap(8),g.l0.align.center],children:[l?(0,r.tZ)(I.h,{tooltipHidden:!0,alt:"Back",onClick:function(){return n()},children:(0,r.tZ)(ue.Z,{})}):null,(0,r.tZ)(y.xv,{multiline:!1,css:[g.l0.color.accentPositiveStronger],children:"Success"}),(0,r.tZ)(se.Z,{color:g.TV.accentPositiveStronger})]}),children:(0,r.tZ)(le,{product:t.product,goToCardPreferences:function(e){return c({step:"card_preferences",powerUpCategory:e})},goToPowerUpDetails:function(e){return c({step:"power_up_details",powerUpCategory:e})}})});case"card_preferences":var p=t.powerUpCategory;return(0,r.tZ)(We,{goBack:n,canGoBack:l,title:"Card Preferences",children:(0,r.tZ)(a.t,{goToNewPaymentMethodForm:function(){return c({step:"new_payment_method_form",powerUpCategory:p})}})});case"new_payment_method_form":var h=t.powerUpCategory;return(0,r.tZ)(We,{goBack:n,canGoBack:l,title:"Update Payment Method",children:(0,r.tZ)(ce.q,{onSuccess:function(){return l&&n()},powerUpCategory:h,context:u})});case"not_shown":throw new Error("This step should never be rendered");default:(0,de.Z)(t)}}},13339:function(e,t,n){n.d(t,{t:function(){return Z}});var r=n(72006),i=n(74985),o=n(38861),a=n(4706),l=n(34393),c=n(45510),u=n(87076),s=n(25198),d=n(85368),f=n(82568),p=n(39541),h=n(8622),v=n(1050),m=n(32104),g=n(76735),y=(0,f.X)({self:[p.l0.colWithGap(16)],paymentMethodContainer:[p.l0.colWithGap(16)],addPaymentMethodContainer:[p.l0.colWithGap(6)],loadingContainer:[p.l0.justify.center,p.l0.align.center,p.l0.minHeight(80)]});function Z(e){var t=e.goToNewPaymentMethodForm,n=e.onPreferencesUpdated,f=(0,l.Q)(),Z=f.paymentMethod,b=f.loading,w=f.error,x=(0,o.kr)({defaultAutoRefillEnabledValue:!1,onAutoRefillPreferencesUpdated:function(){n&&n()}}).cardAutoRefillPreferencesProps;return b||null!=w?(0,i.tZ)(d.G,{css:y.loadingContainer,children:(0,i.tZ)(m.Z,{})}):(0,i.BX)(d.G,{css:y.self,children:[null!=Z?(0,i.BX)(d.G,{css:y.paymentMethodContainer,children:[(0,i.BX)(d.G,{css:[p.l0.rowWithGap(8),p.l0.align.center],children:[(0,i.tZ)(u.h,{alt:"Update Payment Method",onClick:t,children:(0,i.tZ)(v.Z,{})}),(0,i.tZ)(a.R,{last4:Z.last4})]}),(0,i.tZ)(o.OK,(0,r.Z)({},x))]}):null," ",null==Z?(0,i.BX)(d.G,{css:y.addPaymentMethodContainer,children:[(0,i.tZ)(s.E,{colorway:"warning",icon:(0,i.tZ)(g.Z,{}),text:"Add a payment method and enable Auto-Refill to prevent your Power Ups from being disabled when you run out of Cycles."}),(0,i.tZ)(c.zx,{text:"Add Payment Method",iconLeft:(0,i.tZ)(h.Z,{}),onClick:t})]}):null]})}},66195:function(e,t,n){n.d(t,{P:function(){return o}});var r=n(9970),i=n(50959);function o(e){var t=(0,i.useState)(e),n=t[0],o=t[1],a=(0,i.useState)([]),l=a[0],c=a[1],u=(0,i.useCallback)((function(e){c((0,r.Z)(l).concat([n])),o(e)}),[l,c,n,o]),s=(0,i.useCallback)((function(){var e=l.pop();c(l),e&&o(e)}),[l,c,o]);return{currentStep:n,goTo:u,goBack:s,canGoBack:l.length>0}}},90024:function(e,t,n){n.d(t,{FW:function(){return p},NH:function(){return m}});var r=n(72006),i=n(43119),o=n(71440),a=n(3481),l=n(84757),c=n(24635);function u(){var e=(0,i.Z)(["\n  fragment PublishReplData on Repl {\n    id\n    url\n    title\n    description\n    iconUrl\n    lastPublishedAt\n    publishedAs\n    imageUrl\n    isRenamed\n    templateInfo {\n      iconUrl\n    }\n    replViewSettings {\n      id\n      defaultView\n      replImage\n      replFile\n    }\n    tags {\n      id\n      isOfficial\n    }\n    currentUserPermissions {\n      containerWrite\n      publish\n      changeIconUrl\n    }\n    ...CrosisContextRepl\n    ...PublishedReplShareInfoReplData\n  }\n  ","\n  ","\n"]);return u=function(){return e},e}function s(){var e=(0,i.Z)(["\n  fragment PublishCurrentUser on CurrentUser {\n    id\n    image\n    isTemplateDeveloper: hasRole(role: TEMPLATE_DEVELOPER)\n    ...CrosisContextCurrentUser\n  }\n  ","\n"]);return s=function(){return e},e}function d(){var e=(0,i.Z)(["\n  query PublishCurrentUser {\n    currentUser {\n      id\n      ...PublishCurrentUser\n    }\n  }\n  ","\n"]);return d=function(){return e},e}var f={},p=(0,o.Ps)(u(),a.C,l.B),h=(0,o.Ps)(s(),a.D),v=(0,o.Ps)(d(),h);function m(e){var t=(0,r.Z)({},f,e);return c.a(v,t)}},70196:function(e,t,n){n.d(t,{e9:function(){return p},wd:function(){return d}});var r=n(72006),i=n(43119),o=n(71440),a=n(84757),l=n(24635);function c(){var e=(0,i.Z)(["\n  fragment PublishReleaseFormRepl on Repl {\n    id\n    title\n    description\n    slug\n    user {\n      username\n    }\n    ...PublishedReplShareInfoReplData\n    deployment {\n      id\n      activeRelease {\n        id\n      }\n    }\n    releases {\n      items {\n        id\n        timeCreated\n        description\n      }\n    }\n  }\n  ","\n"]);return c=function(){return e},e}function u(){var e=(0,i.Z)(["\n  query PublishReleaseFormCurrentUser {\n    currentUser {\n      id\n      username\n    }\n  }\n"]);return u=function(){return e},e}var s={},d=(0,o.Ps)(c(),a.B),f=(0,o.Ps)(u());function p(e){var t=(0,r.Z)({},s,e);return l.a(f,t)}},84757:function(e,t,n){n.d(t,{B:function(){return o}});var r=n(43119);function i(){var e=(0,r.Z)(["\n  fragment PublishedReplShareInfoReplData on Repl {\n    id\n    url\n    publishedAs\n    title\n  }\n"]);return i=function(){return e},e}var o=(0,n(71440).Ps)(i())},80866:function(e,t,n){n.d(t,{Z:function(){return S}});var r=n(57135),i=n(96583),o=n(74985),a=(n(50959),n(39137)),l=n(85368),c=n(61284),u=n(39541),s=n(45510),d=n(25198),f=n(56169),p=n(51631),h=n(12318),v=n(76735),m=n(35207),g=n(625),y=n(22642),Z=n(33594),b=(0,n(82568).X)({content:[u.l0.p(8),u.l0.colWithGap(16)],section:[u.l0.colWithGap(8)]});function w(e){var t=e.header;return(0,o.tZ)(Z.Q,{headerContent:t,children:(0,o.BX)(l.G,{css:b.content,children:[(0,o.BX)(l.G,{css:b.section,children:[(0,o.tZ)(c.xv,{multiline:!1,children:"Bold Text"}),(0,o.tZ)(c.xv,{color:"dimmer",multiline:!1,children:"**bold**"})]}),(0,o.BX)(l.G,{css:b.section,children:[(0,o.tZ)(c.xv,{multiline:!1,children:"Italic Text"}),(0,o.tZ)(c.xv,{color:"dimmer",multiline:!1,children:"__italic__"})]}),(0,o.BX)(l.G,{css:b.section,children:[(0,o.tZ)(c.xv,{multiline:!1,children:"Links"}),(0,o.tZ)(c.xv,{color:"dimmer",multiline:!1,children:"[Link Name](https://yourlink.com)"})]}),(0,o.BX)(l.G,{css:b.section,children:[(0,o.tZ)(c.xv,{multiline:!1,children:"Images"}),(0,o.tZ)(c.xv,{color:"dimmer",multiline:!1,children:"![Image alt text](https://linktoyourimage.com)"})]}),(0,o.BX)(l.G,{css:b.section,children:[(0,o.tZ)(c.xv,{multiline:!1,children:"Header Text"}),(0,o.tZ)(c.xv,{color:"dimmer",multiline:!1,children:"# Header"})]}),(0,o.BX)(l.G,{css:[u.l0.colWithGap(8)],children:[(0,o.tZ)(c.xv,{multiline:!1,children:"Code Blocks"}),(0,o.BX)(c.xv,{color:"dimmer",multiline:!1,children:["```",(0,o.tZ)("br",{}),"this is for large, multiline code blocks",(0,o.tZ)("br",{}),"```"]})]}),(0,o.BX)(l.G,{css:[u.l0.colWithGap(8)],children:[(0,o.tZ)(c.xv,{multiline:!1,children:"Inline Code"}),(0,o.tZ)(c.xv,{color:"dimmer",multiline:!1,children:"`this is for code in the middle of sentences`"})]}),(0,o.BX)(l.G,{css:[u.l0.colWithGap(8)],children:[(0,o.tZ)(c.xv,{multiline:!1,children:"Horizontal Rules"}),(0,o.tZ)(c.xv,{color:"dimmer",multiline:!1,children:"***"})]})]})})}var x=l.K.form;function k(e){return 0===e.trim().length?{message:"You cannot leave this empty."}:e.length>100?{message:"The title should not be longer than ".concat(100," characters.")}:void 0}function C(e){return 0===e.trim().length?{message:"You cannot leave this empty."}:e.length>5e3?{message:"The description should not be longer than ".concat(5e3," characters.")}:void 0}function S(e){var t,n,Z=e.repl,b=e.source,S=e.onDone,T=(0,f.H)(),E=T("titleIdInput"),R=T("descriptionIdInput"),G=(0,h.Y)("",k),I=(0,h.Y)("",C),_=(0,m.O)();return(0,o.BX)(x,{onSubmit:function(){var e=(0,r.Z)((function(e){return(0,i.__generator)(this,(function(t){switch(t.label){case 0:return e.preventDefault(),G.validate()||I.validate()?[2]:[4,_.publish({input:{replId:Z.id,title:G.value,body:I.value}})];case 1:return t.sent().error||((0,g.j)(g.U3.UPDATE_SHARED,{source:b,replType:Z.publishedAs===p.O2.Template?"template_repl":"regular_repl"}),S()),[2]}}))}));return function(t){return e.apply(this,arguments)}}(),css:[u.l0.colWithGap(16)],children:[(0,o.tZ)(c.h4,{level:1,variant:"headerDefault",children:"Add an update"}),(0,o.BX)(c.xv,{multiline:!1,children:["Explain what has changed about this"," ",Z.publishedAs===p.O2.Template?"Template":"Repl","."]}),(0,o.BX)(l.G,{css:u.l0.colWithGap(8),children:[(0,o.BX)(l.G,{css:u.l0.colWithGap(4),children:[(0,o.tZ)("label",{css:u.l0.color.foregroundDimmer,htmlFor:E,children:"Title"}),(0,o.tZ)(a.II,{id:E,onChange:function(e){G.setValue(e.target.value)},disabled:_.loading,placeholder:"Give your post a title"})]}),G.error?(0,o.tZ)(d.E,{icon:(0,o.tZ)(v.Z,{}),text:null===(t=G.error)||void 0===t?void 0:t.message,colorway:"negative"}):null]}),(0,o.BX)(l.G,{css:u.l0.colWithGap(8),children:[(0,o.BX)(l.G,{css:u.l0.colWithGap(4),children:[(0,o.tZ)("label",{css:u.l0.color.foregroundDimmer,htmlFor:R,children:"Description"}),(0,o.tZ)(a.B,{id:R,onChange:function(e){I.setValue(e.target.value)},css:[u.l0.width("100%"),{minHeight:u.TV.space128,maxHeight:u.TV.space256,resize:"vertical",lineHeight:u.TV.lineHeightDefault}],disabled:_.loading,placeholder:"Write something about this post"})]}),I.error?(0,o.tZ)(d.E,{icon:(0,o.tZ)(v.Z,{}),text:null===(n=I.error)||void 0===n?void 0:n.message,colorway:"negative"}):null]}),(0,o.tZ)(w,{header:"Style your description with Markdown"}),_.error?(0,o.tZ)(d.E,{icon:(0,o.tZ)(v.Z,{}),colorway:"negative",text:_.error}):null,(0,o.tZ)(s.zx,{text:_.loading?"Sharing update...":"Share update",type:"submit",colorway:"primary",disabled:Boolean(_.loading||G.error||I.error),css:{alignSelf:"end"},iconLeft:(0,o.tZ)(y.Z,{})})]})}},35207:function(e,t,n){n.d(t,{O:function(){return v}});var r=n(57135),i=n(2272),o=n(96583),a=n(72006),l=n(43119),c=n(71440),u=n(90024),s=n(50216);function d(){var e=(0,l.Z)(["\n  mutation PublishReplCreatePost($input: CreateReplPost2Input!) {\n    createReplPost2(input: $input) {\n      ... on Post {\n        id\n        repl {\n          id\n          ...PublishReplData\n        }\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return d=function(){return e},e}var f={},p=(0,c.Ps)(d(),u.FW);function h(e){var t,n,r,i,o,a,l;return e.error?e.error.message||"Something went wrong publishing your Repl":"NotFoundError"===(null===(t=e.data)||void 0===t||null===(n=t.createReplPost2)||void 0===n?void 0:n.__typename)||"UnauthorizedError"===(null===(r=e.data)||void 0===r||null===(i=r.createReplPost2)||void 0===i?void 0:i.__typename)||"UserError"===(null===(o=e.data)||void 0===o||null===(a=o.createReplPost2)||void 0===a?void 0:a.__typename)?e.data.createReplPost2.message:(null===(l=e.data)||void 0===l?void 0:l.createReplPost2)&&"Post"!==e.data.createReplPost2.__typename?"Something went wrong publishing your Repl":void 0}function v(){var e=(0,i.Z)(function(e){var t=(0,a.Z)({},f,e);return s.D(p,t)}(),2),t=e[0],n=e[1],l=function(){var e=(0,r.Z)((function(e){var r,i;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:if(r=e.input,n.loading)return[2,{data:null,error:null}];o.label=1;case 1:return o.trys.push([1,3,,4]),[4,t({variables:{input:r}})];case 2:return[2,{data:(i=o.sent()).data,error:h(i)}];case 3:return o.sent(),[2,{data:null,error:"Something went wrong publishing your Repl"}];case 4:return[2]}}))}));return function(t){return e.apply(this,arguments)}}();return{publish:l,data:n.data,loading:n.loading,error:h(n)}}},38453:function(e,t,n){n.d(t,{Z:function(){return p},_:function(){return m}});var r=n(2272),i=n(74985),o=n(48306),a=n.n(o),l=n(50959),c=n(19065),u=n(35301),s=n(66482),d=n(27522),f=n(39541);function p(e){var t=(0,r.Z)(l.useState(!1),2),n=t[0],o=t[1],a=[],s=[];if(e.variables.length>0){var f=e.variables[0].parentVariableReference,p=!0,h=!1,v=void 0;try{for(var g,y=e.variables[Symbol.iterator]();!(p=(g=y.next()).done);p=!0){var Z=g.value;Z.parentVariableReference===f?a.push(Z):s.push(Z)}}catch(b){h=!0,v=b}finally{try{p||null==y.return||y.return()}finally{if(h)throw v}}}return(0,i.BX)(i.HY,{children:[(0,i.tZ)(c.Z,{truncate:!0,level:5,children:"Variables"}),(0,i.BX)(u.gC,{align:"stretch",constrainWidth:!0,children:[a.map((function(t){return(0,i.tZ)(m,{depth:0,variable:t,client:e.client},t.parentVariableReference+"/"+t.name)})),s.length>0&&(0,i.BX)(i.HY,{children:[(0,i.BX)(d.Z,{filled:!1,border:!1,onClick:function(){return o((function(e){return!e}))},children:["See ",n?"Less":"More"]}),n&&s.map((function(t){return(0,i.tZ)(m,{depth:0,variable:t,client:e.client},t.parentVariableReference+"/"+t.name)}))]})]})]})}function h(e){var t=e.variable,n=e.expanded;return t.variablesReference>0?(0,i.tZ)("div",{css:[f.l0.transition.snappy,{transform:"rotate(".concat(n?0:-90,"deg)")}],children:(0,i.tZ)(s.Z,{})}):null}function v(e){var t=e.expanded,n=e.depth,r=e.variable;return 0===n&&!("parentVariableReference"in r)?(0,i.tZ)(h,{expanded:t,variable:r}):(0,i.tZ)("div",{css:[f.l0.flex.grow(0),f.l0.flex.shrink(0),f.l0.width(f.TV.space16),f.l0.display.flex,f.l0.align.center,f.l0.justify.end],children:(0,i.tZ)(h,{expanded:t,variable:r})})}function m(e){var t=e.depth,n=e.variable,o=e.client,c=(0,r.Z)(l.useState(!1),2),s=c[0],d=c[1],f=(0,r.Z)(l.useState([]),2),p=f[0],h=f[1];return l.useEffect((function(){s&&o.fetchVariables(n.variablesReference).then((function(e){return h(e)}),(function(){return d(!1)}))}),[s,o,n.variablesReference]),(0,i.BX)(i.HY,{children:[(0,i.BX)("div",{onClick:function(){n.variablesReference>0&&d((function(e){return!e}))},className:a().dynamic([["d2db4fbc08fcf9b",[t]]])+" variable",children:[(0,i.tZ)(v,{expanded:s,variable:n,depth:t}),(0,i.BX)("div",{className:a().dynamic([["d2db4fbc08fcf9b",[t]]])+" label",children:[n.name,n.type?(0,i.BX)("span",{className:a().dynamic([["d2db4fbc08fcf9b",[t]]])+" type",children:[" ",n.type]}):null,""!==n.value&&": "]}),(0,i.tZ)("div",{className:a().dynamic([["d2db4fbc08fcf9b",[t]]])+" label value",children:(0,i.tZ)("pre",{className:a().dynamic([["d2db4fbc08fcf9b",[t]]]),children:n.value})})]}),s?(0,i.tZ)(u.gC,{align:"stretch",constrainWidth:!0,children:p.map((function(e){return(0,i.tZ)(m,{depth:t+1,variable:e,client:o},"parentVariableReference"in e?e.parentVariableReference+"/"+e.name:e.name)}))}):null,(0,i.tZ)(a(),{id:"d2db4fbc08fcf9b",dynamic:[t],children:".variable.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;max-width:100%;height:var(--space-32);min-height:var(--space-32);cursor:pointer;color:var(--foreground-dimmer);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);font-size:var(--font-size-default);padding-left:-webkit-calc(".concat(t," * var(--space-16));padding-left:-moz-calc(").concat(t," * var(--space-16));padding-left:calc(").concat(t," * var(--space-16));font-family:var(--font-family-code)}.variable.__jsx-style-dynamic-selector:hover{background-color:var(--background-higher);color:var(--foreground-default)}.label.__jsx-style-dynamic-selector{font-size:var(--font-size-default);padding-left:var(--space-8);padding-right:var(--space-8);overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis;white-space:nowrap;-webkit-box-flex:1;-webkit-flex:1 0 auto;-moz-box-flex:1;-ms-flex:1 0 auto;flex:1 0 auto}.type.__jsx-style-dynamic-selector{opacity:.5}.value.__jsx-style-dynamic-selector{text-align:right;-webkit-flex-shrink:1;-ms-flex-negative:1;flex-shrink:1}")})]})}},49770:function(e,t,n){n.d(t,{KB:function(){return jn},gC:function(){return Et},T0:function(){return vt},Xo:function(){return Bi},CC:function(){return ki},ex:function(){return Di},uD:function(){return Li},_F:function(){return Ai},DR:function(){return Ti},FQ:function(){return go},N8:function(){return ji},lY:function(){return _o},ii:function(){return ho},lz:function(){return di},Z0:function(){return Mi},kr:function(){return Go},m$:function(){return _i},x:function(){return ci},Gt:function(){return yi},m2:function(){return Ho},nC:function(){return Fo},WL:function(){return fi},L7:function(){return Wo},nG:function(){return gi},k:function(){return Uo},rU:function(){return mi},oL:function(){return Lo},TO:function(){return Oi},BN:function(){return wo},Eh:function(){return fo},LR:function(){return ro},cT:function(){return Fi},o3:function(){return no},cr:function(){return Pi},Jy:function(){return oo},rX:function(){return Ui},Yg:function(){return Si},Un:function(){return Ro},xs:function(){return ai},x7:function(){return ui},Lo:function(){return eo},je:function(){return Ei},hx:function(){return lo},e$:function(){return Ri},JW:function(){return uo},km:function(){return po},CA:function(){return Yi},Vu:function(){return hi},Ge:function(){return Ki},ec:function(){return pi},s7:function(){return Vi},qg:function(){return oi},qV:function(){return co},R5:function(){return Zo},q6:function(){return $i},FZ:function(){return bo},N2:function(){return vi},L0:function(){return Ao},V5:function(){return Po},ZW:function(){return wi},ts:function(){return bi},HW:function(){return xi},zs:function(){return so},Kt:function(){return Hi},A:function(){return Wi},lI:function(){return xo},Fg:function(){return io},Fh:function(){return mo},cu:function(){return yo},n7:function(){return Gi},ze:function(){return Ji},TN:function(){return Zi},Av:function(){return Ii},VD:function(){return Ni},ne:function(){return si},eM:function(){return to},Id:function(){return Bo},y8:function(){return ao},$x:function(){return Eo},yR:function(){return To},Ap:function(){return Oo},$P:function(){return No},Bd:function(){return ko},Hb:function(){return vo},OO:function(){return Qi},H7:function(){return Ci},gQ:function(){return So},MG:function(){return Do},Z9:function(){return li},HM:function(){return Xi},MI:function(){return Bn}});var r=n(2272),i=n(18171),o=n(86763),a=n.n(o),l=n(91398),c=n(74985),u=n(50959),s=n(92683),d=n(82325),f=n(13525),p=n(92674),h=n.n(p),v=n(92508);function m(e){if("number"!==typeof e)throw new Error("Expected number")}function g(e){if("string"!==typeof e)throw new Error("Expected string")}function y(e){if(g(e.type),m(e.percent),"paneGroup"!==e.type){if("split"===e.type)return function(e){if("boolean"!==typeof e)throw new Error("Expected boolean")}(e.stacked),function(e){if(!Array.isArray(e.children))throw new Error("Expected children")}(e),void e.children.forEach(y);throw new Error("Invalid pane type: "+e.type)}if(g(e.id),!Array.isArray(e.panes))throw new Error("Expected panes array");e.panes.map(g)}function Z(e,t){if(!Array.isArray(e.floating))throw new Error("Expected floating");e.floating.forEach((function(e){if(g(e.id),"floatingPaneGroup"!==e.type)throw new Error("Expected floatingPaneGroup type");if(!Array.isArray(e.panes))throw new Error("Expected panes array");!function(e){[e.x,e.y,e.width,e.height].forEach(m)}(e.rect),e.panes.forEach((function(e){if(g(e),!t.includes(e))throw new Error("Unrecognized id")}))})),e.tiling&&y(e.tiling)}function b(e){if("object"!==typeof e)throw new Error("Expected object");if(!v.v[e.type])throw new Error("Expected valid pane, got: ".concat(e.type))}function w(e){!function(e){if("object"!==typeof e)throw new Error("Expected object");Object.values(e).map(b)}(e.data),Z(e.layout,Object.keys(e.data)),void 0!==e.sidebarPercent&&function(e){if("number"!==typeof e)throw new Error("Expected number");if(e<0)throw new Error("Expected positive number");if(e>100)throw new Error("Expected number less than 100")}(e.sidebarPercent)}var x=n(92153),k=n(55749),C=n(9970),S=n(19692);function T(e,t){var n=(0,k.Z)(t),r=n[0],i=n.slice(1);if("floating"===r){if(!e.floating)return null;var o=i[0];if("number"!==typeof o)throw new Error("Expected floatingIndex");var a=e.floating[o];if(!a)throw new Error("Expected paneGroup");return a}if("tiling"!==r)throw new Error("Expected tiling path");var l=e.tiling;if(!l)return null;var c=l,u=i.length,s=0,d=!0,f=!1,p=void 0;try{for(var h,v=i[Symbol.iterator]();!(d=(h=v.next()).done);d=!0){var m=h.value;if("paneGroup"===c.type)break;if("number"!==typeof m)throw new Error("Expected number");s++,c=c.children[m]}}catch(g){f=!0,p=g}finally{try{d||null==v.return||v.return()}finally{if(f)throw p}}return u===s?c:null}function E(e,t){var n=e.floating.find((function(e){return e.panes.includes(t)}));if(n)return{index:n.panes.indexOf(t),paneGroup:n,paneGroupPath:["floating",e.floating.indexOf(n)],floating:!0};var r=e.tiling;if(!r)return null;for(var i=[{paneGroupPath:["tiling"],parent:null,grandparent:null,node:r}];i.length;){var o=i.shift();if(!o)throw new Error("Expected item");if("split"===o.node.type){var a=!0,l=!1,c=void 0;try{for(var u,s=o.node.children[Symbol.iterator]();!(a=(u=s.next()).done);a=!0){var d=u.value;i.push({grandparent:o.parent,parent:o.node,node:d,paneGroupPath:(0,C.Z)(o.paneGroupPath).concat([o.node.children.indexOf(d)])})}}catch(f){l=!0,c=f}finally{try{a||null==s.return||s.return()}finally{if(l)throw c}}}else if(o.node.panes.includes(t))return{paneGroupPath:o.paneGroupPath,paneGroup:o.node,parent:o.parent,grandparent:o.grandparent,index:o.node.panes.indexOf(t),floating:!1}}return null}function R(e,t,n){if("paneGroup"===e.type)return{paneGroup:e,path:n};var r=0,i=e.children.length-1;return"topRight"!==t||e.stacked?("bottomRight"===t||"bottomLeft"===t&&e.stacked)&&(r=i):r=i,R(e.children[r],t,(0,C.Z)(n).concat([r]))}function G(e,t){var n=e.tiling;return n?R(n,t,["tiling"]):null}function I(e,t){var n=e.tiling,r=e.floating,i=(0,C.Z)(r);for(n&&i.push(n);i.length;){var o,a=i.shift();if(!a)throw new Error("Expected item");if("split"===a.type)(o=i).push.apply(o,(0,C.Z)(a.children));else if(a.id===t)return a}return null}function _(e,t){var n=function(){var e=o.shift();if(!e)throw new Error("Expected item");var n=(0,r.Z)(e,2),i=n[0],a=n[1];return"split"!==i.type?"continue":i.children.some((function(e){return"paneGroup"===e.type&&e.id===t}))?{v:{node:i,path:a}}:void i.children.forEach((function(e,t){o.push([e,(0,C.Z)(a).concat([t])])}))},i=e.tiling;if(null===i)return null;for(var o=[[i,["tiling"]]];o.length;){var a=n();if("object"===(0,S.Z)(a))return a.v}return null}function D(e,t){var n=E(e,t);if("paneGroup"===(null===n||void 0===n?void 0:n.paneGroup.type)){var r=_(e,n.paneGroup.id);if(r){var i=r.node.children,o=i.indexOf(n.paneGroup);return o<i.length-1?i[o+1]:i[o-1]}}return null}function B(e){if(e.length<1)throw new Error("Expected a path with a parent");return e.slice(0,-1)}function P(e){return"floatingPaneGroup"!==e.type}function A(e,t){e.panes.splice(t,1),0!==e.activeIndex&&(t>e.activeIndex||(e.activeIndex=e.activeIndex-1))}function L(e,t){var n=E(e,t);if(!n)throw new Error("Expected pane");if(n.floating)if(1===n.paneGroup.panes.length){var r=n.paneGroupPath[1];if("number"!==typeof r)throw new Error("Expected floatingIndex");U(e,["floating",r])}else A(n.paneGroup,n.index);else{var i=n.paneGroup,o=n.paneGroupPath,a=n.parent;if(!i)throw new Error("paneGroup eith paneId not found: "+t);var l=i.panes.indexOf(t);if(-1===l)throw new Error("Expected paneIndex");a||1!==i.panes.length?i.panes.length>1?A(i,l):U(e,o):e.tiling=null}}function U(e,t){var n=(0,k.Z)(t),i=n[0],o=n.slice(1);if("tiling"!==i||0!==o.length)if("floating"!==i||0!==o.length){var a=T(e,t);if(!a)throw new Error("Expected node");if("floatingPaneGroup"!==a.type){var l=B(t),c=T(e,l);if("split"!==(null===c||void 0===c?void 0:c.type))throw new Error("Expected split");var u=c.children.indexOf(a);if(-1===u)throw new Error("Expected paneGroupIndex");var s=c.children;if(s.splice(u,1),s.length>1){var d=100/s.reduce((function(e,t){return e+t.percent}),0);s.forEach((function(e){e.percent=e.percent*d}))}else{var f=(0,r.Z)(s,1)[0],p=l.length>1?T(e,B(l)):null;if(!p)return f.percent=100,void(e.tiling=f);if("split"!==p.type)throw new Error("Expected split");var h=p.children.indexOf(c);if(-1===h)throw new Error("Expected parentIndex");f.percent=c.percent,p.children[h]=f}}else{var v=e.floating.indexOf(a);if(-1===v)throw new Error("Expected paneGroupIndex");e.floating.splice(v,1)}}else e.floating=[];else e.tiling=null}var X=n(30504);function M(e){var t=e.isStacked,n=e.isHTML,r=e.isExtension,i=e.codeEditorPath,o=void 0===i?"":i,a={codeEditor:{paneId:h()(),pane:{type:"codeEditor",data:{path:o}}},output:{paneId:h()(),pane:{type:n?"webview":"runnerOutput"}},shell:{paneId:h()(),pane:{type:"shell"}},ghostwriter:{paneId:h()(),pane:{type:"ghostwriterChat"}},extensionDevtools:{paneId:h()(),pane:{type:"extensionDevtools"}},extensionDocs:{paneId:h()(),pane:{type:"docs",data:{url:X.TT.EXTENSIONS}}}},l={};Object.values(a).forEach((function(e){var t=e.paneId,n=e.pane;l[t]=n}));var c=function(e){var t=e.codeEditorId,n=e.outputId,r=e.shellId,i=e.extensionDevtoolsId,o=e.extensionDocsId,a=e.isStacked,l=e.isExtension,c=a?{type:"split",stacked:!0,percent:100,children:[{id:h()(),percent:60,type:"paneGroup",panes:[t],activeIndex:0},{id:h()(),percent:40,type:"paneGroup",panes:[n,r],activeIndex:0}]}:{type:"split",stacked:!1,percent:100,children:[{id:h()(),percent:55,type:"paneGroup",panes:[t],activeIndex:0},{id:h()(),percent:45,type:"paneGroup",panes:[n,r],activeIndex:0}]};return l&&(c=a?{type:"split",stacked:!0,percent:100,children:[{id:h()(),percent:40,type:"paneGroup",panes:[t],activeIndex:0},{id:h()(),percent:60,type:"paneGroup",panes:[i,o,r],activeIndex:0}]}:{type:"split",stacked:!1,percent:100,children:[{id:h()(),percent:55,type:"paneGroup",panes:[t],activeIndex:0},{id:h()(),percent:45,type:"paneGroup",panes:[i,o,r],activeIndex:0}]}),{floating:[],tiling:c}}({codeEditorId:a.codeEditor.paneId,outputId:a.output.paneId,shellId:a.shell.paneId,extensionDevtoolsId:a.extensionDevtools.paneId,extensionDocsId:a.extensionDocs.paneId,isStacked:t,isExtension:r});return{layout:c,data:l}}function N(e){var t,n=e.initialLayoutState,i=e.codeEditorPath,o=e.isHTML,a=e.isStacked,l=e.isExtension,c=n?function(e){try{w(e)}catch(t){return null}return e}(n):null,u=null!==(t=null===c||void 0===c?void 0:c.sidebarPercent)&&void 0!==t?t:15;if(c){var s=(0,x.ZP)(c,(function(e){var t=!0,n=!1,i=void 0;try{for(var o,a=Object.entries(e.data)[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=(0,r.Z)(o.value,2),c=l[0],u=l[1];("commands"===u.type||"codeEditor"===u.type&&!u.data.path)&&(delete e.data[c],L(e.layout,c))}}catch(s){n=!0,i=s}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}}));return{data:s.data,layout:s.layout,type:"saved",sidebarPercent:u}}var d=M({isStacked:a,isHTML:o,isExtension:l,codeEditorPath:i});return{data:d.data,layout:d.layout,type:"default",sidebarPercent:u}}var O=n(81202),F=n.n(O),W=n(72006);var H={top:0,bottom:0,left:0,right:0};function V(e,t){var n=t.size,r=t.gap,i=t.headerHeight,o=t.inset,a=void 0===o?H:o,l=[],c=[],u=[],s=[],d=null;function f(t,n,o,a){var l=n.children.indexOf(t),p=n.children.length,h=n.stacked?o.height:o.width;var v=function(){var e=o.width,a=o.height,l=t.percent/100;return n.stacked?a=(h-(r*(p-1)+i*p))*l+i:e=(h-r*(p-1))*l,{width:e,height:a}}(),m=v.width,g=v.height,y=function(){var e=o.x,t=o.y;if(0===l)return{x:e,y:t};if(!d)throw new Error("Expected previousRect");return n.stacked?t=d.y+d.height+r:e=d.x+d.width+r,{x:e,y:t}}(),Z={x:y.x,y:y.y,height:g,width:m};if(d=Z,"paneGroup"===t.type){var b,w={x:Z.x,y:Z.y+i,width:Z.width,height:Z.height-i},x={x:w.x,y:w.y-i,width:w.width,height:i};s.push({id:t.id,rect:x,panes:t.panes,activeIndex:t.activeIndex,path:a}),(b=c).push.apply(b,(0,C.Z)(t.panes.map((function(e,n){return{paneId:e,rect:w,active:n===t.activeIndex}}))))}else t.children.forEach((function(e,n){return f(e,t,Z,(0,C.Z)(a).concat([n]))}));if(0!==l){var k={x:Z.x-(n.stacked?0:r),y:Z.y-(n.stacked?r:0),width:n.stacked?Z.width:r,height:n.stacked?r:Z.height},S=B(a),E=(0,C.Z)(S).concat([l-1]),R=T(e,E);if(!R||!P(R))throw new Error("Expected leftNode");var G=void 0;0===R.percent?G="left":0===t.percent&&(G="right"),u.push({parentPath:S,leftPath:E,rightPath:a,stacked:n.stacked,rect:k,snapped:G})}}var p={x:a.left,y:a.top,width:n.width-(a.left+a.right),height:n.height-(a.top+a.bottom)},h=e.tiling;if("paneGroup"===(null===h||void 0===h?void 0:h.type)){var v,m={x:p.x,y:p.y+i,width:p.width,height:p.height-i},g={x:m.x,y:m.y-i,width:m.width,height:i};s.push({id:h.id,rect:g,panes:h.panes,activeIndex:h.activeIndex,path:["tiling"]}),(v=c).push.apply(v,(0,C.Z)(h.panes.map((function(e,t){return{paneId:e,rect:m,active:t===h.activeIndex}}))))}else h&&h.children.forEach((function(e,t){return f(e,h,p,["tiling",t])}));var y=a.left+49,Z={x:p.x-y,y:p.y,width:p.width+y,height:p.height};return e.floating.forEach((function(e,t){var n,r=function(e,t){var n=t.inside,r=(0,W.Z)({},e);return r.x<n.x?(r.x=n.x,r.width=Math.min(r.width,n.width)):r.x+r.width>=n.x+n.width?(r.x=Math.max(n.x,n.x+n.width-r.width),r.width=Math.min(r.width,n.width)):r.width=Math.min(r.width,n.width),r.y<n.y?(r.y=n.y,r.height=Math.min(r.height,n.height)):r.y+r.height>=n.y+n.height?(r.y=Math.max(n.y,n.y+n.height-r.height),r.height=Math.min(r.height,n.height)):r.height=Math.min(r.height,n.height),r}(e.rect,{inside:Z}),o={height:i,width:r.width,x:r.x,y:r.y},a={x:r.x,y:r.y+i,width:r.width,height:Math.max(r.height-i,0)};s.push({id:e.id,rect:o,panes:e.panes,activeIndex:e.activeIndex,path:["floating",t]}),(n=l).push.apply(n,(0,C.Z)(e.panes.map((function(t,n){return{paneId:t,rect:a,active:n===e.activeIndex}}))))})),{tiles:c,gutters:u,headers:s,floating:l}}var z=n(56581),j=(0,l.cn)([]),q=(0,l.cn)([]),$=(0,l.cn)([]),Y={x:0,y:0,width:0,height:0},K={type:"commands",data:{autoFocus:!1}};var Q=(0,z.xu)((function(e){return(0,l.cn)(function(e){return{paneId:e,type:"tile",rectAtom:(0,l.cn)((0,W.Z)({},Y)),data:(0,l.cn)((0,W.Z)({},K)),isHidden:!1,isCommitted:!1}}(e))})),J=(0,l.cn)((function(e){return e(j).map((function(t){return e(Q(t))}))})),ee=(0,l.cn)((function(e){return e(J).filter((function(e){return!e.isHidden}))})),te=(0,l.cn)((function(e){return e(J).filter((function(e){return e.isHidden}))})),ne=(0,l.cn)((function(e){return e($).map((function(t){return e(ie(t))}))})),re=(0,z.xu)((function(e){return(0,l.cn)(function(e){return{handleId:e,rect:Y,stacked:!1,parentPath:["tiling"],leftPath:["tiling"],rightPath:["tiling"]}}(e))})),ie=(0,z.xu)((function(e){return(0,l.cn)({id:e,rectAtom:(0,l.cn)((0,W.Z)({},Y)),panes:[],path:["tiling"],activeIndex:0})})),oe=(0,l.cn)((function(){return 36})),ae=(0,l.cn)({x:0,y:0,width:0,height:0}),le=(0,l.cn)({width:0}),ce=(0,l.cn)(null),ue=(0,l.cn)(null,(function(e,t,n){n!==e(ce)&&t(ce,n)})),se=(0,l.cn)(null,(function(e,t,n){var r=Q(n);e(r).isCommitted||t(r,(function(e){return(0,x.ZP)(e,(function(e){e.isCommitted=!0}))}))})),de=(0,l.cn)((function(e){var t=e(ce);if(!t)return null;var n=e(Q(t)),r=e(n.data);return(0,v.Ur)(r)&&r.data.path||null})),fe=((0,l.cn)(null),(0,l.cn)(!0)),pe=(0,l.cn)({tiling:null,floating:[]}),he=(0,l.cn)((function(e){return e(J).filter((function(t){return(0,v.Ur)(e(t.data))}))})),ve=(0,l.cn)((function(e){var t=!0,n=!1,r=void 0;try{for(var i,o=e(J)[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value;if(!a.isCommitted&&(0,v.Ur)(e(a.data)))return a.paneId}}catch(l){n=!0,r=l}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}return null})),me=(0,l.cn)((function(e){return e(he).map((function(t){return{paneId:t.paneId,filePath:e(t.data).data.path}})).filter((function(e){return e.filePath&&e.filePath.length>0}))})),ge=(0,l.cn)((function(e){var t=[],n=!0,r=!1,i=void 0;try{for(var o,a=e(ee)[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value;t.push([l.paneId,e(l.data)])}}catch(c){r=!0,i=c}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return t})),ye=(0,l.cn)((function(e){var t=[],n=!0,r=!1,i=void 0;try{for(var o,a=e(te)[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value;t.push([l.paneId,e(l.data)])}}catch(c){r=!0,i=c}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return t})),Ze=(0,l.cn)((function(e){var t=[],n=!0,r=!1,i=void 0;try{for(var o,a=e(J)[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value;t.push([l.paneId,e(l.data)])}}catch(c){r=!0,i=c}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return t})),be=(0,l.cn)((function(e){var t=e(ae);return Boolean(t.width&&t.height)})),we=(0,l.cn)(null),xe=(0,l.cn)((function(e){var t=e(ce);if(!t)return null;var n=e(Q(t)).rectAtom,r=e(n),i=e(oe);return{x:r.x,y:r.y-i,width:r.width,height:r.height+i}})),ke=(0,l.cn)(null,(function(e,t,n){var r=e(he).find((function(t){return n===(0,v.DQ)(e(t.data))}));r&&(t(ue,r.paneId),t(se,r.paneId))})),Ce=(0,l.cn)(null,(function(e,t,n){t(e(Q(n.paneId)).data,n.pane),n.makeActive&&t(ue,n.paneId),n.commit&&t(se,n.paneId)})),Se=(0,l.cn)(null);function Te(e,t){var n=e.x,r=e.y;return n>t.x&&n<t.x+t.width&&r>t.y&&r<t.y+t.height}function Ee(e,t){var n=function(e){var t=e.rect,n=e.point,r=t.height>t.width?t.width/t.height:1,i=t.width>t.height?t.height/t.width:1,o=(n.x-t.x)*i,a=(t.x+t.width-n.x)*i,l=(n.y-t.y)*r,c=(t.y+t.height-n.y)*r,u=Math.min(o,a,l,c);return u===o?"left":u===a?"right":u===l?"top":"bottom"}({point:e,rect:t}),r={x:t.x,y:t.y,width:t.width,height:t.height},i="below";return"top"===n?(r.height=t.height/2,i="above"):"bottom"===n?(r.height=t.height/2,r.y=t.y+t.height/2,i="below"):"left"===n?(r.width=t.width/2,r.x=t.x,i="leftOf"):"right"===n&&(r.width=t.width/2,r.x=t.x+t.width/2,i="rightOf"),{placement:i,rect:r}}function Re(e){return"handle:"+e.leftPath.join(":")}function Ge(e){return(0,i.Z)((function(){return(0,z.kv)(e,(function(e){return{width:e.width,height:e.height}}),(function(e,t){return Boolean(e.height===t.height&&e.width===t.width)}))}),[e])}function Ie(e){return(0,i.Z)((function(){return(0,z.kv)(e,(function(e){return{x:e.x,y:e.y}}),(function(e,t){return Boolean(e.x===t.x&&e.y===t.y)}))}),[e])}var _e=n(44841),De=(0,l.cn)((function(e){var t=e(oe),n=e(le),r=e(ae);return{headerHeight:t,inset:{top:0,bottom:8,left:8+n.width,right:8},gap:8,size:{width:r.width,height:r.height}}})),Be=(0,l.cn)(null,(function(e,t,n){t(ae,n),t(Ae,e(pe))}));function Pe(e,t){return F()(e,t)}var Ae=(0,l.cn)(null,(function(e,t,n){var r=function(n){var r=n.paneId,i=n.rect,o=n.type,a=n.isHidden;l.delete(r);var c=Q(r),u=e(c);Pe(e(u.rectAtom),i)||t(u.rectAtom,i);var s=(0,x.ZP)(u,(function(e){e.paneId=r,e.type=o,e.isHidden=a}));Pe(u,s)||t(c,s)},i=e(j),o=e(q),a=e($),l=new Set(i),c=new Set(o),u=new Set(a),s=V(n,e(De)),d=s.tiles,f=s.floating,p=s.gutters,h=s.headers,v=p.map(Re);Pe(o,v)||t(q,v);var m=(0,C.Z)(d).concat((0,C.Z)(f)).map((function(e){return e.paneId}));Pe(i,m)||t(j,(0,_e.Z)(m,{existing:i,getKey:function(e){return e}}));var g=[];h.forEach((function(n){u.delete(n.id);var r=ie(n.id),i=e(r);g.push(n.id),Pe(e(i.rectAtom),n.rect)||t(i.rectAtom,n.rect);var o=(0,x.ZP)(i,(function(e){e.panes=n.panes,e.activeIndex=n.activeIndex,e.path=n.path}));Pe(i,o)||t(r,o)})),Pe(a,g)||t($,g),d.forEach((function(e){var t=e.paneId,n=e.rect,i=e.active;r({paneId:t,rect:n,isHidden:!i,type:"tile"})})),f.forEach((function(e){var t=e.paneId,n=e.rect,i=e.active;r({paneId:t,rect:n,isHidden:!i,type:"floating"})})),p.forEach((function(n){var r={handleId:Re(n),rect:n.rect,parentPath:n.parentPath,leftPath:n.leftPath,rightPath:n.rightPath,stacked:n.stacked,snapped:n.snapped};c.delete(r.handleId);var i=re(r.handleId);Pe(e(i),r)||t(i,r)})),l.forEach(Q.remove),c.forEach(re.remove),u.forEach(ie.remove);var y=e(ce);y&&l.has(y)&&t(ce,null),t(pe,n)})),Le=n(57135),Ue=n(96583),Xe=n(85234),Me=n.n(Xe),Ne=n(43119),Oe=n(71440),Fe=n(50216);function We(){var e=(0,Ne.Z)(["\n  mutation SaveReplLayoutState($input: SetReplLayoutStateInput!) {\n    setReplLayoutState(input: $input) {\n      ... on Repl {\n        id\n        layoutState\n      }\n    }\n  }\n"]);return We=function(){return e},e}var He={},Ve=(0,Oe.Ps)(We());var ze=n(12379);function je(e,t){var n=t.leftPath,r=t.percent,i=t.snapPercent,o=void 0===i?0:i,a=T(e,n);if(!a||!P(a))throw new Error("Expected leftNode");var l=T(e,B(n));if("split"!==(null===l||void 0===l?void 0:l.type))throw new Error("Expected splitNode");var c=l.children.indexOf(a);if(-1===c)throw new Error("Expected leftNodeIndex");var u=c+1,s=l.children[u];if(!s)throw new Error("Expected rightNode");if(r<=o){if(a.percent=0,r<0&&c>0)for(var d=Math.abs(r),f=c-1;d>0;){var p=l.children[f];if(p.percent>d){p.percent-=d;break}if(d-=p.percent,p.percent=0,0===f)break;f--}var h=l.children.reduce((function(e,t){return t===s?e:e+t.percent}),0);s.percent=100-h}else{var v=a.percent+s.percent,m=l.children.slice(c).reduce((function(e,t){return e+t.percent}),0);if(r>v-o){if(a.percent=Math.min(m,Math.max(v,r)),s.percent=0,r>v&&u<l.children.length-1)for(var g=r-v,y=u+1;g>0;){var Z=l.children[y];if(Z.percent>g){Z.percent-=g;break}if(g-=Z.percent,Z.percent=0,y===l.children.length-1)break;y++}}else{var b=a.percent-r;s.percent=s.percent+b,a.percent=r}}}function qe(e){var t=e.layout,n=e.splitPath,r=e.tilingOptions,i=function(e,t){var n=t.splitPath,r=T(e,n);if(!r||"split"!==r.type)throw new Error("Expected split node");for(var i=100,o=B(n);o.length;){var a=T(e,o);if(!a)break;o=B(o),"split"===a.type&&a.stacked===r.stacked&&(i*=a.percent/100)}return i}(t,{splitPath:n}),o=T(t,n);if("split"!==(null===o||void 0===o?void 0:o.type))throw new Error("Expected split node");var a=r.size,l=r.gap,c=r.headerHeight,u=r.inset,s=void 0===u?{top:0,bottom:0,left:0,right:0}:u,d=o.children.length,f=o.stacked?l*(d-1)+c*d:l*(d-1);return i/100*((o.stacked?a.height-(s.top+s.bottom):a.width-(s.left+s.right))-f)}var $e=(0,l.cn)(null),Ye=(0,l.cn)(null,(function(e,t,n){if("end"!==n.type)if("update"!==n.type){var r=e(pe),i=n.stacked?window.innerHeight:window.innerWidth,o=T(r,n.leftPath);if(!o||!P(o)){var a=new Error("Expected left node");throw t(we,{error:a,tags:{layoutstate:!0},origin:"Layout: state/resizeTiling"}),a}var l=B(n.leftPath),c=o.percent,u=30/i*100,s=null;try{s=qe({splitPath:l,layout:r,tilingOptions:e(De)})}catch(w){throw t(we,{error:w,tags:{layoutstate:!0},origin:"Layout: state/resizeTiling"}),w}if(null===s)throw new Error("Expected resizeDistance");t($e,{stacked:n.stacked,leftPath:n.leftPath,startPercent:c,resizeDistance:s,snapPercent:u,initialLayout:r})}else{var d=e($e);if(!d){var f=new Error("Expected tilingResize");throw t(we,{error:f,tags:{layoutstate:!0},origin:"Layout: state/resizeTiling"}),f}var p=d.stacked,h=d.leftPath,v=d.startPercent,m=d.resizeDistance,g=d.initialLayout,y=d.snapPercent,Z=v+(p?n.moveDelta.y:n.moveDelta.x)/m*100,b=(0,x.ZP)(g,(function(e){je(e,{leftPath:h,percent:Z,snapPercent:y})}));t(Ae,b)}else t($e,null)}));function Ke(e){return(0,i.Z)((function(){return re(e)}),[e])}function Qe(e){var t=Ke(e);return(0,i.Z)((function(){return(0,z.kv)(t,(function(e){return e.rect}))}),[t])}function Je(e){return(0,i.Z)((function(){return(0,l.cn)((function(t){var n=t($e);return!!n&&e===Re({leftPath:n.leftPath})}))}),[e])}function et(e){var t=Ke(e);return(0,i.Z)((function(){return(0,z.kv)(t,(function(e){return e.stacked}))}),[t])}var tt=(0,l.cn)(null,(function(e,t){0!==e(le).width&&(t(le,{width:0}),t(Ae,e(pe)))})),nt=(0,l.cn)(null,(function(e,t){var n=e(le).width>0?0:ht;t(le,{width:n}),t(Ae,e(pe))})),rt=(0,l.cn)(null),it=(0,l.cn)(null,(function(e,t){var n=e(le);t(rt,{sidebarWidthStart:n.width})})),ot=(0,l.cn)(null,(function(e,t,n){var r=n.deltaX,i=e(rt);if(i){var o=e(ae),a=i.sidebarWidthStart+r;if((a=Math.min(Math.max(a,0),Math.min(o.width,dt)))<vt&&!(r>0)){if(vt-a<ft)return;a=0}t(le,{width:a}),t(Ae,e(pe))}})),at=(0,l.cn)(null,(function(e,t){if(e(rt)){var n=e(le);n.width<vt&&(t(le,{width:0===n.width?0:vt}),t(Ae,e(pe))),t(rt,null)}})),lt=(0,l.cn)((function(e){return Boolean(e(rt))})),ct=(0,l.cn)((function(e){return e(lt)?{width:1,height:e(ut).height}:{width:2,height:24}})),ut=(0,l.cn)((function(e){var t=e(ae).height;return{x:e(le).width,y:0,height:t-8,width:8}})),st=(0,l.cn)((function(e){return e(ut).height})),dt=600,ft=80,pt=(0,l.cn)((function(e){return e(le).width})),ht=220,vt=180,mt=(0,l.cn)((function(e){return e(pt)>0}));var gt=(0,l.cn)((function(e){var t=e(ae);return function(e,t){var n=t.min,r=t.max;return Math.min(Math.max(n,e),r)}(e(pt)/t.width*100,{min:0,max:100})})),yt=(0,l.cn)((function(e){var t=e(pe),n={};e(J).forEach((function(t){n[t.paneId]=e(t.data)}));var r=e(gt);return{layout:t,data:n,sidebarPercent:r}})),Zt=(0,l.cn)(null),bt=(0,l.cn)(null),wt=(0,l.cn)(null);function xt(e,t){return kt.apply(this,arguments)}function kt(){return kt=(0,Le.Z)((function(e,t){var n,r;return(0,Ue.__generator)(this,(function(i){switch(i.label){case 0:r=void 0,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,null===ze.l||void 0===ze.l?void 0:ze.l.mutate({mutation:Ve,variables:{input:{replId:e,state:t}}})];case 2:return r=i.sent(),[3,4];case 3:return i.sent(),[2,{success:!1,retry:!0}];case 4:return"Repl"===(null===r||void 0===r||null===(n=r.data)||void 0===n?void 0:n.setReplLayoutState.__typename)?[2,{success:!0,retry:void 0}]:[2,{success:!1,retry:!1}]}}))})),kt.apply(this,arguments)}var Ct=(0,l.cn)(null,function(){var e=(0,Le.Z)((function(e,t,n){var r,i,o,a,l,c;return(0,Ue.__generator)(this,(function(u){switch(u.label){case 0:return(r=e(bt))&&!r.retry||r&&Date.now()-r.timestamp<6e4?[2]:e(be)?(i=e(yt),o=n.replId,a=e(Zt),!n.force&&F()(a,i)?[2]:(l=Me()(),t(wt,l),[4,xt(o,i)])):[2];case 1:return c=u.sent(),e(wt)!==l?[2]:(t(wt,null),c.retry?(t(bt,{timestamp:Date.now(),retry:!0}),[2]):c.success?(t(Zt,i),[2]):(t(bt,{timestamp:Date.now(),retry:!1}),[2]))}}))}));return function(t,n,r){return e.apply(this,arguments)}}()),St=(0,l.cn)(null,(function(e,t,n){var i=n.data,o=n.layout,a=n.sidebarPercent,l=n.type;Object.entries(i).forEach((function(n){var i=(0,r.Z)(n,2),o=i[0],a=i[1],l=Q(o);t(l,(0,x.ZP)(e(l),(function(e){e.isCommitted=!0}))),t(e(l).data,a)}));var c=window.innerWidth,u=Math.floor(a)>0?Math.min(c*(a/100),dt):0;t(le,{width:u>0?Math.max(ht,u):Math.max(0,u)}),t(Ae,o),t(Se,l),t(Zt,e(yt))})),Tt=(0,u.createContext)(null);function Et(e){var t=e.children,n=e.initialLayoutState,r=void 0===n?null:n,i=e.isHTML,o=void 0!==i&&i,a=e.isStacked,s=void 0!==a&&a,d=e.isExtension,f=void 0!==d&&d,p=(0,u.useState)((function(){return function(e){var t=e.initialLayoutState,n=e.isHTML,r=e.isStacked,i=e.isExtension,o=(0,l.MT)();return o.set(St,N({initialLayoutState:t,isHTML:n,isStacked:r,isExtension:i})),o}({initialLayoutState:r,isHTML:o,isStacked:s,isExtension:f})})),h=p[0];return(0,c.tZ)(Tt.Provider,{value:h,children:t})}function Rt(){var e=(0,u.useContext)(Tt);if(!e)throw new Error("Expected store in context");return e}function Gt(e){return(0,s.Dv)(e,{store:Rt()})}function It(e){return(0,f.b)(e,Rt())}var _t=function(e){return(0,s.b9)(e,{store:Rt()})};function Dt(e){return(0,d.lV)((0,u.useCallback)((function(t){return t(e)}),[e]),{store:Rt()})}var Bt=(0,l.cn)(!1),Pt=(0,l.cn)((function(e){return e(Bt)?e(ce):null})),At=(0,l.cn)(null,(function(e,t,n){t(ue,n),t(Bt,!0)})),Lt=(0,l.cn)(null,(function(e,t,n){t(Bt,!0);var r=I(e(pe),n.paneGroupId);if(!r){var i=new Error("Expected paneGroup");throw t(we,{error:i,tags:{layoutstate:!0},origin:"Layout: state/maximize/maximizePaneGroupAtom"}),i}var o=r.panes[r.activeIndex];if(!o){var a=new Error("Expected paneId");throw t(we,{error:a,tags:{layoutstate:!0},origin:"Layout: state/maximize/maximizePaneGroupAtom"}),a}t(ue,o)})),Ut=(0,l.cn)(null,(function(e,t){t(Bt,!1)})),Xt=(0,l.cn)(null,(function(e,t,n){e(Pt)===n?t(Ut):t(At,n)})),Mt=(0,l.cn)(null,(function(e,t,n){var r=I(e(pe),n.paneGroupId);if(!r){var i=new Error("Expected paneGroup");throw t(we,{error:i,tags:{layoutstate:!0},origin:"Layout: state/maximize/toggleMaximizePaneGroupAtom"}),i}var o=r.panes[r.activeIndex];if(!o){var a=new Error("Expected paneId");throw t(we,{error:a,tags:{layoutstate:!0},origin:"Layout: state/maximize/toggleMaximizePaneGroupAtom"}),a}t(Xt,o)})),Nt=(0,l.cn)((function(e){var t=e(ae);return{x:-t.x,y:-t.y,width:t.width+t.x,height:t.height+t.y}})),Ot=(0,l.cn)((function(e){var t=e(oe),n=e(Nt);return{x:n.x,y:n.y,width:n.width,height:t}})),Ft=(0,l.cn)((function(e){var t=e(oe),n=e(Nt);return{x:n.x,y:n.y+t,width:n.width,height:n.height-t}})),Wt=n(4561);function Ht(e,t){var n=void 0===t.activeIndex?0:t.activeIndex;if(t.isFloating)e.floating.push({id:t.id,type:"floatingPaneGroup",panes:t.panes,activeIndex:n,rect:t.rect});else{var r=null;if(Array.isArray(t.relativeTo))r=t.relativeTo;else{var i=E(e,t.relativeTo);if(!i)throw new Error("Expected pane");r=i.paneGroupPath}if(null===r)throw new Error("Expected relativeTo");if("tiling"!==r[0])throw new Error("Expected tiling path");var o=t.placement,a=t.panes,l=t.percent,c="above"===o||"below"===o,u="rightOf"===o||"below"===o;if(e.tiling||1!==r.length){if(!e.tiling)throw new Error("Expected tiling");var s=T(e,r);if(!s||!P(s))throw new Error("Expected tiled node");if(1!==r.length||"replace"!==o){if(1===r.length&&"paneGroup"===e.tiling.type){var d=[e.tiling];return e.tiling={type:"split",percent:100,stacked:c,children:d},void Vt({id:t.id,insertIndex:u?1:0,panes:a,children:d,percent:l,activeIndex:n})}if(1===r.length&&"split"===e.tiling.type){if(Boolean(e.tiling.stacked)===Boolean(c))return void Vt({id:t.id,panes:a,percent:l,activeIndex:n,insertIndex:u?e.tiling.children.length:0,children:e.tiling.children});var f={id:t.id,panes:a,type:"paneGroup",percent:void 0===l?50:l,activeIndex:n},p=u?[s,f]:[f,s];return s.percent=100-f.percent,void(e.tiling={type:"split",stacked:c,children:p,percent:100})}if(0===r.length)throw new Error("Expected relativeTo length");var h=T(e,B(r));if("split"!==(null===h||void 0===h?void 0:h.type))throw new Error("Expected split parent");if("replace"!==o)if(Boolean(h.stacked)!==Boolean(c))if(Boolean(h.stacked)===Boolean(c));else{var v={id:t.id,panes:a,type:"paneGroup",percent:void 0===l?50:l,activeIndex:n},m=u?[s,v]:[v,s],g=s.percent;s.percent=100-v.percent;var y=h.children.indexOf(s);h.children[y]={type:"split",stacked:c,children:m,percent:g}}else{var Z=h.children.indexOf(s);Vt({id:t.id,panes:a,percent:l,activeIndex:n,insertIndex:u?Z+1:Z,children:h.children})}else{var b=h.children.indexOf(s);h.children.splice(b,1,{id:t.id,panes:a,percent:s.percent,type:"paneGroup",activeIndex:n})}}else e.tiling={id:t.id,type:"paneGroup",percent:100,panes:a,activeIndex:n}}else e.tiling={id:t.id,type:"paneGroup",percent:100,panes:a,activeIndex:n}}}function Vt(e){var t=e.id,n=e.percent,r=e.children,i=e.panes,o=e.insertIndex,a=e.activeIndex;if(void 0===n){var l=r.reduce((function(e,t){return e+t.percent}),0)/r.length,c=100/(100+l);r.forEach((function(e){e.percent=e.percent*c}));var u={id:t,panes:i,type:"paneGroup",percent:l*c,activeIndex:a};r.splice(o,0,u)}else{var s=(100-n)/100;r.forEach((function(e){e.percent=e.percent*s}));var d={id:t,panes:i,type:"paneGroup",percent:n,activeIndex:a};r.splice(o,0,d)}}function zt(e,t){var n=I(e,t.paneGroupId);if(!n)throw new Error("Expected paneGroup");!function(e,t){var n,r=t.index,i=t.paneIds,o=t.activate,a=void 0===o||o;if(void 0!==r&&r>e.panes.length)throw new Error("Invalid index");var l=void 0===r?e.panes.length:r;(n=e.panes).splice.apply(n,[l,0].concat((0,C.Z)(i))),a&&(e.activeIndex=l)}(n,t)}var jt=(0,l.cn)(null,(function(e,t,n){var r=e(pe),i=I(r,n.paneGroupId);if(!i){var o=new Error("Expected pane group");throw t(we,{error:o,tags:{layoutstate:!0},origin:"Layout: state/splits/removePaneGroupAtom"}),o}var a=(0,x.ZP)(r,(function(e){try{i.panes.forEach((function(t){L(e,t)}))}catch(o){throw t(we,{error:o,tags:{layoutstate:!0},origin:"Layout: state/splits/removePaneGroupAtom"}),o}}));e(Bt)&&t(Bt,!1),t(Ae,a)})),qt=(0,l.cn)(null,(function(e,t,n){var r=e(pe),i=E(r,n.paneId);if(!i){var o=new Error("Expected relativeToPane");throw t(we,{error:o,tags:{layoutstate:!0},origin:"Layout: state/splits/splitPaneAtom"}),o}var a=Me()(),l=e(Q(a));t(l.data,{type:"commands",data:{autoFocus:Boolean(n.autoFocus)}});var c=(0,x.ZP)(r,(function(e){try{Ht(e,{id:Me()(),isFloating:!1,placement:n.placement,relativeTo:i.paneGroupPath,panes:[a]})}catch(o){throw t(we,{error:o,tags:{layoutstate:!0},origin:"Layout: state/splits/splitPaneAtom"}),o}}));t(Ae,c),t(ue,a)})),$t=(0,l.cn)(null,(function(e,t,n){var r=e(pe),i=Me()(),o=e(Q(i));t(o.data,n.pane);var a=(0,x.ZP)(r,(function(e){try{Ht(e,{id:Me()(),isFloating:!1,placement:n.placement,relativeTo:n.relativeTo,panes:[i],percent:n.percent})}catch(r){throw t(we,{error:r,tags:{layoutstate:!0},origin:"Layout: state/splits/insertSplitPaneAtom"}),r}}));return t(Ae,a),i})),Yt=(0,l.cn)(null,(function(e,t,n){var r=e(pe),i=(0,x.ZP)(r,(function(e){je(e,{leftPath:n.leftPath,percent:n.percent})}));t(Ae,i)})),Kt=(0,l.cn)(null,(function(e,t,n){var r=I(e(pe),n);if(!r)return null;t(ue,r.panes[r.activeIndex])}));var Qt=(0,l.cn)(null,(function(e,t,n){var r=e(pe),i=E(r,n);if(!i)throw new Error("Expected pane");var o=!i.paneGroup.panes.some((function(e){return e!==n})),a=n===e(ce),l=D(r,n),c=(0,x.ZP)(r,(function(e){try{L(e,n)}catch(r){throw t(we,{error:r,tags:{layoutstate:!0},origin:"Layout: state/removePane/removePaneAtom"}),r}}));if(t(Ae,c),o&&e(Bt)&&t(Bt,!1),a&&(o||t(Kt,i.paneGroup.id),o&&l)){do{"split"===l.type&&(l=l.children[0])}while("paneGroup"!==l.type);t(Kt,l.id)}})),Jt=(0,l.cn)(null,(function(e,t,n){var r=e(pe),i=E(r,n),o=null===i||void 0===i?void 0:i.paneGroup.panes.filter((function(e){return e!==n}));if(null===o||void 0===o?void 0:o.length){var a=(0,x.ZP)(r,(function(e){try{var n=!0,r=!1,i=void 0;try{for(var a,l=o[Symbol.iterator]();!(n=(a=l.next()).done);n=!0){L(e,a.value)}}catch(c){r=!0,i=c}finally{try{n||null==l.return||l.return()}finally{if(r)throw i}}}catch(u){throw t(we,{error:u,tags:{layoutstate:!0},origin:"Layout: state/removePane/removePaneAtom"}),u}}));t(Ae,a)}})),en=(0,l.cn)(null,(function(e,t,n){if(0===n.panes.length){var r=new Error("Expect at least one pane");throw t(we,{error:r,origin:"Layout: state/insertPaneGroup/insertPaneGroupAtom"}),r}var i=e(pe),o=n.panes.map((function(){return Me()()})),a=(0,x.ZP)(i,(function(e){try{Ht(e,{id:Me()(),panes:o,relativeTo:n.relativeTo||["tiling"],placement:n.placement,percent:n.percent})}catch(r){throw t(we,{error:r,tags:{layoutstate:!0},origin:"Layout: state/insertPaneGroup/insertPaneGroupAtom"}),r}}));t(Ae,a),n.panes.forEach((function(n,r){var i=o[r],a=e(Q(i));t(a.data,n);var l=(0,v.b)(n.type)?e(J).find((function(t){return e(t.data).type===n.type&&t.paneId!==i})):null;l&&t(Qt,l.paneId)})),n.makeActive&&t(ue,o[0])})),tn={top:"above",left:"leftOf",right:"rightOf",bottom:"below"},nn=(0,l.cn)(null,(function(e,t,n){var r=n.pane,i=n.edge;t($t,{pane:r,relativeTo:["tiling"],placement:tn[i]})})),rn=(0,l.cn)(null,(function(e,t,n){var r=e(pe),i=Me()(),o=(0,x.ZP)(r,(function(e){try{Ht(e,{id:Me()(),panes:[i],isFloating:!0,rect:n.rect})}catch(r){throw t(we,{error:r,tags:{layoutstate:!0},origin:"Layout: state/insertPaneGroup/insertFloatingPaneGroupAtom"}),r}}));t(Ae,o);var a=e(Q(i));return t(a.data,n.pane),n.makeActive?(t(ue,i),i):i}));function on(e,t,n){var i=(0,r.Z)("x"===n?[[e.x,e.x+e.width],[t.x,t.x+t.width]]:[[e.y,e.y+e.height],[t.y,t.y+t.height]],2),o=i[0],a=i[1],l=Math.max(o[0],a[0]);return Math.min(o[1],a[1])-l}function an(e){var t=e.from,n=e.other;switch(e.direction){case"above":return t.y-n.y;case"below":return n.y-t.y;case"rightOf":return n.x-t.x;case"leftOf":return t.x-n.x}}function ln(e){var t=e.relativeTo,n=e.rects,i=e.direction,o=n.get(t);if(!o)throw new Error("Expected relativeTo rect to be included in rects");var a=null,l=!0,c=!1,u=void 0;try{for(var s,d=n[Symbol.iterator]();!(l=(s=d.next()).done);l=!0){var f=(0,r.Z)(s.value,2),p=f[0],h=f[1];if(p!==t){var v=an({from:o,other:h,direction:i});if(!(("leftOf"===i||"above"===i)&&v<=0||("rightOf"===i||"below"===i)&&v<0)){var m=on(o,h,"leftOf"===i||"rightOf"===i?"y":"x");if(!(m<=0))(!a||a.distance>v||a.distance===v&&a.overlap<m)&&(a={key:p,rect:h,distance:v,overlap:m})}}}}catch(g){c=!0,u=g}finally{try{l||null==d.return||d.return()}finally{if(c)throw u}}return(null===a||void 0===a?void 0:a.key)||null}var cn=n(53472),un=(0,l.cn)(null,(function(e,t,n){if(0===n.panes.length)return[];var r=e(pe),i=n.panes.map((function(){return Me()()})),o=(0,x.ZP)(r,(function(e){try{zt(e,{paneIds:i,activate:n.activate,paneGroupId:n.paneGroupId,index:n.index})}catch(r){throw t(we,{error:r,tags:{layoutstate:!0},origin:"Layout: state/tabs/insertPanesAtom"}),r}}));return t(Ae,o),n.panes.forEach((function(r,o){var a=i[o],l=e(Q(a));t(l.data,r);var c=(0,v.b)(r.type)?e(J).find((function(t){return e(t.data).type===r.type&&t.paneId!==a})):null;c&&t(Qt,c.paneId),n.commit&&t(se,a)})),n.activate&&t(ue,i[0]),i})),sn=(0,l.cn)(null,(function(e,t,n){var i=n.pane,o=n.activate,a=n.placement,l=e(pe);if(!l.tiling){var c=t($t,{pane:i,relativeTo:["tiling"],placement:"replace"});return o&&t(ue,c),c}if("after"===a.type){var u=E(l,a.paneId);if(u){var s=(0,r.Z)(t(un,{panes:[i],paneGroupId:u.paneGroup.id,index:u.index+1,activate:o}),1)[0];return o&&t(ue,s),s}}if("secondary"===a.type&&a.relativeTo){var d=D(l,a.relativeTo);if(d){if("paneGroup"===d.type){var f=(0,r.Z)(t(un,{panes:[i],paneGroupId:d.id,activate:o}),1)[0];return o&&t(ue,f),f}var p=t($t,{pane:i,relativeTo:a.relativeTo,placement:"rightOf"});return o&&t(ue,p),p}var h=E(l,a.relativeTo);if("floatingPaneGroup"===(null===h||void 0===h?void 0:h.paneGroup.type)){var v=e(Q(a.relativeTo)),m=e(v.rectAtom);return t(rn,{rect:{x:m.x+m.width,y:m.y,width:m.width,height:m.height},pane:i,makeActive:o})}}var g=t($t,{pane:i,relativeTo:["tiling"],placement:"rightOf"});return o&&t(ue,g),g})),dn=(0,l.cn)(null,(function(e,t,n){var r=e(pe),i=E(r,n);if(!i){var o=new Error("Expected selectedPane");throw t(we,{error:o,tags:{layoutstate:!0},origin:"Layout: state/tabs/selectTabAtom"}),o}var a=ie(i.paneGroup.id);t(a,(function(e){return(0,x.ZP)(e,(function(e){e.activeIndex=i.index}))}));var l=!0,c=!1,u=void 0;try{for(var s,d=i.paneGroup.panes[Symbol.iterator]();!(l=(s=d.next()).done);l=!0){var f=s.value,p=Q(f);t(p,(function(e){return(0,x.ZP)(e,(function(e){e.isHidden=e.paneId!==n}))}))}}catch(h){c=!0,u=h}finally{try{l||null==d.return||d.return()}finally{if(c)throw u}}t(pe,(0,x.ZP)(r,(function(e){try{!function(e,t){var n=E(e,t);if(!(null===n||void 0===n?void 0:n.paneGroup))throw new Error("Expected pane group");var r=n.paneGroup,i=r.panes.indexOf(t);if(-1===i)throw new Error("Expected index");r.activeIndex=i}(e,n)}catch(o){throw t(we,{error:o,tags:{layoutstate:!0},origin:"Layout: state/tabs/selectTabAtom"}),o}}))),t(ue,n)})),fn=(0,l.cn)(null,(function(e,t,n){var r=e(J).find((function(t){return e(t.data).type===n}));if(r){if("webview"===n||"vnc"===n)return;return t(dn,r.paneId),void t(se,r.paneId)}var i=e(pe),o=G(i,"topRight");if(o&&i.tiling)if("paneGroup"!==i.tiling.type)if("split"!==i.tiling.type||2!==i.tiling.children.length||"paneGroup"!==i.tiling.children[1].type)t(un,{panes:[{type:n}],paneGroupId:o.paneGroup.id,commit:!0});else{var a=i.tiling.stacked,l=t($t,{pane:{type:n},relativeTo:o.path,placement:a?"rightOf":"above"});t(se,l)}else{var c=t($t,{pane:{type:n},relativeTo:["tiling"],placement:"rightOf"});t(se,c)}else{var u=t($t,{pane:{type:n},relativeTo:["tiling"],placement:"replace"});t(se,u)}})),pn=(0,l.cn)(null,(function(e,t){var n=e(J).find((function(t){return"threadInbox"===e(t.data).type}));if(n)t(dn,n.paneId);else{var r=e(pe),i=G(r,"bottomRight");i&&r.tiling?"paneGroup"!==r.tiling.type?t(un,{panes:[{type:"threadInbox"}],paneGroupId:i.paneGroup.id}):t($t,{pane:{type:"threadInbox"},relativeTo:["tiling"],placement:"rightOf"}):t($t,{pane:{type:"threadInbox"},relativeTo:["tiling"],placement:"replace"})}})),hn=(0,l.cn)(null,(function(e,t,n){var r=e(J).find((function(t){return e(t.data).type===n.type}));if(r){var i=e(pe),o=(0,x.ZP)(i,(function(e){try{L(e,r.paneId)}catch(n){throw t(we,{error:n,tags:{layoutstate:!0},origin:"Layout: state/tabs/removePaneTypeAtom"}),n}}));t(Ae,o)}})),vn=(0,l.cn)(null,(function(e,t,n){var r=e(pe),i=(0,x.ZP)(r,(function(e){var r=E(e,n.paneId);if(!r){var i=new Error("Expected pane");throw t(we,{error:i,tags:{layoutstate:!0},origin:"Layout: state/tabs/movePaneAtom"}),i}var o=I(e,n.toPaneGroupId);if(!o){var a=new Error("Expected toPaneGroup");throw t(we,{error:a,tags:{layoutstate:!0},origin:"Layout: state/tabs/movePaneAtom"}),a}var l=1===r.paneGroup.panes.length,c=!o.panes.includes(n.paneId);if(!l||c)try{L(e,n.paneId),zt(e,{paneIds:[n.paneId],paneGroupId:n.toPaneGroupId,index:n.index}),c&&t(se,n.paneId)}catch(u){throw t(we,{error:u,tags:{layoutstate:!0},origin:"Layout: state/tabs/movePaneAtom"}),u}}));t(Ae,i)})),mn=(0,l.cn)(null,(function(e,t,n){var r=e(ce);if(r){var i=e(pe),o=E(i,r);if(o){var a=o.paneGroup,l=new Map(e(J).filter((function(e){return!e.isHidden})).map((function(t){return[t.paneId,e(t.rectAtom)]}))),c=ln({relativeTo:r,rects:l,direction:n}),u=c?E(i,c):null;if(u)t(vn,{paneId:r,toPaneGroupId:u.paneGroup.id});else{var s=a.panes.find((function(e){return e!==r}));if(s){var d=(0,x.ZP)(i,(function(e){L(e,r),Ht(e,{id:Me()(),relativeTo:s,panes:[r],placement:n})}));t(Ae,d)}}}}})),gn=(0,l.cn)(!1),yn=(0,l.cn)(null,(function(e,t,n){var r=e(he).map((function(t){return{paneId:t.paneId,path:(0,v.DQ)(e(t.data))}})).filter((function(e){return n===e.path})),i=[],o=e(pe),a=(0,x.ZP)(o,(function(e){var n=!0,o=!1,a=void 0;try{for(var l,c=r[Symbol.iterator]();!(n=(l=c.next()).done);n=!0){var u=l.value.paneId,s=E(e,u);if(!s){var d=new Error("Expected pane");throw t(we,{error:d,tags:{layoutstate:!0},origin:"Layout: state/tabs/removePanesForFileAtom"}),d}!s.floating&&1===s.paneGroup.panes.length?i.push(u):L(e,u)}}catch(f){o=!0,a=f}finally{try{n||null==c.return||c.return()}finally{if(o)throw a}}})),l=!0,c=!1,u=void 0;try{for(var s,d=i[Symbol.iterator]();!(l=(s=d.next()).done);l=!0){var f=s.value;t(Ce,{paneId:f,pane:{type:"commands",data:{autoFocus:!1}}})}}catch(p){c=!0,u=p}finally{try{l||null==d.return||d.return()}finally{if(c)throw u}}t(Ae,a)})),Zn=(0,l.cn)(null,(function(e,t,n){var r=n.node.path;if(n.eventType!==Wt.kS.Delete){var i=e(he).filter((function(t){return(0,v.DQ)(e(t.data))===r})),o={type:(0,v.Dp)({path:n.to}),data:{path:n.to}},a=!0,l=!1,c=void 0;try{for(var u,s=i[Symbol.iterator]();!(a=(u=s.next()).done);a=!0){var d=u.value.paneId;t(Ce,{paneId:d,pane:o})}}catch(f){l=!0,c=f}finally{try{a||null==s.return||s.return()}finally{if(l)throw c}}}else t(yn,r)}));function bn(e){var t=ie(e);return(0,i.Z)((function(){return(0,l.cn)((function(e){var n=e(t);return e(Q(n.panes[n.activeIndex])).paneId}))}),[t])}var wn=(0,l.cn)(null,(function(e,t,n){var r=e(ce),i=e(pe);if(r){var o=E(i,r);if(o)return void t(un,{panes:n,paneGroupId:null===o||void 0===o?void 0:o.paneGroup.id,activate:!0,index:o.index+n.length})}var a=G(i,"topLeft");if(a)t(un,{activate:!0,paneGroupId:a.paneGroup.id,index:a.paneGroup.activeIndex+n.length,panes:n});else{var l=i.floating.length?i.floating[0]:null;l?t(un,{activate:!0,paneGroupId:l.id,index:l.activeIndex+n.length,panes:n}):t(en,{panes:n,placement:"leftOf",makeActive:!0,relativeTo:["tiling"]})}})),xn=(0,l.cn)(null,(function(e,t){t(wn,[{type:"commands",data:{autoFocus:!0}}])})),kn=(0,l.cn)(null,(function(e,t){var n=e(ce);return!!n&&(t(Qt,n),!0)}));var Cn=(0,l.cn)(null,(function(e,t,n){var r=e(ce);if(r){var i=function(e,t){var n=t.paneId,r=t.dir,i=E(e,n);if(i){var o=i.index,a=i.paneGroup.panes;return"previous"===r?a[0===o?a.length-1:o-1]:a[o===a.length-1?0:o+1]}}(e(pe),{paneId:r,dir:n});i&&t(dn,i)}}));var Sn=(0,l.cn)(null,(function(e,t,n){var r=n.paneId,i=n.pane;t(Ce,{paneId:r,pane:i});var o=(0,v.b)(i.type)?e(J).find((function(t){return e(t.data).type===i.type&&t.paneId!==r})):null;if(o){var a=E(e(pe),o.paneId);(null===a||void 0===a?void 0:a.floating)||1!==(null===a||void 0===a?void 0:a.paneGroup.panes.length)?t(Qt,o.paneId):t(Ce,{paneId:o.paneId,pane:{type:"commands",data:{autoFocus:!1}}})}})),Tn=(0,l.cn)(null,(function(e,t,n){var r=e(e(Q(n.b)).data);t(Ce,{paneId:n.a,pane:r});var i=E(e(pe),n.b);(null===i||void 0===i?void 0:i.floating)||1!==(null===i||void 0===i?void 0:i.paneGroup.panes.length)?t(Qt,n.b):t(Sn,{paneId:n.b,pane:{type:"commands",data:{autoFocus:!1}}})})),En=n(57389),Rn=n(39541),Gn=n(42174),In=n(82568),_n=n(68973),Dn=n(26357),Bn={overlay:Dn.Is+20,gutterActive:Dn.Is+19,maximizedTooltip:Dn.Is+18,maximizedPane:Dn.Is+17,maximizedHeader:Dn.Is+16,filetreeDragLayer:17,detachPreview:16,draggingPane:15,draggingHeader:14,dropPreview:13,floatingPaneActive:11,floatingHeaderActive:10,floatingPane:9,floatingHeader:8,gutterHovered:6,tiledPaneActive:5,tiledHeaderActive:4,tiledPane:3,tiledHeader:2,gutter:1},Pn=(0,l.cn)(null),An=(0,_n.$)(["backgroundColor","borderRadius","zIndex","border","opacity","visiblity","width","height","x","y","innerScale","innerOpacity"]),Ln=An.cssVars,Un=An.styleTokens,Xn=(0,z.kv)(Pn,(function(e){return(0,En.Z)({},Ln.border,"detachPreview"===(null===e||void 0===e?void 0:e.type)&&e.progress<.98?"1px dashed ".concat(Rn.TV.foregroundDefault):"1px solid ".concat(Rn.TV.accentPrimaryDefault))}),F()),Mn=(0,z.kv)(Pn,(function(e){return null===e||void 0===e?void 0:e.rect}),F()),Nn=(0,z.kv)(Mn,(function(e){var t;return e?(t={},(0,En.Z)(t,Ln.width,e.width+"px"),(0,En.Z)(t,Ln.height,e.height+"px"),t):null}),F()),On=(0,z.kv)(Mn,(function(e){var t;return e?(t={},(0,En.Z)(t,Ln.x,e.x+"px"),(0,En.Z)(t,Ln.y,e.y+"px"),t):null}),F()),Fn=(0,z.kv)(Pn,(function(e){return e?"detachPreview"===e.type?(t={},(0,En.Z)(t,Ln.zIndex,Bn.detachPreview.toString()),(0,En.Z)(t,Ln.borderRadius,"100%"),(0,En.Z)(t,Ln.backgroundColor,"transparent"),t):(n={},(0,En.Z)(n,Ln.zIndex,Bn.dropPreview.toString()),(0,En.Z)(n,Ln.borderRadius,"8px"),(0,En.Z)(n,Ln.backgroundColor,Rn.TV.accentPrimaryDimmer),n):null;var t,n}),F()),Wn=(0,z.kv)(Pn,(function(e){var t,n,r;return e?"detachPreview"===e.type?(n={},(0,En.Z)(n,Ln.opacity,(.5*e.progress).toString()),(0,En.Z)(n,Ln.visiblity,"visible"),n):(r={},(0,En.Z)(r,Ln.opacity,"0.2"),(0,En.Z)(r,Ln.visiblity,"visible"),r):(t={},(0,En.Z)(t,Ln.opacity,"0"),(0,En.Z)(t,Ln.visiblity,"hidden"),t)}),F()),Hn=(0,z.kv)(Pn,(function(e){return(0,En.Z)({},Ln.innerOpacity,"detachPreview"===(null===e||void 0===e?void 0:e.type)?"0.5":"0")}),F()),Vn=(0,z.kv)(Pn,(function(e){return(0,En.Z)({},Ln.innerScale,"detachPreview"===(null===e||void 0===e?void 0:e.type)?e.progress.toString():"1")}),F()),zn=(0,In.X)({root:[{position:"absolute",pointerEvents:"none",opacity:Un.opacity,width:Un.width,height:Un.height,transform:"translate(".concat(Un.x,", ").concat(Un.y,")"),backgroundColor:Un.backgroundColor,borderRadius:Un.borderRadius,border:Un.border,zIndex:Un.zIndex,visibility:Un.visiblity}],inner:[{width:"100%",height:"100%",borderRadius:"100%",background:"radial-gradient(transparent, ".concat(Rn.TV.backgroundHighest,")"),opacity:Un.innerOpacity,transform:"scale(".concat(Un.innerScale,")")}]}),jn=(0,u.memo)((function(){var e=Gt(fe),t=(0,u.useRef)(null);(0,Gn.j)(t,It(On)),(0,Gn.j)(t,It(Nn)),(0,Gn.j)(t,It(Xn)),(0,Gn.j)(t,It(Fn)),(0,Gn.j)(t,It(Wn));var n=(0,u.useRef)(null);return(0,Gn.j)(n,It(Hn)),(0,Gn.j)(n,It(Vn)),(0,c.tZ)("div",{ref:t,css:zn.root,style:{transition:e?"transform 140ms, width 140ms, height 140ms, border-radius 140ms, opacity 140ms ease-out 60ms":void 0},children:(0,c.tZ)("div",{ref:n,css:zn.inner})})})),qn=(0,l.cn)(null,(function(e,t){var n=e(Yn);t(Pn,{type:"dropPreview",rect:n})})),$n=(0,l.cn)(null,(function(e,t,n){t(Pn,null),t(gn,!1),t(en,{panes:n.panes,placement:"leftOf",makeActive:!0,relativeTo:["tiling"]})})),Yn=(0,l.cn)((function(e){var t=e(ae),n=t.width,r=t.height,i=e(le);return{x:Math.round(i.width+8),y:0,width:n-i.width-16,height:r-8}}));var Kn=(0,l.cn)(null,(function(e,t,n){var r=n.paneId,i=n.activate,o=e(pe);"tile"===e(Q(r)).type?t(Ae,(0,x.ZP)(o,(function(e){try{!function(e,t){var n=E(e,t.paneId);if(!n)return!1;var r=n.paneGroupPath;n.paneGroup.activeIndex=n.index;var i=r.map((function(e,t){return r.slice(0,t+1)})),o=!0,a=!1,l=void 0;try{for(var c,u=i[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var s=c.value,d=T(e,s);if(!d)throw new Error("Expected node");if("floatingPaneGroup"===d.type)throw new Error("Expected tiled pane");if(1!==s.length){var f=s[s.length-1];if("number"!==typeof f)throw new Error("Expected number");var p=T(e,B(s));if("split"!==(null===p||void 0===p?void 0:p.type))throw new Error("Expected split");var h=p.stacked?t.minPercentVertical:t.minPercentHorizontal;if(!(d.percent>=h)){var v=f===p.children.length-1;je(e,{leftPath:v?(0,C.Z)(s.slice(0,-1)).concat([f-1]):s,percent:v?p.children[f-1].percent-h:h})}}}}catch(m){a=!0,l=m}finally{try{o||null==u.return||u.return()}finally{if(a)throw l}}}(e,{paneId:r,minPercentHorizontal:30,minPercentVertical:20})}catch(n){throw t(we,{error:n,origin:"Layout: revealPaneAtom/revealTiledPane"}),n}}))):t(Ae,(0,x.ZP)(o,(function(e){try{!function(e,t){var n=E(e,t.paneId);if(!n)return!1;var r=n.paneGroup;if("floatingPaneGroup"!==r.type)throw new Error("Expected floatingPaneGroup");r.activeIndex=n.index,r.rect.width=Math.max(r.rect.width,t.minWidth),r.rect.height=Math.max(r.rect.height,t.minHeight)}(e,{paneId:r,minWidth:200,minHeight:140})}catch(n){throw t(we,{error:n,origin:"Layout: revealPaneAtom/revealFloatingPane"}),n}}))),i&&t(ue,r)})),Qn=(0,l.cn)(null,(function(e,t,n){var r=G(e(pe),"topRight"),i=e(J).find((function(t){return e(t.data).type===n.pane.type}));if((0,v.b)(n.pane.type)&&i)return t(dn,i.paneId),void t(Ce,{paneId:i.paneId,pane:n.pane,makeActive:!0});if(r){var o=r.paneGroup.panes.find((function(t){var n=e(Q(t));if(n.isHidden)return!1;var r=e(n.data);return"filetree"!==r.type&&(!n.isCommitted&&!(0,v.RX)(r.type))}));o?t(Ce,{paneId:o,pane:n.pane,makeActive:!0}):("debugger"===n.pane.type&&t(nn,{pane:n.pane,edge:"left"}),t(un,{panes:[n.pane],paneGroupId:r.paneGroup.id,activate:!0}))}else t(en,{panes:[n.pane],placement:"rightOf",relativeTo:["tiling"],makeActive:!0})}));var Jn={height:0,width:0};var er={width:120,height:120},tr=(0,l.cn)(null),nr=(0,l.cn)(null,(function(e,t,n){var r=e(pe);if("end"===n.type)return t(tr,null),void t(Ae,r);if("update"!==n.type){var i=e(J).find((function(e){return e.paneId===n.paneId}));if(!i){var o=new Error("Expected pane");throw t(we,{error:o,tags:{layoutstate:!0},origin:"Layout: state/resizeFloating"}),o}t(ue,n.paneId),t(tr,{paneId:n.paneId,edge:n.edge,rectStart:e(i.rectAtom)})}else{var a=e(tr);if(!a){var l=new Error("Expected floatingResizeState");throw t(we,{error:l,tags:{layoutstate:!0},origin:"Layout: state/resizeFloating"}),l}var c=e(oe),u=function(e,t){var n=t.edge,r=t.delta,i=t.minSize,o=void 0===i?Jn:i,a=(0,W.Z)({},e),l=o.height,c=o.width;if(function(e){return"top"===e||"topLeft"===e||"topRight"===e}(n)){var u=e.height-r.y;a.height=Math.max(u,l),a.y=u<l?e.y+e.height-l:e.y+r.y}else if(function(e){return"bottom"===e||"bottomLeft"===e||"bottomRight"===e}(n)){var s=e.height+r.y;a.height=Math.max(s,l)}if(function(e){return"right"===e||"bottomRight"===e||"topRight"===e}(n)){var d=e.width+r.x;a.width=Math.max(d,c)}else if(function(e){return"left"===e||"bottomLeft"===e||"topLeft"===e}(n)){var f=e.width-r.x;a.width=Math.max(f,c),a.x=f<c?e.x+e.width-c:e.x+r.x}return a}(a.rectStart,{delta:n.moveDelta,edge:a.edge,minSize:er}),s=a.paneId,d=(0,x.ZP)(r,(function(e){var n=e.floating.find((function(e){return e.panes.includes(s)}));if(!n){var r=new Error("Expected floating");throw t(we,{error:r,tags:{layoutstate:!0},origin:"Layout: state/resizeFloating"}),r}var i=n.rect;i.x=u.x,i.y=u.y-c,i.width=u.width,i.height=u.height+c}));t(Ae,d)}})),rr=(0,l.cn)(null,(function(e,t,n){if(!e(Bt)){var r=e(ae),i=n.pageX,o=n.pageY,a=n.over,l=e(Q(a)),c=Ee({x:i-r.x,y:o-r.y},e(l.rectAtom)),u=c.rect,s=c.placement,d=e(oe);"above"!==s&&"below"!==s?(t(gn,!0),t(Pn,{type:"dropPreview",rect:{x:u.x,y:u.y-d,width:u.width,height:u.height+d}})):t(Pn,{type:"dropPreview",rect:{x:u.x,y:u.y-d+("below"===s?d/2:0),width:u.width,height:u.height+d/2}})}})),ir=(0,l.cn)(null,(function(e,t,n){if(!e(Bt)){var r=e(ae),i=n.pageX,o=n.pageY,a=n.over,l=e(Q(a)),c=Ee({x:i-r.x,y:o-r.y},e(l.rectAtom)).placement;t(Pn,null),t(gn,!1);var u=e(pe);if("newPaneGroup"!==n.type){var s=a;if(s===n.paneId){var d=E(u,n.paneId);if(!d){var f=new Error("Expected pane");throw t(we,{error:f,tags:{layoutstate:!0},origin:"Layout: state/paneDragAndDrop/expectedPane"}),f}if(d.floating)throw new Error("Expected paneGroup");var p=d.paneGroup.panes.find((function(e){return e!==n.paneId}));if(!p)return;s=p}var h=(0,x.ZP)(u,(function(e){try{L(e,n.paneId),Ht(e,{id:Me()(),panes:[n.paneId],relativeTo:s,placement:c}),t(se,n.paneId)}catch(f){throw t(we,{error:f,tags:{layoutstate:!0},origin:"Layout: state/paneDragAndDrop/updatedLayout"}),f}}));t(Ae,h)}else t(en,{panes:n.panes,placement:c,makeActive:!0,relativeTo:l.paneId})}})),or=(0,l.cn)(null,(function(e,t,n){t(St,N({initialLayoutState:null,isHTML:n.isHTML,isStacked:n.isStacked,isExtension:n.isExtension,codeEditorPath:n.entrypoint})),t(Ct,{replId:n.replId,force:!0})})),ar=n(91046),lr=(0,l.cn)(null,(function(e,t,n){var r=n.path,i=n.col,o=n.line,a=n.opener,l=e(pe),c=(null===a||void 0===a?void 0:a.paneType)||(0,v.Dp)({path:r}),u=function(){if("codeEditor"===c)return{type:"codeEditor",data:{path:r,col:i,line:o}};if("extension"===c){var e=a.extensionFileHandler;return{type:"extension",data:{path:r,extensionId:e.extension.extensionId,installationId:e.extension.installationId,name:e.extension.manifest.name,url:(0,ar.Vh)(e.extension.baseUrl,e.handler)}}}return{type:c,data:{path:r}}}();if(n.newPane){var s;t(nn,{pane:u,edge:null!==(s=n.newPaneEdge)&&void 0!==s?s:"left"})}else{var d=G(l,"topLeft");if(d){var f=e(he).find((function(t){return r===(0,v.DQ)(e(t.data))}));if(f&&!n.newTab)return t(dn,f.paneId),void t(Ce,{paneId:f.paneId,pane:u});var p=d.paneGroup;if(n.newTab)t(un,{panes:[u],paneGroupId:p.id,activate:!0,commit:!0,index:p.activeIndex+1});else{var h=e(he).find((function(e){return!e.isCommitted}));if(h)return t(Ce,{paneId:h.paneId,pane:u}),void t(dn,h.paneId);var m=e(he).find((function(t){var n=e(t.data);return"codeEditor"===n.type&&""===(0,v.DQ)(n)}));if(m)return t(Ce,{paneId:m.paneId,pane:u}),void t(dn,m.paneId);var g=p.panes.find((function(t){var n=e(Q(t));return"commands"===e(n.data).type}));if(g)return t(Ce,{paneId:g,pane:u}),void t(dn,g);t(un,{panes:[u],paneGroupId:p.id,activate:!0})}}else t($t,{pane:u,relativeTo:["tiling"],placement:"replace"})}})),cr=(0,l.cn)(null,(function(e,t,n){var r=n.paths.map((function(e){var t=e.match(/(.+?)(:(\d+))?(:(\d+))?$/);if(!t)return!1;var n=[t[1],void 0!==t[3]&&parseInt(t[3],10),void 0!==t[5]&&parseInt(t[5],10)],r=n[0],i=n[1],o=n[2];return{type:(0,v.Dp)({path:r}),data:{path:r,line:i,col:o}}})).filter(Boolean);t(en,{panes:r,placement:"leftOf",relativeTo:["tiling"],makeActive:!0})}));var ur=(0,l.cn)(null,(function(e,t,n){var r=e(J).find((function(t){return e(t.data).type===n.type}));if(r)t(Ce,{paneId:r.paneId,pane:n});else{var i=function(e,t){var n=Math.min(600,e.width),r=Math.min(318.75+t,e.height);return{width:n,height:r,x:e.width-n,y:e.height-r}}(e(ae),e(oe));t(rn,{pane:n,rect:i})}})),sr=(0,l.cn)(null,(function(e,t,n){e(J).filter((function(t){return e(t.data).type===n})).forEach((function(e){return t(Qt,e.paneId)}))})),dr=(0,l.cn)(null),fr=(0,l.cn)((function(e){var t=e(dr);return t&&e(J).find((function(n){var r=e(n.data);return"videoPlayer"===r.type&&r.data.embedUrl===(null===t||void 0===t?void 0:t.embedUrl)}))||null})),pr=(0,l.cn)((function(e){var t=e(fr);return t&&!t.isHidden?t:null})),hr=(0,l.cn)(null,(function(e,t,n){t(dr,n);var r="videoPlayer";n?t(ur,{type:r,data:{title:"Tutorial",embedUrl:n.embedUrl}}):t(sr,r)})),vr=(0,l.cn)(null,(function(e,t){var n=e(fr);if(null===n||void 0===n?void 0:n.isHidden)t(dn,n.paneId);else{var r=e(dr);r&&t(hr,r)}})),mr=(0,l.cn)((function(e){return e(J).find((function(t){return"tutorial"===e(t.data).type}))||null})),gr=(0,l.cn)(null,(function(e,t){var n=e(mr);(null===n||void 0===n?void 0:n.isHidden)?t(dn,n.paneId):(t(en,{panes:[{type:"tutorial"}],placement:"leftOf",percent:25,relativeTo:["tiling"],makeActive:!1}),t(tt))}));function yr(e,t){var n=t.path,r=t.forwards,i=t.vertical,o=T(e,n);if("split"!==(null===o||void 0===o?void 0:o.type))return null;var a=B(n),l=T(e,a);if("split"!==(null===l||void 0===l?void 0:l.type))return null;if(l.stacked!==i)return yr(e,{path:a,forwards:r,vertical:i});var c=l.children.indexOf(o),u=0===c;if(!(c===l.children.length-1&&r||u&&!r)){var s=c+(r?1:-1),d=l.children[s],f=l.children[c];return d?{other:f,node:d,parent:l,path:(0,C.Z)(a).concat([s])}:null}if(1===a.length){var p=u&&!r?l.children.length-1:0;return{parent:l,other:l.children[c],path:(0,C.Z)(a).concat([p]),node:l.children[p]}}return yr(e,{path:a,forwards:r,vertical:i})}function Zr(e,t,n){var r=_(e,t.id);if(!r)return null;var i="up"===n||"down"===n,o="down"===n||"right"===n;return yr(e,{path:r.path,forwards:o,vertical:i})}function br(e,t){var n=t.paneGroupId,r=t.direction,i=I(e,n),o=_(e,n);if("paneGroup"!==(null===i||void 0===i?void 0:i.type)||!o)return!1;var a=o.node.children.indexOf(i);if(-1===a)throw new Error("Expected index");var l=(0,C.Z)(o.path).concat([a]),c="up"===r||"down"===r,u="down"===r||"right"===r,s=0===a,d=a===o.node.children.length-1,f=o.node.stacked===c,p=o.path.length>2;if(f&&!((d&&u||s&&!u)&&p))!function(e,t,n){var r=e.indexOf(t);if(-1===r)throw new Error("Expected item to be in array");if(1!==e.length){var i=r===e.length-1,o=0===r;if("forward"===n&&i)return e.pop(),void e.unshift(t);if("back"===n&&o)return e.shift(),void e.push(t);var a="forward"===n?1:-1;e[r]=e[r+a],e[r+a]=t}}(o.node.children,i,u?"forward":"back");else{var h=Zr(e,i,r);if(h){var v=l.slice(0,h.path.length+("paneGroup"===h.node.type?2:1));!function(e){if("tiling"!==e[0])throw new Error("Expected tiling path")}(v);var m=T(e,v);if(!m||"floatingPaneGroup"===m.type)throw new Error("Expected adjacentNode");if("split"!==h.other.type)throw new Error("Expected split");var g,y,Z,b=function(e,t){var n=e.indexOf(t),r=0,i=!0,o=!1,a=void 0;try{for(var l,c=e.slice(0,n)[Symbol.iterator]();!(i=(l=c.next()).done);i=!0)r+=l.value.percent}catch(u){o=!0,a=u}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}return{start:r,end:r+t.percent}}(h.other.children,m);if("paneGroup"===h.node.type){var w=(g=b,y={start:0,end:100},Z=!h.parent.stacked,g.start-y.start<y.end-g.end?Z?"above":"rightOf":Z?"below":"leftOf");return U(e,(0,C.Z)(o.path).concat([a])),void Ht(e,{placement:w,id:i.id,panes:i.panes,activeIndex:i.activeIndex,percent:i.percent,relativeTo:h.path})}var x=function(e,t){var n,r,i=e.children,o=e.stacked,a="above",l=0,c=0,u=0,s=0,d=!0,f=!1,p=void 0;try{for(var h,v=i[Symbol.iterator]();!(d=(h=v.next()).done);d=!0){var m=h.value,g={start:u,end:u+m.percent},y=(n=t,r=g,Math.max(0,Math.min(n.end,r.end)-Math.max(n.start,r.start)));y>s&&(s=y,l=c,a=t.start-g.start<g.end-t.end?o?"above":"rightOf":o?"below":"leftOf"),u+=m.percent,c++}}catch(Z){f=!0,p=Z}finally{try{d||null==v.return||v.return()}finally{if(f)throw p}}return{placement:a,index:l}}(h.node,b),k=x.index,S=x.placement;U(e,(0,C.Z)(o.path).concat([a])),Ht(e,{placement:S,id:i.id,panes:i.panes,activeIndex:i.activeIndex,percent:i.percent,relativeTo:(0,C.Z)(h.path).concat([k])})}}}var wr=(0,l.cn)(null),xr=(0,l.cn)((function(e){var t=e(wr);if(!t)return null;if("sidebar"===t.target)return{target:"sidebar"};var n=E(e(pe),t.paneId);if(!n)return null;var r=n.paneGroup;return{target:"pane",paneGroupId:r.id,activeIndex:r.activeIndex,panes:r.panes.map((function(t){var n=e(Q(t));return[n.paneId,e(n.data)]}))}})),kr=(0,l.cn)((function(e){var t=e(xr);if(!t)return null;if("sidebar"===t.target)return{target:"sidebar"};var n=t.paneGroupId,r=t.activeIndex;return{target:"pane",paneId:t.panes[r][0],paneGroupId:n}})),Cr=(0,l.cn)((function(e){var t=e(wr);if(!t)return null;if("sidebar"===t.target)return null;if(e(Pt)===t.paneId)return e(Ft);var n=e(Q(t.paneId)),r=e(n.rectAtom),i=e(oe);return{x:Math.round(r.x),y:Math.round(r.y-i),width:Math.round(r.width),height:Math.round(r.height+i)}})),Sr=(0,l.cn)(null,(function(e,t,n){var r=e(ce),i=null!==n&&void 0!==n?n:r;if(i)return t(wr,{target:"pane",paneId:i}),void(i!==r&&t(ue,i));var o=G(e(pe),"topLeft"),a=o?o.paneGroup.panes[o.paneGroup.activeIndex]:null;a&&t(wr,{target:"pane",paneId:a})})),Tr=(0,l.cn)(null,(function(e,t){var n=e(wr);n&&(t(wr,null),"sidebar"!==n.target&&t(Kn,{paneId:n.paneId,activate:!0}))})),Er=(0,l.cn)(null,(function(e,t){if(e(xr))t(Tr);else{var n=e(ce);if(n)t(Sr,n);else{var r=G(e(pe),"topLeft"),i=r?r.paneGroup.panes[r.paneGroup.activeIndex]:null;i&&t(Sr,i)}}})),Rr=(0,l.cn)((function(e){return null!==e(wr)})),Gr=(0,l.cn)(null,(function(e,t){t(wr,null)})),Ir=(0,l.cn)(null,(function(e,t,n){var r=e(ce);if(r&&!e(Pt)){var i=ln({relativeTo:r,rects:new Map(e(J).filter((function(e){return!e.isHidden})).map((function(t){return[t.paneId,e(t.rectAtom)]}))),direction:n});if(i)t(ce,i),e(wr)&&t(wr,{target:"pane",paneId:i})}})),_r=(0,l.cn)(null,(function(e,t,n){var r=e(xr);null!==r&&"sidebar"!==r.target&&t(Ae,(0,x.ZP)(e(pe),(function(e){br(e,{paneGroupId:r.paneGroupId,direction:n.direction})})))}));function Dr(e,t){var n=t.paneGroupPath,r=t.rect,i=T(e,n);if("paneGroup"!==(null===i||void 0===i?void 0:i.type))throw new Error("Expected paneGroup");U(e,n),Ht(e,{id:i.id,isFloating:!0,panes:i.panes,rect:r,activeIndex:i.activeIndex})}var Br=50,Pr=(0,l.cn)(null),Ar=(0,l.cn)((function(e){var t=e(Pr);if(!t)return null;var n=I(e(pe),t.paneGroupId);return n&&n.panes[n.activeIndex]||null})),Lr=(0,l.cn)(null,(function(e,t,n){if(!e(Bt)){var r=e(ae),i=I(e(pe),n.paneGroupId);if(!i){var o=new Error("Expected paneGroup");throw t(we,{error:o,origin:"Layout: state/paneGroupDragAndDrop/dragStartAtom"}),o}var a=e(Q(i.panes[i.activeIndex])),l=e(a.rectAtom),c=e(oe),u={x:l.x,y:l.y-c,width:l.width,height:l.height+c},s=n.mouse.x-(r.x+l.x);t(Pr,{startType:a.type,startPoint:{x:n.mouse.x-r.x,y:n.mouse.y-r.y},paneGroupId:n.paneGroupId,transformOriginX:Math.round(s)+"px",scale:1,fromRect:u,movedAtAll:!1})}})),Ur=(0,l.cn)(null,(function(e,t,n){if(!e(Bt)){var r=e(Pr);if(r){var i=n.delta,o=r.paneGroupId,a=r.fromRect,l=e(pe),c=I(e(pe),o);if(!c){var u=new Error("Expected paneGroup");throw t(we,{error:u,origin:"Layout: state/paneGroupDragAndDrop/dragUpdateAtom"}),u}var s=c.panes[c.activeIndex],d=E(l,s);if(!d){var f=new Error("Expected pane");throw t(we,{error:f,tags:{layoutstate:!0},origin:"Layout: state/paneGroupDragAndDrop/dragUpdateAtom"}),f}var p=Q(s),h=ie(d.paneGroup.id),v=e(oe),m=Math.max(Math.abs(i.x),Math.abs(i.y)),g=m>=Br,y=m>0;if(g&&!d.floating){var Z=e(p).rectAtom,b=e(Z),w=(0,x.ZP)(l,(function(e){try{Dr(e,{paneGroupPath:d.paneGroupPath,rect:{x:b.x+i.x,y:b.y-v+i.y,width:b.width,height:b.height+v}})}catch(u){throw t(we,{error:u,tags:{layoutstate:!0},origin:"Layout: state/paneGroupDragAndDrop/dragUpdateAtom"}),u}}));return t(Ae,w),void t(Xr,n.mouse)}var k=e(h),C=e(p),S=a.x+i.x,T=a.y+i.y;if(t(k.rectAtom,(function(e){return(0,x.ZP)(e,(function(e){e.x=S,e.y=T}))})),t(C.rectAtom,(function(e){return(0,x.ZP)(e,(function(e){e.x=S,e.y=T+v}))})),"floating"!==r.startType){if(!g&&!d.floating){var R=r.startPoint,G=1-.30000000000000004*(_=m/Br,1-Math.sqrt(1-Math.pow(_,2)));return t(Pn,{type:"detachPreview",rect:{x:R.x-Br,y:R.y-Br,width:100,height:100},progress:m/Br}),void t(Pr,(0,x.ZP)(r,(function(e){e.scale=G,e.movedAtAll=e.movedAtAll||y})))}var _;if(!d.floating)throw new Error("Expected floating pane");t(Xr,n.mouse)}}else t(Pn,null)}})),Xr=(0,l.cn)(null,(function(e,t,n){var i=e(oe),o=e(ae),a=function(e){var t=e.views,n=e.mouse,i=e.container,o=e.headerHeight,a=e.sidebarWidth,l={x:Math.min(Math.max(n.x-i.x,1),i.width-1),y:Math.min(Math.max(n.y-i.y,1),i.height-1)},c=!0,u=!1,s=void 0;try{for(var d,f=t[Symbol.iterator]();!(c=(d=f.next()).done);c=!0){var p=(0,r.Z)(d.value,2),h=p[0],v=p[1],m={x:v.x,y:v.y-o,width:v.width,height:o};if(Te(l,{x:m.x-4,y:m.y-4,width:m.width+8,height:o+4}))return{dropPreview:m,drop:{type:"insert",paneId:h}};var g={x:v.x,y:v.y-o,width:v.width,height:v.height+o};if(Te(l,{x:g.x-4,y:g.y-4,width:g.width+8,height:g.height+8})){var y=Ee(l,g);return{dropPreview:y.rect,drop:{type:"split",relativeTo:h,placement:y.placement}}}}}catch(b){u=!0,s=b}finally{try{c||null==f.return||f.return()}finally{if(u)throw s}}var Z=Ee(l,{x:a,y:0,width:i.width-a,height:i.height});return{dropPreview:Z.rect,drop:{type:"split",relativeTo:["tiling"],placement:Z.placement}}}({views:e(J).filter((function(e){return"tile"===e.type&&!e.isHidden})).map((function(t){return[t.paneId,e(t.rectAtom)]})),container:o,mouse:n,headerHeight:i,sidebarWidth:e(pt)}),l=a.drop,c=a.dropPreview;t(Pn,{type:"dropPreview",rect:c}),t(Pr,(function(e){return(0,x.ZP)(e,(function(e){e&&(e.drop=l,e.movedAtAll=!0)}))}))})),Mr=(0,l.cn)(null,(function(e,t,n){var r=n.delta;if(!e(Bt)){t(Pn,null);var i=e(Pr);if(i){var o=i.paneGroupId,a=i.drop,l=i.fromRect,c=e(pe),u=I(e(pe),o);if(!u){var s=new Error("Expected paneGroup");throw t(we,{error:s,origin:"Layout: state/paneGroupDragAndDrop/dragEndAtom"}),s}var d=u.panes[u.activeIndex],f=E(c,d);if(!f){var p=new Error("Expected pane");throw t(we,{error:p,tags:{layoutstate:!0},origin:"Layout: state/paneGroupDragAndDrop/dragEndAtom"}),p}var h=(0,x.ZP)(c,(function(e){if(f.floating&&"floating"===i.startType){var n=T(e,f.paneGroupPath);if("floatingPaneGroup"!==(null===n||void 0===n?void 0:n.type))return;var o=l.x+r.x,c=l.y+r.y;return n.rect.x=o,void(n.rect.y=c)}if(a)if("split"!==a.type){var u=E(e,a.paneId);f.paneGroup.panes.forEach((function(n){!function(e,t){var n="floatingIndex"in t?e.floating[t.floatingIndex]:T(e,t.paneGroupPath);if(!n||!("panes"in n))throw new Error("Expected paneGroup");L(e,t.paneId);var r=void 0===t.index?n.panes.length:t.index;n.panes.splice(r,0,t.paneId),t.activate?n.activeIndex=r:n.activeIndex>=r&&n.activeIndex++}(e,{paneId:n,paneGroupPath:(null===u||void 0===u?void 0:u.paneGroupPath)||["tiling"],activate:!1}),t(se,n)}))}else{if(null===e.tiling){var h=Me()();try{Ht(e,{id:Me()(),panes:[h],placement:"leftOf",relativeTo:["tiling"]})}catch(s){throw t(we,{error:s,tags:{layoutstate:!0},origin:"Layout: state/paneGroupDragAndDrop/dragEndAtom"}),s}}try{!function(e,t){var n=t.from,r=t.to,i=t.placement,o=E(e,n);if(!o)throw new Error("Expected fromPane");var a=o.paneGroup,l=a.panes,c=a.activeIndex;U(e,o.paneGroupPath),Ht(e,{id:o.paneGroup.id,relativeTo:r,panes:l,placement:i,activeIndex:c})}(e,{from:d,to:a.relativeTo,placement:a.placement})}catch(p){throw t(we,{error:p,tags:{layoutstate:!0},origin:"Layout: state/paneGroupDragAndDrop/dragEndAtom"}),p}}}));t(Pr,null),t(Ae,h),"insert"===(null===a||void 0===a?void 0:a.type)&&t(dn,d)}}}));var Nr=(0,l.cn)(null,(function(e,t,n){var r=e(pe),i=e(Q(n)),o=i.rectAtom,a=i.type,l=e(o),c=E(r,n);if(!c){var u=new Error("Expected pane");throw t(we,{error:u,tags:{layoutstate:!0},origin:"Layout: state/toggleFloating"}),u}if("tile"!==a){var s=e(J).filter((function(e){return"tile"===e.type&&!e.isHidden})),d=e(oe),f={x:l.x+l.width/2,y:l.y+l.height/2},p=s.find((function(t){var n=e(t.rectAtom);return Te(f,{x:n.x,y:n.y-d,width:n.width,height:n.height+d})})),h="leftOf";p&&(h=Ee(f,e(p.rectAtom)).placement),t(Ae,(0,x.ZP)(r,(function(e){!function(e,t){var n=t.paneGroupPath,r=t.placement,i=t.to,o=T(e,n);if("floatingPaneGroup"!==(null===o||void 0===o?void 0:o.type))throw new Error("Expected floatingPaneGroup");U(e,n),null!==i?Ht(e,{id:o.id,relativeTo:i,panes:o.panes,activeIndex:o.activeIndex,placement:r}):e.tiling={id:o.id,panes:o.panes,percent:100,type:"paneGroup",activeIndex:o.activeIndex}}(e,{paneGroupPath:c.paneGroupPath,to:(null===p||void 0===p?void 0:p.paneId)||["tiling"],placement:h})})))}else t(Ae,(0,x.ZP)(r,(function(e){Dr(e,{paneGroupPath:c.paneGroupPath,rect:{x:l.x-16,y:l.y-16,width:l.width,height:l.height}})})))})),Or=n(48330),Fr=n(27562),Wr=n(11619);function Hr(e){var t=(0,i.Z)((function(){return(0,l.cn)((function(t){return!!t(Bt)&&t(ce)===e}))}),[e]);return(0,i.Z)((function(){return(0,l.cn)((function(n){if(n(t))return n(Ft);var r=n(Q(e));return n(r.rectAtom)}))}),[e,t])}function Vr(e){var t=Ie(Hr(e)),n=function(e){var t,n=zr(e);return(0,i.Z)((function(){return(0,z.kv)(n,(function(e){return null!==(t=null===e||void 0===e?void 0:e.scale)&&void 0!==t?t:1}))}),[n])}(e);return(0,i.Z)((function(){return(0,l.cn)((function(e){var r=e(t);return{x:r.x,y:r.y,scale:e(n)}}))}),[t,n])}function zr(e){return(0,i.Z)((function(){return(0,l.cn)((function(t){var n=t(Pr);return n&&e===t(Ar)?n:null}))}),[e])}function jr(e){return(0,i.Z)((function(){return(0,l.cn)((function(t){return t(ce)===e}))}),[e])}function qr(e){return(0,i.Z)((function(){return(0,l.cn)((function(t){return t(t(Q(e)).data)}))}),[e])}function $r(e){return(0,i.Z)((function(){return(0,z.kv)(Q(e),(function(e){return"floating"===e.type}))}),[e])}function Yr(e){return(0,i.Z)((function(){return(0,l.cn)((function(t){var n=t(Pr);return n&&e===n.paneGroupId?n:null}))}),[e])}function Kr(e){var t=Yr(e),n=Jr(e),r=ei(e),o=function(e){var t=Qr(e);return(0,i.Z)((function(){return(0,l.cn)((function(e){var n=e(ce);if(!n)return!1;var r=e(t);return!!r&&r.panes.includes(n)}))}),[t])}(e);return(0,i.Z)((function(){return(0,l.cn)((function(e){return e(n)?Bn.maximizedHeader:e(t)?Bn.draggingHeader:e(r)?e(o)?Bn.floatingHeaderActive:Bn.floatingHeader:Bn.tiledHeader}))}),[t,n,r,o])}function Qr(e){return(0,i.Z)((function(){return(0,z.kv)(pe,(function(t){return I(t,e)}))}),[e])}function Jr(e){var t=Qr(e);return(0,i.Z)((function(){return(0,l.cn)((function(e){if(!e(Bt))return!1;var n=e(t);if(!n)return!1;var r=e(ce);return!!r&&n.panes.includes(r)}))}),[t])}function ei(e){var t=ie(e);return(0,i.Z)((function(){return(0,z.kv)(t,(function(e){return"floating"===e.path[0]}))}),[t])}var ti=(0,l.cn)((function(e){return Boolean(e(Pr)||e(tr)||e($e)||e(gn)||e(lt))})),ni=n(54659),ri=n(94716),ii=(0,l.cn)((function(e){if(e(Rr))return null;var t=e(ce);if(!t)return null;var n=e(Q(t)),r=e(n.data),i=n.paneId+r.type;return(0,v.Ur)(r)&&(i+=r.data.path),i}));function oi(e){var t=It(ii),n=Dt(ce),r=(0,ri.Z)(e);(0,u.useEffect)((function(){var e=function(e){e&&(null!==i&&clearTimeout(i),i=setTimeout((function(){var e=n();e&&r.current(e)})))},i=null;e(t.current);var o=t.subscribe(e);return function(){null!==i&&clearTimeout(i),o()}}),[t,r,n])}function ai(){return Gt(we)}function li(){return _t(Be)}function ci(){return Gt(Yn)}function ui(){return Gt(Se)}function si(){var e=_t(Ct);return(0,i.Z)((function(){return a()(e,1e3)}),[e])}function di(){return _t(ke)}function fi(){return Dt(ve)}function pi(e){return Gt((0,i.Z)((function(){return(0,l.cn)((function(t){var n=t(Q(e));return t(n.data)}))}),[e]))}function hi(){return Gt(me)}function vi(){return Gt(j)}function mi(){return Gt($)}function gi(){return Gt(q)}function yi(){return Gt(xe)}function Zi(){return{start:_t(it),update:_t(ot),end:_t(at)}}function bi(){return Gt(kr)}function wi(){return Gt(Cr)}function xi(){return _t(Tr)}function ki(){return _t(Sr)}function Ci(){return _t(Er)}function Si(){return Gt(Rr)}function Ti(){return _t(Gr)}function Ei(){return _t(Ir)}function Ri(){return _t(_r)}function Gi(){return _t(or)}function Ii(){return _t(Ye)}function _i(e){var t=e.isOver,n=_t(Pn);return(0,u.useEffect)((function(){t||n(null)}),[t,n]),{drag:_t(qn),drop:_t($n)}}function Di(){return Gt(de)}function Bi(){var e=_t(ue),t=_t(se);return(0,i.Z)((function(){return function(n,r){(null===r||void 0===r?void 0:r.commit)&&t(n),e(n)}}),[t,e])}function Pi(e){var t=e.paneId;return Gt((0,i.Z)((function(){return(0,l.cn)((function(e){return e(ce)===t}))}),[t]))}function Ai(){return Gt(ce)}function Li(){return Gt((0,i.Z)((function(){return(0,l.cn)((function(e){var t=e(ce);if(!t)return null;var n=E(e(pe),t);return n?n.paneGroup.id:null}))}),[]))}function Ui(){return Gt(Bt)}function Xi(){return _t(Ce)}function Mi(){return _t(se)}function Ni(){return _t(Kn)}function Oi(){return _t(sn)}function Fi(){return _t(Qn)}function Wi(){return _t(Qt)}function Hi(){return _t(Jt)}function Vi(e){var t=e.isOver,n=_t(Pn);return(0,u.useEffect)((function(){t||n(null)}),[t,n]),{drag:_t(rr),drop:_t(ir)}}var zi=(0,l.cn)(null,(function(e,t){t(gn,!1)}));function ji(){return _t(zi)}function qi(e){var t=e.paneGroupId,n=(0,i.Z)((function(){return(0,l.cn)((function(e){var n;return t===(null===(n=e(Pr))||void 0===n?void 0:n.paneGroupId)}))}),[t]);return Gt(n)}function $i(e){var t=e.paneGroupId,n=_t(Lr),r=_t(Ur),o=_t(Mr),a=(0,i.Z)((function(){return{start:function(e){var r=e.mouse;n({paneGroupId:t,mouse:r})},update:function(e){r(e)},end:function(e){o(e)}}}),[t,n,r,o]);return{isDragging:qi({paneGroupId:t}),dnd:a}}function Yi(){return _t(lr)}function Ki(){return _t(cr)}function Qi(){return _t(Nr)}function Ji(){return _t(nr)}function eo(){return{maximizePane:_t(At),maximizePaneGroup:_t(Lt),restoreMaximizedPaneGroup:_t(Ut),toggleMaximizePane:_t(Xt),toggleMaximizedPaneGroup:_t(Mt)}}function to(){return _t(dn)}function no(){return _t(fn)}function ro(){return _t(pn)}function io(){return _t(hn)}function oo(){return Gt(gn)}function ao(){return _t(gn)}function lo(){return _t(Zn)}function co(e){var t=function(e){var t=ie(e);return{activeIndexAtom:(0,i.Z)((function(){return(0,l.cn)((function(e){return e(t).activeIndex}))}),[t]),pathAtom:(0,i.Z)((function(){return(0,z.kv)(t,(function(e){return e.path}),F())}),[t]),panesAtom:(0,i.Z)((function(){return(0,z.kv)(t,(function(e){return e.panes}),F())}),[t]),activeFileAtom:(0,i.Z)((function(){return(0,l.cn)((function(e){var n=e(t),r=e(Q(n.panes[n.activeIndex])),i=e(r.data);return(0,v.Ur)(i)?(0,v.DQ)(i):null}))}),[t])}}(e),n=t.activeIndexAtom,r=t.pathAtom,o=t.panesAtom;return{activeIndex:It(n),path:It(r),panes:It(o),activeTabPaneId:It(bn(e))}}function uo(){return _t(vn)}function so(){return _t(mn)}function fo(){return _t(un)}function po(){return _t(xn)}function ho(){return _t(kn)}function vo(){return _t(Cn)}function mo(){return _t(function(){var e=(0,cn.gv)();return(0,i.Z)((function(){return(0,l.cn)(null,(function(t,n){var r=e();if(r){n(wn,[r]);var i=t(ce);i&&n(se,i)}}))}),[e])}())}function go(){return _t(Sn)}function yo(){return _t(Tn)}function Zo(e){return Gt(function(e){var t=e.paneGroupId;return(0,i.Z)((function(){return(0,l.cn)((function(e){var n=I(e(pe),t);return n?n.panes.length:null}))}),[t])}({paneGroupId:e.paneGroupId}))}function bo(){return Gt((0,i.Z)((function(){return(0,l.cn)((function(e){var t=e(ne),n=[],r=[],i=!0,o=!1,a=void 0;try{for(var l,c=t[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var u=l.value,s=u.panes.map((function(t){return[t,e(e(Q(t)).data)]})),d="floating"===u.path[0];(d?n:r).push({activeIndex:u.activeIndex,paneGroupId:u.id,isFloating:d,panes:s})}}catch(f){o=!0,a=f}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}return{floating:n,tiling:r}}))}),[]))}function wo(){return _t(nn)}function xo(){return _t(jt)}function ko(){return _t(qt)}function Co(){return _t(Yt)}function So(){return _t(hr)}function To(){var e=Gt(dr),t=Gt(pr),n=_t(vr);return t||!e?null:n}function Eo(){return _t(gr)}function Ro(){return e="tutorial",Gt((0,i.Z)((function(){return(0,l.cn)((function(t){return t(J).find((function(n){return!n.isHidden&&t(n.data).type===e}))}))}),[e]));var e}function Go(){return Gt(be)}function Io(){return Dt(pe)}function _o(){var e=(0,Or.Z)(),t=(0,Fr.T)(),n=(0,Wr.Z)().preferences.isLayoutStacked,i=(0,ni.cR)(),o=(0,r.Z)(function(e){var t=(0,W.Z)({},He,e);return Fe.D(Ve,t)}(),1)[0];return(0,u.useCallback)((function(){var r=N({initialLayoutState:null,isStacked:n,isHTML:t,isExtension:i}),a=r.layout,l=r.data;o({variables:{input:{replId:e,state:{layout:a,data:l}}}})}),[e,o,t,n,i])}function Do(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=(0,u.useRef)(e),n=Co(),r=Io();return(0,u.useCallback)((function(i){i.snapped?n({leftPath:i.leftPath,percent:t.current}):Promise.resolve(r()).then((function(r){var o=T(r,i.leftPath);if(!o||!P(o))throw new Error("Expected split or paneGroup");t.current=o.percent,n({leftPath:i.leftPath,percent:e})}))}),[e,n,r])}function Bo(){return _t(fe)}function Po(){return Gt(Ze)}function Ao(e){var t=Ge(Hr(e)),n=Vr(e),r=function(e){var t,n=zr(e);return(0,i.Z)((function(){return(0,z.kv)(n,(function(e){return null!==(t=null===e||void 0===e?void 0:e.transformOriginX)&&void 0!==t?t:"0px"}))}),[n])}(e),o=function(e){var t=Hr(e);return(0,i.Z)((function(){return(0,l.cn)((function(e){var n=e(t),r=e(ae);return{x:Math.round(r.x+n.x),y:Math.round(r.y+n.y)}}))}),[t])}(e),a=function(e){return(0,i.Z)((function(){return(0,z.kv)(Q(e),(function(e){return e.isHidden}))}),[e])}(e),c=function(e){return(0,i.Z)((function(){return(0,l.cn)((function(t){var n=t(Q(e)),r=e===t(ce);return t(Pt)===e?Bn.maximizedPane:e===t(Ar)?Bn.draggingPane:"floating"===n.type?r?Bn.floatingPaneActive:Bn.floatingPane:r?Bn.tiledPaneActive:Bn.tiledPane}))}),[e])}(e),u=function(e){return(0,i.Z)((function(){return(0,l.cn)((function(t){return!!t(Pr)&&t(Ar)!==e&&"floating"!==t(Q(e)).type}))}),[e])}(e),s=function(e){var t=qr(e);return(0,i.Z)((function(){return(0,z.kv)(t,(function(e){return e.type}))}),[t])}(e),d=$r(e),f=jr(e),p=function(e){return(0,i.Z)((function(){return(0,z.kv)(Q(e),(function(e){return e.isCommitted}))}),[e])}(e),h=qr(e),v=function(e){var t=$r(e),n=jr(e),r=zr(e);return(0,i.Z)((function(){return(0,l.cn)((function(e){return!e(Bt)&&Boolean(e(t)||e(n)||e(r))}))}),[t,n,r])}(e),m=function(e){var t=zr(e);return(0,i.Z)((function(){return(0,z.kv)(t,Boolean)}),[t])}(e),g=function(e){var t,n=zr(e);return(0,i.Z)((function(){return(0,z.kv)(n,(function(e){return null!==(t=null===e||void 0===e?void 0:e.movedAtAll)&&void 0!==t&&t}))}),[n])}(e);return{size:It(t),transform:It(n),paneType:It(s),transformOriginXAtom:It(r),viewportInset:It(o),zIndex:It(c),disableInteractions:It(ti),animate:It(u),data:It(h),isFloating:It(d),isActive:It(f),isCommitted:It(p),isHidden:It(a),isBeingDragged:It(m),hasMovedWhileDragging:It(g),headerHeight:It(oe),hasBorder:It(v)}}function Lo(e){var t=function(e){var t=Jr(e);return(0,i.Z)((function(){return(0,l.cn)((function(n){if(n(t))return n(Ot);var r=n(ie(e));return n(r.rectAtom)}))}),[t,e])}(e),n=Ge(t),r=Ie(t),o=function(e){var t,n=Yr(e);return(0,i.Z)((function(){return(0,z.kv)(n,(function(e){return null!==(t=null===e||void 0===e?void 0:e.scale)&&void 0!==t?t:1}))}),[n])}(e),a=function(e){var t,n=Yr(e);return(0,i.Z)((function(){return(0,z.kv)(n,(function(e){return null!==(t=null===e||void 0===e?void 0:e.transformOriginX)&&void 0!==t?t:"0px"}))}),[n])}(e),c=Kr(e),u=function(e){var t=ei(e);return(0,i.Z)((function(){return(0,l.cn)((function(n){var r=n(Pr);return!!r&&r.paneGroupId!==e&&!n(t)}))}),[e,t])}(e),s=Jr(e),d=ei(e);return{size:It(n),position:It(r),scale:It(o),transformOriginX:It(a),zIndex:It(c),animate:It(u),isMaximized:It(s),isFloating:It(d)}}function Uo(e){var t=Ke(e),n=Qe(e),r=Ge(n),o=Ie(n),a=Je(e),c=function(e){var t=Ke(e);return(0,i.Z)((function(){return(0,z.kv)(t,(function(e){var t=e.snapped;return Boolean(t)}))}),[t])}(e),u=et(e),s=function(e){var t=Ge(Qe(e)),n=et(e);return(0,i.Z)((function(){return(0,l.cn)((function(e){var r=e(t),i=r.width,o=r.height;return e(n)?i:o}))}),[t,n])}(e),d=function(e){var t=Ke(e);return(0,i.Z)((function(){return(0,l.cn)((function(e){var n=e(t),r=n.snapped,i=n.stacked;return"right"===r?i?180:90:"left"===r?i?0:270:0}))}),[t])}(e),f=function(e){var t=et(e),n=Je(e),r=Ge(Qe(e));return(0,i.Z)((function(){return(0,l.cn)((function(e){var i=e(r),o=i.width,a=i.height,l=e(n);return e(t)?{width:l?o:24,height:2}:{height:l?a:24,width:2}}))}),[r,t,n])}(e),p=function(e){var t=Ge(Qe(e)),n=et(e);return(0,i.Z)((function(){return(0,l.cn)((function(e){var r=e(t),i=r.width,o=r.height;return(e(n)?i:o)<24}))}),[t,n])}(e);return{handle:It(t),size:It(r),position:It(o),isActive:It(a),isSnapped:It(c),isStacked:It(u),length:It(s),rotation:It(d),gripSize:It(f),gripIsHidden:It(p)}}var Xo=(0,l.cn)(!1),Mo=(0,l.cn)(0);function No(){var e=Ge(ut),t=Ie(ut);return{size:It(e),position:It(t),isActive:It(lt),length:It(st),gripSize:It(ct),isStacked:It(Xo),gripIsHidden:It(Xo),rotation:It(Mo)}}function Oo(){return{width:It(pt),isOpen:It(mt),toggle:_t(nt)}}function Fo(){return Dt(Ze)}function Wo(){return Dt(ge)}function Ho(){return Dt(ye)}},65897:function(e,t,n){n.d(t,{Z:function(){return x}});var r=n(2272),i=n(74985),o=(n(50959),n(85368)),a=n(39541),l=n(61284),c=n(45510),u=n(51631),s=n(72006),d=n(43119),f=n(71440),p=n(27849),h=n(50216);function v(){var e=(0,d.Z)(["\n  mutation UnpublishReplUnpublish($input: UnpublishReplFromCommunityInput!) {\n    unpublishReplFromCommunity(input: $input) {\n      ... on Repl {\n        id\n        ...ReplViewReplActionsPermissions\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n  ","\n"]);return v=function(){return e},e}var m={},g=(0,f.Ps)(v(),p.jN);var y=n(13233),Z=n(625),b=n(62405),w=o.K.form;function x(e){var t=e.repl,n=e.source,d=e.onDone,f=(0,y.Z)(),p=f.showConfirm,v=f.showError,x=(0,r.Z)(function(e){var t=(0,s.Z)({},m,e);return h.D(g,t)}({variables:{input:{replId:t.id}},onCompleted:function(e){if("Repl"===e.unpublishReplFromCommunity.__typename){var r=e.unpublishReplFromCommunity,i=r.runCount,o=r.likeCount,a=r.commentCount;(0,Z.j)(Z.U3.REPL_UNPUBLISHED,{source:n,numRuns:i,numLikes:o,numComments:a,replType:t.publishedAs===u.O2.Template?"template_repl":"regular_repl"}),p("Repl removed from the community.")}else"NotFoundError"===e.unpublishReplFromCommunity.__typename||"UnauthorizedError"===e.unpublishReplFromCommunity.__typename?v(e.unpublishReplFromCommunity.message):v("An unexpected error occurred.");d()},onError:function(){v("Something went wrong. Please try again.")},update:function(e){e.modify({id:e.identify({__typename:"Repl",id:t.id}),fields:{comments:function(e,t){return t.DELETE},tags:function(e,t){return t.DELETE}}})}}),2),k=x[0],C=x[1].loading;return(0,i.BX)(o.G,{css:[a.l0.colWithGap(24)],children:[(0,i.tZ)(l.xv,{variant:"subheadBig",children:"Unpublish this Repl from the Community"}),(0,i.BX)(w,{onSubmit:function(e){e.preventDefault(),k()},css:[a.l0.colWithGap(32)],children:[(0,i.tZ)(l.xv,{children:"Unpublishing a Repl will remove it from the Community. This action will delete all associated posts and tags. The Repl and all its comments will still be visible in your profile, but will not be shown in the Community or Trending views anymore. You can always re-publish the Repl again later."}),(0,i.BX)(o.G,{css:[a.l0.rowWithGap(8),a.l0.justify.end],children:[(0,i.tZ)(o.G,{children:(0,i.tZ)(c.zx,{type:"button",text:"Cancel",onClick:function(){return d()}})}),(0,i.tZ)(o.G,{children:(0,i.tZ)(c.zx,{disabled:C,colorway:"negative",text:C?"Unpublishing...":"Yes, unpublish this Repl",type:"submit",iconLeft:(0,i.tZ)(b.Z,{})})})]})]})]})}},17309:function(e,t,n){n.d(t,{Z:function(){return k}});var r=n(72006),i=n(4405),o=n(77637),a=n(74985),l=n(43312),c=n(50959),u=n(56169),s=n(85368),d=n(39137),f=n(39541),p=n(61284),h=n(32104),v=n(63837),m=n(57467),g=n(76735);var y={success:(0,l.iv)({":not([disabled])":{borderColor:f.TV.accentPositiveStrongest}}),error:(0,l.iv)({":not([disabled])":{borderColor:f.TV.accentNegativeStrongest}}),warning:(0,l.iv)({":not([disabled])":{borderColor:f.TV.yellowStrongest}}),default:void 0,loading:void 0},Z={success:(0,l.iv)([{color:f.TV.accentPositiveStrongest}]),error:(0,l.iv)([{color:f.TV.accentNegativeStrongest}]),warning:(0,l.iv)([{color:f.TV.yellowStrongest}]),default:void 0,loading:void 0},b={success:(0,a.tZ)(v.Z,{}),error:(0,a.tZ)(m.Z,{}),warning:(0,a.tZ)(g.Z,{}),default:void 0,loading:(0,a.tZ)(h.Z,{})},w=function(e){var t=b[e.state];return(0,a.BX)(s.G,{css:[Z[e.state],f.l0.rowWithGap(4)],children:[c.isValidElement(t)?c.cloneElement(t,{size:12}):null,(0,a.tZ)(p.xv,{variant:"small",multiline:!1,children:e.message})]})},x=(0,l.iv)("display:grid;grid-gap:",f.TV.space8,";grid-template-areas:'label . status'\n    'input input input'\n    'validation validation validation'\n    'details details details';> .label{grid-area:label;}> .status{grid-area:status;}> .input{grid-area:input;}> .details{grid-area:details;}> .validation{grid-area:validation;}"),k=function(e){var t,n=e.id,l=e.label,c=e.status,s=e.description,h=e["aria-describedby"],v=e.error,m=e.isValid,g=e.touched,b=e.value,k=e.warning,C=e.successText,S=(0,o.Z)(e,["id","label","status","description","aria-describedby","error","isValid","touched","value","warning","successText"]),T=(0,u.H)(),E=n||T("input"),R=c&&T("status"),G=s?T("description"):void 0,I=[R,G,h].filter(Boolean).join(" "),_=!(t={description:s,error:v,isValid:m,touched:g,value:b,warning:k,successText:C}).touched&&t.description?{state:"default",message:t.description}:t.error?{message:t.error.message,state:"error"}:t.warning?{message:t.warning.message,state:"warning"}:t.isValid?{message:t.successText||"",state:"success"}:t.touched?{message:"",state:"loading"}:void 0;return(0,a.BX)("div",{css:x,children:[(0,a.tZ)("label",{htmlFor:E,className:"label",children:(0,a.tZ)(p.xv,{variant:"small",color:"dimmer",multiline:!1,children:l})}),c?(0,a.tZ)(p.xv,{multiline:!1,variant:"small",color:"dimmer",css:[f.l0.textAlign.right],className:"status",children:c}):null,(0,a.tZ)(d.II,(0,i.Z)((0,r.Z)({id:E,className:"input",value:b,css:[y[(null===_||void 0===_?void 0:_.state)||"default"]]},S),{"aria-describedby":I,"aria-invalid":"error"===(null===_||void 0===_?void 0:_.state)})),(0,a.tZ)("div",{id:G,className:"validation",css:[Z[(null===_||void 0===_?void 0:_.state)||"default"]],"aria-live":"default"!==(null===_||void 0===_?void 0:_.state)?"polite":void 0,children:_?(0,a.tZ)(w,(0,r.Z)({},_)):null})]})}},9829:function(e,t,n){var r=n(72006),i=n(4405),o=n(74985),a=n(43312),l=function(e){return{animationDuration:e?"2000ms":"800ms",animationIterationCount:"infinite",animationTimingFunction:"ease-in-out"}},c=(0,a.F4)("\n  0% { transform: translate(0px, 0px) }\n  25% { transform: translate(0px, 80px) }\n  50% { transform: translate(100px, 80px) }\n  75% { transform: translate(100px, 160px) }\n  100% { transform: translate(0px, 160px) }\n"),u=(0,a.F4)("\n  0% { transform: translate(0px, 0px) }\n  25% { transform: translate(0px, -80px) }\n  50% { transform: translate(-100px, -80px) }\n  100% { transform: translate(-100px, -80px) }\n"),s=(0,a.F4)("\n  0% { transform: translate(0px, 0px) }\n  50% { transform: translate(0px, 0px) }\n  75% { transform: translate(0px, -80px) }\n  100% { transform: translate(100px, -80px) }\n");t.Z=function(e){var t=e.height,n=void 0===t?24:t,a=e.color,d=void 0===a?"#F26207":a,f=e.slow,p=void 0!==f&&f,h={width:84,height:64,fill:d,rx:12};return(0,o.BX)("svg",{width:n/1.2,height:n,viewBox:"0 0 200 240",xmlns:"http://www.w3.org/2000/svg",children:[(0,o.tZ)("rect",(0,i.Z)((0,r.Z)({css:[l(p),{animationName:c}]},h),{x:8,y:8})),(0,o.tZ)("rect",(0,i.Z)((0,r.Z)({css:[l(p),{animationName:u}]},h),{x:108,y:88})),(0,o.tZ)("rect",(0,i.Z)((0,r.Z)({css:[l(p),{animationName:s}]},h),{x:8,y:168}))]})}},84563:function(e,t,n){n.d(t,{J:function(){return Z}});var r=n(72006),i=n(4405),o=n(77637),a=n(74985),l=n(50959),c=n(43312),u=n(92355),s=n(82568),d=n(17807),f=n(27691),p=n(39541),h=n(66539),v=n(85368),m=(0,c.F4)("0%{transform:translate(1px,1px) rotate(0deg);}10%{transform:translate(-1px,-1px) rotate(-1deg);}20%{transform:translate(-1px,0px) rotate(1deg);}30%{transform:translate(1px,1px) rotate(0deg);}40%{transform:translate(1px,-1px) rotate(1deg);}50%{transform:translate(-1px,1px) rotate(-1deg);}60%{transform:translate(-1px,1px) rotate(0deg);}70%{transform:translate(1px,1px) rotate(-1deg);}80%{transform:translate(-1px,-1px) rotate(1deg);}90%{transform:translate(1px,1px) rotate(0deg);}100%{transform:translate(1px,-1px) rotate(-1deg);}"),g=(0,c.F4)("from{opacity:0}to{opacity:1}"),y=(0,s.X)({self:[p.l0.flex.row,p.l0.flex.growAndShrink(1),p.l0.height(p.TV.space12),p.l0.borderRadius(16),p.l0.position.relative,d.gU.filledAndOutlined],progressWrapper:[p.l0.flex.row,p.l0.flex.growAndShrink(1),p.l0.height("100%"),p.l0.width("100%"),p.l0.borderRadius(16),p.l0.overflow("clip"),p.l0.position.relative],progress:[p.l0.position.relative,p.l0.width("100%"),p.l0.height("100%"),{top:0,left:0}],loading:f.p.backgroundPulse(),smoke:[p.l0.width("100%"),p.l0.height("500%"),p.l0.position.absolute,p.l0.left("50%"),p.l0.top("100%"),{opacity:.4,transition:"1s opacity",transform:"translate(-50%, -100%)",pointerEvents:"none"}],fadeInAnim:{animation:"".concat(g," 120ms forwards ease-out alternate")},shakeAnim:{animation:"".concat(m," 0.2s ease infinite")}});function Z(e){var t=e.total,n=e.tooltip,c=e.className,s=e.disabled,d=void 0!==s&&s,f=e.shake,p=void 0!==f&&f,m=e.smoke,g=void 0!==m&&m,Z=e.loading,w=void 0!==Z&&Z,x=e.tooltipHidden,k=void 0!==x&&x,C=(0,o.Z)(e,["total","tooltip","className","disabled","shake","smoke","loading","tooltipHidden"]),S=!(0,u.T)(),T=null;if(n)T=n;else if("current"in C)T="".concat(C.current||"0","/").concat(t);else if("data"in C){var E;T=null===(E=C.data)||void 0===E?void 0:E.map((function(e){var n=e.current;return"".concat(n||"0","/").concat(t)})).join(" | ")}return(0,a.tZ)(h.u,{placement:"top",tooltip:T,maxWidth:280,isDisabled:w||k,children:function(e,n){var o;if(w)o=null;else if("current"in C&&C.current)o=(0,a.tZ)(b,{total:t,disabled:d,current:C.current,color:C.color});else if("data"in C){var u;o=null===(u=C.data)||void 0===u?void 0:u.map((function(e,n){var o;return(0,l.createElement)(b,(0,i.Z)((0,r.Z)({},e),{key:"measure-bar-".concat(n),total:t,disabled:d,isLast:n+1===(null===(o=C.data)||void 0===o?void 0:o.length)}))}))}return(0,l.createElement)(v.G,(0,i.Z)((0,r.Z)({},e),{css:[y.self,y.fadeInAnim,w&&y.loading,S&&p&&y.shakeAnim],className:c,innerRef:n,onClick:void 0,key:w?"loadingMeasureBar":"finishedLoadingMeasureBar",role:"group",children:[(0,a.tZ)(v.G,{css:y.progressWrapper,children:o},"measureBarProgress"),S?(0,a.tZ)("img",{src:"/public/images/smoke.gif",alt:"",style:{opacity:g?void 0:0},css:y.smoke},"measureBarSmoke"):null]}))}})}function b(e){var t=e.current,n=e.total,i=e.color,o=void 0===i?p.TV.accentPrimaryDefault:i,l=e.disabled,c=void 0!==l&&l,u=e.isLast,s=void 0!==u&&u,d=(0,r.Z)({backgroundColor:c?p.TV.outlineDefault:o,width:w(t,n)+"%"},s?{borderTopRightRadius:p.TV.borderRadiusRound,borderBottomRightRadius:p.TV.borderRadiusRound}:{});return(0,a.tZ)(v.G,{css:y.progress,style:d,role:"meter","aria-label":"".concat(t," out of ").concat(n),"aria-valuemin":0,"aria-valuenow":t,"aria-valuemax":n})}function w(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return 0===t||0===e?0:Math.max(0,Math.min(100,e/t*100))}},47161:function(e,t,n){n.d(t,{u:function(){return g}});var r=n(74985),i=n(50959),o=n(82893),a=n.n(o),l=n(16022),c=n(17807),u=n(61284),s=n(39541),d=n(85368),f=n(63128),p=n(80336),h=n(87076),v=d.K.a,m=d.K.button,g=i.forwardRef((function(e,t){var n=e.className,o=e.colorway,g=e.closable,y=e.icon,Z=e.text,b=e.closeAction,w=(0,r.BX)(r.HY,{children:[y&&i.cloneElement(y,{size:16}),(0,r.tZ)(u.xv,{css:s.l0.flex.growAndShrink(1),variant:"small",children:Z})]}),x=o?l.Br[o].default:s.TV.accentPrimaryDefault,k=[s.l0.rowWithGap(4),s.l0.align.center,s.l0.p(4),s.l0.pl(8),s.l0.borderRadius(8),s.l0.flex.growAndShrink(1),o?(0,l.Ss)(o):c.gU.filledAndOutlined,{"&:focus-within":{boxShadow:"0 0 0 2px "+x}}];return(0,r.BX)(d.G,{css:k,children:["href"in e?(0,r.tZ)(a(),{as:e.as,href:e.href,passHref:!0,prefetch:e.prefetch,replace:e.replace,scroll:e.scroll,shallow:e.shallow,children:(0,r.tZ)(v,{ref:t,className:n,rel:e.rel,role:"link",target:e.target,css:[s.l0.reset.button,s.l0.rowWithGap(8),s.l0.center,s.l0.flex.growAndShrink(1)],children:w})}):(0,r.tZ)(m,{ref:t,className:n,onClick:e.onClick,type:e.type,css:[s.l0.reset.button,s.l0.rowWithGap(8),s.l0.center,s.l0.flex.growAndShrink(1)],children:w}),g?(0,r.tZ)(f.Tg,{elevated:!0,css:[s.l0.flex.grow(0),{background:"transparent"}],children:(0,r.tZ)(h.h,{alt:"Close",tooltipHidden:!0,colorway:o,onClick:b,children:(0,r.tZ)(p.Z,{})})}):null]})}));g.displayName="StatusBannerButton"},89479:function(e,t,n){n.d(t,{Z:function(){return o}});var r=n(50959),i=n(45285);function o(){var e=(0,i.Z)().container,t=(0,r.useState)(e.getConnectionState()),n=t[0],o=t[1];return(0,r.useEffect)((function(){return e.onConnectionStateChanged(o)}),[e]),n}},77502:function(e,t,n){n.d(t,{Z:function(){return u}});var r=n(57135),i=n(2272),o=n(96583),a=n(50959),l=n(69921),c=n(94716);function u(e){var t=(0,l.Z)({container:e,service:"exec"}).channel,n=(0,a.useRef)(!1),u=(0,a.useRef)([]),s=(0,c.Z)((0,r.Z)((function(){var e,r,a,l,c,d,f,p,h,v;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:if(n.current)return[2];if(!u.current.length)return[2];if("open"!==(null===t||void 0===t?void 0:t.status))return[2];if(!(e=u.current.pop()))throw new Error("Expected request");return r=(0,i.Z)(e,2),a=r[0],l=a.args,c=a.env,d=r[1],f="",p=t.onCommand((function(e){e.output&&(f+=e.output)})),n.current=!0,[4,t.request({exec:{args:l,env:c}})];case 1:return h=o.sent(),n.current=!1,p(),v=h.channelClosed?"Channel closed":h.error,d(v?{error:v,output:f||null}:{output:f,error:null}),s.current(),[2]}}))}))),d=null===t||void 0===t?void 0:t.status;return(0,a.useEffect)((function(){"open"===d&&s.current()}),[d,s]),(0,a.useCallback)((function(e){var t=e.args,n=e.env;return new Promise((function(e){u.current.push([{args:t,env:n},e]),s.current()}))}),[s])}},68825:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(2272),i=n(50959),o=n(45285),a=n(87861);function l(){var e,t,n=(0,o.Z)().container,l=(0,r.Z)(i.useState(null!==(t=null===(e=n.getContext())||void 0===e?void 0:e.repl)&&void 0!==t?t:null),2),c=l[0],u=l[1];return i.useEffect((function(){return n.onConnectionStateChanged((function(e){var t,r;e===a.em.CONNECTED&&u(null!==(r=null===(t=n.getContext())||void 0===t?void 0:t.repl)&&void 0!==r?r:null)}))}),[u,n]),c}},60369:function(e,t,n){n.d(t,{Z:function(){return o}});var r=n(2272),i=n(50959);function o(e,t){var n=(0,r.Z)(i.useState(null),2),o=n[0],a=n[1];return i.useEffect((function(){var n=!1;return e.readFile(t).then((function(e){n||a(e)})),function(){n=!0}}),[e,t]),o}},38567:function(e,t,n){n.d(t,{Z:function(){return d}});var r=n(9970),i=n(94716),o=n(18171),a=n(73377),l=n(45285),c=n(50959),u=n(3341),s=n.n(u);function d(e){var t,n,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},f=(0,c.useState)(null),p=f[0],h=f[1],v=(0,i.Z)(p),m=null===(n=null!==(t=d.keepStaleResult)&&void 0!==t?t:d.refresh)||void 0===n||n,g=(0,c.useCallback)((function(e){s()(e,v.current)||h(e)}),[v]),y=(0,o.Z)((function(){return e}),(0,r.Z)(u)),Z=(0,l.Z)().git,b=(0,c.useRef)(null),w=(0,c.useCallback)((function(){b.current?b.current():m||g(null);var e=!1;y(Z).then((function(t){e||(g(t),b.current=null)})).catch((function(){if(!e){var t={error:a.aq.UNKNOWN};g(t),b.current=null}})),b.current=function(){e=!0,b.current=null,m||g(null)}}),[g,y,Z,m]);return(0,c.useEffect)((function(){return w()}),[w]),(0,c.useEffect)((function(){var e;if(null===(e=d.refresh)||void 0===e||e)return Z.onRefresh(w)}),[Z,w,d.refresh]),p}},4653:function(e,t,n){function r(e){var t,n=e.getServerCapabilities();return{isAutoCompleteSupported:Boolean(null===n||void 0===n?void 0:n.completionProvider),isCompletionItemResolveSupported:Boolean(null===n||void 0===n||null===(t=n.completionProvider)||void 0===t?void 0:t.resolveProvider),isDocumentSymbolSupported:Boolean(null===n||void 0===n?void 0:n.documentSymbolProvider),isFindReferencesSupported:Boolean(null===n||void 0===n?void 0:n.referencesProvider),isFindDefinitionSupported:Boolean(null===n||void 0===n?void 0:n.definitionProvider),isFindTypeDefinitionSupported:Boolean(null===n||void 0===n?void 0:n.typeDefinitionProvider),isFindImplementationSupported:Boolean(null===n||void 0===n?void 0:n.implementationProvider),isFormatSupported:Boolean(null===n||void 0===n?void 0:n.documentFormattingProvider),isTextDocumentSyncSupported:Boolean(null===n||void 0===n?void 0:n.textDocumentSync),isHoverSupported:Boolean(null===n||void 0===n?void 0:n.hoverProvider),isRenameSupported:Boolean(null===n||void 0===n?void 0:n.renameProvider),isCodeActionsSupported:Boolean(null===n||void 0===n?void 0:n.codeActionProvider),isSignatureHelpSupported:Boolean(null===n||void 0===n?void 0:n.signatureHelpProvider)}}n.d(t,{Z:function(){return r}})},64491:function(e,t,n){n.d(t,{Z:function(){return w},X:function(){return b}});var r=n(2272),i=n(50959),o=n(45285),a=n(72006),l=n(4405),c=n(16783),u=n.n(c),s=n(29457),d=n(68339),f=n(67745);function p(e){return Math.floor(performance.now()-e.startTime)}var h=new WeakSet;function v(e){var t=e.client,n=e.replId,r=e.language;if(!h.has(t)){h.add(t);var i=new Map,o=function(e){var i,o=t.getServerState(),a=null!==(i=t.getServerInfo())&&void 0!==i?i:{name:"unknown",version:"none"},l=o===f.a.INITIALIZED?"".concat(null===a||void 0===a?void 0:a.name,"@").concat(null===a||void 0===a?void 0:a.version):"not_ready: server is ".concat(o);return{method:e.method,replid:n,language:r,startTime:Math.floor(e.startTime),languageServerInfo:l,lspId:t.clientId}},c=u()((function(e,t){var n=p(t);n>1e4&&s.kg.time("LSP unresponsive request",n,o(t))})),v=setInterval((function(){i.forEach((function(e){c(e.id,e)}))}),2e3);return(0,d.uf)([t.onRequest((function(e){var t=e.id,n=e.data;Math.random()<.01&&i.set(t,{id:t,method:n.method,startTime:performance.now()})})),t.onResponse((function(e){var t=e.id,n=e.error,r=i.get(t);null!=r&&(i.delete(t),s.kg.time("LSP request",p(r),(0,l.Z)((0,a.Z)({},o(r)),{result:null==n?"ok":"error"})))})),t.onCancelRequest((function(e){var t=i.get(e);null!=t&&(i.delete(e),s.kg.time("LSP request",p(t),(0,l.Z)((0,a.Z)({},o(t)),{result:"cancelled"})))})),function(){return clearInterval(v)},function(){return h.delete(t)}])}}var m=n(60396),g=n(27562),y=n(48330),Z=n(68825);function b(){var e=(0,Z.Z)(),t=(0,r.Z)(i.useState(null),2),n=t[0],o=t[1];return i.useEffect((function(){(null===e||void 0===e?void 0:e.language)&&o(e.language.startsWith("nix")||e.language.startsWith("html"))}),[e]),n}function w(e){var t=(0,y.Z)(),n=(0,g.Z)(),a=(0,o.Z)(),l=a.lsp,c=a.lspnix,u=(0,r.Z)(i.useState(null),2),s=u[0],d=u[1],f=b();return i.useEffect((function(){if(null!==f&&e){var t,n;if(f)t=c.onClient(e,d);else(null===(n=l.getClient())||void 0===n?void 0:n.isSupportedFile(e))?d(l.getClient()):d(null),t=l.onClient((function(t){(null===t||void 0===t?void 0:t.isSupportedFile(e))?d(t):d(null)}));return function(){t(),d(null)}}}),[l,c,e,f]),i.useEffect((function(){if(s)return v({client:s,replId:t,language:(0,m.D)(e,n)})}),[s,t,e,n]),s}},24746:function(e,t,n){n.d(t,{Z:function(){return o}});var r=n(2272),i=n(50959);function o(e){var t=e.presence,n=(0,r.Z)(i.useState(t.getActiveUsers()),2),o=n[0],a=n[1];return i.useEffect((function(){return a(t.getActiveUsers()),t.onActiveUsersChange((function(e){return a(e)}))}),[t]),o}},84630:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(2272),i=n(50959),o=n(45285);function a(){var e=(0,o.Z)().presence,t=(0,r.Z)(i.useState(e.getFollowedUser()),2),n=t[0],a=t[1];return i.useEffect((function(){return a(e.getFollowedUser()),e.onFollowedUserChanged(a)}),[e]),n}},69861:function(e,t,n){n.d(t,{Z:function(){return i}});var r=n(84630);function i(){var e=(0,r.Z)();return e?e.color:null}},20952:function(e,t,n){n.d(t,{U:function(){return a}});var r=n(74985),i=n(625),o=n(45510),a=function(e){var t=e.isPro,n=e.setShowUpgradeModal,a=e.source;return(0,r.tZ)(o.zx,{colorway:"primary",text:t?"Change Storage":"Upgrade Storage",onClick:function(){(0,i.j)(i.U3.UPGRADE_SELECTED,{source:a,isPro:t}),n(!0)}})}},26938:function(e,t,n){n.d(t,{q:function(){return v}});var r=n(74985),i=n(82568),o=n(76735),a=n(25198),l=n(39541),c=n(85368),u=n(8030),s=n(51631),d=n(29262),f=n(5884),p=(0,i.X)({self:[l.l0.colWithGap(8)]}),h=c.K.a,v=function(){var e,t=(0,f.Pf)({}),n=t.data;if(t.loading&&!n)return null;if(!n||"StorageInfo"!==(null===n||void 0===n||null===(e=n.currentUser)||void 0===e?void 0:e.storageInfo.__typename)||"StorageQuota"!==n.currentUser.storageInfo.storageQuota.__typename||"StorageQuotaStatus"!==n.currentUser.storageInfo.storageQuotaStatus2.__typename||"StorageGracePeriodQuota"!==n.currentUser.storageInfo.storageGracePeriodQuota.__typename||"AccountStorageUtilization"!==n.currentUser.storageInfo.accountStorageUtilization.__typename||"UserPowerUpsTypes"!==n.currentUser.userPowerUpsByType.__typename)return null;var i=n.currentUser,l=i.storageInfo,u=l.storageQuotaStatus2.status,d=l.storageQuota.quota,v=l.storageGracePeriodQuota.quota,y=l.accountStorageUtilization.total,Z=i.userPowerUpsByType.storage,b=Z.currentSku,w=Z.daysLeftInGracePeriod,x=Z.isInGracePeriod,k=i.cyclesAutoRefillConfiguration,C=Number(d),S=Number(y),T=u===s.bS.ExceedingQuota,E="0"!==v,R="CyclesAutoRefillConfiguration"===(null===k||void 0===k?void 0:k.__typename)&&k.enabled,G=E&&T?(0,r.tZ)(h,{href:"https://docs.replit.com/programming-ide/workspace-features/expandable-storage",target:"_blank",children:(0,r.tZ)(a.E,{icon:(0,r.tZ)(o.Z,{}),colorway:"orange",text:"You\u2019re prolific! You\u2019re over the storage limit for your plan. Don\u2019t worry, you have a grace period to upgrade your storage or clear space before the limits affect you. Click to learn more"})}):(0,r.tZ)(g,{quotaStatus:u,quota:C,total:S,hasLimitEnforcementGracePeriod:E}),I=b?(0,r.tZ)(m,{sku:b,hasAutorefillEnabled:R,isInGracePeriod:x,daysLeftInGracePeriod:null!==w&&void 0!==w?w:void 0}):null;return null!==G||null!==I?(0,r.BX)(c.G,{css:p.self,children:[G,I]}):null},m=function(e){var t=e.sku,n=e.hasAutorefillEnabled,i=e.isInGracePeriod,l=e.daysLeftInGracePeriod,c=void 0===l?0:l;return i&&c>0?(0,r.tZ)(a.E,{icon:(0,r.tZ)(o.Z,{}),colorway:"primary",text:"You\u2019re out of Cycles to pay for your ".concat(d.zd[t]," GiB ")+"storage add-on. You have ".concat(c," days left to ")+"refill your Cycles, or you\u2019ll lose access to that storage space. To avoid this in the future, turn Cycles Auto-Refill on."}):n?null:(0,r.tZ)(a.E,{icon:(0,r.tZ)(o.Z,{}),colorway:"primary",text:"Turn on Cycles Auto-Refill to prevent your ".concat(d.zd[t]," ")+"GiB storage add-on from expiring when you run out of Cycles."})},g=function(e){var t=e.quotaStatus,n=e.quota,i=e.total;switch(t){case s.bS.ExceedingQuota:return(0,r.tZ)(a.E,{icon:(0,r.tZ)(o.Z,{}),colorway:"orange",text:"Your account is over the storage limit for your plan. Upgrade your account storage or delete Repls or files to free up space."});case s.bS.ApproachingQuota:return(0,r.tZ)(a.E,{icon:(0,r.tZ)(o.Z,{}),colorway:"primary",text:"Your account is almost out of storage. You\u2019re using ".concat((0,u.s)(i)," / ").concat((0,u.s)(n),". Upgrade your account storage or delete Repls or files to free up space.")});default:return null}}},65629:function(e,t,n){n.d(t,{M:function(){return k},l:function(){return x}});var r=n(57389),i=n(72006),o=n(4405),a=n(74985),l=n(48330),c=n(82568),u=n(39541),s=n(61284),d=n(85368),f=n(38785),p=n(31366),h=n(31992),v=n(27691),m=n(50959),g=n(52230),y=n(8030),Z=n(29262),b=n(26938),w=(0,c.X)({storageBarWrapper:[u.l0.colWithGap(8)],summaryWrapper:[u.l0.colWithGap(8),u.l0.align.start],totalSummaryDot:[u.l0.backgroundColor.backgroundHigher,u.l0.width(8),u.l0.height(8),{borderRadius:"50%"}],replSummaryDot:[u.l0.backgroundColor.accentPrimaryDefault,u.l0.width(8),u.l0.height(8),{borderRadius:"50%"}],summaryRow:[u.l0.rowWithGap(8),u.l0.justify.start,u.l0.align.center,u.l0.fontSize(14),u.l0.height(14)],summaryRowWrap:[u.l0.rowWithGap(8),u.l0.justify.start,u.l0.align.center,u.l0.fontSize(14),{flexWrap:"wrap"}],replSummaryText:[u.l0.color.accentPrimaryStronger],replSummaryUsage:[u.l0.color.accentPrimaryStrongest],replSummaryTextPlaceholder:[v.p.backgroundPulse(u.TV.backgroundHigher,u.TV.backgroundRoot),{opacity:.5},u.l0.borderRadius(4),u.l0.height("100%"),u.l0.width(78)],replUsagePlaceholder:[v.p.backgroundPulse(u.TV.backgroundHigher,u.TV.backgroundRoot),{opacity:.5},u.l0.borderRadius(4),u.l0.height("100%"),u.l0.width(64)],totalUsagePlaceholder:[v.p.backgroundPulse(u.TV.backgroundHigher,u.TV.backgroundRoot),{opacity:.5},u.l0.borderRadius(4),u.l0.height("100%"),u.l0.width(140)],availablePlaceholder:[v.p.backgroundPulse(u.TV.backgroundHigher,u.TV.backgroundRoot),{opacity:.5},u.l0.borderRadius(4),u.l0.height("100%"),u.l0.width(64)],availableText:[u.l0.color.foregroundDimmest,(0,r.Z)({},u.BC.max(390),u.l0.pl(16))]}),x=function(e){var t,n=e.data,r=e.hideAlerts,c=void 0!==r&&r,u=(0,l.Z)(),v=(0,m.useState)(!1),x=v[0],C=v[1];if((0,m.useEffect)((function(){var e,t;n&&"AccountStorageUtilization"===(null===(e=n.currentUser)||void 0===e?void 0:e.storageInfo.accountStorageUtilization.__typename)&&"ReplStorageUtilization"===(null===(t=n.currentUser.storageInfo.accountStorageUtilization.perRepl.find((function(e){return e.repl.id===u})))||void 0===t?void 0:t.__typename)&&C(!0)}),[n,u]),n&&"CurrentUser"===(null===(t=n.currentUser)||void 0===t?void 0:t.__typename)&&"StorageQuota"===n.currentUser.storageInfo.storageQuota.__typename&&"StorageGracePeriodQuota"===n.currentUser.storageInfo.storageGracePeriodQuota.__typename&&"AccountStorageUtilization"===n.currentUser.storageInfo.accountStorageUtilization.__typename&&"UserPowerUpsTypes"===n.currentUser.userPowerUpsByType.__typename&&x){var S,T,E=n.currentUser.username,R=n.currentUser.storageInfo.accountStorageUtilization,G=n.currentUser.storageInfo.storageQuota.quota,I=null!==(S=n.currentUser.userPowerUpsByType.storage.currentSku)&&void 0!==S?S:void 0,_=I?Z.zd[I]:void 0,D=R.total,B=R.perRepl,P=null!==(T=n.currentUser.userSubscriptionType)&&void 0!==T?T:void 0,A=P?Z.XR[P]:Z.XR.FREE,L=Math.max(Number(G)-Number(D),0),U="Bytes",X="(".concat((0,h.fZ)(L,{precision:1,resourceUsageType:U})," available)"),M=B.find((function(e){return e.repl.id===u})),N="0"!==G?(0,a.tZ)(s.xv,{css:w.availableText,multiline:!1,children:X}):null;return(0,a.BX)(d.G,{css:w.storageBarWrapper,children:[(0,a.tZ)(f.$,{context:{type:"workspace_info_modal",replId:u},summary:(0,p._)((0,o.Z)((0,i.Z)({},R),{quota:G})),username:E,resourceUsageType:U}),(0,a.BX)(d.G,{css:w.summaryWrapper,children:[(0,a.BX)(d.G,{css:w.summaryRowWrap,children:[(0,a.BX)(s.xv,{multiline:!1,children:[(0,g.s)(P)," storage: ",A," GiB",_?" + ".concat(_," GiB add-on"):null]}),N]}),(0,a.BX)(d.G,{css:w.summaryRow,children:[(0,a.tZ)("div",{css:w.replSummaryDot}),(0,a.tZ)(s.xv,{css:w.replSummaryText,multiline:!1,children:"This Repl:"}),M?(0,a.tZ)(s.xv,{css:w.replSummaryUsage,multiline:!1,children:(0,y.s)(Number(M.usage))}):(0,a.tZ)(d.G,{css:w.replUsagePlaceholder})]}),c?null:(0,a.tZ)(b.q,{})]})]})}return(0,a.tZ)(k,{})},k=function(){return(0,a.BX)(d.G,{css:w.storageBarWrapper,children:[(0,a.tZ)(f.X,{}),(0,a.BX)(d.G,{css:w.summaryWrapper,children:[(0,a.BX)(d.G,{css:w.summaryRow,children:[(0,a.tZ)(d.G,{css:w.totalUsagePlaceholder}),(0,a.tZ)(d.G,{css:w.availablePlaceholder})]}),(0,a.BX)(d.G,{css:w.summaryRow,children:[(0,a.tZ)(d.G,{css:w.replSummaryTextPlaceholder}),(0,a.tZ)(d.G,{css:w.replUsagePlaceholder})]})]})]})}},74230:function(e,t,n){n.d(t,{h:function(){return P},s:function(){return B}});var r=n(72006),i=n(4405),o=n(74985),a=n(50959),l=n(86302),c=n(82568),u=n(2041),s=n(39541),d=n(61284),f=n(85368),p=n(23127),h=n(12259),v=n(5884),m=n(26721),g=n(45510),y=n(51631),Z=n(88541),b=n(27691),w=n(77712),x=n(23220),k=n(34937),C=n(87076),S=n(3652),T=n(65629),E=n(45157),R=n(20952),G=n(9353),I=n(625),_=(0,c.X)({self:[s.l0.flex.column],content:[s.l0.pt(16),s.l0.px(12),s.l0.pb(12),s.l0.colWithGap(16)],contentSlim:[s.l0.colWithGap(8)],header:[s.l0.p(12),s.l0.rowWithGap(8),s.l0.justify.start,s.l0.align.center,s.l0.border({color:s.TV.outlineDefault,width:1,style:"solid",direction:"bottom"})],actions:[s.l0.colWithGap(8)],footer:[s.l0.rowWithGap(16),s.l0.justify.spaceBetween,s.l0.align.center,s.l0.pt(4)],loadingWrapper:[s.l0.center],storageBarWrapper:[s.l0.colWithGap(8)],summaryWrapper:[s.l0.colWithGap(8),s.l0.align.start],totalSummaryDot:[s.l0.backgroundColor.backgroundHigher,s.l0.width(8),s.l0.height(8),{borderRadius:"50%"}],replSummaryDot:[s.l0.backgroundColor.accentPrimaryDefault,s.l0.width(8),s.l0.height(8),{borderRadius:"50%"}],summaryRow:[s.l0.rowWithGap(8),s.l0.justify.start,s.l0.align.center,s.l0.fontSize(14),s.l0.height(14)],replSummaryText:[s.l0.color.accentPrimaryStronger],replSummaryUsage:[s.l0.color.accentPrimaryStrongest],replUsagePlaceholder:[b.p.backgroundPulse(s.TV.backgroundHigher,s.TV.backgroundRoot),{opacity:.5},s.l0.borderRadius(4),s.l0.height("100%"),s.l0.width(64)],totalUsagePlaceholder:[b.p.backgroundPulse(s.TV.backgroundHigher,s.TV.backgroundRoot),{opacity:.5},s.l0.borderRadius(4),s.l0.height("100%"),s.l0.width(140)],availablePlaceholder:[b.p.backgroundPulse(s.TV.backgroundHigher,s.TV.backgroundRoot),{opacity:.5},s.l0.borderRadius(4),s.l0.height("100%"),s.l0.width(64)],availableText:[s.l0.color.foregroundDimmest]}),D="workspace_info_modal",B=function(e){var t=e.isOpen,n=e.onRequestClose,r=(0,k.Z)(),i=(0,a.useState)(!1),l=i[0],c=i[1],s=(0,v.Pf)({fetchPolicy:"network-only",ssr:!1,notifyOnNetworkStatusChange:!0}),h=s.data,g=s.loading,y=s.refetch,b=(0,Z.P5)({controlName:"flag-buzzing-astrophage",type:"boolean",logFlagToAnalytics:!1});return(0,o.BX)(u.u,{noPadding:!0,isOpen:t,onRequestClose:n,preventClose:l,hideCloseButton:!0,children:[(0,o.BX)(f.G,{css:_.self,children:[(0,o.BX)(f.G,{css:_.header,children:[(0,o.tZ)(C.h,{onClick:n,alt:"Back",size:28,children:(0,o.tZ)(S.Z,{size:16})}),(0,o.tZ)(p.Z,{size:16}),(0,o.tZ)(d.xv,{variant:"subheadDefault",multiline:!1,children:"Repl Storage"})]}),(0,o.tZ)(P,{loading:g,isInDesktopApp:r,data:h,setShowUpgradeModal:c})]}),b?(0,o.tZ)(E.Z,{isOpen:l,context:D,powerUp:"storage",uponPurchaseGoTo:"workspace",onRequestClose:function(){y(),c(!1)}}):(0,o.tZ)(m.Z,{isOpen:l,initialTab:"plans",context:D,uponPurchaseGoTo:"workspace",onPlanCheckoutComplete:function(){y(),c(!1)},onRequestClose:function(){c(!1)}})]})},P=function(e){var t,n=e.isInDesktopApp,c=e.loading,u=e.data,s=e.setShowUpgradeModal,p=e.slim,v=(0,Z.P5)({controlName:"flag-storage-utilization",logFlagToAnalytics:!1});if((0,a.useEffect)((function(){var e;if(u&&"CurrentUser"===(null===(e=u.currentUser)||void 0===e?void 0:e.__typename)&&"StorageQuota"===u.currentUser.storageInfo.storageQuota.__typename&&"AccountStorageUtilization"===u.currentUser.storageInfo.accountStorageUtilization.__typename&&!c)try{var t=parseInt(u.currentUser.storageInfo.storageQuota.quota,10),n=parseInt(u.currentUser.storageInfo.accountStorageUtilization.total,10);(0,I.j)(G.U3.MODAL_VIEWED,{modalName:"workspace_storage_modal",storageQuota:t,storageUtilization:n,storageUtilizationPercentage:n/t})}catch(r){}}),[u,c]),c&&!u)return(0,o.BX)(f.G,{css:p?_.contentSlim:_.content,children:[(0,o.tZ)(T.M,{}),(0,o.tZ)(f.G,{css:_.footer,children:n?(0,o.tZ)(g.zx,{onClick:function(){x.X.openExternalUrl(h.$I.as)},text:"Manage Repls"}):(0,o.tZ)(l.Z,{href:h.$I.href,as:h.$I.as,text:"Manage Repls"})})]});if(u&&"CurrentUser"===(null===(t=u.currentUser)||void 0===t?void 0:t.__typename)&&"StorageQuota"===u.currentUser.storageInfo.storageQuota.__typename&&"AccountStorageUtilization"===u.currentUser.storageInfo.accountStorageUtilization.__typename){var m=u.currentUser.username,b=u.currentUser.userSubscriptionType===y.HP.HackerPro;return(0,o.BX)(f.G,{css:p?_.contentSlim:_.content,children:[u?(0,o.tZ)(T.l,{data:u}):(0,o.tZ)(T.M,{}),(0,o.BX)(f.G,{css:_.footer,children:[(0,o.tZ)(l.Z,(0,i.Z)((0,r.Z)({},(0,w.Ru)(m)),{text:"Manage Repls"})),v?(0,o.tZ)(R.U,{isPro:b,setShowUpgradeModal:s,source:"workspace_storage_modal_upgrade_button"}):null]})]})}return(0,o.BX)(f.G,{css:p?_.contentSlim:_.content,children:[(0,o.tZ)(d.xv,{color:"dimmest",multiline:!1,children:"We had trouble loading your storage information. Please try again later."}),(0,o.tZ)(f.G,{css:_.footer,children:(0,o.tZ)(l.Z,{href:h.$I.href,as:h.$I.as,text:"Manage Repls"})})]})}},52230:function(e,t,n){n.d(t,{s:function(){return i}});var r=n(51631),i=function(e){switch(e){case r.HP.HackerPro:return"Pro plan";case r.HP.Hacker:return"Hacker plan";default:return"Free plan"}}},72019:function(e,t,n){n.d(t,{g:function(){return o}});var r=n(74985),i=n(43312);function o(){return(0,r.tZ)(i.xB,{styles:[{body:{overflow:"hidden"}}]})}},46398:function(e,t,n){n.d(t,{w:function(){return f}});var r=n(72006),i=n(74985),o=n(30826),a=n.n(o),l=n(50959),c=n(10422),u=n(43312),s=n(48468),d=n(39541);function f(e){var t=e.targetElement,n=(0,l.useState)(null),o=n[0],f=n[1],h=(0,s.Z)((function(){t&&f({rect:t.getBoundingClientRect(),docWidth:document.documentElement.clientWidth,docHeight:document.documentElement.clientHeight})}),{type:"throttle",wait:100});if((0,l.useEffect)((function(){t&&h(t)}),[t,h]),(0,l.useEffect)((function(){if(t){var e=a()((function(){f({rect:t.getBoundingClientRect(),docWidth:document.documentElement.clientWidth,docHeight:document.documentElement.clientHeight})}),100);return window.addEventListener("resize",e),window.addEventListener("scroll",e),function(){window.removeEventListener("resize",e),window.removeEventListener("scroll",e)}}}),[t]),!o||!t)return null;var v=(0,u.iv)({backgroundColor:d.TV.backgroundOverlay,zIndex:d.n0+1,position:"fixed",transition:"all 0.5s ease-out"});return(0,c.createPortal)((0,i.BX)(i.HY,{children:[(0,i.tZ)("div",{id:"wat",css:[p((0,r.Z)({side:"left-top"},o)),v]}),(0,i.tZ)("div",{css:[p((0,r.Z)({side:"top-right"},o)),v]}),(0,i.tZ)("div",{css:[p((0,r.Z)({side:"right-bottom"},o)),v]}),(0,i.tZ)("div",{css:[p((0,r.Z)({side:"bottom-left"},o)),v]})]}),document.body)}function p(e){var t=e.side,n=e.rect,r=e.docWidth,i=e.docHeight;switch(t){case"left-top":return(0,u.iv)({top:0,left:0,width:Math.max(0,n.left),height:Math.max(0,n.bottom)});case"top-right":return(0,u.iv)({top:0,right:0,width:"calc(".concat(r,"px - ").concat(Math.max(0,n.left),"px)"),height:Math.max(0,n.top)});case"right-bottom":return(0,u.iv)({bottom:0,right:0,width:"calc(".concat(r,"px - ").concat(Math.max(0,n.right),"px)"),height:"calc(".concat(i,"px - ").concat(Math.max(0,n.top),"px)")});case"bottom-left":return(0,u.iv)({bottom:0,left:0,width:Math.max(0,n.right),height:"calc(".concat(i,"px - ").concat(Math.max(0,n.bottom),"px)")})}}},82781:function(e,t,n){n.d(t,{k:function(){return v}});var r=n(72006),i=n(4405),o=n(74985),a=n(66539),l=n(86065),c=n(50959),u=n(10422),s=n(34335),d=n(16022),f=n(39541),p=n(48468),h=n(99964);function v(e){var t=e.targetElement,n=e.activeStep,v=e.goto,m=e.currentStepIndex,g=e.totalSteps,y=e.done,Z=e.disableAnimation,b=e.placement,w=void 0===b?"right":b,x=e.cypressCloseData,k=void 0===x?"tour-tooltip-close-button":x,C=e.onClickOutside,S=e.innerRef,T=(0,c.useState)(null),E=T[0],R=T[1],G=(0,c.useState)(null),I=G[0],_=G[1],D=(0,s.D)(t,E,{placement:w,modifiers:[{name:"arrow",options:{element:I,padding:8}},{name:"offset",options:{offset:[0,16]}},{name:"preventOverflow",options:{padding:8}},{name:"flip",options:{fallbackPlacements:["top","bottom","left","right"]}},{name:"computeStyles",options:{adaptive:!1}}]}),B=(0,p.Z)((function(){var e;null===(e=D.update)||void 0===e||e.call(D)}),{type:"throttle",wait:100});(0,c.useEffect)((function(){B(t)}),[t,B]),(0,c.useImperativeHandle)(S,(function(){return{updateTooltip:function(){var e;null===(e=D.update)||void 0===e||e.call(D)}}}));var P=(0,h.Z)((function(){C&&C()}),[C]);return(0,u.createPortal)((0,o.BX)("div",(0,i.Z)((0,r.Z)({ref:function(e){P.current=e,R(e)},style:D.styles.popper,css:{transition:Z?"all":"all 0.5s ease-out",zIndex:f.n0+2,width:320}},D.attributes.popper),{children:[(0,o.tZ)(l.O,{title:n.title,content:n.content,onDismiss:function(){y()},currentStepIndex:m,onCurrentStepChange:v,totalSteps:g,cypressCloseData:k}),(0,o.tZ)("span",{style:D.styles.arrow,css:[a.wk,{"&::after":{backgroundColor:d.Br.primary.dimmest,border:"1px solid "+d.Br.primary.dimmer}}],ref:_})]})),document.body)}},26283:function(e,t,n){n.d(t,{r:function(){return g},e:function(){return y.e}});var r=n(57389),i=n(72006),o=n(4405),a=n(2272),l=n(74985),c=n(57488),u=n(50959),s=n(40865),d=n(86065),f=n(2041);function p(){var e=(0,s.X)();if(!e)return null;var t=e.activeStep,n=e.goto,r=e.steps,i=e.done;return(0,l.tZ)(f.u,{preventClose:!0,isOpen:Boolean(t.isModal),onRequestClose:function(){},centered:!0,maxWidth:"fit-content",noPadding:!0,children:(0,l.tZ)(d.O,{title:t.title,content:t.content,onDismiss:function(){i()},currentStepIndex:r.findIndex((function(e){return t.id===e.id})),onCurrentStepChange:n,totalSteps:r.length,cypressCloseData:"tour-tooltip-close-button"})})}var h=n(46398),v=n(82781),m=n(49500);function g(e){var t,n=e.children,d=e.tour,f=e.isDoneInitialOverride,g=e.onStep,y=e.onDone,Z=function(){D(!0),null===y||void 0===y||y(C.id)},b=function(e){P.current=C,null===g||void 0===g||g(e.id),S(e)},w=function(e){var t;if("number"===typeof e)t=e;else{var n=e;t=d.steps.findIndex((function(e){return n===e.id}))}if(!(t<0||t>=d.steps.length)){for(var r=d.steps[t],i=t<B;!E[r.id]&&r.autoSkipIfNoTarget;){if((t=i?t-1:t+1)<0||t>=d.steps.length)return;r=d.steps[t]}b(r)}},x=function(){w(0),D(!1)},k=(0,u.useState)(d.steps[0]),C=k[0],S=k[1],T=(0,u.useState)({}),E=T[0],R=T[1],G=function(e,t){var n,r=(0,c.Pp)({variables:{tours:e}}),i=r.data,o=r.loading,l=(0,a.Z)((0,c.oe)({variables:{name:e},optimisticResponse:{__typename:"RootMutationType",markTourAsSeen:{__typename:"TourSeen",id:e,seen:!0}}}),1)[0],s=(0,u.useState)(t),d=s[0],f=s[1],p=Boolean(null===i||void 0===i||null===(n=i.currentUser)||void 0===n?void 0:n.toursSeen[0].seen);return"boolean"===typeof d&&(p=d),{isLoading:o,isDone:p,setIsDone:function(e){f(e),e&&l()}}}(d.id,f),I=G.isDone,_=G.isLoading,D=G.setIsDone,B=d.steps.findIndex((function(e){return C.id===e.id}));if(-1===B)throw new Error("Current tour step is not in tour steps");var P=(0,u.useRef)(),A=(0,u.useCallback)((function(e,t){var n=d.steps.findIndex((function(t){return e===t.id}));if(-1===n)throw new Error("Invalid step id");if(d.steps[n].isModal)throw new Error("Trying to set a target element for a modal step");R((function(n){return n[e]===t?n:(0,o.Z)((0,i.Z)({},n),(0,r.Z)({},e,t))}))}),[d]),L=E[C.id],U=!I&&!_;window.startTour=function(){m.log("starting tour:",d.id,"from",d.steps[0].id),x()};var X=d.steps.filter((function(e){return!e.autoSkipIfNoTarget||Boolean(E[e.id])})),M=X.findIndex((function(e){return C.id===e.id}));return(0,l.BX)(s.z,{value:(0,o.Z)((0,i.Z)({},d),{setStepTargetElement:A,activeStep:C,next:function(){var e=d.steps[B+1];if(e&&e.autoSkipIfNoTarget)for(var t=B+1;e&&e.autoSkipIfNoTarget&&!E[e.id];)t++,e=d.steps[t];e?b(e):Z()},prev:function(){var e=d.steps[B-1];if(e&&e.autoSkipIfNoTarget)for(var t=B-1;e&&e.autoSkipIfNoTarget&&!E[e.id];)t--,e=d.steps[t];e&&b(e)},goto:w,isDone:I,isLoading:_,done:Z,restart:x}),children:[U&&C.isModal?(0,l.tZ)(p,{}):null,U&&L?(0,l.BX)(l.HY,{children:[(0,l.tZ)(h.w,{targetElement:L}),(0,l.tZ)(v.k,{targetElement:L,activeStep:C,currentStepIndex:M,done:Z,goto:function(e){w(e+B-M)},totalSteps:X.length,disableAnimation:Boolean(0===B||(null===(t=P.current)||void 0===t?void 0:t.isModal))})]}):null,n]})}var y=n(5858)},86419:function(e,t,n){var r;n.d(t,{z:function(){return r}}),function(e){e.FileNode="FILE_NODE",e.FileHeaderTab="FILE_HEADER_TAB",e.Code="CODE",e.Pane="PANE",e.NewPane="NEW_PANE"}(r||(r={}))},52491:function(e,t,n){n.d(t,{Y:function(){return x},Z:function(){return T}});var r=n(74985),i=n(50959),o=n(68935),a=n(14806),l=n(69994),c=n(45853),u=n(45634),s=n(73872),d=n(50968),f=n(39541),p=n(85368),h=n(24743),v=n(68339),m=n(84524),g=(0,d.u)(null),y=(0,d.u)(null),Z=(0,d.u)({from:0,to:0}),b=l.p.mark({class:"ast-hover"}),w=l.tk.baseTheme({".ast-hover":{background:f.TV.backgroundHighest}});function x(e){var t=e.view,n=(0,c.Z)({view:t}),r=(0,m.k)();(0,i.useEffect)((function(){if(r&&t){g.current=t.state;var e=a.Py.define(),i=(0,v.uf)([y.subscribe((function(n){t.dispatch({effects:e.of(n)})})),Z.subscribe((function(e){t.dispatch({selection:{anchor:e.from,head:e.to}})}))]);return t.dispatch({effects:n.reconfigure([l.tk.updateListener.of((function(e){(e.selectionSet||e.docChanged)&&(g.current=e.state)})),a.QQ.define({create:function(){return l.p.none},update:function(t,n){return t=t.map(n.changes),(0,u.j)(n,e,(function(e){t=null==e.value?l.p.none:l.p.set([b.range(e.value.from,e.value.to)])})),t},provide:function(e){return l.tk.decorations.from(e)}}),w])}),function(){g.current=null,i(),t.dispatch({effects:n.reconfigure([])})}}}),[t,r,n])}var k=(0,i.memo)((function(e){var t=e.node,n=e.index,i=e.active,o=e.terminal,a=t.type.name,l={from:t.from,to:t.to};return(0,r.BX)(p.G,{css:[{marginLeft:4*n+(o?4:0)},f.l0.mb(4),f.l0.rowWithGap(2),f.l0.align.center,f.l0.cursor.pointer],onMouseEnter:function(){y.current=l},onClick:function(){y.current=null,Z.current=l},children:[(0,r.tZ)(h.Z,{size:"small",fontFamily:a.length>1?"sans-serif":"monospace",fontWeight:i?"bold":"regular",children:a}),(0,r.BX)(h.Z,{size:"xsmall",truncate:!0,children:["(",t.from," \u2013 ",t.to,")"]})]})}));function C(e,t){for(var n=[];t(e);)n.push(e.node);return n}var S=(0,i.memo)((function(e){var t=e.state,n=(0,o.qz)(t),a=t.selection.main.head,l=(0,i.useMemo)((function(){return C(n.cursorAt(a),(function(e){return e.parent()})).reverse()}),[n,a]),c=(0,i.useMemo)((function(){return C(n.cursorAt(a),(function(e){return e.prevSibling()}))}),[n,a]),u=(0,i.useMemo)((function(){return C(n.cursorAt(a),(function(e){return e.nextSibling()}))}),[n,a]);return(0,r.BX)(p.G,{css:f.l0.ml(4),onMouseLeave:function(){y.current=null},children:[l.map((function(e,t){return(0,r.tZ)(k,{node:e,index:t},t)})),c.map((function(e,t){return(0,r.tZ)(k,{node:e,index:l.length,terminal:!0},t)})),(0,r.tZ)(k,{node:n.resolveInner(t.selection.main.head),index:l.length,terminal:!0,active:!0}),u.map((function(e,t){return(0,r.tZ)(k,{node:e,index:l.length,terminal:!0},t)}))]})}));function T(e){var t=e.isHidden,n=(0,s.Z)(g);return t?null:n?(0,r.tZ)(S,{state:n}):null}},49520:function(e,t,n){n.d(t,{YX:function(){return b},ho:function(){return w}});var r=n(66091),i=n(72006),o=n(4405),a=n(2272),l=n(74985),c=n(50959),u=n(39541),s=n(61284),d=n(85368),f=n(33358),p=n(32104),h=n(28069),v=n(63837),m=n(99453),g=n(73872),y=n(50968),Z=n(91476),b=new(function(){function e(){var t=this;(0,r.Z)(this,e),this.counter=0,this.enabled=!1,this.maxEntries=10,this.logs=(0,y.u)([]),this.clear=function(){t.logs.current=[]}}var t=e.prototype;return t.toggle=function(e){this.enabled=e},t.add=function(e){var t=this,n=this.counter++;if(!this.enabled)return{id:n};var r={id:n,request:e,requestTime:Date.now()};return this.logs.update((function(e){return[r].concat(e).slice(0,t.maxEntries)})),{id:n}},t.update=function(e,t){this.enabled&&this.logs.update((function(n){var r=n.findIndex((function(t){return t.id===e.id}));if(-1===r)return n;var i=n.slice();return i[r]=t(i[r]),i}))},t.complete=function(e,t){this.update(e,(function(e){return(0,o.Z)((0,i.Z)({},e),{response:t,responseTime:Date.now()})}))},t.abort=function(e){this.logs.update((function(t){return t.filter((function(t){return t.id!==e.id||null!=t.responseTime}))}))},e}()),w=function(e){var t,n=e.isHidden,r=(0,g.Z)(b.logs);return n?null:(0,l.BX)(d.G,{css:[u.l0.flex.column],children:[(0,l.BX)(d.G,{css:[u.l0.flex.row,u.l0.align.center,u.l0.m(4),u.l0.position.sticky,u.l0.top(0),u.l0.backgroundColor.backgroundDefault,u.l0.zIndex(1)],children:[(0,l.tZ)(s.xv,{css:u.l0.flex.grow(1),multiline:!1,children:"Requests"}),(0,l.tZ)(f.Z,{onClick:b.clear})]}),(0,l.BX)(d.G,{css:[u.l0.flex.grow(1),u.l0.flex.column,u.l0.overflow("auto")],children:[r.map((function(e){return(0,l.tZ)(x,{log:e},null!==(t=e.id)&&void 0!==t?t:e.requestTime.valueOf())})),!r.length&&(0,l.tZ)(d.G,{css:u.l0.m(4),children:"\ud83d\ude14 No logs yet..."})]})]})},x=(0,c.memo)((function(e){var t=e.log,n=t.requestTime,r=t.responseTime,i=t.request,o=t.response,c=(0,a.Z)((0,m.Z)(!0),2),f=c[0],p=c[1],h=i.code.length>20?"...".concat(i.code.slice(-20)):i.code;return(0,l.BX)(d.G,{css:[u.l0.my(4),u.l0.mx(4)],children:[(0,l.BX)(d.G,{role:"button",onClick:p,onKeyDown:p,tabIndex:0,css:[u.l0.flex.row,u.l0.rowWithGap(4),{"&:hover":{cursor:"pointer",".lspLog-requestMethod":{textDecoration:"underline"}}}],children:[(0,l.BX)(d.G,{css:[u.l0.flex.grow(1),u.l0.rowWithGap(2)],children:[(0,l.tZ)(s.xv,{multiline:!1,children:k(t)}),(0,l.tZ)(s.xv,{multiline:!1,children:(0,l.tZ)("code",{children:h})})]}),(0,l.tZ)(d.G,{css:{opacity:.5},children:null!=r&&(0,l.BX)(s.xv,{css:u.l0.fontSize(13),multiline:!1,children:[r.valueOf()-n.valueOf()," ms"]})})]}),!f&&(0,l.BX)(l.HY,{children:[void 0!==i&&(0,l.tZ)(Z.g,{name:"request",src:i}),void 0!==o&&("CompleteCodeResult"===o.__typename?(0,l.BX)("details",{children:[(0,l.tZ)("summary",{children:"Response"}),(0,l.tZ)("pre",{css:[u.l0.overflow("scroll"),u.l0.borderRadius(4),u.l0.p(4),{border:"1px solid ".concat(u.TV.outlineDimmest)}],children:o.code})]}):(0,l.tZ)(Z.g,{name:"response",src:o}))]})]})}));function k(e){var t=e.response;return t?"CompleteCodeResult"===t.__typename?(0,l.tZ)(v.Z,{}):(0,l.tZ)(h.Z,{}):(0,l.tZ)(p.Z,{})}},44171:function(e,t,n){n.d(t,{Sj:function(){return c},Th:function(){return a},UB:function(){return u},a0:function(){return s},ot:function(){return l}});var r=n(72006),i=n(4405),o=n(91398);var a=(0,o.cn)([]),l=(0,o.cn)({regexp:null,direction:"",highlightOnly:!1}),c=(0,o.cn)((function(e){return function(e,t){if(!t.regexp&&!t.direction)return e.map((function(e){return(0,i.Z)((0,r.Z)({},e),{highlighted:!1})}));var n=function(e){var n=e.dir,r=e.channel,i=e.cmd;return(!t.direction||n===t.direction)&&!!(!t.regexp||!t.regexp.test||r.name&&t.regexp.test(r.name)||r.service&&t.regexp.test(r.service)||t.regexp.test(JSON.stringify(i)))};return t.highlightOnly?e.map((function(e){return n(e)?(0,i.Z)((0,r.Z)({},e),{highlighted:!0}):e})):e.filter(n)}(e(a),e(l))})),u=(0,o.cn)(null,(function(e,t){t(a,[])})),s=(0,o.cn)(!1)},97553:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(2272),i=n(9970),o=n(45285),a=n(92683),l=n(90171),c=n(50959),u=n(44171);function s(){var e=(0,l.useRouter)(),t=(0,o.Z)().container,n=(0,r.Z)((0,a.KO)(u.a0),2),s=n[0],d=n[1],f=(0,a.b9)(u.Th);(0,c.useEffect)((function(){e.query.debug&&d(!0)}),[d,e.query.debug]),(0,c.useEffect)((function(){if(s)return t.client().onDebugLog((function(e){if("log"===e.type){var n;if(e.log.channel)if(n={name:e.log.channel.name,service:null},"string"===typeof e.log.channel.service)n.service=e.log.channel.service;else if(e.log.channel.service){var r=t.getContext();r&&(n.service=e.log.channel.service(r))}f((function(t){return(0,i.Z)(t).concat([{index:t[t.length-1]?t[t.length-1].index+1:0,channel:n,dir:e.log.direction,cmd:e.log.cmd,timestamp:window.performance.now()}])}))}}))}),[s,f,t])}},91476:function(e,t,n){n.d(t,{L:function(){return D},g:function(){return P}});var r=n(57389),i=n(72006),o=n(4405),a=n(2272),l=n(74985),c=n(50959),u=n(56169),s=n(13716),d=n(64491),f=n(87076),p=n(39137),h=n(39541),v=n(61284),m=n(85368),g=n(33358),y=n(34938),Z=n(35458),b=n(32104),w=n(84815),x=n(50575),k=n(89435),C=n(61097),S=n(93658),T=n(79667),E=n(80336),R=n(63837),G=n(99453),I=n(68339),_=n(2954);var D=function(e){var t,n=e.isHidden,r=function(){var e=(0,c.useState)(null),t=e[0],n=e[1],r=(0,s.R3)();return(0,c.useEffect)((function(){r!==t&&null!=r&&n(r)}),[r,t]),t}(),b=(0,d.Z)(r||""),x=(0,u.H)(),k=(0,a.Z)((0,G.Z)(!0),2),C=k[0],S=k[1],E=(0,c.useState)(""),R=E[0],_=E[1],D=(0,c.useState)((function(){return[]})),P=D[0],L=D[1],U=(0,a.Z)((0,G.Z)(!0),2),X=U[0],M=U[1],N=(0,a.Z)((0,G.Z)(!0),2),O=N[0],F=N[1],W=(0,c.useCallback)((function(e){L((function(t){return t.unshift(e),t.slice(0,100)}))}),[]),H=(0,c.useCallback)((function(e,t){L((function(n){for(var r=0;r<n.length;r++)if(n[r].id===e){n[r]=t(n[r]);break}return n.slice(0,100)}))}),[]),V=(0,c.useCallback)((function(){L([])}),[]),z=null===b||void 0===b?void 0:b.isOpen(r||""),j=(0,c.useCallback)((function(){W({canceled:!1,notification:{method:"probe",params:{filePath:r,state:null===b||void 0===b?void 0:b.getServerState(),capabilities:null===b||void 0===b?void 0:b.getServerCapabilities(),diagnostics:z?null===b||void 0===b?void 0:b.getDiagnostics(r||""):[],isOpen:z,isSupportedFile:null===b||void 0===b?void 0:b.isSupportedFile(r||"")}},requestTime:new Date,type:"probe"})}),[W,b,r,z]),q=(0,c.useMemo)((function(){var e=R.split(",").map((function(e){return e.trim()})).filter(Boolean);if(!e.length)return P;var t=P;return X||(t=t.filter((function(e){return null==e.notification}))),O||(t=t.filter((function(e){return null==e.request}))),R&&(t=t.filter((function(t){return e.some((function(e){var n;return null===(n=t.request||t.notification)||void 0===n?void 0:n.method.toLowerCase().includes(e.toLowerCase())}))}))),t}),[P,X,O,R]);return(0,c.useEffect)((function(){return(0,I.uf)([null===b||void 0===b?void 0:b.onRequest((function(e){C&&W({id:e.id,canceled:!1,request:e.data,requestTime:new Date})})),null===b||void 0===b?void 0:b.onResponse((function(e){C&&H(e.id,(function(t){return(0,i.Z)((0,o.Z)((0,i.Z)({},t),{responseTime:new Date}),void 0!==e.result?{response:e.result}:{error:e.error})}))})),null===b||void 0===b?void 0:b.onCancelRequest((function(e){C&&H(e,(function(e){return(0,o.Z)((0,i.Z)({},e),{canceled:!0})}))})),null===b||void 0===b?void 0:b.onDiagnostics((function(e){var t=e.path,n=e.diagnostics;C&&W({canceled:!1,notification:{method:"textDocument/publishDiagnostics for "+t,params:n},requestTime:new Date,type:"diagnostics"})})),null===b||void 0===b?void 0:b.onServerStateChange((function(e){C&&W({canceled:!1,notification:{method:"state",params:{serverState:e}},requestTime:new Date,type:"state"})})),null===b||void 0===b?void 0:b.onServerCapabilitiesChange((function(e){C&&W({canceled:!1,notification:{method:"capabilities",params:{serverCapabilities:e}},requestTime:new Date,type:"capabilities"})})),null===b||void 0===b?void 0:b.onSendNotification((function(e){C&&W({canceled:!1,notification:e,requestTime:new Date})}))])}),[b,W,H,C]),n?null:(0,l.BX)(m.G,{css:[h.l0.flex.column],children:[(0,l.BX)(m.G,{css:[h.l0.flex.row,h.l0.align.center,h.l0.m(4),h.l0.position.sticky,h.l0.top(0),h.l0.backgroundColor.backgroundDefault,h.l0.zIndex(1)],children:[(0,l.tZ)(v.xv,{multiline:!1,children:b?(0,l.BX)(l.HY,{children:[(0,l.tZ)(A,{})," logs for ",(0,l.tZ)("code",{children:r})]}):"No LSP client available"}),(0,l.tZ)(f.h,{alt:"Probe LSP",onClick:j,children:(0,l.tZ)(w.Z,{})}),(0,l.tZ)(m.G,{css:h.l0.flex.grow(1)}),(0,l.tZ)(Z.Z,{id:"toggleIsLogging",isOn:C,onChange:S})," "]}),(0,l.BX)(m.G,{css:[h.l0.rowWithGap(8),h.l0.m(4),h.l0.mb(8)],children:[(0,l.BX)(m.G,{css:h.l0.rowWithGap(4),children:[(0,l.tZ)(T.Z,{}),(0,l.tZ)(v.xv,{multiline:!1,children:"Show"})]}),(0,l.BX)(m.G,{css:h.l0.rowWithGap(4),children:[(0,l.tZ)(y.X,{id:x("showNotifications"),checked:X,onChange:M}),(0,l.tZ)("label",{htmlFor:x("showNotifications"),children:" Notifications"})]}),(0,l.BX)(m.G,{css:h.l0.rowWithGap(4),children:[(0,l.tZ)(y.X,{id:x("showRequests"),checked:O,onChange:F}),(0,l.tZ)("label",{htmlFor:x("showRequests"),children:" Requests"})]}),(0,l.tZ)(m.G,{css:h.l0.flex.growAndShrink(1)}),(0,l.tZ)(m.G,{css:h.l0.rowWithGap(4),children:(0,l.tZ)(g.Z,{onClick:V})})]}),(0,l.tZ)(m.G,{css:h.l0.rowWithGap(4),children:(0,l.tZ)(p.II,{id:x("filterLsp"),placeholder:"Filter by method (Separate by ,)",onChange:function(e){return _(e.target.value)},value:R})}),(0,l.BX)(m.G,{css:[h.l0.flex.grow(1),h.l0.flex.column,h.l0.overflow("auto")],children:[q.map((function(e,n){return(0,l.tZ)(B,{log:e},null!==(t=e.id)&&void 0!==t?t:e.requestTime.valueOf()+""+n)})),!q.length&&(0,l.tZ)(m.G,{css:h.l0.m(4),children:"\ud83d\ude14 No logs yet..."})]})]})},B=c.memo((function(e){var t,n=e.log,r=n.requestTime,i=n.responseTime,o=n.request,c=n.response,u=n.notification,s=n.id,d=(0,a.Z)((0,G.Z)(!0),2),f=d[0],p=d[1];return(0,l.BX)(m.G,{css:[h.l0.my(4),h.l0.mx(4)],children:[(0,l.BX)(m.G,{role:"button",onClick:p,onKeyDown:p,tabIndex:0,css:[h.l0.flex.row,h.l0.rowWithGap(4),{"&:hover":{cursor:"pointer",".lspLog-requestMethod":{textDecoration:"underline"}}}],children:[(0,l.BX)(m.G,{css:[h.l0.flex.grow(1),h.l0.rowWithGap(2)],children:[(0,l.tZ)(v.xv,{className:"lspLog-emoji",multiline:!1,children:L(n)}),(0,l.BX)(v.xv,{className:"lspLog-requestMethod",multiline:!1,children:[(0,l.tZ)("code",{children:null===(t=o||u)||void 0===t?void 0:t.method}),null!=s&&(0,l.BX)("code",{className:"lspLog-logId",css:{opacity:.5},children:["#",s]})]})]}),(0,l.tZ)(m.G,{css:{opacity:.5},children:null!=i&&(0,l.BX)(v.xv,{css:h.l0.fontSize(13),multiline:!1,children:[i.valueOf()-r.valueOf()," ms"]})})]}),!f&&(0,l.BX)(l.HY,{children:[void 0!==o&&(0,l.tZ)(P,{name:"request.params",src:o.params}),void 0!==u&&(0,l.tZ)(P,{name:"notification.params",src:u.params}),void 0!==c&&(0,l.tZ)(P,{name:"response",src:c})]})]})})),P=(0,c.memo)((function(e){var t=e.name,n=e.src;return(0,l.tZ)(m.G,{css:{marginTop:5,".node-ellipsis":{letterSpacing:-2},".object-key span":{letterSpacing:0},".object-key-val":{paddingBottom:"0 !important"},'.object-key + span[style*="margin"], .array-key + span[style*="margin"]':{marginLeft:"0 !important"},".variable-row, .pushed-content .object-key-val":{paddingLeft:"10px !important",paddingBottom:"0 !important"}},children:(0,l.tZ)(_.Z,{json:(0,r.Z)({},t,n)})})})),A=function(){return(0,l.tZ)(v.xv,{multiline:!1,css:{display:"inline",fontStyle:"italic",fontWeight:600,textShadow:"".concat(h.TV.redDimmer," 2px 2px")},children:"LSP"})};function L(e){var t=e.type,n=e.canceled,r=e.response,i=e.notification;return"state"===t?(0,l.tZ)(C.Z,{}):"diagnostics"===t?(0,l.tZ)(x.Z,{}):"capabilities"===t?(0,l.tZ)(k.Z,{}):"probe"===t?(0,l.tZ)(w.Z,{}):n?(0,l.tZ)(E.Z,{}):i?(0,l.tZ)(S.Z,{}):void 0!==r?(0,l.tZ)(R.Z,{}):(0,l.tZ)(b.Z,{})}},99453:function(e,t,n){n.d(t,{Z:function(){return i}});var r=n(50959);function i(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=(0,r.useState)(e),n=t[0],i=t[1],o=(0,r.useCallback)((function(){return i((function(e){return!e}))}),[]);return[n,o]}},54629:function(e,t,n){n.d(t,{AA:function(){return C},CH:function(){return y},Gg:function(){return m},Ne:function(){return T},pV:function(){return x},vk:function(){return b}});var r=n(72006),i=n(43119),o=n(71440),a=n(70751),l=n(24635),c=n(50216);function u(){var e=(0,i.Z)(["\n  fragment AutograderTest on ReplTemplateTest {\n    id\n    name\n    input\n    output\n    name\n    type\n  }\n"]);return u=function(){return e},e}function s(){var e=(0,i.Z)(["\n  query Autograder($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        currentUserPermissions {\n          writeTests\n        }\n        template {\n          id\n        }\n        ioTests {\n          id\n          ...AutograderTest\n        }\n        unitTests {\n          meta {\n            id\n            ...UnitTestsReplUnitTestMeta\n          }\n          tests {\n            id\n            ...UnitTestsReplUnitTest\n            lastRun(replId: $replId) {\n              ... on ReplUnitTestLastRun {\n                status\n              }\n              ... on UserError {\n                message\n              }\n            }\n          }\n        }\n        isProject\n        isProjectFork\n        owner {\n          ... on Team {\n            id\n            isAdmin\n          }\n          ... on User {\n            id\n          }\n        }\n      }\n    }\n  }\n  ","\n  ","\n  ","\n"]);return s=function(){return e},e}function d(){var e=(0,i.Z)(["\n  mutation SaveIOTestResults(\n    $teamId: Int!\n    $replId: String!\n    $results: [IOTestResultInput!]!\n  ) {\n    saveIOTestResults(teamId: $teamId, replId: $replId, results: $results) {\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n"]);return d=function(){return e},e}function f(){var e=(0,i.Z)(["\n  mutation CreateAutograderTest($input: CreateTemplateTestInput!) {\n    createTemplateTest(input: $input) {\n      ... on ReplTemplateTest {\n        id\n        ...AutograderTest\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return f=function(){return e},e}function p(){var e=(0,i.Z)(["\n  mutation UpdateAutograderTest($input: UpdateTemplateTestInput!) {\n    updateTemplateTest(input: $input) {\n      ... on ReplTemplateTest {\n        id\n        ...AutograderTest\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return p=function(){return e},e}function h(){var e=(0,i.Z)(["\n  mutation DeleteAutograderTest($testId: Int!) {\n    deleteTemplateTest(testId: $testId) {\n      ... on ReplTemplate {\n        id\n        tests {\n          id\n          ...AutograderTest\n        }\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return h=function(){return e},e}var v={},m=(0,o.Ps)(u()),g=(0,o.Ps)(s(),m,a.aA,a.Rb);function y(e){var t=(0,r.Z)({},v,e);return l.a(g,t)}var Z=(0,o.Ps)(d());function b(e){var t=(0,r.Z)({},v,e);return c.D(Z,t)}var w=(0,o.Ps)(f(),m);function x(e){var t=(0,r.Z)({},v,e);return c.D(w,t)}var k=(0,o.Ps)(p(),m);function C(e){var t=(0,r.Z)({},v,e);return c.D(k,t)}var S=(0,o.Ps)(h(),m);function T(e){var t=(0,r.Z)({},v,e);return c.D(S,t)}},20864:function(e,t,n){n.d(t,{Mp:function(){return l},ac:function(){return a},ev:function(){return o}});var r=n(43312),i=n(39541),o=(0,r.iv)({position:"relative",overflowY:"auto",width:"100%",height:"100%",zIndex:3}),a=(0,r.iv)({position:"relative",overflowY:"auto",width:"100%",height:"100%",fontSize:"14px",backgroundColor:i.TV.backgroundDefault}),l=(0,r.iv)({display:"flex",alignItems:"stretch",width:"100%",height:"100%","& > .cm-editor":{flex:"1 1 auto",width:"100%"}})},10444:function(e,t,n){n.d(t,{Rz:function(){return y},xy:function(){return b}});var r=n(57135),i=n(9970),o=n(96583),a=n(74985),l=n(99726),c=n(49944),u=n(82568),s=n(39541),d=n(85368),f=n(83005),p=n(87978),h=(0,u.X)({root:[s.l0.rowWithGap(8),s.l0.align.center,s.l0.flex.growAndShrink(1),s.l0.px(8),{userSelect:"none"}],header:[{fontSize:s.TV.fontSizeSmall,opacity:.6},s.l0.color.foregroundDimmest,s.l0.truncate],result:[s.l0.colWithGap(0)],fileName:[s.l0.truncate,s.l0.flex.row]});function v(e){var t=e.height,n=e.active,r=e.match,i=r.directory,o=r.filename;return(0,a.BX)(d.G,{css:h.root,style:{height:t},children:[(0,a.tZ)(f.Z,{path:o.text,size:16}),(0,a.BX)(d.G,{css:h.result,children:[i?(0,a.tZ)(d.G,{css:h.header,children:(0,a.tZ)(c.x,{text:i.text+"/",highlight:i.ranges,dimmed:!n})}):null,(0,a.tZ)(d.G,{css:h.fileName,children:(0,a.tZ)(c.x,{text:o.text,highlight:o.ranges,dimmed:!n})})]})]})}var m={match:l.kN,forward:!1,tiebreakers:[function(e,t,n){return n(e.item).trim().length-n(t.item).trim().length}]};function g(e){for(var t=(0,i.Z)(e.values()).sort((function(e,t){return e-t})),n=[],r=t[0],o=t[0],a=1;a<t.length;a++)t[a]===o+1?o++:(n.push({from:r,to:o+1}),r=t[a],o=t[a]);return n.push({from:r,to:o+1}),n}function y(e,t){return Z.apply(this,arguments)}function Z(){return(Z=(0,r.Z)((function(e,t){return(0,o.__generator)(this,(function(n){switch(n.label){case 0:return[4,new l.Zn(t,m).find(e)];case 1:return[2,n.sent().map((function(e){return{path:e.item,score:e.score,ranges:g(e.positions)}}))]}}))}))).apply(this,arguments)}function b(e){var t=e.path,n=e.ranges,r=function(e){var t=e.ranges,n=e.path,r=(0,p.UO)(n),i=(0,p.Il)(n);if(!i)return{filename:{text:r,ranges:t.length?t:void 0}};var o=i.length,a=o+1,l=[],c=[],u=!0,s=!1,d=void 0;try{for(var f,h=t[Symbol.iterator]();!(u=(f=h.next()).done);u=!0){var v=f.value;if(v.from<o){l.push({from:v.from,to:Math.min(v.to,o)});var m=v.to-a;if(m<=0)continue;c.push({from:0,to:m})}else v.from<a||c.push({from:v.from-a,to:v.to-a})}}catch(g){s=!0,d=g}finally{try{u||null==h.return||h.return()}finally{if(s)throw d}}return{filename:{text:r,ranges:c.length?c:void 0},directory:{text:i,ranges:l.length?l:void 0}}}({path:t,ranges:null!==n&&void 0!==n?n:[]}),i=r.directory?44:32;return{height:i,content:(0,a.tZ)(v,{match:r,height:i})}}},81420:function(e,t,n){n.d(t,{i:function(){return b},w:function(){return g}});var r=n(57135),i=n(2272),o=n(96583),a=n(74985),l=(n(50959),n(33064)),c=n(76735),u=n(94452),s=n(83005),d=n(85368),f=n(61284),p=n(39541),h=n(22011),v=n(10444),m=n(24592);function g(e){return y.apply(this,arguments)}function y(){return(y=(0,r.Z)((function(e){var t,n,r;return(0,o.__generator)(this,(function(i){switch(i.label){case 0:return t=e.search,n=e.paths,r=e.run,t?[4,(0,v.Rz)(t,n)]:[2,n.map((function(e){return{data:{type:"action",label:e,icon:(0,a.tZ)(s.Z,{path:e}),run:function(){return r(e)}},match:function(){return{score:1,render:(0,v.xy)({path:e})}}}}))];case 1:return[2,i.sent().map((function(e){var t=e.path,n=e.score,i=e.ranges;return{data:{type:"action",label:t,icon:(0,a.tZ)(s.Z,{path:t}),run:function(){return r(t)}},match:function(){return{score:n,render:(0,v.xy)({path:t,ranges:i})}}}}))]}}))}))).apply(this,arguments)}function Z(){return(0,a.BX)(d.G,{css:[p.l0.rowWithGap(8)],children:[(0,a.tZ)(c.Z,{}),(0,a.tZ)(f.xv,{color:"dimmest",multiline:!1,children:"Something went wrong searching your Repl's files. Please try again."})]})}function b(e){return(0,u.fA)({type:"context",label:"Files",description:"Find a file",icon:(0,a.tZ)(l.Z,{}),keyboardShortcut:e.keyboardShortcut?e.keyboardShortcut:void 0},{match:(0,u.zf)({defaultScore:3}),commands:function(){var t=(0,r.Z)((function(t){var n,l,u,d,f,p,v,y,b,w,x,k,C,S,T,E;return(0,o.__generator)(this,(function(R){switch(R.label){case 0:return n=e.fs,l=e.shouldHideFile,t.search||t.active&&!e.lazyLoad?[4,Promise.resolve(e.getRecentFiles())]:[2,[]];case 1:return u=R.sent(),d=[],t.search||t.active?[4,n.listFiles()]:[3,3];case 2:if((f=R.sent()).error)return[2,[{data:{type:"error",label:f.error,icon:(0,a.tZ)(c.Z,{})},match:function(){return{score:1,render:{content:(0,a.tZ)(Z,{})}}}}]];if(!f.files)throw new Error("Expected files");p=!0,v=!1,y=void 0;try{for(b=f.files[Symbol.iterator]();!(p=(w=b.next()).done);p=!0)x=w.value,l(x)||u.includes(x)||d.push(x)}catch(G){v=!0,y=G}finally{try{p||null==b.return||b.return()}finally{if(v)throw y}}R.label=3;case 3:return k=[],[4,Promise.all([g({search:t.search,paths:u,run:function(t){e.openFile({path:t})}}),g({search:t.search,paths:d,run:function(t){e.openFile({path:t})}})])];case 4:return C=i.Z.apply(void 0,[R.sent(),2]),S=C[0],T=C[1],S.length&&k.push({data:{type:"context",label:"Recent",icon:(0,a.tZ)(m.Z,{})},commands:function(){return S}}),T.length&&k.push({data:{type:"group",key:"files"},commands:function(){return T}}),0===T.length&&0===S.length&&t.active&&(E=t.search,k.push({data:{label:E,description:"Create a new file",icon:(0,a.tZ)(s.Z,{path:E}),type:"action",run:(0,r.Z)((function(){return(0,o.__generator)(this,(function(t){switch(t.label){case 0:return[4,n.writeFile(E,h.Z.from(""))];case 1:return t.sent().error?[2,{type:"error",message:'Could not create "'+E+'"'}]:(e.openFile({path:E}),[2])}}))}))},match:function(){return{score:1}}})),[2,k]}}))}));return function(e){return t.apply(this,arguments)}}()})}},94452:function(e,t,n){n.d(t,{fA:function(){return i},pl:function(){return a},zf:function(){return o}});var r=n(16918);function i(e,t){var n=t.commands;return{data:e,match:t.match,commands:n}}function o(e){var t=e.defaultScore,n=void 0===t?1:t;return function(e){var t=e.search,i=e.data,o=e.active;if("group"===i.type)return null;if(!t&&o)return{score:n};if(!t)return{score:n};var a=r.Z.match(t,i.label);return a?{score:a.score,render:{ranges:a.ranges}}:null}}var a=o({defaultScore:1})},1088:function(e,t,n){n.d(t,{F:function(){return S},q:function(){return C}});var r=n(57135),i=n(2272),o=n(96583),a=n(74985),l=(n(50959),n(16918)),c=n(94452),u=n(2255),s=n(12260),d=n(76735),f=n(39541),p=n(85368),h=n(61284),v=n(82568),m=n(83005),g=n(250),y=n(68702),Z=(0,v.X)({root:[f.l0.colWithGap(4),f.l0.align.start,f.l0.flex.growAndShrink(1),f.l0.p(8)],header:[f.l0.rowWithGap(4),f.l0.align.center],singleLine:[{whiteSpace:"nowrap",fontFamily:f.TV.fontFamilyCode},f.l0.truncate,f.l0.color.foregroundDimmest]});function b(e){var t=e.path,n=e.line;return(0,a.BX)(p.G,{css:Z.root,children:[(0,a.BX)(p.G,{css:Z.header,children:[(0,a.tZ)(m.Z,{path:t,size:12}),(0,a.BX)(h.xv,{variant:"small",color:"dimmest",multiline:!1,children:[t.replace(/^\.\//,""),":",n.lineNumber]})]}),(0,a.tZ)(p.G,{css:Z.singleLine,children:(0,a.tZ)(u.xK,{source:n.content,matches:n.matches})})]})}function w(){return(0,a.BX)(p.G,{css:[f.l0.px(8),f.l0.rowWithGap(8),f.l0.align.center],children:[(0,a.tZ)(d.Z,{}),(0,a.tZ)(h.xv,{color:"dimmest",multiline:!1,children:"Something went wrong searching your Repl's contents. Please try again."})]})}function x(){return(0,a.BX)(p.G,{css:[f.l0.rowWithGap(8),f.l0.p(8),f.l0.align.center],children:[(0,a.tZ)(d.Z,{}),(0,a.tZ)(h.xv,{color:"dimmest",multiline:!1,children:"Displaying only part of the results, try being more specific with your search."})]})}function k(){return(0,a.tZ)(p.G,{css:[f.l0.rowWithGap(8),f.l0.p(8),f.l0.align.center],children:(0,a.tZ)(h.xv,{color:"dimmest",multiline:!1,children:"Nothing came up searching your Repl's content."})})}var C=(0,g.l2)({cmdOrCtrl:!0,shift:!0,key:"f"});function S(e){var t,n=(0,y.e)({container:e.container});return(0,c.fA)({type:"context",description:"Search through your files",label:"Search",icon:(0,a.tZ)(s.Z,{}),keyboardShortcut:e.keyboardShortcut?C:void 0},{match:(0,c.zf)({defaultScore:2}),commands:function(){var c=(0,r.Z)((function(r){var c,u,s,f,h,v,g,y,Z,C,S,T;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return r.search?!r.active&&e.activeOnly?[2,[]]:(c=Math.random(),t=c,[4,n({query:r.search})]):[2,[]];case 1:if(u=o.sent(),s=u.results,f=u.error,h=u.isPartialResult,c!==t)return[2,[]];if(null!==f)return r.active?[2,[{data:{type:"error",label:"error",icon:(0,a.tZ)(d.Z,{})},match:function(){return{score:1,render:{content:(0,a.tZ)(w,{})}}}}]]:[2,[]];v=[],g=!0,y=!1,Z=void 0;try{for(C=function(){var t=(0,i.Z)(T.value,2),n=t[0];t[1].forEach((function(t){var i=t.matches[0].column;v.push({match:function(){var e=l.Z.match(r.search,t.content);return{score:(null===e||void 0===e?void 0:e.score)||1,render:{height:60,content:(0,a.tZ)(b,{path:n,line:t})}}},data:{type:"action",label:n,icon:(0,a.tZ)(m.Z,{path:n}),key:[n,t.lineNumber,i].join(":"),run:function(){e.openFile({path:n,line:t.lineNumber,col:i})}}})}))},S=Object.entries(s)[Symbol.iterator]();!(g=(T=S.next()).done);g=!0)C()}catch(E){y=!0,Z=E}finally{try{g||null==S.return||S.return()}finally{if(y)throw Z}}if(0===v.length&&r.active)return[2,[{data:{type:"output",label:"",icon:(0,a.tZ)(p.G,{})},match:function(){return{score:1,render:{content:(0,a.tZ)(k,{})}}}}]];if(r.active){if(0===v.length)return[2,[{data:{type:"output",label:"",icon:(0,a.tZ)(p.G,{})},match:function(){return{score:1,render:{content:(0,a.tZ)(k,{})}}}}]];h&&v.push({data:{type:"error",label:"error",icon:(0,a.tZ)(d.Z,{})},match:function(){return{score:1/0,render:{content:(0,a.tZ)(x,{})}}}})}return[2,v]}}))}));return function(e){return c.apply(this,arguments)}}()})}},67570:function(e,t,n){n.d(t,{Z:function(){return ke}});var r=n(57135),i=n(72006),o=n(4405),a=n(2272),l=n(96583),c=n(74985),u=n(50959),s=n(91926),d=n(32343),f=n(48306),p=n.n(f),h=function(e){var t=(0,d.Z)({},e);return(0,c.BX)(c.HY,{children:[(0,c.tZ)(p(),{id:"fcfe85a13ecbf46b",children:".one.jsx-fcfe85a13ecbf46b{opacity:.1;-webkit-animation:dot 1.5s ease-in-out infinite;-moz-animation:dot 1.5s ease-in-out infinite;-o-animation:dot 1.5s ease-in-out infinite;animation:dot 1.5s ease-in-out infinite;-webkit-animation-delay:0s;-moz-animation-delay:0s;-o-animation-delay:0s;animation-delay:0s}.two.jsx-fcfe85a13ecbf46b{opacity:.1;-webkit-animation:dot 1.5s ease-in-out infinite;-moz-animation:dot 1.5s ease-in-out infinite;-o-animation:dot 1.5s ease-in-out infinite;animation:dot 1.5s ease-in-out infinite;-webkit-animation-delay:.1s;-moz-animation-delay:.1s;-o-animation-delay:.1s;animation-delay:.1s}.three.jsx-fcfe85a13ecbf46b{opacity:.1;-webkit-animation:dot 1.5s ease-in-out infinite;-moz-animation:dot 1.5s ease-in-out infinite;-o-animation:dot 1.5s ease-in-out infinite;animation:dot 1.5s ease-in-out infinite;-webkit-animation-delay:.2s;-moz-animation-delay:.2s;-o-animation-delay:.2s;animation-delay:.2s}@-webkit-keyframes dot{\n            0% {\n              opacity: 0.1;\n            }\n            50% {\n              opacity: 1;\n            }\n            100% {\n              opacity: 0.1;\n            }\n        }@-moz-keyframes dot{\n            0% {\n              opacity: 0.1;\n            }\n            50% {\n              opacity: 1;\n            }\n            100% {\n              opacity: 0.1;\n            }\n        }@-o-keyframes dot{\n            0% {\n              opacity: 0.1;\n            }\n            50% {\n              opacity: 1;\n            }\n            100% {\n              opacity: 0.1;\n            }\n        }@keyframes dot{\n            0% {\n              opacity: 0.1;\n            }\n            50% {\n              opacity: 1;\n            }\n            100% {\n              opacity: 0.1;\n            }\n        }"}),(0,c.tZ)("span",(0,o.Z)((0,i.Z)({},t),{className:"jsx-fcfe85a13ecbf46b "+(t&&null!=t.className&&t.className||"one"),children:"."})),(0,c.tZ)("span",(0,o.Z)((0,i.Z)({},t),{className:"jsx-fcfe85a13ecbf46b "+(t&&null!=t.className&&t.className||"two"),children:"."})),(0,c.tZ)("span",(0,o.Z)((0,i.Z)({},t),{className:"jsx-fcfe85a13ecbf46b "+(t&&null!=t.className&&t.className||"three"),children:"."}))]})},v=n(39137),m=n(61284),g=n(45510),y=n(43119),Z=n(71440),b=n(24635),w=n(50216);function x(){var e=(0,y.Z)(["\n  query ConfigReplLanguage($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        language\n      }\n    }\n  }\n"]);return x=function(){return e},e}function k(){var e=(0,y.Z)(["\n  mutation ConfigUpdateRepl($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n      }\n    }\n  }\n"]);return k=function(){return e},e}var C={},S=(0,Z.Ps)(x());var T=(0,Z.Ps)(k());var E=n(45285),R=n(2041),G=n(35301),I=n(39541),_=n(17807),D=n(85368),B=n(12318),P=n(76735),A=n(10702),L=n(48330),U=n(75920),X=n(63064),M=n(94716),N=n(29838),O=n(12260),F=n(16918),W=n(21371);function H(e){var t,n=e.options,r=e.initialSelectedOption,l=e.inputRef,c=e.setInputValue,s=(0,a.Z)(u.useState(""),2),d=s[0],f=s[1],p=(t={options:n,filter:d},u.useMemo((function(){return t.filter?F.Z.filter(t.filter.toLowerCase(),t.options).map((function(e){return e.original})):t.options}),[t.options,t.filter])),h=(0,W.Kb)({items:p,initialHighlightedIndex:0,initialSelectedItem:r,stateReducer:function(e,t){var n,r,a=t.type,u=t.changes;(a===W.Kb.stateChangeTypes.ItemClick||a===W.Kb.stateChangeTypes.InputKeyDownEnter&&u.selectedItem)&&(null===(n=l.current)||void 0===n||n.blur());return a!==W.Kb.stateChangeTypes.InputBlur||u.selectedItem?a===W.Kb.stateChangeTypes.InputBlur&&u.selectedItem?(c(null!==(r=u.selectedItem)&&void 0!==r?r:""),u):u:(0,o.Z)((0,i.Z)({},u),{isOpen:!0})}});return{filteredOptions:p,combobox:h,setFilter:f,filter:d}}var V=n(66482),z=n(43312),j=n(97858),q=n(12341),$=(0,z.iv)([I.l0.py(8),I.l0.pl(8),I.l0.pr(32),{color:"inherit",outline:"0 none",border:"1px solid",fontSize:"inherit",lineHeight:I.TV.space16,display:"block",width:"100%","::placeholder, :disabled":{color:I.TV.foregroundDimmer,borderColor:"transparent"},cursor:"text"}]),Y=(0,z.iv)([I.l0.reset.button,_.gU.listItem,I.l0.borderRadius(8),I.l0.center,{width:24,height:24}]),K=D.K.button;function Q(e){var t=e.id,n=e.onSelect,r=e.onInit,l=e.options,s=e.initialSelectedOption,d=e.placeholderText,f=e.autoFocus,p=e.disabled,h=u.useRef(null),g=(0,a.Z)(u.useState(null!==s&&void 0!==s?s:""),2),y=g[0],Z=g[1],b=H({options:l,initialSelectedOption:s,inputRef:h,setInputValue:Z}),w=b.filteredOptions,x=b.filter,k=b.combobox,C=b.setFilter,S=(0,M.Z)(n),T=(0,M.Z)(r);return u.useEffect((function(){s&&(T.current(s),Z(s),C(""))}),[s]),(0,N.Z)((function(){var e;k.selectedItem&&(null===(e=h.current)||void 0===e||e.blur(),S.current(k.selectedItem),Z(k.selectedItem),C(""))}),[k.selectedItem,S]),u.useEffect((function(){s&&(k.selectItem(s),Z(s),C(""))}),[s]),(0,c.BX)(D.G,{children:[(0,c.tZ)("div",(0,o.Z)((0,i.Z)({},k.getComboboxProps()),{children:(0,c.BX)(D.G,{css:[I.l0.flex.row,{position:"relative"}],children:[(0,c.tZ)(D.G,{css:[I.l0.flex.growAndShrink(1)],children:(0,c.tZ)(v.II,(0,o.Z)((0,i.Z)({},k.getInputProps({id:t,spellCheck:!1,autoFocus:f,onChange:function(e){C(e.currentTarget.value.toLowerCase()),Z(e.currentTarget.value)},ref:h,onFocus:function(e){k.openMenu(),e.currentTarget.select()}})),{value:y,placeholder:null!==s&&void 0!==s?s:d,css:[$],disabled:p,dataCy:"import-config-entrypoint-input"}))}),p?null:(0,c.tZ)(D.G,{css:[{position:"absolute",top:0,right:0,height:"100%"},I.l0.center],children:(0,c.tZ)(K,(0,o.Z)((0,i.Z)({},k.getToggleButtonProps()),{css:Y,type:"button",children:k.inputValue&&!k.isOpen?(0,c.tZ)(V.Z,{}):(0,c.tZ)(O.Z,{})}))})]})})),(0,c.BX)("div",(0,o.Z)((0,i.Z)({},k.getMenuProps()),{css:{position:"relative"},children:[k.isOpen&&w.length?(0,c.tZ)(j.Z,{children:(0,c.tZ)("ul",{css:[I.l0.pt(4),I.l0.pb(8)],children:w.map((function(e,t){return(0,c.tZ)("li",(0,o.Z)((0,i.Z)({},k.getItemProps({item:e,index:t})),{children:(0,c.tZ)(q.Z,(0,o.Z)((0,i.Z)({},J(e)),{filter:x,selected:k.selectedItem===e,highlighted:k.highlightedIndex===t}))}),e.toLowerCase())}))})}):null,x&&!w.length&&k.isOpen?(0,c.tZ)(j.Z,{children:(0,c.tZ)(D.G,{css:[I.l0.p(16),I.l0.colWithGap(4)],children:(0,c.BX)(m.xv,{color:"dimmer",multiline:!1,children:['No results for "',x,'"']})})}):null]}))]})}function J(e){return{title:e,key:e.toLowerCase()}}var ee,te=n(63128),ne=n(87978);!function(e){e.Unknown="UNKNOWN",e.Npm="NPM",e.Django="DJANGO",e.Rails="RAILS",e.DotNet="DOTNET",e.Cargo="CARGO",e.Make="MAKE",e.RegularRun="REGULAR_RUN"}(ee||(ee={}));var re=new RegExp("((index)|(main)|(app)|(run)|(start)|(server))\\..+","i"),ie=new RegExp("((node_modules)|(venv)|(bower_components)|(vendor)|(build)|(dist)|(target)|(\\.git)|(\\.vscode)|(\\.idea)).+$","i");function oe(e){var t=e.initRunCommand,n=e.isCompiled,r=e.allFiles,i=new Set(r);return i.has("Makefile")||i.has("makefile")?ee.Make:i.has("package.json")?ee.Npm:i.has("Cargo.toml")?ee.Cargo:n?ee.Unknown:i.has("config/application.rb")?ee.Rails:function(e,t){return e.some((function(e){return(0,ne.r6)(e)===t}))}(r,"csproj")?ee.DotNet:i.has("manage.py")?ee.Django:re.test(t)?ee.RegularRun:ee.Unknown}function ae(e,t){var n=t.initRunCommand,r=t.allFiles;switch(e){case ee.Npm:return"npm run start";case ee.RegularRun:var i=function(e){var t;return null!==(t=e.filter((function(e){return!ie.test(e)})).find((function(e){return re.test(e)})))&&void 0!==t?t:null}(r);return null==i?null:n.replace(re,i);case ee.Django:return"python3 manage.py runserver 0.0.0.0:3000";case ee.Rails:return"bundle exec rails server --binding=0.0.0.0";case ee.DotNet:return"dotnet run";case ee.Cargo:return"cargo run";case ee.Make:case ee.Unknown:default:return null}}function le(e){switch(e){case ee.Make:return"make";case ee.Cargo:case ee.DotNet:case ee.Npm:return"";default:return null}}function ce(e,t,n){if(0===n.length)return{projType:ee.Unknown,runCommand:null,compileCommand:null};var r={initRunCommand:e,isCompiled:t,allFiles:n},i=oe(r);return{projType:i,runCommand:ae(i,r),compileCommand:le(i)}}var ue=n(625),se=n(15679),de=n(59331),fe=n(75665);var pe=n(81203),he=n(4561),ve=n(26289),me=n(4024),ge=n(71813),ye=n(32104);function Ze(e){var t=e.children;return(0,c.BX)(te.Tg,{background:"default",css:[I.l0.borderRadius(8),{width:"100%",height:"calc(100% - var(--space-2))",backgroundColor:"var(--background-default)",overflowY:"auto",marginTop:"0px"}],children:[(0,c.tZ)(D.G,{children:(0,c.tZ)(m.xv,{multiline:!1,variant:"subheadDefault",css:[I.l0.color.foregroundDimmest,I.l0.pl(16),I.l0.pt(16)],children:".replit"})}),(0,c.tZ)(D.G,{css:[I.l0.p(16),I.l0.justify.center,I.l0.align.center,{flex:"1 1 auto"}],children:t})]})}function be(e){var t,n=Boolean(e.hasInterpreter),d=e.initialRun,f=null!==(t=e.initialCompile)&&void 0!==t?t:"",p=e.isFrameworkRecommended,h=!!e.projType&&e.projType===ee.Rails,y=e.isApplyingConfig,Z=(0,a.Z)(u.useState("Unknown"===s.ZP.get(e.initialLanguage).displayName?"bash":e.initialLanguage),2),b=Z[0],w=(Z[1],(0,B.Y)(e.initialRun,(function(e){if(!e)return{message:"Add a run command"}}))),x=(0,a.Z)(u.useState(e.initialCompile),2),k=x[0],C=x[1];u.useEffect((function(){w.setValue(d)}),[d]),u.useEffect((function(){C(null!==f&&void 0!==f?f:"")}),[f]);var S=(0,B.Y)("",(function(e){if(!e)return{message:"Choose an entry point file"}})),T=(0,a.Z)(u.useState(Boolean(n&&!p)),2),L=T[0],M=T[1];u.useEffect((function(){M(Boolean(n&&!p))}),[n,p]);var N=D.K.a,O=(0,a.Z)(u.useState([]),2),F=O[0],W=O[1],H=(0,X.Z)(),V=function(){var e=(0,E.Z)(),t=e.fs,n=e.dotReplit,i=(0,pe.P)(n),o=(0,X.Z)(),c=(0,a.Z)(u.useState(null),2),s=c[0],d=c[1];return u.useEffect((function(){var e=function(){var e=(0,r.Z)((function(){var e,n,r,a;return(0,l.__generator)(this,(function(l){switch(l.label){case 0:return i?[4,t.listFiles()]:[2];case 1:return e=l.sent(),o.current?e.error||!e.files?(d([]),[2]):[4,t.readFile(A.l)]:[2];case 2:return n=l.sent(),r=e.files,a=ve.uP.concat(ve.nh),d(r.filter((function(e){return(n.error===he.Df.NotFound||!i.some((function(t){return function(e){var t=e.split("/");if(1===t.length)return t;for(var n=[],r=0;r<t.length;r++)n.push(t.slice(0,r+1).join("/"));return n}(e).some((function(e){return null!=e.match(t)}))})))&&!a.includes(e)}))),[2]}}))}));return function(){return e.apply(this,arguments)}}();e()}),[i,t,o]),s}();return u.useEffect((function(){V&&H.current&&W(V)}),[H,V]),(0,c.BX)("form",{onSubmit:function(t){t.preventDefault(),e.setIsApplyingConfig(!0),w.value||L?e.onSubmit({run:w.value,compile:null!==k&&void 0!==k?k:"",entry:S.value,deleteInterp:!L,onDone:e.closeConfigPane,runChanged:w.value!==d,compileChanged:k!==f,projType:e.projType}):w.validate()},css:[I.l0.maxWidth(400),{width:"100%"}],children:[(0,c.BX)(D.G,{css:[I.l0.colWithGap(8)],children:[e.hasProcfile?(0,c.tZ)(D.G,{css:[I.l0.colWithGap(8)],children:(0,c.BX)(m.xv,{variant:"small",css:[I.l0.mb(24)],children:["Looks like you came from Heroku!",(0,c.tZ)(N,{target:"_blank",href:"https://docs.replit.com/tutorials/import-heroku",rel:"noopener noreferrer",children:"Read more about Replit and Heroku here."})]})}):null,n?(0,c.tZ)(D.G,{css:[I.l0.pb(16)],children:(0,c.BX)(U.hE,{disabled:y,name:"interpreterView",value:L.toString(),row:!0,onChange:function(){return M((function(e){return!e}))},stretch:!0,primary:!0,children:[(0,c.tZ)(U.rK,{id:"interpreterFalse",value:"false",text:"Use run command"}),(0,c.tZ)(U.rK,{id:"interpreterTrue",value:"true",text:"Use default interpreter"})]})}):null,(0,c.BX)(D.G,{css:[I.l0.height(e.initialCompile?210:170),I.l0.colWithGap(8)],children:[L?null:(0,c.BX)(D.G,{css:[I.l0.maxWidth(400),I.l0.colWithGap(8)],children:[e.initialCompile?(0,c.BX)(D.G,{css:[I.l0.colWithGap(4)],children:[(0,c.tZ)("label",{htmlFor:"compile-sel",children:"Configure the Compile Command"}),(0,c.tZ)(m.xv,{variant:"small",color:"dimmest",children:"This is optional, and is executed before your run command."}),(0,c.tZ)(v.II,{disabled:y,id:"compile-sel",type:"text",value:k,placeholder:"Enter a command to compile the program",onChange:function(e){C(e.currentTarget.value)},css:{"&:disabled":{color:I.TV.foregroundDimmer}}})]}):null,(0,c.tZ)("label",{htmlFor:"run-sel",css:[I.l0.mt(4)],children:"Configure the Run Command"}),(0,c.tZ)(v.II,{disabled:y,id:"run-sel",type:"text",value:w.value,placeholder:"Enter a command to run the program",onChange:function(e){w.setValue(e.currentTarget.value)},css:[{"&:disabled":{color:I.TV.foregroundDimmer,cursor:"auto"},cursor:"text"}]}),h?(0,c.BX)(m.xv,{variant:"small",color:"dimmest",children:["We detected this is a Rails project. You will need",(0,c.BX)("a",{target:"_blank",rel:"noopener noreferrer",href:"https://docs.replit.com/misc/rails-on-replit",children:[" ","additional changes"," "]}),"to your config files to use all of Replit\u2019s features."]}):null,w.error||!w.value?(0,c.BX)(D.G,{css:[I.l0.color.accentNegativeDefault,I.l0.rowWithGap(4),I.l0.align.center],children:[(0,c.tZ)(P.Z,{size:12}),(0,c.tZ)(D.G,{children:w.error?w.error.message:"Add a run command"})]}):null]}),L?(0,c.BX)(D.G,{css:[{maxWidth:400},I.l0.colWithGap(8)],children:[(0,c.tZ)("label",{htmlFor:"entry-sel","data-cy":"import-config-entrypoint",children:"Configure entry point"}),(0,c.tZ)(m.xv,{variant:"small",css:[I.l0.color.foregroundDimmest],children:"The entry point is the file that\u2019s run by default and shown first."}),0!==F.length?(0,c.tZ)(Q,(0,o.Z)((0,i.Z)({id:"config-selector",onSelect:S.setValue,onInit:S.setValue,options:F},F.length&&Boolean(V)&&{initialSelectedOption:F[0]}),{disabled:y})):(0,c.tZ)(v.II,{disabled:y,id:"entry-sel",type:"text",value:S.value,placeholder:"Choose entry point file",onChange:function(e){S.setValue(e.currentTarget.value)},css:[_.gU.filled,{cursor:"text"}]}),S.error?(0,c.BX)(D.G,{css:[{color:"var(--accent-negative-default)"},I.l0.rowWithGap(4),I.l0.align.center],children:[(0,c.tZ)(P.Z,{size:12}),(0,c.tZ)(D.G,{children:S.error.message})]}):null]}):null,(0,c.tZ)(N,{css:[I.l0.color.accentPrimaryStronger,{fontWeight:I.TV.fontWeightMedium}],target:"_blank",href:"https://docs.replit.com/programming-ide/running-github-repositories-replit",rel:"noopener noreferrer",children:"Not sure what to do?"}),(0,c.tZ)(D.G,{css:[I.l0.flex.row,I.l0.pt(16)],children:(0,c.tZ)(g.zx,{colorway:"primary",outlined:!0,type:"submit",text:y?"Saving...":"Done",disabled:y||!L&&(Boolean(w.error)||!w.value),css:[_.gU.filledAndOutlined,{fontWeight:I.TV.fontWeightMedium,color:I.TV.accentPrimaryStronger}],dataCy:"import-config-done"})})]})]}),(0,c.tZ)(R.u,{isOpen:!1,preventClose:!0,onRequestClose:function(){},children:(0,c.tZ)(D.G,{css:[I.l0.borderRadius(16),I.l0.p(32),{backgroundColor:"var(--background-default)"}],children:(0,c.BX)(G.gC,{align:"center",spacing:1,children:[(0,c.tZ)(ye.Z,{size:32}),(0,c.BX)(m.xv,{multiline:!1,children:["Upgrading to ",s.ZP.get(b).displayName]})]})})})]})}function we(){return(0,c.BX)(D.G,{children:[(0,c.tZ)(D.G,{children:".replit looks a lil messed up :/"}),(0,c.tZ)("a",{css:[I.l0.pt(8),{fontSize:I.TV.fontSizeSmall}],target:"_blank",href:"https://docs.replit.com/programming-ide/configuring-repl",children:"View docs"})]})}function xe(){return(0,c.tZ)(D.G,{children:(0,c.BX)("p",{children:["Initializing run configuration",(0,c.tZ)(h,{style:{color:"var(--foreground-default)"}})]})})}var ke=function(e){var t,n=(0,L.Z)(),o=(0,E.Z)(),s=o.fs,d=o.dotReplit,f=(0,a.Z)(function(e){var t=(0,i.Z)({},C,e);return w.D(T,t)}(),1)[0],p=(0,X.Z)(),h=function(e){var t=(0,i.Z)({},C,e);return b.a(S,t)}({variables:{replId:n}}),v="Repl"===(null===(t=h.data)||void 0===t?void 0:t.repl.__typename)?h.data.repl:null,m=e.useReadFile(s,A.l),g=(0,a.Z)(u.useState(!1),2),y=g[0],Z=g[1],x=(0,a.Z)(u.useState(!1),2),k=x[0],R=x[1],G=m&&!m.error?m.content.toString("utf8"):"",I=(0,a.Z)(u.useState(""),2),_=I[0],D=I[1],B=(0,a.Z)(u.useState(""),2),P=B[0],U=B[1],M=(0,a.Z)(u.useState(!1),2),N=M[0],O=M[1],F=(0,a.Z)(u.useState(ee.Unknown),2),W=F[0],H=F[1],V=(0,a.Z)(u.useState(!1),2),z=V[0],j=V[1];u.useEffect((function(){function e(){return e=(0,r.Z)((function(){var e,t,n,r,i,o,a,c,u,f,h,v,m,g,b,w;return(0,l.__generator)(this,(function(l){switch(l.label){case 0:return[4,d.getConfig()];case 1:return e=l.sent(),t=e.config,e.error?[2]:(r=(0,me.Cq)(null!==(n=t.run)&&void 0!==n?n:void 0),o=(0,me.Cq)(null!==(i=t.compile)&&void 0!==i?i:void 0),a=Boolean(t.compile),c=Boolean(t.interpreter),[4,s.listFiles()]);case 2:return u=l.sent(),p.current?(null!=u.error||null==u.files||0===u.files.length||(f=u.files,h=ce(r,a,f),v=h.projType,m=h.runCommand,g=h.compileCommand,b=y?null!==r&&void 0!==r?r:m:null!==m&&void 0!==m?m:r,w=null!==g&&void 0!==g?g:o,Z(f.includes(ge.E)),D(b),U(w),O(v!==ee.Unknown&&v!==ee.RegularRun),H(v),j(c)),[2]):[2]}}))})),e.apply(this,arguments)}G&&function(){e.apply(this,arguments)}()}),[G,p]),u.useEffect((function(){(0,ue.j)(ue.U3.NIX_GH_IMPORT_USED,{action:se.D.ImportEnded,replId:n})}),[n]);var q=(0,de.Z)();u.useEffect((function(){q(!1)}),[]);var $=function(){var e=(0,r.Z)((function(e){var t,r,i,o,a,c,u,p,h,v;return(0,l.__generator)(this,(function(l){switch(l.label){case 0:return t=e.run,r=e.compile,i=e.entry,o=e.deleteInterp,a=e.onDone,c=e.runChanged,u=e.compileChanged,p=e.projType,(0,ue.j)(ue.U3.NIX_GH_IMPORT_USED,{action:se.D.ConfigDone,interpUsed:!o,isCompiled:""!==r,runChanged:c,compileChanged:u,projType:p,replId:n}),h=function(e,t,n,r){var i=[];return r?(i.push((0,fe.xz)("interpreter")),i.push((0,fe.xz)("entrypoint")),i.push((0,fe.KQ)(e)),i.push((0,fe.X6)(e)),n?(i.push((0,fe.D3)(n)),i.push((0,fe.pi)(n))):(i.push((0,fe.xz)("compile")),i.push((0,fe.xz)("deployment/build")))):(i.push((0,fe.xz)("run")),i.push((0,fe.If)(t))),i}(t,i,r,o),v=f({variables:{input:{id:n}}}),[4,d.updateDotReplit(h)];case 1:return l.sent(),s.flush().then((function(){s.persist({skipDebounce:!0})})),[4,v];case 2:return l.sent(),a(),[2]}}))}));return function(t){return e.apply(this,arguments)}}();return v&&m?(null===m||void 0===m?void 0:m.error)?(0,c.tZ)(Ze,{children:(0,c.tZ)(we,{})}):(0,c.tZ)(Ze,{children:(0,c.tZ)(be,{initialLanguage:"",initialRun:_,initialCompile:P,hasInterpreter:z,fs:s,hasProcfile:y,isApplyingConfig:k,setIsApplyingConfig:R,onSubmit:$,isFrameworkRecommended:N,projType:W,closeConfigPane:e.closeConfigPane})}):(0,c.tZ)(Ze,{children:(0,c.tZ)(xe,{})})}},23562:function(e,t,n){var r=n(74985),i=n(50959),o=n(85368),a=n(66656),l=n(39541),c=n(9829),u=n(61284),s=function(e){var t=e.reason,n=e.children;return(0,r.BX)(o.G,{css:[l.l0.center,l.l0.minWidth(225),l.l0.height(225),l.l0.p(16),l.l0.color.foregroundDefault,l.l0.borderRadius(8),l.l0.backgroundColor.backgroundOverlay,l.l0.zIndex(5e5),{cursor:"not-allowed"}],children:[(0,r.tZ)(c.Z,{height:80}),(0,r.BX)(u.xv,{multiline:!1,variant:"subheadBig",css:[l.l0.mt(32)],dataCy:"import-loading-spinner",children:[t,"..."]}),n]})};function d(e){var t=e.reason,n=e.children;return(0,r.tZ)(a.h,{children:(0,r.tZ)(o.G,{css:[l.l0.position.fixed,l.l0.flex.row,l.l0.align.center,l.l0.justify.center,l.l0.backgroundColor.backgroundOverlay,{top:0,bottom:0,left:0,right:0,zIndex:5e5,cursor:"not-allowed"}],children:(0,r.tZ)(s,{reason:null!==t&&void 0!==t?t:"Importing",children:n})})})}t.Z=(0,i.memo)(d)},52143:function(e,t,n){n.d(t,{xV:function(){return Q},du:function(){return R},av:function(){return $}});var r=n(57389),i=n(72006),o=n(74985),a=n(18988),l=n(52564),c=n(99964),u=n(10464),s=n(47518),d=n(42174),f=n(82568),p=n(66656),h=n(63128),v=n(39541),m=n(50959),g=n(92153),y=n(91398),Z=n(56581),b=n(92683),w=n(13525);function x(){return(0,m.useState)((function(){return(0,y.MT)()}))[0]}var k=(0,m.createContext)(null);function C(){var e=(0,m.useContext)(k);if(!e)throw new Error("Expected store in context");return e}function S(e){return(0,b.Dv)(e,{store:C()})}function T(e){return(0,w.b)(e,C())}var E=function(e){return(0,b.b9)(e,{store:C()})};function R(e){var t=x();return(0,o.tZ)(k.Provider,{value:t,children:e.children})}var G,I=(0,n(68973).$)(["display","visibility","transform","maxHeight","width"]),_=I.cssVars,D=I.styleTokens,B=(0,y.cn)(null),P=(0,y.cn)("default"),A=(0,y.cn)({command:null,offset:{x:0,y:0},visible:!1}),L=(0,Z.kv)(A,(function(e){return e.offset})),U=(0,Z.kv)(A,(function(e){return e.command})),X=(0,Z.kv)(A,(function(e){return e.visible})),M=(0,Z.kv)(B,(function(e){return null!==(G=null===e||void 0===e?void 0:e.initial)&&void 0!==G?G:null})),N=(0,y.cn)((function(e){var t=e(L);if(!t)return null;var n=t.y,r=window.innerHeight-n,i=e(M),o=null!==i?i-r:0;return o>0&&(n=Math.max(16,n-Math.min(200,o))),n})),O=(0,y.cn)((function(e){var t=e(L);if(!t)return null;var n=t.x,r=window.innerWidth,i=e(W),o=i?n+i:null,a=o?o-r+16:0;return a>0&&(n=Math.max(16,n-a)),n})),F=(0,y.cn)((function(e){var t=e(O),n=e(N);return null==t||null===n?null:(0,r.Z)({},_.transform,"translate(".concat(t,"px, ").concat(n,"px)"))})),W=(0,y.cn)(null),H=(0,y.cn)((function(e){var t=e(W);return(0,r.Z)({},_.width,(null===t?180:t)+"px")})),V=(0,y.cn)((function(e){var t=e(N);return null===t?null:(0,r.Z)({},_.maxHeight,"calc(100vh - ".concat(v.TV.space16," - ").concat(t,"px)"))})),z=(0,y.cn)(null,(function(e,t){t(B,null),t(W,null),t(j,null),t(A,(function(e){return(0,g.ZP)(e,(function(e){e.visible=!1,e.command=null}))}))})),j=(0,y.cn)(null),q=(0,y.cn)(null,(function(e,t,n){if(t(P,n.background),n.width&&t(W,n.width),n.target){var r=n.target.getBoundingClientRect(),i={x:r.x,y:r.y+r.height+8};return t(j,r),void t(A,(function(e){return(0,g.ZP)(e,(function(e){e.command=n.command,e.offset=i,e.visible=!0}))}))}t(A,(function(e){return(0,g.ZP)(e,(function(e){e.command=n.command,e.offset=n.offset,e.visible=!0}))}))}));function $(){var e=E(q),t=(0,h.nZ)({elevated:!0});return{openContextMenu:(0,m.useCallback)((function(n){e({command:n.command,target:n.target,width:n.width,background:t})}),[e,t]),onContextMenu:(0,m.useCallback)((function(n,r){var i=r.command,o=r.width;n.preventDefault(),e({command:i,offset:{x:n.clientX,y:n.clientY},target:null,width:o,background:t})}),[e,t])}}var Y=(0,f.X)({surface:[v.l0.shadow(3),v.l0.borderRadius(8),v.l0.position.absolute,{top:0,left:0,border:"1px solid",borderColor:v.TV.outlineDefault,maxWidth:"min(500px, calc(100vw - ".concat(v.TV.space16,"))"),minWidth:"min(100px, calc(100vw - ".concat(v.TV.space16,"))"),maxHeight:D.maxHeight,width:D.width,transform:D.transform,visibility:D.visibility,display:D.display}]});function K(){var e=S(j);return e?(0,o.tZ)("div",{style:{position:"fixed",width:e.width,height:e.height,top:e.y,left:e.x}}):null}var Q=(0,m.memo)((function(e){var t=e.fontSize,n=void 0===t?14:t,f=E(z),v=S(U),g=T(X),y=(0,m.useRef)((function(){}));(0,m.useEffect)((function(){var e=function(e){var t;e&&(null===(t=y.current)||void 0===t||t.call(y))};return e(g.current),g.subscribe(e)}),[g]);var Z=E(B),b=(0,c.Z)((function(){g.current&&f()}),[g]),w=(0,m.useRef)(null),x=T(F);(0,d.j)(w,x),(0,d.j)(w,T(V)),(0,d.j)(w,g,(function(e){var t;return t={},(0,r.Z)(t,_.visibility,e?"visible":"hidden"),(0,r.Z)(t,_.display,e?"flex":"none"),t}));var k=T(H);(0,d.j)(w,k);var C=(0,u.Z)(),R=S(X)&&!C,G=S(P),I=(0,i.Z)({},x.current,k.current);return v?(0,o.BX)(p.h,{children:[(0,o.tZ)(K,{}),(0,o.tZ)(a.MT,{autoFocus:R,restoreFocus:!0,contain:!0,children:(0,o.tZ)(h.Tg,{onKeyDown:function(e){"Escape"===e.key&&f()},innerRef:(0,s.l)(w,b),css:Y.surface,style:I,background:G,children:(0,o.tZ)(l.X,{iconBreadcrumbs:!0,command:v,onAction:f,onSelect:f,onTotalHeightChange:Z,focusRef:y,fontSize:n})})})]}):null}))},9493:function(e,t,n){n.d(t,{Z:function(){return y},e:function(){return w}});var r=n(72006),i=n(77637),o=n(74985),a=n(63128),l=n(61284),c=n(85368),u=n(82568),s=n(39541),d=n(87978),f=n(13233),p=n(87076),h=n(77806),v=n(45510),m=n(57913),g=(0,u.X)({code:[s.l0.font.code,s.l0.flex.grow(1)],surface:[s.l0.borderRadius(8),s.l0.p(8),s.l0.flex.row,s.l0.rowWithGap(8),s.l0.align.center]});function y(e){var t=w(e.filePath,e.keyName);if(!t)return null;var n=t.import,i=t.access;return(0,o.BX)(c.G,{css:s.l0.colWithGap(8),children:[n?(0,o.tZ)(Z,(0,r.Z)({code:n},e)):null,(0,o.tZ)(Z,(0,r.Z)({code:i},e))]})}function Z(e){var t=e.code,n=e.onInsert,r=(0,i.Z)(e,["code","onInsert"]);return(0,o.BX)(a.Tg,{elevated:r.elevated,css:g.surface,children:[(0,o.tZ)(b,{value:t}),(0,o.tZ)(l.xv,{variant:"small",css:g.code,multiline:!1,children:t}),n?(0,o.tZ)(v.zx,{outlined:!0,small:!0,onClick:function(){return n(t)},text:"Insert",iconRight:(0,o.tZ)(m.Z,{})}):null]})}function b(e){var t=e.value,n=(0,f.Z)();return(0,o.tZ)(p.h,{alt:"Copy",tooltipHidden:!0,onClick:function(){navigator.clipboard.writeText(t).then((function(){n.showConfirm("Copied")}))},children:(0,o.tZ)(h.Z,{})})}function w(e,t){if(!e)return null;switch((0,d.r6)(e)){case"js":case"ts":case"jsx":case"tsx":return{import:null,access:"const mySecret = process.env['".concat(t,"']")};case"py":return{import:"import os",access:"my_secret = os.environ['".concat(t,"']")};case"go":return{import:'import "os"',access:'mySecret := os.Getenv("'.concat(t,'")')};case"java":case"scala":return{import:null,access:'System.getenv("'.concat(t,'")')};case"rb":return{import:null,access:'ENV["'.concat(t,'"]')};case"c":case"cpp":return{import:"#include <stdlib.h>",access:'char* mySecret = getenv("'.concat(t,'")')};case"cs":return{import:"using System;",access:'string mySecret = System.Environment.GetEnvironmentVariable("'.concat(t,'");')};case"sh":return{import:null,access:'"$'.concat(t,'"')};default:return null}}},56964:function(e,t,n){n.d(t,{lg:function(){return ae},ZP:function(){return se}});var r,i=n(57135),o=n(72006),a=n(4405),l=n(2272),c=n(96583),u=n(74985),s=n(50959),d=n(4561),f=n(34489),p=n(63064),h=n(1050),v=n(11969),m=n(68825),g=n(625),y=n(31672),Z=n(28814),b=n(34227),w=n(64804),x=n(45510),k=n(2041),C=n(25198),S=n(63128),T=n(61284),E=n(85368),R=n(63837),G=n(20406),I=n(57467),_=n(39541),D=n(1468),B=g.U3.ENV_EDITOR_USED;function P(e){var t=e.secrets,n=e.update,r=(0,s.useState)(!1),o=r[0],a=r[1],l=(0,s.useState)(!1),d=l[0],f=l[1],p=(0,s.useState)(!1),h=p[0],v=p[1],m=(0,s.useState)(0),y=m[0],P=m[1],U=0===y,X=(0,s.useRef)();X.current||(X.current=(0,Z.ir)((function(e){var t=A(e.state.doc.toString());return P(t),0!==t?(0,g.j)(B,{action:"rawEditorUpdatedError"}):(0,g.j)(B,{action:"rawEditorUpdated"}),[]})));var M=(0,w.Z)(),N=M.ref,O=M.view,F=function(){d||a(!1)},W=function(){var e=(0,i.Z)((function(){var e,t;return(0,c.__generator)(this,(function(r){switch(r.label){case 0:if(!O)return[2];if(!function(){if(!O)return!1;var e=A(O.state.doc.toString());return P(e),0===e}())return[2];f(!0),r.label=1;case 1:return r.trys.push([1,3,,4]),e=JSON.parse(O.state.doc.toString()),[4,n(e)];case 2:return r.sent(),f(!1),v(!0),setTimeout((function(){F(),setTimeout((function(){v(!1)}),500)}),500),[3,4];case 3:return t=r.sent(),D.c_.captureException(t),(0,g.j)(B,{action:"rawEditorUpdatedError"}),P(3),f(!1),[3,4];case 4:return[2]}}))}));return function(){return e.apply(this,arguments)}}();return(0,s.useEffect)((function(){if(O){var e=JSON.stringify(t,null,2);"{}"===e&&(e="{\n  \n}"),O.dispatch({changes:{from:0,to:O.state.doc.length,insert:e}}),O.dispatch({selection:{anchor:O.state.doc.length-2}}),O.focus()}}),[O,t]),(0,u.BX)(u.HY,{children:[(0,u.tZ)(x.zx,{onClick:function(){return v(!1),a(!0),void(0,g.j)(B,{action:"rawEditorOpened"})},text:"Edit as JSON",iconLeft:(0,u.tZ)(G.Z,{}),small:!0}),(0,u.tZ)(k.u,{isOpen:o,onRequestClose:function(){return F()},children:(0,u.BX)(E.G,{css:[_.l0.colWithGap(24)],children:[(0,u.tZ)(T.h4,{level:1,variant:"headerDefault",children:"Raw Secrets Editor"}),(0,u.tZ)(T.xv,{children:"Secrets are specified in JSON. Values must be strings."}),(0,u.tZ)(S.Tg,{css:[_.l0.borderRadius(8),_.l0.transition.snappy,_.l0.p(4),{border:"1px solid var(--outline-dimmer)",":hover":{borderColor:"var(--outline-stronger)"}}],elevated:!0,children:(0,u.tZ)(b.Z,{ref:N,readOnly:d||h,extensions:X.current,language:"json",hideGutter:!0})}),(0,u.BX)(E.G,{css:[_.l0.rowWithGap(4),_.l0.justify.end],children:[!U&&(0,u.tZ)(C.E,{icon:(0,u.tZ)(I.Z,{}),colorway:"negative",text:L(y)}),(0,u.BX)(E.G,{css:[_.l0.rowWithGap(12)],children:[(0,u.tZ)(x.zx,{onClick:F,text:"Cancel"}),(0,u.tZ)(x.zx,{iconLeft:(0,u.tZ)(R.Z,{}),stretch:!0,colorway:h?"positive":"primary",text:h?"Saved!":"Save",disabled:!U||d||h,onClick:function(){return W()}})]})]})]})})]})}function A(e){try{var t=JSON.parse(e);for(var n in t){if("string"!==typeof n)return 2;if("string"!==typeof t[n])return 2}return 0}catch(r){return 1}}function L(e){switch(e){case 1:return"Make sure the data is valid JSON.";case 2:return"Make sure that all values are strings.";case 3:return"There was an error saving the secrets.";default:return""}}!function(e){e[e.VALID=0]="VALID",e[e.ERROR_PARSE=1]="ERROR_PARSE",e[e.ERROR_STRINGS=2]="ERROR_STRINGS",e[e.ERROR_SAVE=3]="ERROR_SAVE"}(r||(r={}));var U=n(39137),X=n(32104),M=n(13716),N=n(87076),O=n(84815),F=n(62405),W=n(99397),H=n(8622),V=n(86302),z=n(54873),j=n(79637),q=n(13233),$=n(77806),Y=n(82568),K=n(31854),Q=n(5889),J=n(9493),ee=n(18171),te=n(10841),ne=(0,Y.X)({addSecretContainer:[_.l0.flex.column,_.l0.colWithGap(8),_.l0.py(8)],colGap4:[_.l0.flex.column,_.l0.colWithGap(4)],colGap8:[_.l0.flex.column,_.l0.colWithGap(8)],secretItemEdit:[_.l0.flex.column,_.l0.colWithGap(8),_.l0.py(8)],secretItem:[_.l0.py(8),_.l0.flex.row,_.l0.rowWithGap(16),_.l0.align.center],secretItemKey:[_.l0.flex.grow(2),_.l0.flex.row,_.l0.rowWithGap(8),_.l0.align.center,_.l0.pr(16),{minWidth:0,flex:"1 0 0"}],secretItemValue:[_.l0.flex.row,_.l0.rowWithGap(4),_.l0.align.center,_.l0.flex.grow(1),_.l0.flex.shrink(1),{minWidth:0,flexBasis:0}],secretItemValueToggle:[_.l0.py(2),_.l0.px(4),_.l0.borderRadius(4),_.l0.flex.shrink(1),{minWidth:0}],list:[{"& > div":{borderTop:"1px solid "+_.TV.outlineDimmest}},{"& > div:last-of-type":{borderBottom:"1px solid "+_.TV.outlineDimmest}}],headerStyle:[_.l0.flex.row,_.l0.rowWithGap(8),_.l0.align.center,_.l0.p(8)],stepWrapper:[_.l0.p(8),_.l0.colWithGap(8)],accessSecrect:[_.l0.px(8),_.l0.py(16),_.l0.colWithGap(8)],accessSecrectHeader:[_.l0.rowWithGap(8),_.l0.align.center]}),re={fontFamily:"text-security-disc"};function ie(e){var t=e.onClose,n=e.onAdd,r=e.otherKeys,i=(0,l.Z)(s.useState(!0),2),c=i[0],d=i[1],f=(0,l.Z)(s.useState({key:"",value:""}),2),p=f[0],h=f[1],v=p.key.length>0&&!r.includes(p.key);return(0,u.tZ)(u.HY,{children:(0,u.BX)(E.G,{css:ne.addSecretContainer,children:[(0,u.BX)(E.G,{css:_.l0.layout.columns,children:[(0,u.BX)(E.G,{css:[ne.colGap4,_.l0.layout.colSpan(5)],children:[(0,u.tZ)(T.xv,{css:[_.l0.pt(2),_.l0.pb(4)],variant:"small",color:"dimmer",multiline:!1,children:"Key"}),(0,u.tZ)(U.II,{value:p.key,onChange:function(e){return h((0,a.Z)((0,o.Z)({},p),{key:e.target.value}))},placeholder:"SECRET_KEY",autoComplete:"off"}),r.includes(p.key)?(0,u.BX)(T.xv,{multiline:!1,variant:"small",css:{color:_.TV.accentNegativeDefault},children:['Secret "',p.key,'" already exists']}):null]}),(0,u.BX)(E.G,{css:[ne.colGap4,_.l0.layout.colSpan(7)],children:[(0,u.BX)(E.G,{css:[_.l0.flex.row,_.l0.rowWithGap(4),_.l0.align.center],children:[(0,u.tZ)(T.xv,{variant:"small",color:"dimmer",multiline:!1,children:"Value"}),(0,u.tZ)(N.h,{alt:"Toggle Visibility",tooltipHidden:!0,onClick:function(){return d(!c)},children:c?(0,u.tZ)(O.Z,{}):(0,u.tZ)(F.Z,{})})]}),(0,u.tZ)(U.II,{value:p.value,onChange:function(e){return h((0,a.Z)((0,o.Z)({},p),{value:e.target.value}))},style:c?re:void 0,autoComplete:"off",placeholder:"Value"})]})]}),(0,u.BX)(E.G,{css:[_.l0.rowWithGap(8),_.l0.justify.end],children:[(0,u.tZ)(x.zx,{small:!0,text:"Cancel",onClick:function(){return t()}}),(0,u.tZ)(x.zx,{small:!0,text:"Add Secret",colorway:"primary",disabled:!v,onClick:function(){n({key:p.key.trim(),value:p.value}),h({key:"",value:""})}})]})]})})}function oe(e){var t=e.value,n=(0,q.Z)();return(0,u.tZ)(N.h,{alt:"Copy",tooltipHidden:!0,onClick:function(){navigator.clipboard.writeText(t).then((function(){n.showConfirm("Copied")}))},children:(0,u.tZ)($.Z,{})})}function ae(e){var t=(0,l.Z)(s.useState(null),2),n=t[0],r=t[1],i=(0,l.Z)(s.useState(!1),2),c=i[0],d=i[1],f=(0,l.Z)(s.useState(!1),2),p=f[0],v=f[1],m=(0,l.Z)(s.useState(e.secret.value),2),g=m[0],y=m[1],Z=(0,l.Z)(s.useState(!0),2),b=Z[0],w=Z[1],C=e.secret;if(n&&!e.readOnly){var S=e.onDeleteSecret,G=e.onUpdateSecret;return(0,u.BX)(u.HY,{children:[(0,u.BX)(E.G,{css:ne.secretItemEdit,children:[(0,u.BX)(E.G,{css:_.l0.layout.columns,children:[(0,u.BX)(E.G,{css:[ne.colGap4,_.l0.layout.colSpan(5)],children:[(0,u.tZ)(T.xv,{multiline:!1,css:[_.l0.pt(2),_.l0.pb(4)],variant:"small",color:"dimmer",children:"Key"}),(0,u.tZ)(U.II,{value:n.key,onChange:function(e){return r((function(t){return t?(0,a.Z)((0,o.Z)({},t),{key:e.target.value}):t}))},placeholder:"SECRET_KEY",autoComplete:"off"})]}),(0,u.BX)(E.G,{css:[ne.colGap4,_.l0.layout.colSpan(7)],children:[(0,u.BX)(E.G,{css:[_.l0.flex.row,_.l0.rowWithGap(4),_.l0.align.center],children:[(0,u.tZ)(T.xv,{multiline:!1,css:[_.l0.pt(2),_.l0.pb(4)],variant:"small",color:"dimmer",children:"Value"}),(0,u.tZ)(N.h,{alt:"Toggle Visibility",tooltipHidden:!0,onClick:function(){return w(!b)},children:b?(0,u.tZ)(O.Z,{}):(0,u.tZ)(F.Z,{})})]}),(0,u.tZ)(U.II,{value:n.value,style:b?re:void 0,onChange:function(e){return r((function(t){return t?(0,a.Z)((0,o.Z)({},t),{value:e.target.value}):t}))}})]})]}),(0,u.BX)(E.G,{css:[_.l0.flex.row,_.l0.rowWithGap(8)],children:[(0,u.tZ)(x.zx,{small:!0,text:"Delete",colorway:"negative",onClick:function(){return v(!0)}}),(0,u.tZ)(E.G,{css:_.l0.flex.grow(1)}),(0,u.tZ)(x.zx,{small:!0,text:"Cancel",onClick:function(){return r(null)}}),(0,u.tZ)(x.zx,{small:!0,colorway:"primary",text:"Update Secret",disabled:!n.key.length,onClick:function(){G(C.key,{key:n.key.trim(),value:n.value}),r(null)}})]})]}),(0,u.tZ)(k.u,{isOpen:p,onRequestClose:function(){return v(!1)},children:(0,u.BX)(E.G,{css:ne.colGap8,children:[(0,u.BX)(T.xv,{variant:"subheadDefault",multiline:!1,children:["Delete ",C.key,"?"]}),(0,u.tZ)(T.xv,{color:"dimmer",multiline:!1,children:"Are you sure you would like to delete this secret? This cannot be undone."}),(0,u.BX)(E.G,{css:[_.l0.justify.end,_.l0.flex.row,_.l0.rowWithGap(8)],children:[(0,u.tZ)(x.zx,{text:"Cancel",onClick:function(){return v(!1)}}),(0,u.tZ)(x.zx,{text:"Delete",colorway:"negative",onClick:function(){return S(C.key)}})]})]})})]})}return(0,u.tZ)(E.G,{children:(0,u.BX)(E.G,{css:ne.secretItem,children:[(0,u.BX)(E.G,{css:ne.secretItemKey,children:[(0,u.tZ)(oe,{value:C.key}),(0,u.tZ)(T.xv,{multiline:!1,children:C.key})]}),""!==C.value||e.readOnly?(0,u.BX)(E.G,{css:ne.secretItemValue,children:[(0,u.tZ)(oe,{value:C.value}),(0,u.tZ)(N.h,{alt:"Toggle Secret",tooltipHidden:!0,onClick:function(){return d(!c)},children:c?(0,u.tZ)(F.Z,{}):(0,u.tZ)(O.Z,{})}),(0,u.tZ)(E.G,{css:ne.secretItemValueToggle,children:(0,u.tZ)(T.xv,{multiline:!1,css:{fontFamily:_.TV.fontFamilyCode},children:c?C.value:"\u2022".repeat(12)})})]}):(0,u.BX)(E.G,{css:ne.secretItemValue,children:[(0,u.tZ)(U.II,{value:g,onChange:function(e){return y(e.target.value)},autoComplete:"off",style:b?re:void 0,placeholder:"Enter a value",css:[_.l0.maxWidth(200),_.l0.py(2),_.l0.px(6)]}),(0,u.tZ)(N.h,{alt:"Toggle Visibility",tooltipHidden:!0,onClick:function(){return w(!b)},children:b?(0,u.tZ)(O.Z,{}):(0,u.tZ)(F.Z,{})}),(0,u.tZ)(N.h,{colorway:"primary",alt:"Save Secret Value",tooltipHidden:!0,onClick:function(){e.onUpdateSecret(C.key,{key:C.key,value:g}),y("")},children:(0,u.tZ)(R.Z,{})})]}),e.readOnly?null:(0,u.BX)(u.HY,{children:[(0,u.tZ)(E.G,{children:(0,u.tZ)(j.Z,{label:"Options",items:[{label:(0,u.BX)(E.G,{css:[_.l0.flex.row,_.l0.rowWithGap(8),_.l0.align.center],children:[(0,u.tZ)(h.Z,{}),(0,u.tZ)(T.xv,{multiline:!1,children:"Edit"})]}),onClick:function(){r(C)}},{label:(0,u.BX)(E.G,{css:[_.l0.flex.row,_.l0.rowWithGap(8),_.l0.align.center],children:[(0,u.tZ)(z.Z,{color:_.TV.accentNegativeStronger}),(0,u.tZ)(T.xv,{css:{color:_.TV.accentNegativeStronger},multiline:!1,children:"Delete"})]}),isDescructive:!0,onClick:function(){v(!0)}}],onItemClick:function(e){var t;return null===(t=e.onClick)||void 0===t?void 0:t.call(e)}})}),(0,u.tZ)(k.u,{isOpen:p,onRequestClose:function(){return v(!1)},children:(0,u.BX)(E.G,{css:[_.l0.colWithGap(24)],children:[(0,u.BX)(T.xv,{multiline:!1,variant:"headerDefault",children:["Delete ",C.key,"?"]}),(0,u.tZ)(T.xv,{color:"dimmer",multiline:!1,children:"Are you sure you would like to delete this secret? This cannot be undone."}),(0,u.BX)(E.G,{css:[_.l0.justify.end,_.l0.flex.row,_.l0.rowWithGap(12)],children:[(0,u.tZ)(x.zx,{text:"Cancel",onClick:function(){return v(!1)}}),(0,u.tZ)(x.zx,{iconLeft:(0,u.tZ)(z.Z,{}),text:"Yes, delete secret",colorway:"negative",onClick:function(){return e.onDeleteSecret(C.key)}})]})]})})]})]})})}function le(e){var t=e.secrets,n=e.onUpdateSecret,r=e.onDeleteSecret,i=e.onAddSecret,o=e.showAddSecret,a=e.onClose,c=Object.entries(t).filter((function(e){var t=(0,l.Z)(e,2);t[0];return""===t[1]})),s=Object.entries(t).filter((function(e){var t=(0,l.Z)(e,2);t[0];return""!==t[1]}));return(0,u.BX)(u.HY,{children:[0!==c.length&&(0,u.BX)(E.G,{css:[_.l0.colWithGap(8),_.l0.px(8)],children:[(0,u.tZ)(T.xv,{variant:"subheadDefault",multiline:!1,children:"Configure missing Secret values"}),(0,u.tZ)(T.xv,{variant:"small",children:"This Repl contains Secrets that might be required. Add values to ensure the code runs as expected."}),(0,u.tZ)(E.G,{css:ne.list,children:c.map((function(e){var t=(0,l.Z)(e,2),i=t[0],o=t[1];return(0,u.tZ)(ae,{secret:{key:i,value:o},onUpdateSecret:n,onDeleteSecret:r},i)}))})]}),(0,u.tZ)(E.G,{css:[_.l0.colWithGap(8),_.l0.px(8)],children:(0,u.tZ)(E.G,{children:(0,u.BX)(E.G,{css:ne.list,children:[o?(0,u.tZ)(ie,{onClose:a,onAdd:i,otherKeys:Object.keys(t)}):null,s.map((function(e){var t=(0,l.Z)(e,2),i=t[0],o=t[1];return(0,u.tZ)(ae,{secret:{key:i,value:o},onUpdateSecret:n,onDeleteSecret:r},i)}))]})})})]})}function ce(e){var t=e.secrets,n=e.activeFile,r=(0,l.Z)(s.useState(Object.keys(t)[0]),2),i=r[0],o=r[1];return(0,y.Z)(n)&&(0,J.e)(n,i)&&0!==Object.keys(t).length?(0,u.BX)(E.G,{css:ne.accessSecrect,children:[(0,u.BX)(E.G,{css:ne.accessSecrectHeader,children:[(0,u.tZ)(T.xv,{multiline:!1,children:"Access secret"}),(0,u.tZ)(K.P,{css:_.l0.minWidth(48),items:Object.keys(t).map((function(e){return{title:e}})),selectedItem:{title:i},onChange:function(e){return o(e.title)}})]}),(0,u.tZ)(J.Z,{elevated:!0,keyName:i,filePath:n})]}):null}function ue(e,t){var n=(0,o.Z)({},e);return"add"===t.type?n[t.key]=t.value:"update"===t.type?(delete n[t.oldKey],n[t.key]=t.value):delete n[t.key],n}function se(e){var t=e.readRawEnv,n=e.writeRawEnv,r=e.getRunState,a=(0,M.R3)(),h=(0,p.Z)(),y=(0,l.Z)(s.useState(null),2),Z=y[0],b=y[1],w=(0,l.Z)(s.useState(!1),2),k=w[0],C=w[1],S=function(){C(!1)},R=(0,m.Z)();s.useEffect((function(){(0,g.Cn)(g.U3.ENV_EDITOR_USED,{action:"opened"}),v.Z.set("enveditortour",!0)}),[]),s.useEffect((function(){function e(){return(e=(0,i.Z)((function(){var e,n;return(0,c.__generator)(this,(function(r){switch(r.label){case 0:return[4,t()];case 1:if((e=r.sent()).error===d.Df.NotFound)return h.current&&b({}),[2];if(e.error)throw new Error("Error getting .env");return h.current?(n=f.Z.parse(e.content.toString()),b(n),[2]):[2]}}))}))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[t,b,h]);var G=s.useRef(null),I=s.useRef([]),D=function(){var e=(0,i.Z)((function(e){var r,i,o,a,l;return(0,c.__generator)(this,(function(c){switch(c.label){case 0:if(!Z)throw new Error("trying to write secrets before loading");return r=ue(Z,e),b(r),I.current.push(e),i=Math.random(),G.current=i,[4,t()];case 1:return a=c.sent(),G.current!==i?[2]:(a.error?o=r:(o=f.Z.parse(a.content.toString()),I.current.forEach((function(e){o=ue(o,e)})),b(o)),I.current=[],l=f.Z.serialize(o),[4,n(l)]);case 2:return c.sent(),[2]}}))}));return function(t){return e.apply(this,arguments)}}(),B=(0,q.Z)().showConfirm,A=function(){var e=(0,i.Z)((function(e){return(0,c.__generator)(this,(function(t){return(0,g.j)(g.U3.ENV_EDITOR_USED,{action:"created",multiline:e.value.includes("\n")}),D((0,o.Z)({type:"add"},e)),r()===te.Ah.RUNNING&&B("Re-run your Repl to use this secret"),S(),[2]}))}));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=(0,i.Z)((function(e,t){return(0,c.__generator)(this,(function(n){return(0,g.j)(g.U3.ENV_EDITOR_USED,{action:"updated",multiline:t.value.includes("\n")}),D((0,o.Z)({type:"update",oldKey:e},t)),[2]}))}));return function(t,n){return e.apply(this,arguments)}}(),U=function(){var e=(0,i.Z)((function(e){return(0,c.__generator)(this,(function(t){return(0,g.j)(g.U3.ENV_EDITOR_USED,{action:"deleted"}),D({type:"delete",key:e}),[2]}))}));return function(t){return e.apply(this,arguments)}}(),N=(0,ee.Z)((function(){return Z&&Object.keys(Z).length>0}),[Z]);return Z&&R?(0,u.BX)(E.G,{css:[_.l0.flex.column],children:[(0,u.BX)(E.G,{css:ne.headerStyle,children:[(0,u.tZ)(T.xv,{css:_.l0.flex.growAndShrink(1),variant:"subheadDefault",multiline:!1,children:"Secrets"}),(0,u.tZ)(P,{secrets:Z,update:function(){var e=(0,i.Z)((function(e){var t;return(0,c.__generator)(this,(function(r){switch(r.label){case 0:return b(e),t=f.Z.serialize(e),[4,n(t)];case 1:return r.sent(),[2]}}))}));return function(t){return e.apply(this,arguments)}}()}),(0,u.tZ)(V.Z,{iconLeft:(0,u.tZ)(W.Z,{}),href:"https://docs.replit.com/programming-ide/workspace-features/secrets",small:!0,text:"Docs",target:"_blank"}),(0,u.tZ)(x.zx,{iconLeft:(0,u.tZ)(H.Z,{}),text:"New Secret",colorway:"primary",small:!0,onClick:function(){return C(!0)}})]}),0===Object.keys(Z).length&&!1===k?(0,u.BX)(E.G,{css:[_.l0.center,_.l0.flex.shrink(1)],children:[(0,u.tZ)(Q.Z,{alt:"A rotating key",src:"/public/images/secrets/secretskey.gif",height:200,width:200,objectFit:"contain"}),(0,u.tZ)(T.xv,{variant:"subheadDefault",multiline:!1,children:"Store sensitive information securely using Secrets."}),(0,u.tZ)(T.xv,{css:[_.l0.textAlign.center,_.l0.mt(8),_.l0.color],multiline:!1,children:(0,u.tZ)("a",{href:"https://docs.replit.com/programming-ide/workspace-features/secrets#how-replit-keeps-your-secrets-safe",target:"_blank",rel:"noopener",children:"How does Replit keep my Secrets safe?"})})]}):null,(0,u.tZ)(le,{secrets:Z,onUpdateSecret:L,onDeleteSecret:U,onAddSecret:A,showAddSecret:k,onClose:S}),a&&N?(0,u.tZ)(ce,{secrets:Z,activeFile:a}):null]}):(0,u.tZ)(E.G,{css:[_.l0.center,_.l0.coverContainer],children:(0,u.tZ)(X.Z,{size:24})})}},39187:function(e,t,n){n.d(t,{tr:function(){return U}});var r=n(57389),i=n(81962),o=n(74985),a=n(50959),l=n(4561),c=n(39541),u=n(85368),s=n(43312),d=n(48712),f=n(83005),p=n(87978),h=n(57913),v=n(1261),m=n(45285),g=n(28681),y=n(82568),Z=n(11619),b=n(66656),w=n(68973),x=n(99964),k=n(63128),C=n(17807),S=n(88541);function T(e){var t=e.node;return t.type===l.Tv.Directory?(0,o.tZ)(d.Z,{size:16}):(0,o.tZ)(f.Z,{size:16,path:t.path})}var E=(0,w.$)(["menuY","menuX"]),R=E.cssVars,G=E.styleTokens,I=(0,y.X)({root:[c.l0.maxHeight(400),c.l0.position.absolute,c.l0.borderRadius(8),c.l0.shadow(3),{border:"1px solid",borderColor:c.TV.outlineDefault,top:G.menuY,left:G.menuX,"& > div":[c.l0.maxHeight(400)]}]}),_=(0,s.iv)([C.gU.nofill,{transitionProperty:"background-color, box-shadow, opacity",opacity:.8,":focus":{zIndex:1,opacity:1}}]),D={button:(0,s.iv)([c.l0.reset.button,c.l0.p(2),c.l0.rowWithGap(4),c.l0.align.center,_]),text:(0,s.iv)({fontSize:c.TV.fontSizeSmall})},B={opacity:1};function P(e){var t,n=function(){var e,t=null===(e=h.current)||void 0===e?void 0:e.getBoundingClientRect();t&&f({x:t.x+"px",y:t.y+t.height+4+"px"})},l=e.node,c=e.openFile,s=(0,a.useState)(!1),d=s[0],f=s[1],h=(0,a.useRef)(null),v=(0,x.Z)((function(e){var t;d&&((0,i.Z)(e.target,HTMLElement)&&(null===(t=h.current)||void 0===t?void 0:t.contains(e.target))||f(!1))}),[d]),m=(0,a.useId)(),g=(0,a.useId)(),y=(0,p.Il)(l.path)||".",Z=(0,p.UO)(l.path);return(0,o.BX)(o.HY,{children:[(0,o.BX)(u.G,{innerRef:h,tag:"button",id:m,style:d?B:void 0,"aria-haspopup":"true","aria-expanded":Boolean(d),"aria-controls":g,css:D.button,onClick:function(){d?f(!1):n()},onKeyDown:function(e){switch(e.key){case" ":case"Enter":case"ArrowDown":n()}},children:[(0,a.cloneElement)((0,o.tZ)(T,{node:l}),{size:12}),(0,o.tZ)(u.G,{css:D.text,children:Z})]}),d?(0,o.tZ)(b.h,{children:(0,o.tZ)(k.Tg,{id:g,css:I.root,innerRef:v,style:(t={},(0,r.Z)(t,R.menuX,d.x),(0,r.Z)(t,R.menuY,d.y),t),onKeyDown:function(e){var t;"Escape"===e.key&&(f(!1),null===(t=h.current)||void 0===t||t.focus())},children:(0,o.tZ)(A,{openFile:c,parentPath:y,currentPath:l.path})})}):null]})}function A(e){var t=(0,m.Z)().fs,n=(0,Z.Z)().preferences,r=(0,g.T)(!0),i=(0,a.useCallback)((function(e){return!r(e.filename)}),[r]),l=(0,S.P5)({controlName:"flag-filetree-menu-ultra",logFlagToAnalytics:!1}),c=(0,v.pR)({fs:t,filter:i,focusedPath:e.currentPath,fontSize:n.fontSize,root:e.parentPath,manageWidth:!0,onFileSelect:function(t){var n=t.path;e.openFile(n)},readOnly:!l,alwaysShowCreateRow:!0});return(0,o.tZ)(v.s8,{store:c.store})}var L=(0,s.iv)([c.l0.flex.row,c.l0.align.center,c.l0.height("100%"),c.l0.px(2)]),U=(0,a.memo)((function(e){var t=e.path,n=e.onFileClick,r=e.children,i=function(e){var t=e.split("/"),n=t.length;return t.map((function(e,r){return{type:r===n-1?l.Tv.File:l.Tv.Directory,path:t.slice(0,r+1).join("/")}}))}(t);return(0,o.BX)(u.G,{css:L,children:[i.map((function(e){return(0,o.BX)(a.Fragment,{children:[(0,o.tZ)(P,{node:e,openFile:n}),e.type===l.Tv.Directory?(0,o.tZ)(h.Z,{size:12}):null]},function(e){return CSS.escape(e.path)}(e))})),r||null]})}))},35273:function(e,t,n){n.d(t,{VY:function(){return P},HK:function(){return L},h4:function(){return I},Qc:function(){return D},H4:function(){return N},$E:function(){return A},Mp:function(){return F}});var r=n(57135),i=n(96583),o=n(74985),a=n(39541),l=n(85368),c=n(43312),u=n(39187),s=n(50959),d=n(92508),f=n(90171),p=n.n(f),h=n(18171),v=n(94452),m=n(77806),g=n(60566),y=n(49747),Z=n(15544),b=n(63740),w=n(13716),x=n(45285),k=n(71045),C=n(49085),S=n(87978);function T(e,t){return E.apply(this,arguments)}function E(){return(E=(0,r.Z)((function(e,t){var n,r,o;return(0,i.__generator)(this,(function(i){return n=(0,S.yC)(e),r=(0,S.UO)(e),(o=document.createElement("a")).setAttribute("href","data:".concat(n,";base64,").concat(t.toString("base64"))),o.setAttribute("download",r),o.style.display="none",document.body.appendChild(o),o.click(),document.body.removeChild(o),[2]}))}))).apply(this,arguments)}var R=n(54873),G=(0,c.iv)([a.l0.height(28),a.l0.flex.row,a.l0.align.center,{borderBottom:"1px solid ".concat(a.TV.backgroundHigher),opacity:.8,":hover":{opacity:1}}]);function I(e){return"/replEnvironmentDesktop"===p().pathname?(0,o.tZ)(l.G,{css:G,children:e.children}):null}var _=(0,c.iv)([a.l0.flex.row,a.l0.align.center,a.l0.flex.growAndShrink(1),a.l0.overflowX("auto"),a.l0.height("100%"),{"&::-webkit-scrollbar":{height:0},scrollbarWidth:"none"}]);function D(e){return(0,o.tZ)(l.G,{css:_,children:e.children})}var B=(0,c.iv)([a.l0.flex.growAndShrink(1),a.l0.position.relative]);function P(e){return(0,o.tZ)(l.G,{css:[B,e.children&&a.l0.center],children:e.children})}function A(e){return{type:(0,d.Dp)({path:e}),data:{path:e}}}function L(e){var t=e.path,n=e.performPaneOperation,r=(0,s.useCallback)((function(e){n({operation:"replace",pane:A(e)})}),[n]);return(0,o.tZ)(I,{children:(0,o.tZ)(D,{children:(0,o.tZ)(u.tr,{path:t,onFileClick:r})})})}function U(e){return{match:v.pl,data:{label:"Copy file path",icon:(0,o.tZ)(C.Z,{}),type:"action",run:function(){(0,g.Z)(e)}}}}function X(e){return{match:v.pl,data:{label:"Copy link",icon:(0,o.tZ)(Z.Z,{}),type:"action",run:function(){var t=(0,y.dr)({path:e});(0,g.Z)(t)}}}}function M(e,t,n){return{match:v.pl,data:{label:"Duplicate file",icon:(0,o.tZ)(m.Z,{}),type:"action",run:function(){return(0,r.Z)((function(){var r;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,(0,k.Z)(e,t)];case 1:return r=i.sent(),[3,3];case 2:return i.sent(),[2,{type:"error",message:"Error duplicating file"}];case 3:return n(r),[2]}}))}))()}}}}function N(e,t){return{match:v.pl,data:{label:"Download",icon:(0,o.tZ)(b.Z,{}),type:"action",run:function(){return(0,r.Z)((function(){var n;return(0,i.__generator)(this,(function(r){switch(r.label){case 0:return[4,t.readFile(e)];case 1:return(n=r.sent()).error?[2,{type:"error",message:"Error downloading file"}]:[4,T(e,n.content)];case 2:return r.sent(),[2]}}))}))()}}}}function O(e,t){return{match:v.pl,data:{label:"Delete",icon:(0,o.tZ)(R.Z,{}),type:"action",run:function(){t(e)}}}}function F(e){var t=e.path,n=e.performPaneOperation,r=(0,x.Z)(),i=(0,w._o)();return(0,h.Z)((function(){return t?[U(t),X(t),M(t,r.fs,(function(e){n({operation:"replace",pane:{type:(0,d.Dp)({path:e}),data:{path:e}}})})),N(t,r.fs),O(t,i)]:null}),[t,r.fs,n,i])}},39985:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(74985),i=(n(50959),n(87978)),o=n(61284),a=n(85368),l=n(39541),c=n(45510),u=n(92471);function s(e){var t,n=e.paths,s=e.onCancel,d=e.onConfirm;return(0,r.BX)(a.G,{css:[l.l0.colWithGap(24)],children:[(0,r.tZ)(o.h4,{level:1,variant:"headerDefault",children:n.length>1?"Overwrite files?":"Overwrite file?"}),(0,r.BX)(o.xv,{children:[(t=n,(t=t.map(i.UO)).length<2?t[0]:"".concat(t.slice(0,-1).join(", ")," and ").concat(t.slice(-1)))," already"," ",n.length>1?"exist":"exists"," in the destination, are you sure you want to overwrite ",n.length>1?"them":"it","? This cannot be undone."]}),(0,r.BX)(a.G,{css:[l.l0.rowWithGap(12),l.l0.justify.end],children:[(0,r.tZ)(c.zx,{onClick:function(){return s()},text:"Cancel"}),(0,r.tZ)(c.zx,{colorway:"negative",onClick:function(){return d()},text:"Yes, overwrite ".concat(n.length>1?"these files":"this file"),iconLeft:(0,r.tZ)(u.Z,{})})]})]})}},69886:function(e,t,n){var r=n(74985),i=(n(50959),n(2041)),o=n(61284),a=n(45510),l=n(85368),c=n(90171),u=n(47255),s=n(39541);t.Z=function(e){var t=e.isOpen,n=(0,c.useRouter)();return(0,r.tZ)(i.u,{preventClose:!0,isOpen:t,centered:!0,onRequestClose:function(){},maxWidth:600,children:(0,r.BX)(l.G,{css:[s.l0.colWithGap(32)],children:[(0,r.BX)(l.G,{css:[s.l0.rowWithGap(16),s.l0.align.center],children:[(0,r.tZ)(u.Z,{size:24,css:[s.l0.color.orangeStrongest]}),(0,r.tZ)(o.h4,{css:[{width:"fit-content"}],level:2,variant:"headerDefault",children:"You can\u2019t join this Repl from Firewall Mode."})]}),(0,r.BX)(l.G,{css:[s.l0.pr(32),s.l0.colWithGap(16)],children:[(0,r.tZ)(o.xv,{children:"This Repl was started by someone not in Firewall Mode. If you would like to join, please do one of the following:"}),(0,r.BX)(l.G,{css:[s.l0.colWithGap(16),s.l0.pl(16)],children:[(0,r.tZ)(o.xv,{multiline:!1,children:"\u2022 Exit Firewall Mode."}),(0,r.tZ)(o.xv,{multiline:!1,children:"\u2022 Ask the creator to open this Repl in Firewall Mode."})]})]}),(0,r.BX)(l.G,{css:[s.l0.rowWithGap(16),s.l0.justify.end],children:[(0,r.tZ)(a.zx,{text:"Exit Firewall Mode",onClick:function(){window.location.href="https://www.replit.com".concat(n.asPath)}}),(0,r.tZ)(a.zx,{text:"Leave",onClick:function(){n.push("/home","~/")}})]})]})})}},77306:function(e,t,n){n.d(t,{eo:function(){return y},fO:function(){return g},pe:function(){return Z}});var r=n(74985),i=n(82568),o=n(45510),a=n(39541),l=n(50959),c=n(43312),u=n(72799),s=n(60566),d=n(77806),f=n(625),p=n(66539),h=n(28199),v=(0,c.F4)({"0%":{opacity:0,transform:"translateX(8px)"},"10%":{opacity:1,transform:"translateX(0)"},"95%":{opacity:1},"100%":{opacity:0}}),m=(0,i.X)({buttonContainer:[a.l0.position.relative,{transition:"opacity 75ms linear",opacity:1}],buttonWrapper:[a.l0.flex.row],button:[a.l0.backgroundColor.backgroundDefault],buttonToast:{position:"absolute",display:"block",bottom:"100%",paddingBottom:a.TV.space4,paddingRight:a.TV.space8,animation:"".concat(v," 3s"),fontFamily:a.TV.fontFamilyDefault,fontSize:a.TV.fontSizeDefault,whiteSpace:"nowrap",userSelect:"none"}}),g=function(e){var t=e.code,n=e.language,i=(0,l.useState)(!1),a=i[0],c=i[1];return(0,r.BX)("div",{css:m.buttonContainer,children:[a?(0,r.tZ)("span",{css:m.buttonToast,onAnimationEnd:function(){requestAnimationFrame((function(){c(!1)}))},"aria-hidden":!0,children:"Copied!"}):null,(0,r.tZ)(o.zx,{css:m.button,text:"Copy",small:!0,iconLeft:(0,r.tZ)(d.Z,{}),onClick:function(){(0,f.j)(f.U3.GHOSTWRITER_CHAT_CODE_COPIED,{language:n}),(0,s.Z)(t),c(!0)}})]})},y=function(e){var t=e.code,n=e.disabled,i=e.insertCode,a=(0,l.useState)(!1),c=a[0],s=a[1],d=(0,r.tZ)(o.zx,{css:m.button,text:"Insert",disabled:n,small:!0,iconLeft:(0,r.tZ)(u.Z,{}),onClick:function(){i&&(i(t),s(!0))}});return(0,r.BX)("div",{css:m.buttonContainer,children:[c?(0,r.tZ)("span",{css:m.buttonToast,onAnimationEnd:function(){requestAnimationFrame((function(){s(!1)}))},"aria-hidden":!0,children:"Inserted!"}):null,(0,r.tZ)(p.u,{placement:"bottom",tooltip:n?"Place cursor in a file to insert code":"Insert code at cursor position",children:d})]})},Z=function(e){var t=e.revertCodeInsert,n=(0,l.useState)(!1),i=n[0],a=n[1],c=(0,r.tZ)(o.zx,{css:m.button,text:"Revert",small:!0,iconLeft:(0,r.tZ)(h.Z,{}),onClick:function(){t(),a(!0)}});return(0,r.BX)("div",{css:m.buttonContainer,children:[i?(0,r.tZ)("span",{css:m.buttonToast,onAnimationEnd:function(){requestAnimationFrame((function(){a(!1)}))},"aria-hidden":!0,children:"Reverting..."}):null,(0,r.tZ)(p.u,{placement:"bottom",tooltip:"Revert code insertion",children:c})]})}},94169:function(e,t,n){var r=n(74985),i=n(17755),o=n(70714);t.Z=function(e){var t=e.author,n=e.advancedGwAvatar,a=e.smallAvatar,l=e.showUsername,c=void 0===l||l;return(0,r.tZ)(i.n,{src:n?"/public/images/ghostwriter/gw-advanced-avatar.svg":t.image,css:n?o.V.advancedModelOverrideForHexagonGwAvatar:void 0,username:c?t.username:"",small:a})}},66769:function(e,t,n){n.d(t,{v:function(){return ze},z:function(){return Fe}});var r=n(74985),i=n(39541),o=n(61284),a=n(85368),l=n(87076),c=n(32104),u=n(38556),s=n(50959),d=n(81202),f=n.n(d),p=n(34495),h=n(57135),v=n(72006),m=n(96583),g=n(83293),y=n(18171),Z=n(34979),b=n(625),w=n(45510),x=n(9020),k=n(15544),C=n(45285),S=n(4421),T=n(51624),E=n(34227),R={author:"ghostwriter"},G=function(){(0,b.j)(b.U3.GHOSTWRITER_CHAT_CODE_COPIED)},I=function(e){var t=e.title;return(0,r.tZ)(a.G,{css:[i.l0.backgroundColor.backgroundDefault,i.l0.px(4),{borderTopLeftRadius:4,borderTopRightRadius:4}],children:(0,r.tZ)(o.xv,{variant:"small",multiline:!1,children:t})})},_=function(e){var t=e.originalCode,n=e.transformedCode,o=e.filePath,l=e.streamingCompleted,c=(0,g.J)({left:{code:t,filePath:o},right:{code:n,filePath:o},showDiffDecorations:l}),u=c.left,s=c.right,d=(0,C.Z)().fs,f=(0,T.t)();return(0,r.BX)(a.G,{css:[i.l0.width("100%")],children:[(0,r.BX)(a.G,{css:[i.l0.flex.row,i.l0.flex.wrap],children:[u.ref?(0,r.BX)(a.G,{css:[{flex:"1 1 50%",minWidth:S.j.mobileMin}],children:[(0,r.tZ)(I,{title:"original"}),(0,r.tZ)(E.Z,{ref:u.ref,css:[i.l0.viewStyle,i.l0.backgroundColor.backgroundHigher,i.l0.overflow("auto"),i.l0.maxHeight(300)],initialDoc:u.code,lineWrapping:!1,readOnly:!0})]}):null,s.ref?(0,r.BX)(a.G,{css:[{flex:"1 1 50%",minWidth:S.j.mobileMin}],children:[(0,r.tZ)(I,{title:"edited"}),(0,r.tZ)(E.Z,{ref:s.ref,css:[i.l0.viewStyle,i.l0.backgroundColor.backgroundHigher,i.l0.overflow("auto"),i.l0.maxHeight(300)],initialDoc:s.code,lineWrapping:!1,readOnly:!0})]}):null]}),(0,r.tZ)(a.G,{css:[i.l0.rowWithGap(4),i.l0.pt(8)],children:(0,r.tZ)(w.zx,{small:!0,outlined:!0,iconLeft:(0,r.tZ)(k.Z,{}),text:o,onClick:function(){f({path:o})}})}),l?(0,r.tZ)(a.G,{css:[i.l0.rowReverseWithGap(4),i.l0.py(8)],children:(0,r.tZ)(w.zx,{text:"Replace original",colorway:"primary",css:[i.l0.px(16),i.l0.font.default],onClick:(0,h.Z)((function(){var e;return(0,m.__generator)(this,(function(t){return(0,b.j)(b.U3.GHOSTWRITER_CHAT_CODE_REPLACED),e=d.watchTextFile(o,{onReady:function(t){var r=t.initialContent;(0,t.writeChange)({from:0,to:r.toString().length,insert:n},R),d.flush().finally((function(){e()}))}}),[2]}))}))})}):null]})},D=n(2272),B=n(25439),P=n(3516),A=n(1459),L=n(80629),U=n(28069),X=n(51631),M=n(43119),N=n(71440),O=n(50216);function F(){var e=(0,M.Z)(["\n  mutation AIFeedback($input: CodexFeedback2Input!) {\n    giveCodexFeedback2(input: $input) {\n      ... on CodexFeedback2 {\n        id\n        __typename\n      }\n      ... on UnauthorizedError {\n        __typename\n      }\n      ... on NotFoundError {\n        __typename\n      }\n    }\n  }\n"]);return F=function(){return e},e}var W={},H=(0,N.Ps)(F());var V=n(37834),z=function(e){var t=e.provideFeedback;return(0,r.BX)(a.G,{css:[i.l0.rowWithGap(4),i.l0.align.center],children:[(0,r.tZ)(l.h,{alt:"Helpful",colorway:"positive",children:(0,r.tZ)(A.Z,{css:{"&:not(:hover)":[i.l0.color.foregroundDimmer]},onClick:function(){return t(X.TY.Yes)}})}),(0,r.tZ)(l.h,{alt:"Unhelpful",colorway:"negative",children:(0,r.tZ)(B.Z,{css:{"&:not(:hover)":[i.l0.color.foregroundDimmer]},onClick:function(){return t(X.TY.No)}})})]})},j=function(e){return e.feedback===X.TY.Yes?(0,r.tZ)(L.Z,{}):(0,r.tZ)(P.Z,{})};function q(e){var t=e.inferenceId,n=e.inferenceClass,i=(0,s.useState)(null),o=i[0],a=i[1],l=(0,V.v)(),c=(0,D.Z)(function(e){var t=(0,v.Z)({},W,e);return O.D(H,t)}(),2),u=c[0];return c[1].error?(0,r.tZ)(U.Z,{}):(0,r.tZ)(r.HY,{children:o?(0,r.tZ)(j,{feedback:o}):(0,r.tZ)(z,{provideFeedback:function(e){n===X.Sg.Chat&&(0,b.j)(b.U3.GHOSTWRITER_CHAT_FEEDBACK_SUBMITTED,{feedback:e}),u({variables:{input:{feedback:e,inferenceClass:n,inferenceId:t}}}),a(e),l(!0)}})})}var $=n(73194),Y=n.n($),K=n(69365),Q=n(64918),J=n(76735),ee=n(96351),te=n(40207),ne=n(52364),re=n(38335),ie=n(31854),oe=n(44090),ae=n(6394),le=n(66539),ce=n(82568),ue=n(83005),se=n(88541),de=n(77511),fe=n(34938),pe=n(4405),he=n(87762);function ve(e){return(0,r.tZ)(he.Z,(0,pe.Z)((0,v.Z)({viewBox:"0 0 13 12"},e),{children:(0,r.tZ)("path",{d:"M6.25 0.721688C6.4047 0.632371 6.5953 0.632371 6.75 0.721688L10.9462 3.14434C11.1009 3.23365 11.1962 3.39872 11.1962 3.57735V8.42265C11.1962 8.60128 11.1009 8.76635 10.9462 8.85566L6.75 11.2783C6.5953 11.3676 6.4047 11.3676 6.25 11.2783L2.05385 8.85566C1.89915 8.76635 1.80385 8.60128 1.80385 8.42265V3.57735C1.80385 3.39872 1.89915 3.23365 2.05385 3.14434L6.25 0.721688Z",fill:"#5239CC",stroke:"#795EFF"})}))}var me=n(93658),ge=n(39691),ye=(0,ce.X)({footerContainer:[i.l0.rowWithGap(8),i.l0.flex.wrap],retryButton:[i.l0.width(100),{"@keyframes slideLeft":{"0%":{paddingLeft:30},"100%":{paddingLeft:8}},"@keyframes slideRight":{"0%":{paddingLeft:8},"100%":{paddingLeft:30}}}]}),Ze="You have reached the weekly limit.",be=function(e){var t,n=e.onRetry,o=e.limitReached,c=(0,ge.T9)(),u=c.useAdvancedModel,d=c.setUseAdvancedModel,f=(0,s.useRef)(!1),p=(0,de.T3)(),h=u&&!o,v=(0,s.useId)(),m=(0,se.P5)({controlName:"flag-ghostwriter-model-selection",logFlagToAnalytics:!0});t=!f.current||o?void 0:h?"slideLeft 300ms ease-out":"slideRight 300ms ease-out";var g=(0,r.BX)(r.HY,{children:[(0,r.tZ)(fe.X,{onChange:function(e){f.current||(f.current=!0),(0,b.j)(b.U3.GHOSTWRITER_CHAT_MODEL_CHANGED,{source:"footer",model:e.target.checked?"advanced":"default"}),d(!h)},id:v,disabled:o,checked:!o&&h}),(0,r.tZ)("label",{htmlFor:v,css:o?[i.l0.color.foregroundDimmer]:void 0,children:"Advanced model"})]});return(0,r.BX)(a.G,{css:[i.l0.rowWithGap(8),i.l0.flex.growAndShrink(1),{justifyContent:"flex-end"}],children:[!m||u&&!f.current?null:(0,r.BX)(a.G,{css:[i.l0.rowWithGap(8),i.l0.align.center],children:[o?(0,r.tZ)(le.u,{tooltip:Ze,children:(0,r.tZ)(a.G,{css:[i.l0.rowWithGap(8)],children:g})}):g,p?null:(0,r.tZ)(l.h,{alt:o?Ze:"Useful for more complex, vague, or creative requests.",size:24,children:(0,r.tZ)(me.Z,{})})]}),(0,r.tZ)(w.zx,{css:[ye.retryButton,{paddingLeft:h?8:30,animation:t}],outlined:!0,iconLeft:(0,r.tZ)(x.RotateCcw,{}),iconRight:(0,r.tZ)(ve,{css:[{transition:"opacity 300ms ease-out",opacity:h?1:0}]}),text:"Retry",onClick:function(e){return n(Boolean(h))}})]})},we=function(e){var t=e.onRetry,n=e.limitReached;return(0,r.tZ)(a.G,{css:ye.footerContainer,children:(0,r.tZ)(be,{onRetry:t,limitReached:n})})},xe=n(51529),ke=n(29203),Ce=n(13902),Se=(0,n(91398).cn)(null,(function(e,t,n){t(Ce.FH,{messageId:n.id}),t(ne.SX,{responseId:n.id,action:n.intent,shouldUseAdvancedModelOverride:!1})})),Te=function(e){var t=e.isOpen,n=e.onToggle,i=t?(0,r.tZ)(x.ChevronUp,{}):(0,r.tZ)(x.ChevronDown,{});return(0,r.tZ)(w.zx,{outlined:!0,text:"Send feedback",iconRight:i,onClick:function(){(0,b.j)(b.U3.GHOSTWRITER_CHAT_INLINE_FEEDBACK_TOGGLED,{state:t?"closed":"opened"}),n()}})},Ee=n(39137);function Re(){var e=(0,M.Z)(["\n  mutation GiveChatGhostwriterFeedback($input: WorkflowFeedbackInputType!) {\n    giveWorkflowFeedback(input: $input) {\n      ... on WorkflowFeedbackOutputType {\n        __typename\n        id\n      }\n      ... on UnauthorizedError {\n        __typename\n        message\n      }\n      ... on UserError {\n        __typename\n        message\n      }\n      ... on TooManyRequestsError {\n        __typename\n        message\n      }\n    }\n  }\n"]);return Re=function(){return e},e}var Ge={},Ie=(0,N.Ps)(Re());var _e=n(13233),De=n(54761),Be=n(27691),Pe=n(48330),Ae=(0,ce.X)({wrapper:[i.l0.colWithGap(8)],textInput:[[i.l0.flex.growAndShrink(1),i.l0.width("100%"),i.l0.height(64),{resize:"none"}]],buttonGroup:[i.l0.rowWithGap(8),i.l0.justify.end]}),Le=function(e){var t=e.isOpen,n=e.message,o=e.closeFeedback,l=(0,s.useState)(""),c=l[0],u=l[1],d=(0,_e.Z)().showError,f=(0,ne.zu)(),p=(0,De.nS)(),h=(0,Pe.Z)(),m=(0,de.T3)(),g=(0,D.Z)(function(e){var t=(0,v.Z)({},Ge,e);return O.D(Ie,t)}({onError:function(){d("Unable to provide feedback")},onCompleted:function(e){var t;"WorkflowFeedbackOutputType"!==(null===(t=e.giveWorkflowFeedback)||void 0===t?void 0:t.__typename)?d(e.giveWorkflowFeedback.message):(p({message:n,feedback:c}),u(""),o())}}),2),y=g[0],Z=g[1].loading,x=(0,s.useCallback)((function(){(0,b.j)(b.U3.GHOSTWRITER_CHAT_INLINE_FEEDBACK_CANCELLED),o()}),[o]);if(!t)return null;var k=Z?Be.p.backgroundPulse(i.TV.accentPrimaryDimmest,i.TV.accentPrimaryDimmer):null;return(0,r.BX)(a.G,{css:Ae.wrapper,children:[(0,r.tZ)(Ee.B,{css:[Ae.textInput],maxLength:5e3,autoFocus:!0,type:"text",inputMode:"text",placeholder:"Let us know how we can improve this response",value:c,onChange:function(e){u(e.target.value)},onKeyDown:function(e){"Escape"!==e.key||Z||x()}}),(0,r.BX)(a.G,{css:Ae.buttonGroup,children:[(0,r.tZ)(w.zx,{outlined:!0,text:"Cancel",disabled:Z,onClick:x}),(0,r.tZ)(w.zx,{css:k,text:"Submit",disabled:Z,colorway:"primary",onClick:function(){0!==c.length&&((0,b.j)(b.U3.GHOSTWRITER_CHAT_INLINE_FEEDBACK_SUBMITTED),y({variables:{input:{ghostwriterChatFeedback:{chatHistory:JSON.stringify(f),feedback:c,metadata:JSON.stringify({messageId:n.inferenceId,replId:h,chatMessageId:n.id,isMobile:m})}}}}))}})]})]})},Ue=n(70714),Xe=n(94169),Me=(0,ce.X)({inlineCodeReferenceBlockContainer:[i.l0.py(8)],inlineCodeReferenceBlock:[{backgroundColor:i.TV.backgroundHigher},i.l0.p(8),i.l0.borderRadius(8),{borderTopLeftRadius:0}],inlineCodeReferenceFilePathContainer:[i.l0.rowWithGap(4)],inlineCodeReferenceFilePathButton:[{borderBottomWidth:0,borderBottomLeftRadius:0,borderBottomRightRadius:0}],footerContainer:[i.l0.rowWithGap(4),i.l0.justify.spaceBetween,i.l0.flex.wrapReverse]}),Ne=Y()((function(){return n.e(4295).then(n.bind(n,34295))}),{loadableGenerated:{webpack:function(){return[34295]}}}),Oe=[{title:"Default",value:"NONE"},{title:"Generate code",value:"GENERATE"},{title:"Explain code",value:"EXPLAIN"},{title:"Edit code",value:"TRANSFORM"},{title:"Replit docs",value:"REPLIT_DOCS"}],Fe=function(e){var t=e.author,n=e.intent,l=e.smallAvatar,c=e.advancedGwAvatar,u=e.id,s=e.regenerate,d="NONE"!==n;return(0,r.BX)(a.G,{css:[i.l0.rowWithGap(4),i.l0.align.center],children:[(0,r.tZ)(Xe.Z,{author:t,advancedGwAvatar:c,smallAvatar:l}),n?(0,r.BX)(r.HY,{children:[d?(0,r.tZ)(o.xv,{multiline:!1,children:"used"}):null,s&&u?(0,r.tZ)(Ve,{"aria-label":"Reclassify message",intent:n,id:u,regenerate:s}):d&&(0,r.tZ)(He,{intent:n})]}):null]})},We=function(){return(0,r.BX)(a.G,{css:[i.l0.color.accentNegativeStronger,i.l0.flex.row,i.l0.rowWithGap(4),i.l0.align.center],children:[(0,r.tZ)(J.Z,{}),(0,r.tZ)(o.xv,{children:"Response reached maximum output length"})]})},He=function(e){var t=e.intent,n=Oe.find((function(e){return e.value===t}));return(0,r.tZ)(ee.D,{css:[i.l0.fontSize(14),i.l0.height(26),i.l0.p(12),i.l0.backgroundColor.backgroundDefault,{borderColor:i.TV.blurpleDefault,borderWidth:"1px",borderStyle:"solid"}],text:(null===n||void 0===n?void 0:n.title)||""})},Ve=function(e){var t=e.id,n=e.intent,o=e.regenerate,a=(0,ne.gp)(),l=a?"You cannot change the action while the message is sending":"Change Ghostwriter's action for this message";if(!(0,Q.J1)(n))return null;var c="NONE"===n?null:Oe.find((function(e){return e.value===n})),u=Oe.filter((function(e){return e.value!==n}));return(0,r.tZ)(le.u,{tooltip:l,placement:"top",children:(0,r.tZ)(ie.P,{items:u,disabled:a,css:[i.l0.backgroundColor.backgroundDefault,i.l0.borderRadius(16),i.l0.height(26),i.l0.p(8),{borderColor:i.TV.blurpleDefault}],placeholder:"Select action",selectedItem:c,onChange:function(e){(0,Q.J1)(e.value)&&((0,b.j)(b.U3.GHOSTWRITER_CHAT_INTENT_RECLASSIFIED,{from:n,to:e.value}),o({responseId:t,action:e.value}))}})})},ze=(0,s.memo)((function(e){var t,n,d=e.message,f=e.autoScroll,h=e.postMessageComponent,m=e.isLastAssistantMessage,g=void 0!==m&&m,x=d.text,C=d.author,S=d.loading,E=d.error,R=d.attribution,I=d.inferenceId,D=d.stopReason,B=(0,ne.Gd)(),P=(0,te.d$)(),A="Assistant"===R,L=D===Q.tD.MaxTokens,U=(0,te.wK)({messageId:d.id}),M=(0,ne.gp)(),N=(0,T.t)(),O=Boolean(d.stopReason||d.aborted),F=(0,se.P5)({controlName:"flag-ghostwriter-model-selection",logFlagToAnalytics:!0}),W=(0,de.T3)(),H=F&&A&&d.useAdvancedModel&&!O,z=(0,ke.$X)(Se),j=(0,se.P5)({controlName:"flag-better-feedback",logFlagToAnalytics:!1}),$=F&&A&&(d.tokenUsage&&O||d.aborted||d.error)&&g,Y=A&&O&&void 0!==I&&g,J=(0,V.M)(),ee=(0,V.v)(),ie=(0,s.useRef)(null),ce=(0,K.rM)();(0,s.useLayoutEffect)((function(){f&&ie.current&&requestAnimationFrame((function(){f&&ie.current&&((0,p.Z)(ie.current,{behavior:"auto",scrollMode:"always"}),ce(!0))}))}),[x,f,ce,$,J]);var fe=i.TV.foregroundDefault;A&&S&&(fe=i.TV.foregroundDimmer);var pe=(0,y.Z)((function(){return(0,oe.BW)(d.id)}),[d.id]),he=(0,y.Z)((function(){var e,t,n,i,o=null===U||void 0===U||null===(e=U.workspaceContext)||void 0===e?void 0:e.mostRecentFile,a=null!==(i=null===U||void 0===U||null===(t=U.workspaceContext)||void 0===t?void 0:t.fileContext.find((function(e){return e.filePath===o})))&&void 0!==i?i:null===U||void 0===U||null===(n=U.workspaceContext)||void 0===n?void 0:n.fileContext[0],l=null===a||void 0===a?void 0:a.code;return o&&l?function(e){var t=e.originalCode,n=e.filePath,i=e.streamingCompleted;return function(e){var o=String(e.children);return(0,y.Z)((function(){return e.inline?(0,r.tZ)(Z.Z,(0,v.Z)({onCodeCopied:G},e)):(0,r.tZ)(_,{originalCode:t,transformedCode:o,filePath:n,streamingCompleted:i})}),[e,o])}}({originalCode:l,filePath:o,streamingCompleted:O}):pe}),[null===U||void 0===U||null===(t=U.workspaceContext)||void 0===t?void 0:t.fileContext,null===U||void 0===U||null===(n=U.workspaceContext)||void 0===n?void 0:n.mostRecentFile,O,pe]);if("transformCode"===d.type&&!P)return null;var ve,me="TRANSFORM"===d.intent?he:pe;return ve="explainCode"!==d.type||d.loading?"Human"===d.attribution?(0,r.tZ)(re.J,{text:x,textColor:fe}):(0,r.tZ)(re.J,{text:x,textColor:fe,codeComponent:me}):"Human"===d.attribution?(0,r.tZ)(a.G,{children:(0,r.tZ)(re.J,{text:"Explain code",textColor:fe,codeComponent:me})}):(0,r.BX)(a.G,{children:[d.codeReference?(0,r.BX)(a.G,{css:Me.inlineCodeReferenceBlockContainer,children:[(0,r.tZ)(a.G,{css:Me.inlineCodeReferenceFilePathContainer,children:(0,r.tZ)(w.zx,{small:!0,outlined:!0,css:Me.inlineCodeReferenceFilePathButton,iconLeft:(0,r.tZ)(ue.Z,{size:12,path:d.codeReference.filePath}),iconRight:(0,r.tZ)(k.Z,{}),text:"".concat(d.codeReference.filePath," ").concat(d.codeReference.range.lineFrom,":").concat(d.codeReference.range.lineTo),onClick:function(){d.codeReference&&N({path:d.codeReference.filePath,line:d.codeReference.range.lineTo})}})}),(0,r.tZ)(ae.Z,{css:Me.inlineCodeReferenceBlock,lineNumbers:!0,lineNumbersStart:d.codeReference.range.lineFrom,language:d.codeReference.language,code:d.codeReference.code,filePath:d.codeReference.filePath})]}):null,(0,r.tZ)(re.J,{text:x,textColor:fe,codeComponent:me})]}),(0,r.BX)(a.G,{css:[Ue.V.messageWrapper,"Assistant"===R?Ue.V.ghostwriterPurpleBackground:null],children:[(0,r.BX)(a.G,{css:[i.l0.flex.row,i.l0.justify.spaceBetween,i.l0.align.center],children:[(0,r.tZ)(Fe,{author:C,intent:d.intent,id:d.id,advancedGwAvatar:A&&d.useAdvancedModel,regenerate:g?B:null}),(0,r.BX)(a.G,{css:[i.l0.rowWithGap(8)],children:[H?(0,r.tZ)(le.u,{tooltip:"Retry with a faster but less advanced model",children:(0,r.tZ)(w.zx,{text:"Speed up",iconLeft:(0,r.tZ)(xe.Z,{}),outlined:!0,onClick:function(){(0,b.j)(b.U3.GHOSTWRITER_CHAT_SPEED_UP_CLICKED,{timeToFirstStream:Number(U.timeToFirstStream)}),z(d)}})}):null,F||!g||M?null:(0,r.tZ)(l.h,{alt:"Regenerate",css:{"&:not(:hover)":[i.l0.color.foregroundDimmer]},onClick:function(){(0,b.j)(b.U3.GHOSTWRITER_CHAT_RESPONSE_REGENERATED,{isAdvancedModel:!1,timesRegenerated:(d.timesRegenerated||0)+1}),B({responseId:d.id,action:d.intent})},children:(0,r.tZ)(u.Z,{})})]})]}),(0,r.BX)(a.G,{css:[i.l0.rowWithGap(8),i.l0.align.center],children:[A&&S?(0,r.tZ)(c.Z,{}):null,(0,r.tZ)(a.G,{css:[i.l0.colWithGap(8),i.l0.flex.growAndShrink(1)],children:ve})]}),h||null,A&&"string"===typeof E?(0,r.tZ)(a.G,{children:(0,r.tZ)(o.xv,{css:[i.l0.color.accentNegativeStronger,i.l0.fontSize(16)],children:E})}):null,L?(0,r.tZ)(We,{}):null,(0,r.BX)(a.G,{css:Me.footerContainer,children:[Y?(0,r.BX)(a.G,{css:[i.l0.rowWithGap(4)],children:[j&&!W?(0,r.tZ)(Te,{isOpen:J,onToggle:function(){return ee(!J)}}):null,(0,r.tZ)(a.G,{css:[i.l0.rowWithGap(8),i.l0.align.center],children:(0,r.tZ)(q,{inferenceClass:X.Sg.Chat,inferenceId:I})})]}):null,$?(0,r.tZ)(we,{limitReached:d.tokenUsage&&d.tokenUsage.userTokenUsage+d.tokenUsage.messageTokenUsage>d.tokenUsage.tokenLimit,onRetry:function(e){(0,b.j)(b.U3.GHOSTWRITER_CHAT_RESPONSE_REGENERATED,{isAdvancedModel:e,timesRegenerated:(d.timesRegenerated||0)+1}),B({responseId:d.id,action:d.intent})}}):null]}),(0,r.tZ)(Le,{isOpen:j&&Y&&J,closeFeedback:function(){return ee(!1)},message:d}),P?(0,r.tZ)(Ne,{message:d}):null,f?(0,r.tZ)(a.G,{css:{marginTop:-8,marginBottom:0},innerRef:ie}):null]})}),(function(e,t){return t.autoScroll===e.autoScroll&&t.isLastAssistantMessage===e.isLastAssistantMessage&&f()(t.message,e.message)}))},38335:function(e,t,n){n.d(t,{J:function(){return g}});var r=n(72006),i=n(74985),o=n(47900),a=n(39541),l=n(61284),c=n(85368),u=n(49810),s=n(50959),d=n(71253),f=n(66164),p=[n(25462).Z,f.Z,d.Z],h=[],v=function(e){return(0,i.tZ)(c.G,{children:(0,i.tZ)(l.xv,{children:e.children})})},m={h1:v,h2:v,h3:v,h4:v,h5:v,h6:v},g=(0,s.memo)((function(e){var t=e.text,n=e.textColor,l=e.codeComponent,c=l?{code:l}:void 0;return(0,i.tZ)(o.ZP,{remarkPlugins:p,rehypePlugins:h,components:(0,r.Z)({},m,c),css:[u.Z,{p:{color:n,lineHeight:1.875}},a.l0.maxWidth("100%")],lineBreaks:!0,children:t})}))},44090:function(e,t,n){n.d(t,{BW:function(){return p}});var r=n(72006),i=n(74985),o=n(83005),a=n(61284),l=n(85368),c=n(39541),u=n(68525),s=n(34979),d=n(5293),f=n(77306);var p=function(e){return function(t){return h(t,e)}},h=function(e,t){var n=(0,d.G6)();if(e.inline)return(0,i.tZ)(s.Z,(0,r.Z)({},e));var p=(0,s.F)(e.className),h=p&&function(e){switch(e){case"crystal":return"main.cr";case"python":case"py":return"main.py";case"sh":case"fish":case"zsh":case"bash":return"main.sh";case"javascript":case"js":return"index.js";case"typescript":case"ts":return"index.ts";case"csharp":case"cs":return"main.cs";case"java":return"Main.java";case"go":return"main.go";case"ruby":case"rb":return"main.rb";case"php":return"main.php";case"rust":return"main.rs";case"swift":return"main.swift";case"kotlin":return"main.kt";case"scala":return"main.scala";case"c":return"main.c";case"cpp":case"c++":return"main.cpp";case"dart":return"main.dart";case"elixir":return"main.ex";case"haskell":return"Main.hs";case"lua":return"main.lua";case"perl":return"main.pl";case"r":return"main.r";case"sql":return"main.sql";case"ocaml":return"main.ml";case"html":return"index.html";case"json":return"main.json";case"css":return"main.css";default:return}}(p),v=h?u.$R.from(h):void 0,m=null===v||void 0===v?void 0:v.name,g=String(e.children);return(0,i.tZ)(l.G,{css:[c.l0.colWithGap(12)],children:(0,i.BX)(l.G,{children:[(0,i.BX)(l.G,{css:[c.l0.flex.row,c.l0.align.center,c.l0.p(8),c.l0.backgroundColor.backgroundDefault,c.l0.font.default,{borderTopLeftRadius:4,borderTopRightRadius:4}],children:[(0,i.BX)(l.G,{css:[c.l0.flex.row,c.l0.align.center,{flexGrow:1}],children:[h?(0,i.tZ)(o.Z,{size:12,path:h}):null,m?(0,i.tZ)(a.xv,{multiline:!1,css:[c.l0.pl(4),c.l0.fontSize(12),c.l0.color.foregroundDimmer],children:m}):null]}),(0,i.tZ)(f.fO,{code:g,language:p}),(0,i.tZ)(n,{messageId:t,code:g,language:p})]}),(0,i.tZ)(s.Z,(0,r.Z)({disableCopy:!0,blockStyles:[c.l0.p(8),{borderBottomLeftRadius:4,borderBottomRightRadius:4}]},e))]})})}},94178:function(e,t,n){var r=n(74985),i=n(61284),o=n(85368),a=n(5889),l=n(39541);t.Z=function(e){var t=e.textVariant,n=e.showImage;return(0,r.BX)(o.G,{css:[l.l0.center,l.l0.textAlign.center,l.l0.px(16),l.l0.colWithGap(8),l.l0.flex.growAndShrink(1)],children:[(0,r.tZ)(i.xv,{variant:t,children:"Ghostwriter is currently unavailable. Please try again later."}),n?(0,r.tZ)(a.Z,{src:"/public/images/ghostwriter/orb.jpg",css:[{userSelect:"none",mixBlendMode:"screen",filter:"brightness(110%) saturate(1.2)",maskImage:"linear-gradient(".concat(l.TV.backgroundRoot,", transparent)")}],width:200,height:200,objectFit:"contain","aria-hidden":"true",alt:"",draggable:!1}):null]})}},37834:function(e,t,n){n.d(t,{M:function(){return a},v:function(){return o}});var r=n(29203),i=(0,n(91398).cn)(!1),o=function(){return(0,r.$X)(i)},a=function(){return(0,r.c1)(i)}},95652:function(e,t,n){n.d(t,{p:function(){return v}});var r=n(16988),i=n(11619),o=n(48330),a=n(72006),l=n(43119),c=n(71440),u=n(24635);function s(){var e=(0,l.Z)(["\n  query GhostwriterChatCurrentUserQuery {\n    currentUser {\n      username\n      id\n      image\n      isStaff: hasRole(role: REPLIT_STAFF)\n      isVerified\n    }\n  }\n"]);return s=function(){return e},e}var d={},f=(0,c.Ps)(s());var p=n(39691),h=n(50959),v=function(){var e=(0,r.v)(),t=(0,p.$e)(),n=(0,i.Z)(),l=n.preferences,c=n.update,s=function(e){var t=(0,a.Z)({},d,e);return u.a(f,t)}(),v=s.data,m=s.loading,g=s.error,y=(0,o.Z)();(0,h.useEffect)((function(){var n={useAdvancedModel:l.ghostwriterUseAdvancedModel,setUseAdvancedModel:function(e){c({ghostwriterUseAdvancedModel:e})}};t({chatModel:e,advancedModelUserPref:n,replId:y,currentUserData:v,currentUserLoading:m,currentUserError:g})}),[e,v,g,m,t,y,l.ghostwriterUseAdvancedModel,c])}},51624:function(e,t,n){n.d(t,{e:function(){return p},t:function(){return f}});var r=n(40207),i=n(18171),o=n(91398),a=n(50959),l=n(29203),c={performPaneOperation:function(){}},u=(0,o.cn)(c),s=(0,o.cn)((function(e){return e(u).performPaneOperation})),d=(0,o.cn)(null,(function(e,t,n){var r=n.path,i=n.line,o=n.col,a=e(s);a&&a({operation:"open",pane:{type:"codeEditor",data:{path:r,line:i,col:o}}})})),f=function(){return(0,l.$X)(d)};function p(e){var t=e.debugMode,n=void 0!==t&&t,o=e.performPaneOperation,s=(0,l.Uu)(),d=(0,i.Z)((function(){return{performPaneOperation:o}}),[o]);(0,a.useEffect)((function(){return s.set(r.nE,n),s.set(u,d),function(){s.set(r.nE,!1),s.set(u,c)}}),[n,d,s])}},39605:function(e,t,n){n.d(t,{V:function(){return E}});var r=n(57135),i=n(96583),o=n(45285),a=n(13716),l=n(64918),c=n(39691),u=n(9970),s=n(87978),d=n(68710),f=n(12583),p=n(4561),h=n(59253),v=n(5894);function m(e){var t=(0,s.r6)(e),n=v.hI.some((function(t){return e.endsWith(t)})),r=v.HH.some((function(t){return e.endsWith(t)})),i=v.Fv.some((function(t){return e.split("/").some((function(e){return e.includes(t)}))}));return!t||n||r||i}function g(e){var t=e.length;if(0===t)return!1;var n=0,r=Math.min(t,512);if(t>=3&&239===e[0]&&187===e[1]&&191===e[2])return!1;if(t>=4&&0===e[0]&&0===e[1]&&254===e[2]&&255===e[3])return!1;if(t>=4&&255===e[0]&&254===e[1]&&0===e[2]&&0===e[3])return!1;if(t>=4&&132===e[0]&&49===e[1]&&149===e[2]&&51===e[3])return!1;if(r>=5&&"%PDF-"===e.slice(0,5).toString())return!0;if(t>=2&&254===e[0]&&255===e[1])return!1;if(t>=2&&255===e[0]&&254===e[1])return!1;for(var i=0;i<r;i++){if(0===e[i])return!0;if((e[i]<7||e[i]>14)&&(e[i]<32||e[i]>127)){if(e[i]>193&&e[i]<224&&i+1<r){if(e[++i]>127&&e[i]<192)continue}else if(e[i]>223&&e[i]<240&&i+2<r&&e[++i]>127&&e[i]<192&&e[i+1]>127&&e[i+1]<192){i++;continue}if(n++,i>=32&&100*n/r>10)return!0}}return 100*n/r>10}var y=n(9608),Z=n(91926),b=n(29457),w=10;function x(e){return k.apply(this,arguments)}function k(){return(k=(0,r.Z)((function(e){var t,n,r,o,a,l,c,v,x,k,C,S,T,E,R,G,I,_,D,B,P,A,L,U;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return t=e.recentFiles,n=e.fs,r=e.dotReplit,o=e.maxCharacters,a=e.replLanguage,[4,r.getConfig()];case 1:return c=i.sent().config,v=(null===c||void 0===c?void 0:c.entrypoint)||Z.ZP.getMainFileName(a)||null,x=((null===c||void 0===c?void 0:c.hidden)||[]).map((function(e){return(0,d.Z)(e)})).filter(Boolean),(l=k=[]).push.apply(l,(0,u.Z)(t)),C=t.length,v&&k.length<w?(k.push(v),S=(0,s.Il)(v),T=""===S?f.Ql:S,[4,n.readDir(T)]):[3,3];case 2:"children"in(E=i.sent())&&(R=k).push.apply(R,(0,u.Z)(E.children.filter((function(e){return e.type===p.Tv.File})).map((function(e){return T===f.Ql?e.filename:"".concat(S,"/").concat(e.filename)})))),i.label=3;case 3:return G=k.length-C,b.kg.info("GhostwriterChat got file context",{numRecentFiles:C,numEntrypointFiles:G,maxFiles:w}),0===(I=(0,u.Z)(new Set(k)).filter((function(e){return!m(e)&&!(0,h.lv)(e,x)&&(0,s.Mb)(e)})).slice(0,w)).length?(b.kg.info("GhostwriterChat filtered out all files for file context",{numFiles:k.length}),[2,[]]):[4,Promise.all(I.map((function(e){return n.readFile(e)})))];case 4:for(var X in _=i.sent(),D=[],B=o,I)if(P=I[X],A=(0,y.S)(P),(L=_[X]).error)b.kg.info("GhostwriterChat failed to read file",{filePath:P});else if(g(L.content.toBuffer()))b.kg.info("GhostwriterChat filtered out binary file",{filePath:P});else if(U=L.content.toString().slice(0,B),D.push({filePath:P,language:A,code:U}),(B-=U.length)<=0)return b.kg.info("GhostwriterChat hit character limit for file context",{numFilesIncluded:I.length,filesExcluded:I.length-Number(X)}),[2,D];return b.kg.info("GhostwriterChat has remaining file context characters",{remainingChars:B}),[2,D]}}))}))).apply(this,arguments)}var C=n(50959),S=n(29203),T=n(27562),E=function(){var e=(0,o.Z)(),t=e.fs,n=e.dotReplit,u=(0,S.c1)(c.aK),s=(0,a.AA)(),d=(0,T.Z)();return(0,C.useCallback)((0,r.Z)((function(){var e,r;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:if(!t||!n)throw new Error("Expected fs and dotReplit services");return e=(0,l.yL)(u).fileContextCharacters,[4,x({recentFiles:r=s(),fs:t,dotReplit:n,maxCharacters:e,replLanguage:d})];case 1:return[2,{fileContext:i.sent(),mostRecentFile:r[0]||null}]}}))})),[t,n,u,s,d])}},56392:function(e,t,n){n.d(t,{b:function(){return g}});var r=n(29203),i=n(18171),o=n(39605),a=n(2272),l=n(74985),c=n(13716),u=n(625),s=n(77306),d=n(27549),f=n(50959),p=n(53472),h=n(92508),v=n(5293),m=function(e){var t=e.code,n=e.messageId,r=e.language,i=(0,c.R3)(),o=(0,c.ex)(),m=(0,p.Vu)(),g=(0,p.nC)(),y=(0,d.dr)(),Z=(0,v.U4)(),b=(0,v.$0)(),w=(0,v.n3)(),x=(0,v.PM)(),k=null!==i&&void 0!==i?i:o,C=w&&Z&&Z===n;(0,f.useEffect)((function(){w&&(m.includes(w)||x(null))}),[w,m,x]);var S=(0,f.useCallback)((function(e){var t,n=g().find((function(e){var t=(0,a.Z)(e,2),n=(t[0],t[1]);return(0,h.Ur)(n)&&n.data.path===k}));if(n){var i=y(n[0]);if("codeEditor"!==(null===i||void 0===i?void 0:i.type))throw new Error("Expected code editor pane to insert into");(0,u.j)(u.U3.GHOSTWRITER_CHAT_CODE_INSERTED,{language:r}),null===(t=i.insertGhostwriterChatCode)||void 0===t||t.call(i,e),x(k)}}),[g,y,r,x,k]),T=(0,f.useCallback)((function(){var e,t=g().find((function(e){var t=(0,a.Z)(e,2),n=(t[0],t[1]);return(0,h.Ur)(n)&&n.data.path===w}));if(t){(0,u.j)(u.U3.GHOSTWRITER_CHAT_CODE_INSERT_REVERTED);var n=y(t[0]);if("codeEditor"!==(null===n||void 0===n?void 0:n.type))throw new Error("Expected code editor pane to revert");null===(e=n.revertGhostwriterChatCode)||void 0===e||e.call(n),x(null)}}),[g,y,x,w]);return C?(0,l.tZ)(s.pe,{revertCodeInsert:function(){T(),b(null)}}):(0,l.tZ)(s.eo,{code:t,disabled:!k,insertCode:function(){S(t),n&&b(n)}})};function g(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=(0,o.V)(),n=(0,r.Uu)(),a=(0,i.Z)((function(){var n;return{getGhostwriterWorkspaceFileContext:t,insertCodeButtonComponent:m,openGhostwriterPane:null!==(n=null===e||void 0===e?void 0:e.openGhostwriterPane)&&void 0!==n?n:function(){}}}),[t,null===e||void 0===e?void 0:e.openGhostwriterPane]);(0,f.useEffect)((function(){return n.set(v.Vx,a),function(){n.set(v.Vx,v.f9)}}),[a,n])}},70714:function(e,t,n){n.d(t,{V:function(){return o}});var r=n(82568),i=n(39541),o=(0,r.X)({messageWrapper:[i.l0.px(8),i.l0.py(12),i.l0.colWithGap(8)],advancedModelOverrideForHexagonGwAvatar:[{"& > div > div":{borderRadius:0,backgroundColor:"transparent"},"& > div > div:before":{display:"none"},'& img:not([aria-hidden="true"])':{objectFit:"fill !important"}}],ghostwriterPurpleBackground:[{background:"linear-gradient(90.7deg, rgba(82, 57, 204, 0.1) 0.6%, rgba(166, 148, 255, 0.1) 137.79%)"}]})},15823:function(e,t,n){n.d(t,{CN:function(){return o},CT:function(){return i},bO:function(){return a}});var r=n(250),i="git",o={gitCommit:{id:"git.commit",name:"Git: Commit",scope:i,default:(0,r.l2)({cmdOrCtrl:!0,key:"Enter"})}},a=Object.values(o)},21303:function(e,t,n){n.d(t,{Ai:function(){return g},BI:function(){return s},Jp:function(){return d},_H:function(){return f},_Z:function(){return m},bA:function(){return v},ox:function(){return y}});var r=n(72006),i=n(4405),o=n(50968),a=n(91398),l=n(92683),c=n(50959),u=n(18171),s=(0,o.u)((function(){return null})),d=(0,o.u)((function(){return null}));function f(e){var t=d.current();(0,c.useEffect)((function(){e!==t&&d.set((function(){return e}))}),[e,t])}var p=(0,a.cn)(null);var h=(0,a.cn)(null,(function(e,t,n){var o=e(p),a=o?(0,r.Z)({},o,n):(0,r.Z)({},n),l=null===a||void 0===a?void 0:a.changes,c=null===a||void 0===a?void 0:a.filePath;if(!c||!l)throw new Error('"filePath", "changes", "users" required when initializing history state');var u=function(e){var t=e.changes.length;return(0,r.Z)({users:{},count:t,version:Math.max(0,t-1),playing:!1,comparing:!1},e)}((0,i.Z)((0,r.Z)({},a),{changes:l,filePath:c}));s.set((function(){return u}));var d=u.changes.length;0!==d?((null===o||void 0===o?void 0:o.changes)&&u.changes!==o.changes&&(u.count=d,u.version=Math.min(u.version,d-1),u.playing=!1,u.comparing=!1),u.version===d-1&&(u.playing=!1),t(p,u)):t(p,u)}));function v(){return(0,l.Dv)(p,{store:Z()})}function m(){return(0,l.b9)(h,{store:Z()})}function g(){return(0,l.b9)((0,u.Z)((function(){return(0,a.cn)(null,(function(e,t){t(p,null)}))}),[]),{store:Z()})}var y=(0,c.createContext)(null);function Z(){var e=(0,c.useContext)(y);if(!e)throw new Error("Expected store in context");return e}},46889:function(e,t,n){n.d(t,{j:function(){return u},p:function(){return s}});var r=n(72006),i=n(625),o=n(13424),a=n(50959),l=n(9353),c=n(21303);function u(){var e=(0,o.uV)();return(0,a.useCallback)((function(t,n,i){e({origin:"History2: useHistoryBSOD",error:t,tags:{source:"ws-history2",type:n},extras:(0,r.Z)({state:c.BI.current()},i)})}),[e])}function s(e){(0,i.j)(l.U3.HISTORY_USED,{action:e,which:"ws"})}},79249:function(e,t,n){n.d(t,{h:function(){return T},w:function(){return C}});var r=n(72006),i=n(4405),o=n(74985),a=n(42256),l=n(39137),c=n(50959),u=n(92153),s=n(91398),d=n(92683);function f(){return(0,c.useState)((function(){return(0,s.MT)()}))[0]}var p=(0,c.createContext)(null);function h(){var e=(0,c.useContext)(p);if(!e)throw new Error("Expected store in context");return e}var v=function(e){return(0,d.b9)(e,{store:h()})};var m=n(18171),g=(0,s.cn)(-1),y=(0,s.cn)([]),Z=(0,s.cn)(void 0),b=(0,s.cn)(null,(function(e,t,n){var r=e(Z);switch(r&&(clearTimeout(r.id),r.cb()),n){case"forward":t(g,(function(t){return Math.min(e(y).length,t+1)}));break;case"backward":t(g,(function(e){return Math.max(0,e-1)}))}var i=e(y),o=e(g);return o>=i.length?"":i[o]})),w=(0,s.cn)(null,(function(e,t,n){var r;clearTimeout(null===(r=e(Z))||void 0===r?void 0:r.id);var i=function(){if(n.length>0){var r=!1;t(y,(function(t){return(0,u.ZP)(t,(function(t){if(n!==t[e(g)])for(r=!0,t.push(n);t.length>20;)t.shift()}))})),r&&t(g,e(y).length-1)}t(Z,void 0)};t(Z,{id:setTimeout(i,2e3),cb:i})}));function x(e){var t=v(w),n=function(){var e=v(b);return{forward:(0,m.Z)((function(){return function(){return e("forward")}}),[e]),backward:(0,m.Z)((function(){return function(){return e("backward")}}),[e])}}(),o=n.forward,l=n.backward,u=(0,c.useRef)(e.value);return(0,c.useEffect)((function(){e.value!==(null===u||void 0===u?void 0:u.current)&&(e.value&&t(e.value),u.current=e.value)}),[t,e.value]),(0,i.Z)((0,r.Z)({},e),{onKeyDown:(0,m.Z)((function(){return function(t){var n;if(t.shiftKey||(0,a.j)(t)){var r;null===(r=e.onKeyDown)||void 0===r||r.call(e,t)}else{var i=t.currentTarget,c=Boolean(i.value.match(/\n/));if("ArrowUp"===t.key){if(c&&i.selectionStart&&i.selectionStart>0)return;return e.onChange(l()),t.preventDefault(),void t.stopPropagation()}if("ArrowDown"===t.key){if(c&&i.selectionEnd&&i.selectionEnd<i.value.length)return;return e.onChange(o()),t.preventDefault(),void t.stopPropagation()}null===(n=e.onKeyDown)||void 0===n||n.call(e,t)}}}),[l,o,e]),onChange:(0,m.Z)((function(){return function(t){e.onChange(t.target.value)}}),[e])})}var k=c.forwardRef((function(e,t){var n=x(e);return(0,o.tZ)(l.B,(0,r.Z)({ref:t},n))})),C=c.forwardRef((function(e,t){var n=f();return(0,o.tZ)(p.Provider,{value:n,children:(0,o.tZ)(k,(0,r.Z)({ref:t},e))})})),S=c.forwardRef((function(e,t){var n=x(e);return(0,o.tZ)(l.II,(0,r.Z)({ref:t},e,n))})),T=c.forwardRef((function(e,t){var n=f();return(0,o.tZ)(p.Provider,{value:n,children:(0,o.tZ)(S,(0,r.Z)({ref:t},e))})}))},59200:function(e,t,n){n.d(t,{m:function(){return h}});var r=n(74985),i=(n(50959),n(43312)),o=n(85368),a=n(39541),l=n(66539),c=n(85682),u=n(47250),s=n(9396),d=n(84721),f=(0,i.F4)("0%,100%{opacity:1;}50%{opacity:0.25;}"),p={root:(0,i.iv)([a.l0.height(20),a.l0.width(20),a.l0.center]),pulse:(0,i.iv)({animation:"".concat(f," 2s infinite")})};function h(){var e=(0,c.Z)(),t=e.isSaving;return e.isOffline?(0,r.tZ)(l.u,{tooltip:"Reconnecting, changes will be synced when you\u2019re online",placement:"right",children:(0,r.tZ)(o.G,{css:p.root,children:(0,r.tZ)(u.Z,{size:16,color:a.TV.redDefault})})}):t?(0,r.tZ)(l.u,{tooltip:"Saving",placement:"right",children:(0,r.tZ)(o.G,{css:[p.root,p.pulse],children:(0,r.tZ)(s.Z,{size:16,color:a.TV.foregroundDimmest})})}):(0,r.tZ)(l.u,{tooltip:"Saved",placement:"right",children:(0,r.tZ)(o.G,{css:p.root,children:(0,r.tZ)(d.Z,{size:16,color:a.TV.foregroundDimmest})})})}},71321:function(e,t,n){n.d(t,{B:function(){return c}});var r=n(74985),i=n(43312),o=n(39541),a=n(85368),l=(0,i.iv)([o.l0.borderRadius("full"),o.l0.position.absolute,o.l0.top(-3),o.l0.right(-3)]);function c(e){var t=e.color,n=void 0===t?o.TV.redStronger:t,i=e.small?6:8;return(0,r.tZ)(a.G,{style:{backgroundColor:n,width:i,height:i,zIndex:2,boxShadow:"0 0 0 2px ".concat(o.TV.backgroundDefault)},css:l})}},53870:function(e,t,n){n.d(t,{I:function(){return u}});var r=n(72006),i=n(4405),o=n(60471),a=n(68825),l=n(50959),c={nodejs:["package.json","package-lock.json","yarn.lock","node_modules/"],python:["poetry.lock","pyproject.toml","requirements.txt",".venv/",".local"],ruby:["Gemfile","Gemfile.lock"],java:["pom.xml","target"]};function u(){var e=(0,a.Z)(),t=(0,o.T)();return(0,l.useMemo)((function(){var n,o=(null===t||void 0===t?void 0:t.packagers)||[],a=(null===o||void 0===o?void 0:o.map((function(e){var t;return(0,i.Z)((0,r.Z)({},e),{title:e.language,packagerFiles:(null===(t=e.packagerFiles)||void 0===t?void 0:t.length)?e.packagerFiles:null!==(n=c[e.language])&&void 0!==n?n:[]})})))||[];return"html"!==(null===e||void 0===e?void 0:e.language)&&"html_beta"!==(null===e||void 0===e?void 0:e.language)||a.push({id:"html",title:"html",name:"HTML Packager",language:"html",packageSearch:!0,guessImports:!1,packagerFiles:[]}),a}),[t,e])}},24144:function(e,t,n){var r=n(57135),i=n(96583),o="index.html",a=/^\s*<script src="https:\/\/cdnjs\.cloudflare\.com\/ajax\/libs\/([^/]+)\/([^/]+)\/.+.js"><\/script>$/,l={name:"html",getInstalledPackages:function(e){var t=e.fs;return(0,r.Z)((function(){return(0,i.__generator)(this,(function(e){switch(e.label){case 0:return[4,t.stat(o)];case 1:return e.sent().exists?[2,new Promise(function(){var e=(0,r.Z)((function(e){var n;return(0,i.__generator)(this,(function(r){return n=t.watchTextFile(o,{onReady:function(t){var r=t.initialContent,i=[],o=!0,l=!1,c=void 0;try{for(var u,s=r.split("\n")[Symbol.iterator]();!(o=(u=s.next()).done);o=!0){var d=u.value.match(a);d&&i.push({name:d[1],version:d[2]})}}catch(f){l=!0,c=f}finally{try{o||null==s.return||s.return()}finally{if(l)throw c}}n(),e(i)},onError:function(){n(),e([])}}),[2]}))}));return function(t){return e.apply(this,arguments)}}())]:[2,[]]}}))}))()},getPackageInfo:function(e){var t=e.name;return(0,r.Z)((function(){var e,n;return(0,i.__generator)(this,(function(r){switch(r.label){case 0:return[4,fetch("/data/cdnjs/info/".concat(encodeURIComponent(t)),{credentials:"same-origin",headers:{"Content-Type":"application/json",Accept:"application/json"}})];case 1:if(!(e=r.sent()).ok)return[2,void 0];r.label=2;case 2:return r.trys.push([2,4,,5]),[4,e.json()];case 3:return(n=r.sent())?[2,{name:n.name,version:n.version,description:n.description,homepageURL:n.link,sourceCodeURL:n.include}]:[3,5];case 4:return r.sent(),[2,void 0];case 5:return[2]}}))}))()},search:function(e){var t=e.query;return(0,r.Z)((function(){var e,n;return(0,i.__generator)(this,(function(r){switch(r.label){case 0:return[4,fetch("/data/cdnjs/search/".concat(encodeURIComponent(t)),{credentials:"same-origin",headers:{"Content-Type":"application/json",Accept:"application/json"}})];case 1:return(e=r.sent()).ok?[4,e.json()]:[2,[]];case 2:return n=r.sent(),[2,n.map((function(e){return{name:e.name,version:e.version,description:e.description,homepageURL:e.link,sourceCodeURL:e.include}}))]}}))}))()},install:function(e){var t=e.pkgs,n=e.fs;return(0,r.Z)((function(){var e,a,l,c,u,s,d;return(0,i.__generator)(this,(function(f){switch(f.label){case 0:return[4,n.stat(o)];case 1:if(!f.sent().exists)return[2];e=!0,a=!1,l=void 0,f.label=2;case 2:f.trys.push([2,7,8,9]),c=function(){var e;return(0,i.__generator)(this,(function(t){switch(t.label){case 0:return e=s.value,[4,new Promise(function(){var t=(0,r.Z)((function(t){var a;return(0,i.__generator)(this,(function(l){return a=n.watchTextFile(o,{onReady:function(o){var l=o.initialContent,c=o.writeChange;return(0,r.Z)((function(){var r,o;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:r='<script src="'.concat(e.sourceCodeURL,'"><\/script>\n'),-1===(o=l.indexOf("<script"))&&(o=l.indexOf("</body>")),-1===o&&(o=l.length),c({from:o,insert:r}),i.label=1;case 1:return i.trys.push([1,3,4,5]),[4,n.flush()];case 2:return i.sent(),[3,5];case 3:return i.sent(),[3,5];case 4:return a(),t(),[7];case 5:return[2]}}))}))()},onError:function(){a(),t()}}),[2]}))}));return function(e){return t.apply(this,arguments)}}())];case 1:return t.sent(),[2]}}))},u=t[Symbol.iterator](),f.label=3;case 3:return(e=(s=u.next()).done)?[3,6]:[5,(0,i.__values)(c())];case 4:f.sent(),f.label=5;case 5:return e=!0,[3,3];case 6:return[3,9];case 7:return d=f.sent(),a=!0,l=d,[3,9];case 8:try{e||null==u.return||u.return()}finally{if(a)throw l}return[7];case 9:return[2]}}))}))()},uninstall:function(e){var t=e.pkgs,n=e.fs;return(0,r.Z)((function(){var e,l,c,u,s,d,f;return(0,i.__generator)(this,(function(p){switch(p.label){case 0:return[4,n.stat(o)];case 1:if(!p.sent().exists)return[2];e=!0,l=!1,c=void 0,p.label=2;case 2:p.trys.push([2,7,8,9]),u=function(){var e;return(0,i.__generator)(this,(function(t){switch(t.label){case 0:return e=d.value,[4,new Promise(function(){var t=(0,r.Z)((function(t){var l;return(0,i.__generator)(this,(function(c){return l=n.watchTextFile(o,{onReady:function(o){var c=o.initialContent,u=o.writeChange;return(0,r.Z)((function(){var r,o,s,d,p,h,v,m,g;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:r=0,o=!0,s=!1,d=void 0;try{for(p=c.split("\n")[Symbol.iterator]();!(o=(h=p.next()).done);o=!0)v=h.value,(m=v.match(a))&&(g=m[1],e.name===g&&u({from:r,to:r+v.length+1})),r+=v.length+1}catch(f){s=!0,d=f}finally{try{o||null==p.return||p.return()}finally{if(s)throw d}}i.label=1;case 1:return i.trys.push([1,3,4,5]),[4,n.flush()];case 2:return i.sent(),[3,5];case 3:return i.sent(),[3,5];case 4:return l(),t(),[7];case 5:return[2]}}))}))()},onError:function(){l(),t()}}),[2]}))}));return function(e){return t.apply(this,arguments)}}())];case 1:return t.sent(),[2]}}))},s=t[Symbol.iterator](),p.label=3;case 3:return(e=(d=s.next()).done)?[3,6]:[5,(0,i.__values)(u())];case 4:p.sent(),p.label=5;case 5:return e=!0,[3,3];case 6:return[3,9];case 7:return f=p.sent(),l=!0,c=f,[3,9];case 8:try{e||null==s.return||s.return()}finally{if(l)throw c}return[7];case 9:return[2]}}))}))()}};t.Z=l},12247:function(e,t,n){var r=n(57135),i=n(96583),o={name:"upm",getInstalledPackages:function(e){var t=e.id,n=e.packager;return(0,r.Z)((function(){var e;return(0,i.__generator)(this,(function(r){switch(r.label){case 0:return[4,n.listSpecfile(t)];case 1:return(e=r.sent()).error||null===e.packages?[2,[]]:[2,e.packages]}}))}))()},getPackageInfo:function(e){var t=e.id,n=e.name,o=e.packager;return(0,r.Z)((function(){return(0,i.__generator)(this,(function(e){return[2,o.fetchPackageInfo(n,t)]}))}))()},search:function(e){var t=e.id,n=e.query,o=e.packager;return(0,r.Z)((function(){return(0,i.__generator)(this,(function(e){return[2,o.searchPackages(n,t)]}))}))()},install:function(e){var t=e.id,n=e.pkgs,o=e.packager;return(0,r.Z)((function(){return(0,i.__generator)(this,(function(e){switch(e.label){case 0:return[4,o.addPackages(n,t)];case 1:if(!e.sent())throw new Error("Package install failed");return[2]}}))}))()},uninstall:function(e){var t=e.id,n=e.pkgs,o=e.packager;return(0,r.Z)((function(){var e;return(0,i.__generator)(this,(function(r){switch(r.label){case 0:return e=n.filter((function(e){return e.name})).map((function(e){return e.name})),[4,o.removePackages(e,t)];case 1:if(!r.sent())throw new Error("Package uninstall failed");return[2]}}))}))()}};t.Z=o},17676:function(e,t,n){n.d(t,{Z:function(){return y}});var r=n(57135),i=n(96583),o=n(74985),a=n(88541),l=n(13233),c=n(625),u=n(45285),s=n(86763),d=n.n(s),f=n(50959),p=n(53870),h=n(24144),v=n(12247),m=n(23319);function g(){var e=(0,u.Z)(),t=(0,m.Hg)(m.NC),n=(0,m.Hg)(m.w$),o=(0,m.XD)(m.w$),a=(0,m.$X)(m.w$),s=(0,m.Hg)(m.vO),g=(0,m.Mi)(),y=(0,m.Zq)(),Z=(0,m.OO)(),b=(0,m.np)(),w=(0,l.Z)(),x=(0,p.I)(),k=(0,m.T9)();return(0,f.useEffect)((function(){if(0!==x.length){var t=[],n=!1,r=!0,i=!1,a=void 0;try{for(var l,c=function(){var r=l.value,i=Promise.resolve(),a=y(r.id),c=d()((function(){var t=y(r.id),a=o();if(t===m.C0.Idle||(null===a||void 0===a?void 0:a.id)!==r.id){var l="html"===r.id?h.Z:v.Z;i=i.then((function(){if(!n)return l.getInstalledPackages({id:r.id,packager:e.packager,fs:e.fs}).then((function(e){n||(Z(r.id,e),g(r.id,m.C0.Idle))}))}))}}),500);if(r.packagerFiles.length>0){var u=!0,s=!1,f=void 0;try{for(var p,b=function(){var n=p.value;if(n.endsWith("/"))return"continue";var r=null!==a&&a!==m.C0.Initializing&&a!==m.C0.Uninitialized,i=e.fs.watchFilePath(n,{onChange:function(){r?c():r=!0}});t.push(i)},w=r.packagerFiles[Symbol.iterator]();!(u=(p=w.next()).done);u=!0)b()}catch(x){s=!0,f=x}finally{try{u||null==w.return||w.return()}finally{if(s)throw f}}}},u=x[Symbol.iterator]();!(r=(l=u.next()).done);r=!0)c()}catch(s){i=!0,a=s}finally{try{r||null==u.return||u.return()}finally{if(i)throw a}}return function(){n=!0;var e=!0,r=!1,i=void 0;try{for(var o,a=t[Symbol.iterator]();!(e=(o=a.next()).done);e=!0){(0,o.value)()}}catch(s){r=!0,i=s}finally{try{e||null==a.return||a.return()}finally{if(r)throw i}}}}}),[x,e.fs]),(0,f.useEffect)((function(){var t=!1,n=function(){var n=(0,r.Z)((function(){var n,r,o,a,l,c;return(0,i.__generator)(this,(function(i){n=!0,r=!1,o=void 0;try{for(a=function(){var n=c.value,r=y(n.id);if(r&&r!==m.C0.Uninitialized)return"continue";g(n.id,m.C0.Initializing),("html"===n.id?h.Z:v.Z).getInstalledPackages({id:n.id,packager:e.packager,fs:e.fs}).then((function(e){t||(Z(n.id,e),g(n.id,m.C0.Idle))}))},l=x[Symbol.iterator]();!(n=(c=l.next()).done);n=!0)a()}catch(u){r=!0,o=u}finally{try{n||null==l.return||l.return()}finally{if(r)throw o}}return[2]}))}));return function(){return n.apply(this,arguments)}}();return n(),function(){t=!0}}),[x]),(0,f.useEffect)((function(){if(null===n&&0!==t.length){var e=t[0];y(e.id)===m.C0.Idle&&b(e)}}),[s,n,t]),(0,f.useEffect)((function(){if(null!==n){var t=!1,o=function(){var o=(0,r.Z)((function(){var r,o,l,u,s,d,f,p,y,b,x,C,S,T,E,R,G,I;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:switch(r="html"===n.id?h.Z:v.Z,n.kind){case m.TH.Install:return[3,1];case m.TH.Uninstall:return[3,6]}return[3,11];case 1:g(n.id,m.C0.Installing),o=!0,l=!1,u=void 0;try{for(s=n.pkgs[Symbol.iterator]();!(o=(d=s.next()).done);o=!0)f=d.value,(0,c.j)(c.U3.PACKAGE_MANAGER_USED,{action:"installed",packageId:f.name})}catch(_){l=!0,u=_}finally{try{o||null==s.return||s.return()}finally{if(l)throw u}}i.label=2;case 2:return i.trys.push([2,4,,5]),[4,r.install({id:n.id,pkgs:n.pkgs,packager:e.packager,fs:e.fs})];case 3:return i.sent(),1===n.pkgs.length?w.showNotice("Installed ".concat(null!==(p=n.pkgs[0].name)&&void 0!==p?p:"package")):w.showNotice("Installed ".concat(n.pkgs.length," packages")),[3,5];case 4:return i.sent(),1===n.pkgs.length?w.showError("Failed to install ".concat(null!==(y=n.pkgs[0].name)&&void 0!==y?y:"package")):w.showError("Failed to install ".concat(n.pkgs.length," packages")),k(n.id,n.pkgs),[3,5];case 5:return[3,11];case 6:g(n.id,m.C0.Uninstalling),b=!0,x=!1,C=void 0;try{for(S=n.pkgs[Symbol.iterator]();!(b=(T=S.next()).done);b=!0)E=T.value,(0,c.j)(c.U3.PACKAGE_MANAGER_USED,{action:"removed",packageId:E.name})}catch(_){x=!0,C=_}finally{try{b||null==S.return||S.return()}finally{if(x)throw C}}i.label=7;case 7:return i.trys.push([7,9,,10]),[4,r.uninstall({id:n.id,pkgs:n.pkgs,packager:e.packager,fs:e.fs})];case 8:return i.sent(),1===n.pkgs.length?w.showNotice("Removed ".concat(null!==(R=n.pkgs[0].name)&&void 0!==R?R:"package")):w.showNotice("Removed ".concat(n.pkgs.length," packages")),[3,10];case 9:return i.sent(),1===n.pkgs.length?w.showError("Failed to remove ".concat(null!==(G=n.pkgs[0].name)&&void 0!==G?G:"package")):w.showError("Failed to remove ".concat(n.pkgs.length," packages")),k(n.id,n.pkgs),[3,10];case 10:return[3,11];case 11:return t?[2]:[4,r.getInstalledPackages({id:n.id,packager:e.packager,fs:e.fs})];case 12:return I=i.sent(),t?[2]:(Z(n.id,I),g(n.id,m.C0.Idle),a(null),[2])}}))}));return function(){return o.apply(this,arguments)}}();return o(),function(){t=!0}}}),[n]),null}function y(e){var t=e.children,n=(0,m.ns)();return(0,a.P5)({controlName:"flag-packages2",default:!1,logFlagToAnalytics:!1})?(0,o.BX)(m.vN.Provider,{value:n,children:[(0,o.tZ)(g,{}),t]}):(0,o.tZ)(o.HY,{children:t})}},23319:function(e,t,n){n.d(t,{$X:function(){return g},$z:function(){return S},B2:function(){return G},C0:function(){return r},Hg:function(){return Z},Mi:function(){return E},NC:function(){return I},OO:function(){return P},T9:function(){return x},TH:function(){return i},Wx:function(){return X},XD:function(){return y},Zq:function(){return T},cW:function(){return _},jh:function(){return L},np:function(){return N},ns:function(){return h},pN:function(){return w},te:function(){return B},vN:function(){return v},vO:function(){return C},w$:function(){return R},wY:function(){return k},zi:function(){return F}});var r,i,o=n(57389),a=n(72006),l=n(4405),c=n(55749),u=n(92153),s=n(91398),d=n(92683),f=n(82325),p=n(50959);(0,s.cn)({replId:"",packageManagers:{}});function h(){return(0,p.useState)((function(){return(0,s.MT)()}))[0]}!function(e){e.Uninitialized="Uninitialized",e.Initializing="Initializing",e.Installing="Installing",e.Uninstalling="Uninstalling",e.Idle="Idle"}(r||(r={})),function(e){e.Install="Install",e.Uninstall="Uninstall"}(i||(i={}));var v=(0,p.createContext)(null);function m(){var e=(0,p.useContext)(v);if(!e)throw new Error("Expected store in context");return e}var g=function(e){return(0,d.b9)(e,{store:m()})};function y(e){return(0,f.lV)((0,p.useCallback)((function(t){return t(e)}),[e]),{store:m()})}function Z(e){return(0,d.Dv)(e,{store:m()})}(0,s.cn)(null);(0,s.cn)(null);var b=(0,s.cn)({});function w(e){var t,n=Z(b);return e&&null!==(t=n[e])&&void 0!==t?t:[]}function x(){var e=g(b);return function(t,n){e((function(e){return(0,u.ZP)(e,(function(e){var r=e[t];if(r&&0!==r.length){var i=!0,o=!1,a=void 0;try{for(var l,c=function(){var e=l.value;r.find((function(t){return t.name===e.name}))||r.push(e)},u=n[Symbol.iterator]();!(i=(l=u.next()).done);i=!0)c()}catch(s){o=!0,a=s}finally{try{i||null==u.return||u.return()}finally{if(o)throw a}}}else e[t]=n}))}))}}function k(){var e=g(b);return function(t,n){e((function(e){return(0,u.ZP)(e,(function(e){var r=e[t];if(r&&0!==r.length){var i=!0,o=!1,a=void 0;try{for(var l,c=function(){var e=l.value,t=r.findIndex((function(t){return t.name===e.name}));-1!==t&&r.splice(t,1)},u=n[Symbol.iterator]();!(i=(l=u.next()).done);i=!0)c()}catch(s){o=!0,a=s}finally{try{i||null==u.return||u.return()}finally{if(o)throw a}}}}))}))}}var C=(0,s.cn)({});function S(e){var t,n=Z(C);return e&&null!==(t=n[e])&&void 0!==t?t:null}function T(){var e=y(C);return function(t){var n;return null!==(n=e()[t])&&void 0!==n?n:null}}function E(){var e=g(C);return function(t,n){e((function(e){return(0,l.Z)((0,a.Z)({},e),(0,o.Z)({},t,n))}))}}var R=(0,s.cn)(null);function G(){return Z(R)}var I=(0,s.cn)([]);function _(){return Z(I)}var D=(0,s.cn)({});function B(e){var t,n=Z(D);return e&&null!==(t=n[e])&&void 0!==t?t:[]}function P(){var e=g(D);return function(t,n){e((function(e){return(0,l.Z)((0,a.Z)({},e),(0,o.Z)({},t,n))}))}}var A=(0,s.cn)(null,(function(e,t,n){var r=n.id,o=n.pkg;if(!o.name)throw new Error("Package does not have a name.");t(I,(function(e){return(0,u.ZP)(e,(function(e){if(!e.find((function(e){return e.pkgs.find((function(t){return e.id===r&&t.name===o.name}))}))){var t=e.find((function(e){return e.kind===i.Install}));t?t.pkgs.push(o):e.push({kind:i.Install,id:r,pkgs:[o]})}}))}))}));function L(){return g(A)}var U=(0,s.cn)(null,(function(e,t,n){var r=n.id,o=n.pkg;if(!o.name)throw new Error("Package does not have a name.");t(I,(function(e){return(0,u.ZP)(e,(function(e){if(!e.find((function(e){return e.pkgs.find((function(t){return e.id===r&&t.name===o.name}))}))){var t=e.find((function(e){return e.kind===i.Uninstall}));t?t.pkgs.push(o):e.push({kind:i.Uninstall,id:r,pkgs:[o]})}}))}))}));function X(){return g(U)}(0,s.cn)(null);var M=(0,s.cn)(null,(function(e,t,n){var r=(0,c.Z)(e(I)),i=r[0],o=r.slice(1);n===i&&(t(I,o),t(R,n))}));function N(){return g(M)}var O=(0,s.cn)(null,(function(e,t,n){t(I,(function(e){return(0,u.ZP)(e,(function(e){var t=!0,r=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value,c=l.pkgs.findIndex((function(e){return e.name===n}));-1!==c&&l.pkgs.splice(c,1)}}catch(u){r=!0,i=u}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}}))}))}));function F(){return g(O)}},80848:function(e,t,n){n.d(t,{Z:function(){return c}});var r=n(9970),i=n(74985),o=n(68711),a=n.n(o),l=n(13716);function c(e){var t=e.replTitle,n=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,r.Z)(t.filter(Boolean)).concat(["Replit"]).join(" - ")}((0,l.ex)(),t);return(0,i.tZ)(a(),{children:(0,i.tZ)("title",{children:n},"title")})}},91821:function(e,t,n){n.d(t,{Z:function(){return u}});var r=n(74985),i=n(48306),o=n.n(i),a=(n(50959),n(24025)),l=n(69861),c=n(39541);function u(e){var t=e.preventHighlightBorder,n=(0,l.Z)();return(0,r.BX)("div",{className:o().dynamic([["b8bdeb39d1178985",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])+" loader",children:[(0,r.tZ)("div",{className:o().dynamic([["b8bdeb39d1178985",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])+" wrap",children:(0,r.BX)(a.Z,{backgroundColor:c.TV.backgroundHighest,foregroundColor:c.TV.backgroundHigher,uniqueKey:"editorLoader",children:[(0,r.tZ)("rect",{x:"0",y:"0",rx:"3",ry:"3",width:"70",height:"10",className:o().dynamic([["b8bdeb39d1178985",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"80",y:"0",rx:"3",ry:"3",width:"100",height:"10",className:o().dynamic([["b8bdeb39d1178985",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"190",y:"0",rx:"3",ry:"3",width:"10",height:"10",className:o().dynamic([["b8bdeb39d1178985",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"15",y:"20",rx:"3",ry:"3",width:"130",height:"10",className:o().dynamic([["b8bdeb39d1178985",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"155",y:"20",rx:"3",ry:"3",width:"130",height:"10",className:o().dynamic([["b8bdeb39d1178985",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"15",y:"40",rx:"3",ry:"3",width:"90",height:"10",className:o().dynamic([["b8bdeb39d1178985",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"115",y:"40",rx:"3",ry:"3",width:"60",height:"10",className:o().dynamic([["b8bdeb39d1178985",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"185",y:"40",rx:"3",ry:"3",width:"60",height:"10",className:o().dynamic([["b8bdeb39d1178985",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"0",y:"60",rx:"3",ry:"3",width:"30",height:"10",className:o().dynamic([["b8bdeb39d1178985",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"15",y:"80",rx:"3",ry:"3",width:"70",height:"10",className:o().dynamic([["b8bdeb39d1178985",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"95",y:"80",rx:"3",ry:"3",width:"60",height:"10",className:o().dynamic([["b8bdeb39d1178985",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"165",y:"80",rx:"3",ry:"3",width:"30",height:"10",className:o().dynamic([["b8bdeb39d1178985",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"15",y:"100",rx:"3",ry:"3",width:"110",height:"10",className:o().dynamic([["b8bdeb39d1178985",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"135",y:"100",rx:"3",ry:"3",width:"100",height:"10",className:o().dynamic([["b8bdeb39d1178985",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"0",y:"120",rx:"3",ry:"3",width:"70",height:"10",className:o().dynamic([["b8bdeb39d1178985",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])})]})}),(0,r.tZ)(o(),{id:"b8bdeb39d1178985",dynamic:[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"],children:".loader.__jsx-style-dynamic-selector{z-index:3;height:100%;width:100%;background-color:var(--background-default);overflow:hidden;padding:var(--space-16);-webkit-border-bottom-right-radius:var(--border-radius-4);-moz-border-radius-bottomright:var(--border-radius-4);border-bottom-right-radius:var(--border-radius-4);-webkit-border-bottom-left-radius:var(--border-radius-4);-moz-border-radius-bottomleft:var(--border-radius-4);border-bottom-left-radius:var(--border-radius-4);-webkit-box-shadow:".concat(n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)",";-moz-box-shadow:").concat(n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)",";box-shadow:").concat(n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)","}.wrap.__jsx-style-dynamic-selector{overflow:hidden}.wrap.__jsx-style-dynamic-selector>svg{max-width:640px;min-width:500px;height:auto}@media screen and (min-width:900px){.loader.__jsx-style-dynamic-selector{padding:30px}}")})]})}},19358:function(e,t,n){n.d(t,{M:function(){return T}});var r=n(74985),i=n(2272),o=n(45510),a=n(87076),l=n(85368),c=n(80336),u=n(47880),s=n(39541),d=n(50959),f=n(45157);function p(e){var t=e.onDismiss,n=e.context,p=(0,i.Z)(d.useState(!1),2),h=p[0],v=p[1];return(0,r.BX)(r.HY,{children:[(0,r.BX)(l.G,{css:[s.l0.rowWithGap(4),s.l0.align.center,s.l0.justify.start],dataCy:"ghostwriter-opt-in-banner",children:[(0,r.tZ)(o.zx,{iconLeft:(0,r.tZ)(u.Z,{}),text:"Try Ghostwriter",colorway:"blurple",css:[s.l0.flex.grow(1),s.l0.flex.shrink(0),{">div":[s.l0.align.center]}],onClick:function(){return v(!0)}}),(0,r.tZ)(a.h,{onClick:t,tooltipHidden:!0,alt:"Close banner",children:(0,r.tZ)(c.Z,{})})]}),(0,r.tZ)(f.Z,{context:n,isOpen:h,onRequestClose:function(){return v(!1)},uponPurchaseGoTo:"cyclesPage",powerUp:"ghostwriter"})]})}var h=n(33280),v=n(61284),m=n(85747),g=n(54822);function y(e){var t=e.context,n=(0,m.s)(),a=n.cta,c=n.trialExpiryDate,p=(0,i.Z)(d.useState(!1),2),y=p[0],Z=p[1];if(a!==m.m.TrialOngoing&&a!==m.m.TrialExpired)return null;var b=(0,g.X)(c);return(0,r.BX)(r.HY,{children:[(0,r.BX)(l.G,{css:[s.l0.colWithGap(8)],dataCy:"ghostwriter-trial-expiry-banner",children:[(0,r.BX)(l.G,{css:[s.l0.flex.row,s.l0.justify.spaceBetween,{flexWrap:"wrap",gap:"8px"}],children:[(0,r.BX)(l.G,{css:[s.l0.align.center,s.l0.rowWithGap(8)],children:[(0,r.tZ)(u.Z,{}),(0,r.tZ)(v.xv,{multiline:!1,children:"Ghostwriter Trial"})]}),(0,r.tZ)(v.xv,{color:"dimmer",multiline:!1,children:a===m.m.TrialOngoing?b:"Ended"})]}),(0,r.tZ)(o.zx,{onClick:function(){return Z(!0)},text:a===m.m.TrialOngoing?"Subscribe Now":"Reactivate",colorway:"blurple"}),(0,r.tZ)(h.R,{})]}),(0,r.tZ)(f.Z,{context:t,isOpen:y,onRequestClose:function(){return Z(!1)},uponPurchaseGoTo:"cyclesPage",powerUp:"ghostwriter"})]})}var Z=n(46688),b=n(10601);function w(e){var t=e.context,n=(0,m.s)(),i=n.cta,o=n.trialExpiryDate,a=i===m.m.TrialOngoing&&(0,b.Z)(o,new Date)<=3,l=i===m.m.TrialExpired;return a?(0,r.tZ)(x,{context:t}):l?(0,r.tZ)(k,{context:t}):null}function x(e){var t=e.context,n=(0,Z.Z)("workspace","ghostwriter-trial-3-day-left-modal"),i=n.shouldDisplay,o=n.dismiss,a=n.register;return d.useEffect((function(){a()}),[a]),(0,r.tZ)(f.Z,{context:t,isOpen:i,onRequestClose:o,powerUp:"ghostwriter",isAutoTriggered:!0,uponPurchaseGoTo:"cyclesPage"})}function k(e){var t=e.context,n=(0,Z.Z)("workspace","ghostwriter-trial-expired-modal"),i=n.shouldDisplay,o=n.dismiss,a=n.register;return d.useEffect((function(){a()}),[a]),(0,r.tZ)(f.Z,{context:t,isOpen:i,onRequestClose:o,powerUp:"ghostwriter",isAutoTriggered:!0,uponPurchaseGoTo:"cyclesPage"})}var C=n(25150),S=n(70232);function T(){var e=(0,m.s)(),t=e.cta,n=e.loading,i=(0,C.o)("ghostwriter-repl-resources-cta"),o=i.isLoading,a=i.isDone,l=i.setAsDone;if(o||n)return null;switch(t){case m.m.None:case m.m.Activated:return null;case m.m.TrialOngoing:case m.m.TrialExpired:return(0,r.BX)(r.HY,{children:[(0,r.tZ)(w,{context:"repl_resources"}),(0,r.tZ)(y,{context:"repl_resources"})]});case m.m.Activate:return a||o?null:(0,r.tZ)(p,{onDismiss:l,context:"repl_resources"});default:(0,S.Z)(t)}}},35536:function(e,t,n){n.d(t,{ky:function(){return f},qo:function(){return s}});var r=n(72006),i=n(43119),o=n(71440),a=n(24635);function l(){var e=(0,i.Z)(["\n  fragment PowerUpActionsMultiBoostToggle on Repl {\n    id\n    powerUps {\n      __typename\n      ... on ReplPowerUpTypes {\n        boost {\n          __typename\n          sku\n          methodOfPayment\n        }\n      }\n    }\n  }\n"]);return l=function(){return e},e}function c(){var e=(0,i.Z)(["\n  query MultiBoostToggle($replId: String!) {\n    repl(id: $replId) {\n      __typename\n      ... on Repl {\n        ...PowerUpActionsMultiBoostToggle\n      }\n    }\n  }\n  ","\n"]);return c=function(){return e},e}var u={},s=(0,o.Ps)(l()),d=(0,o.Ps)(c(),s);function f(e){var t=(0,r.Z)({},u,e);return a.a(d,t)}},70593:function(e,t,n){n.d(t,{Z:function(){return h}});var r=n(9970),i=n(74985),o=n(33280),a=n(31854),l=n(61284),c=n(82568),u=n(39541),s=n(6321),d=[{value:"spaces",title:"spaces"},{value:"tabs",title:"tabs"}],f=[{value:2,title:"2"},{value:4,title:"4"},{value:8,title:"8"}],p=(0,c.X)({subtitle:[u.l0.color.foregroundDimmest]});function h(e){var t=e.preferences,n=e.update;return(0,i.BX)(i.HY,{children:[(0,i.tZ)(s.$,{id:"indentType",title:(0,i.BX)(i.HY,{children:[(0,i.tZ)(l.xv,{multiline:!1,children:"Indentation character"}),(0,i.tZ)(l.xv,{variant:"small",css:p.subtitle,children:"The character used for indenting lines."})]}),children:(0,i.tZ)(a.P,{initialSelectedItem:d.find((function(e){return e.value===(t.indentIsSpaces?"spaces":"tabs")})),onChange:function(e){var t="spaces"===(null===e||void 0===e?void 0:e.value);n({indentIsSpaces:t})},items:(0,r.Z)(d)})}),(0,i.tZ)(o.R,{}),(0,i.tZ)(s.$,{id:"indentSize",title:(0,i.BX)(i.HY,{children:[(0,i.tZ)(l.xv,{multiline:!1,children:"Indentation size"}),(0,i.tZ)(l.xv,{variant:"small",css:p.subtitle,children:"The number of columns taken up by an indentation level."})]}),children:(0,i.tZ)(a.P,{initialSelectedItem:f.find((function(e){return e.value===t.indentSize})),onChange:function(e){var t="number"===typeof(null===e||void 0===e?void 0:e.value)?e.value:2;n({indentSize:t})},items:(0,r.Z)(f)})})]})}},6321:function(e,t,n){n.d(t,{$:function(){return u}});var r=n(74985),i=n(50959),o=n(85368),a=n(61284),l=n(39541),c=n(56169);function u(e){var t=e.id,n=e.title,u=e.children,s=(0,c.H)()(t);return(0,r.BX)(o.G,{css:[l.l0.rowWithGap(8),l.l0.justify.spaceBetween,l.l0.align.center],children:[(0,r.tZ)(o.G,{css:l.l0.flex.growAndShrink(1),tag:"label",htmlFor:s,children:"string"===typeof n?(0,r.tZ)(a.xv,{multiline:!1,children:n}):n}),i.cloneElement(u,{id:s})]})}},99536:function(e,t,n){n.d(t,{Z:function(){return We}});var r=n(74985),i=n(50959),o=n(85368),a=n(39541),l=n(77511),c=n(9970),u=n(61284),s=n(63128),d=n(31854),f=n(48667),p=n(32104),h=n(6321),v=n(87076),m=n(59066),g=n(85747),y=n(80572),Z=n(70232),b=n(57389),w=n(31858),x=n(88541),k=n(11619),C=n(625),S=n(66539),T=n(70719),E=n(98416),R=n(72006),G=n(43119),I=n(71440),_=n(24635);function D(){var e=(0,G.Z)(["\n  query CodeSuggestionPreferences {\n    currentUser {\n      id\n      userPowerUpsByType {\n        __typename\n        ... on UnauthorizedError {\n          message\n        }\n        ... on UserPowerUpsTypes {\n          ghostwriter {\n            active\n          }\n        }\n      }\n    }\n  }\n"]);return D=function(){return e},e}var B={},P=(0,I.Ps)(D());var A=n(33280),L=n(44333),U=Array.from(E.vw,(function(e){return{title:e,value:e}})),X={titleContainer:[a.l0.rowWithGap(8),a.l0.align.center]};function M(){var e,t,n=(0,x.P5)({controlName:"flag-code-suggestion-engine",logFlagToAnalytics:!1}),i=function(e){var t=(0,R.Z)({},B,e);return _.a(P,t)}().data,l="UserPowerUpsTypes"===(null===i||void 0===i||null===(e=i.currentUser)||void 0===e?void 0:e.userPowerUpsByType.__typename)&&i.currentUser.userPowerUpsByType.ghostwriter.active,s=(0,k.Z)(),f=s.preferences,p=s.update,v=(0,w.Z)().engine,m={value:null,title:"default"},g=function(e,t){p((0,b.Z)({},e,t)),(0,C.j)(C.U3.SETTINGS_TOGGLED,{settingChanged:e,updatedValue:t})};return l?(0,r.BX)(o.G,{css:a.l0.colWithGap(12),children:[(0,r.tZ)(h.$,{id:"codeSuggestionToggle",title:(0,r.BX)(r.HY,{children:[(0,r.tZ)(o.G,{css:X.titleContainer,children:(0,r.tZ)(u.xv,{multiline:!1,children:"Complete Code"})}),(0,r.BX)(u.xv,{variant:"small",css:[a.l0.color.foregroundDimmest],children:["Complete Code provides inline \u201cghost text\u201d suggestions while you code.",(0,r.tZ)("br",{}),"Press tab or swipe right on your mobile device to accept."]})]}),children:(0,r.tZ)(r.HY,{children:(0,r.tZ)(L.r,{"aria-label":"Code complete",isSelected:f.codeSuggestion,onChange:function(e){g("codeSuggestion",e)}})})}),n?(0,r.BX)(r.HY,{children:[(0,r.tZ)(A.R,{}),(0,r.tZ)(h.$,{id:"completeCodeEngine",title:(0,r.BX)(r.HY,{children:[(0,r.BX)(o.G,{css:[a.l0.flex.row,a.l0.rowWithGap(8),a.l0.center,a.l0.justify.start],children:[(0,r.BX)(u.xv,{multiline:!1,children:["Ghostwriter Complete Code Engine (override)"," "]}),(0,r.tZ)(S.u,{tooltip:"You are seeing this functionality because you have special permissions.",children:(0,r.tZ)(T.Z,{})})]}),(0,r.BX)(u.xv,{variant:"small",css:[a.l0.color.foregroundDimmest],children:["Current applied engine: ",v]})]}),children:(0,r.tZ)(r.HY,{children:(0,r.tZ)(d.P,{css:[a.l0.minWidth(184)],initialSelectedItem:null!==(t=U.find((function(e){return e.value===f.completeCodeEngine})))&&void 0!==t?t:m,onChange:function(e){return g("completeCodeEngine",null===e||void 0===e?void 0:e.value)},items:[m].concat((0,c.Z)(U))})})})]}):null]}):null}var N={titleContainer:[a.l0.rowWithGap(8),a.l0.align.center],surface:[a.l0.p(8),a.l0.colWithGap(8),a.l0.borderRadius(8),a.l0.align.start]};function O(){var e=(0,g.s)(),t=e.cta,n=e.loading,i=(0,l.rv)();if(n)return(0,r.tZ)(h.$,{id:"ghostwriter",title:"Ghostwriter",children:(0,r.tZ)(p.Z,{})});switch(t){case g.m.None:return null;case g.m.Activated:case g.m.TrialOngoing:return(0,r.tZ)(M,{});case g.m.TrialExpired:case g.m.Activate:return i?null:(0,r.tZ)(h.$,{id:"ghostwriter",title:(0,r.BX)(r.HY,{children:[(0,r.BX)(o.G,{css:N.titleContainer,children:[(0,r.tZ)(u.xv,{multiline:!1,children:"Ghostwriter"}),(0,r.tZ)(y.Z,{context:"workspace_settings_pane",powerUp:"ghostwriter"})]}),(0,r.tZ)(u.xv,{variant:"small",css:[a.l0.color.foregroundDimmest],multiline:!1,children:"Replit's AI pair programmer can complete, generate, explain, and edit code."})]}),children:(0,r.tZ)(m.Z,{context:"workspace_settings_pane"})});default:(0,Z.Z)(t)}}var F=n(16988),W=n(64918),H=n(18180),V=Array.from(W.ce,(function(e){return{title:e,value:e}}));function z(){var e,t=(0,H.d)(),n=(0,x.P5)({controlName:"flag-ghostwriter-chat-engine-override",logFlagToAnalytics:!1}),i=(0,x.P5)({controlName:"flag-ghostwriter-model-selection",logFlagToAnalytics:!0}),l=(0,k.Z)(),s=l.preferences,f=l.update,p=(0,F.v)(),v={value:null,title:"default"},m=function(e,t){f((0,b.Z)({},e,t)),(0,C.j)(C.U3.SETTINGS_TOGGLED,{settingChanged:e,updatedValue:t})};return(0,r.BX)(r.HY,{children:[t&&n?(0,r.BX)(r.HY,{children:[(0,r.tZ)(A.R,{}),(0,r.tZ)(h.$,{id:"ghostwriterChatEngine",title:(0,r.BX)(r.HY,{children:[(0,r.BX)(o.G,{css:[a.l0.flex.row,a.l0.rowWithGap(8),a.l0.center,a.l0.justify.start],children:[(0,r.BX)(u.xv,{multiline:!1,children:["Ghostwriter Chat Engine (override)"," "]}),(0,r.tZ)(S.u,{tooltip:'You are seeing this functionality because you have special permissions. If set, this preference overrides "Use Advanced model" preference.',children:(0,r.tZ)(T.Z,{})})]}),(0,r.BX)(u.xv,{variant:"small",css:[a.l0.color.foregroundDimmest],children:["Current applied engine: ",p]})]}),children:(0,r.tZ)(r.HY,{children:(0,r.tZ)(d.P,{css:[a.l0.minWidth(184)],initialSelectedItem:null!==(e=V.find((function(e){return e.value===s.chatEngine})))&&void 0!==e?e:v,onChange:function(e){return m("chatEngine",null===e||void 0===e?void 0:e.value)},items:[v].concat((0,c.Z)(V))})})})]}):null,t&&i?(0,r.BX)(r.HY,{children:[(0,r.tZ)(A.R,{}),(0,r.tZ)(h.$,{id:"ghostwriterChatUseAdvancedModel",title:(0,r.BX)(r.HY,{children:[(0,r.tZ)(o.G,{css:[a.l0.flex.row,a.l0.rowWithGap(8),a.l0.center,a.l0.justify.start],children:(0,r.tZ)(u.xv,{multiline:!1,children:"Ghostwriter Use Advanced model "})}),(0,r.tZ)(u.xv,{variant:"small",css:[a.l0.color.foregroundDimmest],children:"Advanced models require a lot of power and have usage limits. They're most useful for tasks that are ambiguous or require creativity."})]}),children:(0,r.tZ)(r.HY,{children:(0,r.tZ)(L.r,{"aria-label":"Use Advanced model",isSelected:s.ghostwriterUseAdvancedModel,onChange:function(e){(0,C.j)(C.U3.GHOSTWRITER_CHAT_MODEL_CHANGED,{source:"settingsPane",model:e?"advanced":"default"}),m("ghostwriterUseAdvancedModel",e)}})})})]}):null]})}var j=n(34147),q=n(2439),$=n(42256),Y=n(90171),K=n(45510),Q=n(39137),J=n(82568),ee=n(63837),te=n(41120),ne=n(8622);function re(e){return e.slice().sort((function(e,t){return e-t}))}var ie=(0,J.X)({ruler:[a.l0.py(4),a.l0.px(8),a.l0.rowWithGap(4),a.l0.align.center,a.l0.borderRadius(8)],remove:[a.l0.borderRadius(4)],title:[a.l0.pr(8),a.l0.overflow("visible"),a.l0.flex.shrink(0)],body:[a.l0.flex.row,a.l0.flex.wrapReverse,a.l0.align.start,a.l0.justify.end,a.l0.flex.growAndShrink(1),{gap:a.TV.space4}],list:[a.l0.flex.row,a.l0.flex.wrap,a.l0.flex.growAndShrink(1),a.l0.align.end,a.l0.justify.end,{gap:a.TV.space4}],add:[a.l0.rowWithGap(4),a.l0.align.center]});function oe(e){var t=e.pos,n=e.onRemove;return(0,r.BX)(s.Tg,{css:ie.ruler,elevated:!0,children:[(0,r.tZ)(u.xv,{multiline:!1,children:t}),(0,r.tZ)(v.h,{css:ie.remove,alt:"Remove ruler",onClick:n,children:(0,r.tZ)(te.Z,{})})]})}function ae(){var e=(0,i.useState)(!1),t=e[0],n=e[1],a=(0,i.useState)(80),l=a[0],s=a[1],d=(0,i.useRef)(null),f=(0,i.useRef)(null),p=-1===l,v=l>=0&&l<=1e3,m=(0,k.Z)(),g=m.preferences,y=m.update,Z=re(g.rulers);return(0,r.tZ)(h.$,{id:"rulers",title:(0,r.tZ)(u.xv,{css:ie.title,multiline:!1,children:"Rulers"}),children:(0,r.BX)(o.G,{css:ie.body,children:[(0,r.tZ)(o.G,{css:ie.list,children:Z.map((function(e,t){return(0,r.tZ)(oe,{pos:e,onRemove:function(){y({rulers:Z.filter((function(e,n){return n!==t}))})}},t)}))}),t?(0,r.BX)(o.G,{css:ie.add,children:[(0,r.tZ)(Q.II,{ref:d,type:"number",style:{width:p?"6ch":l.toString().length+5.5+"ch"},value:l>=0?l.toString():"",onChange:function(e){if(""===e.target.value)s(-1);else{var t=parseInt(e.target.value,10);isNaN(t)||s(t)}},onKeyDown:function(e){"Escape"===e.key?(s(80),n(!1)):"Enter"===e.key&&v&&(y({rulers:re((0,c.Z)(Z).concat([l]))}),n(!1),s(80))},onBlur:function(e){e.relatedTarget!==f.current&&(n(!1),s(80))},onFocus:function(e){e.target.select()},autoFocus:!0}),(0,r.tZ)(K.zx,{ref:f,text:"Accept",colorway:"primary",iconLeft:(0,r.tZ)(ee.Z,{}),disabled:!v,onClick:function(){v&&(y({rulers:re((0,c.Z)(Z).concat([l]))}),n(!1),s(80))},onBlur:function(e){e.relatedTarget!==d.current&&(n(!1),s(80))}})]}):(0,r.tZ)(r.HY,{children:Z.length>=10?null:(0,r.tZ)(K.zx,{text:"Add Ruler",iconLeft:(0,r.tZ)(ne.Z,{}),onClick:function(){return n(!0)}})})]})})}var le=(0,J.X)({container:[a.l0.flex.row,a.l0.justify.spaceBetween,a.l0.align.start],title:[a.l0.flex.growAndShrink(1)],body:[a.l0.colWithGap(12)],switch:[a.l0.rowWithGap(8),a.l0.align.center,a.l0.justify.end]});function ce(){var e=(0,k.Z)(),t=e.preferences,n=e.update;return(0,r.BX)(o.G,{css:le.container,children:[(0,r.BX)(o.G,{css:le.title,children:[(0,r.tZ)(u.xv,{children:"Show whitespace"}),(0,r.tZ)(u.xv,{multiline:!0,variant:"small",css:[a.l0.color.foregroundDimmest],children:"Make whitespace characters visible, such as tabs and spaces."})]}),(0,r.BX)(o.G,{css:le.body,children:[(0,r.BX)(o.G,{css:le.switch,tag:"label",children:[(0,r.tZ)(u.xv,{variant:"small",children:"Leading"}),(0,r.tZ)(L.r,{"aria-label":"Show leading whitespace",isSelected:t.showLeadingWhitespace,onChange:function(e){n({showLeadingWhitespace:e})}})]}),(0,r.BX)(o.G,{css:le.switch,tag:"label",children:[(0,r.tZ)(u.xv,{variant:"small",children:"Enclosed"}),(0,r.tZ)(L.r,{css:[a.l0.flex.rowReverse],"aria-label":"Show enclosed whitespace",isSelected:t.showEnclosedWhitespace,onChange:function(e){n({showEnclosedWhitespace:e})}})]}),(0,r.BX)(o.G,{css:le.switch,tag:"label",children:[(0,r.tZ)(u.xv,{variant:"small",children:"Trailing"}),(0,r.tZ)(L.r,{"aria-label":"Show trailing whitespace",isSelected:t.showTrailingWhitespace,onChange:function(e){n({showTrailingWhitespace:e})}})]}),(0,r.BX)(o.G,{css:le.switch,tag:"label",children:[(0,r.tZ)(u.xv,{variant:"small",children:"Selected"}),(0,r.tZ)(L.r,{"aria-label":"Show selected whitespace",isSelected:t.showSelectedWhitespace,onChange:function(e){n({showSelectedWhitespace:e})}})]})]})]})}var ue=n(54659),se=n(25198),de=n(70593);function fe(e){var t=e.onBeforePreferencesUpdate,n=e.hideLayoutControl,i=e.className,m=e.resetLayout,g=(0,k.Z)(),y=g.preferences,Z=g.update,b=(0,l.Vg)((0,Y.useRouter)()),w=(0,l.T3)(),S=(0,ue.cR)(),T=(0,x.P5)({controlName:"flag-editor-rulers",logFlagToAnalytics:!1}),E=(0,x.P5)({controlName:"flag-editor-visible-whitespace",logFlagToAnalytics:!1}),R=function(e){t&&t(e),Object.keys(e).forEach((function(t){var n=e[t];(0,C.j)(C.U3.SETTINGS_TOGGLED,{settingChanged:t,updatedValue:n})})),Z(e)};if(!y)return null;var G=[{value:"side-by-side",title:"side-by-side"},{value:"stacked",title:"stacked"}],I=[{value:10,title:"tiny"},{value:12,title:"small"},{value:14,title:"normal"},{value:18,title:"large"},{value:24,title:"huge"}],_=[{value:"default",title:"default"},{value:"emacs",title:"emacs"},{value:"vim",title:"vim"}],D=[{value:"none",title:"none"},{value:"soft",title:"soft wrap"}],B=[{value:"none",title:"none"},{value:"blocks",title:"blocks"},{value:"characters",title:"characters"}],P=["cmdOrCtrlKey","altKey"].map((function(e){return{value:e,title:$.U[e]}}));return(0,r.BX)(s.Tg,{className:i,background:"default",css:[a.l0.p(16),a.l0.colWithGap(12)],children:[n?null:(0,r.BX)(r.HY,{children:[(0,r.tZ)(h.$,{id:"layout",title:"Default layout",children:(0,r.BX)(o.G,{css:[a.l0.align.center,a.l0.rowWithGap(8)],children:[m?(0,r.tZ)(v.h,{alt:"Reset layout",onClick:function(){m.reset()},children:m.reseting?(0,r.tZ)(p.Z,{}):(0,r.tZ)(f.Z,{})}):null,(0,r.tZ)(d.P,{initialSelectedItem:G.find((function(e){return y.isLayoutStacked?"stacked"===e.value:"side-by-side"===e.value})),onChange:function(e){var t="stacked"===(null===e||void 0===e?void 0:e.value);R({isLayoutStacked:t})},items:(0,c.Z)(G)})]})}),(0,r.tZ)(A.R,{})]}),(0,r.tZ)(h.$,{id:"fontSize",title:"Font size",children:(0,r.tZ)(d.P,{initialSelectedItem:I.find((function(e){return e.value===y.fontSize})),onChange:function(e){var t="number"===typeof(null===e||void 0===e?void 0:e.value)?e.value:14;R({fontSize:t})},items:(0,c.Z)(I)})}),(0,r.tZ)(A.R,{}),(0,r.tZ)(de.Z,{preferences:y,update:R}),(0,r.tZ)(A.R,{}),(0,r.tZ)(h.$,{id:"wrapping",title:"Wrapping",children:(0,r.tZ)(d.P,{initialSelectedItem:D.find((function(e){return e.value===(y.wrapping?"soft":"none")})),onChange:function(e){var t="soft"===(null===e||void 0===e?void 0:e.value);R({wrapping:t})},items:(0,c.Z)(D)})}),(0,r.tZ)(A.R,{}),w?null:(0,r.BX)(r.HY,{children:[(0,r.tZ)(h.$,{id:"minimap",title:"Minimap",children:(0,r.tZ)(d.P,{initialSelectedItem:B.find((function(e){return e.value===y.minimapDisplay})),onChange:function(e){R({minimapDisplay:e.value})},items:(0,c.Z)(B)})}),(0,r.tZ)(A.R,{})]}),T?(0,r.BX)(r.HY,{children:[(0,r.tZ)(ae,{}),(0,r.tZ)(A.R,{})]}):null,(0,r.tZ)(h.$,{id:"keybinds",title:"Keybinds",children:(0,r.tZ)(d.P,{initialSelectedItem:_.find((function(e){return["vim","emacs"].includes(e.value)?e.value===y.keyboardHandler:"default"===e.value&&!y.keyboardHandler})),onChange:function(e){var t=["vim","emacs"].includes(e.value)?e.value:null;R({keyboardHandler:t})},items:(0,c.Z)(_),dataCy:"keybinds"})}),(0,r.tZ)(A.R,{}),(0,r.tZ)(h.$,{id:"multiselectModifier",title:(0,r.BX)(r.HY,{children:[(0,r.tZ)(u.xv,{multiline:!1,children:"Multiselect modifier key"}),(0,r.tZ)(u.xv,{variant:"small",css:[a.l0.color.foregroundDimmest],children:"Modifier key for selecting multiple items in the filetree."})]}),children:(0,r.tZ)(d.P,{initialSelectedItem:P.find((function(e){return e.value===y.multiselectModifierKey})),onChange:function(e){R({multiselectModifierKey:e.value})},items:(0,c.Z)(P)})}),(0,r.tZ)(A.R,{}),(0,r.tZ)(O,{}),(0,r.tZ)(z,{}),(0,r.tZ)(A.R,{}),(0,r.tZ)(h.$,{id:"codeIntelligence",title:(0,r.BX)(r.HY,{children:[(0,r.tZ)(u.xv,{multiline:!1,children:"Code intelligence"}),(0,r.tZ)(u.xv,{variant:"small",css:[a.l0.color.foregroundDimmest],children:"Code intelligence gives you autocomplete, syntax highlighting, and hints as you type."})]}),children:(0,r.tZ)(L.r,{"aria-label":"Code Intelligence",isSelected:y.codeIntelligence,onChange:function(e){R({codeIntelligence:e})}})}),(0,r.tZ)(A.R,{}),E?(0,r.BX)(r.HY,{children:[(0,r.tZ)(ce,{}),(0,r.tZ)(A.R,{})]}):null,(0,r.tZ)(h.$,{id:"accessibleTerminal",title:(0,r.BX)(r.HY,{children:[(0,r.tZ)(u.xv,{multiline:!1,children:"Accessible Terminal Output"}),(0,r.tZ)(u.xv,{variant:"small",css:[a.l0.color.foregroundDimmest],children:"Enable this setting to use a screen reader. Warning: this can affect performance."})]}),children:(0,r.tZ)(L.r,{"aria-label":"Accessible Terminal Output",isSelected:y.accessibleTerminal,onChange:function(e){R({accessibleTerminal:e})}})}),(0,r.tZ)(A.R,{}),(0,r.tZ)(h.$,{id:"webviewAutoOpenOnPortOpened",title:(0,r.BX)(r.HY,{children:[(0,r.tZ)(u.xv,{multiline:!1,children:S?"Automatic webview (unavailable in this Repl)":"Automatic webview"}),(0,r.tZ)(u.xv,{variant:"small",css:[a.l0.color.foregroundDimmest],multiline:!1,children:"Open a webview automatically when a port is open"}),S?(0,r.tZ)(o.G,{css:[a.l0.pt(8),a.l0.maxWidth("calc(100% - 12px)")],children:(0,r.tZ)(se.E,{colorway:"orange",text:'This preference is unavailable in Extension Repls. To view custom tools in dev mode, click the "Preview" button in Extension Devtools instead.'})}):null]}),children:(0,r.tZ)(L.r,{"aria-label":"Automatic Webview",isSelected:y.webviewAutoOpenOnPortOpened,isDisabled:S,onChange:function(e){R({webviewAutoOpenOnPortOpened:e})}})}),b?null:(0,r.BX)(r.HY,{children:[(0,r.tZ)(A.R,{}),(0,r.tZ)(h.$,{id:"theme",title:"Theme",children:(0,r.tZ)(j.Z,{css:[a.l0.minWidth(184),a.l0.backgroundColor.backgroundHigher],context:q.HY.WorkspacePreferencesPane})})]})]})}var pe=n(56169),he=n(82001),ve=n(17807),me=n(80731),ge=n(1050),ye=n(26992),Ze=n(99964),be=n(18988),we=n(76735),xe=n(250),ke=n(83718),Ce=n(16918),Se=n(91291),Te=n(49944),Ee=n(70804),Re=n(18171),Ge=n(43312);function Ie(e){var t=function(){r.current&&clearTimeout(r.current),o.current=[]},n=function(n){e({type:"success",shortcut:n.length>1?[n[0],n[1]]:n[0]}),t()},r=(0,i.useRef)(null),o=(0,i.useRef)([]);return{onKeyDown:function(t){var i=r.current,a=o.current;t.preventDefault(),t.stopPropagation(),i&&clearTimeout(i);var l=(0,xe.lc)(t);if(l)if((0,xe.ZG)(l))e({type:"update",recorded:a.length?[a[0],l]:[l]});else if(a.length>0&&"Enter"===l)n(a);else{a.push(l),e({type:"update",recorded:a});var c=2===a.length?0:600;r.current=setTimeout((function(){return n(a)}),c)}},startRecording:function(){t(),e({type:"start"})},stopRecording:function(){t(),e({type:"stop"})}}}var _e=(0,J.X)({root:[a.l0.colWithGap(8)],row:[a.l0.rowWithGap(8),a.l0.align.center,a.l0.minHeight(28)],left:[a.l0.colWithGap(2),a.l0.flex.grow(0),a.l0.flex.shrink(1)],right:[a.l0.rowWithGap(4),a.l0.align.center,a.l0.justify.end,a.l0.position.relative,a.l0.flex.grow(1),a.l0.flex.shrink(0)],recordingRow:[a.l0.flex.column,a.l0.align.center,a.l0.justify.end,a.l0.pr(24)],recordingRowInner:[a.l0.rowWithGap(8),a.l0.align.center],recordingRowKeys:[a.l0.position.relative],recordingRowHint:[a.l0.position.absolute,a.l0.top(20),a.l0.right(0),{fontStyle:"italic"}],recordingRowPlaceholder:[a.l0.display.flex,a.l0.align.baseline,a.l0.rowWithGap(4),{fontStyle:"italic"}],keys:[a.l0.display.inlineFlex,a.l0.rowWithGap(12)],secondaryText:[a.l0.display.flex,a.l0.flex.row,a.l0.align.center,a.l0.rowWithGap(4)],secondaryTextId:[a.l0.flex.grow(1),a.l0.flex.shrink(0)],secondaryTextDescription:[a.l0.flex.grow(0),a.l0.flex.shrink(1),a.l0.color.foregroundDimmest],buttons:[a.l0.pl(8),a.l0.display.flex,a.l0.flex.row]}),De=[a.l0.reset.button,ve.gU.listItem,a.l0.height(24),a.l0.width(24),a.l0.p(2)],Be=(0,J.X)({root:[a.l0.rowWithGap(8),a.l0.align.center],recordingRow:[a.l0.rowWithGap(4),a.l0.align.center]});function Pe(e){var t,n,a,l,c=e.command,s=e.filter,d=(0,he.w0)(),f=d.enableRunner,p=d.disableRunner,h=(0,he.r3)(),m=(0,he.wU)(),g=(0,he.V_)(c.id),y=(0,i.useState)(null),Z=y[0],b=y[1],w=(0,i.useState)(null),x=w[0],k=w[1],C=Ie((function(e){switch(e.type){case"start":return p(),k({recorded:[]}),void b(null);case"stop":return f(),k(null),void b(null);case"update":return k({recorded:e.recorded}),void b(null);case"success":f();var t=(0,xe.SG)(e.shortcut);if(!t)return k(null),void b(null);var n=h(c.id,t);return n?(k(null),void b('This shortcut conflicts with "'.concat(n.conflict.name,'"'))):void k(null);case"error":var r;return void k((function(t){return{error:e.message,recorded:null!==(r=null===t||void 0===t?void 0:t.recorded)&&void 0!==r?r:[]}}))}})),S=C.stopRecording,T=C.startRecording,E=C.onKeyDown,R=(0,Ze.Z)((function(){return S()}),[]),G=Boolean(x);Ue(G);var I=null!==(l=null===x||void 0===x?void 0:x.recorded)&&void 0!==l?l:[],_=null===x||void 0===x?void 0:x.error,D=s.length>0,B=null===(t=Ce.Z.match(s,c.name))||void 0===t?void 0:t.ranges,P=null===(n=Ce.Z.match(s,c.id))||void 0===n?void 0:n.ranges,A=(null===c||void 0===c?void 0:c.description)?null===(a=Ce.Z.match(s,c.description))||void 0===a?void 0:a.ranges:void 0,L=(0,Re.Z)((function(){return s.replaceAll('"',"").split("-").map((function(e){return e.toLowerCase()}))}),[s]),U=[{label:"Remove",key:"remove"}];g&&g!==c.shortcut&&U.push({label:"Reset",key:"reset"});var X,M=(0,Re.Z)((function(){return function(e){switch(e){case"remove":m(c.id);break;case"reset":var t=h(c.id,g);t&&b("".concat(g,' conflicts with "').concat(t.conflict.name,'"'))}}}),[c.id,g,h,m]);return(0,r.BX)(o.G,{css:_e.root,children:[(0,r.BX)(o.G,{css:_e.row,children:[(0,r.BX)(o.G,{css:_e.left,children:[(0,r.tZ)(Te.x,{text:c.name,highlight:B,dimmed:D}),(0,r.BX)(u.xv,{variant:"small",css:_e.secondaryText,multiline:!1,children:[D?(0,r.tZ)(Te.x,{css:_e.secondaryTextId,text:c.id,highlight:P,dimmed:D}):null,c.description?(0,r.BX)(r.HY,{children:[D?(0,r.tZ)(u.xv,{color:"dimmest",multiline:!1,children:"\u2022"}):null,(0,r.tZ)(Te.x,{css:_e.secondaryTextDescription,text:c.description,highlight:A,dimmed:D})]}):null]})]}),(0,r.BX)(o.G,{innerRef:G?R:void 0,css:_e.right,children:[G?(0,r.tZ)(be.MT,{autoFocus:!0,restoreFocus:!0,children:(0,r.tZ)("input",{onKeyDown:E,css:{opacity:0,width:1}})}):null,c.shortcut&&!G?(0,r.tZ)(ke.bM,{small:!0,keyCombo:c.shortcut,match:L}):null,c.shortcut||G?null:(0,r.tZ)(K.zx,{small:!0,outlined:!0,iconLeft:(0,r.tZ)(ne.Z,{}),text:"Add shortcut",onClick:function(){return T()}}),G?(0,r.tZ)(o.G,{css:_e.recordingRow,children:(0,r.BX)(o.G,{css:_e.recordingRowInner,children:[(0,r.tZ)(o.G,{css:_e.recordingRowKeys,children:I.length>0?(0,r.tZ)(o.G,{css:[_e.keys],children:I.map((function(e,t){return(0,r.tZ)(ke.bM,{small:!0,keyCombo:e},"".concat(e,"-").concat(t))}))}):(0,r.tZ)(u.xv,{multiline:!1,color:"dimmest",css:_e.recordingRowPlaceholder,children:"Recording..."})}),(0,r.tZ)(v.h,{alt:"Stop",onClick:function(){return S()},children:(0,r.tZ)(Ne,{})})]})}):null,c.shortcut&&!G?(0,r.BX)(o.G,{css:_e.buttons,children:[(0,r.tZ)(v.h,{alt:"Change",onClick:function(){return T()},children:(0,r.tZ)(ge.Z,{})}),(0,r.tZ)(me.ZE,{"aria-label":"More",cssProps:De,items:U,icon:(0,r.tZ)(Ee.Z,{size:12}),placement:"bottom-end",onAction:M,children:U.map((function(e){return(0,r.tZ)(me.ck,{textValue:e.label,children:(0,r.tZ)(u.xv,{multiline:!1,children:e.label})},e.key)}))})]}):null]})]}),_?(0,r.tZ)(se.E,{icon:(0,r.tZ)(we.Z,{}),colorway:"warning",text:_,closable:!0,closeAction:function(){return k((function(e){return{recorded:null!==(X=null===e||void 0===e?void 0:e.recorded)&&void 0!==X?X:[]}}))}}):null,Z?(0,r.tZ)(se.E,{icon:(0,r.tZ)(we.Z,{}),colorway:"warning",text:Z,closable:!0,closeAction:function(){return b(null)}}):null]})}var Ae=(0,J.X)({root:[a.l0.colWithGap(8),a.l0.p(0)],surface:[a.l0.pt(8),a.l0.borderRadius(8),a.l0.colWithGap(12)]});function Le(){var e=(0,he.w0)(),t=e.enableRunner,n=e.disableRunner,a=(0,i.useState)(""),l=a[0],d=a[1],f=(0,he.xF)(),p=(0,Re.Z)((function(){return(0,c.Z)(f.values())}),[f]);function h(e){var t=e.flat();return t.length>1?t.map((function(e){return h([e])})).join(" "):(0,xe.QR)(t[0]).map((function(e){return'"'.concat(e,'"')})).join("-").replaceAll(" ","space")}var m=Ce.Z.filter(l,p,{extract:function(e){var t="".concat(e.name," ").concat(e.id);return e.description&&(t+=" ".concat(e.description)),e.shortcut&&(t+=" ".concat(h([e.shortcut]))),t}}),g=(0,i.useRef)(null),y=(0,i.useState)(!1),Z=y[0],b=y[1];Ue(Z);var w=Ie((function(e){switch(e.type){case"start":var r;return n(),b(!0),d(""),void(null===g||void 0===g||null===(r=g.current)||void 0===r||r.focus());case"stop":case"error":var i,o;return t(),b(!1),null===g||void 0===g||null===(i=g.current)||void 0===i||i.focus(),void(null===g||void 0===g||null===(o=g.current)||void 0===o||o.select());case"success":return void d(h([e.shortcut]));case"update":return void d(h(e.recorded))}})),x=w.stopRecording,k=w.startRecording,C=w.onKeyDown;return(0,r.BX)(o.G,{css:Ae.root,children:[(0,r.BX)(o.G,{css:Be.root,children:[(0,r.tZ)(be.MT,{children:(0,r.tZ)(Q.II,{ref:g,placeholder:Z?"Recording keys. Press Escape to exit":"Type to search keyboard shortcuts",onBlur:Z?x:void 0,onChange:function(e){return d(e.target.value)},onKeyDown:Z?function(e){"Escape"===e.key?x():C(e)}:void 0,value:l})}),(0,r.tZ)(o.G,{css:Be.recordingRow,children:Z?(0,r.BX)(r.HY,{children:[(0,r.tZ)(u.xv,{color:"dimmest",css:[{fontStyle:"italic"}],multiline:!1,children:"Recording..."}),(0,r.tZ)(v.h,{alt:"Stop Recording",onClick:x,children:(0,r.tZ)(Ne,{})})]}):(0,r.tZ)(v.h,{alt:"Record Keys",onClick:k,children:(0,r.tZ)(Se.Z,{})})}),(0,r.tZ)(v.h,{alt:"Clear Input",disabled:0===l.length,onClick:function(){var e;d(""),null===g||void 0===g||null===(e=g.current)||void 0===e||e.focus()},children:(0,r.tZ)(te.Z,{})})]}),m.length>0?(0,r.tZ)(s.Tg,{css:Ae.surface,children:m.map((function(e,t){return(0,r.BX)(i.Fragment,{children:[t>0?(0,r.tZ)(s.Tg,{elevated:!0,style:{height:1}}):null,(0,r.tZ)(Pe,{command:e.original,filter:l})]},e.original.id)}))}):null]})}function Ue(e){var t="You have unsaved changes";(0,i.useEffect)((function(){var n=function(e){return e.preventDefault(),e.returnValue=t,t};if(e)return window.addEventListener("beforeunload",n),function(){window.removeEventListener("beforeunload",n)}}),[e])}var Xe=(0,Ge.F4)("0%{transform:scale(1);}40%{transform:scale(1.3);}100%{transform:scale(1);}"),Me=(0,J.X)({background:[{animationName:Xe,animation:"".concat(Xe," 2s cubic-bezier(0.4, 0, 0.6, 1) infinite"),boxShadow:"0 0 10px ".concat(a.TV.redStronger)},a.l0.height(11),a.l0.width(11),a.l0.borderRadius("full"),a.l0.position.absolute],container:[a.l0.position.relative,a.l0.align.center,a.l0.justify.center],icon:[{zIndex:1}]});function Ne(){return(0,r.BX)(o.G,{css:Me.container,children:[(0,r.tZ)(ye.Z,{css:Me.icon,color:a.TV.redStronger}),(0,r.tZ)(o.G,{css:Me.background})]})}function Oe(){var e=(0,pe.H)()("keyboard_shortcuts");return(0,r.BX)(s.Tg,{background:"default",css:[a.l0.px(16),a.l0.pb(16),a.l0.colWithGap(12)],children:[(0,r.tZ)(o.G,{tag:"label",htmlFor:e}),(0,r.tZ)(Le,{})]})}var Fe=n(12470);function We(e){var t=e.hideLayoutControl,n=e.resetLayout,i=(0,l.T3)();return(0,r.BX)(r.HY,{children:[(0,r.tZ)(o.G,{css:[a.l0.flex.row,a.l0.justify.spaceBetween,a.l0.align.center,a.l0.px(16),a.l0.py(8)],children:(0,r.tZ)(u.h4,{variant:"subheadBig",level:3,children:"Settings"})}),i?(0,r.tZ)(fe,{hideLayoutControl:t,resetLayout:n}):(0,r.tZ)(o.G,{children:(0,r.BX)(Fe.mQ,{css:[{width:"100%"}],children:[(0,r.BX)(Fe.td,{withDividers:!1,css:[{"[aria-selected=true]":[a.l0.fontWeight.medium]}],children:[(0,r.tZ)(Fe.OK,{css:[a.l0.py(8),a.l0.px(16)],children:"Editor preferences"}),(0,r.tZ)(Fe.OK,{css:[a.l0.py(8),a.l0.px(16)],children:"Keyboard shortcuts"})]}),(0,r.BX)(Fe.nP,{children:[(0,r.tZ)(Fe.x4,{children:(0,r.tZ)(fe,{resetLayout:n})}),(0,r.tZ)(Fe.x4,{children:(0,r.tZ)(Oe,{})})]})]})})]})}},28103:function(e,t,n){n.d(t,{Z:function(){return p}});var r=n(74985),i=n(82568),o=n(33487),a=n(80336),l=n(93658),c=n(76735),u=n(39541),s=n(45317),d=n(7225),f=(0,i.X)({errorOuter:[u.l0.display.flex,u.l0.position.relative,u.l0.align.center],errorColor:[u.l0.color.redDefault],errorCloseIcon:[u.l0.position.absolute,u.l0.display.flex]});function p(e){var t=e.severity,n=e.size,i=void 0===n?16:n;switch(t){case d.DiagnosticSeverity.Error:return(0,r.BX)("div",{css:f.errorOuter,children:[(0,r.tZ)("div",{css:f.errorCloseIcon,style:{height:i,width:i,transform:"scale(0.75"},children:(0,r.tZ)(a.Z,{css:f.errorColor,size:i})}),(0,r.tZ)(o.Z,{css:f.errorColor,size:i})]});case d.DiagnosticSeverity.Warning:return(0,r.tZ)(c.Z,{color:s.TV.yellowStronger,size:i});case d.DiagnosticSeverity.Hint:case d.DiagnosticSeverity.Information:default:return(0,r.tZ)(l.Z,{color:s.TV.greyDefault,size:i})}}},65443:function(e,t,n){n.d(t,{BZ:function(){return _},HX:function(){return G},WM:function(){return P},ap:function(){return O},gF:function(){return U},l9:function(){return A},pr:function(){return W},vN:function(){return V},vi:function(){return M},zu:function(){return B}});var r=n(72006),i=n(43119),o=n(71440),a=n(3839),l=n(75982),c=n(91350),u=n(70196),s=n(35536),d=n(27923),f=n(78828),p=n(45941),h=n(90024),v=n(24635),m=n(50216);function g(){var e=(0,i.Z)(["\n  fragment ReplPowerUpCosts on Repl {\n    id\n    powerUpCosts {\n      ... on PowerUpCostsType {\n        alwaysOn {\n          cycles\n          explanation\n        }\n        gpu {\n          cycles\n          explanation\n        }\n      }\n    }\n  }\n"]);return g=function(){return e},e}function y(){var e=(0,i.Z)(["\n  fragment WorkspaceHeaderReplInfoRepl on Repl {\n    id\n    title\n    rawTemplateLabel: templateLabel(disableFallbackToTitle: true)\n    description\n    isPrivate\n    isRenamed\n    url\n    slug\n    workspaceCta\n    isAlwaysOn\n    isBoosted\n    hasGpu\n    lastPublishedAt\n    publishedAs\n    currentUserPermissions {\n      containerAttach\n      changeIconUrl\n      changeTemplateLabel\n      changeTitle\n      changeDescription\n      changePrivacy\n      delete\n      changeAlwaysOn\n      publish\n      fork\n    }\n    hostingDeployment {\n      ... on HostingDeployment {\n        id\n        currentBuild {\n          id\n        }\n      }\n    }\n    hostingDeploymentPermissions {\n      canDeploy\n    }\n    user {\n      id\n      image\n      ...UserLinkUser\n    }\n    ...WorkspaceHeaderReplMetadataRepl\n    ...ReplEnvironmentWebviewRepl\n    ...PublishReleaseFormRepl\n    ...PowerUpActionsMultiBoostToggle\n    ...ReplInfoEditReplTitleRepl\n    ...ReplInfoEditReplDescriptionRepl\n    ...ReplInfoEditReplTemplateLabelRepl\n    ...ReplPowerUpCosts\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return y=function(){return e},e}function Z(){var e=(0,i.Z)(["\n  query WorkspaceHeaderReplInfo($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        ...WorkspaceHeaderReplInfoRepl\n      }\n    }\n  }\n  ","\n"]);return Z=function(){return e},e}function b(){var e=(0,i.Z)(["\n  query CurrentUserStates {\n    currentUser {\n      __typename\n      ... on CurrentUser {\n        id\n        userSubscriptionType\n      }\n    }\n  }\n"]);return b=function(){return e},e}function w(){var e=(0,i.Z)(["\n  query ReplPowerUpStatus {\n    currentUser {\n      __typename\n      ... on CurrentUser {\n        id\n        userPowerUpsByType {\n          ... on UserPowerUpsTypes {\n            privateRepls {\n              active\n              cost {\n                cycles\n                explanation\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n"]);return w=function(){return e},e}function x(){var e=(0,i.Z)(["\n  mutation WorkspaceHeaderReplInfoUnpublishTemplate(\n    $input: DeleteReplDeploymentInput!\n  ) {\n    deleteReplDeployment(input: $input) {\n      ... on Repl {\n        id\n        ...PublishReplData\n      }\n    }\n  }\n  ","\n"]);return x=function(){return e},e}function k(){var e=(0,i.Z)(["\n  mutation WorkspaceHeaderReplInfoUpdateRepl($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        ...WorkspaceHeaderReplInfoRepl\n      }\n    }\n  }\n  ","\n"]);return k=function(){return e},e}function C(){var e=(0,i.Z)(["\n  mutation WorkspaceHeaderReplInfoDeleteRepl($id: String!) {\n    deleteRepl(id: $id) {\n      id\n    }\n  }\n"]);return C=function(){return e},e}function S(){var e=(0,i.Z)(["\n  mutation WorkspaceHeaderReplInfoSetAlwaysOn(\n    $replId: ID!\n    $enabled: Boolean!\n  ) {\n    setAlwaysOn(replId: $replId, enabled: $enabled) {\n      ... on Repl {\n        id\n        ...WorkspaceHeaderReplInfoRepl\n        ...ReplPowerUpCosts\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n  ","\n"]);return S=function(){return e},e}function T(){var e=(0,i.Z)(["\n  mutation WorkspaceHeaderReplInfoSetGpu($replId: ID!, $enabled: Boolean!) {\n    setGpu(replId: $replId, enabled: $enabled) {\n      ... on Repl {\n        id\n        ...WorkspaceHeaderReplInfoRepl\n        ...ReplPowerUpCosts\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n  ","\n"]);return T=function(){return e},e}var E={},R=(0,o.Ps)(g()),G=(0,o.Ps)(y(),a._,l.s,c.sY,u.wd,s.qo,d.Zx,f.LU,p.Jr,R),I=(0,o.Ps)(Z(),G);function _(e){var t=(0,r.Z)({},E,e);return v.a(I,t)}var D=(0,o.Ps)(b());function B(e){var t=(0,r.Z)({},E,e);return v.a(D,t)}var P=(0,o.Ps)(w());function A(e){var t=(0,r.Z)({},E,e);return v.a(P,t)}var L=(0,o.Ps)(x(),h.FW);function U(e){var t=(0,r.Z)({},E,e);return m.D(L,t)}var X=(0,o.Ps)(k(),G);function M(e){var t=(0,r.Z)({},E,e);return m.D(X,t)}var N=(0,o.Ps)(C());function O(e){var t=(0,r.Z)({},E,e);return m.D(N,t)}var F=(0,o.Ps)(S(),G,R);function W(e){var t=(0,r.Z)({},E,e);return m.D(F,t)}var H=(0,o.Ps)(T(),G,R);function V(e){var t=(0,r.Z)({},E,e);return m.D(H,t)}},40109:function(e,t,n){n.d(t,{Z:function(){return Ht}});var r=n(57135),i=n(72006),o=n(4405),a=n(2272),l=n(96583),c=n(74985),u=n(48306),s=n.n(u),d=n(88254),f=n(50959),p=n(43117),h=n(76357),v=n(39603),m=n(82568),g=n(87076),y=n(39541),Z=n(61284),b=n(85368),w=n(1050),x=n(86763),k=n.n(x),C=n(39137),S=n(45510),T=n(27923),E=n(76735),R=n(63837),G=n(18171),I=n(32104),_=n(80336),D=n(56169),B={positive:y.TV.accentPositiveDefault,warning:y.TV.orangeDefault,dimmer:y.TV.foregroundDimmer,error:y.TV.redDefault},P=(0,m.X)({root:[y.l0.rowWithGap(4),{"& > *":{color:"inherit"}}]});function A(e){return(0,c.BX)(b.G,{style:{color:B[e.color]},css:P.root,children:[(0,f.cloneElement)(e.icon,{size:12}),(0,c.tZ)(Z.xv,{variant:"small",multiline:!1,children:e.text})]})}var L=(0,m.X)({root:[y.l0.colWithGap(8)],controls:[y.l0.rowWithGap(8),y.l0.justify.end],inputRow:[y.l0.rowWithGap(8)],messages:[y.l0.colWithGap(4)],positiveText:[y.l0.color.accentPositiveDefault,y.l0.rowWithGap(4)],warningText:[y.l0.color.orangeDefault,y.l0.rowWithGap(4)],loadingText:[y.l0.color.foregroundDimmer,y.l0.rowWithGap(4)],input:[y.l0.flex.growAndShrink(1)],hidden:[y.l0.visibility.hidden]});function U(e){var t,n=e.repl,r=e.done,i=(0,f.useState)(n.title),o=i[0],l=i[1],u=(0,f.useState)(null),s=u[0],d=u[1],p=(0,D.H)()("title"),h=(0,a.Z)((0,T.uB)({onCompleted:function(){r()},onError:function(){d("Something went wrong")}}),2),v=h[0],m=h[1],g="Team"===(null===(t=n.owner)||void 0===t?void 0:t.__typename)?n.owner.id:null,y=n.title!==o,w=function(e){var t=(0,f.useState)(null),n=t[0],r=t[1],i=(0,a.Z)((0,T.C4)({onCompleted:function(e){var t="AvailableReplTitleResult"===e.availableReplTitle.__typename?e.availableReplTitle:null;r(t?{type:"result",isAvailable:t.isAvailable}:{type:"error",message:"Something went wrong"})},onError:function(){r({type:"error",message:"Something went wrong"})}}),1)[0],o=(0,G.Z)((function(){return k()(i)}),[i]),l=null===e||void 0===e?void 0:e.title,c=null===e||void 0===e?void 0:e.teamId;return(0,f.useEffect)((function(){l&&(r({type:"loading"}),o({variables:{input:{title:l,teamId:c}}}))}),[o,l,c]),n}(y?{title:o,teamId:g}:null),x="result"===(null===w||void 0===w?void 0:w.type)&&w.isAvailable,B="result"===(null===w||void 0===w?void 0:w.type)&&!w.isAvailable,P=y&&x&&o;return(0,c.BX)(b.G,{tag:"form",onSubmit:function(e){e.preventDefault(),v({variables:{input:{title:o,id:n.id}}})},css:L.root,children:[(0,c.tZ)(b.G,{tag:"label",htmlFor:p,children:(0,c.tZ)(Z.xv,{variant:"small",color:"dimmer",multiline:!1,children:"Name"})}),(0,c.BX)(b.G,{css:L.inputRow,children:[(0,c.tZ)(C.II,{placeholder:n.title,id:p,value:o,onChange:function(e){s&&d(null);var t=e.currentTarget.value;l(t.length>60?t.slice(0,60):t)},autoFocus:!0}),(0,c.BX)(b.G,{css:L.controls,children:[(0,c.tZ)(S.zx,{text:"Cancel",onClick:function(){return r()}}),m.loading?(0,c.tZ)(S.zx,{disabled:!0,text:"Renaming",colorway:"primary"}):(0,c.tZ)(S.zx,{type:"submit",disabled:!P,text:"Rename",colorway:"primary"})]})]}),(0,c.BX)(b.G,{css:L.messages,children:["loading"===(null===w||void 0===w?void 0:w.type)?(0,c.BX)(c.HY,{children:[(0,c.tZ)(A,{icon:(0,c.tZ)(I.Z,{}),text:"Loading...",color:"dimmer"}),(0,c.tZ)(Z.xv,{css:L.hidden,variant:"small",multiline:!1,children:"..."})]}):null,P?(0,c.BX)(c.HY,{children:[(0,c.tZ)(A,{icon:(0,c.tZ)(R.Z,{}),text:"\u201c".concat(o,"\u201d is available"),color:"positive"}),(0,c.tZ)(A,{icon:(0,c.tZ)(E.Z,{}),text:"Your Repl will momentarily turn off while the Workspace reloads.",color:"warning"})]}):null,B?(0,c.tZ)(A,{icon:(0,c.tZ)(_.Z,{}),text:"The Repl \u201c".concat(o,"\u201d already exists on this account."),color:"error"}):null,s?(0,c.tZ)(A,{icon:(0,c.tZ)(E.Z,{}),text:s,color:"warning"}):null]})]})}var X=n(78828),M=n(90355),N=(0,m.X)({root:[y.l0.colWithGap(8)],controls:[y.l0.rowWithGap(8),y.l0.justify.end]});function O(e){var t,n=e.repl,r=e.done,i=(0,D.H)()("description"),o=(0,f.useState)(null!==(t=n.description)&&void 0!==t?t:""),l=o[0],u=o[1],s=(0,f.useState)(null),d=s[0],p=s[1],h=n.description!==l,v=(0,a.Z)((0,X.Ot)({onCompleted:function(){r()},onError:function(){p("Something went wrong")}}),2),m=v[0],g=v[1];return(0,c.BX)(b.G,{tag:"form",css:N.root,onSubmit:function(e){e.preventDefault(),m({variables:{input:{description:l,id:n.id}}})},children:[(0,c.tZ)(b.G,{tag:"label",htmlFor:i,children:(0,c.tZ)(Z.xv,{variant:"small",color:"dimmer",multiline:!1,children:"Description"})}),(0,c.tZ)(C.B,{autoFocus:!0,placeholder:"What does this Repl do?",id:i,autoSize:!0,value:l,onChange:function(e){d&&p(null);var t=e.currentTarget.value;u(t.length>M.p?t.slice(0,M.p):t)}}),d?(0,c.tZ)(A,{icon:(0,c.tZ)(E.Z,{}),text:d,color:"warning"}):null,(0,c.BX)(b.G,{css:N.controls,children:[(0,c.tZ)(S.zx,{text:"Cancel",onClick:function(){return r()}}),g.loading?(0,c.tZ)(S.zx,{disabled:!0,text:"Saving\u2026",colorway:"primary"}):(0,c.tZ)(S.zx,{disabled:!h,text:"Save description",colorway:"primary",type:"submit"})]})]})}var F=n(45941),W=(0,m.X)({root:[y.l0.colWithGap(8)],inputRow:[y.l0.rowWithGap(8)],controls:[y.l0.rowWithGap(8),y.l0.justify.end]});function H(e){var t,n=e.repl,r=e.done,i=(0,D.H)()("templateLabel"),o=(0,f.useState)(null!==(t=n.templateLabel)&&void 0!==t?t:""),l=o[0],u=o[1],s=(0,f.useState)(null),d=s[0],p=s[1],h=n.templateLabel!==l&&l,v=(0,a.Z)((0,F.ie)({onCompleted:function(){r()},onError:function(){p("Something went wrong")}}),2),m=v[0],g=v[1];return(0,c.BX)(b.G,{tag:"form",css:W.root,onSubmit:function(e){e.preventDefault(),m({variables:{input:{templateLabel:l,id:n.id}}})},children:[(0,c.tZ)(b.G,{tag:"label",htmlFor:i,children:(0,c.tZ)(Z.xv,{variant:"small",color:"dimmer",multiline:!1,children:"Template label"})}),(0,c.BX)(b.G,{css:W.inputRow,children:[(0,c.tZ)(C.II,{autoFocus:!0,placeholder:"An optional custom title",id:i,value:l,onChange:function(e){d&&p(null),u(e.currentTarget.value)}}),(0,c.BX)(b.G,{css:W.controls,children:[(0,c.tZ)(S.zx,{text:"Cancel",onClick:function(){return r()}}),g.loading?(0,c.tZ)(S.zx,{disabled:!0,text:"Saving\u2026",colorway:"primary"}):(0,c.tZ)(S.zx,{disabled:!h,text:"Save",colorway:"primary",type:"submit"})]})]}),d?(0,c.tZ)(A,{icon:(0,c.tZ)(E.Z,{}),text:d,color:"warning"}):null]})}var V=(0,m.X)({root:[y.l0.colWithGap(0)],row:[y.l0.rowWithGap(8),y.l0.align.center],text:[y.l0.flex.growAndShrink(1)]});function z(e){var t=e.repl,n=(0,f.useState)(!1),r=n[0],i=n[1];return r?(0,c.tZ)(U,{repl:t,done:function(){return i(!1)}}):(0,c.BX)(b.G,{css:V.root,children:[(0,c.tZ)(Z.xv,{variant:"small",color:"dimmer",multiline:!1,children:"Name"}),(0,c.BX)(b.G,{css:V.row,children:[(0,c.BX)(Z.xv,{multiline:!1,color:t.isRenamed?void 0:"dimmest",css:V.text,children:[t.isRenamed?null:"Default name: ",t.title]}),(0,c.tZ)(g.h,{alt:"Edit",onClick:function(){return i(!0)},children:(0,c.tZ)(w.Z,{})})]})]})}var j=(0,m.X)({root:[y.l0.colWithGap(0)],row:[y.l0.rowWithGap(8),y.l0.justify.spaceBetween,y.l0.align.start],text:[y.l0.flex.growAndShrink(1)]});function q(e){var t=e.repl,n=(0,f.useState)(!1),r=n[0],i=n[1];return r?(0,c.tZ)(O,{repl:t,done:function(){return i(!1)}}):(0,c.BX)(b.G,{css:j.root,children:[(0,c.tZ)(Z.xv,{variant:"small",color:"dimmer",multiline:!1,children:"Description"}),(0,c.BX)(b.G,{css:j.row,children:[t.description?(0,c.tZ)(Z.xv,{color:"dimmer",css:j.text,maxLines:2,multiline:!1,children:t.description}):(0,c.tZ)(Z.xv,{color:"dimmest",css:j.text,multiline:!1,children:"No description"}),(0,c.tZ)(g.h,{alt:"Edit",onClick:function(){return i(!0)},children:(0,c.tZ)(w.Z,{})})]})]})}function $(e){var t=e.repl,n=(0,f.useState)(!1),r=n[0],i=n[1];return r?(0,c.tZ)(H,{repl:t,done:function(){return i(!1)}}):(0,c.BX)(b.G,{css:j.root,children:[(0,c.tZ)(Z.xv,{variant:"small",color:"dimmer",multiline:!1,children:"Template label"}),(0,c.BX)(b.G,{css:j.row,children:[t.templateLabel?(0,c.tZ)(Z.xv,{css:j.text,multiline:!1,children:t.templateLabel}):(0,c.tZ)(Z.xv,{color:"dimmest",css:j.text,multiline:!1,children:"No template label"}),(0,c.tZ)(g.h,{alt:"Edit",onClick:function(){return i(!0)},children:(0,c.tZ)(w.Z,{})})]})]})}var Y=n(49142),K=n(28518),Q=n(45157),J=n(23220),ee=n(34937),te=n(58745),ne=n(82108),re=n(81462),ie=n(88541),oe=n(43743),ae=n(63064),le=n(94716),ce=n(13233),ue=n(48330),se=n(65673),de=n(98707),fe=n(13979),pe=n(625),he=n(11116),ve=n(95308),me=n(66195),ge=n(97249),ye=n(57389),Ze=n(25198),be=n(66539),we=n(34938),xe=n(51631),ke=n(70196),Ce=n(12318),Se=n(72463),Te=n(43119),Ee=n(71440),Re=n(24635);function Ge(){var e=(0,Te.Z)(["\n  query PendingChanges($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        deployment {\n          id\n          activeRelease {\n            id\n            pendingChanges {\n              fileName\n              changeType\n            }\n          }\n        }\n      }\n    }\n  }\n"]);return Ge=function(){return e},e}var Ie={},_e=(0,Ee.Ps)(Ge());function De(e){var t,n,r=function(e){var t=(0,i.Z)({},Ie,e);return Re.a(_e,t)}({variables:{replId:e.replId},fetchPolicy:"cache-and-network",ssr:!1}),o=r.data,a=r.loading,l=r.error;if(a)return{loading:a,pendingChanges:null,error:null};if(l)return{loading:!1,pendingChanges:null,error:l};var c="Repl"===(null===o||void 0===o?void 0:o.repl.__typename)?o.repl:null;return c?{loading:!1,pendingChanges:(null===(t=c.deployment)||void 0===t||null===(n=t.activeRelease)||void 0===n?void 0:n.pendingChanges)||[],error:l}:{loading:!1,pendingChanges:null,error:new Error("Repl not found")}}var Be=n(7822),Pe=n(50216);function Ae(){var e=(0,Te.Z)(["\n  mutation RevertTemplateRelease($input: RevertReplReleaseInput!) {\n    revertReplRelease(input: $input) {\n      ... on Repl {\n        id\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n"]);return Ae=function(){return e},e}var Le={},Ue=(0,Ee.Ps)(Ae());function Xe(e){if(!e.data)return null;var t=e.data;if("revertReplRelease"in t){if("NotFoundError"===t.revertReplRelease.__typename||"UnauthorizedError"===t.revertReplRelease.__typename||"UserError"===t.revertReplRelease.__typename)return t.revertReplRelease.message;if("Repl"!==t.revertReplRelease.__typename)return"Something went wrong reverting your Template"}}function Me(){var e=(0,a.Z)(function(e){var t=(0,i.Z)({},Le,e);return Pe.D(Ue,t)}({refetchQueries:["ReplEnvironmentHeader"]}),2),t=e[0];function n(){return(n=(0,r.Z)((function(e){var n,r;return(0,l.__generator)(this,(function(i){switch(i.label){case 0:return n=e.input,[4,t({variables:{input:n}})];case 1:return[2,{data:(r=i.sent()).data,error:Xe(r)}]}}))}))).apply(this,arguments)}return{revertTemplateRelease:function(e){return n.apply(this,arguments)},state:e[1]}}var Ne=n(83005),Oe=n(52735),Fe=n(87978),We=n(56412),He=n(30504),Ve=b.K.form;function ze(e){if(0===e.length)return{message:"You cannot leave this empty."}}function je(e){var t,n,r=e.changeType;return r===xe.J5.NewFile?(t=y.TV.accentPositiveStronger,n="Added"):r===xe.J5.DeletedFile?(t=y.TV.accentNegativeStronger,n="Deleted"):(t=y.TV.foregroundDefault,n="Changed"),(0,c.tZ)(Z.xv,{variant:"small",css:[{color:t}],multiline:!1,children:n})}function qe(e){var t=e.pendingChangesState,n=e.isReplitTemplate;if(t.loading)return(0,c.tZ)(b.G,{css:[y.l0.center],children:(0,c.tZ)(I.Z,{})});if(t.error)return(0,c.tZ)(Ze.E,{icon:(0,c.tZ)(E.Z,{}),text:t.error.message||"Could not load modified files - please try again.",colorway:"negative"});if(!t.pendingChanges||0===t.pendingChanges.length)return n?null:(0,c.tZ)(Z.xv,{children:"No changes to publish. Come back when you have made changes to your Repl."});var r=t.pendingChanges,i=r.slice(0,15);return(0,c.BX)(b.G,{css:[{display:"grid",gridTemplateColumns:"1fr 1fr",gap:y.TV.space8}],children:[i.map((function(e){return(0,c.BX)(f.Fragment,{children:[(0,c.BX)(b.G,{css:[y.l0.rowWithGap(4),y.l0.align.center],children:[(0,c.tZ)(Ne.Z,{size:12,path:e.fileName}),(0,c.tZ)(Z.xv,{multiline:!1,children:e.fileName})]},e.fileName),(0,c.tZ)(je,{changeType:e.changeType})]},e.fileName)})),r.length>i.length&&(0,c.BX)(Z.xv,{multiline:!1,children:["And ",r.length-i.length," other files..."]})]})}function $e(e){var t=e.repl,n=Me(),i=function(){var e=(0,r.Z)((function(e){return(0,l.__generator)(this,(function(r){switch(r.label){case 0:return[4,n.revertTemplateRelease({input:{replId:t.id,releaseId:e}})];case 1:return r.sent(),[2]}}))}));return function(t){return e.apply(this,arguments)}}();return(0,c.BX)(b.G,{children:[(0,c.tZ)(Z.h4,{level:1,variant:"subheadBig",css:[y.l0.mb(16)],children:"Existing Releases"}),(0,c.tZ)(b.G,{css:[{display:"grid",gridTemplateColumns:"2fr 3fr 1fr",gap:y.TV.space8}],children:t.releases.items.map((function(e){var n,r;return(0,c.BX)(f.Fragment,{children:[(0,c.tZ)("span",{children:(0,We.Z)(new Date(e.timeCreated),"do MMM, hh:mm a")}),(0,c.tZ)("span",{children:e.description}),(0,c.tZ)("span",{style:{justifySelf:"end"},children:e.id===(null===(n=t.deployment)||void 0===n||null===(r=n.activeRelease)||void 0===r?void 0:r.id)?(0,c.tZ)("span",{css:[y.l0.p(4),{display:"flex"}],children:"(active)"}):(0,c.tZ)(S.zx,{text:"revert",colorway:"primary",small:!0,onClick:function(t){t.preventDefault(),i(e.id)}})})]},e.id)}))})]})}function Ye(e){var t=e.children;return(0,c.tZ)(b.G,{css:[y.l0.rowWithGap(8),y.l0.py(2)],children:t})}function Ke(e){var t,n,u,s,d,p,h=e.repl,v=(0,D.H)(),m=(0,a.Z)(f.useState(!1),2),g=m[0],w=m[1],x=(0,a.Z)(f.useState(!1),2),k=x[0],T=x[1],R=function(e){var t=De({replId:e.replId}),n=f.useMemo((function(){if(!t.pendingChanges)return[];var e=t.pendingChanges.slice().sort((function(e,t){return e.fileName.localeCompare(t.fileName)})).map((function(e){return{file:e,pathDepth:(0,Fe.U$)(e.fileName)}})).sort((function(e,t){return e.pathDepth-t.pathDepth})).map((function(e){return e.file}));return e}),[t.pendingChanges]);return(0,o.Z)((0,i.Z)({},t),{pendingChanges:n})}({replId:h.id}),G=(0,Be.r)(),I=(0,Ce.Y)("",ze),_=0!==(null===(t=R.pendingChanges)||void 0===t?void 0:t.length),B=(null===(n=h.user)||void 0===n?void 0:n.username)===He.IU||"templates"===(null===(u=h.user)||void 0===u?void 0:u.username),P=(0,f.useState)({ran:!1,tested:!1}),A=P[0],L=P[1];f.useEffect((function(){L({ran:!1,tested:!1})}),[L]);var U=Boolean(I.error||!B&&!_||G.loading||B&&(!A.ran||!A.tested)),X=B&&(null===(s=h.releases)||void 0===s||null===(d=s.items)||void 0===d?void 0:d.length)>1,M="";return I.error?M="Please fill out the form":B||_||(M="No changes to publish in this release"),g?(0,c.tZ)(Oe.q,{repl:h,isUpdate:!0}):k?(0,c.tZ)(b.G,{css:[y.l0.p(16),y.l0.colWithGap(16)],children:(0,c.tZ)($e,{repl:h})}):(0,c.BX)(Ve,{onSubmit:function(){var e=(0,r.Z)((function(e){return(0,l.__generator)(this,(function(t){switch(t.label){case 0:return e.preventDefault(),U||I.validate()?[2]:[4,G.createRelease({input:{replId:h.id,description:I.value}})];case 1:return t.sent().error||w(!0),[2]}}))}));return function(t){return e.apply(this,arguments)}}(),css:[y.l0.colWithGap(24),y.l0.p(16)],children:[(0,c.tZ)(Z.h4,{level:1,variant:"headerDefault",children:"Publish a new release"}),(0,c.BX)(b.G,{css:[y.l0.colWithGap(8)],children:[(0,c.tZ)(Z.h4,{level:2,variant:"subheadDefault",children:"Modified files"}),(0,c.tZ)(qe,{pendingChangesState:R,isReplitTemplate:B})]}),B||_?(0,c.BX)(b.G,{css:[y.l0.colWithGap(4)],children:[(0,c.tZ)("label",{htmlFor:v("description"),css:[y.l0.color.foregroundDimmer,{fontSize:y.TV.fontSizeSmall,lineHeight:y.TV.lineHeightSmall}],children:"Description"}),(0,c.tZ)(C.B,{id:v("description"),"aria-label":"Description",onChange:function(e){return I.setValue(e.target.value)},css:[y.l0.width("100%"),y.l0.minHeight(64),y.l0.maxHeight(128),{resize:"vertical"}],placeholder:"Explain what has changed about your template"}),I.error?(0,c.tZ)(Ze.E,{icon:(0,c.tZ)(E.Z,{}),text:null===(p=I.error)||void 0===p?void 0:p.message,colorway:"negative"}):null]}):null,B?(0,c.tZ)(Qe,{repl:h,state:A,onChange:function(e,t){return L((function(n){return(0,o.Z)((0,i.Z)({},n),(0,ye.Z)({},e,t))}))}}):null,(0,c.tZ)(b.G,{children:G.error?(0,c.tZ)(Ze.E,{icon:(0,c.tZ)(E.Z,{}),text:G.error,colorway:"negative"}):null}),(0,c.BX)(b.G,{css:[y.l0.rowWithGap(12),y.l0.justify.end],children:[X?(0,c.tZ)(S.zx,{text:"Revert to older",colorway:"negative",onClick:function(){return T(!0)}}):null,(0,c.tZ)(be.u,{tooltip:M,placement:"bottom",isDisabled:!M,children:(0,c.tZ)(S.zx,{text:"Publish release",type:"submit",colorway:"primary",iconLeft:(0,c.tZ)(Se.Z,{}),disabled:U})})]})]})}function Qe(e){var t,n,r,i=e.repl,o=e.state,a=e.onChange,l=(0,D.H)(),u=(0,ke.e9)(),s=u.data,d=u.loading,f=null===s||void 0===s||null===(t=s.currentUser)||void 0===t?void 0:t.username;return(0,c.BX)(b.G,{css:[y.l0.colWithGap(12)],children:[(0,c.tZ)(Z.h4,{level:2,children:"Official Replit Template publishing checklist"}),(0,c.BX)(b.G,{children:[(0,c.BX)(Ye,{children:[(0,c.tZ)(we.X,{id:l("ran"),checked:o.ran,onChange:function(e){return a("ran",e.target.checked)}}),(0,c.tZ)("label",{htmlFor:l("ran"),children:"Ran Repl:"}),(0,c.BX)("span",{children:["I ran the Repl to generate and cache package guesser result into"," ",(0,c.tZ)("code",{children:".upm"}),"."]})]}),(0,c.BX)(Ye,{children:[(0,c.tZ)(we.X,{id:l("tested"),checked:o.tested,onChange:function(e){return a("tested",e.target.checked)}}),(0,c.tZ)("label",{htmlFor:l("tested"),children:"Ran tests:"}),(0,c.BX)("span",{children:['I ran "Test working copy" for @',null===(n=i.user)||void 0===n?void 0:n.username,"/",i.slug," in"," ",(0,c.tZ)("a",{href:"https://tmpltester.util.repl.co/",target:"_blank",children:"template tester"}),". ",(0,c.tZ)("br",{}),"If there are no tests, consider adding one."]})]})]}),d||(null===(r=i.user)||void 0===r?void 0:r.username)!==f?null:(0,c.tZ)(Ze.E,{text:"You can't publish an update while impersonating. Add yourself as a member of the 'replit' team using CLUI tool 'add-remove-team-member', then open this Repl from your account.",colorway:"negative"})]})}var Je=n(80866),et=n(65897),tt=n(75920),nt=n(2041),rt=n(63128),it=n(51529),ot=n(57475),at=n(14654),lt=n(13548),ct=n(74230),ut=n(4421),st=n(26721),dt=n(14227),ft=n(90171),pt=n(70232),ht=n(65443),vt=n(90349),mt=n(86302),gt=n(77712),yt=n(8879),Zt=n(254),bt=n(35301),wt=n(88467),xt=n(8023),kt=n(32905);function Ct(e){var t=f.useRef(null),n=(0,a.Z)(f.useState(e.value),2),r=n[0],i=n[1],o=(0,a.Z)(f.useState(null),2),l=o[0],u=o[1],d=(0,Zt.Z)({onUpload:function(t){var n=t.url;e.onChange(n)},onUploadPreview:function(e){var t=e.dataUrl;i(t)},onError:function(e){u(e.message)}});f.useEffect((function(){i(e.value)}),[e.value]);var p=null===r||void 0===r?void 0:r.startsWith("data:"),h=32;return(0,c.BX)(bt.gC,{spacing:"var(--space-4)",children:[(0,c.BX)("div",{onClick:function(){var e;null===(e=t.current)||void 0===e||e.click()},"aria-label":r?"Change icon":"Upload an icon","data-microtip-position":"right",role:"tooltip",className:s().dynamic([["5de27f185cb9bc33",[h,h]]])+" "+((r?"update-icon":"add-icon")||""),children:[r?(0,c.BX)(c.HY,{children:[(0,c.tZ)(yt.Z,{iconUrl:r,size:h,alt:"icon"}),p?(0,c.tZ)("div",{className:s().dynamic([["5de27f185cb9bc33",[h,h]]])+" loading-state",children:(0,c.tZ)("div",{className:s().dynamic([["5de27f185cb9bc33",[h,h]]])+" loading-icon",children:(0,c.tZ)(I.Z,{})})}):(0,c.tZ)("div",{className:s().dynamic([["5de27f185cb9bc33",[h,h]]])+" hover-state",children:(0,c.tZ)(w.Z,{})})]}):(0,c.tZ)(wt.Z,{}),(0,c.tZ)("input",{ref:t,accept:xt.W9.join(","),type:"file",onChange:function(e){var t=e.target,n=t.validity,r=t.files;n.valid&&(null===r||void 0===r?void 0:r.length)&&(u(null),d.uploadImage(r[0],kt.N.TemplateIcon))},className:s().dynamic([["5de27f185cb9bc33",[h,h]]])})]}),l?(0,c.tZ)("div",{className:s().dynamic([["5de27f185cb9bc33",[h,h]]])+" error",children:l}):null,(0,c.tZ)(s(),{id:"5de27f185cb9bc33",dynamic:[h,h],children:".add-icon.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;border:1px dashed var(--foreground-dimmest);background-color:var(--background-root);width:".concat(h,"px;height:").concat(h,"px}.add-icon.__jsx-style-dynamic-selector:hover{color:var(--accent-primary-default);border-color:var(--accent-primary-default)}.add-icon.__jsx-style-dynamic-selector,.update-icon.__jsx-style-dynamic-selector{position:relative;cursor:pointer;background-color:var(--background-higher);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);padding:2px}.update-icon.__jsx-style-dynamic-selector:hover .hover-state.__jsx-style-dynamic-selector{opacity:.8}.hover-state.__jsx-style-dynamic-selector{opacity:0}.loading-state.__jsx-style-dynamic-selector{opacity:.8}.loading-icon.__jsx-style-dynamic-selector{-webkit-animation:rotate 1s linear infinite;-moz-animation:rotate 1s linear infinite;-o-animation:rotate 1s linear infinite;animation:rotate 1s linear infinite;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center}@-webkit-keyframes rotate{from{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-moz-keyframes rotate{from{-moz-transform:rotate(0deg);transform:rotate(0deg)}to{-moz-transform:rotate(360deg);transform:rotate(360deg)}}@-o-keyframes rotate{from{-o-transform:rotate(0deg);transform:rotate(0deg)}to{-o-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes rotate{from{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}.hover-state.__jsx-style-dynamic-selector,.loading-state.__jsx-style-dynamic-selector{color:var(--accent-primary-default);position:absolute;top:0;left:0;width:100%;height:100%;-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);background-color:var(--background-root);overflow:hidden;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center}input.__jsx-style-dynamic-selector{opacity:0;position:absolute;top:0;left:0;width:100%;height:100%;z-index:-1}.error.__jsx-style-dynamic-selector{font-size:var(--font-size-default);color:var(--accent-negative-default)}")})]})}var St=n(51523),Tt=n(62405),Et=n(84607),Rt=n(54873),Gt=n(22642),It=n(84815),_t=n(85686),Dt=n(97807),Bt=n(80731),Pt=n(70804),At=n(15544),Lt=n(60566),Ut=(0,m.X)({destructiveMenuItem:[y.l0.color.accentNegativeStronger]});function Xt(e){var t=e.repl,n=(0,ee.Z)(),r=(0,f.useMemo)((function(){return t.user?{text:t.user.username,css:[{"&, & span":y.l0.flex.shrink(1)}],iconLeft:(0,c.tZ)(vt.q,{src:t.user.image,username:t.user.username})}:{text:""}}),[t]);if(!t.user)return null;var a=(0,gt.Ru)(t.user);return n?(0,c.tZ)(S.zx,(0,o.Z)((0,i.Z)({},r),{onClick:function(){J.X.openExternalUrl(a.as)}})):(0,c.tZ)(mt.Z,(0,o.Z)((0,i.Z)({},r,a),{prefetch:!1}))}function Mt(e){var t=e.setActiveDialog,n=e.repl,r=e.isTemplate,a=e.updateIconUrl,l=e.showCloseButton,u=e.setIsEditing,s=e.updateReplInfo,d=(0,Dt.Z)(),f=Boolean(n.publishedAs),p=n.currentUserPermissions.publish,h=(0,ee.Z)(),v=!(null===n||void 0===n?void 0:n.publishedAs)&&!h,m=(null===n||void 0===n?void 0:n.publishedAs)===xe.O2.RegularRepl,x=[];n.currentUserPermissions.fork&&x.push({value:_t.$.Fork,label:"Fork",icon:(0,c.tZ)(Et.Z,{})}),n.publishedAs===xe.O2.RegularRepl&&p&&!h&&x.push({value:_t.$.Unpublish,label:"Unpublish",icon:(0,c.tZ)(Tt.Z,{})}),r&&p&&!h&&x.push({value:_t.$.UnpublishTemplate,label:"Unpublish template",icon:(0,c.tZ)(Tt.Z,{})}),f&&p&&!h&&x.push({value:_t.$.EditPublishSettings,label:"Edit Publish Settings",icon:(0,c.tZ)(w.Z,{})}),n.currentUserPermissions.delete&&x.push({isDestructive:!0,value:_t.$.Delete,label:"Delete",icon:(0,c.tZ)(Rt.Z,{})});var k=(null===n||void 0===n?void 0:n.isPrivate)||!(null===n||void 0===n?void 0:n.isRenamed),C="";return(null===n||void 0===n?void 0:n.isPrivate)?C="This Repl is private. You need to make it public in order to publish it!":(null===n||void 0===n?void 0:n.isRenamed)||(C="You need to give this Repl a name before publishing it."),(0,c.BX)(b.G,{css:[y.l0.colWithGap(8),y.l0.p(8)],children:[(0,c.BX)(b.G,{css:[y.l0.rowWithGap(8),y.l0.align.center,y.l0.justify.spaceBetween,(0,ye.Z)({},y.BC.max("mobileMax"),[y.l0.flex.columnReverse,y.l0.align.start,{gap:y.TV.space8}])],children:[(0,c.BX)(b.G,{css:[y.l0.rowWithGap(8),y.l0.center,y.l0.flex.shrink(1)],children:[(0,c.tZ)(Xt,{repl:n}),n.currentUserPermissions.changeIconUrl&&r?(0,c.tZ)(Ct,{value:n.iconUrl,onChange:a}):null]}),(0,c.BX)(b.G,{css:[y.l0.align.center,y.l0.rowWithGap(8),(0,ye.Z)({},y.BC.max("mobileMax"),{width:"100%",">*:not(div)":{flex:1}})],children:[h?null:(0,c.tZ)(mt.Z,(0,o.Z)((0,i.Z)({prefetch:!1},(0,St.j3)(n)),{iconLeft:(0,c.tZ)(It.Z,{}),colorway:"primary",text:"Cover page",target:"_blank"})),p&&v&&!d?(0,c.tZ)(be.u,{tooltip:C,isDisabled:!k,children:(0,c.tZ)(S.zx,{type:"button",iconLeft:(0,c.tZ)(wt.Z,{}),onClick:function(){t(_t.x.Publish)},dataCy:"ws-publish-button",text:"Publish",disabled:k})}):null,r&&!h?(0,c.tZ)(S.zx,{type:"button",iconLeft:(0,c.tZ)(wt.Z,{}),onClick:function(){return t(_t.x.UpdatePublishedTemplate)},text:"Update"}):null,m&&!h?(0,c.tZ)(S.zx,{type:"button",iconLeft:(0,c.tZ)(Gt.Z,{}),onClick:function(){return t(_t.x.UpdatePublishedRepl)},text:"Update"}):null,h?(0,c.tZ)(g.h,{alt:"Copy Repl URL",css:[y.l0.height(32),y.l0.width(32)],onClick:function(){(0,Lt.Z)(window.location.href)},children:(0,c.tZ)(At.Z,{})}):null,x.length>0&&(0,c.tZ)(Bt.ZE,{icon:(0,c.tZ)(Pt.Z,{size:16}),"aria-label":r?"Template Actions":"Repl Actions",cssProps:[y.l0.backgroundColor.backgroundDefault],placement:"bottom-end",onAction:function(e){switch(e){case _t.$.Fork:return void t(_t.x.ForkRepl);case _t.$.Unpublish:return void t(_t.x.Unpublish);case _t.$.UnpublishTemplate:return void t(_t.x.UnpublishTemplate);case _t.$.Delete:return void t(_t.x.DeleteRepl);case _t.$.EditPublishSettings:t(_t.x.EditPublishSettings)}},children:x.map((function(e){return(0,c.tZ)(Bt.ck,{children:(0,c.BX)(b.G,{css:[y.l0.rowWithGap(8),e.isDestructive&&Ut.destructiveMenuItem],children:[e.icon,(0,c.tZ)(b.G,{children:e.label})]})},e.value)}))}),l?(0,c.tZ)(g.h,{alt:"Close",tooltipHidden:!0,onClick:function(){s(),u(!1)},children:(0,c.tZ)(_.Z,{})}):null]})]}),n.lastPublishedAt&&p?(0,c.BX)(Z.xv,{variant:"small",color:"dimmest",multiline:!1,children:["Last published on"," ",new Date(n.lastPublishedAt).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})]}):null]})}var Nt=n(61029),Ot=n(55523),Ft={query:re.s8},Wt={query:K.BW};function Ht(e){var t=e.setIsEditing,n=e.showCloseButton,r=e.onDeployClick,i=(0,ue.Z)(),o=(0,ht.BZ)({variables:{replId:i}}),a=o.data,l=o.refetch,u="Repl"===(null===a||void 0===a?void 0:a.repl.__typename)?a.repl:null;return u?(0,c.tZ)(zt,{setIsEditing:t,showCloseButton:n,repl:u,refetch:l,onDeployClick:r}):(0,c.tZ)(b.G,{css:[y.l0.center,y.l0.p(16)],children:(0,c.tZ)(I.Z,{})})}var Vt=(0,m.X)({titleDescription:[y.l0.colWithGap(8),y.l0.p(8)]});function zt(e){var t,n,u,m,g,w,x=e.repl,k=e.showCloseButton,T=e.setIsEditing,E=e.onDeployClick,R=(0,ie.P5)({controlName:"flag-storage-utilization",logFlagToAnalytics:!1}),G=(0,ft.useRouter)(),I=(0,ee.Z)(),_=(0,a.Z)(f.useState(null),2),B=_[0],P=_[1],A=(0,a.Z)(f.useState(null),2),L=A[0],U=A[1],X=(0,a.Z)(f.useState(x.hasGpu),2),N=X[0],O=X[1],F=(0,a.Z)(f.useState(x.isRenamed?x.title:""),2),W=F[0],H=F[1],V=(0,a.Z)(f.useState(x.description||""),2),j=V[0],K=V[1],re=(0,a.Z)(f.useState(x.rawTemplateLabel),2),ue=re[0],ye=re[1],be=(0,ne.Z)({forceFetch:!1}).cycles,we=(0,ht.zu)().data,ke=(0,ce.Z)().showError,Ce=x.publishedAs===xe.O2.Template;f.useEffect((function(){K(x.description||"")}),[x.description]);var Se=(0,ae.Z)(),Te=(0,he.Z)(),Ee=f.useRef(x),Re=(0,a.Z)((0,ht.ap)({variables:{id:x.id},onCompleted:function(){I?J.X.closeCurrentWindow():G.push("/home","/~")},update:function(e,t){var n;(null===(n=t.data)||void 0===n?void 0:n.deleteRepl)&&(e.evict({id:e.identify(t.data.deleteRepl)}),e.gc())},onError:function(e){return ke((0,se.Z)(e.message))}}),1),Ge=Re[0],Ie=(0,a.Z)((0,ht.vi)({onError:function(e){return ke((0,se.Z)(e.message))},onCompleted:function(e){var t=e.updateRepl.repl,n=Ee.current,r={};n.description!==t.description&&(r.description=t.description),n.title!==t.title&&(r.title=t.title),n.url!==t.url&&(r.url=t.url,G.push({pathname:Te,query:{replUrl:t.url}},t.url+"#"+window.location.search)),n.isRenamed!==t.isRenamed&&(r.isRenamed=!!t.isRenamed),Ee.current=x,Object.keys(r).length>0&&T(!1)}}),2),_e=Ie[0],De=Ie[1].loading,Be=(0,a.Z)((0,oe.Z)(),2),Pe=Be[0],Ae=Be[1].loading,Le=(0,a.Z)((0,ht.pr)({onCompleted:function(e){"UserError"===e.setAlwaysOn.__typename&&ke(e.setAlwaysOn.message)},onError:function(e){return ke((0,se.Z)(e.message))},refetchQueries:[Ft,Wt]}),2),Ue=Le[0],Xe=Le[1].loading,Me=(0,a.Z)((0,ht.vN)({onCompleted:function(e){"UserError"!==e.setGpu.__typename&&"UnauthorizedError"!==e.setGpu.__typename?((0,dt.Z)({replId:x.id}).catch((function(e){d.Tb(e),Se.current&&ke("Something went wrong when adding a GPU to your Repl. Please refresh or try again.")})),Se.current&&"Repl"===e.setGpu.__typename&&O(e.setGpu.hasGpu)):ke(e.setGpu.message)},onError:function(e){d.Tb(e),ke((0,se.Z)(e.message))},refetchQueries:[Ft,Wt]}),2),Ne=Me[0],Oe=Me[1].loading,Fe=(0,a.Z)((0,ht.gF)({variables:{input:{replId:x.id}},onError:function(e){d.Tb(e),ke((0,se.Z)(e.message))}}),2),We=Fe[0],He=Fe[1],Ve=(0,ht.l9)({fetchPolicy:"cache-and-network",ssr:!1}),ze=Ve.data,je=Ve.loading,qe=Ve.error,$e=f.useMemo((function(){return!(!W||W===x.title)||(ue!==x.rawTemplateLabel||!(""===j&&!x.description)&&j!==x.description)}),[x,W,j,ue]),Ye=(0,le.Z)($e),Qe=f.useCallback((function(){if($e){var e={id:x.id,title:W.trim()||x.title,description:j,templateLabel:x.currentUserPermissions.changeTemplateLabel?ue:void 0};_e({variables:{input:e}})}}),[$e,_e,x,W,j,ue]),vt=(0,le.Z)(Qe);f.useLayoutEffect((function(){return function(){Ye.current&&vt.current()}}),[vt,Ye]);var mt,gt=f.useContext(te.G).isGooglePlayStoreTWA,yt=f.useCallback((function(e){switch(e){case"always-on":return"PowerUpCostsType"===x.powerUpCosts.__typename?x.powerUpCosts.alwaysOn.explanation:null;case"private":var t,n,r;return"UserPowerUpsTypes"===(null===ze||void 0===ze||null===(t=ze.currentUser)||void 0===t?void 0:t.userPowerUpsByType.__typename)?null===(r=null===(n=ze.currentUser.userPowerUpsByType)||void 0===n?void 0:n.privateRepls.cost)||void 0===r?void 0:r.explanation:null;case"gpu":var i,o;return"PowerUpCostsType"===x.powerUpCosts.__typename?null===(i=x.powerUpCosts)||void 0===i||null===(o=i.gpu)||void 0===o?void 0:o.explanation:null;default:(0,pt.Z)(e)}}),[ze,x]),Zt=function(e){Dt.goTo({step:"power_up_details",powerUpCategory:e})},bt=function(){_e({variables:{input:{id:x.id,isPrivate:!x.isPrivate}},optimisticResponse:{__typename:"RootMutationType",updateRepl:{__typename:"UpdateReplPayload",repl:(0,o.Z)((0,i.Z)({},x),{isPrivate:!x.isPrivate})}},refetchQueries:[{query:ht.WM,variables:{replId:x.id}},Ft,Wt]}),(0,pe.j)(pe.U3.PRIVATE_TOGGLED,{enabled:!x.isPrivate,source:"workspace_info_modal"})},wt=function(){if(!Xe){var e=!x.isAlwaysOn;Ue({variables:{replId:x.id,enabled:e},optimisticResponse:{__typename:"RootMutationType",setAlwaysOn:(0,o.Z)((0,i.Z)({},x),{__typename:"Repl",powerUpCosts:{__typename:"PowerUpCostsType",alwaysOn:{__typename:"PowerUpCostDetailType",cycles:0,explanation:xe.Ch.ActivateExistingOrder},gpu:{__typename:"PowerUpCostDetailType",cycles:0,explanation:xe.Ch.ActivateExistingOrder}},isAlwaysOn:e})}})}},xt=function(){if(!Oe){var e=!N;Ne({variables:{replId:x.id,enabled:e},optimisticResponse:{__typename:"RootMutationType",setGpu:(0,o.Z)((0,i.Z)({},x),{__typename:"Repl",hasGpu:e,powerUpCosts:{__typename:"PowerUpCostsType",gpu:{__typename:"PowerUpCostDetailType",cycles:0,explanation:xe.Ch.ActivateExistingOrder},alwaysOn:{__typename:"PowerUpCostDetailType",cycles:0,explanation:xe.Ch.ActivateExistingOrder}}})}})}},kt=x.isRenamed?"Name your Repl":"Default name: ".concat(x.title),Ct=[xe.Sy.Submit,xe.Sy.PublishTemplate,xe.Sy.EditTemplate].includes(x.workspaceCta),St=(0,D.H)(),Tt=(null===we||void 0===we||null===(t=we.currentUser)||void 0===t?void 0:t.id)===(null===(n=x.user)||void 0===n?void 0:n.id),Et=(0,de.jX)(null===we||void 0===we||null===(u=we.currentUser)||void 0===u?void 0:u.userSubscriptionType),Rt=0===be&&Tt&&!Et,Gt=(0,ie.P5)({controlName:"flag-gpus",logFlagToAnalytics:!1}),It=(0,ie.P5)({controlName:"flag-edit-repl-info-forms",logFlagToAnalytics:!1}),Dt=(0,me.P)({step:"not_shown"}),Bt="Team"===(null===(m=x.owner)||void 0===m?void 0:m.__typename),Pt=x.hostingDeploymentPermissions.canDeploy&&"function"===typeof E,At="/replEnvironmentDesktop"===Te&&Pt,Lt=(0,Ot.gg)(),Ut=Lt.isDeployableRepl,Xt=Lt.reason,Ht="HostingDeployment"===(null===(g=x.hostingDeployment)||void 0===g?void 0:g.__typename)&&x.hostingDeployment.currentBuild,zt=(0,ie.P5)({controlName:"flag-resources-in-header",logFlagToAnalytics:!1});return(0,c.tZ)("div",{css:{overflow:"auto",maxHeight:"80vh"},children:"not_shown"!==Dt.currentStep.step?(0,c.tZ)(ve.s,(0,o.Z)((0,i.Z)({},Dt),{analyticsContext:"workspace_info_modal",onRequestPowerUp:(0,r.Z)((function(){return(0,l.__generator)(this,(function(e){switch(L){case null:case"boost":case"hosting_tier":break;case"always-on":wt();break;case"private":bt();break;case"gpu":xt();break;default:(0,pt.Z)(L)}return[2]}))}))})):(0,c.BX)(c.HY,{children:[(0,c.tZ)(Mt,{repl:x,isTemplate:Ce,showCloseButton:k,setActiveDialog:P,setIsEditing:T,updateIconUrl:function(e){return _e({variables:{input:{id:x.id,iconUrl:e}},optimisticResponse:{__typename:"RootMutationType",updateRepl:{__typename:"UpdateReplPayload",repl:(0,o.Z)((0,i.Z)({},x),{iconUrl:e})}}})},updateReplInfo:Qe}),It?(0,c.BX)(b.G,{css:Vt.titleDescription,children:[(0,c.tZ)(z,{repl:x}),(0,c.tZ)(q,{repl:x}),Ce&&x.currentUserPermissions.changeTemplateLabel?(0,c.tZ)($,{repl:x}):null]}):(0,c.tZ)("form",{onSubmit:function(e){e.preventDefault(),Qe()},className:s().dynamic([["7206d0025a598b40",[x.currentUserPermissions.changeDescription?"auto":"not-allowed",ut.j.mobileMax]]]),children:(0,c.BX)(b.G,{css:[y.l0.align.stretch,y.l0.colWithGap(16)],children:[(0,c.BX)(rt.Tg,{background:"default",css:[y.l0.colWithGap(16)],children:[(0,c.tZ)(b.G,{css:[y.l0.flex.column],children:(0,c.BX)(b.G,{css:[y.l0.colWithGap(4)],children:[(0,c.BX)(b.G,{css:[y.l0.flex.row,y.l0.justify.spaceBetween,y.l0.align.end],children:[(0,c.tZ)("label",{htmlFor:St("name"),className:s().dynamic([["7206d0025a598b40",[x.currentUserPermissions.changeDescription?"auto":"not-allowed",ut.j.mobileMax]]]),children:(0,c.tZ)(Z.xv,{variant:"small",color:"dimmer",multiline:!1,children:"Name"})}),(0,c.tZ)(v.Z,{maxLength:60,value:W,hideLabel:!0})]}),(0,c.tZ)(C.II,{style:{cursor:x.currentUserPermissions.changeTitle?"auto":"not-allowed"},disabled:!x.currentUserPermissions.changeTitle,maxLength:60,placeholder:kt,value:W,onChange:function(e){return H(e.target.value)},spellCheck:!1,id:St("name"),dataCy:"ws-repl-info-title-input"})]})}),(0,c.tZ)(b.G,{css:[y.l0.flex.column],children:(0,c.BX)(b.G,{css:[y.l0.colWithGap(4)],children:[(0,c.BX)(b.G,{css:[y.l0.flex.row,y.l0.justify.spaceBetween,y.l0.align.end],children:[(0,c.tZ)("label",{htmlFor:St("description"),className:s().dynamic([["7206d0025a598b40",[x.currentUserPermissions.changeDescription?"auto":"not-allowed",ut.j.mobileMax]]]),children:(0,c.tZ)(Z.xv,{variant:"small",color:"dimmer",multiline:!1,children:"Description"})}),(0,c.tZ)(v.Z,{maxLength:M.p,value:j,hideLabel:!0})]}),(0,c.tZ)(C.B,{onKeyDown:function(e){13===e.keyCode&&(e.ctrlKey||e.metaKey)},disabled:!x.currentUserPermissions.changeDescription,maxLength:M.p,value:j,onChange:function(e){return K(e.target.value)},placeholder:"What does this Repl do?",css:[y.l0.minHeight(96),y.l0.maxHeight(256),{resize:"vertical"}],id:St("description")})]})})]}),Ce&&x.currentUserPermissions.changeTemplateLabel?(0,c.tZ)(rt.Tg,{background:"default",css:[y.l0.colWithGap(4)],children:(0,c.BX)(b.G,{css:[y.l0.colWithGap(4)],children:[(0,c.tZ)("label",{htmlFor:St("template"),className:s().dynamic([["7206d0025a598b40",[x.currentUserPermissions.changeDescription?"auto":"not-allowed",ut.j.mobileMax]]]),children:(0,c.tZ)(Z.xv,{color:"dimmer",variant:"small",multiline:!1,children:"Template label"})}),(0,c.tZ)(C.II,{value:ue,maxLength:60,placeholder:"Template label",spellCheck:!1,onChange:function(e){return ye(e.target.value)},id:St("template")})]})}):null]})}),Ct?null:(0,c.BX)(b.G,{css:[y.l0.colWithGap(24),y.l0.p(8),y.l0.pt(0)],children:[!gt&&Rt?(0,c.tZ)(S.zx,{iconLeft:(0,c.tZ)(it.Z,{}),type:"button",colorway:"primary",stretch:!0,onClick:function(){(0,pe.j)(pe.U3.UPGRADE_SELECTED,{source:"workspace_info_modal"}),P(_t.x.BuyCycles)},text:"Power Up this Repl"}):null,x.currentUserPermissions.changePrivacy===xe.HA.Allowed&&(0,c.BX)(b.G,{css:[y.l0.colWithGap(8)],children:[(0,c.BX)(tt.hE,{tag:"fieldset",name:St("privacy"),value:x.isPrivate.toString(),onChange:function(){var e,t,n,r;if(!De)if(x.isPrivate)bt();else if(x.currentUserPermissions.changePrivacy===xe.HA.Allowed&&null!=(null===(e=x.user)||void 0===e?void 0:e.id)&&null!=(null===we||void 0===we||null===(t=we.currentUser)||void 0===t?void 0:t.id)&&x.user.id!==we.currentUser.id)bt();else{var i="UserPowerUpsTypes"===(null===ze||void 0===ze||null===(n=ze.currentUser)||void 0===n?void 0:n.userPowerUpsByType.__typename)&&(null===(r=ze.currentUser.userPowerUpsByType)||void 0===r?void 0:r.privateRepls.active),o=yt("private");if(null==o||je)ke("You're too fast for us! Please try again in a moment.");else{if(!qe)return(0,pe.j)(pe.U3.POWER_UP_TOGGLE_REQUESTED,{powerUp:"private",setting:!x.isPrivate,source:"workspace_info_modal",costExplanation:o}),i?void bt():(U("private"),void P(_t.x.PowerUp));ke("This action is currently unavailable. Please refresh and try again.")}}},row:!0,primary:!0,stretch:!0,children:[(0,c.tZ)(tt.rK,{id:St("false"),value:"false",text:"Public",icon:(0,c.tZ)(at.Z,{})}),(0,c.tZ)(tt.rK,{id:St("true"),value:"true",text:"Private",icon:(0,c.tZ)(lt.Z,{})})]}),(0,c.tZ)(Z.xv,{variant:"small",color:"dimmest",children:(0,fe.Z)(x.isPrivate,Bt)})]}),zt||x.currentUserPermissions.changeAlwaysOn===xe.fn.Disallowed?null:(0,c.tZ)(Nt.Z,{isAlwaysOn:x.isAlwaysOn,isAlwaysOnLoading:Xe||null==yt("always-on"),isGpu:N,isGpuLoading:Boolean(Oe||null==yt("gpu")),canGpu:Gt,onAlwaysOnChange:function(){var e=yt("always-on");U("always-on"),null==e||Xe?ke("You're too fast for us! Please try again in a moment."):qe?ke("This action is currently unavailable. Please refresh and try again."):((0,pe.j)(pe.U3.POWER_UP_TOGGLE_REQUESTED,{powerUp:"always-on",setting:!x.isAlwaysOn,source:"workspace_info_modal",costExplanation:e}),x.isAlwaysOn||"NEEDS_CYCLES"!==e&&"SPEND_CYCLES"!==e?wt():Zt("always-on"))},onGpuChange:function(){var e=yt("gpu");U("gpu"),null!=e?qe?ke("This action is currently unavailable. Please refresh and try again."):((0,pe.j)(pe.U3.POWER_UP_TOGGLE_REQUESTED,{powerUp:"gpu",setting:!N,source:"workspace_info_modal",costExplanation:e}),N||"NEEDS_CYCLES"!==e&&"SPEND_CYCLES"!==e?xt():Zt("gpu")):ke("You're too fast for us! Please try again in a moment.")},showManageStorageModal:function(){return P(_t.x.ManageStorage)},goToPowerUpDetails:function(e){return Dt.goTo({step:"power_up_details",powerUpCategory:e})}}),At?(0,c.BX)(b.G,{css:y.l0.colWithGap(8),children:[(0,c.tZ)(S.zx,{text:Ht?"Redeploy your project":"Deploy your project",iconLeft:(0,c.tZ)(ot.Z,{}),colorway:Ht?void 0:"primary",onClick:function(){E(),Ht||(0,pe.j)(pe.U3.DEPLOY_PROJECT_SELECTED,{source:"workspace_info_modal"})},disabled:!Ut}),Ut?null:(0,c.tZ)(Ze.E,{text:Xt})]}):null]}),(0,c.tZ)(nt.u,{isOpen:B===_t.x.DeleteRepl,onRequestClose:function(){return P(null)},children:(0,c.tZ)(h.Z,{delete:Ge,entityType:"Repl",hideModal:function(){return P(null)}})}),(0,c.tZ)(Q.Z,{context:"workspace_info_modal",isOpen:B===_t.x.PowerUp,uponPurchaseGoTo:"workspace",replTitle:x.title,onRequestClose:function(e){"InsertDeploymentsPane"===e&&Pt&&(E(),(0,pe.j)(pe.U3.DEPLOY_PROJECT_SELECTED,{source:"power_up_modal"})),P(null)},onRequestPowerUp:(0,r.Z)((function(){return(0,l.__generator)(this,(function(e){switch(e.label){case 0:switch(L){case null:case"boost":case"hosting_tier":break;case"always-on":wt();break;case"private":bt();break;case"gpu":xt();break;default:(0,pt.Z)(L)}return[4,new Promise((function(e){return setTimeout(e,3e3)}))];case 1:return e.sent(),P(null),[2]}}))})),powerUp:null!==L&&void 0!==L?L:"boost",canDeploy:At},B),R?(0,c.tZ)(ct.s,{isOpen:B===_t.x.ManageStorage,onRequestClose:function(){return P(null)}}):null,(0,c.tZ)(st.Z,{initialTab:"default",isOpen:B===_t.x.BuyCycles,onRequestClose:function(){return P(null)},uponPurchaseGoTo:"workspace",context:"workspace_info_modal",replTitle:x.title}),(0,c.tZ)(nt.u,{isOpen:B===_t.x.ForkRepl,onRequestClose:function(){return P(null)},children:(0,c.tZ)(Y.Z,{onFork:function(e,t,n,r){Pe({originId:x.id,teamId:e,title:t,description:n,isPrivate:r,forkToPersonal:!e,trackingData:{forkSource:"editReplPopoverMenuItem"}})},initialTitle:x.title,initialDescription:null!==(mt=x.description)&&void 0!==mt?mt:"",initialPrivacy:x.isPrivate,hideModal:function(){Ae||P(null)},teamContext:null===(w=x.user)||void 0===w?void 0:w.username})}),(0,c.tZ)(nt.u,{isOpen:B===_t.x.Unpublish,onRequestClose:function(){return P(null)},children:(0,c.tZ)(et.Z,{repl:x,source:"replEnvironment",onDone:function(){P(null)}})}),(0,c.tZ)(nt.u,{isOpen:B===_t.x.UnpublishTemplate,onRequestClose:function(){return P(null)},children:(0,c.tZ)(p.Z,{confirmLabel:"Yes, unpublish this Template",isDestructive:!0,title:"Unpublish Template",onCancel:function(){return P(null)},onConfirm:function(){He.loading||(We(),P(null))},children:"Your Repl will no longer be discoverable on Templates. You can republish again at any time, and all of your comments or reactions will stick around."})}),(0,c.tZ)(nt.u,{isOpen:B===_t.x.EditPublishSettings,onRequestClose:function(){return P(null)},noPadding:!0,maxWidth:872,fitContent:!0,children:(0,c.tZ)(ge.Z,{source:"replEnvironment",replId:x.id})}),(0,c.tZ)(nt.u,{isOpen:B===_t.x.Publish,onRequestClose:function(){return P(null)},noPadding:!0,maxWidth:872,fitContent:!0,children:(0,c.tZ)(ge.Z,{source:"replEnvironment",replId:x.id})}),(0,c.tZ)(nt.u,{isOpen:B===_t.x.UpdatePublishedTemplate,onRequestClose:function(){return P(null)},noPadding:!0,children:(0,c.tZ)(Ke,{repl:x})}),(0,c.tZ)(nt.u,{isOpen:B===_t.x.UpdatePublishedRepl,onRequestClose:function(){return P(null)},children:(0,c.tZ)(Je.Z,{repl:x,onDone:function(){return P(null)},source:"replEnvironment"})}),(0,c.tZ)(s(),{id:"7206d0025a598b40",dynamic:[x.currentUserPermissions.changeDescription?"auto":"not-allowed",ut.j.mobileMax],children:"form.__jsx-style-dynamic-selector{padding:var(--space-8)}textarea.__jsx-style-dynamic-selector{min-height:42px;height:200px;resize:none;cursor:".concat(x.currentUserPermissions.changeDescription?"auto":"not-allowed",";font-size:var(--font-size-default);font-family:var(--font-family-default);padding:var(--space-8);display:block;width:100%;-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);border:1px solid var(--outline-dimmest);-webkit-transition:.2s border-color;-moz-transition:.2s border-color;-o-transition:.2s border-color;transition:.2s border-color;background-color:transparent;color:var(--foreground-default)}textarea.__jsx-style-dynamic-selector:hover{border-color:var(--accent-primary-dimmer)}textarea.__jsx-style-dynamic-selector:active,textarea.__jsx-style-dynamic-selector:focus{border-color:var(--accent-primary-default)}textarea.__jsx-style-dynamic-selector:disabled{opacity:.5}textarea.__jsx-style-dynamic-selector:focus,textarea.__jsx-style-dynamic-selector:active{outline:none;border-color:var(--accent-primary-default)}.edit-repl-actions.__jsx-style-dynamic-selector{padding:0 var(--space-16)}.menu-item.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;color:var(--foreground-default)}.delete-menu-item.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;color:var(--accent-negative-default)}.icon-container.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;padding:0 var(--space-4)}.menu-text.__jsx-style-dynamic-selector{padding:0 var(--space-4)}.upgrade-button-container.__jsx-style-dynamic-selector{padding:0 var(--space-8)}.upgrade-button-container.__jsx-style-dynamic-selector .sentence-case{text-transform:none}.upgrade-text-container.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;padding:var(--space-8);-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center}.always-on-indicator.__jsx-style-dynamic-selector{margin-left:var(--space-4);margin-right:var(--space-8);width:8px;height:8px;-webkit-border-radius:100%;-moz-border-radius:100%;border-radius:100%;background-color:var(--accent-green-default);-webkit-box-shadow:0 0 12px var(--accent-green-default);-moz-box-shadow:0 0 12px var(--accent-green-default);box-shadow:0 0 12px var(--accent-green-default)}@media screen and (max-width:").concat(ut.j.mobileMax,"px){.edit-repl.__jsx-style-dynamic-selector{width:80vw}}")})]})})}},75982:function(e,t,n){n.d(t,{s:function(){return l}});var r=n(43119),i=n(71440),o=n(3839);function a(){var e=(0,r.Z)(["\n  fragment WorkspaceHeaderReplMetadataRepl on Repl {\n    id\n    title\n    iconUrl\n    user {\n      id\n      ...UserLinkUser\n    }\n  }\n  ","\n"]);return a=function(){return e},e}var l=(0,i.Ps)(a(),o._)},21835:function(e,t,n){n.d(t,{Z:function(){return d}});var r=n(57389),i=n(74985),o=(n(50959),n(82568)),a=n(39541),l=n(61284),c=n(85368),u=n(75863),s=(0,o.X)({metadata:[a.l0.rowWithGap(6),a.l0.align.center,a.l0.flex.growAndShrink(1)],text:[a.l0.flex.shrink(1),a.l0.flex.row],usernameOuter:{flexShrink:1,display:"grid",transition:"grid-template-columns 80ms ease-out"},usernameInner:[a.l0.flex.shrink(1),a.l0.rowWithGap(1),a.l0.overflow("hidden")],username:[a.l0.maxWidth(160),a.l0.truncate,a.l0.flex.shrink(1)],title:[a.l0.flex.shrink(1),a.l0.truncate]});function d(e){var t=e.repl,n=t.user?(0,i.tZ)(c.G,{css:s.usernameOuter,"data-repl-info-username":!0,children:(0,i.BX)(c.G,{css:s.usernameInner,children:[(0,i.tZ)(l.xv,{multiline:!1,css:s.username,children:t.user.username}),(0,i.tZ)(l.xv,{multiline:!1,color:"dimmest",children:"/"})]})}):null;return(0,i.BX)(c.G,{css:s.metadata,children:[(0,i.tZ)(c.G,{css:[a.l0.display.none,(0,r.Z)({},a.BC.min("tabletMax"),[a.l0.display.flex])],children:(0,i.tZ)(u.ZP,{iconUrl:t.iconUrl,size:20,alt:"Repl icon"})}),(0,i.BX)(c.G,{css:s.text,children:[n,(0,i.tZ)(l.xv,{multiline:!1,css:s.title,"data-cy":"header-repl-title",children:t.title})]})]})}},61029:function(e,t,n){n.d(t,{Z:function(){return X}});var r=n(74985),i=n(41102),o=n(18200),a=n(88541),l=n(80572),c=n(44333),u=n(61284),s=n(85368),d=n(39541),f=n(31992),p=n(82568),h=n(87076),v=n(96351),m=n(23127),g=n(70523),y=n(92683),Z=n(5884),b=n(27691),w=n(32104),x=n(50959),k=n(48330),C=n(33814),S=(0,p.X)({self:[d.l0.display.flex,d.l0.flex.row,d.l0.align.center,d.l0.justify.spaceBetween],powerupInfo:[d.l0.colWithGap(2)],powerupLabel:[d.l0.rowWithGap(4),d.l0.align.center],editButtonWrapper:[d.l0.rowWithGap(8),d.l0.align.center],pill:[d.l0.border({style:"none"}),d.l0.backgroundColor.foregroundDimmer,d.l0.color.backgroundRoot,d.l0.maxWidth("fit-content")],loadingPill:[d.l0.border({style:"none"}),d.l0.fontWeight.medium,d.l0.backgroundColor.foregroundDimmer,d.l0.color.backgroundRoot,d.l0.maxWidth("fit-content"),b.p.backgroundPulse(d.TV.foregroundDimmer,d.TV.foregroundDimmest),b.p.foregroundPulse(d.TV.backgroundRoot,d.TV.backgroundHigher)],editButton:[d.l0.p(16),d.l0.backgroundColor.backgroundHigher]}),T=function(e){var t,n=e.goToPowerUpDetails,i=(0,g.Z)().dataAtom.disk,o=i.currentAtom,a=i.totalAtom,l=(0,k.Z)(),c=(0,y.Dv)(o),d=(0,y.Dv)(a),p=(0,x.useState)(!1),b=p[0],T=p[1],E=(0,Z.Pf)({pollInterval:3e3,onError:function(e){I()}}),R=E.data,G=E.loading,I=E.stopPolling;(0,x.useEffect)((function(){var e,t,n;return R&&"AccountStorageUtilization"!==(null===(e=R.currentUser)||void 0===e?void 0:e.storageInfo.accountStorageUtilization.__typename)&&I(),R&&"AccountStorageUtilization"===(null===(t=R.currentUser)||void 0===t?void 0:t.storageInfo.accountStorageUtilization.__typename)&&"ReplStorageUtilization"===(null===(n=R.currentUser.storageInfo.accountStorageUtilization.perRepl.find((function(e){return e.repl.id===l})))||void 0===n?void 0:n.__typename)&&(T(!0),I()),function(){I()}}),[R,l,I]);var _=null;if(R&&"CurrentUser"===(null===(t=R.currentUser)||void 0===t?void 0:t.__typename)&&"StorageQuota"===R.currentUser.storageInfo.storageQuota.__typename&&"AccountStorageUtilization"===R.currentUser.storageInfo.accountStorageUtilization.__typename){var D=R.currentUser.storageInfo,B=D.storageQuota.quota,P=D.accountStorageUtilization.total;_="0"===B?P:B}var A=1024*c*1024,L=1024*d*1024,U="Bytes",X="".concat((0,f.fZ)(A,{precision:1,resourceUsageType:U})),M=G||"string"!==typeof _?"".concat((0,f.fZ)(L,{precision:1,resourceUsageType:U})," Repl"):"".concat((0,f.fZ)(Number(_),{precision:1,resourceUsageType:U})," Account");return(0,r.BX)(s.G,{css:S.self,tag:"li",children:[(0,r.BX)(s.G,{css:S.powerupInfo,children:[(0,r.BX)(s.G,{css:S.powerupLabel,children:[(0,r.tZ)(m.Z,{size:16})," ",(0,r.tZ)(u.xv,{multiline:!1,children:"Storage"})]}),(0,r.tZ)(u.xv,{variant:"small",color:"dimmer",multiline:!1,children:"Manage disk space"})]}),(0,r.BX)(s.G,{css:S.editButtonWrapper,children:[G||!b?(0,r.tZ)(v.D,{iconLeft:(0,r.tZ)(w.Z,{size:16}),text:"Loading...",css:S.loadingPill}):(0,r.tZ)(v.D,{text:"".concat(X,"/").concat(M),css:S.pill}),(0,r.tZ)(h.h,{size:24,css:S.editButton,alt:"Manage storage",onClick:function(){n("storage")},children:(0,r.tZ)(C.Z,{})})]})]})},E=n(61097),R=n(94630),G=n(97128),I=n(625),_=n(1050),D=n(26752),B=n(51631),P=n(35536);function A(e){var t=e.onRequestPowerUpModal,n=(0,k.Z)(),i=(0,P.ky)({variables:{replId:n}}),o=i.data;return i.loading?(0,r.tZ)(w.Z,{}):"Repl"!==(null===o||void 0===o?void 0:o.repl.__typename)||"ReplPowerUpTypes"!==o.repl.powerUps.__typename?null:o.repl.powerUps.boost.sku===B.ri.Off?(0,r.tZ)(c.r,{"aria-label":"Enable Boost",isSelected:!1,onChange:t}):(0,r.BX)(s.G,{css:[d.l0.rowWithGap(8),d.l0.align.center],children:[(0,r.tZ)(G.Z,{variant:o.repl.powerUps.boost.sku,extraText:"Boosted"}),(0,r.tZ)(h.h,{size:24,css:[d.l0.p(16),{backgroundColor:d.TV.backgroundHigher}],alt:"Change boost",onClick:t,children:(0,r.tZ)(_.Z,{})})]})}function L(e){var t=e.context,n=e.goToPowerUpDetails;return(0,r.tZ)(r.HY,{children:(0,r.BX)(s.G,{tag:"li",css:[d.l0.display.flex,d.l0.flex.row,d.l0.align.center,d.l0.justify.spaceBetween],children:[(0,r.BX)(s.G,{css:[d.l0.colWithGap(2)],children:[(0,r.BX)(s.G,{css:[d.l0.rowWithGap(4),d.l0.align.center],children:[(0,r.tZ)(D.Z,{size:16})," ",(0,r.tZ)(s.G,{css:[d.l0.rowWithGap(8),d.l0.align.center],children:(0,r.tZ)(u.xv,{multiline:!1,children:o.S0.boost.name})}),(0,r.tZ)(l.Z,{context:t,powerUp:"boost"})]}),(0,r.tZ)(u.xv,{variant:"small",color:"dimmer",multiline:!1,children:o.S0.boost.description})]}),(0,r.tZ)(A,{onRequestPowerUpModal:function(){(0,I.j)(I.U3.POWER_UP_TOGGLE_REQUESTED,{powerUp:"boost",source:t}),n("boost")}})]})})}var U=n(56169);function X(e){var t=e.isAlwaysOn,n=e.isAlwaysOnLoading,f=e.isGpu,p=e.isGpuLoading,h=e.canGpu,v=e.onAlwaysOnChange,m=e.onGpuChange,g=e.goToPowerUpDetails,y=(0,a.P5)({controlName:"flag-storage-utilization",logFlagToAnalytics:!1}),Z=(0,U.H)(),b=Z("always-on"),w=Z("gpu");return(0,r.BX)(s.G,{css:[d.l0.colWithGap(16)],tag:"ul","aria-label":"Repl Powerups",children:[(0,r.BX)(s.G,{tag:"li",css:[d.l0.display.flex,d.l0.flex.row,d.l0.align.center,d.l0.justify.spaceBetween],children:[(0,r.BX)(s.G,{css:[d.l0.colWithGap(2)],children:[(0,r.BX)(s.G,{css:[d.l0.rowWithGap(4),d.l0.align.center],children:[(0,r.tZ)(R.Z,{size:16})," ",(0,r.tZ)(u.xv,{id:b,multiline:!1,children:o.S0["always-on"].name}),(0,r.tZ)(l.Z,{context:"workspace_info_modal",powerUp:"always-on"})]}),(0,r.tZ)(u.xv,{variant:"small",color:"dimmer",multiline:!1,children:o.S0["always-on"].description})]}),(0,r.tZ)(c.r,{"aria-labelledby":b,dataCy:"ws-always-on-toggle",isSelected:t,onChange:function(){v()},isReadOnly:n,colorway:n?"grey":"primary"})]}),(0,r.tZ)(L,{context:"workspace_info_modal",goToPowerUpDetails:g}),h?(0,r.BX)(s.G,{tag:"li",css:[d.l0.display.flex,d.l0.flex.row,d.l0.align.center,d.l0.justify.spaceBetween],children:[(0,r.BX)(s.G,{css:[d.l0.colWithGap(2)],children:[(0,r.BX)(s.G,{css:[d.l0.rowWithGap(4),d.l0.align.center],children:[(0,r.tZ)(E.Z,{size:16})," ",(0,r.tZ)(u.xv,{id:w,multiline:!1,children:"GPU"}),(0,r.tZ)(i.Z,{content:"Beta",link:"https://replit.com/@util/GPU-Beta-Resources?v=1#README.md",tooltip:"GPUs are currently in beta. Some things may not work as expected yet."})]}),(0,r.tZ)(u.xv,{variant:"small",color:"dimmer",multiline:!1,children:"Add an NVIDIA Tesla K80 GPU to the Repl"})]}),(0,r.tZ)(c.r,{"aria-labelledby":w,dataCy:"ws-gpu-toggle",isSelected:f,onChange:function(){m()},isDisabled:p,colorway:p?"grey":"primary"})]}):null,y?(0,r.tZ)(T,{goToPowerUpDetails:g}):null]})}},85686:function(e,t,n){var r,i;n.d(t,{$:function(){return i},x:function(){return r}}),function(e){e.DeleteRepl="DeleteRepl",e.PowerUp="PowerUp",e.BuyCycles="BuyCycles",e.ForkRepl="ForkRepl",e.Unpublish="Unpublish",e.UnpublishTemplate="UnpublishTemplate",e.EditPublishSettings="EditPublishSettings",e.Publish="Publish",e.UpdatePublishedTemplate="UpdatePublishedTemplate",e.UpdatePublishedRepl="UpdatePublishedRepl",e.ManageStorage="ManageStorage"}(r||(r={})),function(e){e.Fork="Fork",e.Delete="Delete",e.Unpublish="Unpublish",e.UnpublishTemplate="UnpublishTemplate",e.EditPublishSettings="EditPublishSettings"}(i||(i={}))},80587:function(e,t,n){n.d(t,{Z:function(){return pe}});var r=n(72006),i=n(74985),o=n(4405),a=n(43312),l=n(82568),c=n(39541),u=n(61284),s=n(85368),d=n(84563),f=n(77637),p=n(43119),h=n(91398),v=n(92683),m=n(50959),g=n(27691),y=n(87076),Z=n(18171),b=n(93658),w=n(76735);function x(){var e=(0,p.Z)(["from { opacity: 0 } to { opacity: 1 }"]);return x=function(){return e},e}var k=(0,l.X)({self:[c.l0.flex.row,c.l0.flex.wrap,c.l0.justify.spaceBetween,c.l0.align.center],text:[c.l0.rowWithGap(2),c.l0.align.center,c.l0.minHeight(c.TV.space24)],textLoading:[c.l0.height(16),c.l0.width(c.TV.space64),g.p.backgroundPulse(),c.l0.borderRadius(4)],textLoadingWrapper:[c.l0.height("fit-content"),{animation:"".concat((0,a.F4)(x())," 120ms forwards ease-out alternate")}],textWarn:[c.l0.rowWithGap(4),c.l0.align.center,c.l0.px(4)],textPadding:[c.l0.height(16),{lineHeight:"16px"}],textHighlight:[c.l0.color.accentPrimaryStronger],selfMini:[c.l0.rowWithGap(4),c.l0.align.center]});function C(e){var t,n=e.title,r=e.description,o=e.limitStatusAtom,a=e.limitTextSecondaryAtom,l=e.mini,d=e.loading,p=(0,f.Z)(e,["title","description","limitStatusAtom","limitTextSecondaryAtom","mini","loading"]),g=(0,m.useMemo)((function(){return null!==(t=p.limitTextAtom)&&void 0!==t?t:(0,h.cn)(null)}),[p.limitTextAtom]),x=(0,v.Dv)((0,Z.Z)((function(){return(0,h.cn)((function(e){return"At limit"===e(o)||"Close to limit"===e(o)}))}),[o]));if(l)return(0,i.BX)(s.G,{css:k.selfMini,children:[(0,i.tZ)(u.xv,{variant:"small",css:c.l0.color.foregroundDimmer,multiline:!1,children:n}),x?(0,i.tZ)(w.Z,{color:c.TV.orangeStronger}):null]});var C=null;return C=d?(0,i.tZ)(s.G,{css:k.textLoading}):(0,i.tZ)(u.xv,{variant:"small",css:k.textPadding,multiline:!1,children:a?(0,i.BX)(i.HY,{children:[(0,i.BX)("span",{css:k.textHighlight,children:[" ",(0,i.tZ)(S,{text:g})]})," + ",(0,i.tZ)(S,{text:a})]}):(0,i.tZ)(S,{text:g})}),(0,i.BX)(s.G,{css:k.self,children:[(0,i.BX)(s.G,{css:k.text,children:[(0,i.tZ)(u.xv,{multiline:!1,children:n}),(0,i.tZ)(y.h,{alt:r,size:24,children:(0,i.tZ)(b.Z,{})}),x?(0,i.BX)(s.G,{css:k.textWarn,children:[(0,i.tZ)(w.Z,{color:c.TV.orangeStronger}),(0,i.tZ)(u.xv,{variant:"small",css:k.textPadding,multiline:!1,children:(0,i.tZ)(S,{text:o})})]}):null]}),(0,i.tZ)(s.G,{css:k.textLoadingWrapper,children:C},d?"loadingResources":"finishedLoadingResources")]})}function S(e){var t=e.text,n=(0,v.Dv)(t);return null===n?null:(0,i.tZ)(i.HY,{children:n})}var T=n(45317);function E(e,t){if(void 0===e)return"empty";var n=e/t;return n>=1?"At limit":n>=.9?"Close to limit":"fine"}function R(e){return"At limit"===e?T.TV.accentNegativeDefault:"Close to limit"===e?T.TV.orangeDefault:void 0}function G(e,t,n,r,i){return"empty"===e||void 0===t?"":"vCPU"===i?Math.round(100*Math.min(1,t/n))+"% of "+r+" vCPUs":Math.round(t).toLocaleString()+"/"+Math.round(n).toLocaleString()+" "+i}n(33594),c.l0.rowWithGap(4),c.l0.align.center,c.l0.color.foregroundDimmer,c.l0.cursor.pointer,c.l0.colWithGap(4),c.l0.py(8),c.l0.border({direction:"bottom",color:c.TV.outlineDefault,width:1});var I={self:(0,a.iv)([c.l0.width(8),c.l0.height(8),c.l0.borderRadius(8),c.l0.flex.shrink(0)])};function _(e){var t=e.variant;return(0,i.tZ)("div",{css:[I.self,"primary"===t?c.l0.backgroundColor.accentPrimaryDefault:c.l0.backgroundColor.outlineDefault]})}c.l0.rowWithGap(8),c.l0.align.center,c.l0.flex.shrink(1);var D=(0,l.X)({self:[c.l0.colWithGap(2)],selfMini:[c.l0.colWithGap(4),c.l0.flex.growAndShrink(2),{flexBasis:32}],selfMiniBar:[c.l0.height(8)],selfTiny:[c.l0.width(48),c.l0.height(4)],selfTinyBar:{borderWidth:"0px",backgroundColor:T.TV.backgroundHigher}});function B(e){var t=e.totalAtom,n=e.currentAtom,a=e.currentSecondaryAtom,l=e.measure,c=e.cpuCountAtom,u=e.title,d=e.description,f=(0,Z.Z)((function(){return(0,h.cn)((function(e){return E(e(n),e(t))}))}),[n,t]),p=(0,Z.Z)((function(){return(0,h.cn)((function(e){return G(e(f),e(n),e(t),c&&e(c),l)}))}),[f,n,t,c,l]),v=(0,Z.Z)((function(){return(0,h.cn)((function(e){return a?G(e(f),e(a),e(t),c&&e(c),l):""}))}),[f,a,t,c,l]),m=(0,Z.Z)((function(){return(0,h.cn)((function(e){return a?Math.round(e(n)).toString():e(p)}))}),[a,n,p]);return e.tiny?(0,i.tZ)(s.G,{css:D.selfTiny,children:(0,i.tZ)(A,(0,o.Z)((0,r.Z)({},e),{limitStatusAtom:f,limitTextAtom:p,limitTextSecondaryAtom:v}))}):(0,i.BX)(s.G,{css:e.mini?D.selfMini:D.self,children:[(0,i.tZ)(C,(0,o.Z)((0,r.Z)({title:u,description:d,limitStatusAtom:f,limitTextAtom:m},a?{limitTextSecondaryAtom:v}:{}),{mini:e.mini,loading:e.loading})),(0,i.tZ)(A,(0,o.Z)((0,r.Z)({},e),{limitStatusAtom:f,limitTextAtom:p,limitTextSecondaryAtom:v}))]})}var P={tooltip:(0,a.iv)(c.l0.colWithGap(2)),tooltipItem:(0,a.iv)(c.l0.rowWithGap(4),c.l0.align.center,c.l0.width("100%"),c.l0.flex.growAndShrink(1)),tooltipItemText:(0,a.iv)(c.l0.flex.row,c.l0.align.center,c.l0.justify.spaceBetween,c.l0.flex.growAndShrink(1),{"&>span":c.l0.display.inlineFlex,gap:T.TV.space4})};function A(e){var t=e.currentAtom,n=e.currentLabel,a=e.currentSecondaryAtom,l=e.currentSecondaryLabel,c=e.totalAtom,u=e.mini,f=e.inactive,p=e.limitStatusAtom,m=e.limitTextAtom,g=e.limitTextSecondaryAtom,y=e.loading,b=e.secondaryLimitDeterminesStatus,w=void 0!==b&&b,x=e.tiny,k=(0,v.Dv)(t),C=(0,v.Dv)((0,Z.Z)((function(){return a||(0,h.cn)(null)}),[a])),S=(0,v.Dv)(c),E=(0,v.Dv)(m),G=(0,v.Dv)(g),I=(0,v.Dv)((0,Z.Z)((function(){return(0,h.cn)((function(e){return R(e(p))}))}),[p])),_=(0,v.Dv)(p),B="At limit"!==_&&"Close to limit"!==_||!w?T.TV.outlineDimmer:R(_),A={shake:"At limit"===_,smoke:"Close to limit"===_||"At limit"===_};return a?(0,i.tZ)(d.J,(0,o.Z)((0,r.Z)({},A),{loading:y,css:u&&D.selfMiniBar||x&&D.selfTinyBar,disabled:f,total:S,tooltip:(0,i.BX)(s.G,{css:P.tooltip,children:[(0,i.tZ)(L,{variant:"primary",label:n,labelValue:E}),(0,i.tZ)(L,{variant:"secondary",label:l,labelValue:G})]}),data:[{current:k,color:I},{current:C||0,color:B}],tooltipHidden:x})):(0,i.tZ)(d.J,(0,o.Z)((0,r.Z)({},A),{loading:y,css:u&&D.selfMiniBar||x&&D.selfTinyBar,disabled:f,total:S,current:k,color:I,tooltip:E,tooltipHidden:x}))}function L(e){var t=e.variant,n=e.label,r=e.labelValue;return(0,i.BX)(s.G,{css:P.tooltipItem,children:[(0,i.tZ)(_,{variant:t}),(0,i.BX)(u.xv,{css:P.tooltipItemText,multiline:!1,children:[(0,i.BX)("span",{children:[n,":"]}),(0,i.tZ)("span",{children:r})]})]})}var U=n(57135),X=n(96583),M=n(5884),N=n(70523),O=n(31992),F=n(12290),W=n(48330),H=n(66539),V=n(88541),z=(0,l.X)({self:[c.l0.colWithGap(8)],summary:[c.l0.colWithGap(2)],summaryRow:[c.l0.rowWithGap(4),c.l0.align.center,c.l0.width("100%"),c.l0.flex.growAndShrink(1)],summaryRowText:[c.l0.flex.row,c.l0.align.center,c.l0.justify.spaceBetween,c.l0.flex.growAndShrink(1),{"&>span":c.l0.display.inlineFlex,gap:T.TV.space4}],miniBar:[c.l0.height(8)],tinyBar:[c.l0.height(4),{borderWidth:"0px",backgroundColor:T.TV.backgroundHigher}],dot:[c.l0.width(8),c.l0.height(8),c.l0.minWidth(8),c.l0.maxHeight(8),{borderRadius:"50%"}]});function j(e){var t=e.thisReplAtom,n=e.otherReplsAtom,a=e.quotaAtom,l=e.mini,c=e.inactive,u=e.accountLimitStatusAtom,f=e.thisReplTextAtom,p=e.otherReplsTextAtom,m=e.quotaTextAtom,g=e.scratchDiskTextAtom,y=e.scratchLimitStatusAtom,b=e.loading,w=e.tiny,x=(0,v.Dv)(t),k=(0,v.Dv)(n),C=(0,v.Dv)(a),S=(0,v.Dv)(f),E=(0,v.Dv)(p),G=(0,v.Dv)(m),I=(0,v.Dv)(g),_=(0,V.P5)({controlName:"flag-resources-in-header",logFlagToAnalytics:!1}),D=(0,v.Dv)((0,Z.Z)((function(){return(0,h.cn)((function(e){return R(e(u))}))}),[u])),B=(0,v.Dv)(u),P=(0,v.Dv)(y),A="At limit"===P||"Close to limit"===P?T.TV.orangeStrongest:T.TV.foregroundDimmer,L="At limit"===B||"Close to limit"===B?R(B):T.TV.outlineDimmer,U={shake:"At limit"===B,smoke:"Close to limit"===B||"At limit"===B};return(0,i.BX)(s.G,{css:z.self,children:[(0,i.tZ)(d.J,(0,o.Z)((0,r.Z)({},U),{loading:b,css:l&&z.miniBar||w&&z.tinyBar,disabled:c,total:C,tooltipHidden:w,tooltip:(0,i.BX)(s.G,{css:z.summary,children:[(0,i.tZ)(Y,{label:"This Repl",labelValue:S,color:T.TV.accentPrimaryStronger}),(0,i.tZ)(Y,{label:"Your other Repls",labelValue:E,color:T.TV.foregroundDimmer}),(0,i.tZ)(Y,{label:"Total account storage",labelValue:G,color:T.TV.foregroundDimmest}),(0,i.tZ)(K,{displaySize:I,color:A})]}),data:[{current:x,color:D},{current:k||0,color:L}]})),l||w||_?null:(0,i.BX)(s.G,{css:z.summary,children:[(0,i.tZ)(Y,{label:"This Repl",labelValue:S,color:T.TV.accentPrimaryStronger}),(0,i.tZ)(Y,{label:"Your other Repls",labelValue:E,color:T.TV.foregroundDimmer}),(0,i.tZ)(Y,{label:"Total account storage",labelValue:G,color:T.TV.foregroundDimmest}),(0,i.tZ)(K,{displaySize:I,color:A,tooltip:"Scratch disk storage is temporary storage used for package installation or to store temporary files. It does not count towards account storage, and resets regularly."})]})]})}var q=s.K.div,$=s.K.span;function Y(e){var t=e.color,n=e.label,r=e.labelValue;return(0,i.BX)(s.G,{css:z.summaryRow,children:[(0,i.tZ)(q,{css:z.dot,style:{backgroundColor:t}}),(0,i.tZ)(u.xv,{variant:"small",css:z.summaryRowText,multiline:!1,children:(0,i.BX)($,{style:{color:t},children:[n,": ",r]})})]})}var K=function(e){var t=e.displaySize,n=e.tooltip,r=e.color;return(0,i.tZ)(s.G,{css:z.summaryRow,children:n?(0,i.tZ)(H.u,{tooltip:n,children:(0,i.BX)(u.xv,{variant:"small",css:z.summaryRowText,multiline:!1,children:[(0,i.BX)($,{style:{color:r},children:["Scratch Disk: ",t]}),(0,i.tZ)(b.Z,{style:{color:r}})]})}):(0,i.tZ)(u.xv,{variant:"small",css:z.summaryRowText,multiline:!1,children:(0,i.BX)($,{style:{color:r},children:["Scratch Disk: ",t]})})})};function Q(){var e=(0,p.Z)(["from { opacity: 0 } to { opacity: 1 }"]);return Q=function(){return e},e}var J=(0,l.X)({center:[c.l0.flex.row,c.l0.flex.wrap,c.l0.justify.spaceBetween,c.l0.align.center],text:[c.l0.rowWithGap(2),c.l0.align.center,c.l0.minHeight(c.TV.space24)],textLoading:[c.l0.height(16),c.l0.width(c.TV.space64),g.p.backgroundPulse(),c.l0.borderRadius(4)],textLoadingWrapper:[c.l0.height("fit-content"),{animation:"".concat((0,a.F4)(Q())," 120ms forwards ease-out alternate")}],textWarn:[c.l0.rowWithGap(4),c.l0.align.center,c.l0.px(4)],textPadding:[c.l0.height(16),{lineHeight:"16px"}],textHighlight:[c.l0.color.accentPrimaryStronger],selfMini:[c.l0.rowWithGap(4),c.l0.align.center]});function ee(e){var t=e.title,n=e.description,r=e.accountLimitStatusAtom,o=e.accountLimitTextAtom,a=e.expandedAccountUseTextAtom,l=e.scratchLimitStatusAtom,d=e.mini,f=e.loading,p=(0,v.Dv)((0,Z.Z)((function(){return(0,h.cn)((function(e){return"At limit"===e(r)||"Close to limit"===e(r)}))}),[r])),m=(0,v.Dv)((0,Z.Z)((function(){return(0,h.cn)((function(e){return"At limit"===e(l)||"Close to limit"===e(l)}))}),[l])),g=p||m;if(d)return(0,i.BX)(s.G,{css:J.selfMini,children:[(0,i.tZ)(u.xv,{multiline:!1,variant:"small",css:m?c.l0.color.orangeStrongest:c.l0.color.foregroundDimmer,children:t}),g?(0,i.tZ)(w.Z,{size:12,color:c.TV.orangeStrongest}):null]});var x=null;return x=f?(0,i.tZ)(s.G,{css:J.textLoading}):(0,i.BX)(u.xv,{variant:"small",css:J.textPadding,multiline:!1,children:[(0,i.BX)("span",{css:J.textHighlight,children:[" ",(0,i.tZ)(te,{text:o})]})," + ",(0,i.tZ)(te,{text:a})]}),(0,i.BX)(s.G,{css:J.center,children:[(0,i.BX)(s.G,{css:J.text,children:[(0,i.tZ)(u.xv,{css:{fontWeight:c.TV.fontWeightMedium},multiline:!1,children:t}),(0,i.tZ)(y.h,{alt:n,size:24,children:(0,i.tZ)(b.Z,{})}),p?(0,i.BX)(s.G,{css:J.textWarn,children:[(0,i.tZ)(w.Z,{color:c.TV.orangeStronger}),(0,i.tZ)(u.xv,{variant:"small",css:J.textPadding,multiline:!1,children:(0,i.tZ)(te,{text:r})})]}):null]}),(0,i.tZ)(s.G,{css:J.textLoadingWrapper,children:x},f?"loadingResources":"finishedLoadingResources")]})}function te(e){var t=e.text,n=(0,v.Dv)(t);return(0,i.tZ)(i.HY,{children:n})}var ne=n(8030);function re(){var e=(0,p.Z)(["from { opacity: 0 } to { opacity: 1 }"]);return re=function(){return e},e}var ie=(0,l.X)({self:[c.l0.colWithGap(2)],selfMini:[c.l0.colWithGap(4),c.l0.flex.growAndShrink(2),{flexBasis:32}],center:[c.l0.flex.row,c.l0.flex.wrap,c.l0.justify.spaceBetween,c.l0.align.center],text:[c.l0.rowWithGap(2),c.l0.align.center,c.l0.minHeight(T.TV.space24)],textLoading:[c.l0.height(16),c.l0.width(T.TV.space64),g.p.backgroundPulse(),c.l0.borderRadius(4)],textLoadingWrapper:[c.l0.height("fit-content"),{animation:"".concat((0,a.F4)(re())," 120ms forwards ease-out alternate")}],textMini:[{alignSelf:"start"},c.l0.color.foregroundDimmest],titleWrapper:[c.l0.rowWithGap(4),c.l0.align.center],titleMini:[c.l0.color.foregroundDimmer],title:[c.l0.fontWeight.normal]});function oe(e){var t=e.currentAtom,n=e.mini,r=e.loading,o=e.description,a=(0,Z.Z)((function(){return(0,h.cn)((function(e){return(0,ne.s)(1024*e(t)*1024)}))}),[t]);if(n)return(0,i.BX)(s.G,{css:ie.selfMini,children:[(0,i.tZ)(s.G,{css:ie.titleWrapper,children:(0,i.tZ)(u.xv,{multiline:!1,variant:"small",css:ie.titleMini,height:"singleLine",children:"Storage"})}),(0,i.tZ)(u.xv,{multiline:!1,variant:"small",css:ie.textMini,height:"singleLine",children:(0,i.tZ)(ae,{text:a})})]});var l=r?(0,i.tZ)(s.G,{css:ie.textLoading}):(0,i.tZ)(u.xv,{variant:"small",height:"singleLine",multiline:!1,children:(0,i.tZ)(ae,{text:a})});return(0,i.tZ)(s.G,{css:n?ie.selfMini:ie.self,children:(0,i.BX)(s.G,{css:ie.center,children:[(0,i.BX)(s.G,{css:ie.text,children:[(0,i.tZ)(u.xv,{css:ie.title,multiline:!1,children:"Storage"}),(0,i.tZ)(y.h,{alt:o,size:24,children:(0,i.tZ)(b.Z,{})})]}),(0,i.tZ)(s.G,{css:ie.textLoadingWrapper,children:l},r?"loadingResources":"finishedLoadingResources")]})})}function ae(e){var t=e.text,n=(0,v.Dv)(t);return(0,i.tZ)(i.HY,{children:n})}var le=(0,l.X)({self:[c.l0.colWithGap(2)],selfMini:[c.l0.colWithGap(4),c.l0.flex.growAndShrink(2),{flexBasis:32}],selfMiniBar:[c.l0.height(8)],selfTiny:[c.l0.width(48),c.l0.height(4)]}),ce=3e5;function ue(e){var t,n,o,a,l=(0,W.Z)(),c=(0,N.Z)(),u=c.dataAtom.disk,s=c.loading,d=(0,M.mE)({variables:{replId:l}}),f=d.data,p=d.loading,h="Repl"===(null===f||void 0===f||null===(t=f.repl)||void 0===t?void 0:t.__typename)&&"Team"===(null===(n=f.repl.owner)||void 0===n?void 0:n.__typename),v="Repl"===(null===f||void 0===f||null===(o=f.repl)||void 0===o?void 0:o.__typename)?null===(a=f.repl.owner)||void 0===a?void 0:a.id:void 0;return p||h?(0,i.tZ)(B,(0,r.Z)({title:"Storage",description:"How much room your Repl has to store files",currentAtom:u.currentAtom,totalAtom:u.totalAtom,measure:"MiB",loading:p||s},e)):(0,i.tZ)(se,(0,r.Z)({title:"Storage",description:"How much space your account has to store files",resourceData:c,replId:l,ownerId:v},e))}function se(e){var t,n,a,l=e.title,c=e.description,u=e.resourceData,d=e.replId,f=e.ownerId,p=u.dataAtom.disk,g=p.currentAtom,y=p.totalAtom,b=p.scratchTotalAtom,w=p.scratchCurrentAtom,x=u.loading,k=(0,v.Dv)(y),C=(0,v.Dv)(g),S=(0,v.Dv)(b),T=(0,v.Dv)(w),R=(0,M.Pf)({fetchPolicy:"network-only",nextFetchPolicy:"cache-and-network",ssr:!1}),G=R.data,I=R.loading,_=R.refetch,D="number"===typeof f&&(null===G||void 0===G||null===(t=G.currentUser)||void 0===t?void 0:t.id)===f,B=(0,m.useMemo)((function(){return(0,F.Z)((function(){return _()}),{wait:12e4,maxWait:ce})}),[_]);(0,m.useEffect)((function(){var e=!1,t=null,n=function(){var r=(0,U.Z)((function(){return(0,X.__generator)(this,(function(r){switch(r.label){case 0:return e?[2]:[4,B()];case 1:return r.sent(),t=setTimeout(n,ce),[2]}}))}));return function(){return r.apply(this,arguments)}}();return n(),function(){e=!0,t&&clearTimeout(t),B.isScheduled()&&B.flush()}}),[B,C,k,_]);var P="AccountStorageUtilization"===(null===G||void 0===G||null===(n=G.currentUser)||void 0===n?void 0:n.storageInfo.accountStorageUtilization.__typename)?Number(G.currentUser.storageInfo.accountStorageUtilization.total):0,A="StorageQuota"===(null===G||void 0===G||null===(a=G.currentUser)||void 0===a?void 0:a.storageInfo.storageQuota.__typename)?Number(G.currentUser.storageInfo.storageQuota.quota):0,L=fe(d,G),N=!(A>0&&P>0)&&(I||x),W=1024*C*1024,H=Math.max(P-L,0),V=(0,O.p6)(P),z=(0,O.p6)(H),q=(0,O.p6)(A),$=de(1024*T*1024,1024*S*1024),Y=E(V,q),K=E(T,S),Q=(0,ne.s)(W),J=(0,ne.s)(H),te=(0,ne.s)(A),re=de(H,A),ie=(0,O.$s)(W).toLocaleString(void 0,{maximumFractionDigits:1}),ae=(0,Z.Z)((function(){return(0,h.cn)(z)}),[z]),ue=(0,Z.Z)((function(){return(0,h.cn)(q)}),[q]),se=(0,Z.Z)((function(){return(0,h.cn)(Y)}),[Y]),pe=(0,Z.Z)((function(){return(0,h.cn)(K)}),[K]),he=(0,Z.Z)((function(){return(0,h.cn)(Q)}),[Q]),ve=(0,Z.Z)((function(){return(0,h.cn)(te)}),[te]),me=(0,Z.Z)((function(){return(0,h.cn)($)}),[$]),ge=(0,Z.Z)((function(){return(0,h.cn)(J)}),[J]),ye=(0,Z.Z)((function(){return(0,h.cn)(re)}),[re]),Ze=(0,Z.Z)((function(){return(0,h.cn)(ie)}),[ie]);return D?e.tiny?(0,i.tZ)(s.G,{css:le.selfTiny,children:(0,i.tZ)(j,(0,o.Z)((0,r.Z)({},e),{loading:N,thisReplAtom:g,otherReplsAtom:ae,quotaAtom:ue,accountLimitStatusAtom:se,thisReplTextAtom:he,otherReplsTextAtom:ge,quotaTextAtom:ve,scratchDiskTextAtom:me,scratchLimitStatusAtom:pe}))}):(0,i.BX)(s.G,{css:e.mini?le.selfMini:le.self,children:[(0,i.tZ)(ee,{title:l,description:c,scratchLimitStatusAtom:pe,accountLimitStatusAtom:se,accountLimitTextAtom:Ze,expandedAccountUseTextAtom:ye,mini:e.mini,loading:N}),(0,i.tZ)(j,(0,o.Z)((0,r.Z)({},e),{loading:N,thisReplAtom:g,otherReplsAtom:ae,quotaAtom:ue,accountLimitStatusAtom:se,thisReplTextAtom:he,otherReplsTextAtom:ge,quotaTextAtom:ve,scratchDiskTextAtom:me,scratchLimitStatusAtom:pe}))]}):e.tiny?null:(0,i.tZ)(oe,(0,r.Z)({currentAtom:g,loading:N},e))}var de=function(e,t){var n=(0,O.$s)(e).toLocaleString(void 0,{maximumFractionDigits:2}),r=(0,O.$s)(t).toLocaleString(void 0,{maximumFractionDigits:2});return"".concat(n," / ").concat(r," GiB")},fe=function(e,t){var n,r;if("AccountStorageUtilization"!==(null===t||void 0===t||null===(n=t.currentUser)||void 0===n?void 0:n.storageInfo.accountStorageUtilization.__typename))return 0;var i=null===(r=t.currentUser.storageInfo.accountStorageUtilization.perRepl.find((function(t){return t.repl.id===e})))||void 0===r?void 0:r.usage;return Number(null!==i&&void 0!==i?i:0)};function pe(e){var t=e.resources,n=t.dataAtom,o=n.cpu,a=n.ram,l=n.disk,u=t.loading,d=(0,V.P5)({controlName:"flag-storage-dynamic-resize-beta",logFlagToAnalytics:!1}),f=(0,i.tZ)(B,(0,r.Z)({title:"RAM",description:"How much memory your Repl is using",currentAtom:a.currentRssAtom,currentLabel:"Project Memory",currentSecondaryAtom:a.currentCacheAtom,currentSecondaryLabel:"Cache Memory",totalAtom:a.totalAtom,measure:"MiB",loading:u},e));return e.tiny?(0,i.BX)(s.G,{css:[c.l0.colWithGap(4)],children:[(0,i.tZ)(B,(0,r.Z)({title:"CPU",description:"How much processing power your Repl is using",currentAtom:o.currentAtom,totalAtom:o.totalAtom,cpuCountAtom:o.cpuCountAtom,measure:"vCPU",loading:u},e)),(0,i.tZ)(B,(0,r.Z)({title:"RAM",description:"How much memory your Repl is using",currentAtom:a.currentRssAtom,currentLabel:"Project Memory",currentSecondaryAtom:a.currentCacheAtom,currentSecondaryLabel:"Cache Memory",totalAtom:a.totalAtom,measure:"MiB",loading:u},e)),(0,i.tZ)(ue,(0,r.Z)({},e))]}):(0,i.BX)(i.HY,{children:[(0,i.tZ)(B,(0,r.Z)({title:"CPU",description:"How much processing power your Repl is using",currentAtom:o.currentAtom,totalAtom:o.totalAtom,cpuCountAtom:o.cpuCountAtom,measure:"vCPU",loading:u},e)),e.mini?f:(0,i.tZ)(s.G,{css:c.l0.colWithGap(4),children:f}),d?(0,i.tZ)(ue,(0,r.Z)({},e)):(0,i.tZ)(B,(0,r.Z)({title:"Storage",description:"How much room your Repl has to store files",currentAtom:l.currentAtom,totalAtom:l.totalAtom,measure:"MiB",loading:u},e))]})}},8030:function(e,t,n){n.d(t,{s:function(){return o}});var r=n(29262),i=n(31992),o=function(e){return e>2*r.lb?"".concat((0,i.$s)(e).toLocaleString(void 0,{maximumFractionDigits:1})," GiB"):"".concat(Math.round((0,i.p6)(e)).toLocaleString()," MiB")}},73162:function(e,t,n){n.d(t,{hF:function(){return _},Kq:function(){return M},lR:function(){return U}});var r=n(74985),i=n(43312),o=(n(87076),n(63128),n(61284)),a=n(85368),l=(n(36443),n(94045),n(39541)),c=(n(19358),n(70523)),u=(n(50959),n(80587)),s=n(38467),d=n(48330),f=n(77511),p=n(51631),h=n(90171),v=n(72006),m=n(43119),g=n(71440),y=n(24635);function Z(){var e=(0,m.Z)(["\n  query ReplResourcesCallToAction($replId: String!) {\n    currentUser {\n      id\n      userSubscriptionType\n    }\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        owner {\n          ... on Team {\n            id\n          }\n          ... on User {\n            id\n          }\n        }\n      }\n    }\n  }\n"]);return Z=function(){return e},e}var b,w={},x=(0,g.Ps)(Z());function k(){var e,t,n,r,i=(0,d.Z)(),o=(0,h.useRouter)(),a=function(e){var t=(0,v.Z)({},w,e);return y.a(x,t)}({variables:{replId:i}}).data;return(0,f.Vg)(o)||"number"===typeof(null===a||void 0===a||null===(e=a.currentUser)||void 0===e?void 0:e.id)&&"Repl"===(null===a||void 0===a?void 0:a.repl.__typename)&&(null===a||void 0===a||null===(t=a.currentUser)||void 0===t?void 0:t.id)!==(null===(n=null===a||void 0===a?void 0:a.repl.owner)||void 0===n?void 0:n.id)||(null===a||void 0===a||null===(r=a.currentUser)||void 0===r?void 0:r.userSubscriptionType)===p.HP.HackerPro?b.Nothing:b.Upgrade}function C(){var e=null;return k()===b.Upgrade&&(e=(0,r.BX)(r.HY,{children:[(0,r.tZ)(o.xv,{children:"Low on resources?"}),(0,r.tZ)(s.Z,{context:"repl_resources_upgrade"})]})),(0,r.BX)(r.HY,{children:[e,(0,r.BX)(o.xv,{color:"dimmer",variant:"small",children:["These resources are for the cloud machine that hosts this Repl."," ",(0,r.tZ)("a",{href:"https://blog.replit.com/repl-resources",target:"_blank",children:"Learn more"})," ","about resource limits."]})]})}!function(e){e.Upgrade="UPGRADE",e.Nothing="NOTHING"}(b||(b={}));var S=n(18171),T=n(84563),E=(n(93658),n(76735)),R=n(91398),G=n(92683);function I(e){var t=e.title,n=e.doWarnAtom,i=e.inactive,c=void 0!==i&&i,u=(0,G.Dv)(n);return(0,r.BX)(a.G,{css:[l.l0.rowWithGap(4),l.l0.align.center],children:[(0,r.tZ)(o.xv,{variant:"small",css:l.l0.color.foregroundDimmer,multiline:!1,children:c?t+" last run":t}),u?(0,r.tZ)(E.Z,{color:l.TV.orangeStronger}):null]})}function _(e){var t=e.title,n=e.totalAtom,i=e.currentAtom,o=e.countAtom,c=e.measure,u=e.limitText,s=e.inactive,d=void 0!==s&&s,f=(0,S.Z)((function(){return(0,R.cn)((function(e){return B(e(i),e(n))}))}),[i,n]),p=(0,S.Z)((function(){return(0,R.cn)((function(e){return u||A(e(f),e(i),e(n),o&&e(o),c)}))}),[u,f,i,n,o,c]),h=(0,S.Z)((function(){return(0,R.cn)((function(e){var t=e(f);return"At limit"===t||"Close to limit"===t}))}),[f]);return(0,r.BX)(a.G,{css:[l.l0.colWithGap(4),l.l0.flex.growAndShrink(2),{flexBasis:32}],children:[t?(0,r.tZ)(I,{title:t,doWarnAtom:h,inactive:d}):null,(0,r.tZ)(D,{currentAtom:i,totalAtom:n,inactive:d,limitTextAtom:p,mini:!0})]})}function D(e){var t=e.currentAtom,n=e.totalAtom,i=e.limitTextAtom,o=e.inactive,a=e.mini,c=(0,G.Dv)(n),u=(0,G.Dv)(t),s=(0,G.Dv)(i),d=function(e){switch(e){case"empty":case"fine":default:return;case"At limit":return l.TV.accentNegativeDefault;case"Close to limit":return l.TV.orangeDefault}}(B(u,c));return(0,r.tZ)(T.J,{css:a&&l.l0.height(8),total:c,current:u,color:d,disabled:o,tooltip:s})}function B(e,t){if(void 0===e)return"empty";var n=e/t;return n>=1?"At limit":n>=.9?"Close to limit":"fine"}function P(e){return Math.round(100*(e+Number.EPSILON))/100}function A(e,t,n,r,i){if("empty"!==e&&void 0!==t)return"vCPU"===i?P(100*Math.min(1,t/n))+"% of "+r+" vCPUs":P(t).toLocaleString()+"/"+P(n).toLocaleString()+" "+i}l.l0.p(8),l.l0.colWithGap(8),"1px solid ".concat(l.TV.backgroundHigher);var L={self:(0,i.iv)([l.l0.overflow("hidden"),l.l0.rowWithGap(12),l.l0.flex.grow(1),l.l0.justify.spaceBetween,l.l0.align.center,l.l0.focusRing,l.l0.cursor.pointer])};function U(e){var t=e.resources,n=e.inactive,i=void 0!==n&&n;return(0,r.tZ)(a.G,{css:L.self,"aria-expanded":!1,children:(0,r.tZ)(u.Z,{mini:!0,inactive:i,resources:t})})}l.l0.overflow("hidden"),l.l0.reset.button,l.l0.rowWithGap(12),l.l0.flex.grow(1),l.l0.justify.spaceBetween,l.l0.align.center,l.l0.focusRing,l.l0.cursor.pointer;var X={self:(0,i.iv)([l.l0.colWithGap(12),l.l0.p(8)]),selfCollapsable:(0,i.iv)([l.l0.colWithGap(12)]),headerCollapsable:(0,i.iv)([l.l0.flex.row,l.l0.justify.spaceBetween])};function M(e){var t=e.inactive,n=void 0!==t&&t,i=(0,c.Z)();return(0,r.BX)(a.G,{css:X.self,children:[(0,r.tZ)(u.Z,{inactive:n,resources:i}),(0,r.tZ)(C,{})]})}},67283:function(e,t,n){n.d(t,{ZP:function(){return te},al:function(){return Y},L7:function(){return J}});var r=n(57135),i=n(57389),o=n(72006),a=n(4405),l=n(96583),c=n(74985),u=n(50959),s=n(43119),d=n(71440),f=n(24635);function p(){var e=(0,s.Z)(["\n  query WorkspaceRunButton($id: String!) {\n    repl(id: $id) {\n      ... on Repl {\n        id\n        language\n        title\n        rootOriginReplUrl\n        source {\n          release {\n            id\n            repl {\n              id\n              title\n              owner {\n                ... on User {\n                  id\n                  username\n                }\n                ... on Team {\n                  id\n                  username\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n    currentUser {\n      id\n    }\n  }\n"]);return p=function(){return e},e}var h={},v=(0,d.Ps)(p());var m=n(625),g=n(48330),y=n(10841),Z=n(39541),b=n(85368),w=n(32104),x=n(61284),k=n(66539),C=n(43312),S=n(4421),T=n(2272),E=n(92683),R=n(56581);function G(){var e=(0,s.Z)(["\n  query CelebrateReplRunCurrentUser {\n    currentUser {\n      id\n      timeCreated\n    }\n  }\n"]);return G=function(){return e},e}var I={},_=(0,d.Ps)(G());var D=n(31410),B=n(88254),P=n(11619),A=new Date("2022-07-08"),L=(0,R.O4)("useCelebrateFirstReplPlay",!1);function U(){var e,t,n=function(e){var t=(0,o.Z)({},I,e);return f.a(_,t)}(),r=(0,P.Z)().preferences.extraDelight,i=(0,D.$0)().fireCircularBurstFrom,a=(0,T.Z)((0,E.KO)(L),2),l=a[0],c=a[1],u=null!==(t=null===(e=n.data)||void 0===e?void 0:e.currentUser)&&void 0!==t?t:null,s=!l&&u&&new Date(u.timeCreated)>=A;return{hasCelebrated:l,celebrate:function(e){e?((r||s)&&i({element:e}),s&&c(!0)):B.Tb(new Error("Cannot find element for celebrate Repl run confetti"))}}}var X,M=n(40735),N=n(65416),O=n(34338),F=n(13233),W=n(29457),H=n(47518),V=n(45353);function z(e){var t=e.runState,n=e.size,r=void 0===n?16:n;switch(t){case y.Ah.IDLE:return(0,c.tZ)(M.Z,{size:r});case y.Ah.RUNNING:return(0,c.tZ)(N.Z,{size:r});default:return(0,c.tZ)(w.Z,{size:r})}}var j,q,$=(X={},(0,i.Z)(X,y.Ah.IDLE,"Run"),(0,i.Z)(X,y.Ah.RUNNING,"Stop"),(0,i.Z)(X,y.Ah.STOPPING,"Stopping"),(0,i.Z)(X,y.Ah.OFFLINE,"Working"),X),Y=(j={small:48,large:100},(0,i.Z)(j,y.Ah.IDLE,68),(0,i.Z)(j,y.Ah.RUNNING,72),(0,i.Z)(j,y.Ah.STOPPING,92),(0,i.Z)(j,y.Ah.OFFLINE,86),j),K=(0,C.iv)([Z.l0.py(12),Z.l0.width(Y.small),Z.l0.flex.row,Z.l0.center,Z.l0.borderRadius(6),Z.l0.backgroundColor.accentPositiveDimmest,Z.l0.color.accentPositiveStrongest,Z.l0.cursor.pointer,Z.l0.focusRing,(q={transition:"color 0.2s ease 0s, background-color 0.2s ease 0s",border:"1px solid",borderColor:"transparent",lineHeight:1,outline:"0 none","&:hover":[{color:"white"},Z.l0.backgroundColor.accentPositiveDefault],"&:active":[{borderColor:Z.TV.accentPositiveStrongest}]},(0,i.Z)(q,(0,O.et)("tabletMax"),[Z.l0.width(Y.large)]),(0,i.Z)(q,":focus-visible",{outlineColor:"".concat(Z.TV.accentPositiveStrongest)}),q)]),Q=(0,C.iv)([Z.l0.color.foregroundDimmer,Z.l0.backgroundColor.backgroundHigher,{borderColor:"transparent","&:hover":[{color:"white"},Z.l0.backgroundColor.backgroundHighest],"&:active":[{borderColor:Z.TV.accentPrimaryDefault}]}]);function J(e){var t=(0,u.useState)(e.getRunState()),n=t[0],r=t[1];return(0,u.useEffect)((function(){return r(e.getRunState()),e.onStateChanged((function(e){r(e)}))}),[e]),n}var ee=u.forwardRef((function(e,t){var n=e.runner,s=e.runConfig,d=e.onRunInitiated,p=e.style,w=void 0===p?"default":p,C=e.disableTooltip,T=e.shortcut,E=(0,g.Z)(),R=J(n),G=function(e){var t=(0,o.Z)({},h,e);return f.a(v,t)}({variables:{id:E}}).data,I="Repl"===(null===G||void 0===G?void 0:G.repl.__typename)?G.repl:null,_=U().celebrate,D=R!==y.Ah.IDLE&&R!==y.Ah.RUNNING,B=(0,F.Z)().showError,P=(0,u.useRef)(null),A=function(){var e=(0,r.Z)((function(){var e,t,r,i,o,a,c,u;return(0,l.__generator)(this,(function(l){switch(l.label){case 0:return l.trys.push([0,3,,4]),R!==y.Ah.IDLE?[3,2]:(d&&d(),P.current&&_(P.current),[4,n.run(s)]);case 1:return l.sent(),I&&(0,m.j)(m.U3.PROJECT_RAN,{language:I.language,replId:I.id,replTitle:I.title,rootOriginReplUrl:I.rootOriginReplUrl,templateTitle:null===(e=I.source)||void 0===e||null===(t=e.release)||void 0===t||null===(r=t.repl)||void 0===r?void 0:r.title,templateOwner:null===(i=I.source)||void 0===i||null===(o=i.release)||void 0===o||null===(a=o.repl)||void 0===a||null===(c=a.owner)||void 0===c?void 0:c.username}),[2];case 2:return R===y.Ah.RUNNING?[2,n.stopRun()]:[3,4];case 3:return u=l.sent(),B(u.toString()),W.kg.error("run button error",{errorMessage:u.message}),R===y.Ah.RUNNING?[2,n.stopRun()]:[3,4];case 4:return[2]}}))}));return function(){return e.apply(this,arguments)}}();if("floating"===w)return(0,c.tZ)(b.G,{tag:"button",disabled:D,css:[{position:"fixed",right:24,bottom:72,zIndex:1},Z.l0.center,{height:"50px",width:"50px",opacity:"0.5",cursor:"pointer",borderRadius:"100%",border:"solid 2px var(--accent-positive-dimmer)",backgroundColor:Z.TV.accentPositiveDimmest}],onClick:A,innerRef:P,children:(0,c.tZ)(z,{runState:R})});var L=R===y.Ah.IDLE;return"inline-small"===w?(0,c.BX)("button",{"data-cy":"ws-run-btn",onClick:A,ref:P,disabled:D,css:[Z.l0.p(12),Z.l0.flex.row,Z.l0.center,Z.l0.borderRadius(8),L?Z.l0.backgroundColor.accentPositiveDimmest:Z.l0.backgroundColor.backgroundHigher,L?Z.l0.color.accentPositiveStronger:Z.l0.color.foregroundDimmer,{border:"1px solid",borderColor:L?Z.TV.accentPositiveDimmest:Z.TV.backgroundHigher},Z.l0.width("100%"),Z.l0.height("100%")],children:[(0,c.tZ)(z,{runState:R}),(0,c.tZ)(x.xv,{variant:"subheadDefault",css:[Z.l0.pl(8)],multiline:!1,children:$[R]})]}):(0,c.tZ)(k.u,{placement:"bottom",isDisabled:C||!T,tooltip:T?(0,c.tZ)(b.G,{css:{margin:-4},children:(0,c.tZ)(V.bM,{keyCombo:T,small:!0})}):null,children:function(e,n){return(0,c.BX)("button",(0,a.Z)((0,o.Z)({},e),{onClick:A,ref:(0,H.l)(P,n,t),css:[K,!L&&Q,Z.l0.height(32),(0,i.Z)({transition:"width 80ms ease-out"},(0,O.et)("tabletMax"),Z.l0.width(Y[R]))],children:[(0,c.tZ)(z,{runState:R,size:12}),(0,c.tZ)(x.xv,{multiline:!1,css:[Z.l0.pl(6),Z.l0.display.none,Z.l0.fontWeight.medium,(0,i.Z)({lineHeight:1,overflow:"visible"},"@media (min-width: ".concat(S.j.tabletMax,"px)"),[Z.l0.display.block])],children:$[R]})]}))}})})),te=ee},57388:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(72006),i=n(4405),o=n(77637),a=n(74985),l=n(87076),c=n(39541),u=(0,n(82568).X)({checked:[c.l0.width(32),c.l0.height(32),c.l0.backgroundColor.backgroundHigher],unchecked:[c.l0.width(32),c.l0.height(32),c.l0.color.foregroundDimmest]});function s(e){var t=e.alt,n=e.icon,c=e.checked,s=e.onClick,d=(0,o.Z)(e,["alt","icon","checked","onClick"]);return(0,a.tZ)(l.h,(0,i.Z)((0,r.Z)({},d),{css:c?u.checked:u.unchecked,alt:"".concat(c?"Disable":"Enable"," ").concat(t),onClick:s,children:n}))}},10452:function(e,t,n){n.d(t,{Z:function(){return z}});var r=n(2272),i=n(74985),o=n(50959),a=n(25198),l=n(17755),c=n(85368),u=n(39541),s=n(96351),d=n(66539),f=n(61284),p=n(63837),h=n(206),v=n(82893),m=n.n(v),g=n(72006),y=n(3927),Z=n(47900),b=n(66164),w=n(25462),x=n(11619),k=n(43312),C=function(e){return(0,k.iv)({wordBreak:"break-word",boxSizing:"border-box",whiteSpace:"normal",lineHeight:1.5,color:u.TV.foregroundDefault,fontFamily:"".concat(u.TV.fontFamilyDefault," !important"),fontSize:e,textSizeAdjust:"100%","h1, h2, h3, h4, h5, h6":{color:u.TV.foregroundDefault,fontWeight:u.TV.fontWeightMedium,marginBottom:u.TV.space16,lineHeight:1.25,wordWrap:"break-word"},"h1, h2":{paddingBottom:u.TV.space8,borderBottom:"1px solid ".concat(u.TV.backgroundHigher),marginTop:u.TV.space32},h1:{fontSize:"2em"},h2:{fontSize:"1.5em"},h3:{fontSize:"1.25em",marginTop:u.TV.space24},h4:{fontSize:"1em",marginTop:u.TV.space16},h5:{fontSize:"0.875em"},h6:{color:u.TV.foregroundDimmer,fontSize:"0.85em"},".anchor":{float:"left",lineHeight:1,marginLeft:"calc(-1 * ".concat(u.TV.space16,")"),paddingRight:u.TV.space4},".anchor:focus":{outline:"none"},p:{marginBottom:u.TV.space16,fontSize:e,fontFamily:"".concat(u.TV.fontFamilyDefault," !important")},"p:last-child":{marginBottom:0},table:{borderSpacing:0,borderCollapse:"collapse",display:"block",width:"100%",overflow:"auto",marginBottom:u.TV.space16,wordBreak:"normal",th:{fontWeight:u.TV.fontWeightMedium},"td, th":{padding:"".concat(u.TV.space8," ").concat(u.TV.space12),border:"1px solid ".concat(u.TV.backgroundHighest),minWidth:"16ch"},tr:{backgroundColor:u.TV.backgroundDefault,borderTop:"1px solid ".concat(u.TV.backgroundHighest)},"tr:nth-child(2n)":{backgroundColor:u.TV.backgroundRoot}},"hr:after":{clear:"both"},"li > p":{marginBottom:0},li:{marginTop:u.TV.space4},dd:{marginLeft:0},"ol, ul":{paddingLeft:u.TV.space16,marginTop:0,marginBottom:0},ul:{listStyle:"initial",listStyleType:"disc",marginBottom:u.TV.space16},ol:{listStyle:"decimal",marginBottom:u.TV.space16},"ol ol, ol ul, ul ol, ul ul":{paddingLeft:u.TV.space16,marginTop:0,marginBottom:0,paddingBottom:0},"ul ul":{listStyleType:"circle"},"ul ul ul":{listStyleType:"square"},"ol ol, ul ol":{listStyleType:"lower-roman"},"ol ol ol, ol ul ol, ul ol ol, ul ul ol":{listStyleType:"lower-alpha"},pre:{fontFamily:"".concat(u.TV.fontFamilyCode," !important"),margin:"".concat(u.TV.space16," 0"),borderRadius:4,wordBreak:"break-all",wordWrap:"break-word",whiteSpace:"pre-wrap",color:u.TV.foregroundDefault},"pre:last-child":{marginBottom:"0 !important"},blockquote:{padding:"0 1em",marginBottom:u.TV.space16,borderLeft:"".concat(u.TV.space2," solid ").concat(u.TV.backgroundHighest),paddingLeft:u.TV.space16},"blockquote > *":{color:"".concat(u.TV.foregroundDimmer," !important")},"blockquote > :last-child":{marginBottom:"0 !important",borderBottom:"none !important"},"blockquote > :first-child":{marginTop:"0 !important"},kbd:{display:"inline-block",padding:"3px 5px",font:"11px ".concat(u.TV.fontFamilyCode),color:u.TV.foregroundDimmer,verticalAlign:"middle",backgroundColor:u.TV.backgroundHigher,border:"none",borderRadius:3,boxShadow:"inset 0 -1px 0 ".concat(u.TV.backgroundHighest)},a:{color:u.TV.accentPrimaryStronger,backgroundColor:"initial"},"> :first-child":{marginTop:"0 !important",paddingTop:"0 !important"},"> :last-child":{borderBottom:"none !important",marginBottom:"0 !important",paddingBottom:"0 !important"},'[type="checkbox"]':{boxSizing:"border-box",marginRight:u.TV.space8,padding:0},details:{marginBottom:u.TV.space16,display:"block",background:u.TV.backgroundHigher,borderRadius:u.TV.borderRadius4,padding:u.TV.space16},summary:{display:"list-item",userSelect:"none",cursor:"pointer",fontWeight:u.TV.fontWeightBold},"details[open] > summary":{borderBottom:"1px solid ".concat(u.TV.backgroundHighest),marginBottom:u.TV.space16,paddingBottom:u.TV.space16},hr:{height:1,backgroundColor:u.TV.backgroundHigher,margin:"".concat(u.TV.space24," 0"),border:0}})},S=n(71253),T=n(42173),E=n(88167),R=n(34979),G=["a","pre","code","em","strong","p","ul","ol","li","img","del","h1","h2","h3","h4","h5","h6","sup","sub","br","hr","blockquote","span","div"];function I(e){var t=e.content,n=(0,x.Z)().preferences.fontSize,r=o.useCallback((function(e){return(0,i.tZ)(R.Z,(0,g.Z)({},e))}),[]);return(0,i.tZ)("div",{css:[{"& ol":{paddingInlineStart:"20px"},"& ul":{paddingInlineStart:"20px",listStyle:"initial"}}],children:(0,i.tZ)(y.D,{css:C(n),allowedElements:G,remarkPlugins:[Z.Ic,b.Z,w.Z,S.Z],linkTarget:"_blank",rehypePlugins:[T.Z],components:{code:r,img:E.Z},children:t})})}var _=(0,o.memo)(I),D=n(99397),B=n(79637),P=n(54873),A=n(43119),L=n(71440),U=n(91015),X=n(50216);function M(){var e=(0,A.Z)(["\n  mutation DeleteThreadMessage($id: String!) {\n    deleteThreadMessage(messageId: $id) {\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return M=function(){return e},e}var N={},O=(0,L.Ps)(M(),U.j7);var F=n(57370),W=n(13233),H=n(88541),V=function(e){var t=e.thread,n=e.message,v=(0,F.d)(),y=(0,W.Z)().showError,Z=(0,r.Z)(function(e){var t=(0,g.Z)({},N,e);return X.D(O,t)}({onError:function(e){y(e.message)},onCompleted:function(e){var t;"UserError"===(null===(t=e.deleteThreadMessage)||void 0===t?void 0:t.__typename)&&y(e.deleteThreadMessage.message)}}),2),b=Z[0],w=Z[1].loading,x=(0,H.P5)({controlName:"flag-threads-dropdown-menu",default:!1,type:"boolean",logFlagToAnalytics:!1}),k=!(!t||t.indexStart!==t.indexEnd),C={resolved:"Thread resolved. Re-open it any time in the inbox.",unresolved:"Thread re-opened"},S="Outdated",T="The code has changed since the comment was left",E=o.useMemo((function(){return{diff:(0,h.Y)(n.timeCreated),full:(0,h.u)(n.timeCreated)}}),[n]);if(!n.user)return null;var R=v===n.user.id?[{label:"Delete",icon:(0,i.tZ)(P.Z,{}),isDestructive:!0}]:[];return(0,i.BX)(c.G,{children:[(0,i.BX)(c.G,{css:[u.l0.flex.row,u.l0.justify.spaceBetween,u.l0.pb(4)],children:[(0,i.BX)(c.G,{css:[u.l0.flex.row,u.l0.align.center,u.l0.rowWithGap(8)],children:[(0,i.tZ)(m(),{passHref:!0,href:"/@".concat(n.user.username),children:(0,i.tZ)("a",{children:(0,i.tZ)(l.n,{small:!0,src:n.user.image,username:n.user.username})})}),(0,i.tZ)("p",{children:(0,i.tZ)(d.u,{tooltip:E.full,placement:"top",children:(0,i.tZ)(f.xv,{variant:"small",color:"dimmer",multiline:!1,children:E.diff})})}),R.length>0&&x?(0,i.tZ)(B.Z,{items:R,onItemClick:function(e){"Delete"!==e.label||w||b({variables:{id:n.id}})},label:"More"}):null]}),k?(0,i.tZ)(d.u,{tooltip:T,children:(0,i.tZ)(s.D,{colorway:"negative",text:S})}):null]}),"StatusMessageContentType"===n.content.__typename&&"resolved"===n.content.status?(0,i.tZ)(a.E,{colorway:"positive",icon:(0,i.tZ)(p.Z,{}),text:C.resolved}):null,"StatusMessageContentType"===n.content.__typename&&"unresolved"===n.content.status?(0,i.tZ)(a.E,{colorway:"primary",icon:(0,i.tZ)(D.Z,{}),text:C.unresolved}):null,"TextMessageContentType"===n.content.__typename&&(0,i.tZ)(_,{content:n.content.text})]})},z=(0,o.memo)(V)},206:function(e,t,n){n.d(t,{Y:function(){return o},u:function(){return a}});var r=n(22107),i=n(52224),o=function(e){var t=new Date(e),n=new Date;return(0,i.Z)(n,t)<60?"just now":(0,r.F)(t,!0)+" ago"},a=function(e){return new Date(e).toLocaleString()}},71603:function(e,t,n){n.d(t,{Z:function(){return ge}});var r=n(2272),i=n(74985),o=n(50959),a=n(54629),l=n(19065),c=n(8622),u=n(48330),s=n(32104),d=n(72006),f=n(4405),p=n(70751),h=n(33814),v=n(66482),m=n(2041),g=n(85368),y=n(39541),Z=n(61284),b=n(45510),w=n(86302),x=n(13233),k=n(54631),C=n(99397),S=n(48306),T=n.n(S),E=n(69994),R=n(14806),G=n(34227),I=n(64804),_=R.q6.define();function D(e){var t=e.editorRef,n=e.onChange,r=e.placeholder,a=e.skeleton,l=e.language,c=e.skeletonClosingBracket,u=e.indentSize,s=void 0===u?2:u,d=(0,I.Z)(),f=d.ref,p=d.view,h=o.useRef(a?"".concat(a,"\n"):""),v=c?"\n".concat(c):"",m=" ".repeat(s);return o.useEffect((function(){if(p&&p.state.doc.length){var e=h.current;h.current=a?"".concat(a,"\n"):"",p.dispatch({changes:{from:0,to:e.length-1,insert:a},annotations:[R.YW.addToHistory.of(!1),_.of(!0)]})}}),[p,a]),o.useEffect((function(){if(p){var e=R.yy.changeFilter.of((function(e){return!!e.annotation(_)||[-1,h.current.length,e.startState.doc.length-v.length,e.startState.doc.length+1]})),i=E.tk.updateListener.of((function(e){var t=e.state.doc.slice(h.current.length,e.state.doc.toString().length-v.length).toString();if(t!=="".concat(m).concat(r,"\n").concat(m)?n(t):n(""),e.docChanged&&e.state.doc.length===h.current.length+v.length){var i="\n"+m;p.dispatch({changes:{from:h.current.length-1,insert:"\n"+m},selection:{anchor:h.current.length+i.length-1},annotations:[_.of(!0)]})}})),o="".concat(h.current).concat(m).concat(r,"\n").concat(v);p.dispatch({changes:{from:0,to:p.state.doc.length,insert:o},effects:R.Py.appendConfig.of([e,i]),selection:{anchor:o.length},annotations:R.YW.addToHistory.of(!1)}),t({setValue:function(e){if(e){var t=p.state.doc.toString().length;p.dispatch({changes:{from:h.current.length,to:t-v.length,insert:e},annotations:R.YW.addToHistory.of(!1)})}},focus:function(){return p.focus()}})}}),[n,l,p,v,t,r,m]),(0,i.BX)("div",{className:"jsx-c0a72647b9c20ef editor",children:[(0,i.tZ)(G.Z,{ref:f,language:l,indentSize:2,fontSize:14,indentIsSpaces:!0}),(0,i.tZ)(T(),{id:"c0a72647b9c20ef",children:".editor.jsx-c0a72647b9c20ef{overflow:auto;position:absolute;width:100%;height:100%}.loader.jsx-c0a72647b9c20ef{height:100%;width:100%;z-index:5}"})]})}var B=n(625),P=n(63837);function A(e){var t,n,a,l,c=e.isOpen,s=e.meta,h=e.language,w=e.hasMetadata,C=e.onClose,S=(0,u.Z)(),T=(0,x.Z)().showConfirm,E=(0,r.Z)(o.useState(null),2),R=E[0],G=E[1],I=(0,r.Z)(o.useState(!0),2),_=I[0],D=I[1],A=(0,r.Z)(o.useState((null===s||void 0===s?void 0:s.initialization)||""),2),N=A[0],O=A[1],F=(0,r.Z)(o.useState((null===s||void 0===s?void 0:s.imports)||""),2),W=F[0],H=F[1],V=(0,r.Z)(o.useState((null===s||void 0===s?void 0:s.setup)||""),2),z=V[0],j=V[1],q=(0,r.Z)(o.useState((null===s||void 0===s?void 0:s.tearDown)||""),2),$=q[0],Y=q[1],K=(0,r.Z)((0,p.rU)({onError:function(e){return G(e.message)},update:function(e,t){var n,r=null===(n=t.data)||void 0===n?void 0:n.createReplUnitTestMeta;r&&("UserError"===r.__typename?G(r.message):"ReplUnitTestMeta"===r.__typename&&(e.modify({id:e.identify({__typename:"Repl",id:S}),fields:{unitTests:function(t){var n=e.writeFragment({data:r,fragment:p.aA});return t?(0,f.Z)((0,d.Z)({},t),{meta:(0,d.Z)({},n)}):{__typename:"ReplUnitTestsWithMeta",meta:n,tests:[]}}}}),T("Setup saved!"),C()))}}),2),Q=K[0],J=K[1],ee=(0,r.Z)((0,p.AF)({onError:function(e){return G(e.message)},onCompleted:function(e){var t=e.updateReplUnitTestMeta;t&&("UserError"===t.__typename?G(t.message):"ReplUnitTestMeta"===t.__typename&&(T("Imports updated!"),C()))}}),2),te=ee[0],ne=ee[1],re=(0,k.x)(h),ie=W!==(null===s||void 0===s?void 0:s.imports)||N!==(null===s||void 0===s?void 0:s.initialization)||z!==(null===s||void 0===s?void 0:s.setup)||$!==(null===s||void 0===s?void 0:s.tearDown),oe=J.loading||ne.loading;return(0,i.tZ)(m.u,{isOpen:c,onRequestClose:C,maxWidth:872,children:(0,i.BX)(g.G,{css:[y.l0.colWithGap(24)],children:[(0,i.tZ)(Z.h4,{level:1,variant:"headerDefault",children:"Setup"}),(0,i.tZ)(L,{unitTestsLib:re,onChange:H,language:h,initialValue:null!==(t=null===s||void 0===s?void 0:s.imports)&&void 0!==t?t:""}),(0,i.tZ)(g.G,{onClick:function(){return D(!_)},css:{cursor:"pointer"},children:(0,i.BX)(g.G,{css:[y.l0.rowWithGap(8),y.l0.align.center],children:[(0,i.tZ)(Z.h4,{level:2,variant:"headerDefault",children:"Advanced"}),(0,i.tZ)(v.Z,{color:"var(--foreground-default)",size:20,rotate:_?270:0})]})}),_?null:(0,i.BX)(g.G,{css:[y.l0.colWithGap(8)],children:[(0,i.tZ)(U,{unitTestsLib:re,onChange:O,language:h,initialValue:null!==(n=null===s||void 0===s?void 0:s.initialization)&&void 0!==n?n:""}),(0,i.tZ)(X,{unitTestsLib:re,onChange:j,language:h,initialValue:null!==(a=null===s||void 0===s?void 0:s.setup)&&void 0!==a?a:""}),(0,i.tZ)(M,{unitTestsLib:re,onChange:Y,language:h,initialValue:null!==(l=null===s||void 0===s?void 0:s.tearDown)&&void 0!==l?l:""})]}),(0,i.BX)(g.G,{css:[y.l0.flex.row,y.l0.justify.spaceBetween],children:[(0,i.tZ)(Z.xv,{css:[y.l0.color.accentNegativeStronger],children:R}),(0,i.BX)(g.G,{css:[y.l0.rowWithGap(12)],children:[(0,i.tZ)(b.zx,{disabled:oe,onClick:C,text:"Cancel"}),(0,i.tZ)(b.zx,{colorway:"primary",disabled:!ie||oe,onClick:function(){(0,B.j)(B.U3.REPL_UNIT_TEST_USED,{action:"modifiedSetup"}),w?te({variables:{input:{initialization:N,imports:W,setup:z,tearDown:$,replId:S}}}):Q({variables:{input:{initialization:N,imports:W,setup:z,tearDown:$,replId:S}}})},iconLeft:(0,i.tZ)(P.Z,{}),text:"".concat(oe?"Saving...":"Save")})]})]})]})})}function L(e){var t=e.unitTestsLib,n=e.onChange,a=e.language,l=e.initialValue,c=(0,r.Z)(o.useState(null),2),u=c[0],s=c[1];o.useEffect((function(){u&&(u.setValue(l),u.focus())}),[u,l]);var d=t.defaultImports().trim();return(0,i.BX)(g.G,{css:[y.l0.colWithGap(8)],children:[(0,i.BX)(g.G,{css:[y.l0.flex.row,y.l0.justify.spaceBetween,y.l0.align.center],children:[(0,i.tZ)(Z.h4,{level:2,variant:"subheadDefault",children:"Imports"}),(0,i.tZ)(w.Z,{iconLeft:(0,i.tZ)(C.Z,{}),text:"Docs",href:"https://docs.replit.com/teams-edu/unit-testing",target:"_blank",outlined:!0})]}),(0,i.tZ)(g.G,{css:[y.l0.backgroundColor.backgroundDefault,y.l0.borderRadius(8),{border:"1px solid var(--background-highest)"}],children:(0,i.tZ)(g.G,{css:[y.l0.borderRadius(8),y.l0.height(200),y.l0.position.relative],children:(0,i.tZ)(D,{onChange:n,placeholder:"".concat(t.getCommentChar()," Add imports here"),editorRef:s,language:a,skeleton:d,skeletonClosingBracket:"",indentSize:0})})})]})}function U(e){var t=e.unitTestsLib,n=e.onChange,a=e.language,l=e.initialValue,c=(0,r.Z)(o.useState(null),2),u=c[0],s=c[1];o.useEffect((function(){u&&u.setValue(l)}),[u,l]);var d=t.classConstructorName();return(0,i.BX)(g.G,{css:[y.l0.colWithGap(8)],children:[(0,i.BX)(g.G,{css:[y.l0.flex.row,y.l0.justify.spaceBetween,y.l0.align.center],children:[(0,i.tZ)(Z.h4,{level:2,variant:"subheadDefault",children:"Initialization"}),(0,i.tZ)(w.Z,{iconLeft:(0,i.tZ)(C.Z,{}),text:"Docs",href:"https://docs.replit.com/teams-edu/unit-testing",target:"_blank",outlined:!0})]}),d?(0,i.BX)(Z.xv,{children:["Hint: constructor name is ",(0,i.tZ)("code",{children:d}),"."]}):null,(0,i.tZ)(g.G,{css:[y.l0.backgroundColor.backgroundDefault,y.l0.borderRadius(8),{border:"1px solid var(--background-highest)"}],children:(0,i.tZ)(g.G,{css:[y.l0.borderRadius(8),y.l0.height(200),y.l0.position.relative],children:(0,i.tZ)(D,{onChange:n,placeholder:"".concat(t.getCommentChar()," Add initialization code here"),editorRef:s,language:a,skeleton:"",skeletonClosingBracket:"",indentSize:0})})})]})}function X(e){var t=e.unitTestsLib,n=e.onChange,a=e.language,l=e.initialValue,c=(0,r.Z)(o.useState(null),2),u=c[0],s=c[1];o.useEffect((function(){u&&u.setValue(l)}),[u,l]);var d=t.setupIntro().trim();return(0,i.BX)(g.G,{css:[y.l0.colWithGap(8)],children:[(0,i.BX)(g.G,{css:[y.l0.flex.row,y.l0.justify.spaceBetween,y.l0.align.center],children:[(0,i.tZ)(Z.h4,{level:2,variant:"subheadDefault",children:"Setup"}),(0,i.tZ)(w.Z,{iconLeft:(0,i.tZ)(C.Z,{}),text:"Docs",href:"https://docs.replit.com/teams-edu/unit-testing",target:"_blank",outlined:!0})]}),(0,i.tZ)(g.G,{css:[y.l0.backgroundColor.backgroundDefault,y.l0.borderRadius(8),{border:"1px solid var(--background-highest)"}],children:(0,i.tZ)(g.G,{css:[y.l0.borderRadius(8),y.l0.height(200),y.l0.position.relative],children:(0,i.tZ)(D,{onChange:n,placeholder:"".concat(t.getCommentChar()," Add setup code here"),editorRef:s,language:a,skeleton:d,skeletonClosingBracket:t.hasClosingBrackets()?t.getClosingBrackets():""})})})]})}function M(e){var t=e.unitTestsLib,n=e.onChange,a=e.language,l=e.initialValue,c=(0,r.Z)(o.useState(null),2),u=c[0],s=c[1];o.useEffect((function(){u&&u.setValue(l)}),[u,l]);var d=t.tearDownIntro().trim();return(0,i.BX)(g.G,{css:[y.l0.colWithGap(8)],children:[(0,i.BX)(g.G,{css:[y.l0.flex.row,y.l0.justify.spaceBetween,y.l0.align.center],children:[(0,i.tZ)(Z.h4,{level:2,variant:"subheadDefault",children:"Teardown"}),(0,i.tZ)(w.Z,{iconLeft:(0,i.tZ)(C.Z,{}),text:"Docs",href:"https://docs.replit.com/teams-edu/unit-testing",target:"_blank",outlined:!0})]}),(0,i.tZ)(g.G,{css:[y.l0.backgroundColor.backgroundDefault,y.l0.borderRadius(8),{border:"1px solid var(--background-highest)"}],children:(0,i.tZ)(g.G,{css:[y.l0.borderRadius(8),y.l0.height(200),y.l0.position.relative],children:(0,i.tZ)(D,{onChange:n,placeholder:"".concat(t.getCommentChar()," Add teardown code here"),editorRef:s,language:a,skeleton:d,skeletonClosingBracket:t.hasClosingBrackets()?t.getClosingBrackets():""})})})]})}var N=function(e){var t=e.language,n=e.meta,a=(0,r.Z)(o.useState(!1),2),l=a[0],c=a[1];return(0,i.BX)(i.HY,{children:[(0,i.tZ)(b.zx,{iconLeft:(0,i.tZ)(h.Z,{}),onClick:function(){return c(!0)},text:"Setup"}),(0,i.tZ)(A,{language:t,isOpen:l,onClose:function(){return c(!1)},hasMetadata:Boolean(null===n||void 0===n?void 0:n.id),meta:n})]})},O=n(9970),F=n(51631),W=n(1809),H=n(1050),V=n(54873),z=n(80336),j=n(88477),q=n(39137),$=n(87076),Y=n(17309),K=n(12318),Q=n(57135),J=n(96583),ee=n(66016),te=n(45285),ne=n(1468),re=n(40842),ie="\x1b[0;31m",oe="\x1b[0m",ae=["\u28fe","\u28fd","\u28fb","\u28bf","\u287f","\u28df","\u28ef","\u28f7","\u2801","\u2802","\u2804","\u2840","\u2880","\u2820","\u2810","\u2808"];function le(e){var t=e.name,n=e.failureMessage,r=e.stack;return"\u274c\t".concat(ie).concat(t).concat(oe,"\r").concat(n?"\nMessage: ".concat(n,"\r"):"","\nStack Trace:\r\n").concat(r.replace(/\n/g,"\r\n"),"\n\r\n\r\n")}var ce=function(e){var t=e.language,n=e.unitTests,a=e.onResult,l=e.trackingContext,c=e.getRunnerOutput,u=function(e){var t,n;null===(t=c())||void 0===t||null===(n=t.write)||void 0===n||n.call(t,e)},s=function(){var e,t;null===(e=c())||void 0===e||null===(t=e.clear)||void 0===t||t.call(e),u("\r\n")},f=(0,r.Z)(o.useState(!1),2),p=f[0],h=f[1],v=(0,te.Z)(),m=v.container,y=v.packager,Z=v.fs,w=null,x=function(){h(!1),(0,re.WT)(Z),w&&(w.stopLogSpinner(),w=null)},C=function(){var e=(0,Q.Z)((function(){var e,r,i,o,c,f,v,g,b,C,S,T,E,R,G,I,_,D,P,A,L,U;return(0,J.__generator)(this,(function(X){switch(X.label){case 0:if(p)return[2];if(e=null,w={startLogSpinner:function(t){if(e)throw new Error("A spinner is already active! call stopSpinner first or use the update callback to update the active spinner's message.");var n=t,r=0;return e=setInterval((function(){r++;var e=ae[r%ae.length];if(!w)throw new Error("Expected logger");w.clearLine(),w.logMessage(e+" "+n)}),100),function(e){n=e}},stopLogSpinner:function(){e&&clearInterval(e),e=null},logMessage:u,clearLogs:s,clearLine:function(){if(!w)throw new Error("Expected logger");w.logMessage("\x1b[1K\r")}},!n)throw new Error("Run button should not be active if there are no tests");return h(!0),(0,B.j)(B.U3.REPL_UNIT_TEST_USED,{trackingData:{context:l},action:"ranTests"}),w.clearLogs(),[4,(r=(0,k.x)(t)).buildAndRunTests((0,d.Z)({container:m,fs:Z,packager:y,logger:w},n))];case 1:if(i=X.sent(),w.stopLogSpinner(),w.clearLine(),w.clearLogs(),null!==i.error)return w.logMessage("".concat(ie).concat(i.error).concat(oe,"\r\n")),x(),n.tests.map((function(e){return{testId:e.id,didPass:!1}})),[2];if(o=i.result.passed?[]:i.result.failures.map((function(e){return r.parseTestResultName(e.name)})),c=[],f=n.tests.map((function(e){return r.getProperTestName(e.name)})),v=o.filter((function(e){return!f.includes(e)})),v.length)b=v[0],C=i.result.failures[0].stack,w.logMessage(le({name:b,failureMessage:"The following error occurred but was not related to a single unit test",stack:C})),(g=c).push.apply(g,(0,O.Z)(n.tests.map((function(e){return{testId:e.id,didPass:!1}}))));else{S=!0,T=!1,E=void 0;try{for(R=n.tests[Symbol.iterator]();!(S=(G=R.next()).done);S=!0)I=G.value,_=r.getProperTestName(I.name),D=o.indexOf(_),P=-1===D,c.push({testId:I.id,didPass:P}),P?w.logMessage((M=_,"\u2705\t".concat("\x1b[0;32m").concat(M).concat(oe,"\r\n\r\n"))):(A=i.result.failures[D].stack,w.logMessage(le({name:_,failureMessage:I.failureMessage,stack:A})))}catch(N){T=!0,E=N}finally{try{S||null==R.return||R.return()}finally{if(T)throw E}}}return a(c),L=n.tests.length,i.result.passed?(w.logMessage("".concat("\x1b[48;5;22m","  All tests have passed ").concat(L,"/").concat(L,"  ").concat(oe,"\r\n")),x(),[2]):(U=L-i.result.failures.length,w.logMessage("".concat("\x1b[48;5;88m","  ").concat(U,"/").concat(L," passed, see errors above  ").concat(oe)),x(),[2])}var M}))}));return function(){return e.apply(this,arguments)}}(),S=function(){var e=(0,Q.Z)((function(){return(0,J.__generator)(this,(function(e){try{C()}catch(t){ne.c_.withScope((function(e){e.setTag("unittestsrun","true"),ne.c_.captureException(t)})),w&&w.logMessage("\r\n".concat(ie," Sorry, we have failed to run your tests. Please try again or contact support. ").concat(oe,"\r\n")),x()}return[2]}))}));return function(){return e.apply(this,arguments)}}();return Boolean(n&&n.tests.length>0)?(0,i.tZ)(g.G,{children:(0,i.tZ)(b.zx,{disabled:p,colorway:"primary",iconLeft:(0,i.tZ)(ee.Z,{}),onClick:S,text:p?"Running tests...":"Run tests"})}):null},ue=n(1734);function se(e){var t=e.isOpen,n=e.test,a=e.language,l=e.onClose,s=e.trackingContext,h=(0,u.Z)(),v=(0,x.Z)().showConfirm,C=(0,r.Z)(o.useState(null),2),S=C[0],T=C[1],E=(0,r.Z)(o.useState(""),2),R=E[0],G=E[1],I=(0,r.Z)(o.useState(""),2),_=I[0],A=I[1],L=(0,r.Z)(o.useState(""),2),U=L[0],X=L[1],M=(0,r.Z)((0,p.Hd)({onError:function(e){return X(e.message)},update:function(e,t){var n,r=null===(n=t.data)||void 0===n?void 0:n.createReplUnitTest;r&&("UserError"===r.__typename?X(r.message):"ReplUnitTest"===r.__typename&&(e.modify({id:e.identify({__typename:"Repl",id:h}),fields:{unitTests:function(t){var n=e.writeFragment({data:r,fragment:p.Rb});return t?(0,f.Z)((0,d.Z)({},t),{tests:(0,O.Z)(t.tests).concat([n])}):{__typename:"ReplUnitTestsWithMeta",meta:null,tests:[n]}}}}),v("Test created!"),l()))}}),2),N=M[0],F=M[1],H=(0,r.Z)((0,p.kO)({onError:function(e){return X(e.message)},onCompleted:function(e){var t=e.updateReplUnitTest;t&&("UserError"===t.__typename?X(t.message):"ReplUnitTest"===t.__typename&&(v("Test updated!"),l()))}}),2),V=H[0],$=H[1],Q=(0,K.Y)("",(function(e){return e.length<=0?{message:"Must include test name"}:e.trim().split(" ").length>1?{message:"Test name must only be one word"}:void 0}));o.useEffect((function(){Q.setValue((null===n||void 0===n?void 0:n.name)||"",{preventTouch:!0}),A((null===n||void 0===n?void 0:n.failureMessage)||""),G((null===n||void 0===n?void 0:n.code)||""),S&&S.setValue((null===n||void 0===n?void 0:n.code)||"")}),[n,S]),o.useEffect((function(){X("")}),[R,X]);var J=(0,k.x)(a),ee="".concat(J.getCommentChar()," Enter code here"),te=!n||n.name!==Q.value||n.code!==R||n.failureMessage!==_,ne=F.loading||$.loading,re=J.testIntro(Q.value||""),ie=J.hasClosingBrackets()?J.getClosingBrackets():"",oe=(0,r.Z)(o.useState(!1),2),ae=oe[0],le=oe[1],ce=function(){S&&(S.setValue("  "+J.exampleTest.code),S.focus()),G(J.exampleTest.code)};return(0,i.tZ)(m.u,{isOpen:t,onRequestClose:l,maxWidth:872,children:(0,i.BX)(g.G,{css:[y.l0.colWithGap(24)],children:[(0,i.tZ)(Z.h4,{level:1,variant:"headerDefault",children:"New unit test"}),(0,i.BX)(g.G,{css:[y.l0.colWithGap(8)],children:[(0,i.tZ)("label",{htmlFor:"name",children:(0,i.tZ)(Z.h4,{level:2,variant:"subheadDefault",children:"Name"})}),(0,i.tZ)(Y.Z,{id:"name",label:"Test name",status:null,autoFocus:!0,required:!0,value:Q.value,isValid:Q.isValid,error:Q.error,warning:Q.warning,touched:Q.touched,onChange:function(e){Q.setValue(e.target.value)},placeholder:"Enter test name here"})]}),(0,i.BX)(g.G,{css:[y.l0.colWithGap(8)],children:[(0,i.BX)(g.G,{css:[y.l0.flex.row,y.l0.align.center,y.l0.justify.spaceBetween],children:[(0,i.tZ)(Z.h4,{level:2,variant:"subheadDefault",children:"Code"}),(0,i.BX)(g.G,{css:[y.l0.rowWithGap(4)],children:[(0,i.BX)(ue.Z,{isOpen:ae,onClickOutside:function(){return le(!1)},placement:"bottom-end",children:[(0,i.tZ)(b.zx,{iconLeft:(0,i.tZ)(W.Z,{}),small:!0,outlined:!0,text:"View an example",onClick:function(){[ee,J.exampleTest.code].includes(R.trim())?ce():le(!0)}}),(0,i.BX)(g.G,{children:["This will overwrite your current test. Are you sure?",(0,i.BX)(g.G,{css:[y.l0.rowWithGap(4),y.l0.pt(8)],children:[" ",(0,i.tZ)(b.zx,{text:"No, go back",small:!0,iconLeft:(0,i.tZ)(z.Z,{}),onClick:function(){le(!1)}}),(0,i.tZ)(b.zx,{text:"Yes, delete test",colorway:"negative",small:!0,iconLeft:(0,i.tZ)(P.Z,{}),onClick:function(){ce(),le(!1)}})]})]})]}),(0,i.tZ)(w.Z,{iconLeft:(0,i.tZ)(j.Z,{}),small:!0,outlined:!0,text:"View docs",target:"_blank",href:"https://docs.replit.com/teams-edu/unit-testing"})]})]}),(0,i.tZ)(g.G,{css:[y.l0.backgroundColor.backgroundDefault,y.l0.borderRadius(8),{border:"1px solid var(--background-highest)"}],children:(0,i.tZ)(g.G,{css:[y.l0.borderRadius(8),y.l0.height(200),y.l0.position.relative],children:(0,i.tZ)(D,{skeleton:re,skeletonClosingBracket:ie,language:a,editorRef:T,onChange:G,placeholder:ee})})})]}),(0,i.BX)(g.G,{css:[y.l0.colWithGap(8)],children:[(0,i.tZ)(Z.h4,{level:2,variant:"subheadDefault",children:"Failure message"}),(0,i.tZ)(q.II,{value:_,onChange:function(e){return A(e.target.value)},placeholder:"This will be displayed on test failure"})]}),(0,i.BX)(g.G,{css:[y.l0.flex.row,y.l0.align.center,y.l0.justify.spaceBetween],children:[(0,i.tZ)(Z.xv,{css:[y.l0.color.accentNegativeStronger],multiline:!1,children:U}),(0,i.BX)(g.G,{css:[y.l0.rowWithGap(12)],children:[(0,i.tZ)(b.zx,{text:"Cancel",onClick:l}),(0,i.tZ)(b.zx,{text:"".concat(ne?"Creating test...":"Create test"),iconLeft:(0,i.tZ)(c.Z,{}),colorway:"primary",disabled:!te||ne,onClick:function(){Q.validate()||(R.length<=0?X("Test cannot be empty"):n?(V({variables:{input:{name:Q.value,code:R,failureMessage:_,testId:n.id}}}),(0,B.j)(B.U3.REPL_UNIT_TEST_USED,{trackingData:{context:s},action:"modifiedTest"})):(N({variables:{input:{name:Q.value,code:R,failureMessage:_,replId:h}}}),(0,B.j)(B.U3.REPL_UNIT_TEST_USED,{trackingData:{context:s},action:"addedTest"})))}})]})]})]})})}function de(e){var t=e.testId,n=e.onClose,a=(0,x.Z)().showConfirm,l=(0,u.Z)(),c=(0,r.Z)((0,p.IV)({onError:function(e){return k(e.message)},update:function(e,r){var i,o=null===(i=r.data)||void 0===i?void 0:i.deleteReplUnitTest;o&&("UserError"===o.__typename?k(o.message):"ReplUnitTest"===o.__typename&&t&&(e.modify({id:e.identify({__typename:"Repl",id:l}),fields:{unitTests:function(e,n){var r=n.readField,i=e.tests.filter((function(e){return r("id",e)!==t}));return(0,f.Z)((0,d.Z)({},e),{tests:(0,O.Z)(i)})}}}),(0,B.j)(B.U3.REPL_UNIT_TEST_USED,{action:"removedTest"}),a("Test deleted!"),n()))}}),2),s=c[0],h=c[1],v=(0,r.Z)(o.useState(""),2),w=v[0],k=v[1];return(0,i.tZ)(m.u,{isOpen:Boolean(t),onRequestClose:n,children:(0,i.BX)(g.G,{css:[y.l0.colWithGap(24)],children:[(0,i.tZ)(Z.h4,{level:1,variant:"headerDefault",children:"Delete test?"}),(0,i.tZ)(Z.xv,{children:"Are you sure you want to delete this test? This cannot be undone."}),(0,i.BX)(g.G,{css:[y.l0.flex.row,y.l0.justify.spaceBetween,y.l0.align.center],children:[(0,i.tZ)(Z.xv,{css:[y.l0.color.accentNegativeStronger],children:w}),(0,i.BX)(g.G,{css:[y.l0.rowWithGap(12),y.l0.justify.end],children:[(0,i.tZ)(b.zx,{text:"Cancel",disabled:h.loading,onClick:n}),(0,i.tZ)(b.zx,{text:"Yes, delete this test",colorway:"negative",iconLeft:(0,i.tZ)(V.Z,{}),disabled:h.loading,onClick:function(){if(!t)throw new Error("Expected a testId");s({variables:{testId:t}})}})]})]})]})})}var fe=function(e){var t=e.unitTests,n=e.isAddingTest,a=e.onClose,l=e.language,s=e.canWrite,d=e.trackingContext,f=void 0===d?"default":d,h=e.getRunnerOutput,v=(0,r.Z)(o.useState(n),2),m=v[0],w=v[1],x=(0,r.Z)(o.useState(null),2),k=x[0],C=x[1],S=(0,r.Z)(o.useState(null),2),E=S[0],R=S[1],G=(0,u.Z)(),I=(0,r.Z)((0,p.lQ)(),1)[0],_=(null===t||void 0===t?void 0:t.tests)||[];return(0,i.BX)(g.G,{css:[y.l0.colWithGap(16)],children:[(0,i.tZ)(ce,{language:l,unitTests:t,onResult:function(e){I({variables:{input:{replId:G,results:e},replId:G}})},getRunnerOutput:h,trackingContext:f}),_.length>0?(0,i.tZ)(g.G,{css:[y.l0.colWithGap(8),y.l0.align.center],children:_.map((function(e){var t,n;return"ReplUnitTestLastRun"===(null===(t=e.lastRun)||void 0===t?void 0:t.__typename)&&(e.lastRun.status===F.$I.Passed?n="passed-test":e.lastRun.status===F.$I.Failed&&(n="failed-test")),(0,i.tZ)(g.G,{className:"test ".concat(n),css:{width:"100%"},children:(0,i.BX)(g.G,{css:[y.l0.flex.row,y.l0.justify.spaceBetween,y.l0.align.center,y.l0.p(8),y.l0.borderRadius(8),{border:"1px solid var(--background-highest);"}],children:[(0,i.tZ)(Z.xv,{multiline:!1,children:e.name}),s?(0,i.BX)(g.G,{css:[y.l0.rowWithGap(8)],children:[(0,i.tZ)($.h,{onClick:function(){C(e)},alt:"Edit",children:(0,i.tZ)(H.Z,{})}),(0,i.tZ)($.h,{onClick:function(){R(e.id)},alt:"Delete",children:(0,i.tZ)(V.Z,{})})]}):null]})},e.id)}))}):(0,i.BX)(g.G,{css:[y.l0.colWithGap(8),y.l0.align.center],children:[(0,i.tZ)(Z.xv,{css:[y.l0.textAlign.center],children:"Looks like you don\u2019t have any tests yet!"}),s?(0,i.tZ)(b.zx,{text:"Add test",onClick:function(){return w(!0)},iconLeft:(0,i.tZ)(c.Z,{})}):null]}),(0,i.tZ)(se,{isOpen:m||Boolean(k)||n,test:k,language:l,onClose:function(){C(null),w(!1),a&&a()},trackingContext:f}),(0,i.tZ)(de,{testId:E,onClose:function(){return R(null)}}),(0,i.tZ)(T(),{id:"a2df1ed8108a6cad",children:".tests-wrapper.jsx-a2df1ed8108a6cad{-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);padding:var(--space-16)0;width:100%}.test.jsx-a2df1ed8108a6cad{padding:var(--space-8)var(--space-8);border:1px solid var(--outline-dimmest);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4)}.passed-test.jsx-a2df1ed8108a6cad{border-color:var(--accent-positive-default);background:var(--accent-positive-dimmer)}.failed-test.jsx-a2df1ed8108a6cad{border-color:var(--accent-negative-default);background:var(--accent-negative-dimmer)}"})]})},pe=n(27522),he=n(48667);var ve=function(e){var t=e.onClick,n=e.hasTests,r=n?{"aria-label":"Delete all tests to switch test type","data-microtip-position":"bottom","data-microtip-size":"medium",role:"tooltip"}:{};return(0,i.BX)("div",(0,f.Z)((0,d.Z)({},r),{className:"jsx-44786ca38dd3aa42 "+(r&&null!=r.className&&r.className||"back-button"),children:[(0,i.tZ)(pe.Z,{filled:!1,border:!1,size:"small",Icon:he.Z,onClick:t,disabled:n,children:"Switch test type"}),(0,i.tZ)(T(),{id:"44786ca38dd3aa42",children:".back-button.jsx-44786ca38dd3aa42{width:100%;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center}"})]}))},me=n(72196);var ge=function(e){var t,n,d,f,p=e.onBack,h=e.getRunnerOutput,v=(0,u.Z)(),m=(0,r.Z)(o.useState(!1),2),b=m[0],w=m[1],x=(0,me.Z)(),k=x.language,C=x.isLoading,S=(0,a.CH)({variables:{replId:v}}),T=null===(t=S.data)||void 0===t?void 0:t.repl;if(S.loading||C)return(0,i.tZ)(g.G,{css:[y.l0.backgroundColor.backgroundDefault,y.l0.flex.row,y.l0.align.center,y.l0.justify.center,y.l0.p(16)],children:(0,i.tZ)(s.Z,{})});if(!T||"Repl"!==T.__typename)return(0,i.tZ)(g.G,{css:[y.l0.p(16)],children:(0,i.tZ)(Z.xv,{css:{textAlign:"center"},children:"Unable to fetch tests, please try again."})});if(!k)return(0,i.tZ)(g.G,{css:[y.l0.p(16)],children:(0,i.tZ)(Z.xv,{css:{textAlign:"center"},children:"Unit tests are currently only supported in Java, Python, and Node.js Repls."})});var E="default";(null===T||void 0===T?void 0:T.isProject)?E="project_repl":(null===T||void 0===T?void 0:T.isProjectFork)&&(E="submission_repl");var R=Boolean((null===(n=T.unitTests)||void 0===n?void 0:n.tests)&&T.unitTests.tests.length>0);return(null===T||void 0===T||null===(d=T.currentUserPermissions)||void 0===d?void 0:d.writeTests)?(0,i.BX)(g.G,{css:[y.l0.colWithGap(16),y.l0.align.center],children:[(0,i.BX)(g.G,{css:[y.l0.flex.row,y.l0.justify.spaceBetween,y.l0.align.center,{width:"100%"}],children:[(0,i.tZ)(l.Z,{truncate:!0,level:4,children:"Unit tests"}),(0,i.tZ)($.h,{alt:"Add test",size:32,onClick:function(){return w(!0)},children:(0,i.tZ)(c.Z,{})})]}),(0,i.BX)(g.G,{css:[y.l0.colWithGap(8),y.l0.maxWidth(256),{width:"80%"}],children:[(0,i.tZ)(N,{language:k,meta:(null===(f=T.unitTests)||void 0===f?void 0:f.meta)||null}),(0,i.tZ)(fe,{isAddingTest:b,unitTests:(null===T||void 0===T?void 0:T.unitTests)||null,onClose:function(){return w(!1)},language:k,canWrite:!0,trackingContext:E,getRunnerOutput:h}),p?(0,i.tZ)(ve,{hasTests:R,onClick:p}):null]})]}):(0,i.BX)(g.G,{css:[y.l0.colWithGap(16)],children:[(0,i.tZ)(Z.h4,{level:1,variant:"headerDefault",children:"Unit tests"}),(0,i.tZ)(g.G,{css:{width:"100%",overflowY:"auto"},children:(0,i.tZ)(fe,{unitTests:(null===T||void 0===T?void 0:T.unitTests)||null,language:k,isAddingTest:!1,canWrite:!1,trackingContext:E,getRunnerOutput:h})})]})}},54631:function(e,t,n){n.d(t,{x:function(){return E},y:function(){return T}});var r=n(57135),i=n(9970),o=n(96583),a=n(625),l=n(1468),c=n(66091),u=function(){function e(t){(0,c.Z)(this,e),this.code="",this.currentIndent=0,this.lib=t}var t=e.prototype;return t.indent=function(){this.currentIndent+=1},t.dedent=function(){if(0===this.currentIndent)throw new Error("indent at zero");this.currentIndent-=1},t.addIndents=function(){for(var e=0;e<this.currentIndent;e++)this.code+="  "},t.push=function(e){var t=e.split("\n"),n=!0,r=!1,i=void 0;try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value;this.addIndents(),this.code+=l,this.newLine()}}catch(c){r=!0,i=c}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}},t.newLine=function(){this.code+="\n"},t.closeCurly=function(){this.addIndents(),this.code+=this.lib.getClosingBrackets()},t.toString=function(){return this.code},e}(),s=n(40842),d={testRunnerName:function(){return"TestRunner"},testSuiteName:function(){return"TestSuite"},defaultImports:function(){return"import org.junit.Before;\nimport org.junit.After;\nimport org.junit.Test;\nimport static org.junit.Assert.*;"},classIntro:function(){return"public class ".concat((0,s.Og)(d.testSuiteName())," {")},classConstructorName:function(){return(0,s.Og)(d.testSuiteName())},setupIntro:function(){return"@Before\npublic void setUp() {"},tearDownIntro:function(){return"@After\npublic void tearDown() {"},testIntro:function(e){return"".concat(d.testIntroPreName()).concat(e).concat(d.testIntroPostName())},testIntroPreName:function(){return"@Test\npublic void "},testIntroPostName:function(){return"() {"},getProperTestName:function(e){return e},parseTestResultName:function(e){return e.replace("(".concat((0,s.Og)(d.testSuiteName()),")"),"")},buildSuite:function(e){var t=e.tests,n=e.meta,r=new u(d);r.push(d.defaultImports()),n&&n.imports&&r.push(n.imports),r.newLine(),r.push(d.classIntro()),r.newLine(),r.indent(),n&&(n.initialization&&(r.push(n.initialization),r.newLine()),n.setup&&(r.push(d.setupIntro()),r.indent(),r.push(n.setup),r.dedent(),r.closeCurly(),r.newLine(),r.newLine()),n.tearDown&&(r.push(d.tearDownIntro()),r.indent(),r.push(n.tearDown),r.dedent(),r.closeCurly(),r.newLine(),r.newLine()));var i=!0,o=!1,a=void 0;try{for(var l,c=t[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value;s.code&&(r.push(d.testIntro(s.name)),r.indent(),r.push(s.code),r.dedent(),r.closeCurly(),r.newLine(),r.newLine())}}catch(f){o=!0,a=f}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}return r.dedent(),r.closeCurly(),r.toString()},runSuite:function(e){return v.apply(this,arguments)},buildAndRunTests:function(e){var t=e.container,n=e.fs,r=e.packager,i=e.logger,o=e.tests,a=e.meta,l=d.buildSuite({tests:o,meta:a});return d.runSuite({container:t,fs:n,packager:r,logger:i,suiteCode:l})},hasClosingBrackets:function(){return!0},getClosingBrackets:function(){return"}"},hasSemicolon:function(){return!0},getCommentChar:function(){return"//"},getHelpText:function(){return"no react in this bitch either"},captureSetupError:function(e){var t=e.tag,n=e.raw;l.c_.withScope((function(e){e.setTag("unitTestLib","true"),e.setExtra("raw",n),e.setExtra("language","java10"),l.c_.captureException(t)}))},exampleTest:{id:-1,failureMessage:"An Adder class should have an add method that adds two ints and returns the result",name:"add",code:"Adder adder = new Adder();\nint result = adder.add(1, 2);\nassertEquals(3, result);\n"}},f="__UNIT_TEST_RESULT_START__",p="__UNIT_TEST_RESULT_END__",h="import org.json.simple.JSONArray;\nimport org.json.simple.JSONObject;\nimport org.junit.runner.JUnitCore;\nimport org.junit.runner.Result;\nimport org.junit.runner.notification.Failure;\n\npublic class ".concat((0,s.Og)(d.testRunnerName())," {\n    public static void main(String[] args) {\n      Result result = JUnitCore.runClasses(").concat((0,s.Og)(d.testSuiteName()),'.class);\n      JSONArray failures = new JSONArray();\n\n        for (Failure failure : result.getFailures()) {\n            JSONObject obj = new JSONObject();\n            obj.put("name", failure.getTestHeader());\n            obj.put("stack", failure.getTrace());\n            failures.add(obj);\n        }\n        JSONObject out = new JSONObject();\n        out.put("passed", result.wasSuccessful());\n        out.put("failures", failures);\n        System.out.println();\n        System.out.println("').concat(f,'");\n        System.out.println(out);\n        System.out.println("').concat(p,'");\n    }\n}');function v(){return(v=(0,r.Z)((function(e){var t,n,r,l,c,u,v,m,g,y,Z,b,w,x,k,C,S,T,E,R,G,I,_,D;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return t=e.container,n=e.fs,r=e.packager,l=e.logger,c=e.suiteCode,v=l.startLogSpinner("Setting up the environment"),[4,(0,s.WT)(n)];case 1:return o.sent(),v("Creating your test files 1/2"),[4,(0,s.e3)({fs:n,code:c,filename:"".concat(d.testSuiteName(),".java")})];case 2:return m=o.sent(),(g=m.error)?("Failed to create suite code file",d.captureSetupError({tag:"Failed to create suite code file",raw:g}),[2,{error:"There was an error creating a test file, if this happens again, please contact support."}]):(v("Creating your test files 2/2"),[4,(0,s.e3)({fs:n,code:h,filename:"".concat(d.testRunnerName(),".java")})]);case 3:return y=o.sent(),(Z=y.error)?("Failed to create test runner file",d.captureSetupError({tag:"Failed to create test runner file",raw:Z}),[2,{error:"There was an error creating a test file, if this happens again, please contact support."}]):(l.stopLogSpinner(),l.clearLine(),l.logMessage("Installing imported packages\r\n"),[4,r.addPackages([{name:"junit:junit",version:"4.12"},{name:"com.googlecode.json-simple:json-simple",version:"1.1.1"},{name:"org.hamcrest:hamcrest-core",version:"1.3"}])]);case 4:return o.sent(),[4,r.installPackages()];case 5:return o.sent().error?[2,{error:"Failed to install packages\r\n"}]:(l.clearLogs(),v=l.startLogSpinner("Compiling your files"),[4,t.exec("find",".","-type","f","-name","*.java","-print0")]);case 6:if(b=o.sent(),w=b.output,x=b.error)return k="Failed to fetch working directory java files",d.captureSetupError({tag:k,raw:x}),[2,{error:"".concat(k,"\r\n\r\n")+(null===w||void 0===w?void 0:w.replace(/\n/g,"\n\r"))+"\r\n\r\n"+x}];if("string"!==typeof w)throw new Error("expected working directory files to be a string");return C=w.slice(0,-1).split("\0"),S=".:./target/dependency/*",[4,(u=t).exec.apply(u,["javac","-classpath",S,"-d","."].concat((0,i.Z)(C)))];case 7:return T=o.sent(),E=T.output,(R=T.error)?(G="Failed to compile test runner file",d.captureSetupError({tag:G,raw:R}),[2,{error:"".concat(G,"\r\n\r\n")+(null===E||void 0===E?void 0:E.replace(/\n/g,"\n\r"))+"\r\n\r\n"+R}]):(v("Running your tests"),[4,t.exec("java","-classpath",S,(0,s.Og)(d.testRunnerName()))]);case 8:if(I=o.sent(),_=I.output,D=I.error)return(0,a.j)(a.U3.REPL_UNIT_TEST_CONSTRUCTION_ERROR_INTERNAL),[2,{error:"Running tests failed\r\n\r\n"+(null===_||void 0===_?void 0:_.replace(/\n/g,"\n\r"))+"\r\n\r\n"+D}];if("string"!==typeof _)throw new Error("expected runOutput to be a string");return[2,{result:JSON.parse(_.slice(_.indexOf(f)+f.length,_.lastIndexOf(p))),error:null}]}}))}))).apply(this,arguments)}var m=d,g=function(e){return!!e&&e.trim().length>0&&e.split("\n").some((function(e){return!(e.trim().startsWith("#")||""===e.trim())}))},y={testRunnerName:function(){return"test_runner"},testSuiteName:function(){return"test_suite"},defaultImports:function(){return"import unittest\nfrom main import *\n"},classIntro:function(){return"class UnitTests(unittest.TestCase):"},classConstructorName:function(){return"__init__"},setupIntro:function(){return"def setUp(self):"},tearDownIntro:function(){return"def tearDown(self):"},testIntro:function(e){return y.testIntroPreName()+e+y.testIntroPostName()},testIntroPreName:function(){return"def test_"},testIntroPostName:function(){return"(self):"},getProperTestName:function(e){return"test_".concat(e)},parseTestResultName:function(e){return e},buildSuite:function(e){var t=e.tests,n=e.meta,r=new u(y);r.push(y.defaultImports()),n&&n.imports&&r.push(n.imports),r.newLine(),r.push(y.classIntro()),r.newLine(),r.indent(),n&&(n.initialization&&(r.push(n.initialization),r.newLine()),g(n.setup)&&(r.push(y.setupIntro()),r.indent(),r.push(n.setup),r.dedent(),r.newLine()),g(n.tearDown)&&(r.push(y.tearDownIntro()),r.indent(),r.push(n.tearDown),r.dedent(),r.newLine()));var i=!0,o=!1,a=void 0;try{for(var l,c=t[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value;r.push(y.testIntro(s.name)),r.indent(),r.push(s.code||"pass"),r.dedent(),r.newLine()}}catch(d){o=!0,a=d}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}return r.toString()},runSuite:function(e){return x.apply(this,arguments)},buildAndRunTests:function(e){var t=e.container,n=e.fs,r=e.packager,i=e.logger,o=e.tests,a=e.meta,l=y.buildSuite({tests:o,meta:a});return y.runSuite({container:t,fs:n,packager:r,logger:i,suiteCode:l})},hasClosingBrackets:function(){return!1},getClosingBrackets:function(){throw new Error("This language does not have closing brackets, check `hasClosingBrackets` first")},hasSemicolon:function(){return!1},getCommentChar:function(){return"#"},getHelpText:function(){return"no react in this bitch"},captureSetupError:function(e){var t=e.tag,n=e.raw;l.c_.withScope((function(e){e.setTag("unitTestLib","true"),e.setExtra("raw",n),e.setExtra("language","python3"),l.c_.captureException(t)}))},exampleTest:{id:-1,failureMessage:"In main.py you should have an add functions that adds two numbers and returns the result",name:"add",code:"self.assertEquals(add(1, 2), 3)"}},Z="__UNIT_TEST_RESULT_START__",b="__UNIT_TEST_RESULT_END__",w="import unittest\nimport ".concat((0,s.Og)(y.testSuiteName()),"\nimport os\nimport json\nfrom time import sleep\n\nsuite = unittest.TestLoader().loadTestsFromTestCase(\n  ").concat((0,s.Og)(y.testSuiteName()),'.UnitTests)\nf = open(os.devnull,"w")\ntest_res = unittest.TextTestRunner(stream=f).run(suite)\n\n# Merge errors and failures and normalize to {name, stack}\nfailures = [\n    {\n        "name": r[0]._testMethodName,\n        "stack": r[1],\n    } for r in test_res.errors + test_res.failures\n]\nprint()\nprint(\'').concat(Z,'\')\nsleep(1)\nprint(json.dumps({\n    "passed": test_res.wasSuccessful(),\n    "failures": failures,\n}))\nprint()\nprint(\'').concat(b,"');");function x(){return(x=(0,r.Z)((function(e){var t,n,r,i,l,c,u,d,f,p,h,v,m;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return t=e.container,n=e.fs,r=e.packager,i=e.logger,l=e.suiteCode,c=i.startLogSpinner("Setting up the environment"),[4,(0,s.WT)(n)];case 1:return o.sent(),c("Creating your test files 1/2"),[4,(0,s.e3)({fs:n,code:l,filename:"".concat(y.testSuiteName(),".py")})];case 2:return u=o.sent(),(d=u.error)?("Failed to create suite code file",y.captureSetupError({tag:"Failed to create suite code file",raw:d}),[2,{error:"There was an error creating a test file, if this happens again, please contact support."}]):(c("Creating your test files 2/2"),[4,(0,s.e3)({fs:n,code:w,filename:"".concat(y.testRunnerName(),".py")})]);case 3:return f=o.sent(),(p=f.error)?("Failed to create test runner file",y.captureSetupError({tag:"Failed to create test runner file",raw:p}),[2,{error:"There was an error creating a test file, if this happens again, please contact support."}]):(i.stopLogSpinner(),i.clearLine(),i.logMessage("Installing imported packages\r\n"),[4,r.installPackages()]);case 4:return o.sent().error?[2,{error:"Failed to install packages\r\n"}]:(i.clearLogs(),i.startLogSpinner("Running your tests"),[4,t.exec("python","-B",(0,s.Og)("".concat(y.testRunnerName(),".py")))]);case 5:if(h=o.sent(),v=h.output,m=h.error)return(0,a.j)(a.U3.REPL_UNIT_TEST_CONSTRUCTION_ERROR_INTERNAL),[2,{error:"Running tests failed\r\n\r\n"+(null===v||void 0===v?void 0:v.replace(/\n/g,"\n\r"))+"\r\n"+m}];if("string"!==typeof v)throw new Error("expected runoutput to be a string");return[2,{result:JSON.parse(v.slice(v.indexOf(Z)+Z.length,v.lastIndexOf(b))),error:null}]}}))}))).apply(this,arguments)}var k={testRunnerName:function(){throw new Error("Node test runner uses jest directly")},testSuiteName:function(){return"test_suite"},defaultImports:function(){return"const index = require('./index.js');"},classIntro:function(){return'describe("UnitTests", function() {'},classConstructorName:function(){return null},setupIntro:function(){return"beforeAll(async function() {"},tearDownIntro:function(){return"afterAll(async function() {"},testIntro:function(e){return k.testIntroPreName()+e+k.testIntroPostName()},testIntroPreName:function(){return'test("'},testIntroPostName:function(){return'", async function() {'},getProperTestName:function(e){return e},parseTestResultName:function(e){return e},buildSuite:function(e){var t=e.tests,n=e.meta,r=new u(k);r.push(k.defaultImports()),n&&n.imports&&r.push(n.imports),r.newLine(),r.push(k.classIntro()),r.newLine(),r.indent(),n&&(n.initialization&&(r.push(n.initialization),r.newLine()),n.setup&&(r.push(k.setupIntro()),r.indent(),r.push(n.setup),r.dedent(),r.closeCurly(),r.newLine(),r.newLine()),n.tearDown&&(r.push(k.tearDownIntro()),r.indent(),r.push(n.tearDown),r.dedent(),r.closeCurly(),r.newLine(),r.newLine()));var i=!0,o=!1,a=void 0;try{for(var l,c=t[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value;s.code&&(r.push(k.testIntro(s.name)),r.indent(),r.push(s.code),r.dedent(),r.closeCurly(),r.newLine(),r.newLine())}}catch(d){o=!0,a=d}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}return r.dedent(),r.closeCurly(),r.toString()},runSuite:function(e){return C.apply(this,arguments)},buildAndRunTests:function(e){var t=e.container,n=e.fs,r=e.packager,i=e.logger,o=e.tests,a=e.meta,l=k.buildSuite({tests:o,meta:a});return k.runSuite({container:t,fs:n,packager:r,logger:i,suiteCode:l})},hasClosingBrackets:function(){return!0},getClosingBrackets:function(){return"});"},hasSemicolon:function(){return!0},getCommentChar:function(){return"//"},getHelpText:function(){return"no react yet"},captureSetupError:function(e){var t=e.tag,n=e.raw;l.c_.withScope((function(e){e.setTag("unitTestLib","true"),e.setExtra("raw",n),e.setExtra("language","nodejs"),l.c_.captureException(t)}))},exampleTest:{id:-1,failureMessage:"",name:"add",code:"expect(index.add(1, 2)).toBe(3);"}};function C(){return(C=(0,r.Z)((function(e){var t,n,r,i,l,c,u,d,f,p,h,v,m,g,y,Z,b,w,x,C,S,T;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return t=e.container,n=e.fs,r=e.packager,i=e.logger,l=e.suiteCode,c=i.startLogSpinner("Setting up the environment"),[4,(0,s.WT)(n)];case 1:return o.sent(),c("Creating your test files 1/2"),[4,(0,s.e3)({fs:n,code:l,filename:"".concat(k.testSuiteName(),".js")})];case 2:return u=o.sent(),(d=u.error)?("Failed to create suite code file",k.captureSetupError({tag:"Failed to create suite code file",raw:d}),[2,{error:"There was an error creating a test file, if this happens again, please contact support."}]):(c("Creating your test files 2/2"),f=69,p="jest.config.json",h={testRegex:(0,s.Og)("".concat(k.testSuiteName(),".js")),testEnvironment:"node",testFailureExitCode:f},[4,(0,s.e3)({fs:n,code:JSON.stringify(h),filename:p})]);case 3:return v=o.sent(),(m=v.error)?("Failed to create config file",k.captureSetupError({tag:"Failed to create config file",raw:m}),[2,{error:"There was an error creating a test file, if this happens again, please contact support."}]):(i.stopLogSpinner(),i.clearLine(),i.logMessage("Installing imported packages\r\n"),[4,r.installPackages()]);case 4:return o.sent().error?[2,{error:"Failed to install packages\r\n"}]:(i.clearLogs(),c=i.startLogSpinner("Running your tests"),g=(0,s.Og)("output.json"),[4,t.exec("jest","--json","--outputFile",g,"--config",(0,s.Og)(p),"--forceExit","--passWithNoTests")]);case 5:return y=o.sent(),Z=y.output,(b=y.error)&&!b.endsWith(f.toString())?((0,a.j)(a.U3.REPL_UNIT_TEST_CONSTRUCTION_ERROR_INTERNAL),[2,{error:"Running tests failed\r\n\r\n"+(null===Z||void 0===Z?void 0:Z.replace(/\n/g,"\n\r"))+"\r\n"+b}]):(c("Parsing your test results"),[4,n.readFile(g)]);case 6:return(w=o.sent()).error?("Error reading test results",k.captureSetupError({tag:"Error reading test results",raw:w.error}),[2,{error:"There was an error getting test results, if this happens please contact support."}]):(x=w.content.toString(),(C=JSON.parse(x)).success?[2,{error:null,result:{passed:!0,failures:[]}}]:(S=C.testResults[0],(T=S.assertionResults.filter((function(e){return"passed"!==e.status})).map((function(e){return{name:e.title,stack:e.failureMessages[0]}}))).length?[2,{error:null,result:{passed:!1,failures:T}}]:[2,{error:S.message.replace(/\n/g,"\r\n")}]))}}))}))).apply(this,arguments)}var S={java10:m,java10_beta:m,java:m,python3:y,python3_beta:y,python:y,nodejs:k,javascript:k,nodejs_beta:k};function T(e){return e in S}function E(e){if(!T(e))throw new Error("".concat(e," is not a supported unit testing language, it has to be one of ").concat(Object.keys(S)));return S[e]}},40842:function(e,t,n){n.d(t,{Og:function(){return s},WT:function(){return p},e3:function(){return d}});var r=n(57135),i=n(96583),o=n(1468),a=n(22011),l=n(12583),c=n(4561),u="_test_runner";function s(e){return u+e}function d(e){return f.apply(this,arguments)}function f(){return(f=(0,r.Z)((function(e){var t,n,r,o,l;return(0,i.__generator)(this,(function(i){return t=e.fs,n=e.code,r=e.filename,o=s(r),l=a.Z.from(n,"utf8"),[2,t.writeFile(o,l)]}))}))).apply(this,arguments)}function p(e){return h.apply(this,arguments)}function h(){return(h=(0,r.Z)((function(e){var t,n;return(0,i.__generator)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),[4,e.readDir(l.Ql)];case 1:return(t=r.sent()).error?[2]:[4,Promise.all(t.children.map((function(t){return t.filename.startsWith(u)?t.type===c.Tv.File?e.deleteFile(t.filename):e.deleteDir(t.filename):Promise.resolve(null)})))];case 2:return r.sent(),[3,4];case 3:return n=r.sent(),o.c_.withScope((function(e){e.setTag("unitTestLib","true"),o.c_.captureException(n)})),[3,4];case 4:return[2]}}))}))).apply(this,arguments)}},70751:function(e,t,n){n.d(t,{AF:function(){return w},Hd:function(){return k},IV:function(){return E},Rb:function(){return g},aA:function(){return m},kO:function(){return S},lQ:function(){return G},rU:function(){return Z}});var r=n(72006),i=n(43119),o=n(71440),a=n(50216);function l(){var e=(0,i.Z)(["\n  fragment UnitTestsReplUnitTestMeta on ReplUnitTestMeta {\n    id\n    imports\n    initialization\n    setup\n    tearDown\n  }\n"]);return l=function(){return e},e}function c(){var e=(0,i.Z)(["\n  fragment UnitTestsReplUnitTest on ReplUnitTest {\n    id\n    name\n    code\n    failureMessage\n  }\n"]);return c=function(){return e},e}function u(){var e=(0,i.Z)(["\n  mutation createUnitTestMeta($input: CreateReplUnitTestMetaInput!) {\n    createReplUnitTestMeta(input: $input) {\n      ... on ReplUnitTestMeta {\n        id\n        ...UnitTestsReplUnitTestMeta\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return u=function(){return e},e}function s(){var e=(0,i.Z)(["\n  mutation updateUnitTestMeta($input: UpdateReplUnitTestMetaInput!) {\n    updateReplUnitTestMeta(input: $input) {\n      ... on ReplUnitTestMeta {\n        id\n        ...UnitTestsReplUnitTestMeta\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return s=function(){return e},e}function d(){var e=(0,i.Z)(["\n  mutation createUnitTest($input: CreateReplUnitTestInput!) {\n    createReplUnitTest(input: $input) {\n      ... on ReplUnitTest {\n        id\n        ...UnitTestsReplUnitTest\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return d=function(){return e},e}function f(){var e=(0,i.Z)(["\n  mutation updateUnitTest($input: UpdateReplUnitTestInput!) {\n    updateReplUnitTest(input: $input) {\n      ... on ReplUnitTest {\n        id\n        ...UnitTestsReplUnitTest\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return f=function(){return e},e}function p(){var e=(0,i.Z)(["\n  mutation deleteUnitTest($testId: Int!) {\n    deleteReplUnitTest(testId: $testId) {\n      ... on ReplUnitTest {\n        id\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return p=function(){return e},e}function h(){var e=(0,i.Z)(["\n  mutation updateReplUnitTestLastRun(\n    $input: UpdateReplUnitTestLastRunInput!\n    $replId: String!\n  ) {\n    updateReplUnitTestLastRun(input: $input) {\n      ... on UpdateReplUnitTestLastRunUpdatedTests {\n        __typename\n        updatedTests {\n          ... on ReplUnitTest {\n            id\n            __typename\n            lastRun(replId: $replId) {\n              ... on ReplUnitTestLastRun {\n                __typename\n                status\n              }\n              ... on UserError {\n                __typename\n                message\n              }\n            }\n          }\n          ... on UserError {\n            __typename\n            message\n          }\n        }\n      }\n      ... on UserError {\n        __typename\n        message\n      }\n    }\n  }\n"]);return h=function(){return e},e}var v={},m=(0,o.Ps)(l()),g=(0,o.Ps)(c()),y=(0,o.Ps)(u(),m);function Z(e){var t=(0,r.Z)({},v,e);return a.D(y,t)}var b=(0,o.Ps)(s(),m);function w(e){var t=(0,r.Z)({},v,e);return a.D(b,t)}var x=(0,o.Ps)(d(),g);function k(e){var t=(0,r.Z)({},v,e);return a.D(x,t)}var C=(0,o.Ps)(f(),g);function S(e){var t=(0,r.Z)({},v,e);return a.D(C,t)}var T=(0,o.Ps)(p());function E(e){var t=(0,r.Z)({},v,e);return a.D(T,t)}var R=(0,o.Ps)(h());function G(e){var t=(0,r.Z)({},v,e);return a.D(R,t)}},72196:function(e,t,n){n.d(t,{Z:function(){return c}});var r=n(68825),i=n(88688),o=n(45285),a=n(50959),l=n(54631);function c(){var e=(0,r.Z)(),t=(0,o.Z)().dotReplit,n=null===e||void 0===e?void 0:e.language,c=(0,a.useState)(null),u=c[0],s=c[1],d=(0,a.useState)(!0),f=d[0],p=d[1];return(0,a.useEffect)((function(){if(n){if((0,l.y)(n))return s(n),void p(!1);var e=!1,r=t.watch((function(t){var n,r;if(e||(e=!0,p(!1)),t.error)t.error===i.Yt.NotFound&&s(null);else{var o=null===(n=t.config.unitTest)||void 0===n||null===(r=n.language)||void 0===r?void 0:r.toLowerCase();o&&(0,l.y)(o)?s(o):s(null)}}));return function(){r()}}}),[n,t]),{language:u,isLoading:f}}},41677:function(e,t,n){n.d(t,{Z:function(){return E}});var r=n(72006),i=n(4405),o=n(2272),a=n(74985),l=n(88541),c=n(63064),u=n(77511),s=n(625),d=n(45510),f=n(2041),p=n(61284),h=n(85368),v=n(39541),m=n(46688),g=n(20811),y=n(80587),Z=n(70523),b=n(51631),w=n(91398),x=n(92683),k=n(90171),C=n(50959),S=n(94716),T="resources_upgrade_modal";function E(e){var t=e.isOwnRepl,n=e.userSubscriptionType,r=(0,k.useRouter)(),i=(0,l.P5)({controlName:"flag-slippery-banana",logFlagToAnalytics:!0}),c=(0,o.Z)(C.useState(!0),2),s=c[0],d=c[1],f=(0,m.Z)("announcement","resources-upgrade-modal"),p=f.shouldDisplay,h=f.register,v=f.dismiss;return C.useEffect((function(){!(0,u.Vg)(r)&&t&&n!==b.HP.HackerPro&&i&&h()}),[i,t,h,r,n]),C.useEffect((function(){var e=setTimeout((function(){d(!1)}),6e4);return function(){return clearTimeout(e)}}),[]),i?s||(0,u.Vg)(r)?null:t?n===b.HP.HackerPro?null:p?(0,a.tZ)(R,{dismissTour:v}):null:null:null}function R(e){var t=e.dismissTour,n=(0,o.Z)(C.useState(null),2),l=n[0],u=n[1],m=(0,Z.Z)(),b=m.dataAtom,k=b.cpu,E=b.ram,R=b.disk,G=C.useRef(!1),I=(0,c.Z)(),_=(0,x.Dv)(k.currentAtom),D=(0,C.useState)(_),B=D[0],P=D[1],A=(0,S.Z)(_),L=_/(0,x.Dv)(k.totalAtom),U=(0,x.Dv)(E.currentRssAtom),X=(0,C.useState)(_),M=X[0],N=X[1],O=(0,S.Z)(U),F=U/(0,x.Dv)(E.totalAtom),W=C.useCallback((function(e){u("cta"),P(_),N(U),(0,s.j)(s.U3.MODAL_VIEWED,{modalName:T,cause:e,unsolicited:!0})}),[_,U,P,N]);C.useEffect((function(){var e;if(!l&&!G.current)return L>.9?(G.current=!0,e=setTimeout((function(){G.current=!1,A.current>.9&&W("cpu")}),1e4)):F>.9&&(G.current=!0,e=setTimeout((function(){G.current=!1,O.current>.9&&W("ram")}),1e4)),function(){I.current||clearTimeout(e)}}),[L,G,l,I,U,W,A,F,O]);var H=(0,i.Z)((0,r.Z)({},m),{dataAtom:{cpu:(0,i.Z)((0,r.Z)({},k),{currentAtom:(0,w.cn)(B)}),ram:(0,i.Z)((0,r.Z)({},E),{currentRssAtom:(0,w.cn)(M)}),disk:R}});return(0,a.tZ)(f.u,{isOpen:null!==l,preventOutsideModalClickClose:!0,onRequestClose:function(){u(null),t()},maxWidth:"plans"===l?g.W:360,children:"plans"===l?(0,a.tZ)(g.Z,{context:T,uponPurchaseGoTo:"profile",initialTab:"plans"}):(0,a.BX)(h.G,{css:[v.l0.p(8),v.l0.colWithGap(24)],children:[(0,a.BX)(h.G,{css:[v.l0.colWithGap(16)],children:[(0,a.tZ)(p.xv,{variant:"subheadDefault",multiline:!1,children:"Your Repl ran out of resources!"}),(0,a.tZ)(p.xv,{children:"Upgrade to a plan to increase your Repl's resources so your programs can use more power."})]}),(0,a.tZ)(h.G,{css:[v.l0.colWithGap(12)],children:(0,a.tZ)(y.Z,{mini:!0,inactive:!1,resources:H})}),(0,a.tZ)(d.zx,{big:!0,text:"Upgrade to get more resources",colorway:"primary",onClick:function(){(0,s.j)(s.U3.UPGRADE_SELECTED,{source:T}),u("plans")}})]})})}},67183:function(e,t,n){n.d(t,{Q:function(){return o}});var r=n(74985),i=n(50959);function o(e){var t=e.uploadFiles,n=e.fileUploadInputRef,o=e.dirUploadInputRef,a=(0,i.useRef)(Math.random().toString(36));return(0,r.BX)(r.HY,{children:[(0,r.tZ)("input",{style:{display:"none"},ref:n,id:"file-upload-input-".concat(a.current),type:"file",onChange:function(e){var n=e.target.files;n&&t({files:Array.from(n)})},onClick:function(e){e.currentTarget.value=""},multiple:!0,accept:"*"}),(0,r.tZ)("input",{style:{display:"none"},ref:o,id:"dir-upload-input-".concat(a.current),type:"file",onChange:function(e){var n=e.target.files;n&&t({files:Array.from(n)})},onClick:function(e){e.currentTarget.value=""},webkitdirectory:"true",mozdirectory:"true",msdirectory:"true",odirectory:"true",directory:"true",accept:"*"})]})}},91350:function(e,t,n){n.d(t,{I5:function(){return h},sY:function(){return f}});var r=n(72006),i=n(43119),o=n(71440),a=n(24635);function l(){var e=(0,i.Z)(["\n  fragment ReplEnvironmentWebviewDeployBanner on Repl {\n    hostingDeployment {\n      ... on HostingDeployment {\n        id\n        currentBuild {\n          id\n        }\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n    hostingDeploymentPermissions {\n      canDeploy\n    }\n    config {\n      isVnc\n    }\n  }\n"]);return l=function(){return e},e}function c(){var e=(0,i.Z)(["\n  fragment ReplEnvironmentWebviewRepl on Repl {\n    id\n    prodUrl: hostedUrl(dotty: true)\n    devUrl: hostedUrl(dev: true)\n    currentUserPermissions {\n      linkDomain\n    }\n    lang {\n      id\n    }\n  }\n"]);return c=function(){return e},e}function u(){var e=(0,i.Z)(["\n  query ReplEnvironmentWebview($id: String!) {\n    repl(id: $id) {\n      ... on Repl {\n        id\n        ...ReplEnvironmentWebviewRepl\n        ...ReplEnvironmentWebviewDeployBanner\n      }\n    }\n  }\n  ","\n  ","\n"]);return u=function(){return e},e}var s={},d=(0,o.Ps)(l()),f=(0,o.Ps)(c()),p=(0,o.Ps)(u(),f,d);function h(e){var t=(0,r.Z)({},s,e);return a.a(p,t)}},99509:function(e,t,n){n.d(t,{Z:function(){return Me}});var r=n(72006),i=n(4405),o=n(74985),a=n(50959),l=n(88254),c=n(91350),u=n(48330),s=n(48306),d=n.n(s),f=n(24743),p=n(19065),h=n(35301),v=n(625);function m(){return a.useEffect((function(){(0,v.j)(v.U3.WS_REPLCO_UNREACHABLE)}),[]),(0,o.BX)("div",{className:"jsx-88c49dc4f1cb807b unreachable",children:[(0,o.BX)(h.gC,{align:"center",spacing:4,children:[(0,o.BX)(h.gC,{align:"center",children:[(0,o.tZ)(p.Z,{level:1,children:"\ud83d\ude48"}),(0,o.tZ)(p.Z,{level:4,children:"This Repl link isn\u2019t broken!"}),(0,o.tZ)(p.Z,{level:4,foreground:2,children:"It\u2019s just blocked."})]}),(0,o.BX)(h.gC,{spacing:2,className:"why",children:[(0,o.tZ)(f.Z,{foreground:2,children:"Why this might be happening:"}),(0,o.tZ)(f.Z,{foreground:2,children:(0,o.BX)("ul",{className:"jsx-88c49dc4f1cb807b",children:[(0,o.BX)("li",{className:"jsx-88c49dc4f1cb807b",children:["repl.co URLs could be"," ",(0,o.tZ)(f.Z,{fontWeight:"medium",foreground:1,children:"blocked by a firewall,"})," ","so contact your IT administrator"]}),(0,o.BX)("li",{className:"jsx-88c49dc4f1cb807b",children:["repl.co URLs could be"," ",(0,o.tZ)(f.Z,{fontWeight:"medium",foreground:1,children:"blocked by your ISP,"})," ","so try getting in touch with them"]})]})})]}),(0,o.BX)(f.Z,{foreground:2,align:"center",children:["If you have any other questions, please check out"," ",(0,o.tZ)("a",{href:"https://docs.replit.com/teams-edu/it-administrators-toolkit",target:"_blank",rel:"noopener noreferrer",className:"jsx-88c49dc4f1cb807b",children:"our IT docs"})," ","or"," ",(0,o.tZ)("a",{href:"https://replit.com/support",target:"_blank",rel:"noopener noreferrer",className:"jsx-88c49dc4f1cb807b",children:"contact support"}),"."]})]}),(0,o.tZ)(d(),{id:"88c49dc4f1cb807b",children:".unreachable.jsx-88c49dc4f1cb807b{padding:var(--space-32)}.unreachable.jsx-88c49dc4f1cb807b ul.jsx-88c49dc4f1cb807b{list-style-position:inside}.unreachable.jsx-88c49dc4f1cb807b li.jsx-88c49dc4f1cb807b{padding-bottom:var(--space-16)}"})]})}var g=a.createContext(!1),y=n(85368),Z=n(39541),b=n(94488),w=n(2272),x=n(1050),k=n(96864),C=n(32973),S=n(77637),T=n(43119),E=n(71440),R=n(24635),G=n(50216);function I(){var e=(0,T.Z)(["\n  fragment EditDomainRepl on Repl {\n    id\n    hostedUrl\n    apexProxy\n    domains {\n      hosting_deployment_id\n      domain\n      state\n    }\n  }\n"]);return I=function(){return e},e}function _(){var e=(0,T.Z)(["\n  query EditDomain($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        ...EditDomainRepl\n      }\n      ... on ReplRedirect {\n        replUrl\n      }\n      ... on SubscriptionExpiredError {\n        replId\n      }\n    }\n  }\n  ","\n"]);return _=function(){return e},e}function D(){var e=(0,T.Z)(["\n  query EditDomainCheckDomain2($replId: String!, $domain: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        checkDomain2(domain: $domain) {\n          ... on DomainStatus2 {\n            verified\n            retry\n            status\n            records {\n              A\n              TXT\n              CNAME\n            }\n          }\n          ... on NotFoundError {\n            message\n          }\n          ... on ServiceUnavailable {\n            message\n          }\n        }\n      }\n    }\n  }\n"]);return D=function(){return e},e}function B(){var e=(0,T.Z)(["\n  mutation EditDomainLinkReplDomain2(\n    $replId: String!\n    $domain: String!\n    $deploymentId: String\n  ) {\n    linkReplDomain2(\n      replId: $replId\n      domain: $domain\n      deploymentId: $deploymentId\n    ) {\n      __typename\n      ... on Repl {\n        id\n        ...EditDomainRepl\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on ServiceUnavailable {\n        message\n      }\n    }\n  }\n  ","\n"]);return B=function(){return e},e}function P(){var e=(0,T.Z)(["\n  mutation EditDomainUpdateRepl($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        ...EditDomainRepl\n      }\n    }\n  }\n  ","\n"]);return P=function(){return e},e}var A={},L=(0,E.Ps)(I()),U=(0,E.Ps)(_(),L);var X=(0,E.Ps)(D());var M=(0,E.Ps)(B(),L);var N=(0,E.Ps)(P(),L);var O,F=n(61284),W=n(45510),H=n(39137),V=n(66539),z=n(60566),j=n(32508),q=n.n(j),$=n(8622),Y=n(56169),K=n(15544),Q=n(54873),J=n(32104),ee=n(63837),te=n(80336),ne=y.K.span;function re(e){switch(e.status){case O.Verified:return(0,o.tZ)(ee.Z,{color:Z.TV.accentPositiveDefault});case O.Failed:return(0,o.tZ)(te.Z,{color:Z.TV.accentNegativeDefault});case O.Verifying:return(0,o.tZ)(J.Z,{color:Z.TV.accentPrimaryDefault});default:return null}}function ie(e){var t=e.repl,n=e.existingDomain,i=e.deploymentId,c=e.onLink,u=e.onGoBack,s=e.onLinkStarted,d=e.onStateChanged,f=(0,a.useState)(n?"loading":null),p=f[0],h=f[1],v=(0,a.useState)(!1),m=v[0],g=v[1],b=(0,a.useState)(null),x=b[0],k=b[1],C=(0,a.useState)(!1),S=C[0],T=C[1],E=(0,a.useState)(!0),R=E[0],I=E[1],_=(0,w.Z)(function(e){var t=(0,r.Z)({},A,e);return G.D(M,t)}(),2),D=_[0],B=_[1],P=(0,a.useRef)(null),L=(0,a.useRef)(null),U=(0,a.useRef)(null),X=function(e){(null===e||void 0===e?void 0:e.current)&&e.current.select()},N=function(e){var t;(null===e||void 0===e||null===(t=e.current)||void 0===t?void 0:t.value)&&(0,z.Z)(e.current.value).catch((function(e){l.$e((function(t){t.setTag("domain-link",!0),t.setExtra("type","copy"),l.Tb(e)}))}))},O=(0,a.useState)(n||""),V=O[0],j=O[1];(0,a.useEffect)((function(){B.data&&"Repl"===B.data.linkReplDomain2.__typename&&c()}),[B.data,c]),(0,a.useEffect)((function(){I(!i)}),[i]);var $=function(e){h(e),d()},Q=q()(V,{require_valid_protocol:!1})&&V.split(".").length>=2,J=Q&&2===V.split(".").length,ee=function(e,t,n){var r=e.replace(/^https:\/\//,"");return n?r.replace(t,n):r}(t.hostedUrl,t.id,i),te=t.apexProxy,ne="replit-verify=".concat(null!==i&&void 0!==i?i:t.id),re=(0,Y.H)();return(0,o.BX)(y.G,{css:[Z.l0.colWithGap(16)],children:[(0,o.BX)(y.G,{css:[Z.l0.colWithGap(8)],children:[(0,o.tZ)(F.h4,{level:2,variant:"subheadDefault",children:"New Domain Link"}),(0,o.BX)(F.xv,{children:["Learn more"," ",(0,o.tZ)("a",{href:"https://docs.replit.com/hosting/hosting-web-pages#custom-domains",target:"_blank",children:"here"}),"."]})]}),(0,o.BX)(y.G,{css:[Z.l0.colWithGap(4)],children:[(0,o.tZ)("label",{htmlFor:re("domain"),children:(0,o.tZ)(F.xv,{color:"dimmer",variant:"small",multiline:!1,children:"Step 1: Enter your domain"})}),(0,o.tZ)(H.II,{className:"cname-url",readOnly:"loading"===p,value:V,onChange:function(e){j(e.target.value)},onBlur:function(){!function(){try{var e=new URL("/",V);j(e.hostname)}catch(t){}}()},placeholder:"example.com",id:re("domain")})]}),!J&&R||S?null:(0,o.BX)(y.G,{css:[Z.l0.colWithGap(8)],children:[(0,o.BX)(y.G,{css:[Z.l0.colWithGap(4)],children:[(0,o.tZ)("label",{htmlFor:re("record"),children:(0,o.BX)(F.xv,{color:"dimmer",variant:"small",multiline:!1,children:["Step 2: Add an ",(0,o.tZ)("code",{children:"A"})," Record"]})}),(0,o.BX)(y.G,{css:[Z.l0.rowWithGap(8),Z.l0.align.center],children:[(0,o.tZ)(F.xv,{multiline:!1,css:{fontFamily:Z.TV.fontFamilyCode,maxWidth:"40%"},children:V}),(0,o.tZ)(F.xv,{multiline:!1,css:{fontFamily:Z.TV.fontFamilyCode},children:"A"}),(0,o.tZ)(H.II,{readOnly:!0,ref:P,onChange:function(){return null},value:te,onFocus:function(){return X(P)},id:re("record")}),(0,o.tZ)(W.zx,{onClick:function(){return N(P)},text:"Copy"})]})]}),R?(0,o.tZ)(y.G,{css:[Z.l0.flex.row,Z.l0.align.stretch],children:(0,o.tZ)(W.zx,{outlined:!0,onClick:function(){return T(!0)},text:"Use CNAME record instead."})}):null]}),Q&&(S||R&&!J)?(0,o.BX)(y.G,{css:[Z.l0.colWithGap(4)],children:[(0,o.tZ)("label",{htmlFor:re("CNAMERecord"),children:(0,o.BX)(F.xv,{color:"dimmer",variant:"small",multiline:!1,children:["Step 2: Add a ",(0,o.tZ)("code",{children:"CNAME"})," Record"]})}),(0,o.BX)(y.G,{css:[Z.l0.rowWithGap(8),Z.l0.align.center],children:[(0,o.tZ)(F.xv,{multiline:!1,css:{fontFamily:Z.TV.fontFamilyCode,maxWidth:"40%"},children:V}),(0,o.tZ)(F.xv,{multiline:!1,css:{fontFamily:Z.TV.fontFamilyCode},children:"CNAME"}),(0,o.tZ)(H.II,{readOnly:!0,ref:U,onChange:function(){return null},value:ee,onFocus:function(){return X(U)},id:re("CNAMERecord")}),(0,o.tZ)(W.zx,{onClick:function(){return N(U)},text:"Copy"})]}),J?(0,o.BX)(y.G,{css:[Z.l0.colWithGap(8)],children:[(0,o.tZ)(F.xv,{variant:"small",children:'Note: this CNAME record requires that your DNS provider supports CNAMEs for apex domains - for example Cloudflare with "CNAME Flattening".'}),(0,o.tZ)(y.G,{css:[Z.l0.flex.row,Z.l0.align.stretch],children:(0,o.tZ)(W.zx,{onClick:function(){return T(!1)},text:"Use A record instead",outlined:!0})})]}):null]}):null,Q?(0,o.BX)(y.G,{css:[Z.l0.colWithGap(4)],children:[J?(0,o.tZ)("label",{htmlFor:re("txtRecord"),children:(0,o.BX)(F.xv,{color:"dimmer",variant:"small",multiline:!1,children:["This domain also requires a ",(0,o.tZ)("code",{children:"TXT"})," Record"]})}):(0,o.BX)("label",{children:['If you are using a service like Cloudflare (with "orange cloud") that rewrites domain records, you can add a ',(0,o.tZ)("code",{children:"TXT"})," ","Record for verification purposes."]}),(0,o.BX)(y.G,{css:[Z.l0.rowWithGap(8),Z.l0.align.center],children:[(0,o.tZ)(F.xv,{multiline:!1,css:{fontFamily:Z.TV.fontFamilyCode,maxWidth:"40%"},children:V}),(0,o.tZ)(F.xv,{multiline:!1,css:{fontFamily:Z.TV.fontFamilyCode},children:"TXT"}),(0,o.tZ)(H.II,{readOnly:!0,ref:L,onChange:function(){return null},value:ne,onClick:function(){return X(L)},id:re("txtRecord")}),(0,o.tZ)(W.zx,{onClick:function(){return N(L)},text:"Copy"})]})]}):null,"loading"===p?(0,o.tZ)(y.G,{css:[Z.l0.colWithGap(12),Z.l0.pt(16)],children:(0,o.tZ)(oe,{replId:t.id,domain:V,onVerified:function(){return $("verified")},onError:function(){return $("error")}})}):null,"verified"===p?(0,o.tZ)(y.G,{css:[Z.l0.colWithGap(12),Z.l0.pt(16)],children:(0,o.tZ)(F.xv,{multiline:!1,children:"Your domain has been verified."})}):null,"error"===p||x?(0,o.tZ)(y.G,{css:[Z.l0.colWithGap(12),Z.l0.pt(16)],children:(0,o.BX)(F.xv,{multiline:!1,children:["Creating the domain link failed",x?": "+x:"","."]})}):null,(0,o.BX)(y.G,{css:[Z.l0.rowWithGap(12),Z.l0.justify.end],children:[(0,o.tZ)(W.zx,{onClick:u,text:"Close"}),Q&&null===p?(0,o.tZ)(W.zx,{disabled:m,onClick:function(){g(!0),k(null),D({variables:{replId:t.id,domain:V,deploymentId:i}}).then((function(e){var t,n=(null===(t=e.data)||void 0===t?void 0:t.linkReplDomain2)||null;"Repl"===(null===n||void 0===n?void 0:n.__typename)?(k(null),$("loading")):("ServiceUnavailable"!==(null===n||void 0===n?void 0:n.__typename)&&"NotFoundError"!==(null===n||void 0===n?void 0:n.__typename)&&"UnauthorizedError"!==(null===n||void 0===n?void 0:n.__typename)||k(null===n||void 0===n?void 0:n.message),$("error")),g(!1),s()})).catch((function(e){g(!1),k(e.message)}))},text:"".concat(m?"Linking domain...":"Link domain"),iconLeft:(0,o.tZ)(K.Z,{}),colorway:"primary"}):null]})]})}function oe(e){var t,n=e.domain,i=e.replId,l=e.onVerified,c=e.onError,u=function(e){var t=(0,r.Z)({},A,e);return R.a(X,t)}({variables:{replId:i,domain:n},pollInterval:1e3}),s=u.data,f=u.stopPolling;if((0,a.useEffect)((function(){var e,t;if(s&&"Repl"===s.repl.__typename){var n=s.repl;if("NotFoundError"!==(null===(e=n.checkDomain2)||void 0===e?void 0:e.__typename)){if("DomainStatus2"===(null===(t=n.checkDomain2)||void 0===t?void 0:t.__typename)){var r=n.checkDomain2,i=r.retry,o=r.verified;o||i?(!o&&i||f(),o&&l()):c()}}else c()}}),[s,f,l,c]),"Repl"===(null===s||void 0===s?void 0:s.repl.__typename)&&s.repl.checkDomain2){var p,h,v,m="DomainStatus2"===s.repl.checkDomain2.__typename?s.repl.checkDomain2:null,g=null;if(null===m||void 0===m?void 0:m.records){var b=m.records;b.__typename;g=(0,S.Z)(b,["__typename"])}var x,k=null;if(!(null===m||void 0===m?void 0:m.status))"ServiceUnavailable"===(null===(x=s.repl.checkDomain2)||void 0===x?void 0:x.__typename)&&(k=s.repl.checkDomain2.message),k||(k="DNS updates can take up to 48 hours to fully synchronize. Feel free to check back later.");return(0,o.BX)(y.G,{css:[Z.l0.colWithGap(16),Z.l0.justify.spaceBetween],children:[(0,o.BX)(y.G,{css:[Z.l0.rowWithGap(16),Z.l0.align.center],children:[(0,o.tZ)("div",{css:[Z.l0.width("20px"),Z.l0.height("20px"),{aspectRatio:"1 / 1"},{borderRadius:"100%"},{borderRadius:"100%"},{borderStyle:"solid"},{borderWidth:"3px"},{borderColor:Z.TV.accentPrimaryDimmer},{borderTopColor:Z.TV.accentPrimaryDefault},{transform:"rotate(0deg)"},{animation:"linear domain-loading 1s infinite"}],className:"jsx-4e6cc6caecb799c9"}),(0,o.tZ)("div",{className:"jsx-4e6cc6caecb799c9",children:k})]}),g||"DomainStatus2"===(null===(p=s.repl.checkDomain2)||void 0===p?void 0:p.__typename)&&(null===(h=s.repl.checkDomain2)||void 0===h?void 0:h.retry)||"ServiceUnavailable"===(null===(v=s.repl.checkDomain2)||void 0===v?void 0:v.__typename)?(0,o.BX)(y.G,{children:[(0,o.tZ)("br",{className:"jsx-4e6cc6caecb799c9"}),g?(0,o.BX)(y.G,{children:["Currently, your domain\u2019s records show:",(0,o.tZ)("pre",{css:[Z.l0.overflow("scroll")],className:"jsx-4e6cc6caecb799c9",children:Object.entries(g).map((function(e){var t=(0,w.Z)(e,2),r=t[0],i=t[1];return null===i||void 0===i?void 0:i.map((function(e){return(0,o.BX)("div",{className:"jsx-4e6cc6caecb799c9",children:[n," ",r," ",e]},"{domain}-{dnsType}")}))}))})]}):(0,o.tZ)(F.xv,{children:"Currently, your domain is either not returning any records, or something is getting in the way of our verification process."})]}):null,(0,o.tZ)(d(),{id:"4e6cc6caecb799c9",children:"@-webkit-keyframes domain-loading{from{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-moz-keyframes domain-loading{from{-moz-transform:rotate(0deg);transform:rotate(0deg)}to{-moz-transform:rotate(360deg);transform:rotate(360deg)}}@-o-keyframes domain-loading{from{-o-transform:rotate(0deg);transform:rotate(0deg)}to{-o-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes domain-loading{from{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}"})]})}return"Repl"===(null===s||void 0===s?void 0:s.repl.__typename)&&"NotFoundError"===(null===(t=s.repl.checkDomain2)||void 0===t?void 0:t.__typename)?(0,o.tZ)(o.HY,{children:"We ran into an internal error while checking the domain. Please try again later."}):null}function ae(e){var t=e.replId,n=e.domain,i=e.onUnlink,l=e.onGoBack,c=(0,w.Z)(function(e){var t=(0,r.Z)({},A,e);return G.D(N,t)}({variables:{input:{id:t,removeDomain:n}}}),2),u=c[0],s=c[1];return(0,a.useEffect)((function(){s.data&&s.data.updateRepl.repl&&i()}),[s.data,i]),(0,o.BX)(y.G,{css:[Z.l0.colWithGap(16)],children:[(0,o.BX)(y.G,{css:[Z.l0.colWithGap(8)],children:[(0,o.tZ)(F.h4,{level:3,variant:"subheadDefault",children:"Domain Unlinking"}),(0,o.BX)(F.xv,{children:["Are you sure you want to unlink"," ",(0,o.tZ)("a",{target:"_blank",rel:"noopener",href:"https://"+n,children:n}),"?"]})]}),(0,o.BX)(y.G,{css:[Z.l0.rowWithGap(12),Z.l0.justify.end],children:[(0,o.tZ)(W.zx,{onClick:l,text:"Cancel"}),(0,o.tZ)(W.zx,{onClick:function(){s.loading||u()},text:s.loading?"Unlinking domain...":"Yes, unlink this domain",colorway:"negative",iconLeft:(0,o.tZ)(Q.Z,{}),disabled:s.loading})]})]})}function le(e){var t=e.replId,n=e.deploymentId,i=e.showTitle,l=void 0===i||i,c=e.onUnlink,u=e.onLink,s=function(e){var t=(0,r.Z)({},A,e);return R.a(U,t)}({variables:{replId:t}}),d=s.data,f=s.loading,p=s.refetch,h=(0,a.useState)("listing"),v=h[0],m=h[1],g=(0,a.useState)(null),b=g[0],w=g[1],x=null;if(f)x=(0,o.tZ)(y.G,{css:[Z.l0.colWithGap(8),Z.l0.align.center,Z.l0.justify.center],children:(0,o.BX)(y.G,{css:[Z.l0.rowWithGap(4),Z.l0.align.center],children:[(0,o.tZ)(J.Z,{color:Z.TV.accentPrimaryDefault}),(0,o.tZ)(ne,{children:"Loading"})]})});else if(d&&"Repl"===d.repl.__typename){var k=d.repl,C=null;if(k.domains){var S=k.domains.filter(Boolean).filter((function(e){return n?(null===e||void 0===e?void 0:e.hosting_deployment_id)===n:!(null===e||void 0===e?void 0:e.hosting_deployment_id)})).map((function(e){return{domain:e.domain,state:e.state}}));C=0===S.length?(0,o.tZ)(F.xv,{multiline:!1,children:"No domains are currently linked."}):(0,o.BX)(y.G,{children:[(0,o.tZ)(F.h4,{level:3,variant:"subheadDefault",children:"Currently Linked Domains"}),(0,o.tZ)(y.G,{css:[Z.l0.colWithGap(16)],children:S.map((function(e){return e?(0,o.tZ)(y.G,{children:(0,o.BX)(y.G,{css:[Z.l0.colWithGap(4),Z.l0.justify.spaceBetween,Z.l0.align.center],children:[(0,o.BX)(y.G,{css:[Z.l0.rowWithGap(8),Z.l0.align.center,Z.l0.justify.spaceBetween,Z.l0.width("100%")],children:[(0,o.tZ)(y.G,{css:[Z.l0.flex.shrink(1)],children:(0,o.tZ)(V.u,{tooltip:e.domain,children:(0,o.tZ)(F.xv,{multiline:!1,children:e.domain})})}),(0,o.tZ)(y.G,{children:(0,o.tZ)(V.u,{tooltip:(0,o.tZ)(F.xv,{css:{textTransform:"capitalize"},multiline:!1,children:e.state}),children:(0,o.tZ)(re,{status:e.state})})})]}),(0,o.BX)(y.G,{css:[Z.l0.rowWithGap(12),Z.l0.justify.end,Z.l0.align.center,Z.l0.width("100%"),"verified"!==e.state&&Z.l0.pl(12)],children:[(0,o.tZ)(W.zx,{text:"Unlink",css:Z.l0.width("verified"!==e.state?"50%":"100%"),onClick:function(){w(e.domain),m("unlinking")}}),"verified"!==e.state?(0,o.tZ)(W.zx,{text:"Check status",css:Z.l0.width("50%"),onClick:function(){w(e.domain),m("linking")}}):null]})]})},e.domain):null}))})]})}"listing"===v?x=(0,o.BX)(y.G,{css:[Z.l0.colWithGap(16)],children:[C,(0,o.tZ)(W.zx,{text:"Create domain link",onClick:function(){return m("linking")},iconLeft:(0,o.tZ)($.Z,{})})]}):"linking"===v?x=(0,o.tZ)(ie,{repl:k,existingDomain:b,deploymentId:n,onLink:u,onGoBack:function(){m("listing"),w(null)},onLinkStarted:p,onStateChanged:p}):"unlinking"===v&&null!==b&&(x=(0,o.tZ)(ae,{replId:k.id,domain:b,onUnlink:function(){p(),m("listing"),c()},onGoBack:function(){m("listing"),w(null)}}))}else d&&"ReplRedirect"===d.repl.__typename?x=(0,o.BX)("div",{children:["This repl has moved to"," ",(0,o.tZ)("a",{href:d.repl.replUrl,children:d.repl.replUrl})]}):d&&"SubscriptionExpiredError"===d.repl.__typename&&(x=(0,o.tZ)("div",{children:"Subscription expired"}));return(0,o.BX)(y.G,{css:[Z.l0.colWithGap(24)],children:[l?(0,o.tZ)(F.h4,{level:1,variant:"headerDefault",children:"Domain Linking"}):null,x]})}!function(e){e.Verified="verified",e.Verifying="verifying",e.Failed="failed"}(O||(O={}));var ce=n(24976),ue=n(87076),se=(0,a.forwardRef)((function(e,t){return(0,o.tZ)(ue.h,(0,r.Z)({disabled:e.disabled,ref:t,className:e.className,css:[{color:"var(--foreground-dimmest)",":hover":{color:"var(--foreground-default)"}},e.css]},e))})),de=n(91102),fe=n(13716),pe=new Set(["draw.js"]);function he(e,t){var n=(0,b.f6)(),r=(0,fe.R3)(),i=a.useCallback((function(e,n){var r,i;null===(r=t.current)||void 0===r||null===(i=r.contentWindow)||void 0===i||i.postMessage({action:"FILE_UPDATE",file:e,content:n},"*")}),[t]);a.useEffect((function(){if(t.current&&n){var r=!0,o=!1,a=void 0;try{for(var l,c=function(){var n=l.value;t.current.onload=function(){e.readFile(n).then((function(e){e.error||i(n,e.content.toString())}))}},u=pe[Symbol.iterator]();!(r=(l=u.next()).done);r=!0)c()}catch(s){o=!0,a=s}finally{try{r||null==u.return||u.return()}finally{if(o)throw a}}}}),[e,i,t,n]),a.useEffect((function(){if(n&&r&&pe.has(r))return e.watchTextFile(r,{onReady:function(e){var t=e.initialContent;return i(r,t)},onChange:function(e){var t=e.latestContent;return i(r,t)}})}),[e,r,i,n])}var ve=function(e){var t=e.iframe,n=(0,u.Z)();return a.useEffect((function(){var e="https://".concat(n,".id.repl.co"),t=function(t){if(t.origin===e&&"DOWNLOAD"===t.data.action){var n=document.createElement("a");document.body.appendChild(n),n.setAttribute("style","display: none"),n.href=t.data.url,n.download=t.data.filename,n.click(),document.body.removeChild(n)}};return window.addEventListener("message",t),function(){window.removeEventListener("message",t)}}),[n]),(0,o.BX)(o.HY,{children:[(0,o.tZ)(se,{alt:"Save image",onClick:function(){var e,n;null===(e=t.current)||void 0===e||null===(n=e.contentWindow)||void 0===n||n.postMessage({action:"REQUEST_SCREENSHOT"},"*")},children:(0,o.tZ)(ce.Z,{})}),(0,o.tZ)(se,{alt:"Toggle Record",onClick:function(){var e,n;null===(e=t.current)||void 0===e||null===(n=e.contentWindow)||void 0===n||n.postMessage({action:"REQUEST_TOGGLE_RECORD"},"*")},children:(0,o.tZ)(de.Z,{})})]})},me=n(70628),ge=n(1734),ye=n(43312),Ze=(0,ye.F4)("from{transform:rotate(0deg);}to{transform:rotate(359deg);}");function be(e){var t,n=e.canRefresh,r=e.refreshing,i=e.devToolsBadge,l=e.url,c=e.displayUrl,u=e.onToggleDevtools,s=a.useRef(null),d=(0,w.Z)(a.useState(!1),2),f=d[0],p=d[1];return t=n?r?"Refreshing":"Refresh":"Run the Repl to refresh",(0,o.BX)(y.G,{css:[Z.l0.rowWithGap(8),Z.l0.p(8),Z.l0.align.center],children:[(0,o.tZ)(se,{disabled:!n,alt:t,onClick:e.onRefresh,css:r&&{animation:"".concat(Ze," infinite 0.5s")},children:(0,o.tZ)(k.Z,{})}),(0,o.tZ)(H.II,{dataCy:"ws-webview-url-bar-input",css:[Z.l0.px(4),Z.l0.py(2),Z.l0.flex.growAndShrink(1),Z.l0.fontSize(12)],value:null!==c&&void 0!==c?c:l,type:"text",onFocus:function(t){e.trackUrlSelect(),t.currentTarget.select()},readOnly:!0}),(0,o.BX)(y.G,{css:[Z.l0.rowWithGap(4)],children:[e.canEditDomain?(0,o.BX)(ge.Z,{showArrow:!0,maxWidth:320,isOpen:f,onClickOutside:function(){return p(!1)},growToMaxWidth:!0,children:[(0,o.tZ)(se,{alt:"Custom domain",onClick:function(){return p(!f)},children:(0,o.tZ)(x.Z,{})}),(0,o.tZ)(le,{onLink:function(){return p(!1)},onUnlink:function(){return p(!1)},replId:e.replId})]}):null,u?(0,o.tZ)(se,{alt:"Toggle developer tools",ref:s,onClick:u,css:{position:"relative"},suffix:!!i&&(0,o.tZ)("span",{css:{position:"absolute",color:Z.TV.accentNegativeStrongest,borderRadius:Z.TV.borderRadiusRound,padding:"".concat(Z.TV.space2," ").concat(Z.TV.space4),backgroundColor:Z.TV.accentNegativeDimmer,top:-5,right:-3,fontSize:9},children:i}),children:(0,o.tZ)(me.Z,{})}):null,(0,o.tZ)("a",{href:l,css:{color:"inherit"},target:"_blank",children:(0,o.tZ)(se,{alt:"Open in a new tab",children:(0,o.tZ)(C.Z,{})})}),e.isKaboomDraw&&e.iframe?(0,o.tZ)(ve,{iframe:e.iframe}):null]})]})}var we=n(54733),xe=n(20841);function ke(){return(0,o.BX)(y.G,{css:[Z.l0.align.center,Z.l0.p(64)],children:[(0,o.BX)(y.G,{css:[Z.l0.align.center],children:[(0,o.tZ)(p.Z,{level:1,children:"\ud83d\ude48"}),(0,o.tZ)(F.xv,{css:[Z.l0.textAlign.center,Z.l0.pb(8)],variant:"headerDefault",children:"We've detected a crash loop"}),(0,o.tZ)(F.xv,{css:[Z.l0.textAlign.center],variant:"subheadDefault",color:"dimmer",children:"Preview is disabled until you click the run button again."})]}),(0,o.tZ)(y.G,{css:[Z.l0.p(16)],children:(0,o.tZ)(F.xv,{css:[Z.l0.color.foregroundDimmer,Z.l0.textAlign.center,Z.l0.pb(16)],children:"There may be errors in the code that are causing your application to repeatedly crash."})})]})}var Ce=n(88541),Se=n(46688),Te=n(23785),Ee=n(45317),Re=n(57475),Ge=n(55523);function Ie(e){var t=e.onCompleted,n=e.startTimeInSeconds,r=(0,w.Z)(a.useState(n),2),i=r[0],l=r[1];a.useEffect((function(){var e=setInterval((function(){return l((function(t){return 0===t?(clearInterval(e),0):t-1}))}),1e3);return function(){return clearInterval(e)}}),[]),a.useEffect((function(){i>0||t()}),[i]);var c=24*2.6;return(0,o.tZ)(y.G,{css:{width:24,height:24},children:(0,o.BX)(y.G,{css:[Z.l0.flex.row,Z.l0.align.center,Z.l0.justify.center,{width:"100%",height:"100%",strokeDasharray:c,strokeDashoffset:c,strokeLinecap:"butt",strokeWidth:2,stroke:Ee.TV.accentPrimaryDefault,fill:"none"}],children:[(0,o.tZ)("svg",{width:"100%",height:"100%",className:d().dynamic([["23bd846669111030",[c]]]),children:(0,o.tZ)("circle",{r:10,cx:12,cy:12,style:{animationName:"countdown-animation",animationDuration:"".concat(n,"s"),animationDelay:"0s",animationTimingFunction:"linear"},className:d().dynamic([["23bd846669111030",[c]]])})}),(0,o.tZ)(d(),{id:"23bd846669111030",dynamic:[c],children:"@-webkit-keyframes countdown-animation{from{stroke-dashoffset:0px}to{stroke-dashoffset:".concat(c,"px}}@-moz-keyframes countdown-animation{from{stroke-dashoffset:0px}to{stroke-dashoffset:").concat(c,"px}}@-o-keyframes countdown-animation{from{stroke-dashoffset:0px}to{stroke-dashoffset:").concat(c,"px}}@keyframes countdown-animation{from{stroke-dashoffset:0px}to{stroke-dashoffset:").concat(c,"px}}")}),(0,o.tZ)(F.xv,{css:[Z.l0.position.absolute],variant:"small",multiline:!1,children:i})]})})}function _e(e){var t=e.onCompleted,n=[Z.l0.rowWithGap(4),Z.l0.align.center,Z.l0.justify.spaceBetween,Z.l0.p(6),Z.l0.pl(8),Z.l0.flex.growAndShrink(1),{borderWidth:1,borderStyle:"solid",background:Ee.TV.accentPrimaryDimmest,borderColor:Ee.TV.accentPrimaryDimmer,color:Ee.TV.accentPrimaryStrongest}];return(0,o.BX)(y.G,{css:n,children:[(0,o.BX)(y.G,{css:[Z.l0.rowWithGap(4),Z.l0.align.center],children:[(0,o.tZ)(F.xv,{variant:"small",children:"When you're ready, you can deploy from the"}),(0,o.tZ)(W.zx,{iconLeft:(0,o.tZ)(Re.Z,{}),text:"Release",disabled:!0,small:!0}),(0,o.tZ)(F.xv,{variant:"small",children:"menu!"})]}),(0,o.tZ)(Ie,{startTimeInSeconds:3,onCompleted:t})]})}function De(e){var t,n=e.repl,r=e.onClick,i=(0,w.Z)(a.useState(!1),2),l=i[0],c=i[1],u=(0,Ge.gg)().isDeployableRepl,s=(0,Se.Z)("workspace","workspace-deployments-webview-banner"),d=s.shouldDisplay,f=s.register,p=s.dismiss;a.useEffect((function(){f()}),[f]);var h=n.hostingDeploymentPermissions.canDeploy&&u,m="HostingDeployment"===(null===(t=n.hostingDeployment)||void 0===t?void 0:t.__typename)&&n.hostingDeployment.currentBuild;return h&&!m&&d?(0,o.tZ)(y.G,{children:l?(0,o.tZ)(_e,{onCompleted:function(){p()}}):(0,o.tZ)(Te.U,{onClick:function(){(0,v.j)(v.U3.DEPLOY_PROJECT_SELECTED,{source:"workspace_webview_deploy_banner"}),p(),r()},onDismiss:function(){c(!0)},rounded:!1})}):null}var Be=n(5889),Pe={container:(0,ye.iv)(Z.l0.p(16),Z.l0.height("100%"),Z.l0.align.center),imageContainer:(0,ye.iv)(Z.l0.height("100%"),Z.l0.colWithGap(16),Z.l0.align.center,Z.l0.justify.center,Z.l0.width(300)),image:(0,ye.iv)(Z.l0.width(200))};function Ae(){return(0,o.tZ)(y.G,{css:Pe.container,children:(0,o.BX)(y.G,{css:Pe.imageContainer,children:[(0,o.tZ)("div",{css:Pe.image,children:(0,o.tZ)(Be.Z,{src:"/public/images/run_pointer.svg",alt:"A play button with a mouse pointer",height:"250px",width:"400px"})}),(0,o.tZ)(F.h4,{level:3,variant:"subheadDefault",children:"Run this Repl to see the hosted output."})]})})}var Le=n(10841),Ue=function(e,t){return e===Le.Ah.OFFLINE||e===Le.Ah.STOPPING||e===Le.Ah.IDLE&&"html"!==t.mode},Xe=function(e,t){var n=e.fs,s=e.session,d=e.runner,f=e.trackUrlSelect,p=e.openPane,h=e.isVisible,w=e.className,x=e.containerRef,k=(0,u.Z)(),C=(0,c.I5)({variables:{id:k}}).data,S="Repl"===(null===C||void 0===C?void 0:C.repl.__typename)?C.repl:null,T=(0,a.useContext)(g),E=(0,we.S)().isCircuitBroken,R=(0,a.useRef)(null),G=(0,a.useState)(!1),I=G[0],_=G[1],D=(0,a.useState)(!1),B=D[0],P=D[1],A=(0,a.useState)(d.getRunState()),L=A[0],U=A[1],X=(0,a.useState)(0),M=X[0],N=X[1],O=(0,b.f6)();he(n,R);var F="html"===(null===S||void 0===S?void 0:S.lang.id)||"html_beta"===(null===S||void 0===S?void 0:S.lang.id),W=(0,Ce.P5)({controlName:"flag-webview-show-protocol",logFlagToAnalytics:!1}),H=null===S||void 0===S?void 0:S.devUrl,V=null;V=S?T?(0,o.tZ)(m,{}):E?(0,o.tZ)(ke,{}):Ue(L,d)?(0,o.tZ)(Ae,{}):(0,o.tZ)("iframe",(0,r.Z)({title:"webview","data-cy":"ws-webview",ref:R,src:H,onLoad:function(){return _(!0)},css:[Z.l0.flex.growAndShrink(1),{border:"none",display:"block",backgroundColor:Z.TV.white}]},xe.Z)):null,(0,a.useEffect)((function(){var e=function(e){var t;if(e.origin&&new URL(e.origin).hostname===n&&"object"===typeof e.data&&(null===(t=e.data)||void 0===t?void 0:t.type))switch(e.data.type){case"event":var o=e.data,a=o.event,c=o.payload;return void("error"===a?l.Tb(c):(0,v.j)(a,(0,i.Z)((0,r.Z)({},c),{replId:k,isHTML:F})));case"show-badge":return void N(e.data.count);case"ready":var u,s;if(e.data.wasShown)null===(u=R.current)||void 0===u||null===(s=u.contentWindow)||void 0===s||s.postMessage({type:"toggleDevtools",source:"automatic"},"*");return}},t=d.onStateChanged(U);if(H){var n=new URL(H).hostname;return window.addEventListener("message",e),function(){window.removeEventListener("message",e),t()}}}),[k,F,s,d,H]);var z=function(){N(0),P(!0),n.flush().then((function(){R.current&&(R.current.src+="")})).finally((function(){P(!1)}))};if((0,a.useImperativeHandle)(t,(function(){return{refresh:z}})),!S)return null;var j=W?S.prodUrl:S.prodUrl.replace(/^(https?:)?\/\//,"");return(0,o.BX)(y.G,{className:w,css:[Z.l0.backgroundColor.backgroundDefault,Z.l0.height("100%"),Z.l0.borderRadius(4),{overflow:"hidden"}],innerRef:x,children:[(0,o.tZ)(be,{canEditDomain:S.currentUserPermissions.linkDomain,displayUrl:j,url:S.prodUrl,trackUrlSelect:function(){f&&f(S.devUrl)},replId:k,refreshing:B,onRefresh:z,isKaboomDraw:O,canRefresh:!Ue(L,d),iframe:R,isVisible:h,devToolsBadge:M,onToggleDevtools:function(){var e,t;N(0),null===(e=R.current)||void 0===e||null===(t=e.contentWindow)||void 0===t||t.postMessage({type:"toggleDevtools",source:"manual"},"*")}}),I?(0,o.tZ)(De,{repl:S,onClick:function(){return p({type:"deployments"})}}):null,V]})},Me=(0,a.forwardRef)(Xe)},83505:function(e,t,n){n.d(t,{Z:function(){return i}});var r=n(50959);function i(e){var t=e.container,n=e.runner,i=e.refreshWebView;(0,r.useEffect)((function(){var e,r=[];return"shellrunner"===n.mode&&r.push(n.onOutput((function(t){t&&t.includes("exit status 1")&&(e=Date.now())}))),r.push(t.onPortOpened((function(t){var n=t.isVnc;if(t.isForwarded&&!n){var r=Date.now();void 0!==e&&r-e<1e3||i()}}))),function(){return r.forEach((function(e){return e()}))}}),[t,i,n])}},95587:function(e,t,n){n.d(t,{Z:function(){return o}});var r=n(50959),i=n(10841);function o(e){var t=e.runner,n=e.refreshWebView;(0,r.useEffect)((function(){if("html"===t.mode)return t.onStateChanged((function(e){e===i.Ah.RUNNING&&n()}))}),[t,n])}},54733:function(e,t,n){n.d(t,{S:function(){return f},e:function(){return d}});var r=n(2272),i=n(10841),o=n(45285),a=n(29457),l=n(50959),c=n(91398),u=n(92683),s=(0,c.cn)(!1),d=function(){return(0,u.KO)(s)};function f(){var e=(0,o.Z)().runner,t=(0,r.Z)(d(),2),n=t[0],c=t[1];return l.useEffect((function(){if("shellrunner"===e.mode){var t,n=[],r=Date.now(),o=Array(6),l=0;return n.push(e.onLocalRun((function(){r=Date.now(),c(!1)}))),n.push(e.onStateChanged((function(e){if(t===i.Ah.RUNNING&&e===i.Ah.IDLE){var n=Date.now();o[l%6]=n;var u=o.at((l-5)%6);void 0!==u&&n-u<6e4&&null!=r&&r<u&&(c(!0),a.kg.info("webview circuit broken",{lastRunnerStops:JSON.stringify(o),runnerStopCount:l,lastLocalRunTimestamp:r})),l++,t=e}else t=e}))),function(){c(!1),n.forEach((function(e){return e()}))}}}),[e,c]),{isCircuitBroken:n}}},54659:function(e,t,n){n.d(t,{cR:function(){return y},Sp:function(){return Z}});var r=n(2272),i=n(50959),o=n(45285),a=n(48330),l=n(72006),c=n(43119),u=n(71440),s=n(24635),d=n(50216);function f(){var e=(0,c.Z)(["\n  query ReplConfigIsExtension($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        config {\n          isExtension\n        }\n      }\n    }\n  }\n"]);return f=function(){return e},e}function p(){var e=(0,c.Z)(["\n  mutation UpdateReplConfigIsExtension(\n    $replId: String!\n    $isExtension: Boolean!\n  ) {\n    updateRepl(input: { id: $replId, isExtension: $isExtension }) {\n      repl {\n        id\n        config {\n          isExtension\n        }\n      }\n    }\n  }\n"]);return p=function(){return e},e}var h={},v=(0,u.Ps)(f());var m=(0,u.Ps)(p());var g=n(48506);n(47031);function y(){var e,t=i.useContext(g.Z),n=(0,r.Z)(i.useState(null!==(e=null===t||void 0===t?void 0:t.replConfigIsExtension)&&void 0!==e&&e),2),a=n[0],l=n[1],c=(0,o.Z)().dotReplit;return i.useEffect((function(){return c.watch((function(e){var t,n,r,i=null!==(r=null===(t=e.config)||void 0===t||null===(n=t.extension)||void 0===n?void 0:n.isExtension)&&void 0!==r&&r;l(i)}))}),[c]),a}function Z(){var e=(0,a.Z)(),t=function(e){var t=(0,l.Z)({},h,e);return s.a(v,t)}({variables:{replId:e}}),n=t.data,c=t.loading,u=t.error,f=(0,r.Z)(function(e){var t=(0,l.Z)({},h,e);return d.D(m,t)}(),1)[0],p=function(){var e,t;return!c&&!u&&(!(!(null===n||void 0===n?void 0:n.repl)||"Repl"!==n.repl.__typename)&&(null!==(t=null===(e=n.repl.config)||void 0===e?void 0:e.isExtension)&&void 0!==t&&t))}(),g=(0,r.Z)(i.useState(!1),2),y=g[0],Z=g[1],b=(0,o.Z)().dotReplit;i.useEffect((function(){return b.watch((function(e){var t,n,r;Z(null!==(r=null===(t=e.config)||void 0===t||null===(n=t.extension)||void 0===n?void 0:n.isExtension)&&void 0!==r&&r)}))}),[b]),i.useEffect((function(){c||u||y!==p&&f({variables:{replId:e,isExtension:y},optimisticResponse:{__typename:"RootMutationType",updateRepl:{__typename:"UpdateReplPayload",repl:{id:e,__typename:"Repl",config:{__typename:"ReplConfig",isExtension:y}}}}})}),[c,u,e,p,y,f])}},77410:function(e,t,n){n.d(t,{AR:function(){return k},LF:function(){return x},R9:function(){return b},Ve:function(){return C},aq:function(){return E},gp:function(){return w},jF:function(){return R},q_:function(){return T}});var r=n(72006),i=n(43119),o=n(71440),a=n(24635);function l(){var e=(0,i.Z)(["\n  fragment TopLevelExtensionUser on User {\n    __typename\n    id\n    username\n    displayName\n    image\n    url\n  }\n"]);return l=function(){return e},e}function c(){var e=(0,i.Z)(["\n  fragment TopLevelExtensionManifest on ExtensionManifest {\n    __typename\n    name\n    description\n    scopes {\n      name\n      reason\n    }\n    icon\n    tags\n    fileHandlers {\n      glob\n      handler\n      name\n      icon\n    }\n    tools {\n      handler\n      name\n      icon\n    }\n    background {\n      page\n    }\n  }\n"]);return c=function(){return e},e}function u(){var e=(0,i.Z)(["\n  fragment TopLevelExtension on Extension {\n    __typename\n    id\n    url\n    name\n    description\n    user {\n      id\n      ...TopLevelExtensionUser\n    }\n    manifest {\n      ... on ExtensionManifest {\n        ...TopLevelExtensionManifest\n      }\n      ... on ExtensionManifestError {\n        message\n      }\n    }\n    installCount\n    isBlessed\n    isListed\n    enableInternalApi\n  }\n  ","\n  ","\n"]);return u=function(){return e},e}function s(){var e=(0,i.Z)(["\n  fragment TopLevelExtensionInstallation on ExtensionInstallation {\n    __typename\n    id\n    repl {\n      id\n    }\n    user {\n      id\n    }\n    extension {\n      id\n      ...TopLevelExtension\n    }\n    installer {\n      id\n    }\n  }\n  ","\n"]);return s=function(){return e},e}function d(){var e=(0,i.Z)(["\n  query ExtensionSystemUserContext {\n    currentUser {\n      id\n      isAdmin: hasRole(role: ADMIN)\n      isStaff: hasRole(role: REPLIT_STAFF)\n    }\n  }\n"]);return d=function(){return e},e}function f(){var e=(0,i.Z)(["\n  query ExtensionInstallationById($installationId: String!) {\n    extensionInstallationById(id: $installationId) {\n      __typename\n      ... on ExtensionInstallation {\n        ...TopLevelExtensionInstallation\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n  ","\n"]);return f=function(){return e},e}function p(){var e=(0,i.Z)(["\n  query ExtensionInstallationsInRepl($replId: String!) {\n    extensionInstallations(replId: $replId) {\n      __typename\n      ... on ExtensionInstallationList {\n        installations {\n          ...TopLevelExtensionInstallation\n        }\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n  ","\n"]);return p=function(){return e},e}function h(){var e=(0,i.Z)(["\n  query ExtensionReplHostedUrl($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        hostedUrl\n      }\n    }\n  }\n"]);return h=function(){return e},e}function v(){var e=(0,i.Z)(["\n  mutation InstallExtension($extensionId: String!, $replId: String) {\n    installExtension(extensionId: $extensionId, replId: $replId) {\n      __typename\n      ... on ExtensionInstallation {\n        ...TopLevelExtensionInstallation\n        extension {\n          id\n          installation(replId: $replId) {\n            ...TopLevelExtensionInstallation\n          }\n        }\n      }\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return v=function(){return e},e}function m(){var e=(0,i.Z)(["\n  mutation UninstallExtension($installationId: String!, $replId: String) {\n    uninstallExtension(installationId: $installationId) {\n      __typename\n      ... on ExtensionInstallation {\n        ...TopLevelExtensionInstallation\n        extension {\n          id\n          installation(replId: $replId) {\n            ...TopLevelExtensionInstallation\n          }\n        }\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return m=function(){return e},e}var g={},y=(0,o.Ps)(l()),Z=(0,o.Ps)(c()),b=(0,o.Ps)(u(),y,Z),w=(0,o.Ps)(s(),b),x=(0,o.Ps)(d());var k=(0,o.Ps)(f(),w);var C=(0,o.Ps)(p(),w);var S=(0,o.Ps)(h());function T(e){var t=(0,r.Z)({},g,e);return a.a(S,t)}var E=(0,o.Ps)(v(),w);var R=(0,o.Ps)(m(),w)},18952:function(e,t,n){n.d(t,{LM:function(){return r.LM},Mu:function(){return i.Mu},WF:function(){return r.WF},WG:function(){return i.WG},jx:function(){return i.jx},ot:function(){return r.ot},r9:function(){return i.r9}});var r=n(35759),i=n(7909)},35759:function(e,t,n){n.d(t,{EO:function(){return I},I1:function(){return B},Kf:function(){return D},LM:function(){return G},WF:function(){return R},bN:function(){return T},dI:function(){return _},ot:function(){return E},zm:function(){return P}});var r=n(57135),i=n(81962),o=n(72006),a=n(4405),l=n(2272),c=n(96583),u=n(48330),s=n(625),d=n(40176),f=n(91398),p=n(19334),h=n.n(p),v=n(50959),m=n(91046),g=n(97836),y=n(85234),Z=n.n(y),b=n(44945),w=n(77410),x=n(98449),k=n(7909),C=n(99822),S=n(47031);function T(){var e=(0,C.E4)(k.We);return v.useCallback(function(){var t=(0,r.Z)((function(t){return(0,c.__generator)(this,(function(n){return e({installationId:t}),[2]}))}));return function(e){return t.apply(this,arguments)}}(),[e])}function E(){var e=U(),t=e.throwSystemError,n=e.throwExtensionError,l=(0,C.E4)(k.nk),u=(0,C.ZC)(k.Ol),s=(0,C.Ld)();return v.useCallback(function(){var e=(0,r.Z)((function(e){var r,d,f,p,v,y,Z,w,C,T,E,R,G,I,_,D,B,P,A,L;return(0,c.__generator)(this,(function(c){switch(c.label){case 0:return r=e.installationId,d=e.forceRefetch,f=void 0===d||d,[4,(0,x.Al)()];case 1:return!(p=c.sent())||p.error?(t({friendlyMessage:"Failed to load user context",error:p.error}),[2]):(v=p.result.userHasInternalApiEnabled,(y=s.get(k.Lq).find((function(e){return e.installationId===r})))?[4,(0,x.V9)(y.baseUrl)]:[3,3]);case 2:return Z=c.sent(),w=u.createLogger({extensionId:y.extensionId,installationId:y.installationId,local:!0}),Z.error?(C=(0,a.Z)((0,o.Z)({},y),{manifest:(0,m.fF)(),enableExperimentalApi:!1,enableInternalApi:!1,logger:w.createLogger({extensionName:"Unnamed Extension"}),isLocal:!0}),u.info("Adding extension: ".concat(C.manifest.name),{extensionArgs:h()(C,["extensionId","installationId","baseUrl","manifest","enableExperimentalApi","enableInternalApi","isLocal"]),local:C.isLocal,error:!0}),l(C),T="Failed to load extension manifest",(0,i.Z)(Z.error,b.jm)&&(T=Z.error.issues.map((function(e){return"".concat(e.path,": ").concat(e.message)})).join("\n")),n({extensionId:y.extensionId,installationId:y.installationId,extensionError:{error:Z.error,friendlyMessage:T}}),[2]):(E=(0,g.MU)(Z.result,"experimental-api"),R=(0,a.Z)((0,o.Z)({},y),{manifest:Z.result,enableExperimentalApi:E,enableInternalApi:v,logger:w.createLogger({extensionName:Z.result.name}),isLocal:!0}),u.info("Adding extension: ".concat(R.manifest.name),{extensionArgs:h()(R,["extensionId","installationId","baseUrl","manifest","enableExperimentalApi","enableInternalApi","isLocal"]),local:!0}),l(R),[3,5]);case 3:return[4,(0,x.mr)(r,f)];case 4:return(G=c.sent()).error?(t({friendlyMessage:"Something went wrong while downloading an extension",error:G.error}),[2]):(I=G.result)?(_=I.extension)?_.manifest?"ExtensionManifestError"===_.manifest.__typename?(n({extensionId:(0,S.T8)(_.id),installationId:(0,S.Ad)(I.id),extensionError:{friendlyMessage:"An error occurred while loading the extension manifest: ".concat(_.manifest.message),error:new Error(_.manifest.message)}}),[2]):_.manifest&&"ExtensionManifest"===_.manifest.__typename?(D=(0,m.tr)(_.manifest),B=(0,g.MU)(D,"experimental-api"),P=(0,S.T8)(_.id),A=_.enableInternalApi,L={extensionId:P,installationId:r,manifest:D,baseUrl:(0,m.BY)(_.url),enableExperimentalApi:B,enableInternalApi:v||A,logger:u.createLogger({extensionId:P,installationId:r,extensionName:D.name,local:!1}),isLocal:!1},u.info("Adding extension: ".concat(L.manifest.name),{extensionArgs:h()(L,["extensionId","installationId","baseUrl","manifest","enableExperimentalApi","enableInternalApi","isLocal"]),local:!1}),l(L),[2,I]):(n({extensionId:(0,S.T8)(_.id),installationId:(0,S.Ad)(I.id),extensionError:{friendlyMessage:"An error occurred while loading the extension manifest",error:new Error("Expected extension manifest to be defined")}}),[2]):(n({extensionId:(0,S.T8)(_.id),installationId:(0,S.Ad)(I.id),extensionError:{friendlyMessage:"Extension failed to install",error:new Error("Expected extension manifest to be defined")}}),[2]):(t({friendlyMessage:"Extension failed to install",error:new Error("Expected extension to be defined")}),[2]):(t({friendlyMessage:"Extension failed to install",error:new Error("Expected installation to be defined")}),[2]);case 5:return[2]}}))}));return function(t){return e.apply(this,arguments)}}(),[l,n,t,s,u])}function R(){var e=E(),t=U().throwSystemError;return v.useCallback(function(){var n=(0,r.Z)((function(n){var r,i,o,a,l;return(0,c.__generator)(this,(function(c){switch(c.label){case 0:return r=n.extensionId,i=n.replId,[4,(0,x.Wc)({extensionId:r,replId:i})];case 1:return(l=c.sent()).error?(t({error:l.error,friendlyMessage:"Something went wrong while installing an extension"}),[2]):((0,s.j)(s.U3.EXTENSION_INSTALLED,{name:null===(o=l.result)||void 0===o||null===(a=o.extension)||void 0===a?void 0:a.name,extensionId:r}),[4,e({installationId:(0,S.Ad)(l.result.id)})]);case 2:return c.sent(),[2,l.result]}}))}));return function(e){return n.apply(this,arguments)}}(),[e,t])}function G(){var e=T(),t=(0,C.Ld)(),n=U().throwSystemError;return v.useCallback(function(){var i=(0,r.Z)((function(r){var i,o,a,l;return(0,c.__generator)(this,(function(c){switch(c.label){case 0:return i=r.installationId,o=r.replId,a=t.get(k._t),(l=a.find((function(e){return e.installationId===i})))?l.installationId&&l.extensionId?((0,s.j)(s.U3.EXTENSION_UNINSTALLED,{name:l.manifest.name,extensionId:l.extensionId}),[4,(0,x.Y4)({installationId:l.installationId,replId:o})]):(n({friendlyMessage:"Failed to uninstall extension",error:new Error("Expected installationId to be defined")}),[2]):(n({friendlyMessage:"Extension appears to be already uninstalled",error:new Error("Expected extension to be defined")}),[2]);case 1:return c.sent(),[4,e(l.installationId)];case 2:return c.sent(),[2]}}))}));return function(e){return i.apply(this,arguments)}}(),[e,t,n])}function I(){var e=T(),t=E();return v.useCallback(function(){var n=(0,r.Z)((function(n){return(0,c.__generator)(this,(function(r){switch(r.label){case 0:return[4,e(n)];case 1:return r.sent(),[4,t({installationId:n,forceRefetch:!0})];case 2:return r.sent(),[2]}}))}));return function(e){return n.apply(this,arguments)}}(),[e,t])}function _(){var e=function(){var e=E(),t=(0,C.ZC)(k.Ol),n=U().throwSystemError;return v.useCallback(function(){var i=(0,r.Z)((function(r){var i,o,a,l,u,s,d,f,p;return(0,c.__generator)(this,(function(c){switch(c.label){case 0:return[4,(0,x.Zw)(r)];case 1:if((i=c.sent()).error)return n({friendlyMessage:"Failed to load installed extensions",error:i.error}),[2];o=!0,a=!1,l=void 0,c.label=2;case 2:c.trys.push([2,9,10,11]),u=i.result[Symbol.iterator](),c.label=3;case 3:if(o=(s=u.next()).done)return[3,8];d=s.value,c.label=4;case 4:return c.trys.push([4,6,,7]),[4,e({installationId:(0,S.Ad)(d.id),forceRefetch:!0})];case 5:return c.sent(),[3,7];case 6:return f=c.sent(),t.error("Extension Loading error: ".concat(f.message),{extension:!0,errors:f.message}),[3,7];case 7:return o=!0,[3,3];case 8:return[3,11];case 9:return p=c.sent(),a=!0,l=p,[3,11];case 10:try{o||null==u.return||u.return()}finally{if(a)throw l}return[7];case 11:return[2]}}))}));return function(e){return i.apply(this,arguments)}}(),[e,n,t])}(),t=(0,C.E4)(k.Ol),n=(0,C.E4)(k.zk),i=(0,l.Z)(v.useState(!1),2),o=i[0],a=i[1],u=(0,l.Z)(v.useState(null),2),s=u[0],f=u[1],p=(0,l.Z)(v.useState(null),2),h=p[0],m=p[1];return v.useEffect((function(){if(s&&h&&!o){var t=s.replId;a(!0),e(t)}}),[s,h,e,o]),v.useCallback((function(e){var r=e.replId,i=e.userId;if(!o){f({replId:r,userId:i});var a=(0,d.Z)({extension:!0,isInitialized:!0,replId:r,userId:i},{onLog:function(e){n(e)}});m(a),t(a)}}),[t,o,n])}function D(){var e=E(),t=(0,k.qr)(),n=(0,k.Mu)(),i=(0,C.E4)(k.ot);return v.useCallback(function(){var o=(0,r.Z)((function(r){var o,a,l,u;return(0,c.__generator)(this,(function(c){return o=(0,m.BY)(r),(a=t.find((function(e){return e.baseUrl===o})))||(l=(0,S.T8)(Z()()),u=(0,S.Ad)(Z()()),i(a={extensionId:l,installationId:u,baseUrl:o})),n.find((function(e){return e.extensionId===(null===a||void 0===a?void 0:a.extensionId)}))||e({installationId:a.installationId}),[2]}))}));return function(e){return o.apply(this,arguments)}}(),[t,n,i,e])}function B(){var e=(0,u.Z)(),t=(0,w.q_)({variables:{replId:e}}).data,n=(0,C.E4)(k.M1),i=(0,C.Ld)(),o=E();return v.useCallback((0,r.Z)((function(){var e;return(0,c.__generator)(this,(function(r){switch(r.label){case 0:return"Repl"!==(null===t||void 0===t?void 0:t.repl.__typename)?[2]:(e=n(t.repl.hostedUrl),[4,o({installationId:e.installationId,forceRefetch:!0})]);case 1:return r.sent(),[2,i.get(k._t).find((function(t){return t.installationId===e.installationId}))]}}))})),[t,n,o,i])}function P(){var e=(0,u.Z)(),t=(0,w.q_)({variables:{replId:e}}).data,n=(0,C.E4)(k.M1),r=(0,k.Mu)();return v.useMemo((function(){if("Repl"===(null===t||void 0===t?void 0:t.repl.__typename)){var e=n(t.repl.hostedUrl);return r.find((function(t){return e.installationId===t.installationId}))}}),[t,r,n])}var A=(0,f.cn)(null,(function(e,t,n){var r=e(k.Ol);t(k.wQ,n),r.error("Extension System Error: ".concat(n.error.message),{extensionSystem:!0,originalError:n.error.message,friendlyMessage:n.friendlyMessage})})),L=(0,f.cn)(null,(function(e,t,n){var r=e(k._t),i=e(k.Ol),o=r.find((function(e){return e.extensionId===n.extensionId}));if(i.error("Extension Error: ".concat(n.extensionError.friendlyMessage),{extension:!0,extensionId:n.extensionId,originalError:n.extensionError.error.message,friendlyMessage:n.extensionError.friendlyMessage}),!o)return t(k.nk,{extensionId:n.extensionId,installationId:n.installationId,manifest:(0,m.fF)({name:n.extensionId}),baseUrl:"",enableExperimentalApi:!1,enableInternalApi:!1,logger:i.createLogger({extensionId:n.extensionId,extensionName:n.extensionId,installationId:n.installationId,local:void 0}),isLocal:null}),void t(k.f4,{extensionId:n.extensionId,extensionError:n.extensionError});t(k.f4,{extensionId:n.extensionId,extensionError:n.extensionError})}));function U(){return{throwSystemError:(0,C.E4)(A),throwExtensionError:(0,C.E4)(L)}}},98449:function(e,t,n){n.d(t,{Al:function(){return Z},V9:function(){return g},Wc:function(){return u},Y4:function(){return d},Zw:function(){return v},mr:function(){return p}});var r=n(57135),i=n(96583),o=n(68216),a=n(12379),l=n(91046),c=n(77410);function u(e){return s.apply(this,arguments)}function s(){return(s=(0,r.Z)((function(e){var t,n,r,o,l,u;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return t=e.extensionId,n=e.replId,a.l?[4,a.l.mutate({mutation:c.aq,variables:{extensionId:t,replId:n}})]:[2,{error:new Error("expected apolloClient to be initialized"),result:null}];case 1:return(o=i.sent()).errors&&o.errors.length>0?(l=o.errors.map((function(e){return e.message})).join(", "),[2,{error:new Error("Error when installing extension: "+l),result:null}]):(u=null===(r=o.data)||void 0===r?void 0:r.installExtension)?"UnauthorizedError"===(null===u||void 0===u?void 0:u.__typename)||"UserError"===(null===u||void 0===u?void 0:u.__typename)?[2,{error:new Error("Error when installing extension: "+u.message),result:null}]:u.extension?u.extension.url?[2,{result:u,error:null}]:[2,{error:new Error("Error when installing extension: Extension does not have a URL and cannot be installed"),result:null}]:[2,{error:new Error("Error when installing extension: expected extension to be set"),result:null}]:[2,{error:new Error("Error when installing extension: expected result"),result:null}]}}))}))).apply(this,arguments)}function d(e){return f.apply(this,arguments)}function f(){return(f=(0,r.Z)((function(e){var t,n,r,o,l,u;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return t=e.installationId,n=e.replId,a.l?[4,a.l.mutate({mutation:c.jF,variables:{installationId:t,replId:n}})]:[2,{error:new Error("expected apolloClient to be initialized"),result:null}];case 1:return(o=i.sent()).errors&&o.errors.length>0?(l=o.errors.map((function(e){return e.message})).join(", "),[2,{error:new Error("Error when uninstalling extension: "+l),result:null}]):(u=null===(r=o.data)||void 0===r?void 0:r.uninstallExtension)?"NotFoundError"===(null===u||void 0===u?void 0:u.__typename)||"UserError"===(null===u||void 0===u?void 0:u.__typename)?[2,{error:new Error("Error when uninstalling extension: "+u.message),result:null}]:[2,{result:u,error:null}]:[2,{error:new Error("Error when uninstalling extension: expected result"),result:null}]}}))}))).apply(this,arguments)}function p(e){return h.apply(this,arguments)}function h(){return h=(0,r.Z)((function(e){var t,n,r,o=arguments;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return t=o.length>1&&void 0!==o[1]&&o[1],a.l?[4,a.l.query({query:c.AR,variables:{installationId:e},fetchPolicy:t?"network-only":"cache-first"})]:[2,{error:new Error("expected apolloClient to be initialized"),result:null}];case 1:return n=i.sent(),"ExtensionInstallation"!==(r=n.data.extensionInstallationById).__typename?[2,{error:new Error("Expected to find extension installation"),result:null}]:r.extension?[2,{result:r,error:null}]:[2,{error:new Error("Expected installation.extension"),result:null}]}}))})),h.apply(this,arguments)}function v(e){return m.apply(this,arguments)}function m(){return(m=(0,r.Z)((function(e){var t,n;return(0,i.__generator)(this,(function(r){switch(r.label){case 0:return a.l?[4,a.l.query({query:c.Ve,variables:{replId:e}})]:[2,{error:new Error("expected apolloClient to be initialized"),result:null}];case 1:return t=r.sent(),"ExtensionInstallationList"!==(n=t.data.extensionInstallations).__typename?[2,{error:new Error("Expected to find ExtensionInstallationList"),result:null}]:[2,{result:n.installations,error:null}]}}))}))).apply(this,arguments)}function g(e){return y.apply(this,arguments)}function y(){return(y=(0,r.Z)((function(e){var t,n,r,a,c;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:t=(0,l.BP)(e),i.label=1;case 1:return i.trys.push([1,4,,5]),[4,fetch(t)];case 2:return[4,i.sent().text()];case 3:return n=i.sent(),r=o.ku(n),(a=(0,l.U4)(r)).error?[2,{error:a.error,result:null}]:[2,{result:a.manifest,error:null}];case 4:return"SyntaxError"===(c=i.sent()).name?[2,{error:new Error("Error when fetching manifest: invalid JSON"),result:null}]:[2,{error:new Error("Error when fetching manifest: "+c.message),result:null}];case 5:return[2]}}))}))).apply(this,arguments)}function Z(){return b.apply(this,arguments)}function b(){return(b=(0,r.Z)((function(){var e,t;return(0,i.__generator)(this,(function(n){switch(n.label){case 0:return a.l?[4,a.l.query({query:c.LF,fetchPolicy:"cache-first"})]:[2,{error:new Error("expected apolloClient to be initialized"),result:null}];case 1:return e=n.sent(),(t=e.data.currentUser)&&"CurrentUser"===t.__typename?[2,{result:{userHasInternalApiEnabled:t.isAdmin||t.isStaff},error:null}]:[2,{error:new Error("Expected to find CurrentUser"),result:null}]}}))}))).apply(this,arguments)}},7909:function(e,t,n){n.d(t,{FX:function(){return D},Lq:function(){return Z},M1:function(){return G},Mu:function(){return L},Ol:function(){return w},UB:function(){return C},UT:function(){return S},WG:function(){return N},We:function(){return I},_t:function(){return y},c_:function(){return M},ep:function(){return T},f4:function(){return _},jx:function(){return U},nk:function(){return E},ot:function(){return R},qr:function(){return F},r9:function(){return X},s6:function(){return O},wQ:function(){return b},zk:function(){return k}});var r=n(57135),i=n(72006),o=n(4405),a=n(2272),l=n(9970),c=n(96583),u=n(91398),s=n(47031),d=n(92153),f=n(99822),p=n(85234),h=n.n(p),v=n(40176),m=n(35554),g=n.n(m),y=(0,u.cn)([]);var Z=(0,u.cn)([]),b=(0,u.cn)(null),w=(0,u.cn)((0,v.Z)({extension:!0,isInitialized:!1},{onLog:function(){throw new Error("Logged before extension system was initialized.")}})),x=(0,u.cn)([]),k=(0,u.cn)(null,(function(e,t,n){var r=e(x),i=(0,d.ZP)(r,(function(e){e.push((0,d.ZP)(n,(function(t){t.index=e.length}))),e.length>1e3&&e.splice(0,e.length-1e3)}));t(x,i)})),C=(0,u.cn)(null,(function(e,t){t(x,[])})),S=(0,u.cn)(null),T=(0,u.cn)((function(e){var t=e(x),n=e(S);if(!n)return t;var r=n.split(" ").map((function(e){var t=(0,a.Z)(e.split(":"),2),n=t[0],r=t[1];return n&&void 0===r?function(e){return e.message.toLowerCase().includes(n.toLowerCase())}:n&&""===r?function(e){return void 0!==g()(e,n)}:n&&r?function(e){try{return String(g()(e,n))===r}catch(t){return!1}}:null})).filter((function(e){return null!==e}));return t.filter((function(e){return r.every((function(t){return t(e)}))}))})),E=(0,u.cn)(null,function(){var e=(0,r.Z)((function(e,t,n){return(0,c.__generator)(this,(function(r){if(e(y).find((function(e){return e.extensionId===n.extensionId})))throw new Error("Extension already loaded");return t(y,(function(e){return(0,d.ZP)(e,(function(e){var t=function(e){var t,n=e.baseUrl,r=e.extensionId,i=e.installationId,o=e.manifest,a=e.enableExperimentalApi,l=e.enableInternalApi,c=e.logger;return{baseUrl:n,extensionId:r,installationId:i,manifest:o,isLocal:e.isLocal,stateAtom:(0,u.cn)({error:null,panes:[],scopes:new Set(null===(t=o.scopes)||void 0===t?void 0:t.map((function(e){return e.name}))),enableExperimentalApi:a,enableInternalApi:l,commands:new Map}),logger:c}}(n);e.push(t)}))})),[2]}))}));return function(t,n,r){return e.apply(this,arguments)}}()),R=(0,u.cn)(null,function(){var e=(0,r.Z)((function(e,t,n){return(0,c.__generator)(this,(function(r){if(e(Z).find((function(e){return e.extensionId===n.extensionId||e.installationId===n.installationId||e.baseUrl===n.baseUrl})))throw new Error("Extension already loaded");return t(Z,(function(e){return(0,d.ZP)(e,(function(e){e.push(n)}))})),[2]}))}));return function(t,n,r){return e.apply(this,arguments)}}()),G=(0,u.cn)(null,(function(e,t,n){var r=e(Z).find((function(e){return e.baseUrl===n}));if(r)return r;var i={baseUrl:n,extensionId:(0,s.T8)(h()()),installationId:(0,s.Ad)(h()())};return t(Z,(function(e){return(0,d.ZP)(e,(function(e){e.push(i)}))})),i})),I=(0,u.cn)(null,function(){var e=(0,r.Z)((function(e,t,n){return(0,c.__generator)(this,(function(e){return t(y,(function(e){return(0,d.ZP)(e,(function(e){var t=e.findIndex((function(e){return"extensionId"in n?e.extensionId===n.extensionId:e.installationId===n.installationId}));-1!==t&&e.splice(t,1)}))})),[2]}))}));return function(t,n,r){return e.apply(this,arguments)}}()),_=(0,u.cn)(null,(function(e,t,n){var r=e(y).find((function(e){return e.extensionId===n.extensionId}));if(!r)throw new Error("Extension not found");t(r.stateAtom,(function(e){return(0,d.ZP)(e,(function(e){e.error=n.extensionError}))}))})),D=(0,u.cn)(null,(function(e,t,n){var r=n.command.data.id;if(!r)throw new Error("A top level command must have an id");t(n.extensionStateAtom,(function(e){return(0,d.ZP)(e,(function(e){e.commands.set(r,n.command)}))}))})),B=(0,u.cn)((function(e){return e(y).flatMap((function(t){return(0,l.Z)(e(t.stateAtom).commands.values())}))})),P=(0,u.cn)((function(e){return e(y).map((function(e){var t;return null===(t=e.manifest.fileHandlers)||void 0===t?void 0:t.map((function(t){return(0,o.Z)((0,i.Z)({},t),{extension:e})}))})).flat().filter((function(e){return!!e}))})),A=(0,u.cn)((function(e){return e(y).map((function(e){var t;return null===(t=e.manifest.tools)||void 0===t?void 0:t.map((function(t){return(0,o.Z)((0,i.Z)({},t),{extension:e})}))})).flat().filter((function(e){return!!e}))}));function L(){return(0,f.ZC)(y)}function U(e){return L().find((function(t){return t.installationId===e}))}function X(e){var t=U(e);return t&&e?t.stateAtom:null}function M(){return(0,f.ZC)(P)}function N(){return(0,f.ZC)(A)}function O(){return(0,f.ZC)(B)}function F(){return(0,f.ZC)(Z)}},99822:function(e,t,n){n.d(t,{E4:function(){return f},Ld:function(){return u},OA:function(){return s},Wv:function(){return p},ZC:function(){return d}});var r=n(2272),i=n(74985),o=n(91398),a=n(92683),l=n(50959),c=(0,l.createContext)(null);function u(){return function(){var e=(0,l.useContext)(c);if(!e)throw new Error("Expected extensions context");return e}().store}var s=function(e){var t=u();return(0,a.KO)(e,{store:t})};function d(e){var t=u();return(0,a.Dv)(e,{store:t})}var f=function(e){var t=u();return(0,a.b9)(e,{store:t})};function p(e){var t=e.children,n=(0,r.Z)(l.useState((function(){return(0,o.MT)()})),1)[0];return(0,i.tZ)(c.Provider,{value:{store:n},children:t})}},47031:function(e,t,n){n.d(t,{Ad:function(){return o},T8:function(){return i},YC:function(){return r},ZC:function(){return a}});var r;Symbol("extensionId"),Symbol("installationId"),Symbol("extensionCommandId");function i(e){return e}function o(e){return e}function a(e){if(!e.data.id)throw new Error("A Command at the top level must have an id");if(!e.data.contributions||0===e.data.contributions.length)throw new Error("A Command at the top level must describe one or more contributions");return e}!function(e){e.CommandBar="commandbar",e.FiletreeContextMenu="filetree-context-menu"}(r||(r={}))},40176:function(e,t,n){n.d(t,{Z:function(){return d},i:function(){return r}});var r,i=n(57389),o=n(72006),a=n(4405),l=n(29457),c=n(59245),u=n.n(c),s=n(49500);function d(e,t){var n=function(n){var a,c,d,f,p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{logLevel:r.debug},h=null!==(a=(c={},(0,i.Z)(c,r.debug,l.kg.debug),(0,i.Z)(c,r.warn,l.kg.warn),(0,i.Z)(c,r.info,l.kg.info),(0,i.Z)(c,r.error,l.kg.error),c)[p.logLevel])&&void 0!==a?a:l.kg.debug,v=null!==(d=(f={},(0,i.Z)(f,r.debug,s.debug),(0,i.Z)(f,r.warn,s.warn),(0,i.Z)(f,r.info,s.info),(0,i.Z)(f,r.error,s.error),f)[p.logLevel])&&void 0!==d?d:s.debug;v(n,p),h(n,u()((0,o.Z)({},p,e),["replId","logLevel"])),t.onLog((0,o.Z)({message:n},p,e))},c={context:e,info:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n(e,(0,a.Z)((0,o.Z)({},t),{logLevel:r.info}))},warn:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n(e,(0,a.Z)((0,o.Z)({},t),{logLevel:r.warn}))},error:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n(e,(0,a.Z)((0,o.Z)({},t),{logLevel:r.error}))},createLogger:function(n){return d((0,o.Z)({},e,n),t)}};return c}!function(e){e.debug="debug",e.info="info",e.warn="warn",e.error="error"}(r||(r={}))},74121:function(e,t,n){n.d(t,{Cl:function(){return a},VD:function(){return d},uN:function(){return s}});var r=n(91398),i=n(92683),o=n(50959),a=(0,o.createContext)(null),l=(0,r.cn)(null),c=(0,r.cn)(null,(function(e,t,n){t(l,n)}));function u(){var e=(0,o.useContext)(a);if(!e)throw new Error("Expected store in context");return e}function s(){return(0,i.Dv)(l,{store:u()})}function d(e){var t=(0,i.Dv)(l,{store:u()}),n=(0,i.b9)(c,{store:u()});(0,o.useEffect)((function(){t!==e&&n(e)}),[e,t,n])}},31672:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(45285),i=n(50959),o=n(87978);function a(e){var t=(0,r.Z)().fs,n=(0,i.useCallback)((function(n,r){var i=n.code,a=n.insertAt,l=n.newLine,c=void 0===l||l;if(!e||(0,o.T3)(e)||(0,o.sL)(e)||(0,o.IQ)(e))throw new Error("Invalid file, this should never happen");if(0!==i.length)var u=t.watchTextFile(e,{onReady:function(e){var n=e.initialContent,o=e.writeChange,l=n.toString(),s="end"===a?l.length:a,d=i;c&&(0!==s&&s!==l.length&&-1===(s=l.indexOf("\n",s))&&(s=l.length),0!==s&&"\n"!==l[s-1]&&(d="\n"+d),"\n"!==l[s]&&(d+="\n")),o({from:s,insert:d},r),t.flush().finally((function(){u()}))}})}),[e,t]);return!e||(0,o.T3)(e)||(0,o.sL)(e)?null:n}},20125:function(e,t,n){n.d(t,{Z:function(){return y}});var r=n(57135),i=n(9970),o=n(96583),a=n(50959),l=n(83293),c=n(625),u=n(12583),s=n(4561),d=n(13716),f=n(45285),p=n(13424),h=n(87978),v=n(49514),m=n(84524),g=n(1468);function y(e){var t=e.moveOrDeleteFile,n=(0,f.Z)().fs,y=(0,v.K)(),Z=(0,a.useRef)(new Map),b=(0,d.ex)(),w=(0,a.useState)(!1),x=w[0],k=w[1],C=(0,a.useState)(!1),S=C[0],T=C[1],E=(0,a.useState)([]),R=E[0],G=E[1],I=(0,m.k)(),_=(0,p.uV)(),D=R.map((function(e){return e.path})).map((function(e){return{title:e,path:e}})),B=(0,a.useState)(),P=B[0],A=B[1],L=(0,d.Gg)();(0,a.useEffect)((function(){if(b&&!Z.current.has(b)&&b!==u.rq){var e=function(e){var n=e.node.path;L(e.eventType===s.kS.Move?{path:n,type:"move",to:e.to}:{path:n,type:"delete"}),t&&t(e),Z.current.delete(b),G((function(e){return e.filter((function(e){return e.path!==b}))}))};(0,h.Mb)(b)?n.watchTextFile(b,{onMoveOrDelete:e,onError:function(e,t){e.code||(n.flush(),n.persist({skipDebounce:!0}),g.c_.withScope((function(n){t&&n.setExtras(t),n.setExtra("origin","useContentsDiverged: fs.watchTextFile"),n.setTag("ot",!0),n.setTag("bsod",!1),g.c_.captureException(e)})))},onReconnectFail:function(e,t){G((function(n){return(0,i.Z)(n.filter((function(e){return e.path!==b}))||[]).concat([{path:b,prompt:t,cb:e}])})),y("user:ot:diverged",{path:b,divergence:t}),k(!0),P||A(b)}}):n.watchFile(b,{onChange:function(){},onMoveOrDelete:e}),Z.current.set(b,!0)}}),[b,n,_,t,P,y,L]);var U,X,M=function(){var e=(0,r.Z)((function(e){return(0,o.__generator)(this,(function(t){switch(t.label){case 0:return(0,c.j)(c.U3.FILE_RECONNECT_FALLBACK_CHOSEN,{choice:e}),(0,c.j)(c.U3.CONTENTS_DIVERGED_ACTION,{action:"local"===e?"client":"server"}),T(!0),[4,Promise.all(R.map((function(t){return G((function(e){var n=e.filter((function(e){return e.path!==t.path}));return 0===n.length?k(!1):A(n[0].path),n})),t.cb(e)})))];case 1:return t.sent(),T(!1),[2]}}))}));return function(t){return e.apply(this,arguments)}}(),N=P?R.find((function(e){return e.path===P})):null,O=null===N||void 0===N?void 0:N.prompt,F=P,W=(0,l.J)({left:{code:null!==(U=null===O||void 0===O?void 0:O.localContent)&&void 0!==U?U:"",filePath:F},right:{code:null!==(X=null===O||void 0===O?void 0:O.remoteContent)&&void 0!==X?X:"",filePath:F}}),H=W.left,V=W.right;return{isConverging:S,didContentsDiverge:x,showMoreDetail:I,failedFiles:R,failedFilesOptions:D,selectedFile:P,setSelectedFile:A,reviewingPrompt:O,onChoice:M,local:H,remote:V}}},79410:function(e,t,n){n.d(t,{F:function(){return ve}});var r,i,o,a=n(57135),l=n(72006),c=n(4405),u=n(2272),s=n(96583),d=n(71813),f=n(13233),p=n(48330),h=n(75885),v=n(77502),m=n(45285);!function(e){e[e.NONE=0]="NONE",e[e.PUSH=1]="PUSH",e[e.CLONE=2]="CLONE",e[e.FETCH=3]="FETCH",e[e.GITHUB_CREATE=4]="GITHUB_CREATE",e[e.GITHUB_GET_INFO=5]="GITHUB_GET_INFO"}(r||(r={})),function(e){e.None="NONE",e.NoMergeBase="NO_MERGE_BASE",e.AuthFetchError="AUTH_FETCH_ERROR",e.IndexFilesCorrupted="INDEX_FILES_CORRUPTED"}(i||(i={})),function(e){e[e.UNTRACKED=0]="UNTRACKED",e[e.MODIFIED=1]="MODIFIED",e[e.MOVED=2]="MOVED",e[e.DELETED=3]="DELETED"}(o||(o={}));r.NONE,i.None;var g="git log -0 2>/dev/null && ".concat("git symbolic-ref HEAD --short"," || echo 'HEAD'");function y(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return["bash","-c",t.join("&&")]}var Z=function(e,t){return y('[ ! -d ".git" ]',"git init","git checkout -b main",'git config user.name "'.concat(t.username||"Replit user",'"'),'git config user.email "<>"',"touch .git/branches/.keep","touch .git/info/.keep","touch .git/objects/.keep","touch .git/refs/.keep")},b=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=null!==(t=e.remote)&&void 0!==t?t:"";return y(n?"git fetch ".concat(r," --progress --deepen=10"):"git fetch ".concat(e.remote," +refs/heads/*:refs/remotes/origin/* --progress --depth=10"))},w=function(e){return["git","remote","get-url","origin"]},x=function(e,t){return t.includes("No such remote")||t.startsWith("fatal")?(0,c.Z)((0,l.Z)({},e),{remote:""}):(0,c.Z)((0,l.Z)({},e),{remote:t.trim()})},k=function(e,t){return e.remote?y("git remote remove origin; git remote add origin ".concat(t)):y("git remote add origin ".concat(t))},C=function(e){var t;return y("git remote show ".concat(null!==(t=e.remote)&&void 0!==t?t:""," | grep 'HEAD branch'"))},S=function(e,t){var n=(0,u.Z)(t.split(":"),2),r=(n[0],n[1].trim());return(0,c.Z)((0,l.Z)({},e),{defaultBranch:r})},T=function(e){return y("git checkout -f ".concat(e.defaultBranch))},E=function(e){return y((t="git reset $(".concat(g,") --"),"if ! (( $(busybox ps -o comm | grep git) )) ; then rm -rf .git/index.lock; fi ; ".concat(t)));var t},R=n(69834),G=n(50959),I=n(10702),_=n(33859),D=n.n(_),B=n(87861),P=n(20593),A=n(43119),L=n(71440),U=n(3481),X=n(24635);function M(){var e=(0,A.Z)(["\n  query DotReplitEditorRootOriginRepl($rootOriginReplUrl: String!) {\n    repl(url: $rootOriginReplUrl) {\n      ... on Repl {\n        id\n        ...CrosisContextRepl\n      }\n    }\n    currentUser {\n      id\n      ...CrosisContextCurrentUser\n    }\n  }\n  ","\n  ","\n"]);return M=function(){return e},e}function N(){var e=(0,A.Z)(["\n  query DotReplitEditorRootOriginReplById($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        ...CrosisContextRepl\n      }\n    }\n    currentUser {\n      id\n      ...CrosisContextCurrentUser\n    }\n  }\n  ","\n  ","\n"]);return N=function(){return e},e}var O={},F=(0,L.Ps)(M(),U.C,U.D);var W=(0,L.Ps)(N(),U.C,U.D);var H=n(5993),V="Couldn't fetch the template .replit. Please try again.",z=function(){var e=(0,f.Z)().showError,t=function(e){var t=(0,l.Z)({},O,e);return X.a(W,t)}({fetchPolicy:"no-cache",skip:!0}).refetch,n=function(e){var t=(0,l.Z)({},O,e);return X.a(F,t)}({fetchPolicy:"no-cache",skip:!0}).refetch,r=(0,H.S)(),i=G.useCallback(function(){var i=(0,a.Z)((function(i){var o,a,l,c,u,d,f,p,h,v,m,g;return(0,s.__generator)(this,(function(s){switch(s.label){case 0:return o=i.replId,a=i.replUrl,o?[4,t({replId:o})]:[3,2];case 1:return l=s.sent(),[3,5];case 2:return a?[4,n({rootOriginReplUrl:a})]:[3,4];case 3:return l=s.sent(),[3,5];case 4:throw new Error("how did we even get here?");case 5:if(c=l.data,u=l.error,!c||u)return e(V),[2,null];if(d=c.repl,f=c.currentUser,"Repl"!==(null===d||void 0===d?void 0:d.__typename)||"CurrentUser"!==(null===f||void 0===f?void 0:f.__typename))return e(V),[2,null];(p=(0,B.ZP)({onUnrecoverableError:function(){e(V)}})).connect({context:{repl:d,currentUser:f,asViewer:!0},getMinimumRetryDelayMs:r}),h=(0,P.Z)({container:p}),s.label=6;case 6:return s.trys.push([6,8,,9]),[4,h.readFile(I.l)];case 7:return"content"in(m=s.sent())&&(v=m.content),[3,9];case 8:return s.sent(),e(V),p.destroy(),[2,null];case 9:if(p.destroy(),!v)return e(V),[2,null];try{g=D().parse(v.toString())}catch(y){return e(V),[2,null]}return[2,g]}}))}));return function(e){return i.apply(this,arguments)}}(),[t,n,e,r]);return i},j=n(9125);function q(){var e=(0,A.Z)(["\n  query WorkspacePatchDotReplitRepl($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        rootOriginReplUrl\n      }\n    }\n  }\n"]);return q=function(){return e},e}var $={},Y=(0,L.Ps)(q());var K=function(e,t){return{op:"add",path:e,value:JSON.stringify(t)}},Q=new Map([["hintsList","hints"]]);function J(e){return ee.apply(this,arguments)}function ee(){return ee=(0,a.Z)((function(e){var t,n,r,i,o,c,d,f,p,h,v,m,g,y,Z;function b(){return w.apply(this,arguments)}function w(){return(w=(0,a.Z)((function(){var e,n,o;return(0,s.__generator)(this,(function(a){switch(a.label){case 0:return(e="object"===typeof r.env?r.env:null)&&0!==Object.keys(e).length?(n="object"===typeof i.env?i.env:null,o=n?(0,l.Z)({},e,n):e,[4,t.updateDotReplit([K("env",o)])]):[2];case 1:return a.sent(),[2]}}))}))).apply(this,arguments)}function x(){return k.apply(this,arguments)}function k(){return(k=(0,a.Z)((function(){var e,a,l,c;return(0,s.__generator)(this,(function(u){switch(u.label){case 0:return(null===(e=i.nix)||void 0===e?void 0:e.channel)?[2]:(null===r||void 0===r||null===(a=r.nix)||void 0===a?void 0:a.channel)?[3,2]:[4,n.getLatestStableChannel()];case 1:return(c=u.sent()).channel?(l=c.channel,[3,3]):[2];case 2:l=r.nix.channel,u.label=3;case 3:return[4,t.updateDotReplit([K("nix/channel",l)])];case 4:return u.sent().error||o.push("Nix channel was not detected in your imported .replit file but is required for all Nix Repls. The latest stable Nix channel "+'"'.concat(l.channel,'" was automatically added to your .replit file.')),[2]}}))}))).apply(this,arguments)}function C(e,t){return S.apply(this,arguments)}function S(){return S=(0,a.Z)((function(e,n){var a,l,c,u,d,f;return(0,s.__generator)(this,(function(s){switch(s.label){case 0:return a=i[e],l=Boolean(a),Array.isArray(a)?l=a.length>0:a&&"object"===typeof a&&(l=Object.keys(a).length>0),u=null!==(c=Q.get(e))&&void 0!==c?c:e,l||!r[u]?[2]:(d=K(u,r[u]),[4,t.updateDotReplit([d])]);case 1:return s.sent().error||!n||(f="A ".concat(n," was not detected in your imported .replit file so a recommended one was automatically added."),o.push(f)),[2]}}))})),S.apply(this,arguments)}return(0,s.__generator)(this,(function(a){switch(a.label){case 0:t=e.dotReplit,n=e.nixService,r=e.templateConfig,i=e.config,o=[],c={entrypoint:"entrypoint config",hidden:"hidden files config",audio:"audio config",run:"run command",refreshWebViewOnFileChange:"webview refresh config",language:"language config",onBoot:"onBoot command",languages:"languages config",compile:"compile command",debugger:"debugger config",packager:"packager config",interpreter:"interpreter config",unitTest:"unit test config",nix:x,env:b,hosting:"hosting config",gitHubImport:"GitHub import config",auth:"Repl Auth config",hintsList:"Hints config",ports:"Ports config",deployment:"deployment config",orderedEnv:null,modules:"nix modules config",extension:"extension config"},d=[],f=!0,p=!1,h=void 0;try{for(v=Object.entries(c)[Symbol.iterator]();!(f=(m=v.next()).done);f=!0)g=(0,u.Z)(m.value,2),y=g[0],null!==(Z=g[1])&&("function"===typeof Z?d.push(Z()):d.push(C(y,Z)))}catch(l){p=!0,h=l}finally{try{f||null==v.return||v.return()}finally{if(p)throw h}}return[4,Promise.all(d)];case 1:return a.sent(),[2,o]}}))})),ee.apply(this,arguments)}function te(){var e=(0,m.Z)(),t=e.dotReplit,n=e.nixService,r=(0,p.Z)(),i=(0,u.Z)(function(e){var t=(0,l.Z)({},$,e);return j.t(Y,t)}(),1)[0],o=z(),c=(0,f.Z)().showWarning;return(0,G.useCallback)((0,a.Z)((function(){var e,a,l,u,d,f,p,h,v,m,g;return(0,s.__generator)(this,(function(s){switch(s.label){case 0:return[4,t.getConfig()];case 1:return(e=s.sent().config)?[4,i({variables:{replId:r}})]:[2];case 2:return a=s.sent().data,(null===(l="Repl"===(null===a||void 0===a?void 0:a.repl.__typename)?a.repl:null)||void 0===l?void 0:l.rootOriginReplUrl)?[4,o({replUrl:l.rootOriginReplUrl})]:[2];case 3:return(u=s.sent())?[4,J({nixService:n,dotReplit:t,config:e,templateConfig:u})]:[2];case 4:d=s.sent(),f=!0,p=!1,h=void 0;try{for(v=d[Symbol.iterator]();!(f=(m=v.next()).done);f=!0)g=m.value,c(g,1e3)}catch(y){p=!0,h=y}finally{try{f||null==v.return||v.return()}finally{if(p)throw h}}return[2]}}))})),[r,c,t,n,i,o])}var ne=n(29061),re=n(26201),ie=n(75665),oe=n(12583),ae=n(4561),le=n(50216);function ce(){var e=(0,A.Z)(["\n  query WorkspaceDoGitHubImportFlow($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        config {\n          gitRemoteUrl\n          doClone\n        }\n      }\n    }\n    currentUser {\n      id\n      gitHubInfo {\n        accessToken\n      }\n      username\n    }\n  }\n"]);return ce=function(){return e},e}function ue(){var e=(0,A.Z)(["\n  mutation WorkspaceDoGitHubImportFlowFinishClone($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        config {\n          doClone\n        }\n      }\n    }\n  }\n"]);return ue=function(){return e},e}function se(){var e=(0,A.Z)(["\n  query GitHubImportRootOriginReplUrl($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        rootOriginReplUrl\n      }\n    }\n  }\n"]);return se=function(){return e},e}var de={},fe=(0,L.Ps)(ce());var pe=(0,L.Ps)(ue());se();var he=n(91620).lW;function ve(e){var t=e.insertConfigPlugin,n=e.setConfigScreenLockIsOpen,o=e.openFile,g=(0,p.Z)(),y=(0,u.Z)(function(e){var t=(0,l.Z)({},de,e);return le.D(pe,t)}(),2),_=y[0],D=y[1],B=(0,m.Z)(),P=B.container,A=B.fs,L=B.runner,U=B.dotReplit,X=(0,v.Z)(P),M=(0,f.Z)(),N=M.showError,O=M.showConfirm,F=te();(0,G.useEffect)((function(){D.error&&N("Failed to finish cloning Repl - "+D.error)}),[D.error]),(0,G.useEffect)((function(){D.data&&O("Finished cloning Repl")}),[D.data]),(0,G.useEffect)((function(){H()}),[]);var W=(0,u.Z)(function(e){var t=(0,l.Z)({},de,e);return j.t(fe,t)}({variables:{replId:g},fetchPolicy:"no-cache",onCompleted:function(){var e=(0,a.Z)((function(e){var t,n,r,i,o;return(0,s.__generator)(this,(function(a){return t=e.repl,n=e.currentUser,"Repl"===t.__typename&&n&&"CurrentUser"===n.__typename&&t.config.gitRemoteUrl&&t.config.doClone?(ge({remote:null!==(i=t.config.gitRemoteUrl)&&void 0!==i?i:"",accessToken:null!==(o=null===(r=n.gitHubInfo)||void 0===r?void 0:r.accessToken)&&void 0!==o?o:null,username:n.username}),[2]):[2]}))}));return function(t){return e.apply(this,arguments)}}()}),1),H=W[0],V={isInitialized:!1,hasConflictsWithFetchedRemote:!1,hasMergeBaseWithFetchedRemote:!0,authError:r.NONE,badState:i.None,remote:"",repoId:null,branch:"",defaultBranch:"main",branches:[],installations:[],changedFiles:[],commits:[],commitsAhead:null,commitsBehind:null,remoteToken:null,gitHubName:null,ownerId:null,gitHubAvatarUrl:null,gitHubEmail:null},z=function(){var e=(0,a.Z)((function(e){return(0,s.__generator)(this,(function(t){switch(t.label){case 0:return[4,X({args:Z(V,null!==e&&void 0!==e?e:"")})];case 1:return t.sent(),[2]}}))}));return function(t){return e.apply(this,arguments)}}(),q=function(){var e=(0,a.Z)((function(e){return(0,s.__generator)(this,(function(t){switch(t.label){case 0:return[4,X({args:k(V,e)})];case 1:return t.sent(),[2]}}))}));return function(t){return e.apply(this,arguments)}}(),$=function(){var e=(0,a.Z)((function(){var e,t;return(0,s.__generator)(this,(function(n){switch(n.label){case 0:return[4,X({args:w(V)})];case 1:return e=n.sent(),x?(t=x(V,null===e.error?e.output:""),[2,t.remote]):[2]}}))}));return function(){return e.apply(this,arguments)}}(),Y=function(){var e=(0,a.Z)((function(e){var t,n,r,i;return(0,s.__generator)(this,(function(o){switch(o.label){case 0:return t=e.remote,n=e.remoteToken,[4,X({args:C((0,c.Z)((0,l.Z)({},V),{remote:t,remoteToken:n}))})];case 1:return r=o.sent(),S?(i=S(V,null===r.error?r.output:"HEAD branch: main"),[2,i.defaultBranch]):[2]}}))}));return function(t){return e.apply(this,arguments)}}(),K=function(){var e=(0,a.Z)((function(e){return(0,s.__generator)(this,(function(t){switch(t.label){case 0:return[4,X({args:T((0,c.Z)((0,l.Z)({},V),{defaultBranch:e}))})];case 1:return t.sent(),[2]}}))}));return function(t){return e.apply(this,arguments)}}(),Q=function(){var e=(0,a.Z)((function(e){var t,n;return(0,s.__generator)(this,(function(r){switch(r.label){case 0:return t=e.remote,n=e.remoteToken,[4,J()];case 1:return r.sent(),[4,$()];case 2:return r.sent(),[4,ee({deepen:!0,remote:t,remoteToken:n})];case 3:return r.sent(),[2]}}))}));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=(0,a.Z)((function(){return(0,s.__generator)(this,(function(e){switch(e.label){case 0:return[4,X({args:E(V)})];case 1:return e.sent(),[2]}}))}));return function(){return e.apply(this,arguments)}}(),ee=function(){var e=(0,a.Z)((function(e){var t,n,r,i;return(0,s.__generator)(this,(function(o){switch(o.label){case 0:return t=e.deepen,n=void 0!==t&&t,r=e.remote,i=e.remoteToken,r.startsWith("https://api.glitch.com")?[4,X({args:["git","fetch",r,"+refs/heads/*:refs/remotes/origin/*"]})]:[3,2];case 1:case 3:return o.sent(),[2];case 2:return[4,X({args:b((0,c.Z)((0,l.Z)({},V),{remote:r,remoteToken:i}),n)})]}}))}));return function(t){return e.apply(this,arguments)}}(),ce=function(){var e=(0,a.Z)((function(){var e,t,n,r,i,o,a;return(0,s.__generator)(this,(function(l){switch(l.label){case 0:return[4,A.readDir(oe.Ql)];case 1:return(r=l.sent()).error?[2]:[4,U.getConfig()];case 2:return i=l.sent(),(null===(e=i.config)||void 0===e||null===(t=e.gitHubImport)||void 0===t?void 0:t.requiredFiles)?(o=i.config.gitHubImport.requiredFiles,a=o.map((function(e){return new RegExp(e)})),[4,Promise.all(r.children.filter((function(e){return!a.some((function(t){return null!=e.filename.match(t)}))})).map((function(e){return e.type===ae.Tv.Directory?A.deleteDir(e.filename):A.deleteFile(e.filename)})))]):[3,4];case 3:return l.sent(),[3,6];case 4:return(null===(n=i.config)||void 0===n?void 0:n.entrypoint)?[4,A.deleteFile(i.config.entrypoint)]:[3,6];case 5:l.sent(),l.label=6;case 6:return[2]}}))}));return function(){return e.apply(this,arguments)}}(),ue=function(){var e=(0,a.Z)((function(e,t,n){var r;return(0,s.__generator)(this,(function(i){switch(i.label){case 0:return[4,z(n)];case 1:return i.sent(),[4,q(e)];case 2:return i.sent(),[4,$()];case 3:return i.sent(),[4,ee({deepen:!1,remote:e,remoteToken:t})];case 4:return i.sent(),[4,Y({remote:e,remoteToken:t})];case 5:return r=i.sent(),[4,K(null!==r&&void 0!==r?r:"")];case 6:return i.sent(),[4,Q({remote:e,remoteToken:t})];case 7:return i.sent(),"html"!==L.mode?[3,10]:[4,(0,ne.r)(P,oe.Ql)];case 8:return i.sent(),[4,L.run()];case 9:i.sent(),i.label=10;case 10:return[2]}}))}));return function(t,n,r){return e.apply(this,arguments)}}(),se=function(){var e=(0,a.Z)((function(){var e,t,n;return(0,s.__generator)(this,(function(r){switch(r.label){case 0:return[4,A.readDir(oe.Ql)];case 1:return(e=r.sent()).error||(t=e.children.map((function(e){return e.filename})),(n=(0,R.T)(t,"nix"))&&o({path:n})),[2]}}))}));return function(){return e.apply(this,arguments)}}(),ve=function(){var e=(0,a.Z)((function(e,t){var n,r,i;return(0,s.__generator)(this,(function(o){switch(o.label){case 0:return[4,(0,re.J9)({repoNameWithOwner:e,accessToken:t})];case 1:return"error"in(n=o.sent())?[2,{hasDotReplit:!1,hasProcfile:!1}]:(r=n.some((function(e){return e.path===I.l})),i=n.some((function(e){return e.path===d.E})),[2,{hasDotReplit:r,hasProcfile:i}])}}))}));return function(t,n){return e.apply(this,arguments)}}(),me=function(){var e=(0,a.Z)((function(e,t){var n,r,i,o,a,l,c,u;return(0,s.__generator)(this,(function(s){switch(s.label){case 0:return[4,(0,re.LK)({repoNameWithOwner:e,filePath:d.E,accessToken:t})];case 1:return"error"in(n=s.sent())?[2,{showConfigPanel:!0}]:(r=he.from(n.content,"base64").toString(),(i=(0,d.c)(r))&&(a=null!==(o=i.web)&&void 0!==o?o:i.worker)?(l=a.command+" "+a.options.join(" "),[4,U.updateDotReplit([(0,ie.KQ)(l),(0,ie.xz)("interpreter")])]):[2,{showConfigPanel:!0}]);case 2:return c=s.sent(),u=i.web&&!i.worker||!i.web&&i.worker,c.error||!u?[2,{showConfigPanel:!0}]:[2,{showConfigPanel:!1}]}}))}));return function(t,n){return e.apply(this,arguments)}}(),ge=function(){var e=(0,a.Z)((function(e){var r,i,o,a,l,c,u,d,f,p;return(0,s.__generator)(this,(function(s){switch(s.label){case 0:return r=e.remote,i=e.accessToken,o=e.username,n(!0),[4,ce()];case 1:return s.sent(),[4,ue(r,i,o)];case 2:return s.sent(),[4,F()];case 3:return s.sent(),[4,_({variables:{input:{id:g,doClone:!1}}})];case 4:return s.sent(),[4,se()];case 5:return s.sent(),a=(0,h.J)(r),l=!1,a?(c=a.username,u=a.repository,[4,ve("".concat(c,"/").concat(u),i)]):[3,9];case 6:return d=s.sent(),f=d.hasDotReplit,!d.hasProcfile||f?[3,8]:[4,me("".concat(c,"/").concat(u),i)];case 7:return p=s.sent(),l=!p.showConfigPanel,[3,9];case 8:l=f,s.label=9;case 9:return n(!1),"html"===L.mode?[2]:(l||t(),[2])}}))}));return function(t){return e.apply(this,arguments)}}()}},36662:function(e,t,n){n.d(t,{T:function(){return d}});var r=n(48330),i=n(72006),o=n(43119),a=n(71440),l=n(24635);function c(){var e=(0,o.Z)(["\n  query WorkspaceEduPaneEnabled($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        isModelSolution\n        isProject\n        isProjectFork\n        owner {\n          __typename\n          ... on Team {\n            id\n            isAdmin\n          }\n          ... on User {\n            id\n          }\n        }\n      }\n    }\n  }\n"]);return c=function(){return e},e}var u={},s=(0,a.Ps)(c());function d(){var e,t=function(e){var t=(0,i.Z)({},u,e);return l.a(s,t)}({variables:{replId:(0,r.Z)()}}).data,n="Repl"===(null===t||void 0===t||null===(e=t.repl)||void 0===e?void 0:e.__typename)?null===t||void 0===t?void 0:t.repl:null;if(!n)return!1;var o=n.owner;return!!o&&(n.isProjectFork&&!n.isModelSolution&&"Team"===o.__typename&&o.isAdmin)}},85682:function(e,t,n){n.d(t,{Z:function(){return c}});var r=n(50959),i=n(89479),o=n(45285),a=n(4561),l=n(87861);function c(){var e=(0,o.Z)().fs,t=(0,r.useState)(!1),n=t[0],c=t[1],u=(0,i.Z)(),s=(0,r.useState)(!1),d=s[0],f=s[1];return(0,r.useEffect)((function(){u===l.em.CONNECTED&&f(!0)}),[u]),(0,r.useEffect)((function(){return c(e.getStatus()===a.kO.Syncing),e.onStatusChange((function(e){c(e===a.kO.Syncing)}))}),[e]),d?{isSaving:n,isOffline:u!==l.em.CONNECTED}:{isSaving:!1,isOffline:!1}}},68243:function(e,t,n){n.d(t,{O:function(){return c}});var r=n(57135),i=n(96583),o=n(88541),a=n(12404),l=n(38567);function c(){var e,t,n=(0,o.P5)({controlName:"flag-filetree-git-status",logFlagToAnalytics:!1}),c=(0,l.Z)(function(){var e=(0,r.Z)((function(e){var t,r;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return n?[4,e.getRepositoryState()]:[2,{status:null,error:null}];case 1:return(t=i.sent()).error?[2,t]:t.type!==a.y5.NORMAL?[2,{status:null,error:null}]:[4,e.status()];case 2:return(r=i.sent()).error?[2,r]:[2,{status:r,error:null}]}}))}));return function(t){return e.apply(this,arguments)}}(),[n]);return c&&!c.error&&(null===(e=c.status)||void 0===e?void 0:e.changes)?function(e){var t=new Map,n=!0,r=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value;t.set(l.path,{index:l.type.index,worktree:l.type.worktree})}}catch(c){r=!0,i=c}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return t}(null===(t=c.status)||void 0===t?void 0:t.changes):null}},61253:function(e,t,n){n.d(t,{Z:function(){return p}});var r=n(74985),i=n(50959),o=n(45285),a=n(13233),l=n(76735),c=n(85368),u=n(61284),s=n(39541),d=(0,n(82568).X)({noticeContainer:[s.l0.rowWithGap(8),s.l0.align.center],noticeText:[s.l0.colWithGap(0)]}),f=new Set([3e3,3001,3002,3003,4200,5e3,5173,6e3,6800,8e3,8008,8080,8081,8888,9e3,1e4,25565,25577]);function p(){var e=(0,o.Z)().container,t=(0,a.Z)().showNotice;(0,i.useEffect)((function(){return e.onPortOpened((function(e){var n=e.port,i=e.address;if(!e.isForwarded&&f.has(n)){var o="Port ".concat(n," opened on host ").concat(i,".");t((0,r.BX)(c.G,{css:d.noticeContainer,children:[(0,r.tZ)(l.Z,{}),(0,r.BX)(c.G,{css:d.noticeText,children:[(0,r.tZ)(u.xv,{multiline:!1,children:o}),(0,r.tZ)(u.xv,{variant:"small",multiline:!1,children:"Use the host 0.0.0.0 to open the port to web traffic."})]})]}),1e4)}}))}),[t,e])}},29552:function(e,t,n){n.d(t,{V:function(){return a},Z:function(){return l}});var r=n(50959),i=n(45285),o=n(4561),a=".tutorial";function l(){var e=(0,i.Z)().fs,t=(0,r.useState)({isLoading:!0,isTutorial:!1}),n=t[0],l=t[1];return(0,r.useEffect)((function(){e.watchDir(".",{onChange:function(e){l({isLoading:!1,isTutorial:e.some((function(e){return e.type===o.Tv.Directory&&e.filename===a}))})},onMoveOrDelete:function(){l({isLoading:!1,isTutorial:!1})},onError:function(){l({isLoading:!1,isTutorial:!1})}})}),[e]),n}},37056:function(e,t,n){n.d(t,{ZP:function(){return R},Ln:function(){return E}});var r=n(57135),i=n(96583),o=n(50959),a=n(91398),l=n(92683),c=n(45285),u=n(88254),s=n(48330),d=n(68051),f=n(87861),p=n(43694),h=n(18548),v=n(20593),m=n(72006),g=n(43119),y=n(71440),Z=n(3481),b=n(24635);function w(){var e=(0,g.Z)(["\n  query ReplEnvironmentDesktopLoadCurriculum($id: String!) {\n    currentUser {\n      id\n      isTeacher: hasRole(role: TEACHER)\n      ...CrosisContextCurrentUser\n    }\n    repl(id: $id) {\n      ... on Repl {\n        id\n        isProject\n        isProjectFork\n        isModelSolution\n        isModelSolutionFork\n        owner {\n          ... on Team {\n            id\n          }\n          ... on User {\n            id\n          }\n        }\n        language\n        origin {\n          id\n          ...CrosisContextRepl\n          origin {\n            id\n            ...CrosisContextRepl\n          }\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return w=function(){return e},e}var x={},k=(0,y.Ps)(w(),Z.D,Z.C);var C=n(5993),S=n(49500),T=(0,a.cn)(!1);function E(){return(0,l.Dv)(T)}function R(){var e,t,n=(0,s.Z)(),a=(0,c.Z)().fs,g=function(e){var t=(0,m.Z)({},x,e);return b.a(k,t)}({variables:{id:n}}).data,y=(0,l.b9)(T);o.useEffect((function(){return function(){y(!1)}}),[y]);var Z="Repl"===(null===g||void 0===g?void 0:g.repl.__typename)?g.repl:null,w="CurrentUser"===(null===g||void 0===g||null===(e=g.currentUser)||void 0===e?void 0:e.__typename)?g.currentUser:null,E="Repl"===(null===g||void 0===g?void 0:g.repl.__typename)&&g.repl.isModelSolutionFork,R=E?Z&&(null===(t=Z.origin)||void 0===t?void 0:t.origin):Z&&Z.origin||null,G=(0,p.b)("Repl"===(null===R||void 0===R?void 0:R.__typename)?{repl:R,currentUser:w||void 0}:null),I=(0,C.S)();o.useEffect((function(){Z&&w&&Z.isProject&&a.stat(".lesson").then((function(e){e.exists||a.createDir(".lesson")}))}),[a,w,Z]),o.useEffect((function(){if(Z&&(Z.isProjectFork||E)&&R&&G){var e=(0,f.ZP)({onUnrecoverableError:function(e){S.error(e),u.$e((function(t){t.setTag("curriculum-authoring",!0),t.setExtra("originId",R.id),u.Tb(e)}))}}),t=(0,v.Z)({container:e});e.connect({context:G,getMinimumRetryDelayMs:I,fetchConnectionMetadata:function(){return(0,d.Z)({url:"/data/repls/".concat(Z.id,"/get_repl_origin_guest_connection_metadata")})}});var n=e.onConnectionStateChanged(function(){var o=(0,r.Z)((function(r){var o,l;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:if(r!==h.e.CONNECTED)return[3,8];n(),i.label=1;case 1:return i.trys.push([1,6,7,8]),[4,a.copyDirFromRemote(".lesson",".lesson",t)];case 2:return(o=i.sent()).error?(u.$e((function(e){e.setTag("curriculum-authoring",!0),e.setExtra("originId",R.id),u.Tb(new Error("Error copying lesson: ".concat(o.error)))})),[3,5]):[3,3];case 3:return[4,a.stat(".lesson/instructions.md")];case 4:i.sent().exists&&y(!0),i.label=5;case 5:return[3,8];case 6:return l=i.sent(),u.$e((function(e){e.setTag("curriculum-authoring",!0),u.Tb(l)})),[3,8];case 7:return e.destroy(),[7];case 8:return[2]}}))}));return function(e){return o.apply(this,arguments)}}());return function(){return e.destroy()}}}),[a,G,Z,R,E,y])}},10578:function(e,t,n){n.d(t,{Z:function(){return c},f:function(){return l}});var r=n(50959),i=n(92683),o=n(91398),a=n(94716),l=(0,o.cn)({current:null});function c(){var e=(0,a.Z)((0,i.Dv)(l));return(0,r.useCallback)((function(){var t,n;null===(t=e.current)||void 0===t||null===(n=t.current)||void 0===n||n.refresh()}),[e])}},70523:function(e,t,n){n.d(t,{Z:function(){return w}});var r=n(57135),i=n(2272),o=n(96583),a=n(91398),l=n(92683),c=n(44945),u=n(29457),s=n(77502),d=n(45285),f=n(10206),p=n.n(f),h=n(50959),v=n(94716),m=n(18171),g=c.z.object({wallTimeNanos:c.z.number(),cpuTimeNanos:c.z.number(),cpuUtilizationPercent:c.z.number(),memoryUsageRssBytes:c.z.number(),memoryUsageCacheBytes:c.z.number(),memorySoftLimitBytes:c.z.number(),memoryHardLimitBytes:c.z.number(),numVCpu:c.z.number()}),y="cat /repl/stats/resources.json",Z="cat /repl/stats/subvolume_usage_bytes /repl/stats/subvolume_total_bytes /repl/stats/scratch_usage_bytes /repl/stats/scratch_total_bytes",b=1073741824;function w(){var e=(0,m.Z)((function(){return(0,a.cn)({wallTimeNanos:p().BigInt(0),cpuTimeNanos:p().BigInt(0),cpuUtilPercent:0,memoryUsageRssBytes:0,memoryUsageCacheBytes:0,memorySoftLimitBytes:0,memoryHardLimitBytes:0,storageUsedBytes:0,storageTotalBytes:0,scratchUsedBytes:0,scratchTotalBytes:0,numVCpu:0})}),[]),t=(0,m.Z)((function(){return{cpu:{currentAtom:(0,a.cn)((function(t){return x(t(e).cpuUtilPercent)})),totalAtom:(0,a.cn)((function(){return 100})),cpuCountAtom:(0,a.cn)((function(t){return t(e).numVCpu}))},ram:{currentCacheAtom:(0,a.cn)((function(t){return x(k(t(e).memoryUsageCacheBytes))})),currentRssAtom:(0,a.cn)((function(t){return x(k(t(e).memoryUsageRssBytes))})),totalAtom:(0,a.cn)((function(t){return k(t(e).memorySoftLimitBytes)}))},disk:{currentAtom:(0,a.cn)((function(t){return k(t(e).storageUsedBytes)})),totalAtom:(0,a.cn)((function(t){return k(t(e).storageTotalBytes)})),scratchCurrentAtom:(0,a.cn)((function(t){return k(t(e).scratchUsedBytes)})),scratchTotalAtom:(0,a.cn)((function(t){return k(t(e).scratchTotalBytes)}))}}}),[e]),n=(0,l.b9)(e),c=(0,i.Z)(h.useState(!0),2),f=c[0],w=c[1];return function(e){var t=(0,d.Z)().container,n=(0,s.Z)(t),i=(0,v.Z)(e);h.useEffect((function(){var e=!1,t=null;function a(){return l.apply(this,arguments)}function l(){return(l=(0,r.Z)((function(){var r,l,c;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return[4,n({args:["bash","-c",y]})];case 1:return l=o.sent(),e?[2]:null!==l.error?(u.kg.error("Error running resource tracking command",{errorMessage:l.error}),[2]):[4,n({args:["bash","-c",Z]})];case 2:return c=o.sent(),e?[2]:null===c.error||(null===(r=c.output)||void 0===r?void 0:r.includes("No such file or directory"))?(i.current({trackingResult:l,storageResult:c}),t=setTimeout(a,2e3),[2]):(u.kg.error("Error running storage command",{errorMessage:c.error}),[2])}}))}))).apply(this,arguments)}return a(),function(){e=!0,t&&clearTimeout(t)}}),[t,n,i])}((function(e){var t=e.trackingResult,r=e.storageResult;n((function(e){var n,i;try{var o=g.parse(JSON.parse(t.output||""));n={wallTimeNanos:p().BigInt(o.wallTimeNanos),cpuTimeNanos:p().BigInt(o.cpuTimeNanos),cpuUtilPercent:o.cpuUtilizationPercent,memoryUsageRssBytes:o.memoryUsageRssBytes,memoryUsageCacheBytes:o.memoryUsageCacheBytes,memorySoftLimitBytes:o.memorySoftLimitBytes,memoryHardLimitBytes:o.memoryHardLimitBytes,storageUsedBytes:0,storageTotalBytes:b,scratchUsedBytes:0,scratchTotalBytes:2147483648,numVCpu:o.numVCpu}}catch(a){return u.kg.error("Could not calculate resources",{errorMessage:a.message}),e}if(!n)throw new Error("Expected resources");try{i=function(e){if(4!==e.length)throw new Error("Received unexpected output from storage command: ".concat(e));var t=parseInt(e[0],10),n=parseInt(e[1],10),r=parseInt(e[2],10),i=parseInt(e[3],10);if(isNaN(t)||isNaN(n)||isNaN(r)||isNaN(i))throw new Error("Could not parse values from storage output command: ".concat(e));return{storageUsedBytes:t,storageTotalBytes:n,scratchUsedBytes:r,scratchTotalBytes:i}}((r.output||"").trim().split("\n"))}catch(l){return u.kg.error("Could not calculate resources",{errorMessage:l.message}),e}return n.storageUsedBytes=i.storageUsedBytes,n.storageTotalBytes=i.storageTotalBytes,n.scratchUsedBytes=i.scratchUsedBytes,n.scratchTotalBytes=i.scratchTotalBytes,w(!1),n}))})),{dataAtom:t,loading:f}}function x(e){return Math.round(100*(e+Number.EPSILON))/100}function k(e){return e/1024/1024}},28681:function(e,t,n){n.d(t,{T:function(){return Z}});var r=n(50959),i=n(81203),o=n(48330),a=n(72006),l=n(43119),c=n(71440),u=n(24635);function s(){var e=(0,l.Z)(["\n  query ShouldHideFileInWorkspace($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        isProjectFork\n        isModelSolution\n        isModelSolutionFork\n      }\n    }\n  }\n"]);return s=function(){return e},e}var d={},f=(0,c.Ps)(s());function p(e){var t=(0,a.Z)({},d,e);return u.a(f,t)}var h=n(59253),v=n(27562),m=n(20575),g=n(45285),y=n(13716),Z=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=(0,o.Z)(),n=(0,v.Z)(),a=(0,g.Z)().dotReplit,l=p({variables:{replId:t}}),c=l.data,u=l.loading,s="Repl"===(null===c||void 0===c?void 0:c.repl.__typename)&&(c.repl.isProjectFork||c.repl.isModelSolution||c.repl.isModelSolutionFork),d=(0,i.P)(a),f=(0,y.t9)();return r.useCallback((function(t){return!!((s||u)&&(0,h.TI)(t)||(0,h.MF)(t))||!f&&(e&&(0,h.uC)(t)||(0,m.C)(t)||(0,h.yb)(t,n)||(0,h.lv)(t,d))}),[s,u,n,f,d,e])}},84524:function(e,t,n){n.d(t,{k:function(){return d}});var r=n(90171),i=n(72006),o=n(43119),a=n(71440),l=n(24635);function c(){var e=(0,o.Z)(["\n  query WorkspaceShowAdmin {\n    currentUser {\n      id\n      isAdmin: hasRole(role: ADMIN)\n    }\n  }\n"]);return c=function(){return e},e}var u={},s=(0,a.Ps)(c());function d(){var e,t=function(e){var t=(0,i.Z)({},u,e);return l.a(s,t)}().data,n=(0,r.useRouter)();return(null===t||void 0===t||null===(e=t.currentUser)||void 0===e?void 0:e.isAdmin)||Boolean(n.query.debug)}},99662:function(e,t,n){n.d(t,{B:function(){return B}});var r=n(2272),i=n(92508),o=n(29552),a=n(53870),l=n(72196),c=n(36662),u=n(18171),s=n(48330),d=n(72006),f=n(43119),p=n(71440),h=n(24635);function v(){var e=(0,f.Z)(["\n  fragment WorkspaceToolPanesRepl on Repl {\n    isProjectFork\n    isModelSolution\n    isProject\n    isProjectFork\n    workspaceCta\n    owner {\n      __typename\n      ... on Team {\n        id\n        isAdmin\n        isTeamsPro: subscriptionIsType(subscriptionType: PRO)\n      }\n      ... on User {\n        id\n      }\n    }\n    currentUserPermissions {\n      containerWrite\n      editMultiplayers\n    }\n    hostingDeploymentPermissions {\n      canDeploy\n    }\n    lang {\n      id\n      key\n      engine\n      supportsGit\n      hasLibSearch\n      supportsPackager3\n      hasDAP\n    }\n    config {\n      isServer\n      isVnc\n    }\n  }\n"]);return v=function(){return e},e}function m(){var e=(0,f.Z)(["\n  query WorkspaceToolPanes($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        ...WorkspaceToolPanesRepl\n      }\n    }\n    currentUser {\n      id\n      isAdmin: hasRole(role: ADMIN)\n      isPrivacyLimitedAccess: hasRole(role: PRIVACY_LIMITED_ACCESS)\n      userSubscriptionType\n      userPowerUpsByType {\n        __typename\n        ... on UserPowerUpsTypes {\n          ghostwriter {\n            active\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return m=function(){return e},e}var g={},y=(0,p.Ps)(v()),Z=(0,p.Ps)(m(),y);var b=n(90171),w=n(88541),x=n(37056),k=n(77511),C=n(60471),S=n(51631),T=n(18952),E=n(91046),R=n(98707),G=n(54659);function I(){var e,t=function(e){var t=(0,d.Z)({},g,e);return h.a(Z,t)}({variables:{replId:(0,s.Z)()}}).data,n="Repl"===(null===t||void 0===t||null===(e=t.repl)||void 0===e?void 0:e.__typename)?null===t||void 0===t?void 0:t.repl:null;return n?{repl:n,currentUser:(null===t||void 0===t?void 0:t.currentUser)||null}:{repl:null,currentUser:null}}var _=["shell","git","packager","envEditor","deployments","database","neon","ghostwriterChat","unitTests","submitEduRepl","preferences","docs","multiplayer","adminPanel","sshConfigurator","webview","problems"],D=["ghostwriterChat","deployments"];function B(){var e,t,n=I(),s=n.repl,d=n.currentUser,f=(0,b.useRouter)(),p=(0,k.T3)(),h=(0,w.P5)({controlName:"flag-neon-databases",logFlagToAnalytics:!1}),v=(0,w.P5)({controlName:"flag-postgres-db-god-mode",logFlagToAnalytics:!1}),m=(0,w.P5)({controlName:"flag-deployments",logFlagToAnalytics:!1}),g=Boolean(m&&(null===s||void 0===s?void 0:s.hostingDeploymentPermissions.canDeploy)),y=(0,w.P5)({controlName:"flag-repl-auth-sidebar",logFlagToAnalytics:!1}),Z=(0,w.P5)({controlName:"flag-nix-modules-tool",logFlagToAnalytics:!1}),B=(0,w.P5)({controlName:"flag-problems-pane",logFlagToAnalytics:!1}),P=(0,G.cR)(),A=(0,l.Z)().language,L=(0,c.T)(),U=(0,x.Ln)(),X=(0,o.Z)().isTutorial,M=(0,a.I)().length>0,N=(0,C.T)(),O=(0,T.WG)(),F=(null===N||void 0===N?void 0:N.debuggers)&&(null===N||void 0===N?void 0:N.debuggers.length)>0||!1,W=(0,R.jX)(null===d||void 0===d?void 0:d.userSubscriptionType),H="Team"===(null===s||void 0===s||null===(e=s.owner)||void 0===e?void 0:e.__typename)&&(null===s||void 0===s?void 0:s.owner.isTeamsPro),V=(null===d||void 0===d?void 0:d.isAdmin)||Boolean(f.query.debug),z="UserPowerUpsTypes"===(null===d||void 0===d||null===(t=d.userPowerUpsByType)||void 0===t?void 0:t.__typename)&&(null===d||void 0===d?void 0:d.userPowerUpsByType.ghostwriter)&&(null===d||void 0===d?void 0:d.userPowerUpsByType.ghostwriter.active),j=Boolean(d&&!d.isPrivacyLimitedAccess)&&!p||z,q=(0,i.Se)();return(0,u.Z)((function(){var e=p&&(null===s||void 0===s?void 0:s.currentUserPermissions.editMultiplayers)?[{type:"multiplayer"}]:[];if(!s||!d)return e;var t=Boolean(s.config.isServer),n=Boolean(s.config.isVnc),i=s.lang.supportsGit,o=s.lang.key.startsWith("html"),a="nix"===s.lang.key,l=!o,c=s.isProject||s.isProjectFork,u=!o,f=W||H,m=Boolean(y&&M),b=[[{type:"shell"},!0],[{type:"instructions"},U],[{type:"markdown",data:{path:""}},!0],[{type:"threadInbox"},!0],[{type:"chat"},!0],[{type:"docs",data:{url:null}},!0],[{type:"webview"},t||o],[{type:"vnc"},n],[{type:"runnerOutput"},!o],[{type:"git"},i],[{type:"packager"},M],[{type:"envEditor"},l],[{type:"debugger"},F],[{type:"tutorial"},X],[{type:"database"},u],[{type:"neon"},v||a&&h],[{type:"replAuth"},m],[{type:"autograder"},c],[{type:"unitTests"},!c&&null!==A],[{type:"education"},Boolean(L)],[{type:"preferences"},!0],[{type:"adminPanel"},V],[{type:"deployments"},g],[{type:"sshConfigurator"},f],[{type:"ghostwriterChat"},j],[{type:"searchReplace"},!0],[{type:"extensionStore",data:{page:"store"}},!0],[{type:"modules"},Z],[{type:"extensionDevtools"},P],[{type:"problems"},B]];if(p){var w=s.workspaceCta===S.Sy.Submit||s.workspaceCta===S.Sy.Resubmit;b.push([{type:"submitEduRepl"},w])}var x=!0,k=!1,C=void 0;try{for(var T,R=O[Symbol.iterator]();!(x=(T=R.next()).done);x=!0){var G=T.value;b.push([{type:"extension",data:{extensionId:G.extension.extensionId,installationId:G.extension.installationId,name:G.name||G.extension.manifest.name,icon:G.icon||G.extension.manifest.icon,url:(0,E.Vh)(G.extension.baseUrl,G.handler)}},!0])}}catch(J){k=!0,C=J}finally{try{x||null==R.return||R.return()}finally{if(k)throw C}}var I=!0,N=!1,z=void 0;try{for(var $,Y=b[Symbol.iterator]();!(I=($=Y.next()).done);I=!0){var K=(0,r.Z)($.value,2),Q=K[0];K[1]&&(p&&!_.includes(Q.type)||e.push(Q))}}catch(J){N=!0,z=J}finally{try{I||null==Y.return||Y.return()}finally{if(N)throw z}}return e.map((function(e){return{title:q.getTitle(e),pane:e}})).sort((function(e,t){return D.includes(e.pane.type)?-1:D.includes(t.pane.type)?1:e.title.localeCompare(t.title)})).map((function(e){return e.pane}))}),[p,s,d,W,H,y,M,A,v,h,U,F,X,L,V,g,j,Z,P,B,O,q])}},23159:function(e,t,n){n.d(t,{Z:function(){return o}});var r=n(29457),i=n(50959);function o(){(0,i.useEffect)((function(){var e=null;return function t(){if(window.performance.memory){var n=window.performance.memory,i={jsHeapSizeLimit:n.jsHeapSizeLimit,totalJSHeapSize:n.totalJSHeapSize,usedJSHeapSize:n.usedJSHeapSize,timeElapsed:window.performance.now()};r.kg.info("perf:browser_memory",i);var o=5*-Math.log(Math.random())*60*1e3;e=setTimeout(t,o)}}(),function(){e&&clearTimeout(e)}}),[])}},24370:function(e,t,n){n.d(t,{L:function(){return c}});var r=n(72006),i=n(48330),o=n(50959),a=n(43746),l=n(48224);function c(){var e=(0,i.Z)(),t=(0,l.Z)("fileTree").trackTimeToLoadFileStart;return o.useCallback((function(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t(n);var o={action:"select",source:"filetree"};i.newTab?o={action:"newTab",source:"filetree"}:i.newPane&&(o={action:"newPane",source:"filetree"}),(0,a.Z)((0,r.Z)({replId:e},o))}),[e,t])}},18946:function(e,t,n){n.d(t,{Z:function(){return p}});var r=n(29457),i=n(48330),o=n(50959),a=n(45285),l=n(47726),c=n(68241),u=n(88688),s=n(63763),d=n(88541);var f=new Set;function p(e){var t=e.workspaceType,n=(0,i.Z)(),p=(0,a.Z)(),h=p.dotReplit,v=p.container,m=(0,d.P5)({controlName:"flag-channel-request-priority",logFlagToAnalytics:!1});(0,o.useEffect)((function(){if(!f.has(n)){f.add(n);var e=h.watch((function(n){if(!n.error||n.error!==u.Yt.Disconnected){try{var i=v.getConnectionMetadata();if(!i||!i.token)throw new Error("Expected token in measure call.");!function(e){var t=e.workspaceType,n=e.parsedToken,i=e.flagChannelRequestPriority,o=Boolean(window.performance.getEntriesByName(c.Iy.pageNavStart,"mark").length),a={ssr:!o,workspaceType:t,tokenCluster:n.cluster,flagChannelRequestPriority:i},u="time to code";window.performance.measure(u,o?c.Iy.pageNavStart:void 0);var s=window.performance.getEntriesByName(u,"measure")[0];if(s){var d="page invisible fetch connection metadata",f=s.duration;Boolean(window.performance.getEntriesByName(c.Iy.fetchConnectionMetadataPageInvisibleStart,"mark").length)&&(window.performance.measure(d,c.Iy.fetchConnectionMetadataPageInvisibleStart,c.Iy.fetchConnectionMetadataPageInvisibleEnd),f-=window.performance.getEntriesByName(d,"measure")[0].duration,window.performance.clearMeasures(d),window.performance.clearMarks(c.Iy.fetchConnectionMetadataPageInvisibleStart),window.performance.clearMarks(c.Iy.fetchConnectionMetadataPageInvisibleEnd)),r.kg.time("time to code minus page invisible",f,a),r.kg.time("time to code with page invisible",s.duration,a),window.performance.clearMeasures(u),l.v.addTiming("time_to_code_minus_page_invisible",f),l.v.addTiming("time_to_code_with_page_invisible",s.duration)}else r.kg.info("Could not obtain measure for time to code",a)}({workspaceType:t,parsedToken:(0,s.he)(i.token),flagChannelRequestPriority:m})}catch(o){r.kg.info("Could not measure time to code",{workspaceType:t,e:o,dotReplitResult:n.error?n.error:"success"})}e()}}));return e}}),[n,t,h,v,m])}},48224:function(e,t,n){n.d(t,{Z:function(){return c}});var r=n(87978),i=n(29457),o=n(89448),a=new Map,l=function(e){var t=a.get(e);if(void 0!==t){var n=t.start,r=t.source,l=window.performance.now(),c=(0,o.V)(e);i.kg.time("time to load file",l-n,{from:r,fileViewerType:c}),a.delete(e)}};function c(e){return{trackTimeToLoadFileStart:function(t){return function(e,t){if((0,r.Mb)(e)){var n=window.performance.now();a.set(e,{start:n,source:t})}}(t,e)},trackTimeToLoadFileEnd:l}}},83718:function(e,t,n){n.d(t,{bM:function(){return m}});var r=n(57389),i=n(72006),o=n(4405),a=n(74985),l=n(250),c=n(82568),u=n(39541),s=n(85368),d=n(56997),f=(0,n(68973).$)(["fontSize","gap"]),p=f.cssVars,h=f.styleTokens,v=(0,c.X)({chord:[u.l0.display.inlineFlex,u.l0.rowWithGap(12)],shortcut:[u.l0.justify.end,u.l0.display.inlineFlex,u.l0.flex.row,{fontSize:h.fontSize,"& > div":{minWidth:u.TV.space16,marginRight:h.gap},"& > div:last-child":{marginRight:0}}]});function m(e){if((0,l.bU)(e.keyCombo))return(0,a.tZ)(s.G,{css:v.chord,children:e.keyCombo.map((function(t,n){return(0,a.tZ)(m,(0,o.Z)((0,i.Z)({},e),{keyCombo:t}),n)}))});var t,n=(0,l.QR)(e.keyCombo);return(0,a.tZ)(s.G,{css:v.shortcut,style:(t={},(0,r.Z)(t,p.fontSize,e.small?u.TV.fontSizeSmall:u.TV.fontSizeDefault),(0,r.Z)(t,p.gap,e.hideBorder?"2px":"4px"),t),title:e.keyCombo,children:n.map((function(t){var n;return(0,a.tZ)(Z,{text:t,hideBorder:e.hideBorder,small:e.small,isActive:null===e||void 0===e||null===(n=e.match)||void 0===n?void 0:n.includes(t.toLowerCase())},t)}))})}var g=(0,c.X)({root:[u.l0.color.foregroundDimmest,u.l0.position.relative,u.l0.px(4),u.l0.py(2),{fontSize:"inherit",width:"max-content",textAlign:"center",textTransform:"capitalize"}],border:[u.l0.coverContainer,u.l0.borderRadius(4),{opacity:.5,minWidth:u.TV.space16,border:"1px solid",borderColor:u.TV.outlineStrongest}]}),y={Ctrl:d.V5?"\u2303":"Ctrl",Cmd:d.V5?"\u2318":"Cmd",Alt:d.V5?"\u2325":"Alt",Shift:d.V5?"\u21e7":"Shift",Enter:d.V5?"Return":"Enter",ArrowLeft:"\u2190",ArrowRight:"\u2192",ArrowUp:"\u2191",ArrowDown:"\u2193"," ":"Space"};function Z(e){var t,n=e.text,r=e.isActive,i=void 0!==r&&r,o=e.hideBorder,l=void 0!==o&&o,c={fontWeight:u.TV.fontWeightMedium,color:u.TV.foregroundDefault},d={borderColor:u.TV.foregroundDefault,opacity:1};return(0,a.BX)(s.G,{css:g.root,style:i?c:void 0,children:[null!==(t=y[n])&&void 0!==t?t:n,l?null:(0,a.tZ)(s.G,{css:g.border,style:i?d:void 0})]})}},45353:function(e,t,n){n.d(t,{GO:function(){return c},Il:function(){return o.Il},bM:function(){return l.bM},gf:function(){return o.gf}});var r=n(74985),i=n(50959),o=n(82001),a=n(250),l=n(83718);function c(e){var t=(0,o.ns)(e);return(0,r.BX)(o.Ge.Provider,{value:t,children:[e.children,(0,r.tZ)(u,{})]})}function u(){var e=(0,o.gk)(),t=(0,o.XU)(),n=(0,i.useRef)(null),r=function(e,t){if(e){var n=e.run,r=e.bubble;if(!1===n())return;if(t.preventDefault(),!r)return 1}},l=function(e,t){e&&!1!==e.run()&&(t.defaultPrevented||t.preventDefault())};return(0,i.useEffect)((function(){var i=function(i){if(e){var o=(0,a.IX)(i);if(o)if(n.current){var c=t.scopedShortcuts.get(n.current),u=t.globalShortcuts.get(n.current);if(n.current=null,c&&"chord"===c.type){var s=c.matches.get(o);if(r(s,i))return}if(u&&"chord"===u.type){var d=u.matches.get(o);l(d,i)}}else{var f=t.scopedShortcuts.get(o),p=t.globalShortcuts.get(o);if(f||p){if("chord"===(null===f||void 0===f?void 0:f.type)||"chord"===(null===p||void 0===p?void 0:p.type))return n.current=o,void i.preventDefault();if(f&&"shortcut"===f.type)if(r(f,i))return;p&&"shortcut"===p.type&&l(p,i)}}}};return document.addEventListener("keydown",i,!0),function(){document.removeEventListener("keydown",i,!0)}}),[e,t]),null}},86188:function(e,t,n){n.d(t,{_:function(){return Z},O:function(){return g}});var r=n(57135),i=n(2272),o=n(96583),a=n(250),l=n(72006),c=n(43119),u=n(71440),s=n(50216);function d(){var e=(0,c.Z)(["\n  mutation SetUserKeybindings($input: SetUserKeybindingsInput!) {\n    setUserKeybindings(input: $input) {\n      ... on Keybindings {\n        keybindings\n      }\n    }\n  }\n"]);return d=function(){return e},e}var f={},p=(0,u.Ps)(d());var h=n(18171),v=n(53306),m=n(47091);function g(){var e=(0,m.O)(),t=(0,i.Z)(function(e){var t=(0,l.Z)({},f,e);return s.D(p,t)}(),1)[0];return(0,h.Z)((function(){return function(){var n=(0,r.Z)((function(n){var r,a,l,c,u,s,d,f,p;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:r=[],a=!0,l=!1,c=void 0;try{for(u=n[Symbol.iterator]();!(a=(s=u.next()).done);a=!0)d=(0,i.Z)(s.value,2),f=d[0],p=d[1],r.push({commandId:f,keyCombo:p})}catch(h){l=!0,c=h}finally{try{a||null==u.return||u.return()}finally{if(l)throw c}}return[4,t({variables:{input:{environment:e,platform:(0,v.X)(),keybindings:r}}})];case 1:return o.sent(),[2]}}))}));return function(e){return n.apply(this,arguments)}}()}),[e,t])}function y(e){if(e&&"object"===typeof e&&"commandId"in e&&"string"===typeof e.commandId&&"keyCombo"in e){if(Array.isArray(e.keyCombo)){var t=(0,a.uv)(e.keyCombo);return{commandId:e.commandId,keyCombo:t}}if("string"===typeof e.keyCombo){var n=(0,a.gD)(e.keyCombo);return{commandId:e.commandId,keyCombo:n}}return{commandId:e.commandId,keyCombo:null}}}function Z(e){var t=new Map;if(!Array.isArray(e))return t;var n=!0,r=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=y(o.value);l&&t.set(l.commandId,l.keyCombo)}}catch(c){r=!0,i=c}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return t}},53306:function(e,t,n){n.d(t,{X:function(){return o}});var r=n(56997),i=n(11086);function o(){return r.V5||r.gn?i.K5.Mac:r.ED?i.K5.Windows:i.K5.Linux}},74441:function(e,t,n){n.d(t,{R:function(){return s}});var r=n(57135),i=n(96583),o=n(12379),a=n(43119),l=n(71440);function c(){var e=(0,a.Z)(["\n  query FiletreeDownloadZip($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        url\n      }\n    }\n  }\n"]);return c=function(){return e},e}var u=(0,l.Ps)(c());function s(e){return d.apply(this,arguments)}function d(){return(d=(0,r.Z)((function(e){var t,n,r;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return[4,null===o.l||void 0===o.l?void 0:o.l.query({query:u,variables:{replId:e}})];case 1:return n=i.sent(),r="Repl"===(null===n||void 0===n||null===(t=n.data)||void 0===t?void 0:t.repl.__typename)?n.data.repl.url:window.location.pathname,window.open(r+".zip","_blank"),[2]}}))}))).apply(this,arguments)}},73941:function(e,t,n){n.d(t,{mn:function(){return s}});var r=n(2272),i=n(9970),o=n(4561),a=n(87978),l=["json","md","draw","txt"],c=[".gitignore",".replit"];function u(e,t){var n=new Map,o=!0,l=!1,c=void 0;try{for(var u,s=e[Symbol.iterator]();!(o=(u=s.next()).done);o=!0){var d=u.value,f=(0,a.r6)(d);if(f&&(!t||f.startsWith(t))){var p,h=null!==(p=n.get(f))&&void 0!==p?p:0;n.set(f,h+1)}}}catch(v){l=!0,c=v}finally{try{o||null==s.return||s.return()}finally{if(l)throw c}}return(0,i.Z)(n.entries()).sort((function(e,t){var n=(0,r.Z)(e,2)[1];return(0,r.Z)(t,2)[1]-n})).map((function(e){return(0,r.Z)(e,1)[0]}))}function s(e,t){if(e.fileType===o.Tv.Directory||!e.input)return[];if("."===e.input)return c.map((function(e){return{value:e,highlight:[{from:1,to:e.length}]}}));if(e.input.startsWith("."))return c.filter((function(t){return t.startsWith(e.input)})).map((function(t){return{value:t,highlight:[{from:t.length-e.input.length,to:t.length}]}}));var n,r=(0,a.r6)(e.input),s=u(e.siblings.map((function(e){return e.filename})),r);s.length<3&&(n=s).push.apply(n,(0,i.Z)(u(t(),r)));if(s.length<3){var d,f=r?l.filter((function(e){return e.startsWith(r)})):l;(d=s).push.apply(d,(0,i.Z)(f))}return(0,i.Z)(new Set(s)).slice(0,3).map((function(t){var n="."+t,i=e.input;i.endsWith(".")?i=i.slice(0,-1):r&&(i=i.slice(0,-(r.length+1)));var o=i+n;return{value:o,highlight:[{from:e.input.length,to:o.length}]}}))}},52624:function(e,t,n){n.d(t,{B:function(){return o}});var r=n(4561),i=function(e){if(1===e.length)return e[0].type===r.Tv.File?"file":"folder";if(e.length>1){var t=e.filter((function(e){return e.type===r.Tv.File})).length,n=e.filter((function(e){return e.type===r.Tv.Directory})).length,i=t>1?"files":"file",o=n>1?"folders":"folder",a="file";return t>0&&n>0?a="".concat(i," and ").concat(o):t>0?a="".concat(i):n>0&&(a="".concat(o)),"".concat(a)}return""};function o(e){var t=i(e),n=1===e.length?t:"".concat(e.length," ").concat(t),r=e.slice(0,5).map((function(e){return e.path})).join(", ");return{name:n,description:e.length>5?"".concat(r," and ").concat(e.length-5," more ").concat(i(e.slice(5))):r,confirmDescription:n}}},43330:function(e,t,n){n.d(t,{h:function(){return s},x:function(){return u}});var r=n(9970),i=n(50959),o=n(42256),a=n(91398),l=n(92683),c=(0,a.cn)([]);function u(e,t){var n=t.run,o=t.enabled,a=void 0===o||o,u=(0,l.b9)(c);(0,i.useEffect)((function(){if(a){var t=(Array.isArray(e)?e:[e]).map((function(e){return{shortcut:e,run:n}}));return u((function(e){return(0,r.Z)(e).concat((0,r.Z)(t))})),function(){u((function(e){return e.filter((function(e){return!t.includes(e)}))}))}}}),[e,n,u,a])}function s(){var e=(0,l.Dv)(c);return(0,i.useEffect)((function(){var t=function(t){var n=!0,r=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done);n=!0){var c,u=a.value,s=u.shortcut,d=u.run;Boolean(s.cmdOrCtrlKey)===Boolean((0,o.j)(t))&&Boolean(s.altKey)===Boolean(t.altKey)&&Boolean(s.shiftKey)===Boolean(t.shiftKey)&&(null===(c=s.key)||void 0===c?void 0:c.toLowerCase())===t.key.toLowerCase()&&(t.preventDefault(),d(s))}}catch(f){r=!0,i=f}finally{try{n||null==l.return||l.return()}finally{if(r)throw i}}};return document.addEventListener("keydown",t),function(){document.removeEventListener("keydown",t)}}),[e]),null}},29061:function(e,t,n){function r(e,t){return new Promise((function(n){var r=e.openChannel({service:"gcsfiles"},(function(e){return e.channel.request({persistMirror:{path:t}}).then((function(e){e.ok,r(),n()})),function(e){e.willReconnect&&r()}}))}))}n.d(t,{r:function(){return r}})},68702:function(e,t,n){n.d(t,{e:function(){return R},Z:function(){return E}});var r=n(72006),i=n(2272),o=n(85234),a=n.n(o),l=n(50993),c=n(37001),u=n(77637),s=n(1468),d="exit status 1";function f(e){var t=e.execer,n=e.onComplete,r=e.onError,i=e.onParse,o=(0,u.Z)(e,["execer","onComplete","onError","onParse"]);if(0!==o.query.length){var a=new TextEncoder,f=(0,c.Tq)(),p=0,h=0,v=function(){},m=function(e){r(e),n("error")},g=t.onOutput((function(e){var t=a.encode(e).length;h+=t;var n=f(e);if(n){var r=n.error,o=n.filesMap,l=n.filesMapChanges;r&&m(r),p=o.size,l.forEach((function(e){var t=o.get(e);t&&o.set(e,(0,c.Vd)(t))})),i(o,l)}})),y=t.onStderr((function(e){if(e.trim()===d)return m(l.f.EMPTY_RESULTS);m(l.f.INVALID_COMMAND)}));v=function(){g(),y()};var Z=(0,c.PR)(o);t.request({args:Z}).then((function(e){if(e.error)return e.error.trim()===d?m(l.f.EMPTY_RESULTS):m(l.f.INVALID_COMMAND);var t;t="finished",0!==p||"finished"!==t?("finished"===t?n(t,{bytes:h}):n(t),v()):m(l.f.EMPTY_RESULTS)})).catch((function(e){return s.c_.captureException(new Error("Ripgrep search command failed with error: ".concat(e))),m(l.f.INVALID_COMMAND)}))}else n("abort")}var p=n(86763),h=n.n(p),v=n(57135),m=n(9970),g=n(96583),y=n(88254),Z=n(32524),b="signal: broken pipe",w="Channel closed";function x(){return(x=(0,v.Z)((function(e){var t,n,r,i,o,a,s;return(0,g.__generator)(this,(function(f){switch(f.label){case 0:return n=e.container,0===(r=(0,u.Z)(e,["container"])).query.trim().length?[2,k(l.f.EMPTY_QUERY)]:n.getConnectionState()===Z.em.DISCONNECTED?[2,k(l.f.CONTAINER_DISCONNECTED)]:n.getConnectionState()===Z.em.CONNECTING?[2,k(l.f.CONTAINER_CONNECTING)]:[4,(t=n).exec.apply(t,(0,m.Z)((0,c.PR)(r)))];case 1:if(i=f.sent(),o=i.output,a=i.error)switch(a){case d:return[2,k(l.f.EMPTY_RESULTS)];case b:return[2,k(l.f.PARTIAL_RESULTS)];case w:return[2,k(l.f.CHANNEL_CLOSED)];default:return y.Tb(new Error("Ripgrep search command failed with error: ".concat(a))),[2,{error:a,data:null}]}return(null===o||void 0===o?void 0:o.trim())&&((s=(0,c.Tq)()(o))&&0!==s.filesMap.size)?[2,k(s.error,s.filesMap)]:[2,k(l.f.EMPTY_RESULTS)]}}))}))).apply(this,arguments)}function k(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{error:e,data:t}}var C=n(46335),S=n(29457),T="File Search Used";function E(e){var t=e.container,n=e.onError,i=e.onUpdate,o=e.onLoadingStateChange,u=e.isStreaming,s=e.trackLatency,d=void 0!==s&&s,p=(0,C.Z)({container:t}),v=[],m=a()(),g=Date.now(),y=function(e){i(v=e)};return h()((function(e){var t=a()();m=t,g=Date.now(),n(null),o(!0);var i=!0;if(""===e.query)return y([]),void o(!1);f((0,r.Z)({execer:p,onComplete:function(r,i){if(m===t){o(!1);var a,u,s,f,p="finished"===r&&i&&i.bytes===c.Ak;if(p&&n(l.f.PARTIAL_RESULTS),d)S.kg.time("".concat(T," - complete"),Date.now()-g,{query:e.query,isRegex:e.isRegex,isCaseSensitive:e.isCaseSensitive,hasIncludes:(null!==(s=null===e||void 0===e||null===(a=e.includeGlobs)||void 0===a?void 0:a.length)&&void 0!==s?s:0)>0,hasExcludes:(null!==(f=null===e||void 0===e||null===(u=e.excludeGlobs)||void 0===u?void 0:u.length)&&void 0!==f?f:0)>0,latency:Date.now()-g,isPartialResults:p})}},onError:function(e){m===t&&n(e)},onParse:function(n,r){if(m===t){if(i){var a,l,s,f;if(d)S.kg.time("".concat(T," - first_chunk"),Date.now()-g,{query:e.query,isRegex:e.isRegex,isCaseSensitive:e.isCaseSensitive,hasIncludes:(null!==(s=null===e||void 0===e||null===(a=e.includeGlobs)||void 0===a?void 0:a.length)&&void 0!==s?s:0)>0,hasExcludes:(null!==(f=null===e||void 0===e||null===(l=e.excludeGlobs)||void 0===l?void 0:l.length)&&void 0!==f?f:0)>0});y((0,c.Md)([],n,r)),i=!1}else y((0,c.Md)(v,n,r));u&&o(!1)}},mode:"json",context:0},e))}),200)}function R(e){var t=e.container,n=h()((function(e,n,o){(function(e){return x.apply(this,arguments)})((0,r.Z)({container:t,mode:"json",context:1,isCaseSensitive:!1},e)).then((function(e){var t=e.data?function(e){var t={},n=!0,r=!1,o=void 0;try{for(var a,l=e.entries()[Symbol.iterator]();!(n=(a=l.next()).done);n=!0){var c=(0,i.Z)(a.value,2),u=c[0],s=c[1];t[u]=s.lines.map((function(e){return{content:e.content,lineNumber:e.lineNumber,matches:e.matches.map((function(e){return{column:e.start,length:e.length}}))}})).filter((function(e){return e.matches.length>0}))}}catch(d){r=!0,o=d}finally{try{n||null==l.return||l.return()}finally{if(r)throw o}}return t}(e.data):{},r=e.error===l.f.PARTIAL_RESULTS;return r?n({error:null,results:t,isPartialResult:r}):e.error?n({error:e.error,results:null,isPartialResult:r}):n({error:null,results:t,isPartialResult:r})})).catch(o)}),200);return function(e){return new Promise((function(t,r){return n(e,t,r)}))}}},17843:function(e,t,n){n.d(t,{Eu:function(){return u},m6:function(){return i}});var r=n(9970);function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[],r=function(e){return e.forEach((function(e){return e&&n.push("-g",e)}))},i=[],c=[],u=!0,s=!1,d=void 0;try{for(var f,p=e[Symbol.iterator]();!(u=(f=p.next()).done);u=!0){var h=f.value,v=l(h);v.startsWith("**")?i.push(v):c.push(v)}}catch(m){s=!0,d=m}finally{try{u||null==p.return||p.return()}finally{if(s)throw d}}return c.length>0&&(r(["!*"]),new Set(c).forEach((function(e){r(a(e).map(o))}))),r(i),r(t.map((function(e){return"!".concat(o(l(e)))}))),n}function o(e){return e.startsWith("**")||e.startsWith("/")?e:"/".concat(e)}function a(e){var t=function(e){var t;Array.isArray(i[e])||(i[e]=[]);var o=n[e],a=o.startsWith("{")&&o.endsWith("}")?u(o.substring(1,o.length-1),","):[o];(t=i[e]).push.apply(t,(0,r.Z)(a.map((function(t){var n=i[e-1];return n&&n.length>0?n.map((function(e){return"".concat(e,"/").concat(t)})):t})).flat(2)))},n=u(e,"/").filter((function(e){return e.length>0}));"**"!==n[n.length-1]&&n.push("**");for(var i={},o=0;o<n.length;o++)t(o);return Object.values(i).flat(2)}function l(e){return e.replaceAll(/\*/g,(function(e,t,n){return t>0&&("*"===n[t-1]||"\\"===n[t-1])||t<n.length-1&&"*"===n[t+1]?e:"**"}))}var c=function(){var e={},t={},n=function(n,r){e[n]=r,t[r]=n};return n("{","}"),n("(",")"),n("[","]"),{hasKey:function(t){return t in e},getKey:function(t){return e[t]},hasValue:function(e){return e in t},getValue:function(e){return t[e]}}}();function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",";if(0===e.length)return[];var n=[],r=[],i="",o=!0,a=!1,l=void 0;try{for(var u,s=e[Symbol.iterator]();!(o=(u=s.next()).done);o=!0){var d=u.value;if(d===t){if(0===r.length){n.push(i),i="";continue}}else if(c.hasKey(d))r.push(d);else if(c.hasValue(d)&&r.pop()!==c.getValue(d))return[e];i+=d}}catch(f){a=!0,l=f}finally{try{o||null==s.return||s.return()}finally{if(a)throw l}}return 0!==r.length?[e]:(i.length>0&&n.push(i),n)}},37001:function(e,t,n){n.d(t,{Ak:function(){return d},Tq:function(){return f},PR:function(){return y},Vd:function(){return m},Md:function(){return g}});var r=n(72006),i=n(4405),o=n(9970);function a(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.map((function(e){return e.match(/["\s]/)&&!e.match(/'/)?"'".concat(e.replace(/(['\\])/g,"\\$1"),"'"):e.match(/["'\s]/)?'"'.concat(e.replace(/(["\\$`!])/g,"\\$1"),'"'):e.replace(/[#!"$&'()*,:;<=>?@[\\\]^`{|}]/g,"\\$&")})).join(" ")}var l=n(17843),c=n(50993),u=n(29457),s=n(91620).lW,d=524288;function f(){var e="",t=new Map;return function(n){var r=new Set,i=!1;if(n.trim().startsWith("error"))return{error:c.f.INVALID_COMMAND,filesMap:t,filesMapChanges:r};var o=n.indexOf("\n"),a=0,l=e+n;if(o>=0){for(o+=e.length;o>=0;){var u=l.substring(a,o).trim();if(0!==u.length){var s=p(u);if(s)h(s,t,r)||(i=!0)}a=o+1,o=l.indexOf("\n",a)}return e=l.substring(a),{error:i?c.f.INVALID_LINE:null,filesMap:t,filesMapChanges:r}}e=l}}function p(e){try{return JSON.parse(e)}catch(t){return null}}function h(e,t,n){switch(e.type){case"begin":var o=v(e.data.path);if(!o)return!1;t.set(o,{path:o,lines:[],dedentBy:0}),n.add(o);break;case"end":return!0;case"match":case"context":var a=v(e.data.path);if(!a)return!1;n.add(a);var l=t.get(a);if(!l)return!1;var c=function(e,t){var n,o,a=v(e.data.lines);if(!a)return null;var l=a.trimEnd().split(/\r?\n/),c=[];""===(null===(n=l[0])||void 0===n?void 0:n.trim())&&l.shift();""===(null===(o=l[l.length-1])||void 0===o?void 0:o.trim())&&l.pop();var u=0,s=0,d=e.data.submatches;return l.forEach((function(t,n){var r=e.data.line_number+n,i=s;s+=t.length+1;for(var o=[];u<d.length;){var a=d[u];if(a.start>=s)break;var l=a.start-i,f=void 0;if(f=a.end<s?a.end-a.start:a.end===s?a.end-a.start-1:t.length-l,l<t.length&&o.push({start:l,length:f}),a.end>s){a.start=s;break}u++}c.push({lineNumber:r,content:t,matches:o})})),(0,i.Z)((0,r.Z)({},t),{lines:t.lines.concat(c)})}(e,l);return c&&t.set(a,c),!0;case"error":return u.kg.error("Invalid Search Line",{line:JSON.stringify(e)}),!1}return!0}function v(e){return e?"bytes"in e?s.from(e.bytes,"base64").toString():e.text:null}function m(e){var t,n=e.lines.length>0?(t=Math).min.apply(t,(0,o.Z)(e.lines.map((function(e){return e.content.match(/^[\t ]+/)})).flat().map((function(e){return(null===e||void 0===e?void 0:e.length)||0})))):0;return(0,i.Z)((0,r.Z)({},e),{dedentBy:n})}function g(e,t,n){for(var r=(0,o.Z)(e),i=new Set,a=0;a<r.length;a++){var l=r[a].path,c=t.get(l);n.has(l)&&c&&(r[a]=c,i.add(l))}var u=!0,s=!1,d=void 0;try{for(var f,p=n[Symbol.iterator]();!(u=(f=p.next()).done);u=!0){var h=f.value,v=t.get(h);!i.has(h)&&v&&r.push(v)}}catch(m){s=!0,d=m}finally{try{u||null==p.return||p.return()}finally{if(s)throw d}}return r}function y(e){var t,n=e.mode,r=e.query,i=e.context,c=e.isRegex,u=e.isCaseSensitive,s=e.isMatchingWholeWords,f=e.includeGlobs,p=e.excludeGlobs,h=["rg"];switch(n){case"json":h.push("--json");break;case"files":h.push("--files-with-matches")}return null!==i&&h.push("--context","".concat(i)),r.includes("\n")&&h.push("--multiline"),c||h.push("--fixed-strings"),h.push("--max-count","100"),h.push("--max-filesize","4M"),h.push("--max-depth","24"),h.push("--max-columns","512"),h.push("--max-columns-preview"),h.push(u?"--case-sensitive":"--ignore-case"),s&&h.push("--word-regexp"),(t=h).push.apply(t,(0,o.Z)((0,l.m6)(f,p))),h.push("--",r),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d;return["sh","-c","".concat(a.apply(void 0,(0,o.Z)(e))," | head -c ").concat(t)]}(h)}},50993:function(e,t,n){var r;n.d(t,{f:function(){return r}}),function(e){e.PARTIAL_RESULTS="Displaying partial results, try being more specific with your search.",e.EMPTY_RESULTS="Nothing came up searching your Repl's content.",e.EMPTY_QUERY="No search query was provided.",e.INVALID_LINE="We encountered an invalid line while parsing your search results.",e.INVALID_COMMAND="Ripgrep returned an invalid response.",e.CONTAINER_DISCONNECTED="Disconnected from the container.",e.CONTAINER_CONNECTING="Connecting to the container.",e.CHANNEL_CLOSED="Channel was closed."}(r||(r={}))},43746:function(e,t,n){n.d(t,{Z:function(){return i}});var r=n(625);function i(e){(0,r.j)(r.U3.FILETREE_USED,e)}},29599:function(e,t,n){n.d(t,{YI:function(){return A},kW:function(){return P}});var r,i=n(72006),o=n(4405),a=n(74985),l=n(48306),c=n.n(l),u=(n(50959),n(24743));!function(e){e.TEXT="TEXT",e.MENTION="MENTION",e.LINK="LINK",e.REPL_LINK="REPL_LINK",e.DEEP_LINK="DEEP_LINK",e.CODE="CODE",e.BOLD="BOLD",e.ITALICS="ITALICS",e.STRIKETHROUGH="STRIKETHROUGH",e.QUOTE="QUOTE"}(r||(r={}));var s=function(e){var t=e.fragment,n=e.onClick;return(0,a.tZ)(u.Z,{size:"small",onClick:n,children:t.content})},d=function(e){var t=e.fragment,n=e.onClick;return(0,a.tZ)(u.Z,{size:"small",fontWeight:"medium",onClick:n,children:t.content})},f=function(e){var t=e.fragment,n=e.onClick;return(0,a.tZ)("a",{href:t.url,onClick:n,rel:"noreferrer noopener nofollow",target:"_blank",children:t.content})},p=function(e){var t=e.fragment,n=e.onClick;return(0,a.tZ)("a",{href:t.url,onClick:n,target:"_blank",children:t.content})},h=function(e){var t=e.fragment,n=e.onClick;return(0,a.tZ)("a",{href:t.url,onClick:n,children:t.content})},v=function(e){var t=e.fragment,n=e.onClick,r=e.style;return(0,a.tZ)("code",{onClick:n,style:r,children:t.content})},m=function(e){var t=e.fragment,n=e.onClick;return(0,a.tZ)("b",{onClick:n,children:t.content})},g=function(e){var t=e.fragment,n=e.onClick;return(0,a.tZ)("i",{onClick:n,children:t.content})},y=function(e){var t=e.fragment,n=e.onClick;return(0,a.BX)("span",{onClick:n,className:"jsx-e2f6e2707e7599fa",children:[t.content,(0,a.tZ)(c(),{id:"e2f6e2707e7599fa",children:"span.jsx-e2f6e2707e7599fa{text-decoration:line-through}"})]})},Z=function(e){var t=e.fragment,n=e.onClick;return(0,a.BX)("blockquote",{onClick:n,className:"jsx-8741a91fadaf26be",children:[t.content,(0,a.tZ)(c(),{id:"8741a91fadaf26be",children:"blockquote.jsx-8741a91fadaf26be{border-left:2px solid var(--foreground-dimmest);padding-left:6px;color:var(--foreground-dimmest)}"})]})},b=/(@[0-9a-zA-Z_]+)/,w=/(#[-a-zA-Z0-9@:%._+~#=/]+)/,x=/(https?:\/\/[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{2,6}\b(?:[-a-zA-Z0-9()@:%_+.~#?&//=]*))/,k=/(`.+?`)/,C=/(\*\*.+?\*\*)/,S=/(_.+?_)/,T=/(\*.+?\*)/,E=/(~~.+?~~)/,R=/(^>.+?$\n?)/m,G=/\/@([0-9a-zA-Z_]+)\/(.+)/;function I(e){var t=e.url;return{type:r.LINK,url:t,content:t}}function _(e){var t=e.hash;return{type:r.DEEP_LINK,url:t,content:t}}function D(e,t){if(x.test(e)){var n={};try{n=new window.URL(e)}catch(o){return{content:e,type:r.TEXT}}return["repl.it","replit.com","firewalledreplit.com",document.location.host].includes(n.host)?n.pathname===t.replUrl?_({hash:n.hash}):G.test(n.pathname)?function(e){var t=e.url,n=G.exec(t.pathname);if(!n)throw new Error("Not a Repl URL");return{type:r.REPL_LINK,url:t.href,content:"@".concat(n[1],"/").concat(n[2]).concat(t.hash)}}({url:n}):I({url:e}):I({url:e})}if(w.test(e))return _({hash:e});if(R.test(e))return function(e){var t=e.text;return{type:r.QUOTE,content:t}}({text:e.slice(1).trim()});if(k.test(e))return function(e){var t=e.code;return{type:r.CODE,content:t}}({code:e.slice(1,-1)});if(C.test(e))return function(e){var t=e.text;return{type:r.BOLD,content:t}}({text:e.slice(2,-2)});if(S.test(e)||T.test(e))return function(e){var t=e.text;return{type:r.ITALICS,content:t}}({text:e.slice(1,-1)});if(E.test(e))return function(e){var t=e.text;return{type:r.STRIKETHROUGH,content:t}}({text:e.slice(2,-2)});if(b.test(e)){var i=e.slice(1);if(!t.users||t.users.includes(i))return function(e){var t=e.username;return{type:r.MENTION,username:t,content:"@".concat(t)}}({username:i})}return{content:e,type:r.TEXT}}var B=new RegExp([k.source,C.source,S.source,T.source,E.source,x.source,b.source,w.source,R.source].join("|"),"m");function P(e,t){var n=e.split(B),i=[],o=[],a=!0,l=!1,c=void 0;try{for(var u,s=n[Symbol.iterator]();!(a=(u=s.next()).done);a=!0){var d=u.value;if(d){var f=D(d,t);if(f){if(f.type===r.MENTION){if(!f.username)continue;i.push(f.username)}o.push(f)}}}}catch(p){l=!0,c=p}finally{try{a||null==s.return||s.return()}finally{if(l)throw c}}return{tokens:o,mentions:i}}function A(e){var t=e.message,n=e.onMentionClick,l=void 0===n?function(){}:n,c=e.codeStyles,u=void 0===c?{}:c;return(0,a.tZ)(a.HY,{children:t.tokens.map((function(e,t){var n={fragment:e,key:t};return e.type===r.MENTION?(0,a.tZ)(d,(0,o.Z)((0,i.Z)({},n),{onClick:function(){return l(e)}})):e.type===r.LINK?(0,a.tZ)(f,(0,i.Z)({},n)):e.type===r.REPL_LINK?(0,a.tZ)(p,(0,i.Z)({},n)):e.type===r.DEEP_LINK?(0,a.tZ)(h,(0,i.Z)({},n)):e.type===r.CODE?(0,a.tZ)(v,(0,o.Z)((0,i.Z)({},n),{style:u})):e.type===r.BOLD?(0,a.tZ)(m,(0,i.Z)({},n)):e.type===r.ITALICS?(0,a.tZ)(g,(0,i.Z)({},n)):e.type===r.STRIKETHROUGH?(0,a.tZ)(y,(0,i.Z)({},n)):e.type===r.QUOTE?(0,a.tZ)(Z,(0,i.Z)({},n)):(0,a.tZ)(s,(0,i.Z)({},n))}))})}},4202:function(e,t,n){n.d(t,{D:function(){return th}});var r=n(72006),i=n(4405),o=n(9970),a=n(74985),l=n(77511),c=n(83005),u=n(28998),s=n(62405),d=n(71338),f=n(83946),p=n(90171),h=n.n(p),v=function(){return Boolean(h().query.embed||h().query.lite)},m=n(91398),g=n(2272),y=n(48306),Z=n.n(y),b=n(50959),w=n(2187),x=n(85368),k=n(39541),C=n(76328),S=n(67543),T=n(74376),E=n(86763),R=n.n(E),G=n(56997),I=n(74121),_=n(95245),D=function(e){var t=e.buttons,n=e.onClick,r=e.onUndo,i=e.onRedo;return(0,a.BX)("nav",{className:"jsx-43582faf24448cbd",children:[t.map((function(e){return(0,a.tZ)("button",{onClick:function(t){t.stopPropagation(),t.preventDefault(),n(e)},className:"jsx-43582faf24448cbd",children:void 0!==e.label?e.label:e.value},e.value)})),(0,a.tZ)("button",{onClick:function(e){e.stopPropagation(),e.preventDefault(),r()},className:"jsx-43582faf24448cbd",children:(0,a.tZ)(C.Z,{})}),(0,a.tZ)("button",{onClick:function(e){e.stopPropagation(),e.preventDefault(),i()},className:"jsx-43582faf24448cbd",children:(0,a.tZ)(S.Z,{})}),(0,a.tZ)(Z(),{id:"43582faf24448cbd",children:'nav.jsx-43582faf24448cbd{font-family:Monaco,Menlo,"Ubuntu Mono",Consolas,source-code-pro,monospace;height:48px;background-color:var(--background-root);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:stretch;-webkit-align-items:stretch;-moz-box-align:stretch;-ms-flex-align:stretch;align-items:stretch}button.jsx-43582faf24448cbd{color:var(--foreground-default);padding:10px;font-family:inherit;font-size:16px;background-color:transparent;border:0 none;-webkit-box-flex:1;-webkit-flex:1 1 auto;-moz-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto}'})]})},B=[{value:"{}",cursorOffset:1},{value:"()",cursorOffset:1},{value:'""',cursorOffset:1}],P=function(e){var t=e.path,n=(0,o.Z)(B).concat([{value:"= ",cursorOffset:2}]);return t.endsWith(".html")&&(n.unshift({value:"<>",cursorOffset:1}),n.unshift({label:"div",value:"<div></div>",cursorOffset:5})),n},A="visualViewport"in window;function L(e){var t=e.filePath,n=e.isLoading,r=(0,I.uN)(),i=(0,_.d)({tablet:!1}),o=(0,w.Z)();b.useEffect((function(){o&&r&&r.requestMeasure({read:function(){return{cursor:r.coordsAtPos(r.state.selection.main.head),scroller:r.scrollDOM.getBoundingClientRect()}},write:function(e){var t=e.cursor,n=e.scroller;if(t){var i=(t.top+t.bottom)/2,o=(n.top+n.bottom)/2;Math.abs(i-o)>5&&(r.scrollDOM.scrollTop+=i-o+(G.gn?50:0))}}})}),[o,r]);var l=(0,g.Z)(b.useState(0),2),c=l[0],u=l[1];if(b.useEffect((function(){if(G.gn){var e=window.visualViewport;if(A&&e){var t=R()((function(){u(window.innerHeight-e.height-e.offsetTop)}),100);return e.addEventListener("scroll",t),e.addEventListener("resize",t),function(){e.removeEventListener("scroll",t),e.removeEventListener("resize",t)}}}}),[]),!o||n)return null;if(!i)return null;var s=(0,a.tZ)(D,{onUndo:function(){r&&((0,T.Yw)(r),r.focus())},onRedo:function(){r&&((0,T.KX)(r),r.focus())},onClick:function(e){if(r){var t,n=null!==(t=r.state.selection.ranges[0].from)&&void 0!==t?t:0;r.dispatch({changes:{from:n,insert:e.value},selection:{anchor:n+e.cursorOffset}}),r.focus()}},buttons:P({path:t})});return!G.gn||A?(0,a.tZ)(x.G,{css:[k.l0.position.fixed,k.l0.width("100%"),k.l0.zIndex(100),k.l0.bottom(c),k.l0.left(0)],children:s}):s}var U=n(86419),X=n(23271),M=[{img:"/public/images/kaboomdraw/rect.png",code:"\ndrawRect({\n\tpos: vec2(80, 80),\n\twidth: 120,\n\theight: 80,\n\tcolor: rgb(250, 242, 164),\n})\n    ".trim()},{img:"/public/images/kaboomdraw/triangle.png",code:"\ndrawTriangle({\n\tpos: vec2(100, 100),\n\tp1: vec2(0, -48),\n\tp2: vec2(-60, 48),\n\tp3: vec2(60, 48),\n\tcolor: rgb(164, 250, 204),\n})\n  ".trim()},{img:"/public/images/kaboomdraw/circle.png",code:"\ndrawCircle({\n\tpos: vec2(100, 100),\n\tradius: 48,\n\tcolor: rgb(181, 164, 250),\n})\n    ".trim()},{img:"/public/images/kaboomdraw/ellipse.png",code:"\ndrawEllipse({\n\tpos: vec2(120, 100),\n\tradiusX: 64,\n\tradiusY: 40,\n\tcolor: rgb(164, 209, 250),\n})\n    ".trim()},{img:"/public/images/kaboomdraw/polygon.png",code:"\ndrawPolygon({\n\tpos: vec2(100, 100),\n\tpts: [\n\t\tvec2(0, -48),\n\t\tvec2(-64, 0),\n\t\tvec2(-32, 64),\n\t\tvec2(32, 64),\n\t\tvec2(64, 0),\n\t],\n\tcolor: rgb(250, 164, 226),\n})\n    ".trim()},{img:"/public/images/kaboomdraw/text.png",code:'\ndrawText({\n\ttext: "hi",\n\tpos: vec2(60, 60),\n})\n    '.trim()}],N=function(e){var t=e.img,n=e.code,r=(0,g.Z)((0,X.c)({item:{type:U.z.Code,code:n},type:U.z.Code}),2)[1];return(0,a.tZ)("img",{alt:"kaboom shape",ref:r,src:t,css:[k.l0.p(12),{userDrag:"none",height:"100%",cursor:"pointer",transition:"0.1s transform",":hover":{transform:"scale(1.2)"}}]})},O=function(){return(0,a.tZ)(x.G,{css:[k.l0.flex.row,k.l0.justify.spaceEvenly,k.l0.backgroundColor.backgroundHigher,k.l0.borderRadius(8),k.l0.width("calc(100% - 32px)"),k.l0.height("64px"),k.l0.position.absolute,k.l0.overflowY("hidden"),{zIndex:5,left:16,bottom:16,border:"solid 1px var(--outline-dimmest)"}],children:M.map((function(e){return(0,a.tZ)(N,(0,r.Z)({},e),e.img)}))})},F=n(94488),W=n(27256),H=n(57135),V=n(96583),z=n(8286),j=n(14806),q=n(69994),$=n(48468),Y=n(29457),K=n(625),Q=n(64491),J=n(4653);function ee(e){var t=(0,g.Z)(b.useState(null),2),n=t[0],r=t[1];return b.useEffect((function(){if(e)return r((0,J.Z)(e)),e.onServerCapabilitiesChange((function(){r((0,J.Z)(e))}));r(null)}),[e]),n}var te=n(45285),ne=n(60566),re=n(49747),ie=n(87978),oe=n(85234),ae=n.n(oe),le=n(66091),ce=n(5683),ue=n(45347),se=n(10422),de=n(71540),fe=n(61284),pe=n(13405),he=n(75015);function ve(e){var t=e.containerProps,n=e.codeActions,o=e.onExecuted,l=e.path,c=(0,te.Z)().fs,u=(0,Q.Z)(l);return n.length&&u?(0,a.tZ)(W.XZ,(0,i.Z)((0,r.Z)({},t),{children:n.map((function(e,t){return(0,a.tZ)(pe.Z,{onClick:function(t){t.stopPropagation(),(0,he.S)(e,u,c),o()},children:(0,a.tZ)(W.sN,{children:(0,a.tZ)(fe.xv,{multiline:!1,children:e.title})})},t)}))})):null}var me=n(18171);var ge=new Map;var ye="undefined"===typeof WeakRef?function(e){return{deref:function(){return e}}}:WeakRef,Ze=n(63064);function be(e){var t=e.path,n=e.range,r=e.lspClient;n=function(e){var t,n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:JSON.stringify)(e),r=null===(t=ge.get(n))||void 0===t?void 0:t.deref();return null!=r?r:(ge.set(n,new ye(e)),e)}(n);var i=(0,Ze.Z)(),a=b.useRef(null),l=(0,g.Z)(function(e,t){var n=b.useRef(),r=(0,me.Z)((function(){return R()((function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];e.apply(void 0,(0,o.Z)(r)).then((function(e){var t;null===(t=n.current)||void 0===t||t.call(n,e)}))}),t)}),[e,t]);return[r,b.useCallback((function(e){n.current=e}),[])]}(b.useCallback(function(){var e=(0,H.Z)((function(e,t){return(0,V.__generator)(this,(function(n){return r.isOpen(e)?(a.current={requestPath:e,requestRange:t},[2,r.request.codeActions(e,t)]):[2,{result:null}]}))}));return function(t,n){return e.apply(this,arguments)}}(),[r]),1e3),2),c=l[0],u=l[1],s=(0,g.Z)(b.useState([]),2),d=s[0],f=s[1],p=b.useCallback((0,H.Z)((function(){return(0,V.__generator)(this,(function(e){return r&&t?(u((function(e){i.current&&("error"in e||null===e.result||0===e.result.length?f([]):f(e.result))})),c(t,n),[2]):[2]}))})),[r,t,c,n,u,i]);return b.useEffect((function(){return p(),function(){c.cancel()}}),[p,c]),[d,p]}var we=n(85577),xe=n(50968),ke=n(73872),Ce=n(45634),Se=j.Py.define();function Te(e){var t=e.state,n=t.doc,r=t.selection.main,i=r.from,o=r.to;return{start:(0,we.s)(n,i),end:(0,we.s)(n,o)}}var Ee=function(e){var t=e.view,n=e.path,r=e.lspClient,i=e.visible,o=e.coords,l=(0,g.Z)(b.useState({x:0,y:0}),2),c=l[0],u=l[1],s=(0,g.Z)(be({path:n,lspClient:r,range:Te(t)}),2),d=s[0],f=s[1],p=(0,ke.Z)(i),h=(0,ke.Z)(o),v=b.useCallback((function(){i.current=!1,t.focus()}),[t,i]);if(b.useEffect((function(){h&&u({x:h.left,y:h.top})}),[h]),b.useEffect((function(){var e=function(e){"Escape"===e.key&&v()};if(p)return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[v,p]),!d.length)return null;var m=d.some((function(e){return"kind"in e&&"quickfix"===e.kind}))?"#75bdff":"#ffcc00";return(0,a.BX)("div",{role:"presentation",onMouseDown:function(e){p||(e.stopPropagation(),e.preventDefault(),u({x:e.nativeEvent.pageX,y:e.nativeEvent.pageY}),i.current=!p)},children:[(0,a.tZ)(de.Z,{css:{fill:m,color:m,cursor:"pointer"},className:"lightbulb"}),p?(0,a.tZ)(ve,{path:n,containerProps:{view:t,verticalOffset:W.R$*d.length,closeMenu:v,width:"auto",coords:c},onExecuted:function(){v(),f()},codeActions:d}):null]})},Re=function(e){(0,ce.Z)(n,e);var t=(0,ue.Z)(n);function n(){var e;return(0,le.Z)(this,n),(e=t.apply(this,arguments)).visible=(0,xe.u)(!1),e.coords=(0,xe.u)(null),e.container=b.createRef(),e}var o=n.prototype;return o.toDOM=function(e){var t=document.createElement("div");return t.setAttribute("aria-hidden","true"),t.className="cm-code-action",this.visible.current=!1,this.props.setDecoration(se.createPortal((0,a.tZ)("span",{ref:this.container,children:(0,a.tZ)(Ee,(0,i.Z)((0,r.Z)({},this.props),{view:e,visible:this.visible,coords:this.coords}))}),t)),t},o.contains=function(e){var t;return(null===(t=this.container.current)||void 0===t?void 0:t.contains(e))||!1},o.updateDOM=function(){return!0},n}(q.l9);var Ge=function(e){return q.lg.fromClass(function(){function t(n){(0,le.Z)(this,t),this.widget=new Re,this.widget.props=e,this.decoration=q.p.widget({widget:this.widget,side:0}),this.updateDecorations(n)}var n=t.prototype;return n.update=function(e){var t=this;(e.docChanged||e.selectionSet)&&this.updateDecorations(e.view),(0,Ce.j)(e,Se,(function(n){var r=n.value;t.widget.visible.current=!0,t.widget.coords.current=r,t.updateDecorations(e.view)}))},n.updateDecorations=function(e){var t,n=e.state,r=n.doc,i=n.selection,o=r.lineAt(i.main.from);this.widget.visible.current||0!==r.length?(t=function(e){return/^( {2}|\u3000|\t)/.test(e)}(o.text)||1===o.number&&1===r.lines?o.from:1===o.number?Math.min(r.length,o.to+1):r.lineAt(o.from-1).from,this.decorations=q.p.set([this.decoration.range(t)])):this.decorations=q.p.none},t}(),{decorations:function(e){return e.decorations},eventHandlers:{scroll:function(){this.widget.visible.current=!1}}})},Ie=q.tk.baseTheme({".cm-code-action":{position:"absolute",zIndex:101,top:"calc(50% - 8px)",left:"0",height:"16px",width:"16px",background:"transparent",fontFamily:k.TV.fontFamilyDefault,"& svg":{display:"block"}}});var _e=n(59165),De=new(function(e){(0,ce.Z)(n,e);var t=(0,ue.Z)(n);function n(){return(0,le.Z)(this,n),t.apply(this,arguments)}return n.prototype.toDOM=function(){return document.createTextNode("\u25cf")},n}(q.SJ)),Be=j.Py.define({}),Pe=j.Py.define({}),Ae=q.p.line({attributes:{class:"cm-debuggerLine"}}),Le=j.Py.define({}),Ue=j.QQ.define({create:function(){return null},update:function(e,t){var n=!0,r=!1,i=void 0;try{for(var o,a=t.effects[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value;if(l.is(Le))return l.value}}catch(c){r=!0,i=c}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return e}});function Xe(e){var t=new j.f_,n=e.state.field(Ue);if(null!==n&&n<=e.state.doc.lines){var r=e.state.doc.line(n);t.add(r.from,r.from,Ae)}return t.finish()}var Me=q.lg.fromClass(function(){function e(t){(0,le.Z)(this,e),this.decorations=Xe(t)}return e.prototype.update=function(e){this.decorations=Xe(e.view)},e}(),{decorations:function(e){return e.decorations}});function Ne(e,t){e.dispatch({effects:Pe.of({pos:t})})}var Oe=j.QQ.define({create:function(){return j.Xs.empty},update:function(e,t){e=e.map(t.changes);var n=!0,r=!1,i=void 0;try{for(var o,a=function(){var n=o.value;if(n.is(Pe)){var r=!1;e.between(n.value.pos,n.value.pos+1,(function(){r=!0})),e=r?e.update({filter:function(e){return e!==n.value.pos}}):e.update({add:[De.range(n.value.pos)]})}n.is(Be)&&(e=He(n.value.lines,t.state))},l=t.effects[Symbol.iterator]();!(n=(o=l.next()).done);n=!0)a()}catch(c){r=!0,i=c}finally{try{n||null==l.return||l.return()}finally{if(r)throw i}}return e}}),Fe=q.tk.baseTheme({".cm-breakpoint-gutter .cm-gutterElement":{color:k.TV.accentPrimaryDefault,paddingLeft:k.TV.space4,paddingRight:k.TV.space2,cursor:"default"},".cm-debuggerLine":{backgroundColor:k.TV.accentPrimaryDimmest,borderRadius:k.TV.borderRadius4,marginRight:k.TV.space4}});function We(e,t){var n;return e&&0!==e.length?null===t||(null===(n=e[0].source)||void 0===n?void 0:n.path)!==t?null:e[0].line:null}function He(e,t){var n=(0,o.Z)(new Set(e.filter((function(e){return e<=t.doc.lines})))).map((function(e){return De.range(t.doc.line(e).from)}));return j.Xs.of(n,!0)}var Ve=n(45853),ze=n(71284),je=n(47581),qe=n(47900),$e=n(7225),Ye=n(34979),Ke={p:{padding:"".concat(k.TV.space2," ").concat(k.TV.space8),lineHeight:1.4,marginBottom:"".concat(k.TV.space8," !important")},"p:first-of-type":{marginTop:"".concat(k.TV.space4," !important")},"p:last-of-type":{marginBottom:"".concat(k.TV.space4," !important")},pre:{margin:"".concat(k.TV.space2," ").concat(k.TV.space8)},"pre + p":{borderTop:"1px solid ".concat(k.TV.outlineDimmest),paddingTop:k.TV.space4},"h1, h2, h3":{margin:"".concat(k.TV.space8," !important"),marginTop:"".concat(k.TV.space12," !important"),padding:"0 !important",paddingBottom:"".concat(k.TV.space4," !important"),fontSize:"100% !important",borderBottom:"1px solid ".concat(k.TV.backgroundHighest," !important"),lineHeight:1},"h1:first-of-type, h2:first-of-type, h3:first-of-type":{marginTop:"".concat(k.TV.space4," !important")},hr:{margin:"".concat(k.TV.space8," !important"),borderTop:"2px solid ".concat(k.TV.backgroundHighest," !important")},li:{margin:"".concat(k.TV.space2," ").concat(k.TV.space8)},".lsp-completion-detail":{borderBottom:"1px solid ".concat(k.TV.backgroundHighest),marginBottom:k.TV.space4},".cm-line":{paddingLeft:k.TV.space4,paddingRight:k.TV.space4},".cm-content":{paddingLeft:k.TV.space4,paddingRight:k.TV.space4}},Qe=b.memo((function(e){var t=e.content,n=e.className;return(0,a.tZ)(x.G,{css:Ke,children:(0,a.tZ)(qe.ZP,{className:n,components:{code:function(e){return(0,a.tZ)(Ye.Z,(0,r.Z)({minimal:!0,disableCopy:!0},e))}},children:t})})}));function Je(e){var t=e.content,n=e.className;return"string"===typeof t?(0,a.tZ)(Qe,{css:[{p:{whiteSpace:"pre-wrap"}}],className:n,content:t}):t.kind===$e.MarkupKind.PlainText?(0,a.tZ)(x.G,{children:(0,a.tZ)(fe.xv,{className:n,children:t.value})}):(0,a.tZ)(Qe,{className:n,content:t.value})}var et=(0,je.B)(),tt=j.Py.define(),nt=j.QQ.define({create:function(){return null},update:function(e,t){if(t.isUserEvent("select")||t.isUserEvent("undo")||t.isUserEvent("redo"))return null;if(!t.isUserEvent("input.type"))return e;if(t.changes.empty)return e;var n="";return t.changes.iterChanges((function(e,t,r,i,o){n=o.sliceString(0,1)})),n||null}});function rt(e){var t=e.lspClient,n=e.path,o=e.setDecoration,l=function(e){return se.createPortal((0,a.tZ)(it,(0,r.Z)({},e)),u)},c=function(e,t){var n=e.state.field(et.state,!1);return"active"!==(0,ze.LR)(e.state)&&(null!=n&&("navigate"!==t||n.signatures.length>1))},u=document.createElement("div"),s={},d={current:null};function f(e,t){return p.apply(this,arguments)}function p(){return p=(0,H.Z)((function(e,r){var i,o,a,l,c,u,s;return(0,V.__generator)(this,(function(f){switch(f.label){case 0:return(l=(null===(i=t.getServerCapabilities())||void 0===i||null===(o=i.signatureHelpProvider)||void 0===o?void 0:o.triggerCharacters)||[])?(c=e.field(h,!1),u=e.field(nt,!1),c||null!=u&&l.includes(u)?[4,at(e,r,t,n,d)]:[2,null]):[2,null];case 1:return(null===(s=f.sent())||void 0===s||null===(a=s.signatures)||void 0===a?void 0:a.length)?[2,s]:[2,null]}}))})),p.apply(this,arguments)}var h=j.QQ.define({create:function(){return null},update:function(e,t){return t.isUserEvent("select.pointer")?null:(e&&t.newSelection.main.from!==e.pos&&(e=(0,i.Z)((0,r.Z)({},e),{pos:t.newSelection.main.from})),(0,Ce.j)(t,et.effect,(function(n){var r=n.value;e=r?{pos:t.newSelection.main.from,create:function(){return function(e){var t=0,n=function(n){o((0,a.tZ)(l,{help:e,index:t,onLayout:n}))};return n(),s.dom=u,s.update=function(r){(0,Ce.j)(r,tt,(function(i){var o=t+i.value;o>e.signatures.length-1||o<0?setTimeout((function(){r.view.dispatch({effects:et.effect.of(null)})})):t=o,n((function(){(0,q.E2)(r.view)}))}))},s}(r)},above:!0}:null})),e)},provide:function(e){return q.hJ.from(e)}}),v=q.lg.define((function(){var e=R()(function(){var e=(0,H.Z)((function(e){var t,n,r;return(0,V.__generator)(this,(function(i){switch(i.label){case 0:return(t=e.state.selection.main).empty?(n=e.state.field(et.state,!1),[4,f(e.state,t.from)]):[3,2];case 1:(r=i.sent())&&!n&&(0,ze._B)(e),e.dispatch({effects:et.effect.of(r)}),i.label=2;case 2:return[2]}}))}));return function(t){return e.apply(this,arguments)}}(),0);return{update:function(t){t.transactions.some((function(e){return e.selection}))&&t.state.selection.main.empty&&e(t.view)}}})),m=function(e){return function(t){return!!c(t,"navigate")&&(t.dispatch({effects:tt.of(e)}),!0)}},g=[{key:"ArrowDown",run:m(1)},{key:"ArrowUp",run:m(-1)},{key:"Escape",run:function(e){return!!c(e,"dismiss")&&(e.dispatch({effects:et.effect.of(null)}),!0)}}];return[h,et.state,nt,v,j.Wl.high(q.$f.of(g))]}var it=function(e){var t,n,r=e.help,i=e.index,o=e.onLayout,l="1px solid ".concat(k.TV.outlineDimmer),c="min(425px, 80vw)";b.useLayoutEffect((function(){return null===o||void 0===o?void 0:o()}),[o]);var u=r.signatures[i],s=r.signatures.length>1;if(!u)return null;var d=u.documentation,f=null!=r.activeParameter&&(null===(t=u.parameters)||void 0===t||null===(n=t[r.activeParameter])||void 0===n?void 0:n.documentation);return(0,a.BX)(x.G,{css:[k.l0.flex.row,k.l0.backgroundColor.backgroundHigher,{width:"max-content"}],children:[s?(0,a.tZ)(x.G,{css:[k.l0.flex.row,k.l0.pl(4),{borderRight:l,paddingBottom:5}],children:(0,a.BX)("span",{css:[{alignSelf:"flex-end"},k.l0.p(4)],children:[i+1,"/",r.signatures.length]})}):null,(0,a.BX)(x.G,{children:[(0,a.tZ)(x.G,{css:[k.l0.py(4),k.l0.pl(s?4:8),k.l0.pr(8),k.l0.maxHeight(100),k.l0.overflowY("scroll"),k.l0.font.code,{lineHeight:k.TV.lineHeightSmall,maxWidth:c}],children:(0,a.tZ)(ot,{signature:u,activeParameter:r.activeParameter})}),Boolean(d||f)&&(0,a.BX)(x.G,{css:[k.l0.px(s?4:8),k.l0.py(2),k.l0.maxHeight(200),k.l0.overflow("scroll"),{borderTop:l,maxWidth:c}],children:[f?(0,a.tZ)(Je,{content:f}):null,d?(0,a.tZ)(Je,{content:d}):null]})]})]})};function ot(e){var t,n=e.signature,r=n.label,i=n.parameters,o=e.activeParameter;if(null==o||!i)return(0,a.tZ)("span",{children:r});var l=null===(t=i[o])||void 0===t?void 0:t.label;if(!l)return(0,a.tZ)("span",{children:r});var c=(0,g.Z)("string"===typeof l?[r.indexOf(l),r.indexOf(l)+l.length]:l,2),u=c[0],s=c[1];return(0,a.BX)("div",{children:[(0,a.tZ)("span",{children:r.slice(0,u)}),(0,a.tZ)("strong",{children:l}),(0,a.tZ)("span",{children:r.slice(s)})]})}function at(e,t,n,r,i){return lt.apply(this,arguments)}function lt(){return lt=(0,H.Z)((function(e,t,n,r,i){var o,a;return(0,V.__generator)(this,(function(l){switch(l.label){case 0:return i.current&&n.notify.cancelRequest(i.current),o=n.generateId(),i.current=o,[4,n.request.signatureHelp(r,(0,we.s)(e.doc,t),{id:o})];case 1:return a=l.sent(),i.current=null,"error"in a?[2,null]:[2,a.result]}}))})),lt.apply(this,arguments)}var ct=n(99127),ut=n(92674),st=n.n(ut),dt=n(67745),ft=new Map;function pt(e){var t=e.lspClient,n=e.path,r=e.view,i=st().v4();return function(){var e,a=null!==(e=ft.get(n))&&void 0!==e?e:[];ft.set(n,(0,o.Z)(a).concat([i])),t.notify.didOpen(n,r.state.doc.toString())}(),{id:i,destroy:function(){var e,r=(null!==(e=ft.get(n))&&void 0!==e?e:[]).filter((function(e){return e!==i}));t.getServerState()===dt.a.INITIALIZED&&t.isOpen(n)&&t.notify.didClose(n),0===r.length?ft.delete(n):ft.set(n,r)},update:function(e){var r;if(function(){var e;return(null!==(e=ft.get(n))&&void 0!==e?e:[])[0]===i}()&&e.docChanged){var o=null===(r=t.getServerCapabilities())||void 0===r?void 0:r.textDocumentSync;if(o!==ct.TextDocumentSyncKind.None&&t.isOpen(n))if(o!==ct.TextDocumentSyncKind.Full)t.notify.didChange(n,function(e,t){var n=[],r=t;return e.iterChanges((function(e,t,i,o,a){var l=a.sliceString(0),c=t-e,u=c+i;n.push({range:{start:(0,we.s)(r,i),end:(0,we.s)(r,u)},rangeLength:c,text:l}),r=r.replace(i,u,a)})),n}(e.changes,e.startState.doc));else{var a=e.view.state.doc.toString();t.notify.didChange(n,[{text:a}])}}}}}function ht(e){var t=e.lspClient,n=e.path;return q.lg.define((function(e){return pt({lspClient:t,path:n,view:e})}))}var vt=n(81962),mt=n(77637),gt=n(68935),yt=n(28814),Zt=n(1468),bt=n(53028),wt=n(92153),xt=j.Py.define(),kt=j.QQ.define({create:function(){return[]},update:function(e,t){var n=!0,r=!1,i=void 0;try{for(var o,a=t.effects[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value;l.is(xt)&&(e=l.value)}}catch(c){r=!0,i=c}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return e}});function Ct(e){var t=e.lspClient,n=e.path,r=e.askGhostwriter;return[kt,q.lg.define((function(e){var t=function(e){var t=e.target;(0,vt.Z)(t,HTMLElement)&&t.classList.contains("cm-diagnosticAction")&&e.stopPropagation()};return e.dom.addEventListener("mousedown",t),{destroy:function(){e.dom.removeEventListener("mousedown",t)}}})),q.lg.define((function(e){var i=t.onDiagnostics((function(t){if(t.path===n){var i=function(e,t,n){var r=[],i=!0,o=!1,a=void 0;try{for(var l,c=function(){var e,i=l.value,o=(0,we.R)(t.doc,i.range.start),a=(0,we.R)(t.doc,i.range.end);if(o===a){var c=t.wordAt(a);if(c)o=c.from,a=c.to;else if(a<t.doc.length)a+=1;else{if(!(o>0))return"continue";o-=1}}if(o>=a)return Y.kg.error("Misbehaved LSP: diagnostic's range is invalid",{from:o,to:a,di:JSON.stringify(i),language:null===(e=t.facet(gt.dK))||void 0===e?void 0:e.name}),"continue";var u="info";switch(i.severity){case $e.DiagnosticSeverity.Error:u="error";break;case $e.DiagnosticSeverity.Warning:u="warning";break;case $e.DiagnosticSeverity.Hint:case $e.DiagnosticSeverity.Information:u="info"}var s=[];n&&s.push({name:"\ud83d\udd2e Debug",apply:function(){return n({text:(0,bt.Vh)(i.message,"lsp"),type:"debugger",errorType:"lsp"})}}),r.push({from:o,to:a,severity:u,message:i.message,source:i.source,actions:s})},u=e[Symbol.iterator]();!(i=(l=u.next()).done);i=!0)c()}catch(d){o=!0,a=d}finally{try{i||null==u.return||u.return()}finally{if(o)throw a}}var s={error:1,warning:2,info:3,hint:4};return r.sort((function(e,t){return s[t.severity]-s[e.severity]}))}(t.diagnostics,e.state,r);try{e.dispatch(St(xt.of(t.diagnostics),(0,yt.p0)(e.state,i)))}catch(o){Zt.c_.withScope((function(t){t.setExtra("doc",e.state.doc.toString()),t.setExtra("diagnostic",JSON.stringify(i)),t.setExtra("state",JSON.stringify(e.state.toJSON())),t.setExtra("hasFocus",e.hasFocus),Zt.c_.captureException(o)}))}}}));return{destroy:function(){i()}}}))]}function St(e,t){var n=t.effects,i=(0,mt.Z)(t,["effects"]);return n=(0,wt.ZP)(n,(function(t){t||(t=[]),Array.isArray(t)||(t=[t]),t.push(e)})),(0,r.Z)({effects:n},i)}function Tt(e){return(0,yt.p0)(e,[])}var Et,Rt,Gt=n(57389),It=n(44478),_t=n(48960),Dt=n(57988),Bt=n(98539),Pt=n(7742);!function(e){e[e.Dollar=0]="Dollar",e[e.Colon=1]="Colon",e[e.Comma=2]="Comma",e[e.CurlyOpen=3]="CurlyOpen",e[e.CurlyClose=4]="CurlyClose",e[e.Backslash=5]="Backslash",e[e.Forwardslash=6]="Forwardslash",e[e.Pipe=7]="Pipe",e[e.Int=8]="Int",e[e.VariableName=9]="VariableName",e[e.Format=10]="Format",e[e.Plus=11]="Plus",e[e.Dash=12]="Dash",e[e.QuestionMark=13]="QuestionMark",e[e.EOF=14]="EOF"}(Et||(Et={})),function(e){e[e.DollarSign=36]="DollarSign",e[e.Plus=43]="Plus",e[e.Comma=44]="Comma",e[e.Dash=45]="Dash",e[e.Slash=47]="Slash",e[e.Digit0=48]="Digit0",e[e.Digit9=57]="Digit9",e[e.Colon=58]="Colon",e[e.QuestionMark=63]="QuestionMark",e[e.A=65]="A",e[e.Z=90]="Z",e[e.Backslash=92]="Backslash",e[e.Underline=95]="Underline",e[e.a=97]="a",e[e.z=122]="z",e[e.OpenCurlyBrace=123]="OpenCurlyBrace",e[e.Pipe=124]="Pipe",e[e.CloseCurlyBrace=125]="CloseCurlyBrace"}(Rt||(Rt={}));var At,Lt=function(){function e(){(0,le.Z)(this,e),this.value="",this.pos=0}var t=e.prototype;return t.text=function(e){this.value=e,this.pos=0},t.tokenText=function(e){return this.value.substr(e.pos,e.len)},t.next=function(){if(this.pos>=this.value.length)return{type:14,pos:this.pos,len:0};var t,n=this.pos,r=0,i=this.value.charCodeAt(n);if("number"===typeof(t=e._table[i]))return this.pos+=1,{type:t,pos:n,len:1};if(e.isDigitCharacter(i)){t=8;do{r+=1,i=this.value.charCodeAt(n+r)}while(e.isDigitCharacter(i));return this.pos+=r,{type:t,pos:n,len:r}}if(e.isVariableCharacter(i)){t=9;do{i=this.value.charCodeAt(n+ ++r)}while(e.isVariableCharacter(i)||e.isDigitCharacter(i));return this.pos+=r,{type:t,pos:n,len:r}}t=10;do{r+=1,i=this.value.charCodeAt(n+r)}while(!isNaN(i)&&"undefined"===typeof e._table[i]&&!e.isDigitCharacter(i)&&!e.isVariableCharacter(i));return this.pos+=r,{type:t,pos:n,len:r}},e.isDigitCharacter=function(e){return e>=48&&e<=57},e.isVariableCharacter=function(e){return 95===e||e>=97&&e<=122||e>=65&&e<=90},e}();Lt._table=(At={},(0,Gt.Z)(At,36,0),(0,Gt.Z)(At,58,1),(0,Gt.Z)(At,44,2),(0,Gt.Z)(At,123,3),(0,Gt.Z)(At,125,4),(0,Gt.Z)(At,92,5),(0,Gt.Z)(At,47,6),(0,Gt.Z)(At,124,7),(0,Gt.Z)(At,43,11),(0,Gt.Z)(At,45,12),(0,Gt.Z)(At,63,13),At);var Ut=function(){function e(){var t;(0,le.Z)(this,e),this._children=[],t=this,["parent"].forEach((function(e){Object.defineProperty(t,e,{enumerable:!1,writable:!0})}))}var t=e.prototype;return t.appendChild=function(e){return(0,vt.Z)(e,Xt)&&(0,vt.Z)(this._children[this._children.length-1],Xt)?this._children[this._children.length-1].value+=e.value:(e.parent=this,this._children.push(e)),this},t.replace=function(e,t){var n,r=e.parent,i=r.children.indexOf(e),a=r.children.slice(0);(n=a).splice.apply(n,[i,1].concat((0,o.Z)(t))),r._children=a,function e(t,n){var r=!0,i=!1,o=void 0;try{for(var a,l=t[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value;c.parent=n,e(c.children,c)}}catch(u){i=!0,o=u}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}}(t,r)},t.toString=function(){return this.children.reduce((function(e,t){return e+t.toString()}),"")},t.len=function(){return 0},t.match=function(e){var t=!0,n=!1,r=void 0;try{for(var i,o=Object.entries(qt)[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=(0,g.Z)(i.value,2),l=a[0],c=a[1];if((0,vt.Z)(this,c)&&l in e)return e[l](this)}}catch(u){n=!0,r=u}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}},(0,Dt.Z)(e,[{key:"children",get:function(){return this._children}},{key:"rightMostDescendant",get:function(){return this._children.length>0?this._children[this._children.length-1].rightMostDescendant:this}},{key:"snippet",get:function(){for(var e=this;;){if(!e)return;if((0,vt.Z)(e,zt))return e;e=e.parent}}}]),e}(),Xt=function(e){(0,ce.Z)(n,e);var t=(0,ue.Z)(n);function n(e){var r;return(0,le.Z)(this,n),(r=t.call(this)).value=e,r}var r=n.prototype;return r.toString=function(){return this.value},r.toTextmateString=function(){return n.escape(this.value)},r.len=function(){return this.value.length},r.clone=function(){return new n(this.value)},n.escape=function(e){return e.replace(/\$|}|\\/g,"\\$&")},n}(Ut),Mt=function(e){(0,ce.Z)(n,e);var t=(0,ue.Z)(n);function n(){return(0,le.Z)(this,n),t.apply(this,arguments)}return n}(Ut),Nt=function(e){(0,ce.Z)(n,e);var t=(0,ue.Z)(n);function n(e){var r;return(0,le.Z)(this,n),(r=t.call(this)).index=e,r}var r=n.prototype;return r.toTextmateString=function(){var e="";return this.transform&&(e=this.transform.toTextmateString()),0!==this.children.length||this.transform?0===this.children.length?"${".concat(this.index).concat(e,"}"):this.choice?"${".concat(this.index,"|").concat(this.choice.toTextmateString(),"|").concat(e,"}"):"${".concat(this.index,":").concat(this.children.map((function(e){return e.toTextmateString()})).join("")).concat(e,"}"):"$".concat(this.index)},r.clone=function(){var e=new n(this.index);return this.transform&&(e.transform=this.transform.clone()),e._children=this.children.map((function(e){return e.clone()})),e},n.compareByIndex=function(e,t){return e.index===t.index?0:e.isFinalTabstop?1:t.isFinalTabstop||e.index<t.index?-1:e.index>t.index?1:0},(0,Dt.Z)(n,[{key:"isFinalTabstop",get:function(){return 0===this.index}},{key:"choice",get:function(){return 1===this._children.length&&(0,vt.Z)(this._children[0],Ot)?this._children[0]:void 0}}]),n}(Mt),Ot=function(e){(0,ce.Z)(n,e);var t=(0,ue.Z)(n);function n(){var e;return(0,le.Z)(this,n),(e=t.apply(this,arguments)).options=[],e}var r=n.prototype;return r.appendChild=function(e){return(0,vt.Z)(e,Xt)&&(e.parent=this,this.options.push(e)),this},r.toString=function(){return this.options[0].value},r.toTextmateString=function(){return this.options.map((function(e){return e.value.replace(/\||,|\\/g,"\\$&")})).join(",")},r.len=function(){return this.options[0].len()},r.clone=function(){var e=new n;return this.options.forEach(e.appendChild,e),e},n}(Ut),Ft=function(e){(0,ce.Z)(n,e);var t=(0,ue.Z)(n);function n(){var e;return(0,le.Z)(this,n),(e=t.apply(this,arguments)).regexp=new RegExp(""),e}var r=n.prototype;return r.resolve=function(e){var t=this,n=!1,r=e.replace(this.regexp,(function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return n=!0,t._replace(r.slice(0,-2))}));return!n&&this._children.some((function(e){return(0,vt.Z)(e,Wt)&&Boolean(e.elseValue)}))&&(r=this._replace([])),r},r._replace=function(e){var t="",n=!0,r=!1,i=void 0;try{for(var o,a=this._children[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value;if((0,vt.Z)(l,Wt)){var c=e[l.index]||"";t+=c=l.resolve(c)}else t+=l.toString()}}catch(u){r=!0,i=u}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return t},r.toString=function(){return""},r.toTextmateString=function(){return"/".concat(this.regexp.source,"/").concat(this.children.map((function(e){return e.toTextmateString()})),"/").concat((this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":""))},r.clone=function(){var e=new n;return e.regexp=new RegExp(this.regexp.source,(this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":"")),e._children=this.children.map((function(e){return e.clone()})),e},n}(Ut),Wt=function(e){(0,ce.Z)(n,e);var t=(0,ue.Z)(n);function n(e,r,i,o){var a;return(0,le.Z)(this,n),(a=t.call(this)).index=e,a.shorthandName=r,a.ifValue=i,a.elseValue=o,a}var r=n.prototype;return r.resolve=function(e){return"upcase"===this.shorthandName?e?e.toLocaleUpperCase():"":"downcase"===this.shorthandName?e?e.toLocaleLowerCase():"":"capitalize"===this.shorthandName?e?e[0].toLocaleUpperCase()+e.substr(1):"":"pascalcase"===this.shorthandName?e?this._toPascalCase(e):"":"camelcase"===this.shorthandName?e?this._toCamelCase(e):"":Boolean(e)&&"string"===typeof this.ifValue?this.ifValue:e||"string"!==typeof this.elseValue?e||"":this.elseValue},r._toPascalCase=function(e){var t=e.match(/[a-z0-9]+/gi);return t?t.map((function(e){return e.charAt(0).toUpperCase()+e.substr(1)})).join(""):e},r._toCamelCase=function(e){var t=e.match(/[a-z0-9]+/gi);return t?t.map((function(e,t){return 0===t?e.charAt(0).toLowerCase()+e.substr(1):e.charAt(0).toUpperCase()+e.substr(1)})).join(""):e},r.toTextmateString=function(){var e="${";return e+=this.index,this.shorthandName?e+=":/".concat(this.shorthandName):this.ifValue&&this.elseValue?e+=":?".concat(this.ifValue,":").concat(this.elseValue):this.ifValue?e+=":+".concat(this.ifValue):this.elseValue&&(e+=":-".concat(this.elseValue)),e+="}"},r.clone=function(){return new n(this.index,this.shorthandName,this.ifValue,this.elseValue)},n}(Ut),Ht=function(e){(0,ce.Z)(n,e);var t=(0,ue.Z)(n);function n(e){var r;return(0,le.Z)(this,n),(r=t.call(this)).name=e,r}var r=n.prototype;return r.resolve=function(e){var t=e.resolve(this);return this.transform&&(t=this.transform.resolve(t||"")),void 0!==t&&(this._children=[new Xt(t)],!0)},r.toTextmateString=function(){var e="";return this.transform&&(e=this.transform.toTextmateString()),0===this.children.length?"${".concat(this.name).concat(e,"}"):"${".concat(this.name,":").concat(this.children.map((function(e){return e.toTextmateString()})).join("")).concat(e,"}")},r.clone=function(){var e=new n(this.name);return this.transform&&(e.transform=this.transform.clone()),e._children=this.children.map((function(e){return e.clone()})),e},n}(Mt);function Vt(e,t){for(var n=(0,o.Z)(e);n.length>0;){var r,i=n.shift();if(!t(i))break;(r=n).unshift.apply(r,(0,o.Z)(i.children))}}var zt=function(e){(0,ce.Z)(n,e);var t=(0,ue.Z)(n);function n(){return(0,le.Z)(this,n),t.apply(this,arguments)}var r=n.prototype;return r.offset=function(e){var t=0,n=!1;return this.walk((function(r){return r===e?(n=!0,!1):(t+=r.len(),!0)})),n?t:-1},r.fullLen=function(e){var t=0;return Vt([e],(function(e){return t+=e.len(),!0})),t},r.enclosingPlaceholders=function(e){for(var t=[],n=e.parent;n;)(0,vt.Z)(n,Nt)&&t.push(n),n=n.parent;return t},r.resolveVariables=function(e){var t=this;return this.walk((function(n){return(0,vt.Z)(n,Ht)&&n.resolve(e)&&delete t._placeholders,!0})),this},r.appendChild=function(e){return delete this._placeholders,(0,Bt.Z)((0,Pt.Z)(n.prototype),"appendChild",this).call(this,e)},r.replace=function(e,t){return delete this._placeholders,(0,Bt.Z)((0,Pt.Z)(n.prototype),"replace",this).call(this,e,t)},r.toTextmateString=function(){return this.children.reduce((function(e,t){return e+t.toTextmateString()}),"")},r.clone=function(){var e=new n;return this._children=this.children.map((function(e){return e.clone()})),e},r.walk=function(e){Vt(this.children,e)},(0,Dt.Z)(n,[{key:"placeholderInfo",get:function(){if(!this._placeholders){var e,t=[];this.walk((function(n){return(0,vt.Z)(n,Nt)&&(t.push(n),e=!e||e.index<n.index?n:e),!0})),this._placeholders={all:t,last:e}}return this._placeholders}},{key:"placeholders",get:function(){return this.placeholderInfo.all}}]),n}(Ut),jt=function(){function e(){(0,le.Z)(this,e),this._scanner=new Lt,this._token={type:14,pos:0,len:0}}var t=e.prototype;return t.text=function(e){return this.parse(e).toString()},t.parse=function(e,t,n){var r=new zt;return this.parseFragment(e,r),this.ensureFinalTabstop(r,null!==n&&void 0!==n&&n,null!==t&&void 0!==t&&t),r},t.parseFragment=function(e,t){var n=t.children.length;for(this._scanner.text(e),this._token=this._scanner.next();this._parse(t););var r=new Map,i=[];t.walk((function(e){return(0,vt.Z)(e,Nt)&&(e.isFinalTabstop?r.set(0,void 0):!r.has(e.index)&&e.children.length>0?r.set(e.index,e.children):i.push(e)),!0}));var o=function(e,n){var i=r.get(e.index);if(i){var a=new Nt(e.index);a.transform=e.transform;var l=!0,c=!1,u=void 0;try{for(var s,d=i[Symbol.iterator]();!(l=(s=d.next()).done);l=!0){var f=s.value.clone();a.appendChild(f),(0,vt.Z)(f,Nt)&&r.has(f.index)&&!n.has(f.index)&&(n.add(f.index),o(f,n),n.delete(f.index))}}catch(p){c=!0,u=p}finally{try{l||null==d.return||d.return()}finally{if(c)throw u}}t.replace(e,[a])}},a=new Set,l=!0,c=!1,u=void 0;try{for(var s,d=i[Symbol.iterator]();!(l=(s=d.next()).done);l=!0){var f=s.value;o(f,a)}}catch(p){c=!0,u=p}finally{try{l||null==d.return||d.return()}finally{if(c)throw u}}return t.children.slice(n)},t.ensureFinalTabstop=function(e,t,n){(t||n&&e.placeholders.length>0)&&(e.placeholders.find((function(e){return 0===e.index}))||e.appendChild(new Nt(0)))},t._accept=function(e,t){if(void 0===e||this._token.type===e){var n=!t||this._scanner.tokenText(this._token);return this._token=this._scanner.next(),n}return!1},t._backTo=function(e){return this._scanner.pos=e.pos+e.len,this._token=e,!1},t._until=function(e){for(var t=this._token;this._token.type!==e;){if(14===this._token.type)return!1;if(5===this._token.type){var n=this._scanner.next();if(0!==n.type&&4!==n.type&&5!==n.type)return!1}this._token=this._scanner.next()}var r=this._scanner.value.substring(t.pos,this._token.pos).replace(/\\(\$|}|\\)/g,"$1");return this._token=this._scanner.next(),r},t._parse=function(e){return this._parseEscaped(e)||this._parseTabstopOrVariableName(e)||this._parseComplexPlaceholder(e)||this._parseComplexVariable(e)||this._parseAnything(e)},t._parseEscaped=function(e){var t;return!!(t=this._accept(5,!0))&&(t=this._accept(0,!0)||this._accept(4,!0)||this._accept(5,!0)||t,e.appendChild(new Xt(t)),!0)},t._parseTabstopOrVariableName=function(e){var t,n=this._token;return this._accept(0)&&(t=this._accept(9,!0)||this._accept(8,!0))?(e.appendChild(/^\d+$/.test(t)?new Nt(Number(t)):new Ht(t)),!0):this._backTo(n)},t._parseComplexPlaceholder=function(e){var t,n=this._token;if(!(this._accept(0)&&this._accept(3)&&(t=this._accept(8,!0))))return this._backTo(n);var r=new Nt(Number(t));if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(r),!0;if(!this._parse(r))return e.appendChild(new Xt("${"+t+":")),r.children.forEach(e.appendChild,e),!0}else{if(!(r.index>0&&this._accept(7)))return this._accept(6)?this._parseTransform(r)?(e.appendChild(r),!0):(this._backTo(n),!1):this._accept(4)?(e.appendChild(r),!0):this._backTo(n);for(var i=new Ot;;){if(this._parseChoiceElement(i)){if(this._accept(2))continue;if(this._accept(7)&&(r.appendChild(i),this._accept(4)))return e.appendChild(r),!0}return this._backTo(n),!1}}},t._parseChoiceElement=function(e){for(var t=this._token,n=[];2!==this._token.type&&7!==this._token.type;){var r=void 0;if(!(r=(r=this._accept(5,!0))?this._accept(2,!0)||this._accept(7,!0)||this._accept(5,!0)||r:this._accept(void 0,!0)))return this._backTo(t),!1;n.push(r)}return 0===n.length?(this._backTo(t),!1):(e.appendChild(new Xt(n.join(""))),!0)},t._parseComplexVariable=function(e){var t,n=this._token;if(!(this._accept(0)&&this._accept(3)&&(t=this._accept(9,!0))))return this._backTo(n);var r=new Ht(t);if(!this._accept(1))return this._accept(6)?this._parseTransform(r)?(e.appendChild(r),!0):(this._backTo(n),!1):this._accept(4)?(e.appendChild(r),!0):this._backTo(n);for(;;){if(this._accept(4))return e.appendChild(r),!0;if(!this._parse(r))return e.appendChild(new Xt("${"+t+":")),r.children.forEach(e.appendChild,e),!0}},t._parseTransform=function(e){for(var t=new Ft,n="",r="";!this._accept(6);){var i=void 0;if(i=this._accept(5,!0))n+=i=this._accept(6,!0)||i;else{if(14===this._token.type)return!1;n+=this._accept(void 0,!0)}}for(;!this._accept(6);){var o=void 0;if(o=this._accept(5,!0))o=this._accept(5,!0)||this._accept(6,!0)||o,t.appendChild(new Xt(o));else if(!this._parseFormatString(t)&&!this._parseAnything(t))return!1}for(;!this._accept(4);){if(14===this._token.type)return!1;r+=this._accept(void 0,!0)}try{t.regexp=new RegExp(n,r)}catch(a){return!1}return e.transform=t,!0},t._parseFormatString=function(e){var t=this._token;if(!this._accept(0))return!1;var n=!1;this._accept(3)&&(n=!0);var r=this._accept(8,!0);if(!r)return this._backTo(t),!1;if(!n)return e.appendChild(new Wt(Number(r))),!0;if(this._accept(4))return e.appendChild(new Wt(Number(r))),!0;if(!this._accept(1))return this._backTo(t),!1;if(this._accept(6)){var i=this._accept(9,!0);return i&&this._accept(4)?(e.appendChild(new Wt(Number(r),i)),!0):(this._backTo(t),!1)}if(this._accept(11)){var o=this._until(4);if(o)return e.appendChild(new Wt(Number(r),void 0,o,void 0)),!0}else if(this._accept(12)){var a=this._until(4);if(a)return e.appendChild(new Wt(Number(r),void 0,void 0,a)),!0}else if(this._accept(13)){var l=this._until(1);if(l){var c=this._until(4);if(c)return e.appendChild(new Wt(Number(r),void 0,l,c)),!0}}else{var u=this._until(4);if(u)return e.appendChild(new Wt(Number(r),void 0,void 0,u)),!0}return this._backTo(t),!1},t._parseAnything=function(e){return 14!==this._token.type&&(e.appendChild(new Xt(this._scanner.tokenText(this._token))),this._accept(void 0),!0)},e.escape=function(e){return e.replace(/\$|}|\\/g,"\\$&")},e.asInsertText=function(t){return(new e).parse(t).toString()},e.guessNeedsClipboard=function(e){return/\${?CLIPBOARD/.test(e)},e}(),qt={Text:Xt,Placeholder:Nt,Variable:Ht,FormatString:Wt,Choice:Ot};function $t(e,t){var n=t.mapPos(e.from,-1,j.gc.TrackDel),r=t.mapPos(e.to,1,j.gc.TrackDel);return null==n||null==r?null:{field:e.field,from:n,to:r}}var Yt=function(){function e(t){(0,le.Z)(this,e),this.lines=t.split(/\r\n?|\n/).map((function(e){return(new jt).parse(e).children}))}return e.prototype.apply=function(t){var n=t.view,r=t.from,i=t.to,o=e.instantiate(this.lines,t),a=o.text,l=o.ranges,c={from:r,to:i,insert:j.xv.of(a)},u={changes:c,scrollIntoView:!0,annotations:ze.Jv.of(t.completion)};if(l.length&&(u.selection=rn(l,0)),l.length>1){var s=new Jt(l,0),d=u.effects=[en.of(s)];void 0===n.state.field(nn,!1)&&d.push(j.Py.appendConfig.of([nn,an,ln]))}if(r===i&&!l.length){var f=j.as.of(c,n.state.doc.length),p=n.state.selection.ranges.map((function(e){return e.map(f,0)}));u.selection=j.jT.create(p,n.state.selection.mainIndex)}return u},e.resolveVariable=function(e,t){var n=t.view,r=t.from,i=t.path;switch(e){case"TM_FILENAME":return(0,_t.basename)(i);case"TM_FILENAME_BASE":return(0,_t.basename)(i,(0,_t.extname)(i));case"TM_DIRECTORY":return(0,_t.dirname)(i);case"TM_FILEPATH":return i;case"TM_LINE_INDEX":return(n.state.doc.lineAt(r).number-1).toString();case"TM_LINE_NUMBER":return n.state.doc.lineAt(r).number.toString();default:return e}},e.instantiate=function(t,n){var a,l=n.view,c=n.from,u=l.state,s=[],d=[],f=u.doc.lineAt(c),p=/^\s*/.exec(f.text)[0],h=u.facet(gt.c),v=!0,m=!1,g=void 0;try{for(var y,Z=function(){var t=y.value,r=0,i="",o=function(e){var t=0,n=r;if(0===r&&(t=/^\t*/.exec(e)[0].length)){var o=p+h.repeat(t);e=o+e.slice(t),n+=o.length}return i+=e,r+=e.length,{line:s.length,from:n,to:r}},a=function(t){var i=!0,l=!1,u=void 0;try{for(var f,p=t[Symbol.iterator]();!(i=(f=p.next()).done);i=!0){f.value.match({Text:function(e){o(e.value)},Variable:function(t){var r=t.name,i=t.transform,a=e.resolveVariable(r,n);i&&(a=a.replace(i.regexp,(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i.children.map((function(e){return e.match({Text:function(e){return e.value},FormatString:function(e){return e.resolve(t[e.index])}})})).filter(Boolean).join("")}))),o(a)},Choice:function(e){o(e.options[0].value)},Placeholder:function(e){var t,n=s.length?c+s.map((function(e){return e.length})).reduce((function(e,t){return e+t})):c;if(null===(t=e.children)||void 0===t?void 0:t.length){var i={field:e.index,from:n+r,to:null};d.push(i),a(e.children),i.to=n+r}else{o("");var l=n+r;d.push({field:e.index,from:l,to:l})}}})}}catch(h){l=!0,u=h}finally{try{i||null==p.return||p.return()}finally{if(l)throw u}}};a(t),s.push(i)},b=t[Symbol.iterator]();!(v=(y=b.next()).done);v=!0)Z()}catch(x){m=!0,g=x}finally{try{v||null==b.return||b.return()}finally{if(m)throw g}}var w=(a=Math).max.apply(a,(0,o.Z)(d.map((function(e){return e.field}))));return{text:s,ranges:d.map((function(e){var t=e.field,n=(0,mt.Z)(e,["field"]);return(0,i.Z)((0,r.Z)({},n),{field:0===t?w:t-1})}))}},e}(),Kt=q.p.widget({widget:new(function(e){(0,ce.Z)(n,e);var t=(0,ue.Z)(n);function n(){return(0,le.Z)(this,n),t.apply(this,arguments)}var r=n.prototype;return r.toDOM=function(){var e=document.createElement("span");return e.className="cm-snippetFieldPosition",e},r.ignoreEvent=function(){return!1},n}(q.l9))}),Qt=q.p.mark({class:"cm-snippetField"}),Jt=function(){function e(t,n){(0,le.Z)(this,e),this.ranges=t,this.active=n,this.deco=q.p.set(t.map((function(e){return(e.from===e.to?Kt:Qt).range(e.from,e.to)})))}var t=e.prototype;return t.map=function(t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,l=this.ranges[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=$t(a.value,t);if(!c)return null;n.push(c)}}catch(u){i=!0,o=u}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return new e(n,this.active)},t.isSelectionInsideField=function(e){var t=this;return e.ranges.every((function(e){return t.ranges.some((function(n){return n.field===t.active&&n.from<=e.from&&n.to>=e.to}))}))},e}(),en=j.Py.define({map:function(e,t){return null===e||void 0===e?void 0:e.map(t)}}),tn=j.Py.define(),nn=j.QQ.define({create:function(){return null},update:function(e,t){var n=!0,r=!1,i=void 0;try{for(var o,a=t.effects[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value;if(l.is(en))return l.value;if(l.is(tn)&&e)return new Jt(e.ranges,l.value)}}catch(c){r=!0,i=c}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return e&&t.docChanged&&(e=e.map(t.changes)),e&&t.selection&&!e.isSelectionInsideField(t.selection)&&(e=null),e},provide:function(e){return q.tk.decorations.from(e,(function(e){return e?e.deco:q.p.none}))}});function rn(e,t){var n=e.filter((function(e){return e.field===t})).map((function(e){return j.jT.range(e.from,e.to)}));if(0!==n.length)return j.jT.create(n)}function on(e){return function(t){var n,r=t.state,i=t.dispatch,a=r.field(nn,!1);if(!a||e<0&&0===a.active)return!1;var l=a.active+e,c=(n=Math).max.apply(n,(0,o.Z)(a.ranges.map((function(e){return e.field})))),u=e>0&&a.active>=c;return i(r.update({selection:rn(a.ranges,l),effects:en.of(u?null:new Jt(a.ranges,l))})),!0}}var an=j.Wl.highest(q.$f.of([{key:"Tab",run:on(1),shift:on(-1)},{key:"Escape",run:function(e){var t=e.state,n=e.dispatch;return!!t.field(nn,!1)&&(n(t.update({effects:en.of(null)})),!0)}}])),ln=q.tk.domEventHandlers({mousedown:function(e,t){var n,r=t.state.field(nn,!1);if(!r||null==(n=t.posAtCoords({x:e.clientX,y:e.clientY})))return!1;var i=r.ranges.find((function(e){return e.from<=n&&e.to>=n}));return!(!i||i.field===r.active)&&(t.dispatch({selection:rn(r.ranges,i.field),effects:en.of(r.ranges.some((function(e){return e.field>i.field}))?new Jt(r.ranges,i.field):null)}),!0)}}),cn=n(35086),un=n(93731);function sn(e){var t=e.facet(gt.dK);return null===t||void 0===t?void 0:t.name}var dn=n(43e3),fn=n(47880),pn=n(72669),hn=n(82568),vn="cm-ghostwriter-hint-tooltip",mn=q.tk.theme((0,Gt.Z)({".cm-ghostwriter-hint":{display:"none",width:"100%",backgroundColor:k.TV.backgroundHigher,borderTop:"solid 1px ".concat(k.TV.outlineDefault)}},".cm-tooltip-autocomplete.".concat(vn," .cm-ghostwriter-hint"),{display:"block"})),gn=(0,hn.X)({hint:[k.l0.p(4),k.l0.rowWithGap(8),k.l0.align.center,k.l0.font.default,{opacity:.6}],prompt:[k.l0.rowWithGap(4),k.l0.align.center]});function yn(){return(0,a.BX)(x.G,{css:gn.hint,children:[(0,a.tZ)(fn.Z,{width:8,height:8}),(0,a.BX)(x.G,{css:gn.prompt,children:[(0,a.tZ)(cn.ZP,{size:"small",dimmed:!1,shortcut:{key:"tab"}}),(0,a.tZ)(fe.xv,{variant:"small",multiline:!1,children:"to use Ghostwriter suggestion."})]})]})}var Zn=q.lg.define((function(e){var t=function(){return Array.from(e.dom.children).filter((function(e){return e.classList.contains("cm-tooltip-autocomplete")}))},n=function(e){return Array.from(e.children).filter((function(e){return e.classList.contains("cm-ghostwriter-hint")}))},r=!1;return{update:function(){null!==(0,ze.LR)(e.state)&&Promise.resolve().then((function(){if(!r){var e=!0,i=!1,o=void 0;try{for(var l,c=t()[Symbol.iterator]();!(e=(l=c.next()).done);e=!0){var u=l.value;if(0===n(u).length){var s=(0,pn.VV)((0,a.tZ)(yn,{}));s.className="cm-ghostwriter-hint",u.appendChild(s)}}}catch(d){i=!0,o=d}finally{try{e||null==c.return||c.return()}finally{if(i)throw o}}}}))},destroy:function(){var e=!0,i=!1,o=void 0;try{for(var a,l=t()[Symbol.iterator]();!(e=(a=l.next()).done);e=!0){var c=a.value,u=!0,s=!1,d=void 0;try{for(var f,p=n(c)[Symbol.iterator]();!(u=(f=p.next()).done);u=!0){var h=f.value;c.removeChild(h)}}catch(v){s=!0,d=v}finally{try{u||null==p.return||p.return()}finally{if(s)throw d}}}}catch(v){i=!0,o=v}finally{try{e||null==l.return||l.return()}finally{if(i)throw o}}r=!0}}}));function bn(e){var t=Object.keys(e).join(""),n=/\w/.test(t);return n&&(t=t.replace(/\w/g,"")),"[".concat(n?"\\w":"").concat(t.replace(".","").replace(/[^\w\s]/g,"\\$&"),"]")}function wn(e,t){var n=e.state,r=e.pos;if(e.explicit)return{triggerKind:ct.CompletionTriggerKind.Invoked};var i=n.doc.lineAt(r),o=i.text[r-i.from-1],a=i.text.substring(0,r-i.from);if(null===t||void 0===t?void 0:t.includes(o)){var l=o;return{triggerKind:ct.CompletionTriggerKind.TriggerCharacter,triggerCharacter:l}}return a.match(/\w$/)?{triggerKind:ct.CompletionTriggerKind.Invoked}:null}var xn=Object.entries($e.CompletionItemKind).reduce((function(e,t){var n=(0,g.Z)(t,2),i=n[0],o=n[1];return(0,r.Z)((0,Gt.Z)({},o,i.toLowerCase()),e)}),{});function kn(e,t){var n=(0,we.R)(e.state.doc,t.range.start),r=(0,we.R)(e.state.doc,t.range.end);if(null!==n&&null!==r)return{from:n,to:r,insert:t.newText}}function Cn(e){var t,n=e.context,l=e.items,c=e.client,u=e.path,s=e.setDecoration,d=e.trackCompletion,f=0,p=null!==(t=sn(n.state))&&void 0!==t?t:"unknown",h=function(e,t){var n=new Set;return e.filter((function(e){var r=t.map((function(t){return e[t]})).join("\u241e");return!n.has(r)&&(n.add(r),!0)}))}(l.filter((function(e){return Boolean(e.label)})),["label","kind"]).map((function(e){var t=e.additionalTextEdits,n={label:e.label,detail:e.detail,apply:function(n,a,l,c){if(e.insertTextFormat===$e.InsertTextFormat.Snippet){var s,f,h,v,m=[];t&&m.push({changes:t.map((function(e){return kn(n,e)}))});var y=null!==(v=null!==(h=null===(f=e.textEdit)||void 0===f?void 0:f.newText)&&void 0!==h?h:e.insertText)&&void 0!==v?v:e.label,Z=new Yt(y);e.textEdit&&"range"in e.textEdit&&(l=(0,we.R)(n.state.doc,e.textEdit.range.start),c=Math.max(c,(0,we.R)(n.state.doc,e.textEdit.range.end)));var b=Z.apply({view:n,from:l,to:c,path:u,completion:a});return(s=n).dispatch.apply(s,(0,o.Z)(m).concat([b])),void d("completion-accepted",{language:p,completionKind:e.kind,insertTextFormat:e.insertTextFormat})}var w=function(e){var t,n=e.view,o=e.item,a=e.from,l=e.to,c=n.state,u=c.doc,s=c.selection,d=[];if(o.textEdit){var f=o.textEdit,p=f.range,h=f.newText,v=(0,we.R)(u,p.start),m=(0,we.R)(u,p.end);if(null===v||null===m)return;d.push({from:v,insert:h,to:Math.max(m,s.main.to)})}else{var y=o.insertText||o.label,Z=n.state.wordAt(l);Z&&Z.to>l&&y.includes(n.state.doc.sliceString(l,Z.to))&&(l=Z.to),d.push({from:a,to:l,insert:y})}var b=(0,g.Z)(d,1)[0],w="";null===(t=o.additionalTextEdits)||void 0===t||t.forEach((function(e){var t=kn(n,e);t&&("from"in b&&t.from===b.from&&(w=t.insert),d.push(t))}));var x=l-a;s.ranges.forEach((function(e){if(e!==s.main){if(!("insert"in b)||!b.insert)throw new Error("Expected insert in mainChange");var t=e.from-x,n=w+b.insert;d.push({from:t,to:e.to,insert:n})}}));var k=d.map((function(e){return"from"in e&&"undefined"!==typeof e.to?(0,i.Z)((0,r.Z)({},e),{from:Math.min(e.from,e.to),to:Math.max(e.from,e.to)}):e})),C=j.as.of(k,u.length),S=s.ranges.map((function(e){return e.map(C,0)}));return{changes:C,selection:j.jT.create(S,s.mainIndex)}}({view:n,item:(0,i.Z)((0,r.Z)({},e),{additionalTextEdits:t}),to:c,from:l});w&&(d("completion-accepted",{language:p,completionKind:e.kind,insertTextFormat:e.insertTextFormat}),n.dispatch({changes:w.changes,selection:w.selection,annotations:ze.Jv.of(a)}))},type:e.kind&&xn[e.kind],filterText:(e.filterText||e.label).toLowerCase(),sortText:(e.sortText||e.label).toLowerCase()},l=(0,J.Z)(c).isCompletionItemResolveSupported;return c&&l?n.info=(0,H.Z)((function(){var n,r,i,o,l,h,v;return(0,V.__generator)(this,(function(m){switch(m.label){case 0:return[4,c.request.resolveCompletionItem(e)];case 1:return n=m.sent(),r="cancelled"in n&&n.cancelled,i="result"in n?n.result:null,r||!i?[2,null]:(i.additionalTextEdits&&(t=i.additionalTextEdits),f++,o=[],i.detail&&i.detail!==e.detail&&i.detail!==e.label&&(l=(0,_t.extname)(u).slice(1),h=["```"+l,i.detail,"```"].join("\n"),o.push((0,a.tZ)(Je,{className:"lsp-completion-detail",content:{value:h,kind:"markdown"}},"".concat(f,"-detail")))),i.documentation&&o.push((0,a.tZ)(Je,{content:i.documentation},"".concat(f,"-documentation"))),0===o.length?[2,null]:(d("resolution-presented",{language:p,resolutionSource:"request",completionKind:e.kind}),v=document.createElement("div"),s(se.createPortal((0,a.tZ)(a.HY,{children:o}),v)),[2,v]))}}))})):e.documentation&&(n.info=function(){if(!e.documentation)return null;d("resolution-presented",{language:p,resolutionSource:"documentation",completionKind:e.kind});var t=document.createElement("div");return s(se.createPortal((0,a.tZ)(a.HY,{children:(0,a.tZ)(Je,{content:e.documentation})}),t)),t}),n}));h=h.sort((function(e,t){return e.sortText<t.sortText?-1:e.sortText>t.sortText?1:0}));for(var v=0;v<h.length;v++)h[v-1]&&h[v].sortText===h[v-v].sortText?h[v].boost=h[v-1].boost:h[v].boost=h.length-v;var m=(0,g.Z)(function(e){var t=Object.create(null),n=Object.create(null),r=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value.filterText;t[c[0]]=!0;for(var u=1;u<c.length;u++)n[c[u]]=!0}}catch(d){i=!0,o=d}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}var s=bn(t)+bn(n)+"*$";return[new RegExp("^"+s),new RegExp(s)]}(h),2),y=m[0],Z=m[1],b=n.matchBefore(Z),w=n.pos;return b&&(w=b.from),h.length&&d("completion-options-presented",{language:p}),{from:w,options:h,validFor:y}}var Sn=q.tk.baseTheme({".lsp-completion-keyboard-shortcuts":{display:"none"},'[aria-selected="true"] .lsp-completion-keyboard-shortcuts':{float:"right",display:"inline-block"}}),Tn=n(38453),En=n(88541),Rn=n(11619);function Gn(e){var t=e.content,n=e.className,i=e.showHoveredVariable,o=(0,Rn.Z)().preferences;if("string"!==typeof t&&"kind"in t)return(0,a.tZ)(Je,{content:t});var l=(Array.isArray(t)?t:[t]).map((function(e){return"string"===typeof e?e:"```"+e.language+"\n"+e.value+"\n```"})).join("\n");return(0,a.tZ)(qe.ZP,{css:[{p:{fontSize:o.fontSize}},i?[k.l0.maxHeight(In),k.l0.overflowY("auto")]:void 0],className:n,components:{code:function(e){return(0,a.tZ)(Ye.Z,(0,r.Z)({minimal:!0,disableCopy:!0},e))}},children:l})}var In=100;function _n(e){var t=e.className,n=e.content,i=e.textHovered,o=(0,En.P5)({controlName:"flag-debugger-hover-variable",logFlagToAnalytics:!1}),l=(0,te.Z)().debuggest,c=(0,ke.Z)(l.mainClient),u=c&&("running"===c.state.current||"paused"===c.state.current),s=(0,g.Z)(b.useState(!1),2),d=s[0],f=s[1],p=(0,g.Z)(b.useState(void 0),2),h=p[0],v=p[1],m=o&&u&&h;return b.useEffect((function(){function e(){return e=(0,H.Z)((function(){var e,t,n;return(0,V.__generator)(this,(function(a){switch(a.label){case 0:if(!o||!u)return[3,4];f(!0),a.label=1;case 1:return a.trys.push([1,,3,4]),[4,c.evaluate({expression:i,context:"hover"})];case 2:return t=a.sent(),(null===(e=t.body)||void 0===e?void 0:e.result)&&(n=(0,r.Z)({name:i,value:t.body.result},t.body),v(n)),[3,4];case 3:return f(!1),[7];case 4:return[2]}}))})),e.apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[o,c,u,i]),(0,a.BX)(x.G,{css:[Ke,m?k.l0.maxHeight(In+190):k.l0.maxHeight(190),k.l0.minHeight(30),k.l0.overflowY("auto"),k.l0.borderRadius(4),k.l0.backgroundColor.backgroundHigher],children:[d?void 0:(0,a.tZ)(Gn,{content:n,className:t,showHoveredVariable:Boolean(m)}),m?(0,a.tZ)(x.G,{css:[k.l0.maxHeight(190),k.l0.overflowY("auto")],children:(0,a.tZ)(Tn._,{depth:0,client:c,variable:h})}):void 0]})}var Dn=n(951);function Bn(e){var t,n,r=e.hover,i=e.state,o=e.offset,l=e.languageId;if((Array.isArray(r.contents)||"string"===typeof r.contents)&&0===r.contents.length)return null;l.endsWith("css")&&Array.isArray(r.contents)&&(r.contents={kind:"markdown",value:"```html \n".concat(r.contents[0],"\n```\n").concat(r.contents[1],"\n      ")});var c="",u=i.doc;if(r.range)t=(0,we.R)(u,r.range.start),n=(0,we.R)(u,r.range.end),c=u.sliceString(t,n);else if(n=void 0,(t=o)<=i.doc.length){var s=i.wordAt(t);s?(c=u.sliceString(s.from,s.to),t=Math.min(t,s.from),n=s.to):c=u.sliceString(t,t+1)}return{pos:t,end:n,create:function(){var e=(0,pn.VV)((0,a.tZ)(_n,{content:r.contents,textHovered:c}));return e.classList.add("hover-tooltip"),e.style.padding="0",{dom:e,mount:function(e){var t;t=function(){(0,q.E2)(e)},[0,50,200,1e3].forEach((function(e){return setTimeout(t,e)}))}}},above:!0}}var Pn=n(21449),An=n(87042),Ln=n(99964);function Un(e){(0,b.useEffect)((function(){var t=function(t){"Escape"===t.key&&e(t)};return window.addEventListener("keydown",t),function(){window.removeEventListener("keydown",t)}}),[e])}var Xn=n(12318),Mn=n(45510),Nn=n(87076),On=n(63837),Fn=n(80336),Wn=n(94971),Hn=n(49459),Vn=(0,hn.X)({headerContainer:[k.l0.flex.row,k.l0.align.center,k.l0.pr(4)],bodyContainer:[k.l0.justify.center,k.l0.align.center,k.l0.p(8),k.l0.pt(4)],input:[k.l0.p(4),k.l0.borderRadius(4)],wrapper:[k.l0.flex.column,k.l0.justify.center,k.l0.borderRadius(4),k.l0.shadow(2),k.l0.width(200)]});function zn(e){var t=(0,Ln.Z)(e.onClose,[e.onClose]);Un(e.onClose);var n=(0,b.useRef)(null),r=(0,Xn.Y)(e.currentValue,(function(t){return t?t===e.currentValue?{message:"Must pick a new name"}:void 0:{message:"New name can't be empty"}}));return(0,a.tZ)(Hn.ZP,{children:(0,a.tZ)(x.G,{"data-testid":"RenameInput",innerRef:t,css:Vn.wrapper,children:(0,a.BX)("form",{onSubmit:function(t){t.preventDefault(),r.error||e.onRename(r.value)},children:[(0,a.BX)(x.G,{css:Vn.headerContainer,children:[(0,a.tZ)(fe.h4,{level:2,variant:"subheadDefault",css:[k.l0.p(4),k.l0.pl(8)],children:"Rename"}),(0,a.tZ)(fe.h4,{level:2,variant:"subheadDefault",color:"dimmer",css:[k.l0.maxWidth(100),k.l0.overflow("hidden"),{whiteSpace:"nowrap",textOverflow:"ellipsis"}],children:e.currentValue}),(0,a.tZ)(Nn.h,{alt:"Close rename input",tooltipHidden:!0,onClick:e.onClose,css:[k.l0.position.absolute,k.l0.top(4),k.l0.right(4)],children:(0,a.tZ)(Fn.Z,{})})]}),(0,a.tZ)(x.G,{css:Vn.bodyContainer,children:(0,a.tZ)(Wn.ZP,{css:Vn.input,name:"rename",ref:n,onBlur:r.handleBlur,onChange:function(e){r.setValue(e.target.value)},value:r.value,placeholder:"New name",autoFocus:!0,autoCorrect:"off",autoCapitalize:"off",autoComplete:"off",validationResults:r.error?[{message:r.error.message,state:"error"}]:void 0})}),(0,a.tZ)(x.G,{css:[k.l0.flex.rowReverse,k.l0.p(8),k.l0.pt(0)],children:(0,a.tZ)(Mn.zx,{type:"submit",text:"Rename",colorway:"primary",iconLeft:(0,a.tZ)(On.Z,{}),disabled:Boolean(r.error)||!r.value})})]})})})}var jn=n(9951),qn=n(59053),$n=j.Py.define(),Yn=j.Py.define();function Kn(e,t){void 0===t&&(t=e.state.selection.main.head),t>e.state.doc.length||(e.state.wordAt(t)?e.dispatch({effects:$n.of(t)}):(0,jn.J)(e,{message:"You cannot rename this element",offset:t}))}var Qn=j.QQ.define({create:function(){return null},update:function(e,t){if(null!==e&&(e=t.changes.mapPos(e,-1,j.gc.TrackDel)),(0,Ce.j)(t,$n,(function(t){e=t.value})),e){if(e>t.state.doc.length)return null;if(!t.state.wordAt(e))return null}return e},provide:function(e){var t=new pn.Jf(zn),n=function(t){var n=t.field(e);if(null==n)throw Error("Expected non-null offset");var r=t.wordAt(n);if(!r)throw new Error("Expected non-null range");return t.sliceDoc(r.from,r.to)},o=function(o){var a=o.state.field(e);if(null==a)throw Error("Expected non-null offset");if(!o.state.wordAt(a))throw new Error("Expected non-null range");var l=t.create({currentValue:n(o.state),onClose:function(){o.dispatch({effects:$n.of(null)}),o.focus()},onRename:function(e){o.dispatch({effects:Yn.of(e)})}});l.classList.add("replit-tooltip"),l.style.padding="0";return{dom:l,update:function(e){t.update(l,(function(t){var o=n(e.state);return o!==t.currentValue?(0,i.Z)((0,r.Z)({},t),{currentValue:o}):t}))}}};return q.hJ.from(e,(function(e){return null===e?null:{pos:e,create:o}}))}});function Jn(e,t){return q.lg.define((function(n){var r=null;return{onRename:function(i){return(0,H.Z)((function(){var o,a,l,c;return(0,V.__generator)(this,(function(u){switch(u.label){case 0:if(this.cancelInflightRequest(),!(o=n.state.facet(Dn.Yp)))throw new Error("Expected non-null file path");return(a=n.state.field(Qn))?(r=t.generateId(),[4,t.request.rename(o,(0,we.s)(n.state.doc,a),i,{id:r,tap:function(e){return(0,An.SC)(n,e)}})]):[2];case 1:if((l=u.sent()).cancelled)return[2];if("error"in l)throw new Error("Something went wrong renaming ".concat(l.error.message));return(c=l.result)?((0,qn.w)({edit:c,fs:e,client:t}),n.dispatch({effects:$n.of(null)}),[2]):[2]}}))})).apply(this)},cancelInflightRequest:function(){r&&(t.notify.cancelRequest(r),r=null)},update:function(e){var t=!0,n=!1,r=void 0;try{for(var i,o=e.transactions[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value,l=!0,c=!1,u=void 0;try{for(var s,d=a.effects[Symbol.iterator]();!(l=(s=d.next()).done);l=!0){var f=s.value;f.is(Yn)&&this.onRename(f.value)}}catch(p){c=!0,u=p}finally{try{l||null==d.return||d.return()}finally{if(c)throw u}}}}catch(p){n=!0,r=p}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}},destroy:function(){this.cancelInflightRequest()}}}))}var er=n(42256),tr=n(22917),nr=n(99935),rr={current:null};function ir(e){return or.apply(this,arguments)}function or(){return or=(0,H.Z)((function(e){var t,n,r,i,o,a,l,c,u,s,d,f,p,h,v,m,y,Z;return(0,V.__generator)(this,(function(b){switch(b.label){case 0:return t=e.offset,n=e.lspClient,r=e.openFile,i=e.view,o=e.newPane,(a=i.state.facet(Dn.Yp))?(0,J.Z)(n).isFindDefinitionSupported?(rr.current&&n.notify.cancelRequest(rr.current),rr.current=n.generateId(),l=(0,we.s)(i.state.doc,t),c=setTimeout((function(){var e;rr.current&&n.notify.cancelRequest(rr.current);var r=null!==(e=sn(i.state))&&void 0!==e?e:"unknown";Y.kg.warn("Timed out looking for definition",{filePath:a,offset:t,language:r}),(0,jn.J)(i,{message:"Timed out looking for your definition. Try again",offset:t})}),12e3),[4,n.request.findDefinitions(a,l,{id:rr.current,tap:function(e){return(0,An.SC)(i,e)}})]):[2]:[2];case 1:if(u=b.sent(),clearTimeout(c),rr.current=null,"error"in u)throw new Error("Something went wrong fetching definition location: ".concat(u.error.message));return u.cancelled?[2]:(s=(0,nr.g)(u.result))&&0!==s.length?(d=(0,g.Z)(s,1),f=d[0],p=f.uri,h=f.range,v=h.start,m=n.documentUriToPath(p),y=v.line+1,Z=v.character,m!==a||o?(r({path:m,line:y,col:Z,newPane:o,newPaneEdge:"right"}),[2]):((0,tr.S)({view:i,line:y,col:Z}),i.focus(),[2])):((0,jn.J)(i,{message:"No definition found",offset:t}),[2])}}))})),or.apply(this,arguments)}var ar=q.p.mark({class:"cm-lsp-definition-target-word"}),lr=q.tk.baseTheme({".cm-lsp-definition-target-word span":{backgroundColor:k.TV.backgroundHigher,color:k.TV.accentPrimaryStrongest,cursor:"pointer",textDecoration:"underline"}});var cr=n(22488);function ur(e){var t,n=e.fs,i=e.lspClient,o=e.path,l=e.decorations,c=e.openFile,u=e.askGhostwriter,s=(0,J.Z)(i),d=function(e){return function(t){setTimeout((function(){l.update((function(n){return n.set(e,t)}))}))}},f=[ht({lspClient:i,path:o}),Ct({lspClient:i,path:o,askGhostwriter:u})];return(0,cr.isMobile)()||(s.isAutoCompleteSupported&&f.push(function(e){var t=e.lspClient,n=e.path,i=e.setDecoration,o=Math.random()<.01,l=0,c=function(e,i){if(o){var a=t.getLanguageId(n);return Y.kg.info("lsp:autocomplete:".concat(e),(0,r.Z)({languageId:a},i)),(0,K.j)(K.U3.LSP_COMPLETION_USED,(0,r.Z)({type:e,sampleRate:.01},i))}};function u(){return u=(0,H.Z)((function(e){var r,o,a,u,s,d,f;return(0,V.__generator)(this,(function(p){switch(p.label){case 0:return(o=t.getServerCapabilities())?(a=(null===o||void 0===o||null===(r=o.completionProvider)||void 0===r?void 0:r.triggerCharacters)||[],(u=wn(e,a))?(l&&t.notify.cancelRequest(l),l=t.generateId(),[4,t.request.completion(n,(0,we.s)(e.state.doc,e.pos),u,{id:l})]):[2,null]):[2,null];case 1:return"error"in(s=p.sent())?[2,null]:(d=s.result,e.aborted?[2,null]:d?(f=Array.isArray(d)?d:d.items,[2,Cn({context:e,items:f,client:t,path:n,setDecoration:i,trackCompletion:c})]):[2,null])}}))})),u.apply(this,arguments)}return[mn,Zn,(0,ze.ys)({defaultKeymap:!1,closeOnBlur:!1,tooltipClass:function(e){return(0,un.Z)(e)?vn:""},addToOptions:[{render:function(e,t){if(!(0,un.Z)(t))return null;var n=document.createElement("div");return n.className="lsp-completion-keyboard-shortcuts",(0,It.createRoot)(n).render((0,a.tZ)(dn.C,{children:(0,a.tZ)(cn.ZP,{size:"inherit",shortcut:{key:"\u23ce"}})})),n},position:200}],override:[(0,ze.eC)(["LineComment","BlockComment"],(function(e){return u.apply(this,arguments)}))]}),Sn]}({setDecoration:d("autocomplete"),lspClient:i,path:o})),s.isSignatureHelpSupported&&f.push(rt({setDecoration:d("signatureSuggestion"),lspClient:i,path:o})),f.push(function(e){if(!(0,J.Z)(e).isHoverSupported)return[];var t=null,n=(0,q.bF)(function(){var n=(0,H.Z)((function(n,r){var i,o,a,l,c,u,s;return(0,V.__generator)(this,(function(d){switch(d.label){case 0:if(!(i=n.state.facet(Dn.Yp)))return[2,null];o=(0,we.s)(n.state.doc,r);try{a=n.state.wordAt(r)}catch(f){return[2,null]}if(t){if(t.from===(null===a||void 0===a?void 0:a.from)&&t.to===(null===a||void 0===a?void 0:a.to))return[2,null];e.notify.cancelRequest(t.id)}return l=e.generateId(),t={id:l,from:null===a||void 0===a?void 0:a.from,to:null===a||void 0===a?void 0:a.to},[4,e.request.hover(i,o,{id:l})];case 1:return c=d.sent(),t=null,u=e.getLanguageId(i),"error"in c||null===(s=c.result)?[2,null]:[2,Bn({hover:s,offset:r,state:n.state,languageId:u})]}}))}));return function(e,t){return n.apply(this,arguments)}}(),{hideOn:function(e){return!e.annotation(j.YW.remote)&&!!(e.isUserEvent("input")||e.isUserEvent("delete")||e.isUserEvent("select"))},hoverTime:0});return n}(i)),s.isCodeActionsSupported&&f.push((t={setDecoration:d("codeActions"),lspClient:i,path:o},[Ie,Ge(t)])),s.isFindDefinitionSupported&&c&&f.push(function(e){var t=e.lspClient,n=e.openFile;return q.tk.domEventHandlers({click:function(e,r){var i=r.state.selection.main;if(i.from!==i.to)return!1;if((0,er.j)(e)){var o=e.clientX,a=e.clientY,l=r.posAtCoords({x:o,y:a});if(null!==l){var c=e.altKey;return ir({offset:l,lspClient:t,openFile:n,view:r,newPane:c}),!1}}}})}({lspClient:i,openFile:c}),function(e){var t=e.filePath,n=e.lspClient,r={current:null},i=j.Py.define(),o=j.Py.define(),a=j.Py.define(),l=j.QQ.define({create:function(){return{keyDown:!1,mousePosition:null}},update:function(e,t){var n=!0,r=!1,a=void 0;try{for(var l,c=t.effects[Symbol.iterator]();!(n=(l=c.next()).done);n=!0){var u=l.value;u.is(i)&&(e.mousePosition=u.value),u.is(o)&&(e.keyDown=u.value)}}catch(s){r=!0,a=s}finally{try{n||null==c.return||c.return()}finally{if(r)throw a}}return e}}),c=j.QQ.define({create:function(){return{exists:!1,range:null}},update:function(e,t){var n=!0,r=!1,i=void 0;try{for(var o,l=t.effects[Symbol.iterator]();!(n=(o=l.next()).done);n=!0){var c=o.value;c.is(a)&&(e=c.value)}}catch(u){r=!0,i=u}finally{try{n||null==l.return||l.return()}finally{if(r)throw i}}return e}}),u=j.QQ.define({create:function(){return q.p.none},update:function(e,t){var n=t.state.field(l,!1);if(!n)return q.p.none;var r=n.keyDown,i=n.mousePosition;if(!r)return q.p.none;if(!i)return q.p.none;var o=t.state.field(c,!1);if(!o||!o.exists||!o.range)return q.p.none;var a=(0,we.R)(t.state.doc,o.range.start),u=(0,we.R)(t.state.doc,o.range.end);if(a===u)return q.p.none;var s=(0,we.R)(t.state.doc,i);return s<a||s>u?q.p.none:q.p.set(ar.range(a,u),!0)},provide:function(e){return q.tk.decorations.from(e)}}),s=q.lg.fromClass(function(){function e(t){(0,le.Z)(this,e),this.view=t,document.addEventListener("keydown",this.onKeyDown.bind(this)),document.addEventListener("keyup",this.onKeyUp.bind(this))}var t=e.prototype;return t.destroy=function(){document.removeEventListener("keydown",this.onKeyDown.bind(this)),document.removeEventListener("keyup",this.onKeyUp.bind(this))},t.onKeyDown=function(e){(0,er.j)(e)&&this.view.dispatch({effects:o.of(e.key===(G.V5?"Meta":"Control"))})},t.onKeyUp=function(e){(0,er.j)(e)&&this.view.dispatch({effects:o.of(!1)})},e}(),{eventHandlers:{mousemove:function(e,t){if(0!==e.buttons){var n=t.state.selection.main;if(n.from!==n.to)return void t.dispatch({effects:i.of(null)})}var r=e.clientX,a=e.clientY,l=t.posAtCoords({x:r,y:a}),c=null;null!=l&&(c=(0,we.s)(t.state.doc,l)),t.dispatch({effects:[i.of(c),o.of((0,er.j)(e))]})},click:function(e,t){var n;(null===(n=t.state.field(l,!1))||void 0===n?void 0:n.keyDown)&&t.dispatch({effects:o.of(!1)})}}}),d=q.tk.updateListener.of(function(){var e=(0,H.Z)((function(e){var i,o,u,s,d,f,p,h,v,m,g;return(0,V.__generator)(this,(function(y){switch(y.label){case 0:return(i=e.state.field(l)).keyDown&&i.mousePosition?(o=(0,we.R)(e.state.doc,i.mousePosition),!e.docChanged&&(u=e.state.field(c))&&u.range&&(s=(0,we.R)(e.state.doc,u.range.start),d=(0,we.R)(e.state.doc,u.range.end),o>=s&&o<=d)?[2]:(f=e.state.wordAt(o))?r.current&&(p=r.current.word,h=f.from===p.from,v=f.to===p.to,h&&v)?[2]:(r.current&&n.notify.cancelRequest(r.current.id),m=n.generateId(),r.current={id:m,word:f},g=(0,we.s)(e.state.doc,o),[4,n.request.findDefinitions(t,g,{id:m}).then((function(t){if(r.current=null,void 0!==t.cancelled&&!0!==t.cancelled)if(Array.isArray(t.result)&&t.result.length>0&&"originSelectionRange"in t.result[0]&&t.result[0].originSelectionRange)e.view.dispatch({effects:a.of({exists:!0,range:t.result[0].originSelectionRange})});else{var n=(0,nr.g)(t.result);if(n){var i=e.state.wordAt(o),l=n.length>0&&null!=i,c=null;if(i){var u=(0,we.s)(e.state.doc,i.from),s=(0,we.s)(e.state.doc,i.to);c=$e.Range.create(u,s)}e.view.dispatch({effects:a.of({exists:l,range:c})})}}}))]):[2]):[2];case 1:return y.sent(),[2]}}))}));return function(t){return e.apply(this,arguments)}}());return[lr,d,s,l,c,u]}({lspClient:i,filePath:o})),(s.isFindDefinitionSupported||s.isFindReferencesSupported)&&c&&f.push((0,Pn.w)({setDecoration:d("tooltip"),lspClient:i,path:o,openFile:c})),f.push(function(e,t){return(0,J.Z)(t).isRenameSupported?[Qn,Jn(e,t)]:[]}(n,i))),f}var sr=n(67530),dr=n(52364),fr=n(66769),pr=n(38335),hr=n(45317),vr=n(96028),mr=RegExp(".*?```(\\w+)\\n(.*?)(?:$|\\n$|\\n`$|\\n``$|\\n```)","gs"),gr=function(e){for(var t,n=[];null!==(t=mr.exec(e));){var r=t[1],i=t[2];n.push({language:r,code:i})}return n},yr=(0,hn.X)({inlinePocketContainer:[k.l0.width("100%"),k.l0.backgroundColor.backgroundRoot,k.l0.position.relative],caretWrapper:[k.l0.position.absolute,k.l0.height("fit-content"),k.l0.display.flex,k.l0.flex.row,k.l0.align.center],inlinePocketWrapper:[k.l0.font.default,k.l0.p(16),{borderTopWidth:k.TV.borderWidthDefault,borderBottomWidth:k.TV.borderWidthDefault,borderStyle:"solid",borderColor:k.TV.accentPrimaryDefault}],headerContainer:[k.l0.rowWithGap(4),k.l0.py(4),k.l0.align.center],authorContainer:[k.l0.flex.growAndShrink(1)],inputContainer:[k.l0.p(4),k.l0.py(8),k.l0.rowWithGap(4),k.l0.align.center],input:[{height:28,width:"100%",resize:"vertical"}],messageActionContainer:[k.l0.rowReverseWithGap(4)],messageContainer:[k.l0.rowWithGap(8),k.l0.align.center],messageMarkdown:[k.l0.colWithGap(8),k.l0.py(8),k.l0.flex.growAndShrink(1),{whiteSpace:"normal"}],messageError:[k.l0.px(8)],messageText:[k.l0.color.accentNegativeStronger,k.l0.fontSize(16)]}),Zr=n(34204),br=n(95434),wr=n(39137),xr=n(54414),kr=n(32104),Cr=n(48667),Sr=function(e){var t=e.isLoading,n=e.autoFocus,r=e.sendDisabled,i=e.onSend,o=e.onRegenerate,l=function(){requestAnimationFrame((function(){v()})),i(s,s===g.current),g.current=s},c=(0,b.useId)(),u=(0,b.useState)(""),s=u[0],d=u[1],f=(0,b.useRef)(null),p=(0,br.Z)(),h=p.ref,v=p.update,m=(0,b.useCallback)((function(){var e;null===(e=f.current)||void 0===e||e.focus()}),[]),g=(0,b.useRef)(null),y=!t&&s===g.current;return(0,b.useLayoutEffect)((function(){n&&m()})),(0,a.BX)(x.G,{css:yr.inputContainer,children:[(0,a.tZ)(wr.B,{dataCy:"ghostwriter-inline-input",id:c,ref:(0,Zr.lq)(h,f),css:yr.input,autoSize:!0,placeholder:"Write your prompt",value:s,onKeyDown:function(e){"Enter"===e.key&&(e.preventDefault(),e.shiftKey?(d((function(e){var t,n;return e.slice(0,null===f||void 0===f||null===(t=f.current)||void 0===t?void 0:t.selectionStart)+"\n"+e.slice(null===f||void 0===f||null===(n=f.current)||void 0===n?void 0:n.selectionEnd,e.length)})),requestAnimationFrame((function(){v()}))):l())},onChange:function(e){return d(e.currentTarget.value)}}),y?(0,a.tZ)(Nn.h,{alt:"Regenerate",size:28,onClick:function(){o(),l()},children:(0,a.tZ)(Cr.Z,{})}):(0,a.tZ)(Nn.h,{dataCy:"ghostwriter-inline-submit",alt:"Send message",size:28,type:"submit",onClick:l,disabled:t||r,children:t?(0,a.tZ)(kr.Z,{}):(0,a.tZ)(xr.Z,{})})]})},Tr=n(54873),Er=n(44090),Rr=n(5293),Gr=function(){(0,K.j)(K.U3.GHOSTWRITER_CHAT_INLINE_REGENERATED,{action:"GENERATE"})},Ir=function(e){var t=e.codeReference,n=e.onClose,r=e.updateCodeBlock,i=e.insertCode,o=e.autoFocus,l=e.onLoadingChanged,c=(0,dr.ql)(),u=(0,Rr.$0)(),s=(0,Rr.PM)(),d=(0,vr.oQ)(t.filePath),f=(0,dr.gp)(),p=Boolean(null===d||void 0===d?void 0:d.loading),h=(0,b.useRef)(null);(0,b.useLayoutEffect)((function(){var e;d&&!f&&(null===(e=h.current)||void 0===e||e.focus())}),[f,d]),(0,b.useEffect)((function(){l(p)}),[p,l]);var v=(0,b.useMemo)((function(){if(!(null===d||void 0===d?void 0:d.text))return null;var e=gr((null===d||void 0===d?void 0:d.text)||"");return e.length>0?e[0].code:null}),[null===d||void 0===d?void 0:d.text]);(0,b.useEffect)((function(){return r(v)}),[v,r]);var m=(0,me.Z)((function(){return(0,Er.BW)(null===d||void 0===d?void 0:d.id)}),[null===d||void 0===d?void 0:d.id]),g=null,y="Assistant"===(null===d||void 0===d?void 0:d.attribution)&&"string"===typeof(null===d||void 0===d?void 0:d.error),Z=!v&&!f;return d&&!(!y&&!Z)&&(g=(0,a.tZ)(x.G,{css:[yr.messageContainer],children:(0,a.BX)(x.G,{css:yr.messageMarkdown,children:[Z?(0,a.tZ)(pr.J,{text:d.text,textColor:hr.TV.foregroundDefault,codeComponent:m}):null,y?(0,a.tZ)(x.G,{css:yr.messageError,children:(0,a.tZ)(fe.xv,{css:yr.messageText,children:d.error})}):null]})})),(0,a.BX)(x.G,{children:[(0,a.BX)(x.G,{css:yr.headerContainer,children:[(0,a.tZ)(x.G,{css:yr.authorContainer,children:(0,a.tZ)(fr.z,{author:{username:"Ghostwriter",image:"/public/images/ghostwriter/blurple-circle.svg"},intent:"GENERATE",smallAvatar:!0})}),(0,a.tZ)(Nn.h,{alt:"Close",onClick:n,type:"button",children:(0,a.tZ)(Fn.Z,{})})]}),(0,a.tZ)(Sr,{isLoading:p,autoFocus:o,sendDisabled:f,onSend:function(){var e=(0,H.Z)((function(e){return(0,V.__generator)(this,(function(n){switch(n.label){case 0:return[4,c({chatMessage:{type:"generateCode",text:e,codeReference:t}})];case 1:return n.sent(),[2]}}))}));return function(t){return e.apply(this,arguments)}}(),onRegenerate:Gr}),g,d&&!f?(0,a.BX)(x.G,{css:yr.messageActionContainer,children:[(0,a.tZ)(Mn.zx,{dataCy:"ghostwriter-inline-accept-suggestion",ref:h,colorway:"primary",text:"Accept Suggestion",iconLeft:(0,a.tZ)(On.Z,{}),onClick:function(){v?(i(v),(null===d||void 0===d?void 0:d.id)&&(u(d.id),s(t.filePath)),(0,K.j)(K.U3.GHOSTWRITER_CHAT_INLINE_ACCEPTED,{action:"GENERATE"})):n()}}),(0,a.tZ)(Mn.zx,{text:"Discard",iconLeft:(0,a.tZ)(Tr.Z,{}),onClick:function(){(0,K.j)(K.U3.GHOSTWRITER_CHAT_INLINE_DISCARDED,{action:"GENERATE"}),n()}})]}):null]})},_r=n(47648),Dr=function(){(0,K.j)(K.U3.GHOSTWRITER_CHAT_INLINE_REGENERATED,{action:"TRANSFORM"})},Br=function(e){var t=e.codeReference,n=e.replaceHighlightedAreaWithCode,r=e.updateCodeBlock,i=e.onClose,o=e.autoFocus,l=e.onLoadingChanged,c=(0,dr.ql)(),u=(0,_r.iH)(t.filePath),s=(0,dr.gp)(),d=Boolean(null===u||void 0===u?void 0:u.loading),f=(0,b.useRef)(null);(0,b.useLayoutEffect)((function(){var e;u&&!s&&(null===(e=f.current)||void 0===e||e.focus())}),[s,u]),(0,b.useEffect)((function(){l(d)}),[d,l]);var p=(0,b.useMemo)((function(){if(!(null===u||void 0===u?void 0:u.text))return null;var e=gr((null===u||void 0===u?void 0:u.text)||"");return e.length>0?e[0].code:null}),[null===u||void 0===u?void 0:u.text]);(0,b.useEffect)((function(){return r(p)}),[p,r]);var h=(0,me.Z)((function(){return(0,Er.BW)(null===u||void 0===u?void 0:u.id)}),[null===u||void 0===u?void 0:u.id]),v=null,m="Assistant"===(null===u||void 0===u?void 0:u.attribution)&&"string"===typeof(null===u||void 0===u?void 0:u.error),g=!p&&!s;return u&&!(!m&&!g)&&(v=(0,a.tZ)(x.G,{css:[yr.messageContainer],children:(0,a.BX)(x.G,{css:yr.messageMarkdown,children:[g?(0,a.tZ)(pr.J,{text:u.text,textColor:hr.TV.foregroundDefault,codeComponent:h}):null,m?(0,a.tZ)(x.G,{css:yr.messageError,children:(0,a.tZ)(fe.xv,{css:yr.messageText,children:u.error})}):null]})})),(0,a.BX)(x.G,{children:[(0,a.BX)(x.G,{css:yr.headerContainer,children:[(0,a.tZ)(x.G,{css:yr.authorContainer,children:(0,a.tZ)(fr.z,{author:{username:"Ghostwriter",image:"/public/images/ghostwriter/blurple-circle.svg"},intent:"TRANSFORM",smallAvatar:!0})}),(0,a.tZ)(Nn.h,{alt:"Close",onClick:i,type:"button",children:(0,a.tZ)(Fn.Z,{})})]}),(0,a.tZ)(Sr,{isLoading:d,autoFocus:o,sendDisabled:s,onSend:function(){var e=(0,H.Z)((function(e){return(0,V.__generator)(this,(function(n){switch(n.label){case 0:return[4,c({chatMessage:{type:"transformCode",text:e,codeReference:t}})];case 1:return n.sent(),[2]}}))}));return function(t){return e.apply(this,arguments)}}(),onRegenerate:Dr}),v,u&&!s?(0,a.BX)(x.G,{css:yr.messageActionContainer,children:[(0,a.tZ)(Mn.zx,{dataCy:"ghostwriter-inline-accept-suggestion",ref:f,colorway:"primary",text:"Accept Suggestion",iconLeft:(0,a.tZ)(On.Z,{}),onClick:function(){p?(n(p),(0,K.j)(K.U3.GHOSTWRITER_CHAT_INLINE_ACCEPTED,{action:"TRANSFORM"})):i()}}),(0,a.tZ)(Mn.zx,{text:"Discard",iconLeft:(0,a.tZ)(Tr.Z,{}),onClick:function(){(0,K.j)(K.U3.GHOSTWRITER_CHAT_INLINE_DISCARDED,{action:"TRANSFORM"}),i()}})]}):null]})},Pr=n(67036),Ar=n(63026),Lr=function(e){var t=e.codeReference,n=e.onClose,r=e.onLoadingChanged,i=(0,dr.Gd)(),o=(0,Rr.OT)(),l=(0,Ar.j)(t.filePath),c=(0,dr.gp)(),u=Boolean(null===l||void 0===l?void 0:l.loading);(0,b.useEffect)((function(){r(u)}),[u,r]);var s=null,d=(0,me.Z)((function(){return(0,Er.BW)(null===l||void 0===l?void 0:l.id)}),[null===l||void 0===l?void 0:l.id]);if(l){var f=l.attribution,p=l.loading,h=l.error,v="Assistant"===f;s=(0,a.BX)(x.G,{css:[yr.messageContainer,p&&k.l0.px(16)],children:[p?(0,a.tZ)(kr.Z,{}):null,(0,a.BX)(x.G,{css:yr.messageMarkdown,children:[(0,a.tZ)(pr.J,{text:l.text,textColor:hr.TV.foregroundDefault,codeComponent:d}),v&&"string"===typeof h?(0,a.tZ)(x.G,{css:yr.messageError,children:(0,a.tZ)(fe.xv,{css:yr.messageText,children:h})}):null]})]})}return(0,a.BX)(x.G,{children:[(0,a.BX)(x.G,{css:yr.headerContainer,children:[(0,a.tZ)(x.G,{css:yr.authorContainer,children:(0,a.tZ)(fr.z,{author:{username:"Ghostwriter",image:"/public/images/ghostwriter/blurple-circle.svg"},intent:"EXPLAIN",smallAvatar:!0})}),(0,a.tZ)(Nn.h,{dataCy:"ghostwriter-inline-close",alt:"Close",onClick:n,type:"button",children:(0,a.tZ)(Fn.Z,{})})]}),s,s&&!c?(0,a.BX)(x.G,{css:yr.messageActionContainer,children:[(0,a.tZ)(Mn.zx,{dataCy:"ghostwriter-inline-reply-in-chat",colorway:"primary",text:"Reply in Chat",iconLeft:(0,a.tZ)(Pr.Z,{}),onClick:function(){(0,K.j)(K.U3.GHOSTWRITER_CHAT_INLINE_REPLY_IN_CHAT),o()}}),(0,a.tZ)(Mn.zx,{text:"Retry",iconLeft:(0,a.tZ)(Cr.Z,{}),onClick:function(){l&&((0,K.j)(K.U3.GHOSTWRITER_CHAT_INLINE_REGENERATED,{action:"EXPLAIN"}),i({responseId:l.id,action:"EXPLAIN"}))}})]}):null]})},Ur=n(21084),Xr=n(72338),Mr=n(69341),Nr=function(e){var t=e.caretSize,n=void 0===t?[8,12]:t,o=(0,mt.Z)(e,["caretSize"]);return(0,a.BX)("svg",(0,i.Z)((0,r.Z)({width:n[0],height:n[1],viewBox:"0 0 12 8",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o),{children:[(0,a.tZ)("mask",{id:"outline",fill:"white",children:(0,a.tZ)("path",{d:"M0 8L5.2 1.06667C5.6 0.533333 6.40033 0.533776 6.80033 1.06711C8.67223 3.56297 9.93719 5.24959 12 8H0Z"})}),(0,a.tZ)("path",{d:"M0 8L5.2 1.06667C5.6 0.533333 6.40033 0.533776 6.80033 1.06711C8.67223 3.56297 9.93719 5.24959 12 8H0Z",fill:"url(#gradient-fill)"}),(0,a.tZ)("path",{d:"M0 8L-0.8 7.4L-2 9H0V8ZM12 8V9H14L12.8 7.4L12 8ZM5.2 1.06667L4.4 0.466667L5.2 1.06667ZM6.80033 1.06711L6.00033 1.66711L6.80033 1.06711ZM12 7H0V9H12V7ZM0.8 8.6L6 1.66667L4.4 0.466667L-0.8 7.4L0.8 8.6ZM6.00033 1.66711C7.87223 4.16297 9.13719 5.84959 11.2 8.6L12.8 7.4C10.7372 4.64959 9.47223 2.96297 7.60033 0.467109L6.00033 1.66711ZM6 1.66667L6.00033 1.66711L7.60033 0.467109C6.80082 -0.598902 5.20049 -0.600655 4.4 0.466667L6 1.66667Z",fill:"#0079F2",mask:"url(#outline)"}),(0,a.tZ)("defs",{children:(0,a.BX)("linearGradient",{id:"gradient-fill",x1:"5.07692",y1:"0",x2:"5.07692",y2:"21.3333",gradientUnits:"userSpaceOnUse",children:[(0,a.tZ)("stop",{stopColor:"#57ABFF"}),(0,a.tZ)("stop",{offset:"1",stopColor:"#0079F2"})]})})]}))},Or=function(e){var t=e.children,n=e.onEscapeKey,r=e.caretPosition,i=[12,8];switch((0,Rn.Z)().preferences.fontSize){case 10:i=[8,6];break;case 14:i=[10,6];break;case 18:i=[12,8];break;case 24:i=[14,10]}return(0,a.BX)(x.G,{css:yr.inlinePocketContainer,onKeyDown:function(e){"Escape"===e.key&&n()},children:[null!==r&&(0,a.tZ)("span",{css:[yr.caretWrapper,k.l0.top(-i[1]),k.l0.left(r)],children:(0,a.tZ)(Nr,{caretSize:i})}),(0,a.tZ)(x.G,{css:yr.inlinePocketWrapper,children:t})]})};function Fr(e){var t=e.state.field(Wr);if(t){var n=t.type;return"explainCode"===n?(0,K.j)(K.U3.GHOSTWRITER_CHAT_INLINE_CLOSED,{action:"EXPLAIN"}):"generateCode"===n?(0,K.j)(K.U3.GHOSTWRITER_CHAT_INLINE_CLOSED,{action:"GENERATE"}):"transformCode"===n&&(0,K.j)(K.U3.GHOSTWRITER_CHAT_INLINE_CLOSED,{action:"TRANSFORM"}),e.dispatch({effects:Xr.Q.of(null)}),!0}return!1}var Wr=j.QQ.define({create:function(){return null},update:function(e,t){if((0,Ce.j)(t,Xr.Q,(function(t){e=t.value?{codeReference:t.value.codeReference,type:t.value.type,loading:t.value.loading,data:t.value.data}:null})),!e||t.changes.empty)return e;var n=e.codeReference.range.indexFrom>t.newDoc.length?t.newDoc.length:t.changes.mapPos(e.codeReference.range.indexFrom),o=e.codeReference.range.indexTo>t.newDoc.length?t.newDoc.length:t.changes.mapPos(e.codeReference.range.indexTo);return n>=o?null:e=(0,i.Z)((0,r.Z)({},e),{codeReference:(0,i.Z)((0,r.Z)({},e.codeReference),{range:{indexFrom:n,indexTo:o,lineFrom:t.newDoc.lineAt(n).number,lineTo:t.newDoc.lineAt(o).number}})})},provide:function(e){return[j.Wl.highest(q.$f.of([{key:"Escape",run:Fr}])),An.gb.from(e,(function(e){var t;return null!==(t=(null===e||void 0===e?void 0:e.loading)&&e.codeReference.range.indexFrom===e.codeReference.range.indexTo)&&void 0!==t?t:null}))]}}),Hr=j.QQ.define({create:function(){return null},update:function(e,t){if(!t.state.field(Wr))return null;var n=!0,r=!1,i=void 0;try{for(var o,a=t.effects[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value;l.is(Xr.Q)&&(e=null),l.is(Xr.h)&&(e=l.value)}}catch(c){r=!0,i=c}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return e}}),Vr=n(59066),zr={explainCode:{intent:"EXPLAIN",userFriendlyName:"Explain Code",activationContext:"inline_explain_code"},generateCode:{intent:"GENERATE",userFriendlyName:"Generate Code",activationContext:"inline_generate_code"},editCode:{intent:"TRANSFORM",userFriendlyName:"Edit Code",activationContext:"inline_edit_code"}},jr=function(e){var t=e.data,n=e.onClose,r=t.from,i=zr[r],o=i.intent,l=i.userFriendlyName,c=i.activationContext;return(0,a.BX)(x.G,{children:[(0,a.BX)(x.G,{css:yr.headerContainer,children:[(0,a.tZ)(x.G,{css:yr.authorContainer,children:(0,a.tZ)(fr.z,{author:{username:"Ghostwriter",image:"/public/images/ghostwriter/blurple-circle.svg"},intent:o,smallAvatar:!0})}),(0,a.tZ)(Nn.h,{alt:"Close",onClick:n,type:"button",children:(0,a.tZ)(Fn.Z,{})})]}),(0,a.tZ)(x.G,{css:yr.messageContainer,children:(0,a.tZ)(x.G,{css:yr.messageMarkdown,children:(0,a.tZ)(pr.J,{text:"Activate Ghostwriter to get access to ".concat(l," and other AI-powered features!"),textColor:k.TV.foregroundDefault})})}),(0,a.tZ)(x.G,{css:yr.messageActionContainer,children:(0,a.tZ)(Vr.Z,{context:c})})]})},qr=n(81202),$r=n.n(qr),Yr=n(10103),Kr=n(94178),Qr=function(e){var t=e.onClose;return(0,a.BX)(x.G,{children:[(0,a.BX)(x.G,{css:yr.headerContainer,children:[(0,a.tZ)(x.G,{css:yr.authorContainer,children:(0,a.tZ)(fr.z,{author:{username:"Ghostwriter",image:"/public/images/ghostwriter/blurple-circle.svg"},intent:"NONE",smallAvatar:!0})}),(0,a.tZ)(Nn.h,{alt:"Close",onClick:t,type:"button",children:(0,a.tZ)(Fn.Z,{})})]}),(0,a.tZ)(x.G,{css:yr.messageContainer,children:(0,a.tZ)(Kr.Z,{textVariant:"text",showImage:!1})})]})},Jr=j.Py.define(),ei=j.Py.define(),ti=function(e,t,n){var r=e.state.selection.main.head;e.dispatch({changes:{from:e.state.selection.main.from,insert:t},selection:{anchor:r+t.length},effects:Jr.of(null),scrollIntoView:n,annotations:Yr.Z.of(!0)})},ni=j.QQ.define({create:function(){return null},update:function(e,t){e&&(e=e.map(t.changes));var n=!0,r=!1,i=void 0;try{for(var o,a=t.effects[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value;l.is(Jr)&&(e=t.changes.invert(t.startState.doc)),l.is(ei)&&(e=null)}}catch(c){r=!0,i=c}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return e}});function ri(e,t,n){var r=e.selection.main,i=e.sliceDoc(r.from,r.to),o=(0,ie.r6)(t);return{code:i,filePath:t,fileVersion:n,range:{indexFrom:r.from,indexTo:r.to,lineFrom:e.doc.lineAt(r.from).number,lineTo:e.doc.lineAt(r.to).number},language:o}}var ii=new pn.Jf((function(e){var t=e.codeReference,n=e.type,r=e.data,i=e.autoFocus,o=e.insertCode,l=e.replaceHighlightedAreaWithCode,c=e.updateCodeBlock,u=e.onClose,s=e.getCaretPosition,d=e.onLoadingChanged,f=function(){(0,K.j)(K.U3.GHOSTWRITER_CHAT_INLINE_CLOSED,{action:"EXPLAIN"}),u()},p=function(){(0,K.j)(K.U3.GHOSTWRITER_CHAT_INLINE_CLOSED,{action:"GENERATE"}),u()},h=function(){(0,K.j)(K.U3.GHOSTWRITER_CHAT_INLINE_CLOSED,{action:"TRANSFORM"}),u()},v=null,m=s(t);return"explainCode"===n?v=(0,a.tZ)(Or,{caretPosition:m,onEscapeKey:f,children:(0,a.tZ)(Lr,{codeReference:t,onClose:f,onLoadingChanged:d})}):"generateCode"===n?v=(0,a.tZ)(Or,{caretPosition:m,onEscapeKey:p,children:(0,a.tZ)(Ir,{codeReference:t,onClose:p,insertCode:o,autoFocus:i,updateCodeBlock:c,onLoadingChanged:d})}):"transformCode"===n?v=(0,a.tZ)(Or,{caretPosition:m,onEscapeKey:h,children:(0,a.tZ)(Br,{codeReference:t,onClose:h,autoFocus:i,replaceHighlightedAreaWithCode:l,updateCodeBlock:c,onLoadingChanged:d})}):"ghostwriterPaywall"===n?v=(0,a.tZ)(Or,{caretPosition:m,onEscapeKey:u,children:(0,a.tZ)(jr,{onClose:u,data:r})}):"ghostwriterKillswitch"===n&&(v=(0,a.tZ)(Or,{caretPosition:m,onEscapeKey:u,children:(0,a.tZ)(Qr,{onClose:u})})),(0,a.tZ)(Mr.Z,{bsod:!0,tags:{ai:!0},extras:{type:n},origin:"ErrorBoundary: InlineAiWidget",children:v})})),oi=function(e){(0,ce.Z)(n,e);var t=(0,ue.Z)(n);function n(e){var r,i=e.codeReference,o=e.type,a=e.data;return(0,le.Z)(this,n),(r=t.call(this)).codeReference=i,r.type=o,r.data=a,r}var o=n.prototype;return o.toDOM=function(e){var t=this,n=t.codeReference,o=t.type,a=t.data,l=ii.create({codeReference:n,data:a,type:o,onClose:function(){e.dispatch({effects:Xr.Q.of(null)}),e.dispatch({selection:{anchor:n.range.indexTo,head:n.range.indexTo}}),e.hasFocus||e.focus()},insertCode:function(t){ti(e,t,!0),e.dispatch({effects:Xr.Q.of(null)}),e.hasFocus||e.focus()},replaceHighlightedAreaWithCode:function(t){e.dispatch({changes:{from:n.range.indexFrom,to:n.range.indexTo,insert:t},scrollIntoView:!0,effects:Xr.Q.of(null),annotations:Yr.Z.of(!0)}),e.hasFocus||e.focus()},updateCodeBlock:function(t){e.dispatch({effects:Xr.h.of(t)})},autoFocus:!0,getCaretPosition:function(t){var n,r=t.range.indexTo<=e.state.doc.length?null===(n=e.coordsAtPos(t.range.indexTo))||void 0===n?void 0:n.left:null,i=e.dom.getBoundingClientRect().left;return r&&i?r-i-6:null},onLoadingChanged:function(t){var n=e.state.field(Wr);n&&n.loading!==t&&e.dispatch({effects:Xr.Q.of((0,i.Z)((0,r.Z)({},n),{loading:t}))})}});l.className="cm-pocket-widget";var c=e.dom.querySelector(".cm-scroller"),u=e.dom.querySelector(".cm-gutters");return c&&u&&ai(l,c,u),l},o.updateDOM=function(e){var t=this;return ii.update(e,(function(e){return(0,r.Z)({},e,{codeReference:t.codeReference,type:t.type,data:t.data,autoFocus:!1})})),!0},o.eq=function(e){return this.codeReference.range.indexFrom===e.codeReference.range.indexFrom&&this.codeReference.range.indexTo===e.codeReference.range.indexTo&&this.codeReference.filePath===e.codeReference.filePath&&this.codeReference.fileVersion===e.codeReference.fileVersion&&this.type===e.type&&$r()(this.data,e.data)},n}(q.l9);function ai(e,t,n){var r=t.clientWidth,i=n.clientWidth;e.style.maxWidth="".concat(r,"px"),e.style.position="sticky",e.style.zIndex="201",e.style.marginLeft="-".concat(i,"px")}var li=q.tk.updateListener.of((function(e){(0,Ce.j)(e,Ur.R,(function(){var t=(0,o.Z)(e.view.dom.querySelectorAll(".cm-pocket-widget")),n=e.view.dom.querySelector(".cm-scroller"),r=e.view.dom.querySelector(".cm-gutters");if(t.length&&n&&r){var i=!0,a=!1,l=void 0;try{for(var c,u=t[Symbol.iterator]();!(i=(c=u.next()).done);i=!0){ai(c.value,n,r)}}catch(s){a=!0,l=s}finally{try{i||null==u.return||u.return()}finally{if(a)throw l}}}}))})),ci=n(18180),ui=n(91669),si=n(4385),di=RegExp("_(?<num>\\d+)$");function fi(e,t){return pi.apply(this,arguments)}function pi(){return pi=(0,H.Z)((function(e,t){var n,r,i,o;return(0,V.__generator)(this,(function(a){switch(a.label){case 0:return n=(0,ie.Il)(t),[4,e.readDir(n||".")];case 1:return(r=a.sent()).error?[2,t]:(i=function(e){if(r.children.find((function(t){return"FILE"===t.type&&t.filename===e}))){var t,n=(0,ie.eb)(e),o=(0,ie.r6)(e),a=n.match(di);if(null===a||void 0===a||null===(t=a.groups)||void 0===t?void 0:t.num){var l=Number(a.groups.num);return i("".concat(n.replace(di,""),"_").concat(l+1,".").concat(o))}return i("".concat(n,"_2.").concat(o))}return e},o=i((0,ie.UO)(t)),[2,n?n+"/"+o:o])}}))})),pi.apply(this,arguments)}var hi=n(22011),vi=function(){var e=(0,H.Z)((function(e,t,n){var r,i,o,a,l,c;return(0,V.__generator)(this,(function(u){switch(u.label){case 0:return r=encodeURI(e.name),i=(0,ie.Il)(n),[4,fi(t,i?i+"/"+r:r)];case 1:return o=u.sent(),[4,(0,ui.pV)(e)];case 2:return a=u.sent(),[4,t.writeFile(o,hi.Z.from(a))];case 3:return u.sent(),l=(0,ie.eb)(e.name),c=(0,ie.UO)(o),[2,"![".concat(l,"](").concat(c,")")]}}))}));return function(t,n,r){return e.apply(this,arguments)}}(),mi=n(55143);function gi(e){var t=e.view,n=e.event,r=e.clipboardText,i=e.filePath,o=t.state.selection,a=function(){if(!n){var e=r||"";if(o.main.empty){var i=o.main.from+e.length;t.dispatch({changes:[{from:o.main.from,insert:e}],selection:j.jT.range(i,i)})}else t.dispatch(t.state.replaceSelection(e))}};if(i&&(0,ie.gK)(i))if(o.ranges.length>1)a();else if(o.main.from!==o.main.to)if(r&&(0,si.Z)(r)){n&&n.preventDefault();var l=t.state.sliceDoc(o.main.from,o.main.to),c="[".concat(l,"](").concat(r,")"),u=o.main.from+c.length;t.dispatch({changes:{from:o.main.from,to:o.main.to,insert:c},selection:j.jT.range(u,u)})}else a();else a();else a()}var yi=q.tk.domEventHandlers({paste:function(e,t){var n;gi({filePath:t.state.facet(Dn.Yp),view:t,event:e,clipboardText:null===(n=e.clipboardData)||void 0===n?void 0:n.getData("Text")})}}),Zi=new mi.j((function(e,t){return q.tk.domEventHandlers({paste:function(n,r){var i,o=r.state.facet(Dn.Yp),a=null===n||void 0===n||null===(i=n.clipboardData)||void 0===i?void 0:i.files,l=function(e){var t=r.state.selection.main.head;r.dispatch({changes:{from:t,insert:e},selection:{anchor:t,head:t+e.length}})};if(a){var c=!0,u=!1,s=void 0;try{for(var d,f=a[Symbol.iterator]();!(c=(d=f.next()).done);c=!0){var p=d.value;e?(0,ui.L0)(p).then((function(e){return l('"'+e+'"')})):o&&(0,ie.gK)(o)&&vi(p,t,o).then(l)}}catch(h){u=!0,s=h}finally{try{c||null==f.return||f.return()}finally{if(u)throw s}}}}})}));function bi(e){var t=[],n=[],r=!1,i=!0,o=!1,a=void 0;try{for(var l,c=e.selection.ranges[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var u=l.value;u.empty||(t.push(e.sliceDoc(u.from,u.to)),n.push(u))}}catch(y){o=!0,a=y}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}if(!t.length){var s=-1,d=!0,f=!1,p=void 0;try{for(var h,v=e.selection.ranges[Symbol.iterator]();!(d=(h=v.next()).done);d=!0){var m=h.value.from,g=e.doc.lineAt(m);g.number>s&&(t.push(g.text),n.push({from:g.from,to:Math.min(e.doc.length,g.to+1)})),s=g.number}}catch(y){f=!0,p=y}finally{try{d||null==v.return||v.return()}finally{if(f)throw p}}r=!0}return{text:t.join(e.lineBreak),ranges:n,linewise:r}}function wi(e){var t=e.view,n=e.mainSelection,r=e.codeReference;t.dispatch({selection:{anchor:n.to},effects:[Xr.Q.of({codeReference:r,type:"ghostwriterKillswitch"}),q.tk.scrollIntoView(n.to,{y:"center"})]})}function xi(e){var t=e.view,n=e.filePath,r=e.openFile,i=(0,Q.Z)(n),o=b.useRef(null),a=b.useRef(0),l=(0,te.Z)().fs,c=(0,g.Z)(b.useState(null),2),u=c[0],s=c[1],d=(0,g.Z)(b.useState(!1),2),f=d[0],p=d[1],h=(0,_.d)({tablet:!1}),v=(0,ci.d)(),m=(0,vr.eD)(),y=(0,_r.Ef)(),Z=(0,dr.ql)(),w=(0,En.P5)({controlName:"flag-killswitch-ghostwriter-chat",logFlagToAnalytics:!1});b.useLayoutEffect((function(){f&&(null===t||void 0===t||t.focus(),p(!1))}),[t,f]);var x=b.useCallback((function(){s(null),p(!0)}),[]);b.useEffect((function(){var e=function(e){"Escape"===e.key&&x()};if(u)return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[x,u]),b.useEffect((function(){if(t&&u)return t.scrollDOM.addEventListener("scroll",x),function(){t.scrollDOM.removeEventListener("scroll",x)}}),[t,u,x]);var k=(0,$.Z)((function(){if(t&&u){var e=t.coordsAtPos(a.current);s((function(t){return e?{x:e.left,y:e.top}:t}))}}),{type:"throttle",wait:25}),C=b.useCallback(function(){var e=(0,H.Z)((function(e,a){var c,u,s,d,f,p,h,b,x,k,C,S,T,E,R,G,I,_,D,B,P,A,L,U,X;function M(e,t,n){return N.apply(this,arguments)}function N(){return(N=(0,H.Z)((function(e,r,a){var l,u,d,f,p,h,v,m,y;return(0,V.__generator)(this,(function(Z){switch(Z.label){case 0:if(!i||!t)throw new Error("Expected client");return o.current&&i.notify.cancelRequest(o.current),o.current=i.generateId(),l=(0,we.s)(c.doc,s),[4,e(n,l,{id:o.current,tap:function(e){return(0,An.SC)(t,e)}})];case 1:if(u=Z.sent(),o.current=null,"error"in u)throw new Error("Something went wrong fetching location: ".concat(u.error.message));return u.cancelled?[2]:(d=(0,nr.g)(u.result))&&0!==d.length?(f=(0,g.Z)(d,1),p=f[0],h=p.uri,v=p.range,m=v.start,(y=i.documentUriToPath(h))!==n?a({path:y,line:m.line+1,col:m.character}):(0,tr.S)({view:t,line:m.line+1,col:m.character}),[2]):((0,jn.J)(t,{message:r,offset:s}),[2])}}))}))).apply(this,arguments)}return(0,V.__generator)(this,(function(o){switch(o.label){case 0:if(!t)throw new Error("Expected view");switch(c=t.state,u=c.selection.main,s=u.head,(0,K.j)(K.U3.EDITOR_CONTEXT_MENU_ACTION_RAN,{action:e}),e){case W.D2.Cut:return[3,1];case W.D2.Copy:return[3,2];case W.D2.Paste:return[3,3];case W.D2.JumpToDefinition:return[3,8];case W.D2.JumpToTypeDefinition:return[3,10];case W.D2.JumpToImplementation:return[3,12];case W.D2.FindReferences:return[3,14];case W.D2.Rename:return[3,15];case W.D2.SelectAllOccurrences:return[3,16];case W.D2.CodeActions:return[3,17];case W.D2.ToggleBreakpoint:return[3,18];case W.D2.StartThread:return[3,19];case W.D2.ExplainCode:return[3,20];case W.D2.GenerateCode:return[3,21];case W.D2.TransformCode:return[3,22];case W.D2.CopyLinkToPos:return[3,23]}return[3,24];case 1:return d=bi(t.state),f=d.text,p=d.ranges,(0,ne.Z)(f),t.state.readOnly?[2]:(t.dispatch({changes:p,scrollIntoView:!0,userEvent:"delete.cut"}),[3,25]);case 2:return h=bi(t.state).text,(0,ne.Z)(h),[3,25];case 3:b="",o.label=4;case 4:return o.trys.push([4,6,,7]),[4,window.navigator.clipboard.readText()];case 5:return b=o.sent(),[3,7];case 6:return x=o.sent(),Y.kg.error("CodeMirror context menu paste failed",{message:x.message}),[3,25];case 7:return gi({filePath:n,view:t,clipboardText:b}),[3,25];case 8:if(!i)throw new Error("Expected client");return r?[4,ir({offset:s,lspClient:i,openFile:r,view:t,newPane:Boolean(null===a||void 0===a?void 0:a.isCmdOrCtrl)})]:[3,25];case 9:return o.sent(),[3,25];case 10:if(!i)throw new Error("Expected client");return r?[4,M(i.request.findTypeDefinitions,"No type definition found",r)]:[3,25];case 11:return o.sent(),[3,25];case 12:if(!i)throw new Error("Expected client");return r?[4,M(i.request.findImplementations,"No implementation found",r)]:[3,25];case 13:return o.sent(),[3,25];case 14:return t.dispatch({effects:[Pn.h.of(s)]}),[3,25];case 15:return Kn(t,s),[3,25];case 16:if(c.selection.main.empty){if(!(k=c.wordAt(s)))return[2];t.dispatch({selection:k})}return(0,z.tm)(t),setTimeout((function(){return t.focus()})),[3,25];case 17:return(C=t.coordsAtPos(s))?(t.dispatch({effects:[Se.of(C)]}),[3,25]):[2];case 18:return S=c.doc.lineAt(s),Ne(t,S.from),[3,25];case 19:return t.dispatch({effects:[sr.UQ.of(ae()())]}),[3,25];case 20:return T=t.state.selection.main,E=l.getOTVersion(n),R=ri(t.state,n,E),(0,K.j)(K.U3.GHOSTWRITER_CHAT_INLINE_OPENED,{action:"EXPLAIN",paywall:!v}),w?(wi({view:t,mainSelection:T,codeReference:R}),[3,25]):v?(Z({chatMessage:{type:"explainCode",codeReference:R}}),t.dispatch({selection:{anchor:T.to},effects:[Xr.Q.of({codeReference:R,type:"explainCode"}),q.tk.scrollIntoView(T.to,{y:"center"})]}),[3,25]):(t.dispatch({selection:{anchor:T.to},effects:[Xr.Q.of({codeReference:R,type:"ghostwriterPaywall",data:{from:"explainCode"}}),q.tk.scrollIntoView(T.to,{y:"center"})]}),[3,25]);case 21:return m(n),G=t.state.selection.main,I=l.getOTVersion(n),_=ri(t.state,n,I),(0,K.j)(K.U3.GHOSTWRITER_CHAT_INLINE_OPENED,{action:"GENERATE",paywall:!v}),w?(wi({view:t,mainSelection:G,codeReference:_}),[3,25]):v?(t.dispatch({selection:{anchor:G.to},effects:[Xr.Q.of({codeReference:_,type:"generateCode"}),q.tk.scrollIntoView(G.to,{y:"center"})]}),[3,25]):(t.dispatch({selection:{anchor:G.to},effects:[Xr.Q.of({codeReference:_,type:"ghostwriterPaywall",data:{from:"generateCode"}}),q.tk.scrollIntoView(G.to,{y:"center"})]}),[3,25]);case 22:return y(n),D=c.selection.main,B=l.getOTVersion(n),P=ri(t.state,n,B),(0,K.j)(K.U3.GHOSTWRITER_CHAT_INLINE_OPENED,{action:"TRANSFORM",paywall:!v}),w?(wi({view:t,mainSelection:D,codeReference:P}),[3,25]):v?(t.dispatch({selection:{anchor:D.to},effects:[Xr.Q.of({type:"transformCode",codeReference:P}),q.tk.scrollIntoView(D.to,{y:"center"})]}),[3,25]):(t.dispatch({selection:{anchor:D.to},effects:[Xr.Q.of({codeReference:P,type:"ghostwriterPaywall",data:{from:"editCode"}}),q.tk.scrollIntoView(D.to,{y:"center"})]}),[3,25]);case 23:return A=(0,we.s)(c.doc,s),L=A.line,U=A.character,X=(0,re.dr)({path:n,line:L+1,col:U}),(0,ne.Z)(X),[3,25];case 24:throw new Error("Unexpected action: ".concat(e));case 25:return[2]}}))}));return function(t,n){return e.apply(this,arguments)}}(),[t,i,n,r,l,Z,m,y]),S=(0,g.Z)(b.useState(!1),2),T=S[0],E=S[1];(0,Ve.Z)({view:t,initialExtension:q.tk.updateListener.of((function(e){e.transactions.some((function(e){return e.reconfigured}))&&E("undefined"!==typeof e.view.state.field(Oe,!1))}))});var R=ee(i),G=b.useMemo((function(){if(!t)return[];var e=[];return R&&(R.isFindDefinitionSupported&&e.push(W.D2.JumpToDefinition),R.isFindTypeDefinitionSupported&&e.push(W.D2.JumpToTypeDefinition),R.isFindImplementationSupported&&e.push(W.D2.JumpToImplementation),(R.isFindDefinitionSupported||R.isFindReferencesSupported)&&e.push(W.D2.FindReferences),R.isRenameSupported&&e.push(W.D2.Rename),R.isCodeActionsSupported&&e.push(W.D2.CodeActions)),e.push(W.D2.SelectAllOccurrences),e.push(W.JJ),e.push(W.D2.CopyLinkToPos),T&&e.push(W.D2.ToggleBreakpoint),e.push(W.D2.StartThread),e.push(W.D2.ExplainCode),e.push(W.D2.GenerateCode),e.push(W.D2.TransformCode),e.push(W.JJ),e.push(W.D2.Cut),e.push(W.D2.Copy),window.navigator.clipboard&&"readText"in window.navigator.clipboard&&e.push(W.D2.Paste),e}),[t,R,T]),I=(0,Ve.Z)({view:t});return b.useEffect((function(){if(t){var e=G.filter((function(e){return!(0,W.s3)(e)})).filter((function(e){return"keyboardShortcut"in W.Wo[e]})).filter((function(e){return e!==W.D2.Cut&&e!==W.D2.Copy&&e!==W.D2.Paste})).map((function(e){var t=W.Wo[e].keyboardShortcut,n={key:t.key,preventDefault:!0,run:function(){return C(e),!0}};return t.altKey&&(n.key="Alt-".concat(n.key)),t.shiftKey&&(n.key="Shift-".concat(n.key)),t.cmdOrCtrlKey&&(n.key="Mod-".concat(n.key)),n}));return t.dispatch({effects:I.reconfigure(q.$f.of(e))}),function(){t.dispatch({effects:I.reconfigure([])})}}}),[t,C,G,I]),{onAction:C,actions:G,contextMenuCoords:u,onContextMenu:function(e){if(!h&&t){e.preventDefault();var r=e.clientX,i=e.clientY,o=t.state.selection.main,l=t.posAtCoords({x:r,y:i}),c=t.state.doc.length,u=null===l?c:l;if(a.current=u,u<o.from||u>o.to){var d=j.jT.cursor(u);t.dispatch({selection:d})}var f=(0,ie.r6)(n);(0,K.j)(K.U3.EDITOR_CONTEXT_MENU_OPENED,{ext:f}),s({x:r,y:i})}},closeMenu:x,resizeRef:k}}var ki=n(68825);function Ci(e){var t=e.view,n=e.debuggest,r=e.filePath,i=e.isLoading,o=(0,te.Z)().fs,a=(0,ki.Z)(),l=(0,ke.Z)(n.mainClient),c=(0,Ve.Z)({view:t});b.useEffect((function(){if(!i&&a&&l&&t){var e=(0,_e.ZF)("/home/runner/".concat(a.slug,"/").concat(r)),n=function(e,t,n,r){var i,o=[];o.push(t.breakpoints.subscribe((function(t){var r=t.get(n);e.dispatch({effects:Be.of({lines:r?r.map((function(e){return e.line})):[]})})})));var a=q.tk.updateListener.of((function(i){i.transactions.forEach((function(i){i.effects.forEach((function(i){if(i.is(Pe)){var o=(0,_e.om)(n);if(!o)throw new Error("Expected relative path");t.toggleBreakpoint(n,{line:e.state.doc.lineAt(i.value.pos).number,otVersion:r.getOTVersion(o),otIndex:i.value.pos})}}))}))}));o.push(t.stackFrames.subscribe((function(t){var r=We(t,n);e.dispatch({effects:Le.of(r)})})));var l=(0,q.v5)({class:"cm-breakpoint-gutter",markers:function(e){return e.state.field(Oe)},initialSpacer:function(){return De},domEventHandlers:{mousedown:function(e,t){return Ne(e,t.from),!0}}}),c=(null===(i=t.breakpoints.current.get(n))||void 0===i?void 0:i.map((function(e){return e.line})))||[],u=[j.Wl.highest(l),Oe.init((function(e){return He(c,e)})),a,Ue.init((function(){return We(t.stackFrames.current,n)})),Me,Fe];return{extensions:u,dispose:function(){return o.forEach((function(e){return e()}))}}}(t,l,e,o),u=n.extensions,s=n.dispose;return t.dispatch({effects:c.reconfigure(u)}),function(){t.dispatch({effects:c.reconfigure([])}),s()}}}),[l,t,a,r,i,o,c])}var Si=n(52367),Ti=n(49129),Ei=n(12290),Ri=n(94716),Gi=n(70065);function Ii(e,t,n,r){var i=(0,b.useState)((function(){return new j.F6}))[0],a=(0,Ri.Z)(e);(0,b.useEffect)((function(){if(n){var e=a.current();if(e){var t=void 0===i.get(n.state)?j.Py.appendConfig.of(i.of(e)):i.reconfigure(e);try{n.dispatch({effects:t})}catch(o){throw Gi.Z.wrap(o).setExtras({callsiteForBSODs:r})}return function(){try{n.dispatch({effects:i.reconfigure([])})}catch(o){throw Gi.Z.wrap(o).setExtras({callsiteForBSODs:r})}}}}}),[n,i,a,r].concat((0,o.Z)(t)))}var _i=j.Py.define(),Di=j.QQ.define({create:function(){return null},update:function(e,t){var n=e;return(0,Ce.j)(t,_i,(function(e){n=e.value})),n}});function Bi(e,t){return Pi.apply(this,arguments)}function Pi(){return(Pi=(0,H.Z)((function(e,t){var n,r,i,o,a,l,c,u,s;return(0,V.__generator)(this,(function(d){switch(d.label){case 0:return[4,e.request.documentSymbol(t)];case 1:if(!(n=d.sent())||n.cancelled)return[2,null];if(!(r="result"in n&&!n.cancelled?n.result:null))return[2,null];i=[],o=!0,a=!1,l=void 0;try{for(c=r[Symbol.iterator]();!(o=(u=c.next()).done);o=!0)(s=u.value)&&"range"in s&&i.push(s)}catch(f){a=!0,l=f}finally{try{o||null==c.return||c.return()}finally{if(a)throw l}}return[2,i.length?i:null]}}))}))).apply(this,arguments)}var Ai=j.r$.define({combine:function(e){return e.length>0?e[0]:null}}),Li=n(53265),Ui=j.Py.define(),Xi=j.Py.define(),Mi=(j.q6.define(),j.QQ.define({create:function(){return null},update:function(e,t){if(!t.state.facet(Ai))return null;e&&(e=(0,i.Z)((0,r.Z)({},e),{missed:e.missed.compose(t.changes)}));var n=e?e.requestId+1:0,o=!0,a=!1,l=void 0;try{for(var c,u=t.effects[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var s=c.value;if(s.is(Ui)){var d=t.state.doc;e={requestId:n,original:d,missed:j.as.empty(d.length)}}s.is(Xi)&&e&&e.requestId===s.value&&(e=null)}}catch(f){a=!0,l=f}finally{try{o||null==u.return||u.return()}finally{if(a)throw l}}return e}})),Ni=j.r$.define({enables:function(e){return q.lg.define((function(t){var n=function(t){var n=t.facet(e);if(n.length){var r=null!==t.field(Mi),i=null!=t.facet(Ai);n.forEach((function(e){return e.set({isFormatting:r,hasFormatter:i})}))}};return n(t.state),{update:function(e){(0,Li.a)(e,Mi,Ai)&&n(e.state)}}}))}}),Oi=n(8082),Fi=q.lg.fromClass(function(){function e(t){(0,le.Z)(this,e),this.view=t}var t=e.prototype;return t.update=function(e){var t=this;return(0,H.Z)((function(){var n,r,i,o,a,l,c,u;return(0,V.__generator)(this,(function(s){switch(s.label){case 0:if(!e.transactions.some((function(e){return e.effects.some((function(e){return e.is(Ui)}))})))return[2];if(!(n=t.view.state.field(Mi)))return[2];if(!(r=t.view.state.facet(Ai)))throw new Error("Expected a formatting provider");return i=Date.now(),o=n.original,a=n.requestId,[4,r.format(o).then((function(e){return t.onResponse(a,e)})).catch((function(e){throw Zt.c_.withScope((function(t){t.setExtra("logName",r.logName),t.setExtra("doc",o.toString()),Zt.c_.captureException(e)})),e}))];case 1:return l=s.sent(),c=l.changes,u=l.status,t.view.dispatch({changes:c,effects:Xi.of(a)}),"error"===u&&r.onError&&r.onError(),"success"===u&&r.onSuccess&&r.onSuccess(),Y.kg.time("formatter_ran",Date.now()-i,{extension:t.view.state.facet(Dn.Yp),response_status:u,type:r.logName,variant:"extension"}),[2]}}))}))()},t.onResponse=function(e,t){var n=this.view.state.field(Mi);return n?e!==n.requestId?{status:"ignore"}:"error"in t?{status:"error"}:{changes:((0,vt.Z)(t.result,j.as)?t.result:(0,Oi.F)(n.original.toString(),t.result)).map(n.missed),status:"success"}:{status:"ignore"}},e}()),Wi=function(e){return!!e.state.facet(Ai)&&(e.dispatch({effects:Ui.of(null)}),!0)},Hi=new mi.j((function(e){return[e?Ni.of(e):null,Mi,Fi].filter(Boolean)})),Vi=n(29820),zi=new mi.j((function(e,t,n,r,i,o){if(!t)return[];if(!(0,J.Z)(t).isFormatSupported)return[];var a=Ai.of({format:function(){var i=(0,H.Z)((function(i){return(0,V.__generator)(this,(function(o){return[2,t.request.format(e,{insertSpaces:n,tabSize:r}).then((function(e){return"error"in e||e.cancelled||!e.result?{error:!0}:{result:(0,Vi.Z)(e.result,i.toString())}}))]}))}));return function(e){return i.apply(this,arguments)}}(),logName:"lsp_format",onError:function(){i("Sorry, formatting ".concat(e," failed"),1500)},onSuccess:function(){o("Formatted ".concat(e," successfully"),1500)}});return j.Wl.high(a)})),ji=n(13233);function qi(e){var t=e.view,n=e.filePath,r=e.isLoading,i=e.decorations,o=e.openFile,a=(0,Rn.Z)().preferences,l=a.codeIntelligence,c=(0,te.Z)().fs,u=(0,Q.Z)(n),s=ee(u),d=function(){var e=(0,ci.d)(),t=(0,dr.ql)(),n=(0,Rr.OT)();return(0,me.Z)((function(){if(e)return function(e){n(),t({chatMessage:e})}}),[e,n,t])}(),f=(0,ji.Z)(),p=f.showError,h=f.showConfirm;!function(e){var t=e.view,n=e.filePath,r=e.lspClient;Ii((function(){if(!t||!n||!r)return null;if(!(0,J.Z)(r).isDocumentSymbolSupported)return null;var e=(0,Ei.Z)((0,H.Z)((function(){var e;return(0,V.__generator)(this,(function(i){switch(i.label){case 0:return[4,Bi(r,n)];case 1:return e=i.sent(),t.dispatch({effects:_i.of(e)}),[2]}}))})),{wait:200}),i=q.tk.updateListener.of((function(t){t.docChanged&&e()}));return e(),[i,Di]}),[t,n,r],t,"useDocumentSymbols")}({view:t,filePath:n,lspClient:u});var v=r||!l||!t||!u||!s||!u.isSupportedFile(n),m=(0,Ve.Z)({view:t}),g=zi.use(n,u,a.indentIsSpaces,a.indentSize,p,h);b.useEffect((function(){if(!v)return t.dispatch({effects:m.reconfigure([ur({fs:c,lspClient:u,path:n,decorations:i,openFile:o,askGhostwriter:d}),g])}),function(){t.dispatch({effects:m.reconfigure([[q.tk.updateListener.of((function(e){e.docChanged&&(0,yt.KS)(e.state)>0&&e.view.dispatch(St(xt.of([]),Tt(e.startState)))}))]])}),i.unmount()};t&&!l&&t.dispatch(Tt(t.state))}),[c,u,t,s,m,n,o,i,v,d,l,g]),b.useEffect((function(){if(u&&(n&&(0,J.Z)(u).isTextDocumentSyncSupported))return c.watchTextFile(n,{onFlush:function(){u.isOpen(n)&&u.notify.didSave(n)}})}),[c,n,u])}var $i=n(48224),Yi=n(4561),Ki=n(13424),Qi=q.lg.define((function(e){var t=e.state.facet(Ji),n=[];return{update:function(e){t=e.state.facet(Ji);var n=!0,r=!1,i=void 0;try{for(var o,a=e.transactions[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value;l.changes.empty||this.pushTransaction(l)}}catch(c){r=!0,i=c}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}},flush:function(){n=[]},logs:function(){return n},pushEvent:function(t){var n={anchor:e.state.selection.main.anchor,head:e.state.selection.main.head,docLength:e.state.doc.length,time:Date.now(),type:t.type};(0,vt.Z)(t,KeyboardEvent)&&(n.key=t.key,n.metaKey=t.metaKey,n.shiftKey=t.shiftKey,n.altKey=t.altKey,n.ctrlKey=t.ctrlKey),(0,vt.Z)(t,InputEvent)&&(n.data=t.data,n.inputType=t.inputType,n.isComposing=t.isComposing),(0,vt.Z)(t,CompositionEvent)&&(n.data=t.data),this.pushLog(n)},pushTransaction:function(e){this.pushLog({userEvent:e.annotation(j.YW.userEvent),changes:JSON.stringify(e.changes),time:Date.now(),type:"transaction"})},pushLog:function(e){t&&(n.push(e),n=n.slice(Math.max(0,n.length-100)))}}}),{provide:function(e){var t=function(t,n){var r;return null===(r=n.plugin(e))||void 0===r?void 0:r.pushEvent(t)};return j.Wl.highest(q.tk.domEventHandlers({keypress:t,keydown:t,keyup:t,beforeinput:t,input:t,compositionstart:t,compositionupdate:t,compositionend:t}))}}),Ji=j.r$.define({combine:function(e){return!!e.length&&e[0]}}),eo=new mi.j((function(e){return Ji.of(e)})),to=j.q6.define();var no,ro=n(24746),io="cm-multiplayer-selection-green",oo="cm-multiplayer-selection-red",ao="cm-multiplayer-selection-blue",lo="cm-multiplayer-selection-gold",co="cm-multiplayer-selection-purple",uo="cm-multiplayer-selection-teal",so="cm-multiplayer-selection-pink",fo=q.tk.theme((no={},(0,Gt.Z)(no,".".concat(io),{background:"rgba(27, 196, 125, 0.2)"}),(0,Gt.Z)(no,".".concat(oo),{background:"rgba(239, 85, 51, 0.2)"}),(0,Gt.Z)(no,".".concat(ao),{background:"rgba(24, 160, 251, 0.2)"}),(0,Gt.Z)(no,".".concat(lo),{background:"rgba(255, 199, 0, 1)"}),(0,Gt.Z)(no,".".concat(co),{background:"rgba(144, 124, 255, 0.2)"}),(0,Gt.Z)(no,".".concat(uo),{background:"rgba(0, 181, 206, 0.2)"}),(0,Gt.Z)(no,".".concat(so),{background:"rgba(238, 70, 211, 0.2)"}),no)),po={"#1BC47D":io,"#EF5533":oo,"#18A0FB":ao,"#FFC700":lo,"#907CFF":co,"#00B5CE":uo,"#EE46D3":so};var ho=j.Py.define(),vo=j.Py.define(),mo=j.Py.define(),go=j.QQ.define({create:function(){return{}},update:function(e,t){if(!t.changes.empty){var n=function(e){return t.changes.mapPos(Math.min(t.changes.length,e))},o={},a=!0,l=!1,c=void 0;try{for(var u,s=Object.values(e)[Symbol.iterator]();!(a=(u=s.next()).done);a=!0){var d=u.value;o[d.id]=(0,i.Z)((0,r.Z)({},d),{position:n(d.position),selectionStart:n(d.selectionStart),selectionEnd:n(d.selectionEnd)})}}catch(T){l=!0,c=T}finally{try{a||null==s.return||s.return()}finally{if(l)throw c}}e=o}var f=!0,p=!1,h=void 0;try{for(var v,m=t.effects[Symbol.iterator]();!(f=(v=m.next()).done);f=!0){var y=v.value;if(y.is(Ur.R)&&(e=(0,r.Z)({},e)),y.is(ho)&&y.value.position<=t.newDoc.length&&((e=(0,r.Z)({},e))[y.value.id]=(0,r.Z)({},y.value)),y.is(vo)&&(e=(0,r.Z)({},e),y.is(vo)&&delete e[y.value]),y.is(mo)){e=(0,r.Z)({},e);var Z=!0,b=!1,w=void 0;try{for(var x,k=Object.entries(e)[Symbol.iterator]();!(Z=(x=k.next()).done);Z=!0){var C=(0,g.Z)(x.value,2),S=C[0];C[1].username===y.value&&delete e[S]}}catch(T){b=!0,w=T}finally{try{Z||null==k.return||k.return()}finally{if(b)throw w}}}}}catch(T){p=!0,h=T}finally{try{f||null==m.return||m.return()}finally{if(p)throw h}}return e},provide:function(e){return[fo,j.Wl.high((0,q.EY)({above:!1,class:"cm-multiplayer-cursor-layer",update:function(t){return(0,Li.a)(t,e)},markers:function(t){var n=t.state.field(e,!1);if(!n)return[];var r=[],i=!0,a=!1,l=void 0;try{for(var c,u=Object.values(n)[Symbol.iterator]();!(i=(c=u.next()).done);i=!0){var s,d=c.value,f=d.selectionStart,p=d.selectionEnd,h=d.color.selection;if(f!==p){var v=j.jT.range(f,p);(s=r).push.apply(s,(0,o.Z)(q.dc.forRange(t,h,v)))}}}catch(m){a=!0,l=m}finally{try{i||null==u.return||u.return()}finally{if(a)throw l}}return r}}))]}});function yo(e){return q.tk.updateListener.of((function(t){var n=t.state.selection;n!==t.startState.selection&&(t.transactions.every((function(e){return e.annotation(j.YW.remote)}))||e(n.ranges.map((function(e){var n=t.state.doc.lineAt(e.head);return{position:e.head,line:n.number,column:e.head-n.from+1,selectionStart:e.from,selectionEnd:e.to}})),n.mainIndex))}))}function Zo(e){var t=e.view,n=e.presence,o=e.fs,a=e.filePath,l=(0,b.useState)(null),c=l[0],u=l[1],s=(0,ro.Z)({presence:n}),d=(0,b.useRef)({}),f=(0,Ze.Z)();(0,b.useEffect)((function(){var e=s.reduce((function(e,t){return t.username&&t.color?(0,i.Z)((0,r.Z)({},e),(0,Gt.Z)({},t.username,t.color)):e}),{});d.current=e}),[s]);var p=(0,Ve.Z)({view:t});return(0,b.useEffect)((function(){if(t){var e=n.onUserLeave((function(e){t.dispatch({effects:mo.of(e.username)})})),r=o.watchTextFile(a,{onReady:function(e){var n=e.updateSelections;t.dispatch({effects:p.reconfigure([go,yo((function(e){n(e)}))])}),u(a)},onCursor:function(e){var n=function(e){var t,n=e.cursor,r=e.usernameColorsMap,i=null===(t=n.user)||void 0===t?void 0:t.name;if(i){var o,a=n.id,l=n.position,c=n.selectionStart,u=n.selectionEnd,s=r[i];if(s&&a&&"number"===typeof l&&"number"===typeof c&&"number"===typeof u)return ho.of({id:a,username:i,position:l,color:{cursor:s,selection:(o=s,po[o]||"")},selectionStart:c,selectionEnd:u})}}({cursor:e,usernameColorsMap:d.current});n&&t.dispatch({effects:n})},onRemoveCursor:function(e){t.dispatch({effects:vo.of(e)})},onError:function(){t.dispatch({effects:p.reconfigure([])})},onMoveOrDelete:function(){t.dispatch({effects:p.reconfigure([])})}});return function(){e(),r(),t.dispatch({effects:p.reconfigure([])}),f.current&&u(null)}}}),[t,a,o,n,p]),{loadedFile:c}}var bo=n(84630);var wo=q.tk.theme({".multiplayer-cursor":{width:"2px",left:"0",top:"0"},".multiplayer-cursor .multiplayer-label":{boxShadow:k.TV.shadow1,borderRadius:k.TV.borderRadius4,padding:"1px",position:"absolute",left:"0px",animation:"fadeOut 2s ease-in forwards",color:"white",display:"inline-block",whiteSpace:"nowrap"},".multiplayer-cursor:hover .multiplayer-label":{animation:"auto"}});function xo(e){e.style.transform="translate(-10000px, -10000px)"}function ko(e){var t=document.createElement("div");t.textContent=e.username,t.style.backgroundColor=e.color.cursor,t.classList.add("multiplayer-label");var n=document.createElement("div");return n.classList.add("multiplayer-cursor"),n.style.backgroundColor=e.color.cursor,n.style.position=G.gn?"absolute":"fixed",n.appendChild(t),{dom:n,label:t}}var Co=new Map;var So=q.lg.define((function(e){var t=function(){u&&(u.disconnect(),a.forEach((function(e){u.observe(e.view.dom)})))},n=function(){if(!Boolean(!i||0===Object.values(i).length)&&(e.inView&&e.requestMeasure(d),l!==e.inView)){if(l=e.inView)return;a.forEach((function(e){xo(e.view.dom)}))}},r=function(){null===s&&(s=setTimeout((function(){s=null,n()}),50))},i=e.state.field(go,!1),a=new Map((i?Object.values(i):[]).map((function(e){return[e.id,{view:ko(e),cursor:e}]}))),l=!0,c=0,u="function"===typeof IntersectionObserver?new IntersectionObserver((function(e){Date.now()>c-50&&e.length>0&&e[e.length-1].intersectionRatio<1&&r()}),{threshold:[1]}):null;t();var s=null;window.addEventListener("resize",r);var d={read:function(){return{editorRect:e.scrollDOM.getBoundingClientRect(),dimensions:new Map((i?Object.values(i):[]).map((function(t){var n=a.get(t.id),r=n?function(e,t){var n=Co.get(e);if(n)return n;var r=t.getBoundingClientRect().width;return Co.set(e,r),r}(t.username,n.view.label):null;return[t.id,{position:e.coordsAtPos(t.position),labelWidth:r}]})))}},write:function(e){a.forEach((function(t,n){var r=e.dimensions.get(n);!function(e){var t=e.cursorView,n=e.position,r=e.labelWidth,i=e.editorRect,o=t.dom,a=t.label;if(n&&r){var l=n.bottom-n.top;if(n.bottom<=i.top+l||n.top+l>=i.bottom||n.right<i.left-.1||n.left>i.right+.1)xo(o);else{var c=n.left+r-i.right,u="0px";c>0?(u="-".concat(c,"px"),a.style.borderBottomLeftRadius="4px"):a.style.borderBottomLeftRadius="0px",a.style.pointerEvents="none",a.style.transform="translate(".concat(u,", -100%)");var s=G.gn?{x:n.left-i.left+"px",y:n.top-i.top+"px"}:{x:"calc(".concat(n.left,"px + var(--fixed-position-offset-x))"),y:"calc(".concat(n.top,"px + var(--fixed-position-offset-y))")},d=s.x,f=s.y;o.style.transform="translate(".concat(d,", ").concat(f,")"),o.style.height=l+"px"}}else xo(o)}({cursorView:t.view,position:(null===r||void 0===r?void 0:r.position)||null,labelWidth:(null===r||void 0===r?void 0:r.labelWidth)||null,editorRect:e.editorRect})}))},key:Math.random().toString()};return{update:function(r){r.transactions.length&&(c=Date.now());var l=r.state.field(go,!1);if(l!==r.startState.field(go,!1)){var u=new Map,s=new Set;if(l){var d=new Map((0,o.Z)(a.values()).map((function(e){return[e.cursor.id,e.view]})));Object.values(l).forEach((function(t){var n=d.get(t.id);if(n)s.add(n),u.set(t.id,{view:n,cursor:t});else{var r=ko(t);u.set(t.id,{view:r,cursor:t}),e.dom.appendChild(r.dom)}}))}a.forEach((function(e){s.has(e.view)||e.view.dom.remove()})),a=u,i=l,t(),n()}else r.geometryChanged&&n()},destroy:function(){window.removeEventListener("resize",r),a.forEach((function(e){e.view.dom.remove()})),i=void 0,a=new Map,null===u||void 0===u||u.disconnect(),s&&clearTimeout(s)},maybeMeasure:n}}),{eventHandlers:{scroll:function(){this.maybeMeasure()}}}),To=[wo,So];function Eo(e){var t=e.view,n=e.presence,r=e.fs,i=e.filePath,o=function(e){var t=e.view,n=e.fs,r=e.filePath,i=(0,b.useState)(null),o=i[0],a=i[1],l=(0,Ze.Z)(),c=(0,Ve.Z)({view:t}),u=(0,$i.Z)().trackTimeToLoadFileEnd,s=(0,Ki.uV)(),d=(0,Ki.Id)(),f=(0,Ki.I7)();return(0,b.useEffect)((function(){if(t){var e=0,i=0,o=0,p=null,h=n.watchTextFile(r,{onReady:function(l){var f=l.initialContent,h=l.writeChange,v=l.version;e=v,i=v,d({filePath:r,version:v}),u(r),t.dispatch({changes:{from:0,to:t.state.doc.length,insert:f},annotations:[j.YW.addToHistory.of(!1),j.YW.remote.of(!0),to.of(!0)]}),t.dispatch({effects:c.reconfigure(q.tk.updateListener.of((function(t){if(t.docChanged){var a=!0,l=!1,c=void 0;try{for(var u,d=function(){var a=u.value;if(a.annotation(j.YW.remote)||a.annotation(to))return"continue";o++;var l=a.annotation(Yr.Z)?{author:"ghostwriter"}:{};try{h(a.changes,l),p=a.changes}catch(c){throw n.readFile(r,{fromDisk:!1}).then((function(n){var o="replitReadError: "+n.error;n.error||(o=n.content.toString());var l=t.view.contentDOM.innerText,u=t.view.plugin(Qi),d=null===u||void 0===u?void 0:u.logs();null===u||void 0===u||u.flush(),s({origin:"Codemirror: ot/writeChange",error:c,tags:{ot:!0},extras:{filePath:r,previousChanges:JSON.stringify(p),transactionChanges:JSON.stringify(a.changes),otherTransactionChanges:JSON.stringify(t.transactions.filter((function(e){return e!==a})).map((function(e){return e.changes}))),transactionDoc:a.newDoc.sliceString(0),updateDoc:t.state.doc.sliceString(0),otClientDoc:o,domText:l,openVersion:i,latestReceivedVersion:e,keystrokes:JSON.stringify(d)}})})),c}},f=t.transactions[Symbol.iterator]();!(a=(u=f.next()).done);a=!0)d()}catch(v){l=!0,c=v}finally{try{a||null==f.return||f.return()}finally{if(l)throw c}}}})))}),a(r)},onChange:function(a){var l=a.changes,c=a.changeSource,u=a.version;e=u,d({filePath:r,version:u});try{t.dispatch({changes:l,annotations:[j.YW.remote.of(c===Yi.Fl.Container),j.YW.addToHistory.of(c===Yi.Fl.Local),to.of(!0)]})}catch(f){throw n.readFile(r,{fromDisk:!1}).then((function(e){var n="replitReadError: "+e.error;e.error||(n=e.content.toString());var a=t.contentDOM.innerText;s({origin:"Codemirror: ot/syncRemoteOp",error:f,tags:{ot:!0},extras:{filePath:r,previousChanges:JSON.stringify(p),changes:JSON.stringify(l),changeSource:c,otClientDoc:n,domText:a,cmDoc:t.state.doc.sliceString(0),openVersion:i,version:u,initiatedChanges:o}})})),f}},onError:function(){t.dispatch({effects:c.reconfigure([])})},onMoveOrDelete:function(){t.dispatch({effects:c.reconfigure([])})}});return function(){f({filePath:r}),h(),e=0,i=0,o=0,t.dispatch({effects:[c.reconfigure([])]}),l.current&&a(null)}}}),[t,r,n,l,c,u,s,d,f]),{loadedFile:o}}({view:t,fs:r,filePath:i}),a=o.loadedFile,l=Zo({view:t,fs:r,filePath:i,presence:n}).loadedFile;!function(e){var t=e.view,n=(0,te.Z)().presence,r=(0,bo.Z)(),i=(0,Ve.Z)({view:t});b.useEffect((function(){if(r&&t){var e=function(){n.getFollowedUser()&&n.unfollowUser()};return t.dispatch({effects:i.reconfigure(q.tk.domEventHandlers({wheel:e,keydown:function(t){"Control"!==t.key&&"Meta"!==t.key&&e()},click:e}))}),function(){t.dispatch({effects:i.reconfigure([])})}}}),[r,t,n,i]);var o=(0,Ve.Z)({view:t});b.useEffect((function(){var e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(t){var n=j.jT.cursor(e);t.dispatch({effects:[q.tk.scrollIntoView(n,{x:"center",y:"center"})]})}};if(t&&r){var n=t.state.field(go,!1);if(n){var i=Object.values(n).find((function(e){return e.username===r.username}));i&&e(i.position)}return t.dispatch({effects:o.reconfigure(q.tk.updateListener.of((function(t){var n,i=!0,o=!1,a=void 0;try{for(var l,c=t.transactions[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var u=l.value,s=!0,d=!1,f=void 0;try{for(var p,h=u.effects[Symbol.iterator]();!(s=(p=h.next()).done);s=!0){var v=p.value;v.is(ho)&&v.value.username===r.username&&(n=v.value)}}catch(m){d=!0,f=m}finally{try{s||null==h.return||h.return()}finally{if(d)throw f}}}}catch(m){o=!0,a=m}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}n&&e(n.position)})))}),function(){t.dispatch({effects:o.reconfigure([])})}}}),[t,r,o])}({view:t});var c=i!==a||i!==l,u=(0,Ve.Z)({view:t});return(0,Ve.Z)({view:t,initialExtension:To}),(0,b.useEffect)((function(){t&&t.dispatch({effects:u.reconfigure([q.tk.editable.of(!c),j.yy.readOnly.of(c)])})}),[t,c,u]),{isLoading:c}}var Ro=n(91926),Go=n(45157);function Io(){var e=(0,g.Z)(b.useState(!1),2),t=e[0],n=e[1];return(0,a.BX)(a.HY,{children:[(0,a.tZ)("a",{css:k.l0.linkStyle,onClick:function(){return n(!0)},onKeyDown:function(){return n(!0)},role:"button",tabIndex:0,children:"generate code with Ghostwriter"}),(0,a.tZ)(Go.Z,{context:"workspace_placeholder_text",isOpen:t,onRequestClose:function(){return n(!1)},uponPurchaseGoTo:"cyclesPage",powerUp:"ghostwriter"})]})}var _o=n(43119),Do=n(71440),Bo=n(24635);function Po(){var e=(0,_o.Z)(["\n  query IsReplLesson($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        lesson {\n          id\n        }\n      }\n      ... on ReplRedirect {\n        __typename\n      }\n      ... on SubscriptionExpiredError {\n        __typename\n      }\n    }\n  }\n"]);return Po=function(){return e},e}var Ao={},Lo=(0,Do.Ps)(Po());var Uo=function(e){var t,n,i=function(e){var t=(0,r.Z)({},Ao,e);return Bo.a(Lo,t)}({variables:{replId:e.replId}}),o=i.data,a=i.loading;return{isLesson:"Repl"===(null===o||void 0===o?void 0:o.repl.__typename)&&"UserCourseLesson"===(null===o||void 0===o||null===(t=o.repl)||void 0===t||null===(n=t.lesson)||void 0===n?void 0:n.__typename),isLoading:a}},Xo=n(48330),Mo=n(27562),No=n(49770),Oo=n(13474),Fo=n(2041),Wo=n(26283);function Ho(){var e=(0,_o.Z)(["\n  query ReplCodeExamples($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        deprecatedLanguageConfig {\n          id\n          mainFile\n          examples {\n            name\n            code\n          }\n        }\n      }\n    }\n  }\n"]);return Ho=function(){return e},e}var Vo={},zo=(0,Do.Ps)(Ho());var jo=n(17807),qo=n(4421),$o=n(43312),Yo=n(6394),Ko=x.K.button;function Qo(e){var t=e.name,n=e.children,r=e.onClick;return(0,a.BX)(Ko,{onClick:function(){return r()},css:[jo.gU.nofill,k.l0.p(8),k.l0.focusRing,k.l0.textAlign.left],children:[(0,a.tZ)(fe.xv,{variant:"subheadDefault",css:k.l0.pb(16),multiline:!1,children:t}),(0,a.tZ)(x.G,{css:[k.l0.backgroundColor.backgroundDefault,k.l0.p(8),k.l0.borderRadius(8)],children:n})]})}var Jo="@media (min-width: ".concat(qo.j.tabletMax,"px)"),ea=(0,$o.iv)([k.l0.colWithGap(16),(0,Gt.Z)({},Jo,{width:"calc(50%  - 8px)",flex:"0 0 auto",gap:"16px"})]);function ta(e){var t=e.children;return(0,a.tZ)(x.G,{css:[(0,Gt.Z)({},Jo,[k.l0.rowWithGap(16)])],children:t})}function na(e){var t=e.mainFile,n=e.examples,r=e.onSelect;return(0,a.BX)(x.G,{css:[k.l0.colWithGap(24)],children:[(0,a.tZ)(fe.h4,{level:1,variant:"headerDefault",children:"Code examples"}),(0,a.tZ)(fe.xv,{children:"Get started with some program examples."}),(0,a.BX)(ta,{css:[k.l0.colWithGap(16)],children:[(0,a.tZ)(x.G,{css:ea,children:n.slice(0,(n.length+1)/2).map((function(e){return(0,a.tZ)(Qo,{name:e.name,onClick:function(){return r(e)},children:(0,a.tZ)(Yo.Z,{code:e.code,filePath:t,fontSize:12,disableCursorStyling:!0})},e.name)}))}),(0,a.tZ)(x.G,{css:ea,children:n.slice((n.length+1)/2).map((function(e){return(0,a.tZ)(Qo,{name:e.name,onClick:function(){return r(e)},children:(0,a.tZ)(Yo.Z,{code:e.code,filePath:t,fontSize:12,disableCursorStyling:!0})},e.name)}))})]})]})}function ra(e){var t=e.replId,n=e.onSelect,i=function(e){var t=(0,r.Z)({},Vo,e);return Bo.a(zo,t)}({variables:{replId:t}}),o=i.data,l=i.loading,c=i.error;if(l)return(0,a.tZ)(x.G,{css:[k.l0.colWithGap(0),k.l0.justify.center,k.l0.align.center,k.l0.pt(32),k.l0.pb(32)],children:(0,a.tZ)(kr.Z,{})});if(c)return(0,a.tZ)(x.G,{css:[k.l0.colWithGap(0),k.l0.justify.center,k.l0.align.center,k.l0.pt(32),k.l0.pb(32)],children:c.message});var u="Repl"===(null===o||void 0===o?void 0:o.repl.__typename)?o.repl:null;if(!u)return null;var s=u.deprecatedLanguageConfig,d=s.mainFile,f=s.examples;return(null===f||void 0===f?void 0:f.length)?(0,a.tZ)(na,{mainFile:d,examples:f,onSelect:n}):(0,a.tZ)(x.G,{css:[k.l0.colWithGap(0),k.l0.justify.center,k.l0.align.center,k.l0.pt(32),k.l0.pb(32)],children:(0,a.BX)(fe.xv,{children:["Sorry, this language doesn\u2019t have any examples. Want to add some? Contact us at ",(0,a.tZ)("a",{href:"mailto:support@replit.com",children:"support@replit.com"}),"!"]})})}var ia=n(31672),oa=n(51631);function aa(){var e=(0,_o.Z)(["\n  query PlaceholderTextCurrentUser {\n    currentUser {\n      id\n      userPowerUpsByType {\n        __typename\n        ... on UserPowerUpsTypes {\n          ghostwriter {\n            active\n            CTA\n          }\n        }\n      }\n    }\n  }\n"]);return aa=function(){return e},e}var la={},ca=(0,Do.Ps)(aa());function ua(e){var t=e.onRequestClose,n=e.filePath,r=(0,Wo.e)(Oo.y.Examples),i=(0,Wo.e)(Oo.y.Editor),o=(0,g.Z)(b.useState(!1),2),l=o[0],c=o[1],u=(0,ia.Z)(n),s=(0,Xo.Z)(),d=b.useRef(null===r||void 0===r?void 0:r.isActive),f=b.useRef();f.current=null===r||void 0===r?void 0:r.isActive;var p=b.useRef(null===r||void 0===r?void 0:r.goto);return p.current=null===r||void 0===r?void 0:r.goto,b.useEffect((function(){return function(){var e;f.current&&(null===(e=p.current)||void 0===e||e.call(p,Oo.y.Editor))}}),[]),b.useEffect((function(){(null===i||void 0===i?void 0:i.isActive)&&!d.current&&(l?i.goto(Oo.y.Examples):c(!0))}),[i,t,l]),b.useEffect((function(){(null===r||void 0===r?void 0:r.isActive)?d.current=!0:d.current&&t(null)}),[t,null===r||void 0===r?void 0:r.isActive]),u?(0,a.tZ)("div",{ref:null===r||void 0===r?void 0:r.delegateTooltip,children:(0,a.tZ)(ra,{replId:s,onSelect:function(e){u({code:e.code,insertAt:0}),t({exampleName:e.name})}})}):(0,a.tZ)("div",{children:"Please make sure you have a file open"})}function sa(e){var t=(0,g.Z)(b.useState(!1),2),n=t[0],i=t[1],o=(0,Xo.Z)(),l=(0,Mo.Z)(),c=b.useCallback((function(e){(0,K.j)(K.U3.LANGUAGE_EXAMPLES_VIEWED,(0,r.Z)({language:l,replId:o},e)),i(!1)}),[l,o]);return(0,a.BX)(a.HY,{children:["Not sure what to do? Run some"," ",(0,a.tZ)("a",{"data-cy":"ws-editor-examples",css:k.l0.linkStyle,onClick:function(){i(!0)},onKeyDown:function(){i(!0)},role:"button",tabIndex:0,children:"examples"}),(0,a.tZ)(Fo.u,{maxWidth:872,isOpen:n,onRequestClose:function(){return c(null)},children:(0,a.tZ)(ua,{onRequestClose:c,filePath:e.filePath})})]})}function da(e){var t,n,i=e.onShowGenerateCodeModal,o=e.filePath,l=(0,Xo.Z)(),c=(0,Mo.Z)(),u=Uo({replId:l}),s=u.isLesson,d=u.isLoading,f=function(e){var t=(0,r.Z)({},la,e);return Bo.a(ca,t)}(),p=f.data,h=f.loading,v=Ro.ZP.getDocs(c),m=(0,No.yR)();if(d||h)return null;var g="UserPowerUpsTypes"===(null===p||void 0===p||null===(t=p.currentUser)||void 0===t?void 0:t.userPowerUpsByType.__typename)&&p.currentUser.userPowerUpsByType.ghostwriter.CTA,y="UserPowerUpsTypes"===(null===p||void 0===p||null===(n=p.currentUser)||void 0===n?void 0:n.userPowerUpsByType.__typename)&&p.currentUser.userPowerUpsByType.ghostwriter.active,Z=!y&&g===oa.e4.Activate;return s&&m?(0,a.BX)(a.HY,{children:["Not sure what to do?"," ",(0,a.tZ)("a",{css:k.l0.linkStyle,onClick:function(){m&&m()},onKeyDown:function(){m&&m()},role:"button",tabIndex:0,children:"Watch the video"})," ","and follow the written tutorial!"]}):(0,a.BX)(a.HY,{children:[(0,a.tZ)(sa,{filePath:o}),y?(0,a.BX)(a.HY,{children:[v?", ":" or ",(0,a.tZ)("a",{css:k.l0.linkStyle,onClick:i,onKeyDown:i,role:"button",tabIndex:0,children:"generate code"})]}):null,Z?(0,a.BX)(a.HY,{children:[v?", ":" or ",(0,a.tZ)(Io,{})]}):null,v&&(0,a.BX)(a.HY,{children:[", or view"," ",(0,a.tZ)("a",{target:"_blank",css:k.l0.linkStyle,href:v,children:"documentation"})]})," ","(start typing to dismiss)"]})}function fa(e){var t=e.filePath,n=(0,Mo.Z)(),r=Ro.ZP.getDocs(n);return(0,a.BX)(a.HY,{children:[(0,a.tZ)(sa,{filePath:t}),r&&(0,a.BX)(a.HY,{children:[", or view"," ",(0,a.tZ)("a",{target:"_blank",css:k.l0.linkStyle,href:r,children:"documentation"})]})," ","(start typing to dismiss)"]})}var pa=(0,hn.X)({root:[k.l0.color.foregroundDimmest,{fontFamily:k.TV.fontFamilyCode}]});var ha=function(e){var t=e.onShowGenerateCodeModal,n=e.filePath,r=(0,l.T3)();return(0,a.tZ)("div",{css:pa.root,children:r?(0,a.tZ)(fa,{filePath:n}):(0,a.tZ)(da,{filePath:n,onShowGenerateCodeModal:t})})};function va(e){var t=e.dom,n=e.onShowGenerateCodeModal,r=e.filePath;return se.createPortal((0,a.tZ)(ha,{onShowGenerateCodeModal:n,filePath:r}),t)}function ma(){var e=(0,_o.Z)(["\n  query DeprecatedLanguageConfig($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        deprecatedLanguageConfig {\n          id\n          mainFile\n        }\n      }\n    }\n  }\n"]);return ma=function(){return e},e}var ga={},ya=(0,Do.Ps)(ma());function Za(e){var t=function(e){var t=(0,r.Z)({},ga,e);return Bo.a(ya,t)}({variables:{replId:e.replId}}).data;return"Repl"===(null===t||void 0===t?void 0:t.repl.__typename)?t.repl.deprecatedLanguageConfig:null}var ba=n(63128),wa=n(57913);function xa(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;if(!e.valid)return[];for(var r=[],i=e.getCursor(t),o=i.next();!o.done&&r.length<n;)r.push(o.value),o=i.next();return r}var ka=j.Py.define();var Ca=n(57388),Sa=n(57786),Ta=n(79249);function Ea(e){return e>420?"large":"small"}var Ra=x.K.div,Ga=(0,hn.X)({root:[k.l0.rowWithGap(8),k.l0.px(4),k.l0.py(8),{borderBottom:"1px solid",borderColor:k.TV.outlineDimmest}],panelButtonWrapper:[k.l0.center,k.l0.height(32)],content:[k.l0.display.grid,k.l0.flex.growAndShrink(1),{gridTemplateAreas:'"search search-controls"',gridTemplateRows:"1fr",gridTemplateColumns:"1fr max-content",gap:k.TV.space8}],contentExpanded:[{gridTemplateAreas:'"search search-controls" "replace replace-controls"',gridTemplateRows:"1fr 1fr",gridTemplateColumns:"1fr max-content"}],contentExpandedSmall:[{gridTemplateAreas:'"search" "search-controls" "replace" "replace-controls"',gridTemplateRows:"1fr max-content 1fr max-content",gridTemplateColumns:"1fr"}],contentSmall:[{gridTemplateAreas:'"search" "search-controls"',gridTemplateRows:"1fr max-content",gridTemplateColumns:"1fr"}],matchLabel:[k.l0.position.absolute,k.l0.top(0),k.l0.right(0),k.l0.height("100%"),k.l0.center,k.l0.pr(4)],inputControlsSmall:[k.l0.colWithGap(8),k.l0.flex.growAndShrink(1)],searchInputWrapper:[k.l0.position.relative,{gridArea:"search"}],searchControls:[k.l0.display.flex,k.l0.align.center,k.l0.rowWithGap(8),k.l0.flex.wrap,{gridArea:"search-controls"}],replaceInputWrapper:[{gridArea:"replace"}],replaceControls:[k.l0.display.flex,k.l0.align.center,k.l0.rowWithGap(8),k.l0.flex.wrap,{gridArea:"replace-controls"}]});function Ia(e){var t=e.view,n=function(){if(!t)throw new Error("Expected view");(0,z.g)(t);var e=t.state.selection.main;t.dispatch({effects:q.tk.scrollIntoView(e.from,{y:"center",x:"center"})}),P<=1||_((function(t){if(null===t){var n=T.findIndex((function(t){return t.from===e.from&&t.to===e.to}));return-1===n?1:n+1}return t>=P?1:t+1}))},r=function(){if(!t)throw new Error("Expected view");(0,z.a7)(t);var e=t.state.selection.main;t.dispatch({effects:q.tk.scrollIntoView(e.from,{y:"center",x:"center"})}),P<=1||_((function(t){if(null===t){var n=T.findIndex((function(t){return t.from===e.from&&t.to===e.to}));return-1===n?1:n+1}return t<=1?P||1:t-1}))},i=function(e){var n=e;return!!t&&(0,q.$1)(t,n,"search-panel")},o=(0,g.Z)(b.useState(!1),2),l=o[0],c=o[1],u=(0,g.Z)(b.useState(!1),2),s=u[0],f=u[1],p=(0,g.Z)(b.useState(!1),2),h=p[0],v=p[1],m=(0,g.Z)(b.useState(""),2),y=m[0],Z=m[1],w=(0,g.Z)(b.useState(""),2),k=w[0],C=w[1],S=(0,g.Z)(b.useState([]),2),T=S[0],E=S[1],G=(0,g.Z)(b.useState(null),2),I=G[0],_=G[1],D=(0,Ze.Z)(),B=b.useRef(new z.Jb({search:""})),P=T.length,A=(0,Ri.Z)(T),L=b.useCallback((function(e,t){if(!e.eq(B.current)){Z(e.search),C(e.replace),f(e.caseSensitive),v(e.regexp);var n=xa(e,t.state.doc);E(n);var r=t.state.selection.main.anchor,i=n.findIndex((function(e){return e.from<=r&&e.to>=r}));_(-1!==i?i+1:null),B.current=e}}),[]),U=b.useCallback((function(){c(!0)}),[]),X=b.useMemo((function(){return R()((function(e){D.current&&(E(xa(B.current,e)),_(null))}),250)}),[D]),M=b.useMemo((function(){return R()((function(e){if(D.current){var t=A.current.findIndex((function(t){return t.from<=e&&t.to>=e}));_(-1!==t?t+1:null)}}),250)}),[D,A]);b.useEffect((function(){return function(){X.cancel(),M.cancel()}}),[X,M]),function(e){var t=e.view,n=e.onDocChanged,r=e.onSearchQuery,i=e.onSelectionChanged,o=e.onExpandSearchPanel;b.useEffect((function(){t&&t.dispatch({effects:j.Py.appendConfig.of([q.tk.updateListener.of((function(e){e.transactions.forEach((function(t){t.effects.forEach((function(t){t.is(z.ql)&&r(t.value,e.view),t.is(ka)&&o()}))}))})),q.tk.updateListener.of((function(e){e.docChanged&&n(e.view.state.doc),e.selectionSet&&i(e.view.state.selection.main.anchor)}))])})}),[t,r,o,n,i])}({view:t,onSearchQuery:L,onSelectionChanged:M,onExpandSearchPanel:U,onDocChanged:X}),b.useEffect((function(){if(t){var e=(0,z.uP)(t.state);Z(e.search),C(e.replace),f(e.caseSensitive),v(e.regexp),B.current=e}}),[t]),b.useEffect((function(){if(t){var e=new z.Jb({search:y,replace:k,caseSensitive:s,regexp:h}),n=B.current;if(!e.eq(n)){B.current=e,t.dispatch({effects:z.ql.of(e)});var r=xa(e,t.state.doc);E(r);var i=t.state.selection.main.anchor,o=r.findIndex((function(e){return e.from<=i&&e.to>=i}));_(-1!==o?o+1:null)}}}),[t,y,k,s,h]);var N=(0,g.Z)(b.useState(Ea(0)),2),O=N[0],F=N[1],W=(0,$.Z)((function(e){e.width&&F(Ea(e.width))}));if(!t)return null;var H=P>0,V=y.length>0?"0 / 0":null,Y=H?"".concat(I||1," / ").concat(P):V,K=Y?8*Y.length:null,Q=(0,a.BX)(a.HY,{children:[(0,a.tZ)(Ca.Z,{alt:"Case sensitive",icon:(0,a.tZ)(Sa.Z,{}),checked:s,onClick:function(){f((function(e){return!e}))}}),(0,a.tZ)(Ca.Z,{alt:"Regular expressions",icon:(0,a.tZ)(d.Z,{}),checked:h,onClick:function(){v((function(e){return!e}))}})]}),J=[Ga.content];return"small"!==O&&l?J.push(Ga.contentExpanded):"small"===O&&l?J.push(Ga.contentExpandedSmall):"small"!==O||l||J.push(Ga.contentSmall),(0,a.tZ)(Ra,{ref:W,onKeyDown:function(e){i(e)&&e.preventDefault()},children:(0,a.BX)(ba.Tg,{elevated:!0,css:Ga.root,children:[(0,a.tZ)(x.G,{css:Ga.panelButtonWrapper,children:(0,a.tZ)(Nn.h,{alt:l?"Close replace panel":"Show replace panel",onClick:function(){c((function(e){return!e}))},children:(0,a.tZ)(wa.Z,{rotate:l?90:0,style:{transition:"200ms ease"}})})}),(0,a.BX)(x.G,{css:J,children:[(0,a.BX)(x.G,{css:Ga.searchInputWrapper,children:[(0,a.tZ)(Ta.h,{style:{padding:4,paddingRight:null!==K&&void 0!==K?K:void 0},placeholder:"Search",value:y,name:"search","main-field":"true",onKeyDown:function(e){(0,er.j)(e)&&"f"===e.key?e.currentTarget.select():"enter"===e.key.toLowerCase()&&(i(e)||(e.preventDefault(),e.shiftKey?r():n()))},onChange:function(e){Z(e)}}),Y?(0,a.tZ)(x.G,{css:Ga.matchLabel,children:(0,a.tZ)(fe.xv,{variant:"small",color:"dimmest",multiline:!1,children:Y})}):null]}),(0,a.BX)(x.G,{css:Ga.searchControls,children:[(0,a.tZ)(Nn.h,{alt:"Previous",onClick:function(){r()},children:(0,a.tZ)(wa.Z,{rotate:-90})}),(0,a.tZ)(Nn.h,{alt:"Next",onClick:function(){n()},children:(0,a.tZ)(wa.Z,{rotate:90})}),(0,a.tZ)(Mn.zx,{text:"Select All",onClick:function(){(0,z.i3)(t),t.focus()}}),Q]}),l?(0,a.BX)(a.HY,{children:[(0,a.tZ)(x.G,{css:Ga.replaceInputWrapper,children:(0,a.tZ)(wr.II,{style:{padding:4},placeholder:"Replacement",name:"replace",value:k,onKeyDown:function(e){"enter"===e.key.toLowerCase()&&(i(e)||(e.preventDefault(),(0,z.K9)(t)))},onChange:function(e){C(e.target.value)}})}),(0,a.BX)(x.G,{css:Ga.replaceControls,children:[(0,a.tZ)(Mn.zx,{text:"Replace",onClick:function(){(0,z.K9)(t)}}),(0,a.tZ)(Mn.zx,{text:"Replace All",onClick:function(){(0,z.ko)(t)}})]})]}):null]}),(0,a.tZ)(x.G,{css:Ga.panelButtonWrapper,children:(0,a.tZ)(Nn.h,{alt:"Close Search Panel",tooltipHidden:!0,onClick:function(){(0,z.N$)(t)},children:(0,a.tZ)(Fn.Z,{})})})]})})}function _a(e){var t=e.dom,n=e.view;return se.createPortal((0,a.tZ)(Ia,{view:n}),t)}var Da=n(93766),Ba=n(11969);function Pa(e){var t=e.view,n=e.filePath,a=e.isLoading,l=(0,Xo.Z)(),c=function(){var e=(0,b.useContext)(Da.ZP);if(!e)throw new Error("Expected codemirror state to be in codemirror state context");return e}(),u=(0,Ve.Z)({view:t});(0,b.useEffect)((function(){if(t&&!a){var e,s="".concat(l,":").concat(n),d=c.current.fileMap.get(s);if(d&&t.state.doc.eq(d.editorState.doc)){if(t.state.field(T.cE,!1))throw new Error("History was preconfigured on this view, if you want to use state cache, please make sure history is not already configured for this view");var f=[];(0,gt.q2)(d.editorState).between(0,t.state.doc.length,(function(e,t){f.push(gt.SW.of({from:e,to:t}))})),t.dispatch({effects:(0,o.Z)(f).concat([q.tk.scrollIntoView(d.scrollPos,{y:"start"})]),selection:d.editorState.selection}),e=[T.cE.init((function(){return d.editorState.field(T.cE)})),(0,T.m8)()]}else e=(0,T.m8)();var p=!1,h=R()((function(){var e;(null!==(e=globalThis.requestIdleCallback)&&void 0!==e?e:globalThis.requestAnimationFrame)((function(){Ba.Z.set("stateCache",(0,Da.oZ)(c.current))}))}),500),v={read:function(e){if(!p){var t=c.current.fileMap.get(s);if(t){var n=function(e){var t=e.scrollDOM.getBoundingClientRect();if(0===t.top&&0===t.bottom)return null;var n=t.top+e.defaultLineHeight;return e.posAtCoords({x:0,y:n},!1)}(e);null===n||n>t.editorState.doc.length||(c.current.fileMap.set(s,(0,i.Z)((0,r.Z)({},t),{scrollPos:n})),h())}}}},m=!1;return t.dispatch({effects:u.reconfigure([e,q.tk.updateListener.of((function(e){p||(!function(e){var t,n=c.current.fileMap.get(s),r=null!==(t=null===n||void 0===n?void 0:n.scrollPos)&&void 0!==t?t:0;c.current.fileMap.set(s,{scrollPos:r,editorState:e}),h()}(e.state),m||(m=!0,e.view.requestMeasure(v),setTimeout((function(){return m=!1}),500)))}))])}),function(){p=!0,t.dispatch({effects:u.reconfigure([])})}}}),[t,n,c,a,u])}var Aa=n(62199),La=n(53828);function Ua(e,t,n,o){var a=(0,ji.Z)().showError,l=(0,Xo.Z)(),c=(0,La.eR)({variables:{replId:l,path:e},onError:function(e){a(e.message)},skip:!o||t}),u=b.useMemo((function(){var o;return t||c.loading||c.error||!c.data||"ThreadsByFileResult"!==(null===(o=c.data.threadsByFile)||void 0===o?void 0:o.__typename)?{}:c.data.threadsByFile.threads.filter((function(t){return t.path===e&&(!n||!t.isResolved)})).reduce((function(e,t){return(0,i.Z)((0,r.Z)({},e),(0,Gt.Z)({},t.id,t))}),{})}),[c.loading,c.data,c.error,e,t,n]);return u}var Xa=n(23763),Ma=n(91513),Na=n(57843),Oa=n(56440),Fa=n(28737);function Wa(e){var t=e.view,n=e.filePath,i=e.enable,a=e.isLoading,l=function(e){return[j.Wl.highest((0,sr.zj)(f)),sr.cR,sr.OQ,sr.ZS,sr.PQ,q.tk.decorations.compute([sr.OQ,sr.ZS,sr.PQ],(function(e){var t=e.field(sr.OQ),n=e.field(sr.ZS),r=e.field(sr.PQ),i=n||Object.values(t).find((function(e){return e.id===r}));return q.p.set((0,o.Z)(Object.values(t)).map((function(e){var t=i&&e.id===i.id;return function(e,t,n,r,i){if(t===n)return null;var o=(0,g.Z)(r,2),a=o[0],l=o[1];return q.p.mark({class:"replit-thread-highlight cm-thread-".concat(e),attributes:{style:"background-color: ".concat(i?l:a)},id:e}).range(t,n)}(e.id,e.indexStart,e.indexEnd,m,t)})).filter((function(t){return null!==t&&t.from!==t.to&&t.from<=e.doc.length&&t.to<=e.doc.length})),!0)})),q.tk.decorations.compute([sr.OQ,sr.ZS,sr.PQ],(function(e){var t=e.field(sr.OQ),n=e.field(sr.ZS),r=e.field(sr.PQ),i=(0,o.Z)(Object.values(t)).concat((0,o.Z)(n?[n]:[])).filter(Boolean).find((function(e){return e.id===r}));return i?q.p.set([q.p.widget({widget:new sr.nE(i.id,s),block:!0,side:1}).range(i.indexEnd)],!0):q.p.none})),q.tk.updateListener.of((function(e){(0,Ce.j)(e,Ur.R,(function(){var t=(0,o.Z)(e.view.dom.querySelectorAll(".cm-thread-portal-widget")),n=e.view.dom.querySelector(".cm-scroller"),r=e.view.dom.querySelector(".cm-gutters");if(t.length&&n&&r){var i=!0,a=!1,l=void 0;try{for(var c,u=t[Symbol.iterator]();!(i=(c=u.next()).done);i=!0){var s=c.value;(0,Ma.L)(s,n,r)}}catch(d){a=!0,l=d}finally{try{i||null==u.return||u.return()}finally{if(a)throw l}}}}))})),q.tk.updateListener.of((function(e){(0,Ce.j)(e,sr.eR,(function(n){var r=n.value,i=e.state.field(sr.OQ)[r];i&&(null===t||void 0===t||t.dispatch({selection:{anchor:i.indexStart,head:i.indexStart},effects:[q.tk.scrollIntoView(i.indexStart,{x:"center",y:"center"})]}))}))}))]},c=(0,g.Z)(b.useState({}),2),u=c[0],s=c[1],d=(0,Ve.Z)({view:t}),f=(0,Na.x)(),p=(0,Xa.kM)();b.useEffect((function(){t&&p&&t.dispatch({effects:[sr.YM.of(p),sr.eR.of(p)]})}),[t,p]);var h=(0,Fa.F)().theme,v=(0,g.Z)(b.useState([hr.TV.accentPrimaryDimmest,hr.TV.accentPrimaryDimmer]),2),m=v[0],y=v[1];b.useEffect((function(){var e=h.values.global.accentPrimaryDimmest,t=(0,Oa.w)(e),n="rgba(".concat(t.join(","),", 0.5)");y([n,hr.TV.accentPrimaryDimmer])}),[h]),b.useEffect((function(){if(t&&i)return t.dispatch({effects:d.reconfigure(l())}),function(){t.dispatch({effects:d.reconfigure([])})}}),[t,n,d,i]);return function(e,t,n,i){var o=(0,te.Z)().fs,a=(0,Aa.kL)(n),l=a.contentRef,c=a.loadedFile,u=a.transformSelectionRef;b.useEffect((function(){var a=!1,s=u.current,d=l.current;if(c&&s&&d&&!i&&t){var f=Object.values(e);0!==f.length?Promise.all(f.map((function(e){return(0,Aa.Ft)({anchor:e,version:o.getOTVersion(n),transformSelection:s,content:d})}))).then((function(e){if(!a){var n=e.filter((function(e){return Boolean(e)})).map((function(e){if(!e)throw new Error("expected resolved anchor");return(0,r.Z)({},e.anchor,null===e||void 0===e?void 0:e.newSelection)}));return t.dispatch({effects:sr.qi.of(n.reduce((function(e,t){return e[t.id]=t,e}),{}))}),function(){a=!0,t&&t.dispatch({effects:sr.qi.of({})})}}})):t.dispatch({effects:sr.qi.of({})})}}),[e,t,c,o,u,l,n,i])}(Ua(n,a,!0,i),t,n,a),{threadElements:u}}var Ha=n(96351),Va=n(88132),za=n(58027),ja=n(10452),qa=n(97318),$a=n(24025),Ya=n(9911),Ka=n(98150),Qa=n(9353),Ja=n(9247),el=n(57835),tl=n(21371),nl=n(46179),rl=n(35301),il=n(47518),ol=n(73785),al=n(57370),ll=function(e){var t=e.isCreating,n=e.threadId,r=e.filePath,i=e.isResolved,o=e.isLoading,l=e.isPlaceholder,c=e.caretPosition,u=e.onRequestClose,s=void 0===u?function(){}:u,d=e.onResolveThread,f=void 0===d?function(){}:d,p=e.openThreadsInbox,h="Inbox",v="Next thread",m="Previous thread",g="Collapse",y=Ua(null===r?"":r,o,!0,!0),Z=[12,8];switch((0,Rn.Z)().preferences.fontSize){case 10:Z=[8,6];break;case 14:Z=[10,6];break;case 18:Z=[12,8];break;case 24:Z=[14,10]}var w=b.useMemo((function(){return Object.values(y).sort((function(e,t){return e.indexStart-t.indexStart}))}),[y]),C=b.useMemo((function(){return w.findIndex((function(e){return e.id===n}))}),[w,n]),S=(0,Xa.a9)(),T=function(){var e=(0,H.Z)((function(){var e;return(0,V.__generator)(this,(function(t){return e=C===w.length-1?w[0].id:w[C+1].id,S(e),[2]}))}));return function(){return e.apply(this,arguments)}}(),E=function(){var e=(0,H.Z)((function(){var e;return(0,V.__generator)(this,(function(t){return e=0===C?w[w.length-1].id:w[C-1].id,S(e),[2]}))}));return function(){return e.apply(this,arguments)}}();return(0,a.BX)(ba.Tg,{background:"root",css:[k.l0.flex.row,k.l0.align.center,k.l0.justify.spaceBetween,k.l0.position.relative,k.l0.px(12),k.l0.py(8),{borderBottomWidth:k.TV.borderWidthDefault,borderBottomStyle:"solid",borderBottomColor:k.TV.outlineDimmest}],children:[null!==c&&(0,a.tZ)("span",{css:[k.l0.position.absolute,k.l0.top(-Z[1]),k.l0.left(c),k.l0.height("fit-content"),k.l0.display.flex,k.l0.flex.row,k.l0.align.center],children:(0,a.tZ)(Nr,{caretSize:Z})}),(0,a.tZ)(Mn.zx,{iconLeft:(0,a.tZ)(Ka.Z,{}),onClick:function(){p()},text:h,small:!0}),w.length>1?(0,a.BX)(x.G,{css:[k.l0.flex.row,k.l0.align.center,k.l0.rowWithGap(4)],children:[(0,a.tZ)(Nn.h,{alt:m,onClick:E,children:(0,a.tZ)(za.Z,{})}),(0,a.BX)(fe.xv,{color:"dimmest",variant:"small",multiline:!1,children:[C+1,"/",w.length]}),(0,a.tZ)(Nn.h,{alt:v,onClick:T,children:(0,a.tZ)(Va.Z,{})})]}):null,(0,a.BX)(x.G,{css:[k.l0.flex.row,k.l0.align.center,k.l0.rowWithGap(4)],children:[t||i||l?null:(0,a.tZ)(Mn.zx,{onClick:f,text:"Resolve",small:!0,iconLeft:(0,a.tZ)(On.Z,{})}),!t&&i?(0,a.tZ)(Ha.D,{text:"Resolved",colorway:"positive"}):null,(0,a.tZ)(Mn.zx,{onClick:s,text:g,small:!0,iconLeft:(0,a.tZ)(Ya.Z,{})})]})]})},cl=function(e){var t,n=e.threadId,o=e.isResolved,l=e.onMessageChange,c=e.onMessageSubmit,u=e.isPlaceholder,s=e.onRequestClose,d=void 0===s?function(){}:s,f=(0,g.Z)(b.useState(""),2),p=f[0],h=f[1],v=(0,g.Z)(b.useState(st().v4()),2),m=v[0],y=v[1],w=(0,br.Z)(),C=w.ref,S=w.update,T=b.useRef(null),E={placeholder:function(){return u?"Start a new thread\u2026 (Markdown is supported)":o?"Reply to re-open thread\u2026":"Reply\u2026 (Markdown is supported)"}},R="Post reply",G="Cancel",I=function(){var e=p.trim();0!==e.length&&(c({message:e,messageId:m}),h(""),y(st().v4()))},_=(0,al.d)(),D=(0,nl.Z)(),B=(0,g.Z)((0,el.Z)({"@":function(){var e=(0,H.Z)((function(e){var t,n;return(0,V.__generator)(this,(function(r){return t=D.filter((function(e){return e.id!==_})),e&&(n=e.toLowerCase(),t=t.filter((function(e){return e.username.toLowerCase().startsWith(n)}))),[2,t.slice(0,5).map((function(e){return{icon:(0,a.tZ)(Ja.Z,{url:e.image,style:{height:"24px",width:"24px",minWidth:"24px",minHeight:"24px"}}),value:e.username}}))]}))}));return function(t){return e.apply(this,arguments)}}()}),2),P=B[0].suggestions,A=B[1],L=(0,tl.Kb)({items:(null===P||void 0===P?void 0:P.results)||[],defaultHighlightedIndex:0,isOpen:(null!==(t=null===P||void 0===P?void 0:P.results.length)&&void 0!==t?t:0)>0,onSelectedItemChange:function(e){var t=e.selectedItem;if(P&&t){var n=P.applySuggestion({targetValue:p,suggestionValue:t.value}),r=n.fullValue,i=n.cursorIndex;h(r),setTimeout((function(){T.current&&(T.current.setSelectionRange(i,i),T.current.focus(),S())}))}}}),U=L.isOpen,X=L.getInputProps,M=L.getMenuProps,N=L.getItemProps,O=L.highlightedIndex,F=L.getComboboxProps;return b.useEffect((function(){var e="threads/drafts/".concat(n),t=Ba.Z.get(e,"string");t&&h(t);var r=T.current;return function(){if(r){var t=r.value;0!==t.length?Ba.Z.set(e,t):Ba.Z.remove(e)}}}),[n]),(0,a.BX)(ba.Tg,{background:"root",css:[k.l0.px(12),k.l0.pb(8),k.l0.pt(8),{borderTop:"1px solid ".concat(k.TV.outlineDimmest)}],className:"inline-thread-input",children:[(0,a.BX)("div",(0,i.Z)((0,r.Z)({css:[k.l0.flex.row,k.l0.align.start,k.l0.rowWithGap(8),k.l0.width("full")]},F()),{className:"jsx-45ff32690e481e34",children:[u?(0,a.tZ)(Mn.zx,{text:G,onClick:d}):null,(0,a.BX)("div",{css:[{width:"100%"}],className:"jsx-45ff32690e481e34",children:[(0,a.tZ)(wr.B,(0,r.Z)({},X({ref:function(e){T.current=e,C(e),A(e)},value:p,onChange:function(e){var t=e.target.value;h(t),l({message:t,messageId:m})},onKeyDown:function(e){U||(e.preventDownshiftDefault=!0,"Enter"!==e.key||e.shiftKey||(e.stopPropagation(),e.preventDefault(),I(),requestAnimationFrame((function(){S()}))))},onKeyUp:function(e){"Escape"===e.key&&(e.stopPropagation(),e.preventDefault(),d())},placeholder:E.placeholder(),css:[k.l0.height(32),k.l0.align.start,{resize:"vertical",width:"100%",flexGrow:1}],autoFocus:!0}))),(0,a.tZ)("div",{css:{position:"relative"},className:"jsx-45ff32690e481e34",children:(0,a.tZ)("div",(0,i.Z)((0,r.Z)({},M({css:[{position:"absolute",top:k.TV.space2,overflow:"hidden"},k.l0.borderRadius(16),k.l0.shadow(1),k.l0.backgroundColor.backgroundDefault]})),{className:"jsx-45ff32690e481e34",children:null===P||void 0===P?void 0:P.results.map((function(e,t){return(0,b.createElement)("div",(0,i.Z)((0,r.Z)({},N({item:e,index:t})),{key:e.value,className:"jsx-45ff32690e481e34"}),(0,a.BX)(rl.Ug,{spacing:2,css:[O===t?k.l0.backgroundColor.backgroundHighest:null,k.l0.p(8)],children:[e.icon,(0,a.tZ)("div",{className:"jsx-45ff32690e481e34",children:e.value})]}))}))}))})]}),(0,a.tZ)(x.G,{css:[k.l0.pt(4)],children:(0,a.tZ)(Nn.h,{alt:R,tooltipDelay:"long",onClick:I,children:(0,a.tZ)(xr.Z,{})})})]})),(0,a.tZ)(Z(),{id:"45ff32690e481e34",children:".inline-thread-input .popover-control-container{-webkit-box-flex:1;-webkit-flex-grow:1;-moz-box-flex:1;-ms-flex-positive:1;flex-grow:1}"})]})};var ul=function(e){var t,n=e.threadId,r=e.isCreating,i=e.isResolved,l=void 0!==i&&i,c=e.view,u=e.filePath,s=e.openThreadsInbox,d=(0,qa.Z)(n,c,u),f=d.thread,p=d.loading,h=d.isPlaceholder,v=d.getLatestAnchor,m=d.updateThread,g=d.changeThreadMessage,y=d.finalizeThreadMessage,Z=function(){null===c||void 0===c||c.dispatch({effects:[sr.YM.of(null)]})},w=(0,Rn.Z)().preferences.fontSize,C=(0,b.useRef)(null);(0,ol.Z)(f);var S=v(),T=c&&!p&&"number"===typeof(null===S||void 0===S?void 0:S.indexEnd)&&S.indexEnd<=c.state.doc.length?null===(t=c.coordsAtPos(S.indexEnd))||void 0===t?void 0:t.left:null,E=(null===c||void 0===c?void 0:c.dom.getBoundingClientRect().left)||null,R=T&&E?T-E-6:null,G=w;switch(w){case 10:G=13;break;case 14:G=19;break;case 18:G=25;break;case 24:G=34}var I=(0,ji.Z)().showConfirm,_=(0,Xo.Z)(),D=(0,b.useRef)(null);b.useEffect((function(){setTimeout((function(){D.current&&(D.current.scrollTop=D.current.scrollHeight)}),0)}),[null===f||void 0===f?void 0:f.messages]);var B=b.useMemo((function(){return(null===f||void 0===f?void 0:f.messages)?(0,o.Z)(f.messages).sort((function(e,t){return Date.parse(e.timeCreated)-Date.parse(t.timeCreated)})):[]}),[null===f||void 0===f?void 0:f.messages]),P=function(e){var t=(0,b.useRef)(0);return(0,$.Z)((function(n){var r=n.height;r!==t.current&&(null===e||void 0===e||e.requestMeasure()),t.current=r}))}(c);return(0,a.tZ)("div",{css:[k.l0.width("100%"),k.l0.backgroundColor.backgroundRoot],children:(0,a.BX)(x.G,{innerRef:(0,il.l)(C,P),css:[k.l0.font.default,{borderTopWidth:k.TV.borderWidthDefault,borderBottomWidth:k.TV.borderWidthDefault,borderStyle:"solid",borderColor:k.TV.accentPrimaryDefault}],children:[h||p?null:(0,a.tZ)(ll,{isCreating:r,isResolved:l,isLoading:p,threadId:n,filePath:u,caretPosition:R,isPlaceholder:h,onRequestClose:Z,onResolveThread:function(){m({changes:{isResolved:!0}}),I("Thread resolved. You can reopen it from the inbox.")},openThreadsInbox:s}),!p||h?(0,a.BX)(a.HY,{children:[!r&&B.length>0?(0,a.tZ)("div",{css:[k.l0.px(12),k.l0.py(12),k.l0.maxHeight(300),k.l0.overflowY("auto"),k.l0.colWithGap(16),k.l0.fontSize(w)],ref:D,children:B.map((function(e){return(0,a.tZ)(ja.Z,{thread:f,message:e},e.id)}))}):null,(0,a.tZ)(cl,{threadId:n,isPlaceholder:h,isResolved:l,onRequestClose:Z,onMessageChange:g,onMessageSubmit:function(e){y(e),(0,K.j)(Qa.U3.MESSAGE_SENT,{replId:_,source:"threads",newThread:h})}})]}):(0,a.tZ)(x.G,{css:[k.l0.height(G)],children:(0,a.tZ)($a.Z,{viewBox:"0 0 400 21",backgroundColor:k.TV.accentPrimaryDimmest,backgroundOpacity:0,foregroundColor:k.TV.accentPrimaryDimmest,foregroundOpacity:.2,speed:1,children:(0,a.tZ)("rect",{x:"0",y:"0",width:"100%",height:"100%"})})})]})})},sl=n(52491);var dl=n(75205),fl=n(6191);var pl=function(e){(0,ce.Z)(n,e);var t=(0,ue.Z)(n);function n(e,r){var i;return(0,le.Z)(this,n),(i=t.call(this)).src=e,i.pos=r,i}var r=n.prototype;return r.eq=function(e){return this.src===e.src&&this.pos===e.pos},r.toDOM=function(){var e=document.createElement("img");return e.src=this.src,e.dataset.pos=this.pos.toString(),e.style.maxHeight="64px",e.style.maxWidth="256px",e},r.ignoreEvent=function(){return!1},n}(q.l9),hl=/"data:image\/\w+;base64,[^"\s]+"/g,vl=Number.MAX_VALUE,ml=q.lg.define((function(e){var t=new q.Y1({regexp:hl,decoration:function(e,t,n){if(void 0===e[0])throw new Error("Failed to match image");var r=e[0].substring(1,e[0].length-1);return q.p.replace({widget:new pl(r,n)})},maxLength:vl});return{matcher:t,deco:t.createDeco(e),update:function(e){e.docChanged&&(this.deco=t.updateDeco(e,this.deco))}}}),{decorations:function(e){return e.deco},provide:function(e){return q.tk.atomicRanges.of((function(t){var n=t.plugin(e);return n?n.deco:q.p.none}))}});var gl=n(30826),yl=n.n(gl),Zl=new Set,bl=yl()((function(){var e=!0,t=!1,n=void 0;try{for(var r,i=Zl[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var o=r.value;(0,K.j)(K.U3.WS_TYPED,{fileExt:o})}}catch(a){t=!0,n=a}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}Zl.clear()}),6e4);function wl(e){var t=e.view,n=e.onType,r=e.filePath,i=(0,Ve.Z)({view:t});b.useEffect((function(){if(t&&n&&r){var e=(0,ie.r6)(r)||(0,ie.UO)(r);return t.dispatch({effects:i.reconfigure(q.tk.updateListener.of((function(t){t.docChanged&&(t.transactions.some((function(e){return e.annotation(j.YW.remote)}))||function(e){Zl.has(e)||(Zl.add(e),bl())}(e))})))}),function(){t.dispatch({effects:i.reconfigure([])})}}}),[t,n,r,i])}var xl=n(88161),kl=n(38353),Cl=n(12171),Sl=n(9608),Tl=n(88254);function El(e){return{filePath:e,text:"",selections:[],hasFocus:!1}}function Rl(e,t){return null==t?El(e):{filePath:e,text:null!==(n=t.state.doc.toString())&&void 0!==n?n:"",selections:t.state.selection.ranges.map((function(e){var t=e.from;return{location:t,length:e.to-t}})),hasFocus:t.hasFocus};var n}function Gl(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:ae()(),i=Rl(e,t),o={messageType:xl.cF.TEXT_EDITOR_STATE,filePath:e,text:i.text,selections:i.selections,hasFocus:i.hasFocus,hasGhostwriterSuggestion:n.hasGhostwriterSuggestion,revisionId:n.revisionId};(0,Cl.bG)(o,r)}function Il(e,t,n,r,i){return r===e&&r===n.textEditorState.filePath&&(t===n.textEditorState.filePath&&i===n.revisionId)}function _l(e){var t=e.map((function(e){return j.jT.range(e.location,e.location+e.length)}));return j.jT.create(t)}function Dl(e,t,n,r,i,o){var a=i.payload;if((0,xl.Se)(a))return function(e,t,n,r,i){if(!Il(e,t,r,i.filePath,i.revisionId))return!1;var o=_l(i.selections);return n.dispatch({selection:o,scrollIntoView:!0}),!0}(e,t,n,r,a);if((0,xl.m7)(a))return function(e,t,n,r,i){if(!Il(e,t,r,i.filePath,i.revisionId))return!1;var o=Rl(e,n),a=_l(i.selections);return n.dispatch({changes:{from:0,to:o.text.length,insert:i.text},selection:a,scrollIntoView:!0}),!0}(e,t,n,r,a);if((0,xl.ac)(a))return function(e,t,n,r,i){if(!Il(e,t,r,i.filePath,i.revisionId))return!1;var o=i.insertionRange,a=_l(i.selections);return n.dispatch({changes:{from:o.location,to:o.location+o.length,insert:i.text},selection:a,scrollIntoView:!0}),!0}(e,t,n,r,a);if((0,xl.fz)(a))return function(e,t,n,r,i){return!!Il(e,t,r,i.filePath,i.revisionId)&&(n.dispatch(n.state.replaceSelection(i.text)),!0)}(e,t,n,r,a);if((0,xl.T$)(a))!function(e,t,n,r,i){!!Il(e,t,r,i.filePath,i.revisionId)&&gi({filePath:e,view:n,clipboardText:i.text})}(e,t,n,r,a);else{if(!(0,xl.aB)(a))throw new Error("Invalid payload.");switch(a.action){case xl.b9.REQUEST_BLUR:return function(e,t,n,r,i,o){if(!Il(e,t,r,i,o))return!1;n.contentDOM.blur()}(e,t,n,r,a.filePath,a.revisionId);case xl.b9.REQUEST_UNDO:return function(e,t,n,r,i,o){if(!Il(e,t,r,i,o))return!1;return(0,T.Yw)(n),!0}(e,t,n,r,a.filePath,a.revisionId);case xl.b9.REQUEST_REDO:return function(e,t,n,r,i,o){if(!Il(e,t,r,i,o))return!1;return(0,T.KX)(n),!0}(e,t,n,r,a.filePath,a.revisionId);case xl.b9.REQUEST_INDENT_SELECTION:return function(e,t,n,r,i){return!!Il(e,t,r,i.filePath,i.revisionId)&&(T.at(n),!0)}(e,t,n,r,a);case xl.b9.REQUEST_DEDENT_SELECTION:return function(e,t,n,r,i){return!!Il(e,t,r,i.filePath,i.revisionId)&&(T.xi(n),!0)}(e,t,n,r,a);case xl.b9.REQUEST_TOGGLE_COMMENT:return function(e,t,n,r,i){return!!Il(e,t,r,i.filePath,i.revisionId)&&(T.O8(n),!0)}(e,t,n,r,a);case xl.b9.REQUEST_ACCEPT_GHOSTWRITER_SUGGESTION:return function(e,t,n,r,i,o){return!!Il(e,t,r,i.filePath,i.revisionId)&&!!(0,kl.$o)(n)&&((0,K.j)(K.U3.CODE_SUGGESTION_USED,{type:"suggestionAccepted",language:(0,Sl.S)(e),engine:o}),Tl.n_({category:"ghostwriter",message:"Suggestion accepted",level:"info"}),(0,ze._B)(n),!0)}(e,t,n,r,a,o);case xl.b9.REQUEST_FOCUS:return function(e){return e.focus(),!0}(n);default:throw new Error("Unknown BridgeTextEditorAction.")}}}var Bl=n(31858),Pl=n(70232);function Al(e){var t=e.view,n=e.filePath,r=(0,p.useRouter)(),i=(0,l.Vg)(r),o=(0,b.useRef)({revisionId:ae()(),textEditorState:El(n),hasGhostwriterSuggestion:!1}),a=(0,b.useRef)(n),c=(0,Bl.Z)().engine,u=(0,Ve.Z)({view:t});(0,b.useEffect)((function(){if(t&&i){var e=Rl(n,t);o.current={revisionId:ae()(),textEditorState:e,hasGhostwriterSuggestion:o.current.hasGhostwriterSuggestion},Gl(n,t,o.current);return t.dispatch({effects:u.reconfigure(q.tk.updateListener.of((function(r){!function(r){var i,a=(0,un.Z)(t.state),l=(null===(i=o.current)||void 0===i?void 0:i.hasGhostwriterSuggestion)!==a;r.docChanged?(o.current={revisionId:ae()(),textEditorState:e,hasGhostwriterSuggestion:a},Gl(n,t,o.current)):(r.selectionSet||r.focusChanged||l)&&(o.current={revisionId:o.current.revisionId,textEditorState:e,hasGhostwriterSuggestion:a},Gl(n,t,o.current))}(r)})))}),function(){t.dispatch({effects:u.reconfigure([])})}}}),[t,n,u,i]),(0,b.useEffect)((function(){if(t&&i){var e=function(e){Gl(n,t,o.current,e.messageId)},r=function(r){Dl(n,a.current,t,o.current,r,c)?e(r):(0,Cl.pl)(r.messageId)},l=function(i){try{var l=i.data;if(!(0,xl.CF)(l))return;if(l.protocolVersion!==xl.Wj)return;var u=l.payload;l.messageDirection===xl.s1.TO_NATIVE&&(0,xl.H7)(u)&&(a.current=u.activePaneFilePath),(0,Cl.fp)(i,(function(i){var u=i.type;switch(u){case xl.cF.TEXT_EDITOR_STATE_REQUEST:e(l);break;case xl.cF.REQUEST_SET_SELECTION:case xl.cF.REQUEST_REPLACE_SELECTION:case xl.cF.REQUEST_SET_TEXT:case xl.cF.REQUEST_INSERT_TEXT:case xl.cF.REQUEST_PASTE_TEXT:r(l);break;case xl.cF.TEXT_EDITOR_REQUEST_ACTION:!function(r){Dl(n,a.current,t,o.current,r,c)?e(r):(0,Cl.pl)(r.messageId)}(l);break;default:(0,Pl.Z)(u)}}))}catch(s){throw new Error("Invalid message: ".concat(s))}};return window.addEventListener("message",l),Gl(n,t,o.current),function(){!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ae()(),n={messageType:xl.cF.TEXT_EDITOR_CLOSED,filePath:e};(0,Cl.bG)(n,t)}(n),window.removeEventListener("message",l)}}}),[t,n,i,c])}var Ll=n(49514);var Ul=n(20864);function Xl(e){var t=e.selection.main.head,n=e.doc.lineAt(t);return{offset:t,line:n.number,column:t-n.from+1}}var Ml,Nl,Ol=n(80906);function Fl(e){var t=e.view,n=e.path,r=e.isHidden,i=(0,Ol.NH)();!function(e,t){var n=(0,Ri.Z)(t);Ii((function(){return q.tk.focusChangeEffect.of((function(t){return(null===e||void 0===e?void 0:e.hasFocus)?n.current({type:"focus",position:Xl(t)}):n.current({type:"blur"}),null}))}),[e,n],e,"useCursorChange"),Ii((function(){return q.tk.updateListener.of((function(e){e.selectionSet&&n.current({type:"update",hasFocus:e.view.hasFocus,position:Xl(e.state)})}))}),[n],e,"useCursorChange"),(0,b.useEffect)((function(){return function(){n.current({type:"unmount"})}}),[])}(t,(function(e){i(n,e)})),(0,b.useEffect)((function(){i(n,r?{type:"hidden"}:{type:"unhidden"})}),[r])}var Wl=function(e){(0,ce.Z)(n,e);var t=(0,ue.Z)(n);function n(e){var r;return(0,le.Z)(this,n),(r=t.call(this)).type=e,r}return n.from=function(e){switch(e){case"yours":return this.yours;case"base":return this.base;case"middle":return this.middle;case"theirs":return this.theirs}},n.range=function(e,t,n){return this.from(e).range(t,n)},n}(j.uU);function Hl(e){switch(e){case"<":return"yours";case"|":return"base";case"=":return"middle";case">":return"theirs";default:return null}}function Vl(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:7;if(e.text.length<t)return null;var n=e.text[0],r=Hl(n);if(!r)return null;var i=n.repeat(t),o=e.text.slice(0,t);return o!==i||e.text.length>t&&" "!==e.text[t]?null:r}function zl(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:7,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length,i=[],o=n;o<=r;){var a=e.lineAt(o),l=Vl(a,t);l&&i.push(Wl.range(l,a.from,a.to)),o=a.to+1}return i}Wl.yours=new Wl("yours"),Wl.base=new Wl("base"),Wl.middle=new Wl("middle"),Wl.theirs=new Wl("theirs");var jl=["yours","base","middle","theirs"];function ql(e){Array.isArray(e)&&(e=j.Xs.of(e));var t=[],n=[];if(0===e.size)return{hunks:t,hanging:n};for(var r=e.iter();null!==r.value;){var i={},a={},l=[],c=!0,u=!1,s=void 0;try{for(var d,f=jl[Symbol.iterator]();!(c=(d=f.next()).done);c=!0){var p=d.value,h=r.value,v=r.from,m=r.to;if("base"!==p||h.type===p){if(h.type===p)i[p]={from:v,to:m},l.push({from:v,to:m,type:h.type});else{if("yours"===h.type)break;l.push({from:v,to:m,type:h.type})}if(r.next(),null===r.value)break}}}catch(G){u=!0,s=G}finally{try{c||null==f.return||f.return()}finally{if(u)throw s}}if(i.yours&&i.middle&&i.theirs){var g,y,Z;null!==(g=(Ml=i).base)&&void 0!==g||(Ml.base=null),null!==(y=(Nl=a).base)&&void 0!==y||(Nl.base=null);var b=null!==(Z=i.base)&&void 0!==Z?Z:i.middle,w=i.yours.to+1,x=b.from-1;if(a.yours=w<x?{from:w,to:x}:null,i.base){var k=i.base.to+1,C=i.middle.from-1;a.base=k<C?{from:k,to:C}:null}var S=i.middle.to+1,T=i.theirs.from-1;a.theirs=S<T?{from:S,to:T}:null;var E={from:i.yours.from,to:i.theirs.to,markers:i,content:a};t.push(E)}else{var R;(R=n).push.apply(R,(0,o.Z)(l))}}return{hunks:t,hanging:n}}var $l,Yl=j.r$.define({combine:function(e){return e.length?e[0]:7}}),Kl=j.QQ.define({create:function(e){var t=e.doc,n=e.facet(Yl),r=j.Xs.of(zl(t,n)),i=ql(r);return{markers:r,hunks:i.hunks,hanging:i.hanging}},update:function(e,t){var n=t.newDoc,r=t.startState.facet(Yl),i=t.state.facet(Yl);if(r!==i){var o=j.Xs.of(zl(n,i)),a=ql(o);return{markers:o,hunks:a.hunks,hanging:a.hanging}}if(!t.docChanged)return e;var l=null,c=null,u=null,s=null;t.changes.iterChangedRanges((function(e,t,n,r){l=null===l?e:Math.min(l,e),c=null===c?t:Math.max(c,t),u=null===u?n:Math.min(u,n),s=null===s?r:Math.max(s,r)}));var d=e.markers;if(null!==l&&null!==c){var f=t.startState.doc.lineAt(l).from,p=t.startState.doc.lineAt(c).to;d=d.update({filter:function(){return!1},filterFrom:f,filterTo:p})}d=d.map(t.changes),null!==u&&null!==s&&(d=d.update({add:zl(n,i,u,s)}));var h=ql(d);return{markers:d,hunks:h.hunks,hanging:h.hanging}}}),Ql=[q.tk.atomicRanges.from(Kl,(function(e){return function(){return e.markers}})),j.yy.changeFilter.of((function(e){var t=e.startState.field(Kl);if(!e.docChanged||0===t.markers.size)return!0;var n=e.startState.doc,r=[];return e.changes.iterChanges((function(e,i,o,a,l){var c=l.length,u=Math.max(n.lineAt(e).from-1,0),s=Math.min(n.lineAt(i).to+1,n.length);t.markers.between(u,s,(function(t,u){if(!(e<=t&&i>=u)&&(0===c||!(e===u&&"\n"===l.sliceString(0,1)||i===t&&"\n"===l.sliceString(c-1,c)))){if(o===a){if(i===u+1&&0===n.lineAt(i).length)return;if(e===t-1&&0===n.lineAt(e).length)return}r.push(t-1,u+1)}}))})),!(r.length>0)||r})),j.yy.transactionFilter.of((function(e){var t=e.docChanged?e.state.field(Kl):e.startState.field(Kl);if(0===t.markers.size)return e;var n=e.newSelection,r=!1,i=!1;do{var o=function(e){var o=n.ranges[e],a=o.from,l=o.to,c=a,u=l;if(t.markers.between(a,l,(function(e,t){var n=(e+t)/2;a>e&&a<t&&(c=a<n?e:t),l>e&&l<t&&(u=l<n?e:t)})),c!==a||u!==l){var s,d=o.anchor<o.head?c:u,f=o.anchor<o.head?u:c,p=o.goalColumn,h=null!==(s=o.bidiLevel)&&void 0!==s?s:void 0,v=j.jT.range(d,f,p,h);return n=n.replaceRange(v,e),i=!0,r=!0,"break"}};i=!1;for(var a=0;a<n.ranges.length;a++){if("break"===o(a))break}}while(i);return r?[e,{selection:n,sequential:!0}]:e}))],Jl="cm-git-conflict-marker-yours",ec="cm-git-conflict-marker-base",tc="cm-git-conflict-marker-middle",nc="cm-git-conflict-marker-theirs",rc="cm-git-conflict-marker-hanging",ic="cm-git-conflict-content-yours",oc="cm-git-conflict-content-base",ac="cm-git-conflict-content-theirs";function lc(e){var t=e.background,n=e.color,r=e.noBorder,i=void 0!==r&&r,o={color:n,backgroundColor:t,backgroundClip:"padding-box",paddingTop:k.TV.space4,paddingBottom:k.TV.space4,fontWeight:k.TV.fontWeightBold};return i||(o.borderLeft="4px solid rgba(0, 150, 255, 0.1)",o.paddingLeft="2px"),o}function cc(e){return{backgroundColor:e.background,backgroundClip:"padding-box",borderLeft:"4px solid rgba(0, 150, 255, 0.1)",paddingLeft:"2px"}}var uc,sc=q.tk.theme(($l={},(0,Gt.Z)($l,".".concat(Jl),lc({background:"rgba(0, 150, 255, 0.1)",color:k.TV.blueStrongest,noBorder:!0})),(0,Gt.Z)($l,".".concat(tc),lc({background:"rgba(255, 0, 0, 0.1)",color:k.TV.redStrongest})),(0,Gt.Z)($l,".".concat(ec),lc({background:"rgba(255, 165, 0, 0.1)",color:k.TV.orangeStrongest})),(0,Gt.Z)($l,".".concat(nc),lc({background:"rgba(0, 150, 255, 0.1)",color:k.TV.blueStrongest,noBorder:!0})),(0,Gt.Z)($l,".".concat(rc),lc({background:"rgba(100, 150, 255, 0.1)",color:k.TV.blueStrongest,noBorder:!0})),(0,Gt.Z)($l,".".concat(ic),cc({background:"rgba(0, 255, 0, 0.1)"})),(0,Gt.Z)($l,".".concat(ac),cc({background:"rgba(255, 0, 0, 0.1)"})),(0,Gt.Z)($l,".".concat(oc),cc({background:"rgba(255, 165, 0, 0.1)"})),$l)),dc={yours:{marker:q.p.line({class:Jl}),content:q.p.line({class:ic})},base:{marker:q.p.line({class:ec}),content:q.p.line({class:oc})},middle:{marker:q.p.line({class:tc})},theirs:{marker:q.p.line({class:nc}),content:q.p.line({class:ac})},hanging:{marker:q.p.line({class:rc})}},fc=function(){function e(t){(0,le.Z)(this,e),this.builder=new j.f_,this.doc=t}var t=e.prototype;return t.add=function(e,t){var n=this.doc.lineAt(e.from);if(n.to>=e.to)this.builder.add(n.from,n.from,t);else for(var r=n.from;r<=e.to;)this.builder.add(r,r,t),r=this.doc.lineAt(r).to+1},t.finish=function(){return this.builder.finish()},e}(),pc=q.tk.decorations.from(Kl,(function(e){return function(t){var n=t.state.doc,r=new fc(n),i=!0,o=!1,a=void 0;try{for(var l,c=e.hunks[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var u=l.value;t.viewport.from>u.to||t.viewport.to<u.from||(r.add(u.markers.yours,dc.yours.marker),u.content.yours&&r.add(u.content.yours,dc.yours.content),u.markers.base&&r.add(u.markers.base,dc.base.marker),u.content.base&&r.add(u.content.base,dc.base.content),r.add(u.markers.middle,dc.middle.marker),u.content.theirs&&r.add(u.content.theirs,dc.theirs.content),r.add(u.markers.theirs,dc.theirs.marker))}}catch(s){o=!0,a=s}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}return r.finish()}})),hc=q.tk.decorations.from(Kl,(function(e){return function(){var t=new j.f_,n=!0,r=!1,i=void 0;try{for(var o,a=e.hanging[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value;t.add(l.from,l.from,dc.hanging.marker)}}catch(c){r=!0,i=c}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return t.finish()}})),vc=[j.Wl.lowest(sc),pc,hc],mc=[Kl,Ql,vc],gc=n(92111),yc=function(){function e(t,n,r,i,o,a){(0,le.Z)(this,e),this.original=t,this.current=n,this.chunks=r,this.desc=i,this.pending=o,this.ranges=a}var t=e.prototype;return t.hasChanges=function(){return this.ranges.length>0},t.update=function(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=this.original,o=this.chunks,a=this.desc,l=this.pending,c=this.ranges,u=this.pending?this.pending.length:this.current.length,s=Math.abs(u-t.length);if(s>=250||r){var d=(0,gc.Gj)(a,l,n),f=d.pending;o=(0,gc.U_)(i,t,{chunks:o,changesB:f}),a=(0,gc.fu)(o,i.length),l=null,c=(0,gc.Hu)(a)}else{var p;l=(p=(0,gc.Gj)(a,l,n)).pending,a=p.desc,c=(0,gc.Hu)(a)}return l&&t.eq(i)&&(o=[],a=j.as.empty(i.length),l=null,c=[]),new e(i,t,o,a,l,c)},t.isAccurate=function(){return null===this.pending},t.getLineChangeType=function(e){var t=this.current.line(e);return 0===this.original.length&&this.current.length>0?gc.dQ.COVERED:(0,gc.dx)(t,gc.MF.B,this.ranges)},t.iterRanges=function(){return(0,V.__generator)(this,(function(e){switch(e.label){case 0:return[5,(0,V.__values)(this.ranges)];case 1:return e.sent(),[2]}}))},e.create=function(t,n){var r=(0,gc.U_)(t,n),i=(0,gc.fu)(r,t.length);return new e(t,n,r,i,null,(0,gc.Hu)(i))},e}(),Zc=j.r$.define({combine:function(e){return null!==(uc=e.filter(Boolean)[0])&&void 0!==uc?uc:null}});var bc,wc,xc,kc=j.QQ.define({create:function(){return null},update:function(e,t){var n=t.state.facet(Zc);return n?(e&&e.original.eq(n)?t.docChanged&&(e=e.update(t.newDoc,t.changes,function(e){return!(e.isUserEvent("input.type")||e.isUserEvent("delete.forward")||e.isUserEvent("delete.backward"))}(t))):e=yc.create(n,t.newDoc),e):null}}),Cc=k.TV.space2,Sc="cm-diff-gutter",Tc="".concat(Sc,"-element"),Ec="".concat(Tc,"-insertion"),Rc="".concat(Tc,"-modified"),Gc="".concat(Tc,"-deleted"),Ic="".concat(Tc,"-file-added"),_c=k.TV.greenDefault,Dc=k.TV.greenStronger,Bc=k.TV.blueDefault,Pc=k.TV.blueStronger,Ac=k.TV.redDefault,Lc=k.TV.redStronger,Uc=k.TV.greenDimmer,Xc=k.TV.greenDefault,Mc=q.tk.theme((bc={},(0,Gt.Z)(bc,".".concat(Tc),{width:Cc}),(0,Gt.Z)(bc,".".concat(Ec),{backgroundColor:_c,"&.cm-activeLineGutter":{backgroundColor:Dc}}),(0,Gt.Z)(bc,".".concat(Rc),{backgroundColor:Bc,"&.cm-activeLineGutter":{backgroundColor:Pc}}),(0,Gt.Z)(bc,".".concat(Gc),{backgroundColor:Ac,"&.cm-activeLineGutter":{backgroundColor:Lc}}),(0,Gt.Z)(bc,".".concat(Ic),{backgroundColor:Uc,"&.cm-activeLineGutter":{backgroundColor:Xc}}),bc)),Nc=new(function(e){(0,ce.Z)(n,e);var t=(0,ue.Z)(n);function n(){var e;return(0,le.Z)(this,n),(e=t.apply(this,arguments)).elementClass="".concat(Tc," ").concat(Ec),e}return n}(q.SJ)),Oc=new(function(e){(0,ce.Z)(n,e);var t=(0,ue.Z)(n);function n(){var e;return(0,le.Z)(this,n),(e=t.apply(this,arguments)).elementClass="".concat(Tc," ").concat(Gc),e}return n}(q.SJ)),Fc=new(function(e){(0,ce.Z)(n,e);var t=(0,ue.Z)(n);function n(){var e;return(0,le.Z)(this,n),(e=t.apply(this,arguments)).elementClass="".concat(Tc," ").concat(Rc),e}return n}(q.SJ)),Wc=new(function(e){(0,ce.Z)(n,e);var t=(0,ue.Z)(n);function n(){var e;return(0,le.Z)(this,n),(e=t.apply(this,arguments)).elementClass="".concat(Tc," ").concat(Ic),e}return n}(q.SJ)),Hc=new(function(e){(0,ce.Z)(n,e);var t=(0,ue.Z)(n);function n(){return(0,le.Z)(this,n),t.apply(this,arguments)}return n}(q.SJ)),Vc=(0,q.v5)({class:Sc,renderEmptyElements:!0,lineMarker:function(e,t){var n=e.state.field(kc,!1);if(!n||!n.hasChanges())return null;if(0===n.original.length)return Wc;var r=e.state.doc.lineAt(t.from);switch(n.getLineChangeType(r.number)){case gc.dQ.COVERED:return Nc;case gc.dQ.MODIFIED:return Fc;default:return null}},initialSpacer:function(e){return e.state.field(kc,!1)?Wc:Hc},updateSpacer:function(e,t){var n=t.state.field(kc,!1)?Wc:Hc;return e===n?e:n}}),zc=j.r$.define({enables:function(e){return[Zc.computeN([e],(function(t){return t.facet(e)})),Mc,kc,j.Wl.highest(Vc)]}}),jc=n(57600),qc=function(){function e(t,n,r,i){(0,le.Z)(this,e),this.a=t,this.b=n,this.chunks=r,this.map=i}var t=e.prototype;return t.line=function(e,t){return t===gc.MF.A?this.a.line(e):this.b.line(e)},t.bounds=function(e){if(0===this.chunks.length)return null;var t=(0,gc.Cf)(this.chunks[0],e),n=(0,gc.Cf)(this.chunks[this.chunks.length-1],e),r=e===gc.MF.A?this.a.length:this.b.length,i=Math.min(n.to,r);return{from:t.from,to:i}},t.hasChanges=function(){return this.chunks.length>0},t.updateA=function(t,n){var r=this.b,i=(0,gc.U_)(t,r,{chunks:this.chunks,changesA:n});return new e(t,r,i,(0,gc.XW)(t,r,i))},t.updateB=function(t,n){var r=this.a,i=(0,gc.U_)(r,t,{chunks:this.chunks,changesB:n});return new e(r,t,i,(0,gc.XW)(r,t,i))},t.getContainingChunk=function(e,t){for(var n=0,r=this.chunks.length-1;n<=r;){var i=n+r>>>1,o=this.chunks[i],a=(0,gc.Cf)(o,t);if(e>=a.from&&e<=a.to)return o;e<a.from?r=i-1:e>a.to&&(n=i+1)}return null},t.getCorrespondingLine=function(e,t){var n=this.map.get(t===gc.MF.A?-e:e);return n?this.line(n,(0,gc.rN)(t)):null},t.getLineChangeType=function(e,t){if(this.map.get(t===gc.MF.A?-e:e))return gc.dQ.UNCHANGED;var n=this.line(e,t),r=this.getContainingChunk(n.from,t);return r?(0,gc.dx)(n,t,r.changes,r):gc.dQ.UNCHANGED},t.iterLines=function(e){var t,n,r,i;return(0,V.__generator)(this,(function(o){switch(o.label){case 0:t=e===gc.MF.A?this.a:this.b,n=1,o.label=1;case 1:return n<=t.lines?(r=t.line(n),i=this.getCorrespondingLine(r.number,e),[4,{line:r,correspondingLine:i}]):[3,4];case 2:o.sent(),o.label=3;case 3:return n++,[3,1];case 4:return[2]}}))},t.iterRanges=function(){var e,t,n,r,i;return(0,V.__generator)(this,(function(o){switch(o.label){case 0:e=0,o.label=1;case 1:if(!(e<this.chunks.length))return[3,6];t=this.chunks[e].fromA,n=this.chunks[e].fromB,r=0,o.label=2;case 2:return r<this.chunks[e].changes.length?(i=this.chunks[e].changes[r],[4,{fromA:t+i.fromA,toA:t+i.toA,fromB:n+i.fromB,toB:n+i.toB}]):[3,5];case 3:o.sent(),o.label=4;case 4:return r++,[3,2];case 5:return e++,[3,1];case 6:return[2]}}))},e.create=function(t,n){var r=(0,gc.U_)(t,n);return new e(t,n,r,(0,gc.XW)(t,n,r))},e}(),$c=n(78194),Yc=j.r$.define({combine:function(e){return null!==(wc=e.filter(Boolean)[0])&&void 0!==wc?wc:null}}),Kc=j.QQ.define({create:function(){return{diff:null,tree:jc.mp.empty}},update:function(e,t){var n,r,i=t.state.facet(Yc),o=null===(n=t.state.facet(gt.dK))||void 0===n?void 0:n.parser;if(!i)return null===e.diff&&e.tree===jc.mp.empty?e:{diff:null,tree:jc.mp.empty};var a=e.diff,l=e.tree;return a&&a.a.eq(i)?t.docChanged&&(a=a.updateB(t.newDoc,t.changes)):(a=qc.create(i,t.newDoc),l=jc.mp.empty),(null===(r=t.startState.facet(gt.dK))||void 0===r?void 0:r.parser)!==o&&(l=jc.mp.empty),o&&l.length!==a.a.length?{diff:a,tree:l=(0,$c.p)({parser:o,text:a.a,maxTime:16,base:l})}:e.diff===a&&e.tree===l?e:{diff:a,tree:l}}}),Qc="cm-inline-diff-line-deletion-base",Jc="cm-inline-diff-line-deletion",eu="cm-inline-diff-text-deletion",tu="cm-inline-diff-line-insertion-base",nu="cm-inline-diff-line-insertion",ru="cm-inline-diff-text-insertion",iu="rgba(180, 0, 0, 0.075)",ou="rgba(180, 0, 0, 0.125)",au="rgba(0, 180, 0, 0.075)",lu="rgba(0, 180, 0, 0.125)",cu="cm-inline-diff-marker",uu="cm-inline-diff-marker-left",su="cm-inline-diff-marker-right";function du(e,t){var n="linear-gradient(to right, ".concat(e,", ").concat(e,")");return t&&(n+=", linear-gradient(to right, ".concat(t,", ").concat(t,")")),n}var fu,pu=q.tk.theme((xc={},(0,Gt.Z)(xc,".".concat(Qc,", .").concat(Jc),{cursor:"text","&.cm-line ::selection":{backgroundColor:"".concat(k.TV.accentPrimaryDimmest," !important")}}),(0,Gt.Z)(xc,".".concat(Qc),{background:du(iu)}),(0,Gt.Z)(xc,".".concat(Jc),{background:du(iu,ou)}),(0,Gt.Z)(xc,".".concat(tu),{background:du(au)}),(0,Gt.Z)(xc,".".concat(nu),{background:du(au,lu)}),(0,Gt.Z)(xc,".".concat(ru),{display:"inline-block",background:lu,"&:first-of-type":{backgroundClip:"padding-box",borderLeft:"3px solid ".concat(lu),paddingLeft:"3px",marginLeft:"-6px"}}),(0,Gt.Z)(xc,".".concat(eu),{display:"inline-block",background:ou,"&:first-of-type":{backgroundClip:"padding-box",borderLeft:"3px solid ".concat(ou),paddingLeft:"3px",marginLeft:"-6px"}}),(0,Gt.Z)(xc,".".concat(cu),{display:"flex",width:"100%",justifyContent:"space-between"}),(0,Gt.Z)(xc,".".concat(uu),{width:"calc(50% - 1ch)",textAlign:"right"}),(0,Gt.Z)(xc,".".concat(su),{width:"50%",textAlign:"right"}),xc)),hu=n(18599),vu=n(3341),mu=n.n(vu),gu=function(e){(0,ce.Z)(n,e);var t=(0,ue.Z)(n);function n(e,r,i){var o;return(0,le.Z)(this,n),(o=t.call(this)).line=e,o.index=r,o.changed=i,o}var r=n.prototype;return r.toDOM=function(){var e=this,t=document.createElement("div");if(t.className=this.changed?"cm-line ".concat(Qc):"cm-line ".concat(Jc),!this.changed||!this.changed.length){var n=!0,r=!1,i=void 0;try{for(var o,a=this.line[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value,c=l.text,u=l.tags,s=document.createElement("span");s.textContent=c||"\xa0",s.className=null!==u&&void 0!==u?u:"",t.appendChild(s)}}catch(C){r=!0,i=C}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return t}for(var d=0,f=0,p=null,h=null,v=function(t,n){if(!p)throw new Error("range is null");var r=e.line[f],i=r.text,o=r.tags,a=i.slice(d-p.from,n-p.from),l=document.createElement("span");l.textContent=a||"\xa0",l.className=null!==o&&void 0!==o?o:"",t.appendChild(l),d+=a.length};f<this.line.length;){if(!p){var m=this.line[f].text;p={from:d,to:d+m.length}}if(!h){var g=!0,y=!1,Z=void 0;try{for(var b,w=this.changed[Symbol.iterator]();!(g=(b=w.next()).done);g=!0){var x=b.value;if(!(x.from>=p.to||x.to<=d)){var k=document.createElement("span");k.className=eu,h={from:x.from,to:x.to,dom:k},d<h.from&&v(t,h.from),t.appendChild(k);break}}}catch(C){y=!0,Z=C}finally{try{g||null==w.return||w.return()}finally{if(y)throw Z}}}h?(d<h.to&&v(h.dom,h.to),d>=h.to&&(h=null)):v(t,p.to),d>=p.to&&(p=null,f++)}return t},r.eq=function(e){var t,r;return(0,vt.Z)(e,n)&&this.index===e.index&&this.line.length===e.line.length&&(null===(t=this.changed)||void 0===t?void 0:t.length)===(null===(r=e.changed)||void 0===r?void 0:r.length)&&mu()(this.line,e.line)&&mu()(this.changed,e.changed)},r.ignoreEvent=function(e){return e.stopImmediatePropagation(),!0},(0,Dt.Z)(n,[{key:"estimatedHeight",get:function(){return 21}}]),n}(q.l9),yu=q.p.line({class:tu}),Zu=q.p.line({class:nu}),bu=q.p.mark({class:ru}),wu=q.tk.decorations.compute([Kc],(function(e){var t=function(e,t){if(r.getLineChangeType(e.number,gc.MF.B)===gc.dQ.COVERED)o.push(Zu.range(e.from));else{o.push(yu.range(e.from));var n=!0,i=!1,a=void 0;try{for(var l,c=(0,gc.Po)(e,t,gc.MF.B,!1)[Symbol.iterator]();!(n=(l=c.next()).done);n=!0){var u=l.value;o.push(bu.range(u.from,u.to))}}catch(s){i=!0,a=s}finally{try{n||null==c.return||c.return()}finally{if(i)throw a}}}},n=e.field(Kc,!1);if(!n||!n.diff)return q.p.none;var r=n.diff,i=n.tree,o=[],a=!0,l=!1,c=void 0;try{for(var u,s=r.chunks[Symbol.iterator]();!(a=(u=s.next()).done);a=!0){var d=u.value;if(d.fromB!==d.endB)for(var f=r.b.lineAt(d.fromB),p=r.b.lineAt(d.endB),h=f.number;h<=p.number;h++)t(r.b.line(h),d);else d.fromA===d.endA&&t(r.b.lineAt(d.fromB),d);if(d.fromA!==d.toA)for(var v=r.a.lineAt(d.fromA),m=(0,hu.CT)(i,r.a,e,d.fromA,d.endA),g=0;g<m.length;g++){var y=m[g],Z=r.a.line(v.number+g),b=r.getLineChangeType(Z.number,gc.MF.A)===gc.dQ.COVERED?null:(0,gc.Po)(Z,d,gc.MF.A,!0),w=q.p.widget({widget:new gu(y,Z.number,b),block:!0,side:-(m.length-g)});o.push(w.range(d.fromB))}}}catch(x){l=!0,c=x}finally{try{a||null==s.return||s.return()}finally{if(l)throw c}}return q.p.set(o,!0)})),xu=(0,q.v5)({class:Sc,renderEmptyElements:!0,lineMarker:function(e,t){var n=e.state.field(Kc,!1);if(!n||!n.diff||!n.diff.hasChanges())return null;if(0===n.diff.a.length)return Nc;var r=e.state.doc.lineAt(t.from);switch(n.diff.getLineChangeType(r.number,gc.MF.B)){case gc.dQ.COVERED:case gc.dQ.MODIFIED:return Nc;default:return null}},widgetMarker:function(e,t){if(!(0,vt.Z)(t,gu))return null;var n=e.state.field(Kc,!1);if(!n||!n.diff||!n.diff.hasChanges())return null;switch(n.diff.getLineChangeType(t.index,gc.MF.A)){case gc.dQ.COVERED:case gc.dQ.MODIFIED:return Oc;default:return null}},initialSpacer:function(e){var t=e.state.field(Kc,!1);return(null===t||void 0===t?void 0:t.diff)?Nc:Hc},updateSpacer:function(e,t){var n=t.state.field(Kc,!1),r=(null===n||void 0===n?void 0:n.diff)?Nc:Hc;return e===r?e:r}}),ku=n(96302),Cu=function(e){(0,ce.Z)(n,e);var t=(0,ue.Z)(n);function n(e,r){var i;return(0,le.Z)(this,n),(i=t.call(this)).left=e,i.right=r,i}var r=n.prototype;return r.toDOM=function(e){var t=e.state.doc.lines.toString().length,n=document.createElement("div"),r=document.createElement("span"),i=document.createElement("span");return n.className=cu,r.className=uu,i.className=su,n.style.width="".concat(2*t+1,"ch"),null!==this.left&&(r.textContent=this.left.toString()),null!==this.right&&(i.textContent=this.right.toString()),n.appendChild(r),n.appendChild(i),n},r.eq=function(e){return(0,vt.Z)(e,n)&&this.left===e.left&&this.right===e.right},n}(q.SJ),Su=ku.X4.of((function(e,t){if((0,vt.Z)(t,gu))return new Cu(t.index,null)})),Tu=ku.gy.of((function(e,t){var n=e.state.field(Kc,!1);if(n&&n.diff&&n.diff.hasChanges()){var r,i=e.state.doc.lineAt(t.from),o=n.diff.getCorrespondingLine(i.number,gc.MF.B);return new Cu(null!==(r=null===o||void 0===o?void 0:o.number)&&void 0!==r?r:null,i.number)}})),Eu=[Tu,Su],Ru=j.r$.define({enables:function(e){return[Yc.computeN([e],(function(t){return t.facet(e)})),Mc,Kc,pu,wu,Eu,xu]}});!function(e){e.GUTTER_DIFF="GUTTER_DIFF",e.INLINE_DIFF="INLINE_DIFF"}(fu||(fu={}));var Gu=j.Py.define(),Iu=j.Py.define(),_u=j.QQ.define({create:function(){return{head:null,mode:fu.GUTTER_DIFF}},update:function(e,t){var n=e.head,r=e.mode,i=!0,o=!1,a=void 0;try{for(var l,c=t.effects[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var u=l.value;u.is(Gu)?n=u.value:u.is(Iu)&&(r=u.value)}}catch(s){o=!0,a=s}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}return n!==e.head||r!==e.mode?{head:n,mode:r}:e},provide:function(e){return[zc.from(e,(function(e){return e.mode===fu.GUTTER_DIFF?e.head:null})),Ru.from(e,(function(e){return e.mode===fu.INLINE_DIFF?e.head:null}))]}}),Du=function(){function e(t,n,r){var i=this;(0,le.Z)(this,e),this.view=t,this.git=n,this.path=r,this.disposed=!1,this.dispose=n.onRefresh((function(){return i.fetchThenUpdateState()})),this.fetchThenUpdateState()}var t=e.prototype;return t.fetchThenUpdateState=function(){var e=this;return(0,H.Z)((function(){var t,n,r,i,o;return(0,V.__generator)(this,(function(a){switch(a.label){case 0:return[4,e.git.getFileContents({path:e.path,revision:"HEAD"})];case 1:return t=a.sent(),e.disposed?[2]:(n=e.view.state.field(_u,!1))?(i=t.error?null:null!==(r=t.content)&&void 0!==r?r:"",(!(o=null===i?null:e.view.state.toText(i))!==!n.head||o&&n.head&&!o.eq(n.head))&&e.view.dispatch({effects:Gu.of(o)}),[2]):[2]}}))}))()},t.destroy=function(){this.dispose(),this.disposed=!0},e}();function Bu(e){var t=e.view,n=e.filePath,r=void 0===n?null:n,i=e.disableDiff,o=void 0!==i&&i,a=e.disableConflicts,l=void 0!==a&&a,c=(0,En.P5)({controlName:"flag-git-gud",logFlagToAnalytics:!1}),u=(0,En.P5)({controlName:"flag-git-gud-gutter",logFlagToAnalytics:!1}),s=(0,En.P5)({controlName:"flag-editor-git-conflict-markers",logFlagToAnalytics:!1}),d=(0,te.Z)().git;Ii((function(){var e=[];return o||e.push(function(e,t){if(!t)return[];var n=q.lg.define((function(n){return new Du(n,e,t)}));return[_u,n]}(d,r)),l||e.push(mc),0===e.length?null:e}),[l=!c||!s||l,o=!c||!u||o,r,d],t,"useGitEditorFeatures")}var Pu,Au=n(42082),Lu=n(13716),Uu=n(34227),Xu=n(64804),Mu=n(67850),Nu="cm-transform-diff-line-deletion-base",Ou="cm-transform-diff-line-deletion",Fu="cm-transform-diff-text-deletion",Wu="cm-transform-diff-line-insertion-base",Hu="cm-transform-diff-line-insertion",Vu="cm-transform-diff-text-insertion",zu="cm-transform-diff-number-marker",ju="rgba(180, 0, 0, 0.1)",qu="rgba(180, 0, 0, 0.125)",$u="rgba(0, 180, 0, 0.1)",Yu="rgba(0, 180, 0, 0.125)";function Ku(e,t){var n="linear-gradient(to right, ".concat(e,", ").concat(e,")");return t&&(n+=", linear-gradient(to right, ".concat(t,", ").concat(t,")")),n}var Qu,Ju,es=q.tk.theme((Pu={},(0,Gt.Z)(Pu,".".concat(Wu,", .").concat(Hu),{cursor:"text","&.cm-line ::selection":{backgroundColor:"".concat(k.TV.accentPrimaryDimmest," !important")}}),(0,Gt.Z)(Pu,".".concat(Nu),{background:Ku(ju),backgroundClip:"content-box"}),(0,Gt.Z)(Pu,".".concat(Ou),{background:Ku(ju,qu),backgroundClip:"content-box"}),(0,Gt.Z)(Pu,".".concat(Wu),{background:Ku($u),backgroundClip:"content-box"}),(0,Gt.Z)(Pu,".".concat(Hu),{background:Ku($u,Yu),backgroundClip:"content-box"}),(0,Gt.Z)(Pu,".".concat(Vu),{display:"inline-block",background:Yu}),(0,Gt.Z)(Pu,".".concat(Fu),{display:"inline-block",background:qu}),(0,Gt.Z)(Pu,".".concat(zu),{opacity:.5}),Pu)),ts=j.r$.define({combine:function(e){return null!==(Qu=e.filter(Boolean)[0])&&void 0!==Qu?Qu:null}}),ns=j.QQ.define({create:function(){return{diff:null,tree:jc.mp.empty}},update:function(e,t){var n,r,i=t.state.facet(ts),o=null===(n=t.state.facet(gt.dK))||void 0===n?void 0:n.parser;if(!i)return null===e.diff&&e.tree===jc.mp.empty?e:{diff:null,tree:jc.mp.empty};var a=e.diff,l=e.tree;return a&&a.b.eq(i)?t.docChanged&&(a=a.updateA(t.newDoc,t.changes)):(a=qc.create(t.newDoc,i),l=jc.mp.empty),(null===(r=t.startState.facet(gt.dK))||void 0===r?void 0:r.parser)!==o&&(l=jc.mp.empty),o&&l.length!==a.b.length?{diff:a,tree:l=(0,$c.p)({parser:o,text:a.b,maxTime:16,base:l})}:e.diff===a&&e.tree===l?e:{diff:a,tree:l}}}),rs=function(e){(0,ce.Z)(n,e);var t=(0,ue.Z)(n);function n(e,r,i){var o;return(0,le.Z)(this,n),(o=t.call(this)).line=e,o.index=r,o.changed=i,o}var r=n.prototype;return r.toDOM=function(){var e=this,t=document.createElement("div");if(t.className=this.changed?"cm-line ".concat(Wu):"cm-line ".concat(Hu),!this.changed||!this.changed.length){var n=!0,r=!1,i=void 0;try{for(var o,a=this.line[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value,c=l.text,u=l.tags,s=document.createElement("span");s.textContent=c||"\xa0",s.className=null!==u&&void 0!==u?u:"",t.appendChild(s)}}catch(C){r=!0,i=C}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return t}for(var d=0,f=0,p=null,h=null,v=function(t,n){if(!p)throw new Error("range is null");var r=e.line[f],i=r.text,o=r.tags,a=i.slice(d-p.from,n-p.from),l=document.createElement("span");l.textContent=a||"\xa0",l.className=null!==o&&void 0!==o?o:"",t.appendChild(l),d+=a.length};f<this.line.length;){if(!p){var m=this.line[f].text;p={from:d,to:d+m.length}}if(!h){var g=!0,y=!1,Z=void 0;try{for(var b,w=this.changed[Symbol.iterator]();!(g=(b=w.next()).done);g=!0){var x=b.value;if(!(x.from>=p.to||x.to<=d)){var k=document.createElement("span");k.className=Vu,h={from:x.from,to:x.to,dom:k},d<h.from&&v(t,h.from),t.appendChild(k);break}}}catch(C){y=!0,Z=C}finally{try{g||null==w.return||w.return()}finally{if(y)throw Z}}}h?(d<h.to&&v(h.dom,h.to),d>=h.to&&(h=null)):v(t,p.to),d>=p.to&&(p=null,f++)}return t},r.eq=function(e){var t,r;return(0,vt.Z)(e,n)&&this.index===e.index&&this.line.length===e.line.length&&(null===(t=this.changed)||void 0===t?void 0:t.length)===(null===(r=e.changed)||void 0===r?void 0:r.length)&&mu()(this.line,e.line)&&mu()(this.changed,e.changed)},r.ignoreEvent=function(e){return e.stopImmediatePropagation(),!0},(0,Dt.Z)(n,[{key:"estimatedHeight",get:function(){return 21}}]),n}(q.l9),is=q.p.line({class:Nu}),os=q.p.line({class:Ou}),as=q.p.mark({class:Fu}),ls=q.tk.decorations.compute([ns],(function(e){var t=function(e,t){if(r.getLineChangeType(e.number,gc.MF.A)===gc.dQ.COVERED)o.push(os.range(e.from));else{o.push(is.range(e.from));var n=!0,i=!1,a=void 0;try{for(var l,c=(0,gc.Po)(e,t,gc.MF.A,!1)[Symbol.iterator]();!(n=(l=c.next()).done);n=!0){var u=l.value;o.push(as.range(u.from,u.to))}}catch(s){i=!0,a=s}finally{try{n||null==c.return||c.return()}finally{if(i)throw a}}}},n=e.field(ns,!1);if(!n||!n.diff)return q.p.none;var r=n.diff,i=n.tree,o=[],a=!0,l=!1,c=void 0;try{for(var u,s=r.chunks[Symbol.iterator]();!(a=(u=s.next()).done);a=!0){var d=u.value;if(d.fromA!==d.endA)for(var f=r.a.lineAt(d.fromA),p=r.a.lineAt(d.endA),h=f.number;h<=p.number;h++)t(r.a.line(h),d);else d.fromB===d.endB&&t(r.a.lineAt(d.fromA),d);if(d.fromB!==d.toB)for(var v=r.b.lineAt(d.fromB),m=(0,hu.CT)(i,r.b,e,d.fromB,d.endB),g=0;g<m.length;g++){var y=m[g],Z=r.b.line(v.number+g),b=r.getLineChangeType(Z.number,gc.MF.B)===gc.dQ.COVERED?null:(0,gc.Po)(Z,d,gc.MF.B,!0),w=q.p.widget({widget:new rs(y,Z.number,b),block:!0,side:g+1}),x=Math.min(d.endA,r.a.length);o.push(w.range(x))}}}catch(k){l=!0,c=k}finally{try{a||null==s.return||s.return()}finally{if(l)throw c}}return q.p.set(o,!0)})),cs=function(e){(0,ce.Z)(n,e);var t=(0,ue.Z)(n);function n(e){var r;return(0,le.Z)(this,n),(r=t.call(this)).index=e,r}var r=n.prototype;return r.toDOM=function(){var e=document.createElement("span");return e.className=zu,e.textContent=String(this.index),e},r.eq=function(e){return this.index===e.index},n}(q.SJ),us=ku.X4.of((function(e,t){if((0,vt.Z)(t,rs))return new cs(t.index)})),ss=j.r$.define({enables:function(e){return[ts.computeN([e],(function(t){return t.facet(e)})),ns,es,ls,us]}}),ds=n(12470),fs=n(9020),ps=(0,hn.X)({headerContainer:[k.l0.backgroundColor.backgroundRoot,k.l0.fontSize(14),{borderBottom:"1px solid ".concat(k.TV.backgroundHigher),'[role="tab"][aria-selected="true"]':{borderBottom:"1px solid ".concat(k.TV.accentPrimaryDefault)}}]});!function(e){e[e.Compare=0]="Compare",e[e.Original=1]="Original",e[e.Suggestion=2]="Suggestion"}(Ju||(Ju={}));var hs=new pn.Jf((function(e){var t=e.selection,n=e.onSelected,r=(0,b.useState)(null!==t&&void 0!==t?t:0),i=r[0],o=r[1];return(0,a.tZ)(x.G,{css:ps.headerContainer,children:(0,a.tZ)(ds.mQ,{selectedIndex:i,onSelectionChange:function(e){o(e),n(e)},children:(0,a.BX)(ds.td,{withDividers:!1,withUnderline:!1,children:[(0,a.tZ)(ds.OK,{iconLeft:(0,a.tZ)(fs.Diff,{}),children:"Compare"}),(0,a.tZ)(ds.OK,{iconLeft:(0,a.tZ)(fs.BookOpen,{}),children:"Original"}),(0,a.tZ)(ds.OK,{iconLeft:(0,a.tZ)(fs.Ghostwriter,{}),children:"Suggestion"})]})})})})),vs=j.Py.define(),ms=j.QQ.define({create:function(){return null},update:function(e,t){var n=!0,r=!1,i=void 0;try{for(var o,a=t.effects[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value;if(l.is(vs))e=l.value;else if(l.is(Xr.Q))e=null;else if(l.is(Xr.h)){var c=t.state.field(Wr);if("transformCode"===(null===c||void 0===c?void 0:c.type)&&l.value){var u=t.startState.field(Hr),s=l.value;!u&&s&&(e=Ju.Compare)}}}}catch(d){r=!0,i=d}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return e},provide:function(e){return q.mH.from(e,(function(e){return null!=e?function(e){return{top:!0,dom:hs.create({selection:e.state.field(ms),onSelected:function(t){e.dispatch({effects:vs.of(t)})}})}}:null}))}}),gs=j.QQ.define({create:function(){return null},update:function(e,t){if(!(0,Li.a)(t,"doc",Wr,Dn.Yp,ms,Hr))return e;var n=t.state.field(Wr),r=t.state.facet(Dn.Yp),i=t.state.field(ms);if(!n||!r||n.codeReference.filePath!==r||i!==Ju.Suggestion)return null;var o,a=n.codeReference.range.indexFrom,l=n.codeReference.range.indexTo,c=t.state.doc.slice(a,l),u=null!==(o=t.state.field(Hr))&&void 0!==o?o:"",s=c.lines,d=a,f=u.split(t.state.lineBreak).length-s;return e&&e.after===d&&e.offset===f?e:{after:d,offset:f}}}),ys=ku.gy.of((function(e,t){var n=e.state.doc.lineAt(t.from),r=e.state.field(gs);if(r&&!(n.from<=r.after))return new ku.un(n.number+r.offset)})),Zs=ku.X4.of((function(e,t){if((0,vt.Z)(t,bs))return new ku.un(t.index)})),bs=function(e){(0,ce.Z)(n,e);var t=(0,ue.Z)(n);function n(e,r,i){var o;return(0,le.Z)(this,n),(o=t.call(this)).line=e,o.block=r,o.index=i,o}var r=n.prototype;return r.toDOM=function(){var e=document.createElement(this.block?"div":"span");e.className=this.block?"cm-line":"";var t=!0,n=!1,r=void 0;try{for(var i,o=this.line[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value,l=a.text,c=a.tags,u=document.createElement("span");u.textContent=l||"\xa0",c&&(u.className=c),e.appendChild(u)}}catch(s){n=!0,r=s}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}return e},r.eq=function(e){return this.index===e.index&&(0,hu.gj)(this.line,e.line)},r.ignoreEvent=function(){return!1},(0,Dt.Z)(n,[{key:"estimatedHeight",get:function(){return 21}}]),n}(q.l9),ws=q.tk.decorations.compute([gt.dK,Wr,Hr,ms,ns,Dn.Yp,j.yy.lineSeparator],(function(e){var t,n=e.field(Wr),r=e.facet(Dn.Yp),i=e.field(ms);if(!n||"transformCode"!==n.type||!r||n.codeReference.filePath!==r||i!==Ju.Suggestion)return q.p.none;var o,a,l=n.codeReference.range.indexFrom,c=n.codeReference.range.indexTo,u=e.doc.lineAt(l),s=e.doc.lineAt(c),d=e.toText(null!==(o=e.field(Hr))&&void 0!==o?o:""),f=e.changes({from:l,to:c,insert:d}),p=f.apply(e.doc),h=l+d.length,v=null===(t=e.facet(gt.dK))||void 0===t?void 0:t.parser,m=null;if(v)m=(0,$c.p)({parser:v,text:p,changes:f,base:e,upTo:h}),a=(0,hu.CT)(m,p,e,l,h);else{a=[];var g=!0,y=!1,Z=void 0;try{for(var b,w=d.iterLines()[Symbol.iterator]();!(g=(b=w.next()).done);g=!0){var x=b.value;a.push([{text:x}])}}catch(R){y=!0,Z=R}finally{try{g||null==w.return||w.return()}finally{if(y)throw Z}}}var k=[];a.length>1&&l!==c&&0!==s.length&&c===s.to&&c<e.doc.length?k.push(q.p.replace({inclusive:!1,block:!0}).range(l,c)):k.push(q.p.replace({inclusiveStart:!1,block:!0}).range(l,c));for(var C=0;C<a.length;C++){var S=a[C],T=u.number+C,E=q.p.widget({widget:new bs(S,C>0,T),inlineOrder:!0,side:C+1,block:C>0});k.push(E.range(l))}return q.p.set(k,!0)})),xs=[gs,ys,Zs,ws],ks=hr.TV.blurpleDimmest,Cs=hr.TV.accentPrimaryDimmest,Ss=q.tk.theme({".cm-pocket-highlight":{backgroundColor:"rgba(120, 95, 255, 0.1)"},"@keyframes moveGradient":{"0%":{backgroundPositionX:"100%"},"100%":{backgroundPositionX:"0%"}},".cm-pocket-highlight-loading":{background:"linear-gradient(90deg, ".concat(hr.TV.blurpleDimmest,", ").concat(Cs,", ").concat(ks,", ").concat(Cs,")"),backgroundSize:"300% 100%",backgroundPositionX:"0%",animation:"moveGradient 2s linear infinite"}}),Ts=q.tk.decorations.compute([Wr,Dn.Yp],(function(e){var t=e.field(Wr),n=e.facet(Dn.Yp);if(!t||!n||t.codeReference.filePath!==n)return q.p.none;var r=q.p.widget({widget:new oi({codeReference:t.codeReference,type:t.type,data:t.data}),block:!0,side:1e3}).range(t.codeReference.range.indexTo);return q.p.set(r)})),Es=(0,q.EY)({above:!1,update:function(e){return(0,Li.a)(e,Wr)},markers:function(e){var t=e.state.field(Wr),n=e.state.facet(Dn.Yp);if(!t||!n||t.codeReference.filePath!==n)return[];var r=t.codeReference.range.indexFrom,i=t.codeReference.range.indexTo,o=e.state.doc.lineAt(i);o.from>=r&&o.to===i&&i<e.state.doc.length&&(i+=1);var a=j.jT.range(r,i),l=t.loading&&t.codeReference.range.indexFrom<t.codeReference.range.indexTo?"cm-pocket-highlight-loading":"cm-pocket-highlight";return q.dc.forRange(e,l,a)}}),Rs=ss.compute([Wr,Hr,Dn.Yp,ms],(function(e){var t=e.field(Wr),n=e.field(Hr),r=e.facet(Dn.Yp),i=e.field(ms);return t&&n&&r&&t.codeReference.filePath===r&&"transformCode"===t.type&&i===Ju.Compare?j.as.of({from:t.codeReference.range.indexFrom,to:t.codeReference.range.indexTo,insert:n},e.doc.length).apply(e.doc):null})),Gs=Mu.V.compute([Wr,Hr,Dn.Yp],(function(e){var t=e.field(Wr),n=e.field(Hr),r=e.facet(Dn.Yp);return t&&n&&r&&t.codeReference.filePath===r&&"generateCode"===t.type?j.as.of({from:t.codeReference.range.indexTo,to:t.codeReference.range.indexTo,insert:n},e.doc.length):null})),Is=[Ss,Wr,Hr,Ts,Es,ms,Rs,xs,Gs,li],_s=n(20881),Ds=n(42785),Bs=[Ds.Gj,Ds._j,Ds.yK,Ds.gm,Ds.ZF],Ps=[Ds.ZF],As=new mi.j((function(e,t){return t?null:(0,_s.ZP)({key:"mod",rules:e?Bs:Ps})})),Ls=n(66075);function Us(e,t){var n=performance.now();Y.kg.time(e,n-t)}var Xs=new mi.j((function(e){var t=e?.01:.001;return j.Wl.highest(q.tk.domEventHandlers({keydown:function(e){if(Math.random()<t){var n=e.timeStamp;requestAnimationFrame((function(){Us("editor input latency",n),"undefined"!==typeof requestIdleCallback?requestIdleCallback((function(){Us("editor input latency after layout",n)})):setTimeout((function(){Us("editor input latency after layout",n)}))}))}}}))})),Ms=n(32043),Ns=n(68688),Os=n(1436),Fs=n(18988),Ws=n(84815),Hs=n(34489),Vs=(0,hn.X)({buttons:[k.l0.display.flex,k.l0.rowWithGap(4),k.l0.justify.end],input:[k.l0.colWithGap(4),k.l0.flex.grow(1)],gap:[k.l0.colWithGap(16)],label:[k.l0.color.foregroundDimmer,k.l0.fontSize(12),k.l0.height(24),k.l0.justify.center],flexRow:[k.l0.display.flex,k.l0.rowWithGap(8),k.l0.align.center]}),zs={fontFamily:"text-security-disc"},js=x.K.label;function qs(e){var t=(0,te.Z)().fs,n=(0,b.useId)(),o=(0,b.useId)(),l=(0,b.useState)(""),c=l[0],u=l[1],d=(0,b.useState)(e.initialValue),f=d[0],p=d[1],h=(0,b.useState)(!1),v=h[0],m=h[1],g=(0,b.useRef)(null);return(0,b.useEffect)((function(){var t;e.isOpen&&(null===(t=g.current)||void 0===t||t.focus(),(0,K.j)(K.U3.PASTE_SCANNER_USED,{action:"modal_opened",provider:null===e||void 0===e?void 0:e.provider}))}),[e.isOpen,null===e||void 0===e?void 0:e.provider]),(0,a.tZ)(Fs.MT,{contain:!0,children:(0,a.tZ)(Fo.u,{isOpen:e.isOpen,onRequestClose:e.onCancel,children:(0,a.BX)(x.G,{css:Vs.gap,children:[(0,a.tZ)(fe.xv,{variant:"subheadBig",multiline:!1,children:"Add a key name for your secret value"}),(0,a.BX)(x.G,{css:Vs.flexRow,children:[(0,a.BX)(x.G,{css:Vs.input,children:[(0,a.tZ)(js,{css:Vs.label,htmlFor:n,children:"Key"}),(0,a.tZ)(wr.II,{id:n,ref:g,value:c,onChange:function(e){return u(e.target.value)}})]}),(0,a.BX)(x.G,{css:Vs.input,children:[(0,a.BX)(x.G,{css:Vs.flexRow,children:[(0,a.tZ)(js,{css:Vs.label,htmlFor:o,children:"Value"}),(0,a.tZ)(Nn.h,{alt:"Toggle Secret",onClick:function(){return m((function(e){return!e}))},tooltipPlacement:"top",children:v?(0,a.tZ)(s.Z,{}):(0,a.tZ)(Ws.Z,{})})]}),(0,a.tZ)(wr.II,{id:o,value:f,onChange:function(e){return p(e.target.value)},style:v?void 0:zs})]})]}),(0,a.BX)(x.G,{css:Vs.buttons,children:[(0,a.tZ)(Mn.zx,{text:"Cancel",onClick:e.onCancel}),(0,a.tZ)(Mn.zx,{colorway:"primary",text:"Save Secret",disabled:0===c.length||0===f.length,onClick:(0,H.Z)((function(){var n,o,a;return(0,V.__generator)(this,(function(l){switch(l.label){case 0:return n={},[4,t.readFile(".env")];case 1:return(o=l.sent()).error||(n=Hs.Z.parse(o.content.toString())),[4,t.writeFile(".env",Hs.Z.serialize((0,i.Z)((0,r.Z)({},n),(0,Gt.Z)({},c,f))))];case 2:return(a=l.sent()).error&&Zt.c_.withScope((function(e){e.setExtra("keyInput",c),Zt.c_.captureException(a.error)})),e.onSaveSecret(c,f),(0,K.j)(K.U3.PASTE_SCANNER_USED,{action:"secret_created",provider:null===e||void 0===e?void 0:e.provider}),[2]}}))}))})]})]})})})}var $s=n(13548),Ys=n(76735),Ks=n(45353),Qs=(0,hn.X)({hint:[k.l0.align.center,k.l0.border({color:k.TV.outlineDimmer,direction:"top"}),k.l0.color.foregroundDimmest,k.l0.display.flex,k.l0.flex.row,k.l0.px(8),k.l0.py(4),k.l0.rowWithGap(8)],info:[k.l0.p(8)],key:[k.l0.px(4)],wrapper:[k.l0.backgroundColor.backgroundHigher,k.l0.borderRadius(4),k.l0.cursor.default,k.l0.font.default],mobileButtons:[k.l0.flex.grow(1)],mobileHint:[k.l0.justify.center]}),Js={borderTop:"1px solid ".concat(k.TV.outlineDimmer),borderBottom:"1px solid ".concat(k.TV.outlineDimmer),borderRadius:0};function ed(e){return(0,a.BX)(x.G,{css:Qs.wrapper,style:e.onMobile?Js:void 0,children:[(0,a.BX)(x.G,{css:Qs.info,style:{textAlign:e.onMobile?"center":"inherit"},children:[(0,a.tZ)(x.G,{children:"The value you pasted looks like a secret."}),(0,a.tZ)(x.G,{children:"Store it securely using our Secrets feature."})]}),e.onMobile?(0,a.tZ)(nd,(0,r.Z)({},e)):(0,a.tZ)(td,(0,r.Z)({},e))]})}function td(e){return(0,a.BX)(a.HY,{children:[(0,a.BX)(x.G,{css:Qs.hint,onClick:e.onClickUseSecrets,children:[(0,a.tZ)($s.Z,{}),"Press",(0,a.tZ)(x.G,{css:Qs.key,children:(0,a.tZ)(Ks.bM,{keyCombo:"Tab",small:!0})}),"to use Secrets"]}),(0,a.BX)(x.G,{css:Qs.hint,onClick:e.onClickPasteAnyway,children:[(0,a.tZ)(Ys.Z,{}),"Press",(0,a.tZ)(x.G,{css:Qs.key,children:(0,a.tZ)(Ks.bM,{keyCombo:"Enter",small:!0})}),"to paste anyway"]})]})}function nd(e){return(0,a.BX)(x.G,{css:[Qs.hint,Qs.mobileHint],children:[(0,a.tZ)(Mn.zx,{css:Qs.mobileButtons,iconLeft:(0,a.tZ)($s.Z,{}),text:"Use Secrets",onClick:e.onClickUseSecrets,colorway:"primary"}),(0,a.tZ)(Mn.zx,{css:Qs.mobileButtons,iconLeft:(0,a.tZ)(Ys.Z,{}),text:"Paste Anyway",onClick:e.onClickPasteAnyway})]})}var rd=n(9493),id=(0,hn.X)({border:[k.l0.border({color:hr.TV.accentPrimaryDefault,direction:"y",width:1})],title:[k.l0.display.flex,k.l0.rowWithGap(8),k.l0.align.center,k.l0.justify.spaceBetween,k.l0.px(8),k.l0.pt(4),k.l0.font.default],wrapper:[k.l0.backgroundColor.backgroundRoot,k.l0.py(0),k.l0.position.relative,k.l0.zIndex(200)]});function od(e){return Un(e.onClose),(0,a.tZ)(Fs.MT,{autoFocus:!0,contain:!0,children:(0,a.tZ)(x.G,{css:id.wrapper,children:(0,a.BX)(x.G,{css:id.border,children:[(0,a.BX)(x.G,{css:id.title,children:[(0,a.BX)(fe.xv,{multiline:!1,children:["Access the secret ",(0,a.tZ)("strong",{children:e.keyName}),":"]}),(0,a.tZ)(Nn.h,{alt:"Close",onClick:e.onClose,children:(0,a.tZ)(Fn.Z,{})})]}),(0,a.tZ)(ba.Tg,{background:"root",children:(0,a.tZ)(rd.Z,{keyName:e.keyName,filePath:e.filePath,onInsert:e.onInsert})})]})})})}var ad=Mu.V.compute([Ms.xg],(function(e){var t=e.field(Ms.xg).iter();if(null===t.value)return null;for(var n=[];null!==t.value;){var r=t.from,i=t.to,o=t.value;n.push({from:r,to:i,insert:o.secret}),t.next()}return n}));var ld=function(e){(0,ce.Z)(n,e);var t=(0,ue.Z)(n);function n(e,r){var i;return(0,le.Z)(this,n),(i=t.call(this)).secret=e,i.as=r,i}var r=n.prototype;return r.toDOM=function(e){var t=this,n=(0,pn.VV)((0,a.tZ)(ed,{onMobile:"pocket"===this.as,onClickUseSecrets:function(){e.dispatch({effects:Ms.Lo.of(t.secret)})},onClickPasteAnyway:function(){(0,Ms.Pz)(e),e.focus()}}));return"pocket"===this.as&&(n.style.zIndex="200",n.style.position="relative",this.adjustForGutter(n,e)),n},r.updateDOM=function(e,t){return this.adjustForGutter(e,t),!0},r.adjustForGutter=function(e,t){var n=t.dom.querySelector(".cm-gutters");e.style.marginLeft=n?"-".concat(n.clientWidth,"px"):"inherit"},n}(q.l9),cd=Os.t.compute([Ms.xv],(function(e){var t=e.facet(Dn.Yp),n=e.field(Ms.xv);return n&&t?{key:"pasteScannerModal",node:function(e){return(0,a.tZ)(qs,{isOpen:!0,initialValue:n.secret,provider:n.provider,onSaveSecret:function(){var t=(0,H.Z)((function(t){var r,i;return(0,V.__generator)(this,(function(a){for(r=e.state.field(Ms.xg).iter(),i=[];r.value;){var l=r.from,c=r.to,u=r.value;u.id===n.id&&(i.push(Ms.uh.of(u.id)),i.push(Ms.Yt.of({secret:t,from:l,to:c}))),r.next()}return e.dispatch({effects:(0,o.Z)(i).concat([Ms.ZB.of(null)])}),[2]}))}));return function(e){return t.apply(this,arguments)}}(),onCancel:function(){return e.dispatch({effects:Ms.ZB.of(null)})}})}}:null})),ud=q.tk.decorations.compute([Ms.Do],(function(e){var t=e.field(Ms.Do).iter(),n=t.from,r=t.to,i=t.value,o=e.facet(Dn.Yp);return i&&o?q.p.set(q.p.widget({widget:new sd(i.key,o),side:1,block:!0}).range(n,r)):q.p.none})),sd=function(e){(0,ce.Z)(n,e);var t=(0,ue.Z)(n);function n(e,r){var i;return(0,le.Z)(this,n),(i=t.call(this)).key=e,i.filePath=r,i}var r=n.prototype;return r.toDOM=function(e){var t=(0,pn.VV)((0,a.tZ)(od,{keyName:this.key,filePath:this.filePath,onClose:function(){return e.dispatch({effects:Ms.qs.of(null)})},onInsert:function(t){e.dispatch(e.state.changeByRange((function(e){return{range:j.jT.cursor(e.from+t.length),changes:{from:e.from,to:e.to,insert:t}}}))),e.focus(),(0,K.j)(K.U3.PASTE_SCANNER_USED,{action:"secret_key_inserted"})}}));return this.adjustForGutter(t,e),t},r.updateDOM=function(e,t){return this.adjustForGutter(e,t),!0},r.adjustForGutter=function(e,t){var n=t.dom.querySelector(".cm-gutters");e.style.marginLeft=n?"-".concat(n.clientWidth,"px"):"inherit"},n}(q.l9),dd=[ad,function(){var e=[Ms.xv,Ms.xg],t=function(e){if(null!=e.field(Ms.xv,!1))return null;var t=e.field(Ms.xg,!1);return t||null};return[q.hJ.computeN(e,(function(e){var n=function(){var e=i.value,t=new ld(e,"tooltip");o.push({arrow:!0,pos:i.to,create:function(e){return{dom:t.toDOM(e)}}}),i.next()},r=t(e);if(!r)return[];if(e.facet(Ns.h))return[];for(var i=r.iter(),o=[];i.value;)n();return o})),q.tk.decorations.compute(e,(function(e){var n=t(e);if(!n)return q.p.none;if(!e.facet(Ns.h))return q.p.none;for(var r=n.iter(),i=[];r.value;){var o=r.value,a=new ld(o,"pocket");i.push(q.p.widget({widget:a,side:1,block:!0}).range(r.to,r.to)),r.next()}return q.p.set(i)}))]}(),cd,ud],fd=[Ms.Do,Ms.xg,Ms.xv,dd],pd=q.tk.theme({"&":{contain:"size"},"& > .cm-scroller":{contain:"strict"}}),hd=q.tk.theme({".cm-ruler-element":{backgroundColor:k.TV.backgroundHigher}}),vd=(0,q.EY)({above:!1,class:"cm-ruler-layer",update:function(e){return(0,Li.a)(e,md,Ur.R)},markers:function(e){var t=e.state.facet(md);if(0===t.length)return[];var n=[],r=e.dom.getBoundingClientRect(),i=e.contentDOM.getBoundingClientRect().left-r.left,o=r.width-2,a=Math.max(r.height,e.contentHeight),l=!0,c=!1,u=void 0;try{for(var s,d=t[Symbol.iterator]();!(l=(s=d.next()).done);l=!0){var f=s.value,p=i+e.defaultCharacterWidth*f;p<o&&n.push(new q.dc("cm-ruler-element",p,0,2,a))}}catch(h){c=!0,u=h}finally{try{l||null==d.return||d.return()}finally{if(c)throw u}}return n}}),md=j.r$.define({enables:[vd,hd]}),gd=new mi.j((function(e){return e.map((function(e){return md.of(e)}))})),yd=n(88253),Zd=n(75886),bd=n(72499),wd=1e3,xd=q.tk.theme({"& .cm-gutters.cm-minimap-gutter":{backgroundColor:hr.TV.backgroundDefault,borderLeft:"1px solid ".concat(hr.TV.backgroundHigher)},"& .cm-minimap-box-shadow":{boxShadow:"unset"}}),kd=new mi.j((function(e,t,n){if(e)return null;var r=t.minimapDisplay;return"blocks"!==r&&"characters"!==r?null:new bd.R((function(e){var t=new j.F6;return[xd,t.of(e.state.doc.lines<=wd?(0,Zd.r)({displayText:r}):[]),q.tk.updateListener.of((function(e){if(e.docChanged){var n=e.startState.doc.lines<=wd,i=e.state.doc.lines<=wd;return n!==i?e.view.dispatch({effects:t.reconfigure(i?(0,Zd.r)({displayText:r}):[])}):void 0}})),Zd.J.compute([kc],(function(e){var t=e.field(kc,!1);if(!t)return{};for(var r={},i=1;i<=e.doc.lines;i++)switch(t.getLineChangeType(i)){case gc.dQ.COVERED:r[i]=n.values.global.greenDefault;break;case gc.dQ.MODIFIED:r[i]=n.values.global.blueDefault}return r}))]}))})),Cd=n(16783),Sd=n.n(Cd),Td="".concat('url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20"><circle cx="10" cy="10" r="10" fill="black" /></svg>\')',", linear-gradient(transparent, transparent)"),Ed="".concat('url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20"><path stroke="black" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" fill="none" d="M2.5 10H15.5M15.5 10L9.5 5M15.5 10L9.5 15M18 4V16"/></svg>\')',", linear-gradient(transparent, transparent)"),Rd=q.tk.theme({".cm-vws-space":{backgroundColor:k.TV.foregroundDimmest,maskImage:Td,maskSize:"0.375ch",maskPosition:"center",maskRepeat:"no-repeat","-webkit-mask-image":Td,"-webkit-mask-size":"0.375ch","-webkit-mask-position":"center","-webkit-mask-repeat":"no-repeat","&.cm-vws-leading":{opacity:.325},"&.cm-vws-enclosed":{opacity:.5},"&.cm-vws-trailing":{opacity:.5},"&.cm-vws-selected":{opacity:.75}},".cm-vws-tab":{backgroundColor:k.TV.foregroundDimmest,maskImage:Ed,maskSize:"1.75ch 1.75ch",maskPosition:"center",maskRepeat:"no-repeat","-webkit-mask-image":Ed,"-webkit-mask-size":"1.75ch 1.75ch","-webkit-mask-position":"center","-webkit-mask-repeat":"no-repeat","&.cm-vws-leading":{opacity:.325,maskPosition:"left min(95%, 0.25ch) top 50%","-webkit-mask-position":"left min(95%, 0.25ch) top 50%"},"&.cm-vws-enclosed, &.cm-vws-trailing":{opacity:.5,maskPosition:"calc(50% - 0.25ch) 50%","-webkit-mask-position":"calc(50% - 0.25ch) 50%"},"&.cm-vws-selected":{opacity:.75}}}),Gd=Sd()((function(e,t,n){var r="cm-vws-".concat(" "===e?"space":"tab"," cm-vws-").concat(t).concat(n?" cm-vws-selected":"");return q.p.mark({class:r})}),(function(e,t,n){return"".concat(e,"-").concat(t,"-").concat(n)}));function Id(e,t,n){var r=function(r){var a=function(r){var a=l.text[r],c=l.from+r;if(c<t||c>=n||" "!==a&&"\t"!==a)return"continue";var u=void 0;u=r>=p+h?"trailing":r>p?"enclosed":"leading";var d=s&&e.selection.ranges.some((function(e){return e.from<=c&&e.to>c}));(i[u]||d)&&o.push(Gd(a,u,d).range(c,c+1))},l=e.doc.line(r),c=l.text.length;if(0===c)return"continue";var u=0===l.text.trim().length,s=Boolean(i.selected)&&e.selection.ranges.some((function(e){return!e.empty&&(e.from<l.to&&e.to>=l.from)}));if(!i.leading&&!i.enclosed&&!i.trailing&&!s)return"continue";if(u){if(i.leading||i.trailing||s)for(var d=function(r){var a=l.text[r],c=l.from+r;if(c<t||c>=n||" "!==a&&"\t"!==a)return"continue";var u=s&&e.selection.ranges.some((function(e){return e.from<=c&&e.to>c}));(i.leading||i.trailing||u)&&o.push(Gd(a,"trailing",u).range(c,c+1))},f=0;f<c;f++)d(f);return"continue"}for(var p=c-l.text.trimStart().length,h=l.text.trim().length,v=0;v<c;v++)a(v)},i=e.facet(Pd);if(!i.leading&&!i.enclosed&&!i.trailing&&!i.selected)return[];for(var o=[],a=e.doc.lineAt(t),l=e.doc.lineAt(n),c=a.number;c<=l.number;c++)r(c);return o}var _d,Dd=function(){function e(t){(0,le.Z)(this,e),this.decorations=q.p.set(Id(t.state,0,t.state.doc.length))}return e.prototype.update=function(e){if((0,Li.a)(e,Pd))this.decorations=q.p.set(Id(e.state,0,e.state.doc.length));else{var t=e.state.facet(Pd);if(e.docChanged||e.selectionSet&&t.selected){var n=this.decorations,r=null,i=null;if(e.selectionSet&&t.selected){var a=e.startState.selection.ranges.filter((function(e){return!e.empty})),l=(0,o.Z)(e.state.selection.ranges).concat((0,o.Z)(e.startState.selection.map(e.changes).ranges)).filter((function(e){return!e.empty}));a.length&&(r=j.jT.create(a)),l.length&&(i=j.jT.create(l))}if(e.docChanged&&e.changes.iterChangedRanges((function(t,n,o,a){if(t!==n){var l=j.jT.range(e.startState.doc.lineAt(t).from,e.startState.doc.lineAt(n).to);r=r?r.addRange(l):j.jT.create([l])}if(o!==a){var c=j.jT.range(e.state.doc.lineAt(o).from,e.state.doc.lineAt(a).to);i=i?i.addRange(c):j.jT.create([c])}})),r){var c=r.ranges;n=n.update({filter:function(e,t){return!c.some((function(n){return n.from<=e&&n.to>=t}))},filterFrom:c[0].from,filterTo:c[c.length-1].to})}e.docChanged&&(n=n.map(e.changes)),i&&(n=n.update({add:i.ranges.map((function(t){return Id(e.state,t.from,t.to)})).flat()})),this.decorations=n}}},e}(),Bd=q.lg.fromClass(Dd,{decorations:function(e){return e.decorations}}),Pd=j.r$.define({combine:function(e){return null!==(_d=e[0])&&void 0!==_d?_d:{}},enables:[Rd,j.Wl.highest(Bd)]}),Ad=new mi.j((function(e,t,n,r){return e||t||n||r?Pd.of({leading:e,enclosed:t,trailing:n,selected:r}):null})),Ld=n(30929),Ud=n(69921);var Xd=new mi.j((function(e,t,n,r,i){return t&&n?Ai.of({format:function(){var n=(0,H.Z)((function(n){var r;return(0,V.__generator)(this,(function(i){return 0===n.length?[2,{result:n.toString()}]:(r=hi.Z.from(n.toString()).toBuffer(),[2,t.request({file:{path:e,content:r}}).then((function(e){return e.error||!e.file?{error:!0}:{result:hi.Z.from(e.file.content).toString()}}))])}))}));return function(e){return n.apply(this,arguments)}}(),logName:"formatter_service",onError:function(){r("Sorry, formatting ".concat(e," failed"),1500)},onSuccess:function(){i("Formatted ".concat(e," successfully"),1500)}}):[]})),Md=n(52143),Nd=n(12260),Od=n(250),Fd=n(94452),Wd=n(77806),Hd=n(24941),Vd=n(32973),zd=n(99397),jd=n(21134),qd=n(1050),$d=n(49085),Yd=n(15544),Kd=n(50575),Qd=n(22642),Jd=n(88477),ef=n(1809),tf=n(72370),nf=n(9839),rf=n(51529);function of(e){var t=e.label,n=e.icon,r=e.run,i=e.keyboardShortcut;return{match:Fd.pl,data:{type:"action",label:t,icon:n,run:r,keyboardShortcut:i}}}function af(e,t,n){var r=n.selection.main.to;return{selection:{anchor:r},effects:[Xr.Q.of({codeReference:t,type:"ghostwriterPaywall",data:{from:e}}),q.tk.scrollIntoView(r,{y:"center"})]}}function lf(e){var t=e.path,n=e.view,r=(0,te.Z)().fs,i=(0,ci.d)(),o=(0,vr.eD)(),a=(0,En.P5)({controlName:"flag-killswitch-ghostwriter-chat",logFlagToAnalytics:!1});return(0,b.useMemo)((function(){return n?function(){o(t);var e=r.getOTVersion(t),l=ri(n.state,t,e);if((0,K.j)(K.U3.GHOSTWRITER_CHAT_INLINE_OPENED,{action:"GENERATE",paywall:!i}),a)wi({view:n,mainSelection:n.state.selection.main,codeReference:l});else if(i){var c=n.state.selection.main.to;n.dispatch({selection:{anchor:c},effects:[Xr.Q.of({codeReference:l,type:"generateCode"}),q.tk.scrollIntoView(c,{y:"center"})]})}else n.dispatch(af("generateCode",l,n.state))}:null}),[n,t,r,i,o,a])}function cf(e){var t=e.path,n=e.openFile,r=e.view,i=function(e){var t=e.path,n=e.openFile,r=e.view,i=(0,Q.Z)(t),o=ee(i),l=(0,b.useRef)(null),c=(0,te.Z)().fs;return(0,b.useMemo)((function(){var e=[];if(!o||!i||!r)return e;function u(e,t,n){return s.apply(this,arguments)}function s(){return s=(0,H.Z)((function(e,n,o){var a,c,u,s,d,f,p,h,v,m,y;return(0,V.__generator)(this,(function(Z){switch(Z.label){case 0:if(!i||!r)throw new Error("Expected client");return l.current&&i.notify.cancelRequest(l.current),l.current=i.generateId(),a=r.state,c=a.selection.main.head,u=(0,we.s)(a.doc,c),[4,e(t,u,{id:l.current,tap:function(e){return(0,An.SC)(r,e)}})];case 1:if(s=Z.sent(),l.current=null,"error"in s)throw new Error("Something went wrong fetching location: ".concat(s.error.message));return s.cancelled?[2]:(d=(0,nr.g)(s.result))&&0!==d.length?(f=(0,g.Z)(d,1),p=f[0],h=p.uri,v=p.range,m=v.start,y=i.documentUriToPath(h),t!==y?o({path:y,line:m.line+1,col:m.character}):(0,tr.S)({view:r,line:m.line+1,col:m.character}),[2]):((0,jn.J)(r,{message:n,offset:c}),[2])}}))})),s.apply(this,arguments)}return o.isFindDefinitionSupported&&n&&e.push(of({label:"Jump to definition",icon:(0,a.tZ)(Vd.Z,{}),run:function(e){return(0,H.Z)((function(){return(0,V.__generator)(this,(function(t){switch(t.label){case 0:return[4,ir({offset:r.state.selection.main.head,lspClient:i,openFile:n,view:r,newPane:null!==e&&(0,er.j)(e)})];case 1:return t.sent(),[2]}}))}))()},keyboardShortcut:(0,Od.l2)({cmdOrCtrl:!0,key:"F12"})})),o.isFindTypeDefinitionSupported&&n&&e.push(of({label:"Jump to type definition",icon:(0,a.tZ)(zd.Z,{}),run:function(){return(0,H.Z)((function(){return(0,V.__generator)(this,(function(e){switch(e.label){case 0:return[4,u(i.request.findTypeDefinitions,"No type definition found",n)];case 1:return e.sent(),[2]}}))}))()}})),o.isFindImplementationSupported&&n&&e.push(of({label:"Jump to implementation",icon:(0,a.tZ)(jd.Z,{}),run:function(){return(0,H.Z)((function(){return(0,V.__generator)(this,(function(e){switch(e.label){case 0:return[4,u(i.request.findImplementations,"No implementation found",n)];case 1:return e.sent(),[2]}}))}))()}})),(o.isFindDefinitionSupported||o.isFindReferencesSupported)&&e.push(of({label:"Find references",icon:(0,a.tZ)(Nd.Z,{}),keyboardShortcut:"Shift-F12",run:function(){r.dispatch({effects:[Pn.h.of(r.state.selection.main.head)]})}})),o.isRenameSupported&&e.push(of({label:"Rename all occurrences",icon:(0,a.tZ)(qd.Z,{}),keyboardShortcut:"F2",run:function(){Kn(r,r.state.selection.main.head)}})),o.isCodeActionsSupported&&e.push({match:Fd.pl,data:{type:"context",label:"Code actions",icon:(0,a.tZ)(de.Z,{}),keyboardShortcut:(0,Od.l2)({key:".",cmdOrCtrl:!0})},commands:function(e){var n=e.active;return(0,H.Z)((function(){var e,o,l;return(0,V.__generator)(this,(function(u){switch(u.label){case 0:return n?(e=r.state,o=e.selection.main,[4,i.request.codeActions(t,{start:(0,we.s)(e.doc,o.from),end:(0,we.s)(e.doc,o.to)})]):[2,[]];case 1:return l=u.sent(),(0,K.j)(K.U3.EDITOR_CONTEXT_MENU_CODE_ACTIONS_REQUESTED,{success:!("error"in l),numActions:"result"in l&&l.result?l.result.length:null}),"error"in l?(Zt.c_.captureException(new Error(l.error.message)),[2,[]]):null===l.result||0===l.result.length?[2,[]]:[2,l.result.map((function(e){return of({icon:(0,a.tZ)(rf.Z,{}),label:e.title,run:function(){(0,he.S)(e,i,c)}})}))]}}))}))()}}),e.push(of({label:"Select all occurrences",icon:(0,a.tZ)(nf.Z,{}),keyboardShortcut:(0,Od.l2)({key:"F2",cmdOrCtrl:!0}),run:function(){if(r.state.selection.main.empty){var e=r.state.wordAt(r.state.selection.main.head);if(!e)return;r.dispatch({selection:e})}(0,z.tm)(r)}})),e}),[o,i,n,t,c,r])}({path:t,openFile:n,view:r}),l=function(e){var t=e.path,n=e.view,r=(0,te.Z)().fs,i=(0,ci.d)(),o=(0,dr.ql)(),l=(0,_r.Ef)(),c=lf({path:t,view:n}),u=(0,En.P5)({controlName:"flag-killswitch-ghostwriter-chat",logFlagToAnalytics:!1});return(0,b.useMemo)((function(){if(!n)return[];var e=[of({label:"Copy link to position",icon:(0,a.tZ)(Yd.Z,{}),run:function(){var e=(0,we.s)(n.state.doc,n.state.selection.main.head),r=e.line,i=e.character,o=(0,re.dr)({path:t,line:r+1,col:i});(0,ne.Z)(o)}})];return void 0!==n.state.field(Oe,!1)&&e.push(of({label:"Toggle breakpoint",icon:(0,a.tZ)(Kd.Z,{}),run:function(){var e=n.state.doc.lineAt(n.state.selection.main.head);Ne(n,e.from)}})),e.push(of({label:"Start thread",icon:(0,a.tZ)(Qd.Z,{}),keyboardShortcut:"Alt-/",run:function(){n.dispatch({effects:[sr.UQ.of(ae()())]})}})),e.push(of({label:"Explain code",icon:(0,a.tZ)(Jd.Z,{}),run:function(){var e=r.getOTVersion(t),a=ri(n.state,t,e);if((0,K.j)(K.U3.GHOSTWRITER_CHAT_INLINE_OPENED,{action:"EXPLAIN",paywall:!i}),u)wi({view:n,mainSelection:n.state.selection.main,codeReference:a});else if(i){o({chatMessage:{type:"explainCode",codeReference:a}});var l=n.state.selection.main.to;n.dispatch({selection:{anchor:l},effects:[Xr.Q.of({codeReference:a,type:"explainCode"}),q.tk.scrollIntoView(l,{y:"center"})]})}else n.dispatch(af("explainCode",a,n.state))}})),c&&e.push(of({label:"Generate code",icon:(0,a.tZ)(ef.Z,{}),keyboardShortcut:"Alt-g",run:function(){c()}})),e.push(of({label:"Edit code",icon:(0,a.tZ)(tf.Z,{}),keyboardShortcut:"Alt-t",run:function(){l(t);var e=r.getOTVersion(t),o=ri(n.state,t,e);if(u)wi({view:n,mainSelection:n.state.selection.main,codeReference:o});else if((0,K.j)(K.U3.GHOSTWRITER_CHAT_INLINE_OPENED,{action:"TRANSFORM",paywall:!i}),i){var a=n.state.selection.main.to;n.dispatch({selection:{anchor:a},effects:[Xr.Q.of({type:"transformCode",codeReference:o}),q.tk.scrollIntoView(a,{y:"center"})]})}else n.dispatch(af("editCode",o,n.state))}})),e}),[n,t,r,i,o,l,u,c])}({path:t,view:r}),c=function(e){var t=e.view,n=e.path;return(0,b.useMemo)((function(){if(!t)return[];var e=[of({label:"Copy",icon:(0,a.tZ)(Wd.Z,{}),keyboardShortcut:(0,Od.l2)({cmdOrCtrl:!0,key:"c"}),run:function(){var e=bi(t.state).text;(0,ne.Z)(e)}}),of({label:"Cut",icon:(0,a.tZ)(Hd.Z,{}),keyboardShortcut:(0,Od.l2)({cmdOrCtrl:!0,key:"x"}),run:function(){var e=bi(t.state),n=e.text,r=e.ranges;(0,ne.Z)(n),t.state.readOnly||t.dispatch({changes:r,scrollIntoView:!0,userEvent:"delete.cut"})}})];return window.navigator.clipboard&&"readText"in window.navigator.clipboard&&e.push(of({label:"Paste",icon:(0,a.tZ)($d.Z,{}),keyboardShortcut:(0,Od.l2)({cmdOrCtrl:!0,key:"v"}),run:function(){return(0,H.Z)((function(){var e,r;return(0,V.__generator)(this,(function(i){switch(i.label){case 0:e="",i.label=1;case 1:return i.trys.push([1,3,,4]),[4,window.navigator.clipboard.readText()];case 2:return e=i.sent(),[3,4];case 3:return r=i.sent(),Y.kg.error("CodeMirror context menu paste failed",{message:r.message}),[2];case 4:return gi({filePath:n,view:t,clipboardText:e}),[2]}}))}))()}})),e}),[n,t])}({path:t,view:r});return function(e){var t=e.view,n=e.commands,r=(0,Ve.Z)({view:t});(0,b.useEffect)((function(){if(t){var e=[],i=!0,o=!1,a=void 0;try{for(var l,c=function(){var t=l.value.data,n="action"===t.type?t:null;if(!n)return"continue";if(!n.keyboardShortcut)return"continue";var r=Array.isArray(n.keyboardShortcut)?n.keyboardShortcut.join(" "):n.keyboardShortcut;e.push({run:function(){return n.run(null),!0},key:r,preventDefault:!0})},u=n[Symbol.iterator]();!(i=(l=u.next()).done);i=!0)c()}catch(s){o=!0,a=s}finally{try{i||null==u.return||u.return()}finally{if(o)throw a}}return t.dispatch({effects:r.reconfigure(q.$f.of(e))}),function(){t.dispatch({effects:r.reconfigure([])})}}}),[t,n,r])}({view:r,commands:(0,b.useMemo)((function(){return(0,o.Z)(i).concat((0,o.Z)(l))}),[i,l])}),(0,b.useCallback)((function(){return{data:{type:"context",label:"Search actions",icon:(0,a.tZ)(Nd.Z,{})},commands:function(){return[{data:{type:"group",key:"lsp"},commands:function(){return i}},{data:{type:"group",key:"other"},commands:function(){return l}},{data:{type:"group",key:"cutCopy"},commands:function(){return c}}]}}}),[i,l,c])}function uf(e){var t=e.filePath,n=e.autoFocus,r=e.isHidden,i=e.deeplink,o=e.onDeeplinkUpdated,c=e.openFile,u=e.openThreadsInbox,s=e.formatObserver,d=(0,te.Z)(),f=d.fs,v=d.debuggest,m=d.presence,y=(0,Rn.Z)().preferences,Z=(0,Xu.Z)(),w=Z.ref,x=Z.view;(0,I.VD)(x),(0,Ld.g)(x);var k=(0,Ki.uV)(),C=(0,Ls.FS)(),S=eo.use(Boolean(null===C||void 0===C?void 0:C.match(/Chrome/i))&&Boolean(null===C||void 0===C?void 0:C.match(/Android/i))),T=(0,En.P5)({controlName:"flag-ultra-hardcore",logFlagToAnalytics:!1}),E=(0,En.P5)({controlName:"flag-editor-rulers",logFlagToAnalytics:!1}),G="/replEnvironmentDesktop"===h().pathname,_=(0,b.useContext)(Au.B3),D=(0,Ki.jT)();Fl({view:x,path:t,isHidden:r});var B=Eo({view:x,presence:m,fs:f,filePath:t}).isLoading;!function(e){var t=e.view,n=e.isLoading,r=e.autoFocus;b.useEffect((function(){r&&t&&(n||t.focus())}),[t,n,r])}({view:x,autoFocus:n,isLoading:B}),Pa({view:x,filePath:t,isLoading:B}),(0,sl.Y)({view:x});var P=(0,Ti.Lh)();qi({view:x,filePath:t,isLoading:B,decorations:P,openFile:c}),Ci({view:x,debuggest:v,filePath:t,isLoading:B});var A=xi({view:x,filePath:t,openFile:c}),L=A.onAction,X=A.actions,M=A.contextMenuCoords,N=A.onContextMenu,O=A.closeMenu,H=A.resizeRef,V=function(e){var t=e.view,n=e.filePath,r=e.isLoading,i=Za({replId:(0,Xo.Z)()}),o=(0,g.Z)(b.useState(null),2),a=o[0],l=o[1],c=(0,Ve.Z)({view:t});return b.useEffect((function(){if(t&&i&&!r&&n===i.mainFile){var e=document.createElement("div");return l(e),t.dispatch({effects:c.reconfigure((0,q.W$)(e))}),function(){t.dispatch({effects:c.reconfigure([])}),l(null)}}}),[t,i,n,r,c]),a}({view:x,filePath:t,isLoading:B}),j=function(e){var t=e.view,n=(0,g.Z)(b.useState(null),2),r=n[0],i=n[1],o=(0,Ve.Z)({view:t});return b.useEffect((function(){if(t){var e=document.createElement("div");return i(e),t.dispatch({effects:o.reconfigure([(0,z.yC)({createPanel:function(){return{top:!0,pos:80,dom:e}}}),q.tk.updateListener.of((function(t){if((0,z.Ep)(t.state)!==(0,z.Ep)(t.startState)&&(0,z.Ep)(t.state)){var n=e.querySelector("[main-field]");if(!n)return;n.focus(),n.select()}})),q.$f.of([{win:"Ctrl-h",linux:"Ctrl-h",preventDefault:!0,run:function(){return t.dispatch({effects:ka.of(null)}),(0,z.nx)(t)}}])])}),function(){t.dispatch({effects:o.reconfigure([])}),i(null)}}}),[t,o]),{domNode:r}}({view:x});(0,tr.Z)({filePath:t,view:x,isLoading:B,deeplink:i,onDeeplinkUpdated:o}),wl({view:x,filePath:t}),function(e){var t=e.view,n=(0,Ve.Z)({view:t}),r=(0,F.f6)();b.useEffect((function(){if(t&&r)return t.dispatch({effects:n.reconfigure(ml)}),function(){t.dispatch({effects:n.reconfigure([])})}}),[t,n,r])}({view:x});var $=function(e){var t,n=e.view,r=e.filePath,i=(0,te.Z)().fs,o=(0,F.xZ)(null!==(t=null===n||void 0===n?void 0:n.state.facet(Dn.Yp))&&void 0!==t?t:null);return(0,g.Z)((0,dl.L)({accept:[U.z.Code,fl.FILE],drop:function(e,t){if(n){var a=t.getClientOffset(),l=a?n.posAtCoords(a):null;if(null!==l){var c=function(e){n.focus(),n.dispatch({changes:{from:l,insert:e},selection:{anchor:l,head:l+e.length}})};if(e.type===U.z.Code)c(e.code);else{var u=!0,s=!1,d=void 0;try{for(var f,p=e.files[Symbol.iterator]();!(u=(f=p.next()).done);u=!0){var h=f.value;o?(0,ui.L0)(h).then((function(e){return c('"'+e+'"')})):r&&(0,ie.gK)(r)&&vi(h,i,r).then(c)}}catch(v){s=!0,d=v}finally{try{u||null==p.return||p.return()}finally{if(s)throw d}}}}}}}),2)[1]}({view:x,filePath:t});(0,Si.Z)({view:x,filePath:t,decorations:P});var Y=Wa({view:x,filePath:t,isLoading:B,enable:G});Al({view:x,filePath:t}),function(e){var t=e.view,n=e.filePath,r=(0,Ve.Z)({view:t}),i=(0,Ll.K)((0,me.Z)((function(){return{path:n}}),[n]));(0,b.useEffect)((function(){if(t){var e=q.tk.domEventHandlers({scroll:R()((function(){var e=0,n=0,r=!0,o=!1,a=void 0;try{for(var l,c=t.visibleRanges[Symbol.iterator]();!(r=(l=c.next()).done);r=!0){var u=l.value;e=Math.min(e,u.from),n=Math.max(e,u.to)}}catch(s){o=!0,a=s}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}i("user:scroll",{visibleLines:{from:t.state.doc.lineAt(e).number,to:t.state.doc.lineAt(n).number}})}),250)}),n=R()((function(e,t,n){i("user:selection",{inputMethod:n,from:e,to:t})}),250),o=q.tk.updateListener.of((function(e){var t=e.transactions,r=!0,o=!1,a=void 0;try{for(var l,c=t[Symbol.iterator]();!(r=(l=c.next()).done);r=!0){var u=l.value;u.isUserEvent("input.paste")&&i("user:paste",{}),u.isUserEvent("input.drop")&&i("user:new-drop",{}),u.isUserEvent("move.drop")&&i("user:move-drop",{}),u.isUserEvent("delete.cut")&&i("user:cut",{}),u.isUserEvent("input.complete")&&i("user:complete",{}),u.isUserEvent("select")&&n(u.newSelection.main.from,u.newSelection.main.to,u.isUserEvent("select.pointer")?"pointer":"keyboard"),u.isUserEvent("undo")&&i("user:undo",{}),u.isUserEvent("redo")&&i("user:redo",{})}}catch(s){o=!0,a=s}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}}));return t.dispatch({effects:r.reconfigure([e,o])}),function(){t.dispatch({effects:r.reconfigure([])})}}}),[t,r,i])}({view:x,filePath:t}),Bu({view:x,filePath:t});var K,Q=(0,p.useRouter)(),J=(0,l.Vg)(Q),ee=(0,F.xZ)(null!==(K=null===x||void 0===x?void 0:x.state.facet(Dn.Yp))&&void 0!==K?K:null),ne=As.use(ee,J),re=Zi.use(ee,f),oe=Xs.use(J),ae=gd.use(E?y.rulers:[]),le=yd.U.use(J),ce=(0,Fa.F)(),ue=kd.use(J,y,ce),de=(0,En.P5)({controlName:"flag-editor-context-menu2",logFlagToAnalytics:!1}),fe=Hi.use(s),pe=function(e){var t=(0,Mo.Z)(),n=(0,te.Z)().container,r=(0,ji.Z)(),i=r.showError,o=r.showConfirm,a=Ro.ZP.supportsFormatting(t),l=(0,Ud.Z)({container:n,service:"format",skip:!a}).channel,c=Xd.use(e.filePath,l,a,i,o);return(0,b.useMemo)((function(){return c}),[c])}({filePath:t}),he=(0,En.P5)({controlName:"flag-editor-visible-whitespace",logFlagToAnalytics:!1}),ve=Ad.use(!!he&&y.showLeadingWhitespace,!!he&&y.showEnclosedWhitespace,!!he&&y.showTrailingWhitespace,!!he&&y.showSelectedWhitespace),ge=(0,b.useMemo)((function(){return[le,ne,S,oe,ue,yi,re,Qi,Is,fd,pd,ae,ve,fe,pe,ni]}),[le,ne,S,ue,oe,re,ae,ve,fe,pe]),ye=cf({openFile:c,path:t,view:x}),Ze=(0,Md.av)().onContextMenu,be=lf({view:x,path:t});return(0,a.BX)("div",{ref:H,css:Ul.ac,"data-cy":B?"workspace-cm-editor-loading":"workspace-cm-editor-".concat(t),children:[(0,a.tZ)(Uu.Z,{ref:w,elementRef:$,css:Ul.Mp,initializing:B,filePath:t,extensions:ge,onContextMenu:function(e){de?x&&Ze(e,{command:ye(),width:275}):N(e)},onException:function(e){var n,r=D({filePath:t}),i={filePath:t,cursorPosition:JSON.stringify(null===(n=null===_||void 0===_?void 0:_.get(Lu._s))||void 0===n?void 0:n.position),fileVersion:r};T?k({error:e,tags:{codemirror:!0},extras:i,origin:"CodemirrorEditor: useEditor/onException"}):(0,Zt.xp)(e,{tags:{origin:"CodemirrorEditor: useEditor/onException",codemirror:!0},extras:i})},noHistory:!0}),M&&x?(0,a.tZ)(W.ZP,{view:x,coords:M,actions:X,closeMenu:O,onAction:L}):null,V&&t?(0,a.tZ)(va,{dom:V,onShowGenerateCodeModal:function(){de?null===be||void 0===be||be():L(W.D2.GenerateCode)},filePath:t}):null,j.domNode?(0,a.tZ)(_a,{dom:j.domNode,view:x}):null,(0,a.tZ)(Ti.Iq,{source:P.observable}),x&&u?(0,a.tZ)(a.HY,{children:Object.entries(Y.threadElements).map((function(e){var n=(0,g.Z)(e,2),r=n[0],i=n[1];return se.createPortal((0,a.tZ)(ul,{threadId:r,view:x,filePath:t,openThreadsInbox:u}),i)}))}):null]})}var sf=n(12404),df=n(38567),ff=n(24478),pf=(0,hn.X)({base:[k.l0.backgroundColor.backgroundDefault,k.l0.color.foregroundDimmer,k.l0.borderRadius(0),k.l0.height("auto"),k.l0.p(4),{"> div":k.l0.rowWithGap(4)}]}),hf=function(e){var t=e.css,n=(0,mt.Z)(e,["css"]);return(0,a.tZ)(ba.Tg,{background:"root",children:(0,a.tZ)(Mn.zx,(0,r.Z)({small:!0,css:[pf.base,t]},n))})};function vf(e){var t=e.performPaneOperation,n=(0,df.Z)(function(){var e=(0,H.Z)((function(e){var t,n,r,i;return(0,V.__generator)(this,(function(o){switch(o.label){case 0:return[4,e.getRepositoryState()];case 1:return(t=o.sent()).error?[2,t]:(n=t.type,r=null,n===sf.y5.INITIALIZING?[3,3]:[4,e.status()]);case 2:if((i=o.sent()).error)return[2,i];r=i,o.label=3;case 3:return[2,{branchName:null===r||void 0===r?void 0:r.branch,error:null}]}}))}));return function(t){return e.apply(this,arguments)}}()),r=!n||n.error?null:n.branchName;return r?(0,a.tZ)(hf,{onClick:function(){return null===t||void 0===t?void 0:t({operation:"open",pane:{type:"git"}})},text:r,iconLeft:(0,a.tZ)(ff.Z,{color:hr.TV.foregroundDimmer,size:12})}):null}var mf=n(10035),gf=n(46889);function yf(e){var t=e.onOpen;return(0,a.tZ)(hf,{text:"History",iconRight:(0,a.tZ)(mf.Z,{size:12}),onClick:function(){(0,gf.p)("historyOpened"),t()},css:[{borderBottomRightRadius:k.TV.space6}]})}var Zf=n(66539),bf=n(60396),wf=n(49828),xf=n(16885),kf=n(24489),Cf=n(84912),Sf=n(68339);function Tf(){var e,t=(0,I.uN)(),n=null===t||void 0===t||null===(e=t.state)||void 0===e?void 0:e.facet(Dn.Yp);return n?(0,a.tZ)(Ef,{fileName:n}):null}function Ef(e){var t=e.fileName,n=(0,Rn.Z)().preferences.codeIntelligence,r=function(){var e=(0,I.uN)(),t=(0,b.useState)(null===e||void 0===e?void 0:e.state.facet(Dn.Q$)),n=t[0],r=t[1],i=(0,Ve.Z)({view:e});return(0,b.useEffect)((function(){if(e)return e.dispatch({effects:i.reconfigure(q.tk.updateListener.of((function(e){var t=e.startState.facet(Dn.Q$),n=e.state.facet(Dn.Q$);t!==n&&r(n)})))}),r(e.state.facet(Dn.Q$)),function(){r(void 0),e.dispatch({effects:i.reconfigure([])})};r(void 0)}),[e,i]),n}(),i=null!=r,o=(0,Q.Z)(t),l=function(e){var t=(0,te.Z)(),n=t.lsp,r=t.lspnix,i=(0,Q.X)(),o=(0,Rn.Z)().preferences.codeIntelligence,a=(0,b.useState)(!1),l=a[0],c=a[1];(0,b.useEffect)((function(){null!=e&&c(!1)}),[e]);var u=(0,b.useCallback)((function(){null!==i&&o&&(i?(r.disable(),r.enable()):(n.stop(),n.start()),c(!0))}),[n,r,i,o]);return{isRestartingLSP:l,restartLSP:u}}(o),c=l.isRestartingLSP,u=l.restartLSP,s=(0,b.useState)(null===o||void 0===o?void 0:o.getServerState()),d=s[0],f=s[1],p=(0,b.useState)(null===o||void 0===o?void 0:o.getServerHealth()),h=p[0],v=p[1],m=d===dt.a.INITIALIZING||c,g=d===dt.a.INITIALIZED,y=d===dt.a.EXITED||c,Z=null!=o&&h===dt.N.READY,w=null!=o&&h===dt.N.STALLED;(0,b.useEffect)((function(){if(o)return f(o.getServerState()),v(o.getServerHealth()),(0,Sf.uf)([o.onServerStateChange((function(e){f(e)})),o.onServerHealthChange((function(e){v(e)}))])}),[o]);var x=function(e){var t=e.codeIntelligence,n=e.isRestartingLSP,r=e.isInitializedLSP,i=e.isExitedLSP,o=e.isReadyLSP,a=e.isStalledLSP,l=e.hasPartialSupport;if(n)return"Restarting language server...";if(!t)return"Code intelligence is disabled. Enable it in settings.";if(i)return"Language support is not available because the language server exited.";if(a)return"Language support is stalled due to a resource constraint.";if(r&&!o)return"Language support may be inaccurate because it is initializing.";if(!r&&l)return"Language support may be inaccurate because code intelligence is not available."}({codeIntelligence:n,isRestartingLSP:c,isInitializedLSP:g,isReadyLSP:Z,isExitedLSP:y,isStalledLSP:w,hasPartialSupport:i}),C=y||m||w||!o;return(0,a.tZ)(Zf.u,{isDisabled:void 0===x,tooltip:x,children:(0,a.tZ)(hf,{disabled:!C,css:[{svg:[k.l0.width(16),k.l0.height(16)],borderBottomLeftRadius:k.TV.space6}],iconLeft:Gf({isLoadingLSP:m,isInitializedLSP:g,isReadyLSP:Z,isExitedLSP:y,isStalledLSP:w,hasPartialSupport:i}),text:Rf({codeMirrorLanguageSupport:r,fileName:t}),onClick:function(){y||m||w?u():o||window.open("https://docs.replit.com/programming-ide/configuring-repl#languages","_blank")}})})}function Rf(e){var t,n=e.codeMirrorLanguageSupport,r=e.fileName,i=(0,bf.v)(r);return i||(n?0===n.language.name.length?(0,ie.r6)(r):(t=n.language.name).slice(0,1).toUpperCase()+t.slice(1).toLowerCase():"Plain Text")}function Gf(e){var t=e.isLoadingLSP,n=e.isInitializedLSP,r=e.isReadyLSP,i=e.isExitedLSP,o=e.isStalledLSP,l=e.hasPartialSupport;return o?(0,a.tZ)(Cf.Z,{size:16}):t||n&&!r?(0,a.tZ)(kr.Z,{size:16,color:k.TV.blueStronger}):r?(0,a.tZ)(xf.Z,{size:16}):i?(0,a.tZ)(kf.Z,{size:16}):l?(0,a.tZ)(Cf.Z,{size:16}):(0,a.tZ)(wf.Z,{size:16})}function If(){var e=(0,b.useRef)(null),t=(0,I.uN)(),n=(0,Ve.Z)({view:t}),r=function(t){e.current&&(e.current.textContent=t)};return(0,b.useEffect)((function(){if(t){var e=null,i=null,o=function(t){t!==i&&(i=t,null===e&&(e=requestAnimationFrame((function(){e=null,r(i?function(e){var t=e.selection,n="",r=0;if(t.ranges.length>1){r=t.ranges.reduce((function(e,t){return e+(t.to-t.from)}),0);var i=t.ranges.length;n="".concat(i," selections")}else{var o=t.ranges[0],a=e.doc.lineAt(o.head),l=o.head-a.from;r=o.to-o.from,n="Ln ".concat(a.number,", Col ").concat(l+1)}return r>0&&(n+=" (".concat(r," chars)")),n}(i):"")}))))};return t.dispatch({effects:n.reconfigure(q.tk.updateListener.of((function(e){(e.docChanged||e.selectionSet)&&o(e.state)})))}),o(t.state),function(){r(""),null!==e&&(cancelAnimationFrame(e),e=null),t.dispatch({effects:n.reconfigure([])})}}r("")}),[t,n]),(0,b.useMemo)((function(){return(0,a.tZ)(hf,{text:(0,a.tZ)("span",{ref:e,"data-cy":"current-position"}),css:[k.l0.color.foregroundDimmest],onClick:t?function(){return(0,z.zo)(t)}:void 0})}),[t])}function _f(){var e=(0,b.useState)(null),t=e[0],r=e[1],i=(0,b.useRef)(null),o=(0,I.uN)(),l=(0,Ve.Z)({view:o}),c=(0,Rn.Z)().preferences,u="vim"===(null===c||void 0===c?void 0:c.keyboardHandler),s=(0,b.useCallback)((function(e){if(i.current){var n=null!==e&&void 0!==e?e:"";if(o&&t&&void 0===e){var r,a,l=t.getCM(o),c=null!==(a=null===(r=null===l||void 0===l?void 0:l.state.vim)||void 0===r?void 0:r.mode)&&void 0!==a?a:"normal";n="-- ".concat(c.toUpperCase()," --")}i.current.innerText!==n&&(i.current.innerText=n||"")}}),[o,t]);return(0,b.useEffect)((function(){u&&!t&&n.e(5817).then(n.bind(n,77032)).then((function(e){r(e),s()}))}),[u,t,s]),(0,b.useEffect)((function(){if(o&&u){var e=!1;return setTimeout((function(){e||(e=!0,o.dispatch({effects:l.reconfigure(q.tk.updateListener.of((function(){return s()})))}))}),0),s(),function(){e?o.dispatch({effects:l.reconfigure([])}):e=!0}}s(null)}),[o,u,l,s]),(0,a.tZ)(a.HY,{children:u?(0,a.tZ)(fe.xv,{ref:i,multiline:!1,color:"dimmer",variant:"small"}):null})}var Df=n(53472),Bf=n(27549),Pf=n(28103),Af=n(93672);function Lf(){var e,t=(0,I.uN)(),n=null===t||void 0===t||null===(e=t.state)||void 0===e?void 0:e.facet(Dn.Yp);return n?(0,a.tZ)(Uf,{fileName:n}):null}function Uf(e){var t=e.fileName,n=(0,I.uN)(),r=function(e){var t=(0,b.useState)(null),n=t[0],r=t[1],i=(0,Q.Z)(e),o=(0,Df.nC)(),a=(0,Bf.dr)();return(0,b.useEffect)((function(){if(i){var t=function(t){var n,r=o().find((function(e){var t=(0,g.Z)(e,2);return t[0],"problems"===t[1].type}));if(r){var i=a(r[0]);i&&"problems"===i.type&&(null===(n=i.updateProblems)||void 0===n||n.call(i,e,t))}},n=i.onDiagnostics((function(n){n.path===e&&(r(n.diagnostics),t(n.diagnostics))}));return function(){n(),o().some((function(t){var n=(0,g.Z)(t,2),r=(n[0],n[1]);return"codeEditor"===r.type&&r.data.path===e}))||t([])}}}),[i,e,o,a]),n}(t),i=(0,b.useMemo)((function(){return r?function(e){var t=e.reduce((function(e,t){return void 0===t.severity||(e[t.severity]=(e[t.severity]||0)+1),e}),{});return e.length>0&&0===Object.keys(t).length&&(t[$e.DiagnosticSeverity.Error]=e.length),t}(r):null}),[r]);if(!i)return null;var o=i[$e.DiagnosticSeverity.Error]||0,l=i[$e.DiagnosticSeverity.Warning]||0;return 0===o&&0===l?null:(0,a.BX)(a.HY,{children:[(0,a.tZ)(Zf.u,{tooltip:"".concat(o," errors"),children:(0,a.tZ)(hf,{text:String(o),iconLeft:(0,a.tZ)(Pf.Z,{severity:$e.DiagnosticSeverity.Error,size:12}),disabled:!n,onClick:n?function(){return(0,Af.Z)(n)}:void 0})}),(0,a.tZ)(Zf.u,{tooltip:"".concat(l," warnings"),children:(0,a.tZ)(hf,{text:String(l),iconLeft:(0,a.tZ)(Pf.Z,{severity:$e.DiagnosticSeverity.Warning,size:12}),disabled:!n,onClick:n?function(){return(0,Af.Z)(n)}:void 0})})]})}var Xf=n(25381);function Mf(){var e=(0,b.useState)(!1),t=e[0],n=e[1],r=(0,b.useState)(!1),i=r[0],o=r[1],l=(0,Ri.Z)(t),c=(0,Ri.Z)(i),u=(0,I.uN)();return Ii((function(){return q.tk.updateListener.of((function(e){var t=e.state.field(_u,!1);if(!t||null===t.head)return l.current&&n(!1),void(c.current&&o(!1));var r=t.mode===fu.INLINE_DIFF;l.current!==r&&n(r),c.current||o(!0)}))}),[l,c],u,"ToggleGitFileDiff"),u&&i?(0,a.tZ)(hf,{text:t?"Diffing":"Diff",colorway:t?"primary":void 0,iconLeft:(0,a.tZ)(Xf.Z,{}),onClick:function(){u.dispatch({effects:Iu.of(t?fu.GUTTER_DIFF:fu.INLINE_DIFF)})}}):null}var Nf=n(33280),Of=n(5790),Ff=n(33814),Wf=n(70593),Hf=(0,hn.X)({surface:[k.l0.height("100%")],cursorOverlay:{cursor:"pointer"},buttonMenuClosed:[jo.gU.nofill,k.l0.p(4),k.l0.rowWithGap(8),k.l0.borderRadius(0)],buttonMenuOpen:[jo.gU.filled,k.l0.p(4),k.l0.rowWithGap(8),k.l0.borderRadius(0),{pointerEvents:"none"}],menu:[k.l0.p(8),k.l0.colWithGap(8),k.l0.maxWidth(320)],header:[k.l0.colWithGap(4)],settings:[k.l0.colWithGap(8)],space:[k.l0.width(2),k.l0.color.foregroundDimmer,k.l0.textAlign.center],tab:[k.l0.width(8),k.l0.color.foregroundDimmer,k.l0.textAlign.center]});function Vf(e){var t=e.openSettings,n=(0,b.useState)(!1),o=n[0],l=n[1],c=(0,Rn.Z)(),u=c.preferences,s=c.update,d=u.indentSize,f=u.indentIsSpaces;return(0,a.BX)(Of.x,{label:"Set indentation settings",placement:"top",isOpen:o,onOpenChange:l,allowPageClicks:!0,children:[function(e){return(0,a.tZ)(Zf.u,{tooltip:"Change indentation settings",isDisabled:o,children:(0,a.tZ)("div",{css:Hf.cursorOverlay,children:(0,a.BX)(x.K.button,(0,i.Z)((0,r.Z)({},e),{css:o?Hf.buttonMenuOpen:Hf.buttonMenuClosed,children:[f?(0,a.tZ)(zf,{}):(0,a.tZ)(jf,{}),(0,a.BX)(fe.xv,{multiline:!1,variant:"small",color:"dimmer",children:[f?"Spaces:":"Tabs:"," ",d]})]}))})})},(0,a.BX)(x.G,{css:Hf.menu,children:[(0,a.BX)(x.G,{css:Hf.header,children:[(0,a.tZ)(fe.h4,{level:1,children:"Indentation settings"}),(0,a.tZ)(fe.xv,{variant:"small",color:"dimmer",children:"Set indentation behavior for all files. Changing your settings will not alter any existing indentation."})]}),(0,a.tZ)(Nf.R,{}),(0,a.tZ)(x.G,{css:Hf.settings,children:(0,a.tZ)(Wf.Z,{preferences:u,update:s})}),(0,a.tZ)(Nf.R,{}),(0,a.tZ)(Mn.zx,{text:"View all settings",iconLeft:(0,a.tZ)(Ff.Z,{}),onClick:function(){l(!1),t()}})]})]})}function zf(){return(0,a.tZ)("span",{css:Hf.space,children:"\u2981"})}function jf(){return(0,a.tZ)("span",{css:Hf.tab,children:"\u21e5"})}var qf=(0,hn.X)({root:[k.l0.position.relative,k.l0.rowWithGap(16),k.l0.align.center,k.l0.justify.spaceBetween,k.l0.backgroundColor.backgroundDefault,{borderTop:"1px solid ".concat(k.TV.backgroundHigher)},{height:"30px",contain:"strict"}],left:[k.l0.rowWithGap(2),k.l0.align.center,k.l0.px(8)],right:[k.l0.rowWithGap(2),k.l0.display.flex,k.l0.flex.row,k.l0.align.center],group:[k.l0.rowWithGap(2),k.l0.display.flex,k.l0.flex.row,k.l0.flex.shrink(1),k.l0.align.center]});function $f(e){var t=e.filePath,n=e.performPaneOperation,r=(0,En.P5)({controlName:"flag-lsp-status-in-ws",logFlagToAnalytics:!1}),i=(0,En.P5)({controlName:"flag-lsp-diagnostics-in-footer",logFlagToAnalytics:!1}),o=(0,_.d)(),c=!o&&r,u=!o&&i,s=(0,En.P5)({controlName:"flag-status-bar-branch",logFlagToAnalytics:!1}),d=(0,En.P5)({controlName:"flag-editor-git-inline-diff",logFlagToAnalytics:!1}),f=(0,En.P5)({controlName:"flag-editor-indentation-quick-settings",logFlagToAnalytics:!1}),p=(0,l.T3)()?void 0:{borderBottomLeftRadius:7,borderBottomRightRadius:7},h=(0,me.Z)((function(){return function(){n({operation:"replace",pane:{type:"history",data:{path:t}}})}}),[t,n]),v=(0,me.Z)((function(){return function(){n({operation:"open",pane:{type:"preferences"}})}}),[n]);return(0,a.BX)(ba.Tg,{css:qf.root,style:p,children:[(0,a.BX)(x.G,{css:qf.group,children:[c?(0,a.tZ)(Tf,{}):null,u?(0,a.tZ)(Lf,{}):null,s?(0,a.tZ)(vf,{performPaneOperation:n}):null,d?(0,a.tZ)(Mf,{}):null,(0,a.tZ)(_f,{})]}),(0,a.BX)(x.G,{css:qf.group,children:[(0,a.tZ)(If,{}),f?(0,a.tZ)(Vf,{openSettings:v}):null,(0,a.tZ)(yf,{onOpen:h})]})]})}var Yf=n(4143),Kf=n(69861),Qf=n(56581),Jf=n(92683);function ep(e,t,n){var r=n.find((function(n){var r=n.range;return(0,we.R)(e,r.end)>=t&&(0,we.R)(e,r.start)<=t}));return null==r?[]:r.children?[r].concat(ep(e,t,r.children)):[r]}function tp(e,t){return e.length===t.length&&e.every((function(e,n){return e===t[n]}))}var np=n(98143),rp=n(51875),ip=n(80731),op=n(54301),ap=n(53674),lp=(0,$o.iv)([jo.gU.nofill,{transitionProperty:"background-color, box-shadow, opacity",opacity:.8,":focus":{zIndex:1,opacity:1}}]),cp={button:(0,$o.iv)([k.l0.reset.button,k.l0.p(2),k.l0.rowWithGap(4),k.l0.align.center,lp]),text:(0,$o.iv)({fontSize:k.TV.fontSizeSmall})},up={opacity:1};function sp(e){var t=e.icon,n=e.text,o=e.innerRef,l=e.ariaProps,c=e.active,u=(0,op.U)(l,o).buttonProps,s=(0,ap.XI)({}),d=s.hoverProps,f=s.isHovered;return(0,a.BX)(x.G,(0,i.Z)((0,r.Z)({tag:"button",css:cp.button,style:f||c?up:void 0,innerRef:o},(0,Zr.dG)(u,d)),{children:[t?(0,b.cloneElement)(t,{size:16}):null,(0,a.tZ)(x.G,{css:cp.text,children:n})]}))}var dp=n(73457),fp=n(23257),pp={underlay:(0,$o.iv)([k.l0.coverContainer,k.l0.position.fixed]),surface:(0,$o.iv)([k.l0.borderRadius(8),{boxShadow:k.TV.shadow2,border:"1px solid",borderColor:k.TV.backgroundHighest}])};function hp(e){var t=e.state,n=e.triggerRef,o=e.placement,l=e.children,c=(0,g.Z)((0,fp.Z)(),2),u=c[0],s=c[1],d=(0,dp.Sv)({placement:o,triggerRef:n,popoverRef:u,offset:8},t),f=d.popoverProps,p=d.underlayProps;return(0,a.BX)(dp.aV,{children:[(0,a.tZ)(x.G,(0,i.Z)((0,r.Z)({},p),{css:pp.underlay})),(0,a.BX)(ba.Tg,(0,i.Z)((0,r.Z)({elevated:!0,css:pp.surface,innerRef:s},f),{children:[(0,a.tZ)(dp.U4,{onDismiss:t.close}),l,(0,a.tZ)(dp.U4,{onDismiss:t.close})]}))]})}var vp=n(51936),mp=(0,$o.iv)([k.l0.p(4)]);function gp(e){var t=e.items,n=e.children,l=e.menuProps,c=e.selectedKeys,u=e.onAction,s=(0,vp.D)({items:t,children:n,selectedKeys:c,selectionMode:"single"}),d=(0,b.useRef)(null),f=(0,rp.H9)((0,r.Z)({items:t,onAction:u},l),s,d);return(0,a.tZ)(x.G,(0,i.Z)((0,r.Z)({},f.menuProps),{innerRef:d,css:mp,children:(0,o.Z)(s.collection).map((function(e){return(0,a.tZ)(bp,{item:e,state:s},e.key)}))}))}var yp={root:(0,$o.iv)([k.l0.flex.row,k.l0.align.center,k.l0.position.relative,lp]),selected:(0,$o.iv)([{opacity:1,backgroundColor:jo.vb.interactiveBackground}])},Zp={opacity:1};function bp(e){var t=e.item,n=e.state,o=(0,b.useRef)(null),l=(0,rp.iX)({key:t.key},n,o),c=l.menuItemProps,u=l.isSelected,s=(0,ap.XI)({}),d=s.hoverProps,f=s.isHovered;return(0,a.tZ)(x.G,(0,i.Z)((0,r.Z)({innerRef:o,css:[yp.root,u&&yp.selected],style:f||u?Zp:void 0},(0,Zr.dG)(c,d)),{children:t.rendered}))}var wp={root:(0,$o.iv)([k.l0.p(4),k.l0.rowWithGap(4),k.l0.align.center]),text:(0,$o.iv)([k.l0.truncate,k.l0.flex.growAndShrink(1),{fontSize:k.TV.fontSizeDefault}])};function xp(e){return(0,a.BX)(x.G,{css:[wp.root],children:[e.icon?(0,b.cloneElement)(e.icon,{size:16}):null,(0,a.tZ)(x.G,{css:wp.text,children:e.text})]})}var kp=n(29892),Cp=n(20406),Sp=n(14433),Tp=n(33064),Ep=n(53272),Rp=n(98355),Gp=n(95271),Ip=n(70628),_p=n(82874),Dp=n(97130),Bp=n(65911),Pp=n(29143),Ap=function(e){var t=new Set(Pp.Z),n=new Map,r=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=(0,g.Z)(a.value,3),u=c[0],s=c[1],d=c[2];if(!t.has(u))throw new Error("Symbol not supported by LSP client. Please add to the supported symbol icons array");"string"===typeof s&&(s=Dp.s.get(s)),n.set(u,[s,null!==d&&void 0!==d?d:k.TV.foregroundDefault])}}catch(f){i=!0,o=f}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return n}([[$e.SymbolKind.Array,Gp.Z],[$e.SymbolKind.Boolean,f.Z],[$e.SymbolKind.Class,"class",k.TV.yellowDefault],[$e.SymbolKind.Constant,"constant",k.TV.blueStronger],[$e.SymbolKind.Constructor,"method",k.TV.blurpleDefault],[$e.SymbolKind.Enum,Sp.Z,k.TV.orangeDefault],[$e.SymbolKind.EnumMember,_p.Z,k.TV.blueStronger],[$e.SymbolKind.Event,kp.Z],[$e.SymbolKind.Field,Ip.Z],[$e.SymbolKind.File,Tp.Z],[$e.SymbolKind.Function,"function",k.TV.blurpleStronger],[$e.SymbolKind.Interface,Ep.Z,k.TV.blueStronger],[$e.SymbolKind.Key,Rp.Z],[$e.SymbolKind.Method,"method",k.TV.blurpleDefault],[$e.SymbolKind.Module,Bp.Z,k.TV.purpleDefault],[$e.SymbolKind.Namespace,Cp.Z],[$e.SymbolKind.Object,f.Z,k.TV.blueDimmer],[$e.SymbolKind.Operator,f.Z],[$e.SymbolKind.Package,Bp.Z,k.TV.purpleDefault],[$e.SymbolKind.Property,Ip.Z],[$e.SymbolKind.String,d.Z],[$e.SymbolKind.Struct,Cp.Z],[$e.SymbolKind.TypeParameter,_p.Z],[$e.SymbolKind.Variable,_p.Z,k.TV.blueStronger]]);function Lp(e){var t,n=e.kind,r=(0,g.Z)(null!==(t=Ap.get(n))&&void 0!==t?t:[f.Z,k.TV.foregroundDefault],2),i=r[0],o=r[1];return(0,a.tZ)(i,{color:o,size:16})}function Up(e){return CSS.escape(e.name)}function Xp(e){var t=e.selectedSymbol,n=e.symbols,r=e.moveCursor,i=e.icon,o=e.text,l=(0,np.W)({onOpenChange:function(e){e&&(0,K.j)(K.U3.CODE_NAVIGATION_USED,{action:"opened"})}}),c=b.useRef(null),u=(0,rp.u4)({},l,c),s=u.menuTriggerProps,d=u.menuProps,f=t?new Set([t.name]):void 0;return(0,a.BX)(a.HY,{children:[(0,a.tZ)(sp,{text:o,icon:i,innerRef:c,ariaProps:s,active:l.isOpen}),l.isOpen?(0,a.tZ)(hp,{triggerRef:c,state:l,placement:"bottom left",children:(0,a.tZ)(gp,{menuProps:d,items:n,selectedKeys:f,onAction:function(e){var t=n.find((function(t){return Up(t)===e}));t&&(r(t.selectionRange.start),(0,K.j)(K.U3.CODE_NAVIGATION_USED,{action:"jumped"}))},children:function(e){return(0,a.tZ)(ip.ck,{children:(0,a.tZ)(xp,{icon:(0,a.tZ)(Lp,{kind:e.kind}),text:e.name})},Up(e))}})}):null]})}var Mp=b.memo((function(e){var t=e.symbols,n=e.symbolsPath,r=e.moveCursor,i=n.length?n[n.length-1]:null,o=i?i.children:t;return(0,a.BX)(a.HY,{children:[n.map((function(e,i){var o=0===i?t:n[i-1].children;return o?(0,a.BX)(b.Fragment,{children:[(0,a.tZ)(wa.Z,{size:12}),(0,a.tZ)(Xp,{symbols:o,icon:(0,a.tZ)(Lp,{kind:e.kind}),text:e.name,selectedSymbol:e,moveCursor:r})]},Up(e)):null})),(null===o||void 0===o?void 0:o.length)?(0,a.BX)(a.HY,{children:[(0,a.tZ)(wa.Z,{size:12}),(0,a.tZ)(Xp,{symbols:o,text:"...",moveCursor:r})]}):null]})}));function Np(e){var t=e.view,n=(0,me.Z)((function(){return(0,m.cn)(null)}),[]),r=(0,Jf.b9)(n),i=b.useCallback((function(e){null===t||void 0===t||t.dispatch({scrollIntoView:!0,selection:j.jT.cursor((0,we.R)(t.state.doc,e))}),null===t||void 0===t||t.focus()}),[t]);Ii((function(){var e=R()(r,200);return q.tk.updateListener.of((function(t){var n=t.state.field(Di,!1)||null,r=n!==t.startState.field(Di,!1);(t.selectionSet||r)&&e({doc:t.view.state.doc,cursor:t.state.selection.main.head,symbols:n})}))}),[r],t,"useCodeNav");var o=(0,me.Z)((function(){return(0,Qf.kv)(n,(function(e){return(null===e||void 0===e?void 0:e.symbols)?ep(e.doc,e.cursor,e.symbols):[]}),tp)}),[n]),a=(0,me.Z)((function(){return(0,Qf.kv)(n,(function(e){return null===e||void 0===e?void 0:e.symbols}),$r())}),[n]);return{symbols:(0,Jf.Dv)(a),symbolsPath:(0,Jf.Dv)(o),moveCursor:i}}var Op=b.memo((function(e){var t=Np({view:e.view}),n=t.symbols,r=t.symbolsPath,i=t.moveCursor;return(null===n||void 0===n?void 0:n.length)?(0,a.tZ)(Mp,{symbols:n,symbolsPath:r,moveCursor:i}):null})),Fp=n(35273),Wp=n(39187);function Hp(e){var t=e.path,n=e.performPaneOperation,r=(0,I.uN)(),i=(0,b.useCallback)((function(e){n({operation:"open",pane:(0,Fp.$E)(e)})}),[n]);return(0,a.tZ)(Fp.h4,{children:(0,a.tZ)(Fp.Qc,{children:(0,a.tZ)(Wp.tr,{path:t,onFileClick:i,children:(0,a.tZ)(Op,{view:r})})})})}function Vp(e){var t=(0,Kf.Z)(),n=(0,F.xZ)(e.filePath),r=(0,Yf.Z)(Oo.y.Editor),i=(0,w.Z)();return(0,a.BX)("div",{ref:r,css:{position:"relative",display:"flex",flexDirection:"column",overflowY:"hidden",height:"100%",width:"100%",boxShadow:"".concat(t?"0 3px 0 3px ".concat(t):"0")},children:[e.performPaneOperation?(0,a.tZ)(Hp,{performPaneOperation:e.performPaneOperation,path:e.filePath}):null,(0,a.BX)("div",{css:Ul.ev,children:[(0,a.tZ)(uf,{openFile:e.openFile,openThreadsInbox:e.openThreadsInbox,filePath:e.filePath,autoFocus:e.autoFocus,hideMobileKeyboardToolbar:e.hideMobileKeyboardToolbar,isHidden:e.isHidden,deeplink:e.deeplink,onDeeplinkUpdated:e.onDeeplinkUpdated,formatObserver:e.formatObserver}),n?(0,a.tZ)(O,{}):null]}),(0,a.tZ)("div",{css:{display:i?"none":"block"},children:(0,a.tZ)($f,{filePath:e.filePath,performPaneOperation:e.performPaneOperation})}),e.hideMobileKeyboardToolbar?null:(0,a.tZ)(L,{filePath:e.filePath,isLoading:!1})]})}var zp=n(21303);function jp(e){var t=e.filePath,n=e.replLanguage,r=(0,te.Z)(),i=r.fs,o=r.container,a=(0,Ud.Z)({container:o,service:"format",skip:!Ro.ZP.supportsFormatting(n)}).channel,l=(0,g.Z)(b.useState(!1),2),c=l[0],u=l[1],s=(0,ji.Z)().showError,d=(0,b.useCallback)((function(e){u(!1),e&&Y.kg.time("formatter_ran",Date.now()-e,{extension:(0,ie.r6)(t),type:"formatter_service",variant:"hook"})}),[t]);return b.useEffect((function(){if(c&&a){var e=!1,n=null,r=i.watchTextFile(t,{onReady:function(e){!function(e,t){o.apply(this,arguments)}(e.initialContent,e.writeChange)},onChange:function(e){var t=e.changes;n=n?n.compose(t):t},onError:function(){d()},onMoveOrDelete:function(){d()}});return function(){e=!0,r()}}function o(){return(o=(0,H.Z)((function(r,i){var o,l,c,u,f;return(0,V.__generator)(this,(function(p){switch(p.label){case 0:return o=Date.now(),e||!a?[2]:0===r.length?(d(),[2]):[4,a.request({file:{path:t,content:hi.Z.from(r).toBuffer()}})];case 1:return l=p.sent(),e?[2]:l.error||!l.file?(s("Failed to format ".concat(t),1500),d(),(0,K.j)(K.U3.AUTO_FORMAT_FAILED,{extension:(0,ie.r6)(t)}),[2]):0===(c=hi.Z.from(l.file.content).toString()).length||0===(u=(0,Oi.F)(r,c)).length||0===(f=n?u.map(u,!0):u).length?(d(o),[2]):(i(f),d(o),[2])}}))}))).apply(this,arguments)}}),[a,t,d,i,c,s]),b.useEffect(d,[t,d]),Ro.ZP.supportsFormatting(n)?function(){return u(!0)}:null}function qp(e){var t=e.filePath,n=e.onComplete,r=(0,Mo.Z)(),i=jp({filePath:t,replLanguage:r}),a=function(e){var t,n=e.filePath,r=(0,Rn.Z)().preferences,i=(0,te.Z)().fs,a=(0,Q.Z)(n),l=Boolean(null===(t=null===a||void 0===a?void 0:a.getServerCapabilities())||void 0===t?void 0:t.documentFormattingProvider),c=(0,b.useState)([]),u=c[0],s=c[1],d=(0,ji.Z)(),f=d.showError,p=d.showConfirm;return l?{fn:function(){if(!u.includes(n)){s((function(e){return(0,o.Z)(e).concat([n])}));var e=null,t=function(e){(null===e||void 0===e?void 0:e.didErr)?(f("Sorry, formatting ".concat(n," failed"),1500),(0,K.j)(K.U3.AUTO_FORMAT_FAILED,{extension:(0,ie.r6)(n)})):p("Formatted ".concat(n," successfully"),1500),l(),s((function(e){return e.filter((function(e){return e!==n}))})),(null===e||void 0===e?void 0:e.startTime)&&Y.kg.time("formatter_ran",Date.now()-e.startTime,{extension:(0,ie.r6)(n),type:"lsp_format",variant:"hook"})},l=i.watchTextFile(n,{onReady:function(){var i=(0,H.Z)((function(i){var o,l,c,u,s,d;return(0,V.__generator)(this,(function(f){switch(f.label){case 0:if(o=i.initialContent,l=i.writeChange,!a)throw new Error("LSP client not found");return c=Date.now(),[4,a.request.format(n,{insertSpaces:r.indentIsSpaces,tabSize:r.indentSize})];case 1:return"error"in(u=f.sent())||u.cancelled?(t({didErr:!0}),[2]):u.result?(s=(0,Vi.Z)(u.result,o.toString()),0===(d=e?s.map(e,!0):s).length?(t({startTime:c}),[2]):(l(d),t({startTime:c}),[2])):(t({didErr:!0}),[2])}}))}));return function(e){return i.apply(this,arguments)}}(),onChange:function(t){var n=t.changes;e=e?e.compose(n):n}})}},isFormatting:u.includes(n)}:null}({filePath:t});return(0,ie.Mb)(t)&&(a||i)?{format:function(){!function(e){var t=e.formatWithLsp,n=e.formatWithService,r=e.replLanguage,i=e.filePath,o=(null===t||void 0===t?void 0:t.fn)||n;if(!o)throw new Error("Expected format function");(0,K.j)(K.U3.AUTO_FORMAT_USED,{language:r,extension:(0,ie.r6)(i)}),o()}({formatWithLsp:a,formatWithService:i,replLanguage:r,filePath:t}),n&&n()},isFormatting:Boolean(null===a||void 0===a?void 0:a.isFormatting)}:null}var $p={cmdOrCtrlKey:!0,altKey:!1,shiftKey:!1,key:"S"},Yp=n(5616),Kp=n(43330);var Qp=n(25198);var Jp=(0,hn.X)({root:[k.l0.coverContainer,k.l0.center,k.l0.p(16)]});function eh(e){var t=function(e,t){switch(e.code){case Yi.Df.NotFound:return'"'.concat(t,"\" doesn't exist");case Yi.Df.IsDirectory:return'"'.concat(t,'" is a directory');case Yi.Df.DiskQuotaExceeded:return"This Repl ran out of disk space";case Yi.Df.InvalidPath:return'"'.concat(t,'" is not allowed');default:return'An error occurred reading "'.concat(t,'"')}}(e.error,e.path);return(0,a.tZ)(x.G,{css:Jp.root,children:(0,a.tZ)(x.G,{children:(0,a.tZ)(Qp.E,{icon:(0,a.tZ)(Ys.Z,{}),colorway:"orange",text:t})})})}var th={Content:function(e){var t=e.pane,n=e.options;return(0,a.tZ)(rh,(0,i.Z)((0,r.Z)({},t.data),{isActive:n.isActive,isHidden:n.isHidden,performPaneOperation:n.performPaneOperation}))},Icon:function(e){var t=e.pane,n=e.size;return(0,a.tZ)(c.Z,{path:t.data.path||"",size:n})},getTitle:function(e){return e.data.path?(0,ie.UO)(e.data.path):"No file open"}};function nh(e){var t=e.path,n=e.isActive,r=e.formatObserver,i=e.performPaneOperation,c=(0,I.uN)(),p=qp({filePath:t});!function(e){var t=e.view,n=e.onUpdate,r=(0,b.useRef)(0);Ii((function(){return n?q.tk.updateListener.of((function(e){var t=!0,i=!1,o=void 0;try{for(var a,l=e.transactions[Symbol.iterator]();!(t=(a=l.next()).done);t=!0){var c=a.value;if(!(r.current>0)&&!c.annotation(j.YW.remote)&&(c.isUserEvent("input")||c.isUserEvent("delete")))return void(n&&(r.current+=1,setTimeout(n)))}}catch(u){i=!0,o=u}finally{try{t||null==l.return||l.return()}finally{if(i)throw o}}})):null}),[n],t,"useDidUpdateOnce")}({view:c,onUpdate:function(){return i({operation:"commit"})}});var h=function(e){return(0,me.Z)((function(){return e?{match:Fd.pl,data:{type:"action",label:"Toggle all folds",icon:(0,a.tZ)(wa.Z,{}),run:function(){0===(0,gt.q2)(e.state).size?(0,gt.g_)(e):(0,gt.jZ)(e)}}}:null}),[e])}(c),v=(0,ke.Z)(r),m=v.isFormatting,g=v.hasFormatter,y=(0,En.P5)({controlName:"flag-codemirror-formatter-api",logFlagToAnalytics:!1}),Z=m||(null===p||void 0===p?void 0:p.isFormatting);(0,Kp.x)($p,{enabled:Boolean(n&&p),run:function(){c&&y?Wi(c):null===p||void 0===p||p.format()}});var w=(0,me.Z)((function(){return!c||y&&!g||!p?null:Z?{type:"action",icon:(0,a.tZ)(kr.Z,{}),label:"Formatting...",run:function(){}}:{dataCy:"ws-format-btn",type:"action",icon:(0,a.tZ)(Yp.Z,{}),label:"Format "+(0,ie.UO)(t),run:function(){y?Wi(c):p.format()}}}),[c,g,p,Z,t,y]),x=(0,Fp.Mp)({path:t,performPaneOperation:i}),k=function(){var e=(0,l.T3)(),t=(0,Rn.Z)(),n=t.preferences.minimapDisplay,r=t.update;return(0,me.Z)((function(){return e?null:{match:Fd.pl,data:{label:"Minimap",icon:(0,a.tZ)(u.Z,{}),type:"context"},commands:function(e){var t=e.active,i=e.search;return t||i?[{value:"none",label:"Hide",icon:(0,a.tZ)(s.Z,{})},{value:"characters",label:"Characters",icon:(0,a.tZ)(d.Z,{})},{value:"blocks",label:"Blocks",icon:(0,a.tZ)(f.Z,{})}].filter((function(e){return e.value!==n})).map((function(e){return{match:Fd.pl,data:{type:"action",label:e.label,icon:e.icon,run:function(){r({minimapDisplay:e.value})}}}})):[]}}}),[r,n,e])}();return(0,Bf.L5)((function(){var e=function(e){return{match:Fd.pl,data:{label:"Preview",icon:(0,a.tZ)(Ws.Z,{}),type:"action",run:function(){i({operation:"replace",pane:{type:e,data:{path:t}}})}}}};if(c){var n,r=k?[k]:[];if(h&&r.push(h),x)(n=r).push.apply(n,(0,o.Z)(x));return(0,ie.B4)(t)&&r.unshift(e("media")),(0,ie.gK)(t)&&r.unshift(e("markdown")),{type:"codeEditor",actions:w?[w]:void 0,commands:r,getCurrentSelectionText:function(){if(!c.state.selection.main.empty)return c.state.sliceDoc(c.state.selection.main.from,c.state.selection.main.to)},insertGhostwriterChatCode:function(e){ti(c,e)},revertGhostwriterChatCode:function(){!function(e){var t=e.state.field(ni,!1);t?e.dispatch({changes:t,effects:ei.of(null)}):Zt.c_.captureException(new Error("RevetGhostwriterCodeInsertState not found when trying to revert"))}(c)},fetchProblems:function(){var e;return(0,yt.j)(c),null!==(e=c.state.field(kt,!1))&&void 0!==e?e:[]}}}}),[c,w,h,x,k,i,t]),(0,Bf.Wk)((function(){return c}),[c]),null}function rh(e){var t=e.path,n=e.line,r=e.col,i=e.isActive,o=e.isHidden,c=e.performPaneOperation,u=(0,b.useState)((function(){return(0,m.MT)()}))[0],s=(0,b.useState)((function(){return(0,m.MT)()}))[0],d=(0,p.useRouter)(),f=!v()&&!(0,l.Vg)(d)&&i,h=function(e){var t=(0,te.Z)().fs,n=(0,b.useState)(null),r=n[0],i=n[1];return(0,b.useEffect)((function(){if(e){var n=t.watchTextFile(e,{onError:function(e){i(e)}});return function(){n(),i(null)}}}),[t,e]),r}(t),g=(0,me.Z)((function(){return{line:n,col:r}}),[n,r]),y=(0,me.Z)((function(){return function(){c({operation:"replace",pane:{type:"codeEditor",data:{path:t}}})}}),[c,t]),Z=(0,me.Z)((function(){return function(e){c({operation:"commit"}),c({operation:"open",pane:{type:"codeEditor",data:e}})}}),[c]),w=(0,b.useCallback)((function(){c({operation:"open",secondary:!0,pane:{type:"threadInbox"}})}),[c]),x=(0,b.useState)((0,xe.u)({isFormatting:!1,hasFormatter:!1}))[0];return t?h?(0,a.tZ)(eh,{path:t,error:h}):(0,a.tZ)(I.Cl.Provider,{value:u,children:(0,a.BX)(zp.ox.Provider,{value:s,children:[(0,a.tZ)(Vp,{filePath:t,autoFocus:f,isHidden:null!==o&&void 0!==o&&o,deeplink:g,onDeeplinkUpdated:y,hideMobileKeyboardToolbar:!0,performPaneOperation:c,openFile:Z,openThreadsInbox:w,formatObserver:x},t),(0,a.tZ)(nh,{path:t,isActive:i,formatObserver:x,performPaneOperation:c})]})}):null}},38819:function(e,t,n){n.d(t,{R:function(){return Zo}});var r,i=n(74985),o=n(92508),a=n(2272),l=n(50959),c=n(85368),u=n(39541),s=n(57135),d=n(57389),f=n(72006),p=n(4405),h=n(96583),v=n(33814),m=n(95271),g=n(10035),y=n(45348),Z=n(57475),b=n(77637),w=n(82568),x=(0,w.X)({root:[u.l0.px(8),u.l0.pt(16)]}),k=function(e){var t=e.children,n=(0,b.Z)(e,["children"]);return(0,i.tZ)(c.G,(0,p.Z)((0,f.Z)({},n),{css:x.root,children:t}))},C=n(28170),S=n(16572),T=n(61284),E=n(63128),R=n(45510),G=n(47305),I=n(32973),_=n(13548),D=n(51631),B=function(e){var t=e.currentBuild,n=(0,a.Z)(l.useState([]),2),r=n[0],o=n[1];return l.useEffect((function(){var e,n="HostingDeployment"===(null===(e=t.repl.hostingDeployment)||void 0===e?void 0:e.__typename)&&t.repl.hostingDeployment.id,r=[];switch(t.provider){case D.r4.Goval:r.push({href:"https://".concat(n,".id.repl.co"),private:!0});break;case D.r4.Gce:case D.r4.CloudRun:case D.r4.Static:var i,a,l,c,u="HostingDeployment"===(null===(i=t.repl.hostingDeployment)||void 0===i?void 0:i.__typename)?null===(a=t.repl.hostingDeployment)||void 0===a?void 0:a.replitAppSubdomain:void 0;if(!u&&(null===(l=t.repl.owner)||void 0===l?void 0:l.username)&&(u="".concat(t.repl.slug,"-").concat(t.repl.owner.username)),u)r.push({href:"https://".concat(u).concat("replit.com"!==(null===window||void 0===window||null===(c=window.location)||void 0===c?void 0:c.hostname)?".staging":"",".replit.app"),private:!1})}if(t.repl.domains){var s=t.repl.domains.filter((function(e){return(null===e||void 0===e?void 0:e.hosting_deployment_id)===n})),d=!0,f=!1,p=void 0;try{for(var h,v=s[Symbol.iterator]();!(d=(h=v.next()).done);d=!0){var m=h.value;m&&r.push({href:"https://".concat(m.domain),private:!1,state:"verified"!==m.state?m.state:void 0})}}catch(g){f=!0,p=g}finally{try{d||null==v.return||v.return()}finally{if(f)throw p}}}o(r)}),[t]),(0,i.tZ)(c.G,{css:[u.l0.colWithGap(8),u.l0.flex.growAndShrink(1)],children:r.map((function(e,t){return(0,i.BX)(c.G,{css:[u.l0.rowWithGap(8),u.l0.align.center],children:[(0,i.tZ)(T.xv,{css:[u.l0.flex.shrink(1)],multiline:!1,children:(0,i.tZ)("a",{href:e.href,target:"_blank",css:[u.l0.color.foregroundDefault],children:e.href})}),e.private?(0,i.tZ)(_.Z,{color:u.TV.foregroundDefault}):null,(0,i.tZ)("a",{href:e.href,target:"_blank",css:[u.l0.display.flex,u.l0.align.center],children:(0,i.tZ)(I.Z,{color:u.TV.foregroundDefault})}),e.state?(0,i.BX)(T.xv,{multiline:!1,children:["(",e.state,")"]}):null]},"domains-".concat(t))}))})},P=n(652),A=n(4421),L=n(76735),U=n(25198),X=n(55523),M=n(25570),N=n(88541),O=(r={},(0,d.Z)(r,D.r4.Gce,"Reserved VM"),(0,d.Z)(r,D.r4.CloudRun,"Autoscale"),(0,d.Z)(r,D.r4.Static,"Static"),r),F=n(87076),W=n(43119),H=n(71440),V=n(24635);function z(){var e=(0,W.Z)(["\n  fragment HostingActivityLogBuild on HostingBuild {\n    id\n    status\n    provider\n  }\n"]);return z=function(){return e},e}function j(){var e=(0,W.Z)(["\n  fragment HostingActivityLogLine2 on HostingActivityLog {\n    id\n    build {\n      ...HostingActivityLogBuild\n    }\n    type\n    user {\n      id\n      displayName\n    }\n    timeCreated\n  }\n  ","\n"]);return j=function(){return e},e}function q(){var e=(0,W.Z)(["\n  query HostingDeploymentActivityLogs2(\n    $replId: String!\n    $after: String\n    $count: Int\n  ) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        hostingDeployment {\n          ... on HostingDeployment {\n            id\n            activityLogs(after: $after, count: $count) {\n              items {\n                ...HostingActivityLogLine2\n              }\n              pageInfo {\n                hasNextPage\n                nextCursor\n              }\n            }\n          }\n          ... on NotFoundError {\n            message\n          }\n          ... on UnauthorizedError {\n            message\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return q=function(){return e},e}var $={},Y=(0,H.Ps)(z()),K=(0,H.Ps)(j(),Y),Q=(0,H.Ps)(q(),K);var J,ee=n(42241),te=n(66482),ne=n(1734),re=function(e){var t=e.color;return(0,i.tZ)(c.G,{css:[u.l0.align.center,u.l0.rowWithGap(8),{textTransform:"capitalize"}],children:(0,i.tZ)(c.G,{as:"span",css:[u.l0.width("8px"),u.l0.height("8px"),u.l0.borderRadius("full"),{backgroundColor:t,boxShadow:"0 0 12px ".concat(t)}]})})};!function(e){e.Current="current"}(J||(J={}));var ie,oe,ae=(0,d.Z)({},J.Current,{icon:(0,i.tZ)(re,{color:u.TV.blueStronger}),text:"Current deployment"}),le=c.K.div,ce=function(e){var t=e.activityLogItem,n=e.isCurrent?J.Current:t.type,r=(0,a.Z)(l.useState(!1),2),o=r[0],s=r[1],d=(0,a.Z)(l.useState(!1),2),f=d[0],p=d[1],h=l.useRef(!1);l.useEffect((function(){h.current=!0;var e=setTimeout((function(){p(o)}),200);return function(){clearTimeout(e)}}),[o]);var v=n in ae&&ae[n];if(!v)return null;var m=v.icon,g=v.text;return(0,i.tZ)(c.G,{css:[u.l0.p(8)],onMouseEnter:function(){return s(!0)},onMouseLeave:function(){return s(!1)},children:(0,i.BX)(ne.Z,{isOpen:f,onClickOutside:function(){return p(!1)},padding:8,children:[(0,i.tZ)(le,{css:u.l0.cursor.pointer,children:m}),(0,i.tZ)(c.G,{css:[u.l0.maxWidth(240)],children:(0,i.tZ)(T.xv,{children:g})})]})})},ue=n(93658),se=n(32104),de=n(9020),fe=function(e){return e.loading?(0,i.tZ)(c.G,{css:[u.l0.p(8),u.l0.center],children:(0,i.tZ)(se.Z,{})}):null},pe=(0,w.X)({error:[u.l0.flex.grow(0),u.l0.mt(0)]}),he=function(e){var t=e.text;return(0,i.tZ)(k,{css:pe.error,children:(0,i.tZ)(U.E,{colorway:"warning",icon:(0,i.tZ)(de.Warning,{}),text:t})})},ve=n(17807),me=n(11086),ge=function(e){var t=e.build,n=t.id.slice(0,8),r=(0,a.Z)(l.useState(!1),2),o=r[0],s=r[1],d=(0,a.Z)(l.useState(!1),2),f=d[0],p=d[1],h=l.useRef(!1);return l.useEffect((function(){h.current=!0;var e=setTimeout((function(){p(o)}),200);return function(){clearTimeout(e)}}),[o]),(0,i.tZ)("span",{onMouseEnter:function(){return s(!0)},onMouseLeave:function(){return s(!1)},children:(0,i.BX)(ne.Z,{isOpen:f,onClickOutside:function(){return p(!1)},padding:8,children:[(0,i.tZ)("span",{css:[ve.gU.filled,u.l0.display.inlineBlock,u.l0.fontSize("small"),u.l0.px(4),u.l0.py(2),u.l0.borderRadius(4)],children:n}),(0,i.tZ)(c.G,{css:[u.l0.maxWidth(260)],children:(0,i.tZ)(T.xv,{variant:"small",children:t.id})})]})})},ye=(ie={},(0,d.Z)(ie,me.dD.Deploy,(function(e){return(0,i.BX)(i.HY,{children:["deployed ",(0,i.tZ)(ge,{build:e})]})})),(0,d.Z)(ie,me.dD.Rollback,(function(e){return(0,i.BX)(i.HY,{children:["rolled back ",(0,i.tZ)(ge,{build:e})]})})),(0,d.Z)(ie,me.dD.Fail,(function(e){return(0,i.BX)(i.HY,{children:["failed to deploy ",(0,i.tZ)(ge,{build:e})]})})),ie),Ze=function(e){var t=e.activityLogItem,n=t.type,r=t.build,o=t.user.displayName,a=n in ye&&ye[n](r);return a?(0,i.BX)(T.xv,{css:u.l0.color.foregroundDimmer,multiline:!1,children:[(0,i.tZ)("span",{css:[u.l0.color.foregroundDefault,u.l0.fontWeight.medium],children:o+" "}),a]}):null},be=(oe={},(0,d.Z)(oe,me.dD.Deploy,{icon:(0,i.tZ)(Z.Z,{}),color:u.TV.accentPositiveDefault}),(0,d.Z)(oe,me.dD.Rollback,{icon:(0,i.tZ)(Z.Z,{}),color:u.TV.blurpleStronger}),(0,d.Z)(oe,me.dD.Fail,{icon:(0,i.tZ)(L.Z,{}),color:u.TV.accentNegativeDefault}),oe),we=function(e){var t=e.type,n=t in be&&be[t];if(!n)return null;var r=n.icon,o=n.color;return(0,i.tZ)(c.G,{css:[u.l0.p(8),{color:o}],children:r})},xe=n(625),ke=function(e){var t=e.context;(0,xe.j)(xe.U3.DEPLOYMENT_SECTION_VIEWED,{context:t})},Ce=n(9970),Se=n(9348);function Te(){var e=(0,W.Z)(["\n  query HostingDeployActionHistory(\n    $input: HostingBuildDeployActionHistoryInput!\n  ) {\n    hostingBuildDeployActionHistory(input: $input) {\n      ... on HostingBuildDeployActionHistoryResults {\n        results {\n          ... on HostingBuildDeployLogAction {\n            log\n          }\n          ... on HostingBuildDeployStatusAction {\n            status\n            message\n          }\n        }\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n"]);return Te=function(){return e},e}var Ee={},Re=(0,H.Ps)(Te());var Ge,Ie=n(60583),_e=n(45317),De=n(96351),Be=n(24592),Pe=n(63837),Ae=n(27691),Le=function(e){var t=e.stage,n=e.activeStage;return t===e.erroredStage?(0,i.tZ)(L.Z,{alt:"error"}):t<n?(0,i.tZ)(Pe.Z,{alt:"success"}):t===n?(0,i.tZ)(se.Z,{alt:"current"}):(0,i.tZ)(Be.Z,{alt:"waiting"})},Ue=function(e){var t=e.stage,n=e.activeStage;return t===e.erroredStage?{color:_e.TV.white,backgroundColor:_e.TV.accentNegativeDefault}:t<n?{color:_e.TV.accentPositiveStrongest,backgroundColor:_e.TV.accentPositiveDimmer}:t===n?{color:_e.TV.white,backgroundColor:_e.TV.accentPrimaryDefault}:{color:_e.TV.foregroundDimmest,backgroundColor:_e.TV.backgroundHigher}},Xe=function(e){var t=e.stage,n=e.totalStagesWithTitle,r=e.activeStage,o=e.text,a=e.erroredStage;return(0,i.tZ)(De.D,{text:r?o:"",css:[u.l0.border({color:_e.TV.backgroundDefault}),r?(0,f.Z)({},Ue({stage:t,activeStage:r,erroredStage:a})):Ae.p.foregroundPulse(),{flex:1,height:26,zIndex:n-t,":first-of-type":{paddingLeft:16},":not(:first-of-type)":{paddingLeft:24},":not(:last-of-type)":{marginRight:-24}}],iconRight:r?(0,i.tZ)(Le,{stage:t,activeStage:r,erroredStage:a}):void 0})},Me=n(33280),Ne=n(45285),Oe=n(36855),Fe=[{id:0,title:"Provision",statusType:D.Fe.Pending},{id:1,title:"Build",statusType:D.Fe.Building},{id:2,title:"Bundle",statusType:D.Fe.Running},{id:3,title:"Promote",statusType:D.Fe.Promoting},{id:4,statusType:D.Fe.Success}],We=function(e){return Fe.find((function(t){return t.statusType===e}))},He={transition:"".concat(250,"ms ease-in-out"),transitionDelay:"500ms",transitionProperty:"transform, opacity",transform:"none",opacity:1},Ve={exiting:{opacity:0,transform:"translateY(-160px)"},exited:{opacity:0,transform:"translateY(-160px)"}},ze=(0,w.X)({base:{borderRadius:6,paddingLeft:6,paddingRight:6,height:24},disabled:{pointerEvents:"none",color:u.TV.greyDefault}}),je=(0,w.X)({container:[u.l0.borderRadius(8),{border:"1px solid var(--outline-dimmest)"}],top:[u.l0.colWithGap(12),u.l0.p(16),u.l0.pt(12)],header:[u.l0.flex.row,u.l0.justify.spaceBetween],cancel:ze.base,canceling:[ze.base,ze.disabled],stages:[u.l0.flex.row,u.l0.flex.grow(1),{zIndex:0}],bottom:[u.l0.borderRadius(0,0,8,8),u.l0.overflow("hidden")],logsOpen:[u.l0.overflow("hidden"),u.l0.height("auto")],logsClosed:[u.l0.overflow("hidden"),u.l0.height(0)],xterm:[u.l0.width("100%"),u.l0.maxWidth("100%")],errorContainer:[u.l0.p(12),u.l0.colWithGap(4)],warning:[u.l0.rowWithGap(4),u.l0.align.center],link:{color:u.TV.foregroundDefault,textDecoration:"underline",":hover":{color:u.TV.accentPrimaryStronger}}}),qe=function(e){var t,n,r,o,d,p,v,g,y,Z,b,w,x=e.initialBuild,C=e.hideHeader,E=e.viewBuildLogsOnLoad,G=e.onViewLogs,I=e.onCanceled,_=e.onError,B=e.openFile,P=e.context,A=(0,X.rm)(),U=(0,X.pn)(),M=U?{id:U.id,status:U.status,provider:U.provider,timeStarted:U.timeCreated,userDisplayName:U.user.displayName}:void 0,N=l.useRef(x||M),O=function(e){var t=(0,f.Z)({},Ee,e);return V.a(Re,t)}({skip:!(null===(t=N.current)||void 0===t?void 0:t.id),variables:{input:{buildId:null!==(w=null===(n=N.current)||void 0===n?void 0:n.id)&&void 0!==w?w:""}},fetchPolicy:"network-only",ssr:!1,onCompleted:function(e){if(null===e||void 0===e?void 0:e.hostingBuildDeployActionHistory)switch(e.hostingBuildDeployActionHistory.__typename){case"NotFoundError":break;case"UnauthorizedError":_(e.hostingBuildDeployActionHistory.message);break;case"HostingBuildDeployActionHistoryResults":var t=e.hostingBuildDeployActionHistory.results;if(t&&t.length>0){var n=[],r=[],i=!0,o=!1,a=void 0;try{for(var l,c=t[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var u=l.value;switch(u.__typename){case"HostingBuildDeployLogAction":n.push(u.log);break;case"HostingBuildDeployStatusAction":r.push(u)}}}catch(m){o=!0,a=m}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}ce({type:"history",payload:n});var s=!0,d=!1,f=void 0;try{for(var p,h=r[Symbol.iterator]();!(s=(p=h.next()).done);s=!0){var v=p.value;ue(v.status)}}catch(m){d=!0,f=m}finally{try{s||null==h.return||h.return()}finally{if(d)throw f}}}break;default:_("Unexpected typename.")}},onError:function(e){_(e.message)}}),W=O.loading,H=O.refetch;(0,X.U)((function(e){switch(e.__typename){case"HostingBuildDeployLogAction":var t=e.log;ce({type:"update",payload:t});break;case"HostingBuildDeployStatusAction":var n=e.status;ue(n)}}));var z=(0,a.Z)(l.useState(N.current?null===(r=We(N.current.status))||void 0===r?void 0:r.id:void 0),2),j=z[0],q=z[1],$=(0,a.Z)(l.useState("failed"===(null===(o=N.current)||void 0===o?void 0:o.status)?null===(p=We(null===(d=N.current)||void 0===d?void 0:d.status))||void 0===p?void 0:p.id:void 0),2),Y=$[0],K=$[1],Q=(0,a.Z)(l.useState(!1),2),J=Q[0],ee=Q[1],te=(0,Ne.Z)().fs,ne=(0,a.Z)((0,Se.Z)({openFile:B,listFiles:te.listFiles}),2),re=ne[0],ie=ne[1],oe=(0,Ie.f)(),ae=(0,a.Z)(l.useReducer((function(e,t){switch(t.type){case"history":return re&&re.clear(),(0,Ce.Z)(t.payload).concat((0,Ce.Z)(e));case"update":return[t.payload];case"refetch":return re&&re.clear(),W||H(),[]}}),[]),2),le=ae[0],ce=ae[1],ue=function(e){if(e===D.Fe.Failed)K(j);else{var t=We(e);if(!t)return;q(t.id)}},fe=function(){var e=(0,s.Z)((function(){return(0,h.__generator)(this,(function(e){switch(e.label){case 0:return ee(!0),[4,A()];case 1:return e.sent(),I(),[2]}}))}));return function(){return e.apply(this,arguments)}}(),pe=(0,a.Z)(l.useState(E||!1),2),he=pe[0],ve=pe[1],me=function(){ve(!he),he||ke({context:"deploy_progress_logs"})};l.useEffect((function(){ke({context:"deploy_progress"})}),[]),l.useEffect((function(){var e;(null===(e=N.current)||void 0===e?void 0:e.id)&&U&&U.id!==N.current.id&&(N.current={id:U.id,status:U.status,provider:U.provider,timeStarted:U.timeCreated,userDisplayName:U.user.displayName},q(void 0),K(void 0),ce({type:"refetch"}))}),[U,null===(v=N.current)||void 0===v?void 0:v.id,H]),l.useEffect((function(){var e;void 0!==j&&"failed"===(null===(e=N.current)||void 0===e?void 0:e.status)&&K(j)}),[j,null===(g=N.current)||void 0===g?void 0:g.status]),l.useEffect((function(){re&&le.forEach((function(e){return re.write(e)}))}),[le,re]);var ge,ye=null===(ge=j,y=Fe.find((function(e){return e.id===ge})))||void 0===y?void 0:y.statusType,Ze=ye!==D.Fe.Success&&!Y,be=l.useRef(null);if(!N.current)return null;var we=Fe.filter((function(e){return"title"in e})),xe=(0,i.BX)(c.G,{css:je.container,children:[(0,i.BX)(c.G,{css:je.top,children:[C?null:(0,i.BX)(c.G,{css:je.header,children:[(0,i.BX)(c.G,{css:u.l0.rowWithGap(8),children:[(0,i.tZ)(T.xv,{variant:"subheadDefault",multiline:!1,children:"Upcoming"}),Ze?(0,i.tZ)(R.zx,{small:!0,text:"Cancel",css:J?je.canceling:je.cancel,onClick:fe,iconRight:J?(0,i.tZ)(se.Z,{}):void 0}):null]}),(0,i.BX)(c.G,{css:u.l0.rowWithGap(6),children:[(null===(Z=N.current)||void 0===Z?void 0:Z.timeStarted)&&(null===(b=N.current)||void 0===b?void 0:b.userDisplayName)?(0,i.BX)(T.xv,{css:u.l0.color.greyStronger,multiline:!1,children:["Started ".concat((0,S.Z)(new Date(N.current.timeStarted),Date.now(),{addSuffix:!0})," by "),(0,i.tZ)("span",{css:u.l0.color.foregroundDefault,children:N.current.userDisplayName})]}):null,(0,i.tZ)(F.h,{onClick:me,alt:"View build logs",children:he?(0,i.tZ)(de.ChevronUp,{}):(0,i.tZ)(de.ChevronDown,{})})]})]}),(0,i.tZ)(c.G,{css:je.stages,children:we.map((function(e){var t=e.id,n=e.title;return(0,i.tZ)(Xe,{stage:t,totalStagesWithTitle:we.length,text:n,activeStage:j,erroredStage:Y},t)}))})]}),(0,i.BX)(c.G,{css:je.bottom,children:[(0,i.BX)(c.G,{css:he?je.logsOpen:je.logsClosed,children:[(0,i.tZ)(Me.R,{}),(0,i.tZ)(c.G,{css:[u.l0.display.flex,u.l0.pt(12),u.l0.pl(16),u.l0.overflow("hidden"),{backgroundColor:null===oe||void 0===oe?void 0:oe.background}],children:(0,i.tZ)(c.K.div,{css:je.xterm,ref:ie})})]}),Y&&ye?(0,i.BX)(i.HY,{children:[(0,i.tZ)(Me.R,{}),ye===D.Fe.Building?(0,i.BX)(c.G,{css:je.errorContainer,children:[(0,i.BX)(c.G,{css:je.warning,children:[(0,i.tZ)(L.Z,{color:u.TV.accentNegativeStronger}),(0,i.tZ)(T.xv,{css:u.l0.fontWeight.medium,multiline:!1,children:"Your app failed to build"})]}),(0,i.BX)(T.xv,{css:u.l0.mb(16),children:["It looks like your Repl doesn\u2019t run. In order to deploy, your Repl has to run successfully in the Workspace. Please fix any issues and try deploying again or see"," ",(0,i.tZ)("a",{href:"https://docs.replit.com/hosting/deployments/troubleshooting",target:"_blank",css:je.link,onClick:function(){return ke({context:"troubleshooting_doc"})},children:"troubleshooting tips"}),"."]}),he?null:(0,i.tZ)(R.zx,{text:"Build logs",iconLeft:(0,i.tZ)(m.Z,{}),onClick:me})]}):null,ye===D.Fe.Promoting?(0,i.BX)(c.G,{css:je.errorContainer,children:[(0,i.BX)(c.G,{css:je.warning,children:[(0,i.tZ)(L.Z,{color:u.TV.accentNegativeStronger}),(0,i.tZ)(T.xv,{css:u.l0.fontWeight.medium,multiline:!1,children:"Your app failed to promote"})]}),(0,i.BX)(T.xv,{css:u.l0.mb(16),children:["It looks like something went wrong on the production server. It might have something to do with your app's logs. Please fix any issue and try deploying again or see"," ",(0,i.tZ)("a",{href:"https://docs.replit.com/hosting/deployments/troubleshooting",target:"_blank",css:je.link,onClick:function(){return ke({context:"troubleshooting_doc"})},children:"troubleshooting tips"}),"."]}),N.current.provider!==D.r4.Static?(0,i.tZ)(R.zx,{text:"All app logs",iconLeft:(0,i.tZ)(m.Z,{}),onClick:function(){G()}}):null]}):null]}):null]})]});return"mainView"===P?(0,i.tZ)(Oe.ZP,{nodeRef:be,timeout:750,in:4!==j,unmountOnExit:!0,children:function(e){return(0,i.tZ)(c.G,{innerRef:be,style:(0,f.Z)({},He,Ve[e]),children:(0,i.tZ)(k,{children:xe})})}}):xe},$e=n(3652);function Ye(e){var t,n=e.view,r=e.onViewAction,o=e.onError,c=e.openFile,u=e.data,s=(0,X.$y)(),d=(0,a.Z)(l.useState((0,C.yF)({view:n,data:u},C.kO.History)||{view:Ge.List}),2),f=d[0],p=d[1];if(!s)return o("No current build found"),null;switch(f.view){case Ge.List:t=(0,i.tZ)(Ke,{replId:s.repl.id,buildId:s.id,onError:o,onSelect:function(e,t,n){return p({view:Ge.Logs,buildId:e,buildStatus:t,buildProvider:n})}});break;case Ge.Logs:t=(0,i.tZ)(Qe,{openFile:c,buildId:f.buildId,buildStatus:f.buildStatus,buildProvider:f.buildProvider,onViewLogs:function(){return r({type:C.ap.ChangeView,payload:{view:C.kO.Logs}})},onBack:function(){return p({view:Ge.List})}})}return(0,i.tZ)(k,{children:t})}!function(e){e.List="list",e.Logs="logs"}(Ge||(Ge={}));var Ke=function(e){var t=e.replId,n=e.buildId,r=e.onError,o=e.onSelect,d=function(e){var t=(0,f.Z)({},$,e);return V.a(Q,t)}({variables:{replId:t,count:20},fetchPolicy:"cache-and-network",ssr:!1}),p=d.data,v=d.loading,g=d.error,y=d.fetchMore,Z=(0,a.Z)(l.useState(null),2),b=Z[0],w=Z[1];l.useEffect((function(){ke({context:C.kO.History})}),[]),l.useEffect((function(){if(null===p||void 0===p?void 0:p.repl)if("Repl"===p.repl.__typename){if(p.repl.hostingDeployment)switch(p.repl.hostingDeployment.__typename){case"HostingDeployment":w(p.repl.hostingDeployment.activityLogs.items);break;case"NotFoundError":case"UnauthorizedError":r(p.repl.hostingDeployment.message)}}else r("Unexpected typename.")}),[p,r]),l.useEffect((function(){g&&r(g.message)}),[g,r]);var x=function(e){var t;return"Repl"===(null===e||void 0===e?void 0:e.repl.__typename)&&"HostingDeployment"===(null===(t=e.repl.hostingDeployment)||void 0===t?void 0:t.__typename)&&"HostingActivityLogConnection"===e.repl.hostingDeployment.activityLogs.__typename&&e.repl.hostingDeployment.activityLogs}(p),k=x&&x.pageInfo.hasNextPage,E=function(){var e=(0,s.Z)((function(){return(0,h.__generator)(this,(function(e){switch(e.label){case 0:return v||x&&null==x.pageInfo.nextCursor||!x||!x.pageInfo.hasNextPage?[2]:[4,y({variables:{input:{after:x.pageInfo.nextCursor,count:20}}})];case 1:return e.sent(),[2]}}))}));return function(){return e.apply(this,arguments)}}(),R=(0,ee.Z)({onLoadMore:E,rootMargin:"0px 0px 300px 0px"}).targetRef;return(0,i.BX)(i.HY,{children:[b&&0===b.length?(0,i.tZ)(c.G,{css:[u.l0.pb(8),u.l0.center,u.l0.align.stretch],children:(0,i.tZ)(U.E,{colorway:"grey",icon:(0,i.tZ)(ue.Z,{}),text:"Deployment has no history"})}):null,b&&b.length>0?b.map((function(e){var t=n===e.build.id;return(0,i.BX)(c.G,{css:[u.l0.rowWithGap(12),u.l0.py(12),u.l0.align.center,{borderBottom:"1px solid ".concat(u.TV.outlineDimmest),"&:first-child":{paddingTop:0},"&:last-child":{borderBottom:"none"}}],children:[(0,i.tZ)(we,{type:e.type}),(0,i.BX)(c.G,{css:u.l0.flex.growAndShrink(1),children:[(0,i.tZ)(Ze,{activityLogItem:e}),(0,i.tZ)(T.xv,{variant:"small",css:u.l0.color.foregroundDimmest,multiline:!1,children:(0,S.Z)(new Date(e.timeCreated),Date.now(),{addSuffix:!0})})]}),(0,i.tZ)(c.G,{css:[u.l0.width(32),u.l0.align.end],children:(0,i.tZ)(ce,{activityLogItem:e,isCurrent:t})}),(0,i.tZ)(c.G,{children:(0,i.tZ)(F.h,{alt:"View Build Logs",onClick:function(){return o(e.build.id,e.build.status,e.build.provider)},children:(0,i.tZ)(m.Z,{})})})]},e.id)})):null,(0,i.tZ)(fe,{loading:v}),!v&&k?(0,i.tZ)(c.G,{css:[u.l0.center,u.l0.pt(16)],children:(0,i.tZ)(F.h,{tooltipHidden:!0,alt:"Show more",onClick:E,ref:R,children:(0,i.tZ)(te.Z,{})})}):null]})},Qe=function(e){var t=e.buildId,n=e.buildStatus,r=e.buildProvider,o=e.onViewLogs,a=e.onBack,l=e.openFile;return(0,i.BX)(c.G,{css:[u.l0.colWithGap(16)],children:[(0,i.tZ)(F.h,{alt:"Back to History",onClick:function(){return a()},children:(0,i.tZ)($e.Z,{})}),(0,i.tZ)(qe,{initialBuild:{id:t,status:n,provider:r},hideHeader:!0,viewBuildLogsOnLoad:!0,onViewLogs:o,onError:function(){},onCanceled:function(){},openFile:l})]})},Je=n(43312),et=function(e){var t=e.text,n=e.onClick;return(0,i.tZ)("button",{css:[u.l0.cursor.pointer,u.l0.reset.button,u.l0.color.accentPrimaryStronger,u.l0.focusRing,{lineHeight:1.2,transitionProperty:"color, box-shadow",transitionDuration:A.H.duration,transitionTimingFunction:A.H.timingFunction,":not([disabled])":{cursor:"pointer","@media (hover: hover)":{":hover":{color:u.TV.accentPrimaryStrongest}},":not(textarea):active":{color:u.TV.accentPrimaryStronger}}}],onClick:n,children:t})},tt=(0,Je.F4)("\n    50% {\n      background-color: ".concat(u.TV.accentPositiveDimmest,";\n      outline: 1px solid ").concat(u.TV.accentPositiveDimmer,";\n      box-shadow: 0px 0px 32px rgba(0, 145, 24, 0.3);\n    }\n")),nt=function(e){var t=e.name,n=e.sku,r=e.canManage,o=e.onManageClick;return(0,i.BX)(c.G,{css:u.l0.rowWithGap(4),children:[(0,i.tZ)(T.xv,{multiline:!1,children:t}),(0,i.BX)(T.xv,{color:"dimmest",multiline:!1,children:["(",n,")"]}),r?(0,i.tZ)(et,{text:"Manage",onClick:o}):null]})},rt=function(e){var t=e.label,n=e.children,r=e.fullWidth;return(0,i.BX)(c.G,{css:[u.l0.flex.row,u.l0.align.baseline,r?[u.l0.flex.grow(1),u.l0.justify.spaceBetween]:null],children:[(0,i.tZ)(c.G,{css:u.l0.minWidth(100),children:(0,i.tZ)(T.xv,{css:[u.l0.color.foregroundDimmer],multiline:!1,children:t})}),n]})},it=function(e){var t=e.provider,n=e.machineConfiguration,r=e.onViewAction,o=(0,X.kW)(),a=(0,X.Sl)(),s=(0,X.$y)(),d=void 0!==a,f=void 0!==s,p=t===D.r4.Gce&&f&&!d,h=t!==D.r4.Static&&f&&null===s.hasImageTag,v=Boolean((o===M.z.Ready||o===M.z.Suspended)&&!h),m=null,g=null,y=null,Z=null,b=(0,X.pn)(),w=l.useRef(void 0);l.useEffect((function(){w.current=null===b||void 0===b?void 0:b.id}),[null===b||void 0===b?void 0:b.id]);var x=(null===s||void 0===s?void 0:s.status)===D.Fe.Success,I=(null===s||void 0===s?void 0:s.id)===w.current,_=x&&I;s&&(m=(0,i.BX)(i.HY,{children:[(0,i.BX)(rt,{label:"Deployed",children:[(0,S.Z)(new Date(s.timeCreated),Date.now(),{addSuffix:!0})," ","by ",s.user.displayName]}),(0,i.BX)(rt,{label:"Status",children:[(0,i.tZ)(G.h,{}),s.status===D.Fe.Failed?(0,i.tZ)(c.G,{css:u.l0.ml(8),children:(0,i.tZ)(et,{text:"View logs",onClick:function(){r({type:C.ap.ChangeView,payload:{view:C.kO.History,data:{view:Ge.Logs,buildId:s.id,buildStatus:s.status,buildProvider:s.provider}}})}})}):null]}),(0,i.tZ)(rt,{label:"Domains",children:(0,i.tZ)(B,{currentBuild:s})})]}));var A=(0,N.P5)({controlName:"flag-funky-future",logFlagToAnalytics:!1}),F=(0,N.P5)({controlName:"flag-soft-sun",logFlagToAnalytics:!1});switch(t){case D.r4.Gce:if(!d)break;g=(0,i.tZ)(rt,{label:"Type",fullWidth:!f,children:(0,i.tZ)(nt,{name:O[t],sku:(null===n||void 0===n?void 0:n.label)||(0,P.$)(a.sku),canManage:v,onManageClick:function(){r({type:C.ap.ChangeView,payload:{view:C.kO.ReservedVMTierSelection}})}})});break;case D.r4.CloudRun:if(!A)break;g=(0,i.tZ)(rt,{label:"Type",fullWidth:!f,children:(0,i.tZ)(nt,{name:O[t],sku:F&&n?n.label:"Beta",canManage:v,onManageClick:function(){r(F?{type:C.ap.ChangeView,payload:{view:C.kO.OnDemandMachineConfiguration}}:{type:C.ap.ChangeView,payload:{view:C.kO.Settings}})}})});break;case D.r4.Static:if(!A)break;g=(0,i.tZ)(rt,{label:"Type",fullWidth:!f,children:(0,i.tZ)(nt,{name:O[t],sku:F&&n?n.label:"Beta",canManage:v&&f,onManageClick:function(){r({type:C.ap.ChangeView,payload:{view:C.kO.Settings}})}})});case D.r4.Goval:}return h&&(y=(0,i.tZ)(c.G,{children:(0,i.tZ)(U.E,{icon:(0,i.tZ)(L.Z,{}),colorway:"warning",text:"To upgrade, please redeploy."})})),p&&(Z=(0,i.tZ)(R.zx,{onClick:function(){r({type:C.ap.ChangeView,payload:{view:C.kO.ReservedVMTierSelection}})},text:"Select hosting tier"})),m||g||y||Z?(0,i.tZ)(k,{children:(0,i.BX)(E.Tg,{elevated:!0,css:[u.l0.colWithGap(8),u.l0.p(16),u.l0.pt(12),u.l0.borderRadius(8),{outline:"1px solid transparent"},_?{animation:"".concat(tt," ").concat(500,"ms ").concat(500,"ms ease-in-out")}:null],children:[s?(0,i.tZ)(T.xv,{variant:"subheadDefault",multiline:!1,children:"Production"}):null,(0,i.BX)(c.G,{css:[u.l0.colWithGap(4)],children:[m,g,y,Z]})]})}):null},ot=n(81962),at=n(56169),lt=c.K.div,ct=function(e){var t=e.id,n=e.title,r=e.information,o=e.optional,s=void 0!==o&&o,d=e.children,f=(0,at.H)()(t),p=(0,a.Z)(l.useState(!1),2),h=p[0],v=p[1],m=(0,a.Z)(l.useState(!1),2),g=m[0],y=m[1],Z=l.useRef(!1);return l.useEffect((function(){Z.current=!0;var e=setTimeout((function(){y(h)}),200);return function(){clearTimeout(e)}}),[h]),(0,i.BX)(c.G,{css:[u.l0.colWithGap(8)],children:[(0,i.BX)(c.G,{tag:"label",htmlFor:f,css:[u.l0.flex.row,u.l0.flex.grow(1),u.l0.justify.spaceBetween,u.l0.align.baseline],children:[(0,i.BX)(c.G,{css:[u.l0.rowWithGap(8),u.l0.justify.start,u.l0.align.center,u.l0.justify.center],onMouseEnter:function(){return v(!0)},onMouseLeave:function(){return v(!1)},children:[(0,i.tZ)(T.xv,{color:"dimmer",multiline:!1,children:n}),(0,i.BX)(ne.Z,{isOpen:g,onClickOutside:function(){return y(!1)},padding:8,children:[(0,i.tZ)(lt,{children:(0,i.tZ)(ue.Z,{css:[u.l0.color.foregroundDimmer]})}),(0,i.tZ)(c.G,{css:[u.l0.maxWidth(240)],children:(0,i.tZ)(T.xv,{color:"dimmer",children:r})})]})]}),s?(0,i.tZ)(T.xv,{variant:"small",color:"dimmest",multiline:!1,children:"optional"}):null]}),d]})},ut=n(92122),st=n(96742),dt=n(39137),ft=n(59884),pt=n(8622);function ht(){var e=(0,W.Z)(["\n  query CheckReplitAppSubdomainAvailability(\n    $subdomain: String!\n    $deploymentId: String\n  ) {\n    replitAppSubdomainAvailability(\n      subdomain: $subdomain\n      deploymentId: $deploymentId\n    ) {\n      __typename\n      ... on ReplitAppSubdomainAvailabilityResult {\n        available\n        message\n      }\n      ... on UserError {\n        errorMessage: message\n      }\n    }\n  }\n"]);return ht=function(){return e},e}var vt={},mt=(0,H.Ps)(ht());var gt=n(75920),yt=n(66539),Zt=function(e){var t=e.type,n=e.loading,r=e.disabled,o=e.onClick;return(0,i.tZ)(R.zx,{onClick:o,text:n?"":"Add ".concat(t),iconLeft:n?void 0:(0,i.tZ)(pt.Z,{}),disabled:n||r})},bt=function(e){var t=e.id,n=e.value,r=e.loading,o=e.disabled,a=e.onChange,l=e.error,s=(0,at.H)(),d=(0,st.A)(n);return(0,i.BX)(c.G,{css:[u.l0.colWithGap(4)],children:[(0,i.tZ)(dt.II,{value:d?n:"",onChange:function(e){return a(e.target.value)},css:[u.l0.color.greyStrongest],disabled:r||o,"aria-describedby":s(t+"reasonError")}),l?(0,i.tZ)(c.G,{css:[u.l0.color.accentNegativeStronger],"aria-live":"polite","aria-atomic":"true",id:s(t+"reasonError"),children:(0,i.tZ)("span",{children:l})}):null]})},wt=function(e){var t=e.index,n=e.name,r=e.value,o=e.disabled,a=e.updateEnvVarName,l=e.updateEnvVarValue,s=e.removeEnvVar,d=(0,at.H)();return(0,i.BX)(c.G,{css:[u.l0.rowWithGap(12)],children:[(0,i.tZ)(dt.II,{placeholder:"Name",id:"".concat(d,"-name-").concat(t),value:n,onChange:function(e){return a(n,e.target.value)},disabled:o}),(0,i.tZ)(dt.II,{placeholder:"Value",name:"".concat(d,"-value-").concat(t),value:r,onChange:function(e){return l(n,e.target.value)},disabled:o}),o?null:(0,i.tZ)(F.h,{css:[ve.gU.outlined,u.l0.p(16)],onClick:function(){return s(n)},alt:"Remove variable",children:(0,i.tZ)(ft.Z,{})})]})},xt=function(e){var t,n,r=e.subdomain,o=e.deploymentId,a=e.onChange,s=e.updateValidity,d=(0,at.H)(),p=function(e){var t=(0,f.Z)({},vt,e);return V.a(mt,t)}({variables:{subdomain:r,deploymentId:o},skip:0===r.length}),h=p.data,v=p.loading,m=p.error,g="ReplitAppSubdomainAvailabilityResult"===(null===h||void 0===h?void 0:h.replitAppSubdomainAvailability.__typename)&&h.replitAppSubdomainAvailability.available,y="ReplitAppSubdomainAvailabilityResult"===(null===h||void 0===h?void 0:h.replitAppSubdomainAvailability.__typename)?h.replitAppSubdomainAvailability.message:null===h||void 0===h||null===(t=h.replitAppSubdomainAvailability)||void 0===t?void 0:t.errorMessage;return(0,l.useEffect)((function(){s(g)}),[g]),m?(0,i.tZ)(U.E,{colorway:"negative",text:"Something went wrong, please try refreshing the page."}):(0,i.BX)(c.G,{children:[(0,i.BX)(c.G,{css:[u.l0.rowWithGap(4),u.l0.align.center],children:[(0,i.tZ)(dt.II,{id:"subdomain-".concat(d),placeholder:"subdomain",value:r,onChange:function(e){return a(e.target.value)}}),(0,i.BX)(T.xv,{multiline:!1,children:["replit.com"!==(null===window||void 0===window||null===(n=window.location)||void 0===n?void 0:n.hostname)?".staging":"",".replit.app"]})]}),(0,i.BX)(c.G,{css:[u.l0.rowWithGap(4),u.l0.align.center,u.l0.pt(4)],children:[v?(0,i.BX)(i.HY,{children:[(0,i.tZ)(se.Z,{}),(0,i.tZ)(T.xv,{multiline:!1,children:"Checking availability"})]}):null,g?(0,i.BX)(i.HY,{children:[(0,i.tZ)(Pe.Z,{color:"green"}),(0,i.tZ)(T.xv,{css:[u.l0.color.greenDefault],multiline:!1,children:"Available"})]}):null,g||v?null:(0,i.BX)(i.HY,{children:[(0,i.tZ)(L.Z,{color:"red"}),(0,i.tZ)(T.xv,{css:[u.l0.color.redDefault],multiline:!1,children:y})]})]})]})},kt=function(e){var t=e.appType,n=e.onChange,r=(0,at.H)();return(0,i.tZ)(gt.hE,{name:"deploymentTargetSelector",value:t,onChange:n,row:!0,css:[u.l0.width("100%"),u.l0.flex.row],children:[{value:D.Vp.Server,name:"Web Server",description:"ex. an API or website"},{value:D.Vp.Worker,name:"Background Worker",description:"ex. a Discord or Slack bot"}].map((function(e,t){return(0,i.tZ)(c.G,{css:[u.l0.flex.grow(1)],children:(0,i.tZ)(yt.u,{tooltip:e.description,children:(0,i.tZ)(gt.rK,{id:r(e.value),value:e.value,text:e.name})})},t)}))})},Ct=n(56272),St=function(e){var t,n,r,o,d,f=e.isNewDeployment,p=e.initialSubdomain,v=e.provider,m=e.machineConfiguration,g=e.onDeploy,y=e.onCancel,b=e.onError,w=(0,X.$y)(),x=(0,X.kW)(),k=(0,X.XA)(),C=(0,Ne.Z)(),S=(0,a.Z)(l.useState(D.Vp.Server),2),T=S[0],E=S[1],G=(0,a.Z)(l.useState(p),2),I=G[0],_=G[1],B=(0,a.Z)(l.useState(!1),2),P=B[0],A=B[1],L=(0,a.Z)(l.useState(null),2),U=L[0],O=L[1],F=(0,a.Z)(l.useState(null),2),W=F[0],H=F[1],V=(0,a.Z)(l.useState(void 0),2),z=V[0],j=V[1],q=(0,a.Z)(l.useState(null!==(d=w&&w.envVars.map((function(e){return{name:e.name,value:e.value}})))&&void 0!==d?d:[]),2),$=q[0],Y=q[1],K=(0,a.Z)(l.useState(!1),2),Q=K[0],J=K[1],ee=(0,a.Z)(l.useState(null),2),te=ee[0],ne=ee[1],re=(0,a.Z)(l.useState(void 0),2),ie=re[0],oe=re[1],ae=(0,a.Z)(l.useState("loading"),2),le=ae[0],ce=ae[1],ue=T!==D.Vp.Static,de=v===D.r4.Gce,fe=T===D.Vp.Static,pe=(0,N.P5)({controlName:"flag-funky-future",logFlagToAnalytics:!1});l.useEffect((function(){ke({context:"deploy_options"})}),[]),l.useEffect((function(){(0,s.Z)((function(){var e,t,n,r;return(0,h.__generator)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,5,,6]),[4,(0,ut.$f)(C.dotReplit)];case 1:return e=i.sent(),t=null,f?[4,(0,ut.xk)(C.fs)]:[3,3];case 2:switch(n=i.sent(),Y(n),v){case D.r4.Gce:t=e.ignorePorts?D.Vp.Worker:D.Vp.Server;break;case D.r4.CloudRun:pe&&(t=D.Vp.CloudRun);break;case D.r4.Static:pe&&(t=D.Vp.Static)}return[3,4];case 3:t=e.appType,i.label=4;case 4:return O(e.buildCommand),t!==D.Vp.Static?H(e.runCommand):ne(e.publicDir),v===D.r4.Gce&&J(e.ignorePorts||!1),E(t||D.Vp.Server),[3,6];case 5:return r=i.sent(),b(r.message),[3,6];case 6:return ce("ready"),[2]}}))}))()}),[f,v,pe,C.fs,C.dotReplit,w,b]);var he=function(e,t){var n=$.findIndex((function(t){return t.name===e})),r=(0,Ce.Z)($);r[n].name=t,Y(r)},ve=function(e,t){var n=$.findIndex((function(t){return t.name===e})),r=(0,Ce.Z)($);r[n].value=t,Y(r)},me=function(e){var t=$.filter((function(t){return t.name!==e}));Y(t)},ge=function(){var e=(0,s.Z)((function(){var e,t;return(0,h.__generator)(this,(function(n){switch(n.label){case 0:if(!(e=(P||ye)&&I.length?I:void 0))return[2];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,k({envVars:$.filter((function(e){return(0,st.G)(e)})),subdomain:e,machineConfigurationId:(null===m||void 0===m?void 0:m.id)||void 0,config:{buildCommand:U,runCommand:W,appType:T,ignorePorts:Q,publicDir:te}})];case 2:return n.sent(),g(),[3,4];case 3:return t=n.sent(),ce("ready"),(0,ot.Z)(t,Ct.ZG)?(j("Run command cannot be empty."),[2]):(0,ot.Z)(t,Ct.KB)?(oe("Public directory cannot be empty."),[2]):(b(t.message),[3,4]);case 4:return[2]}}))}));return function(){return e.apply(this,arguments)}}(),ye="HostingDeployment"===(null===w||void 0===w||null===(t=w.repl)||void 0===t||null===(n=t.hostingDeployment)||void 0===n?void 0:n.__typename)?w.repl.hostingDeployment.replitAppSubdomain:void 0,Ze="HostingDeployment"===(null===w||void 0===w||null===(r=w.repl)||void 0===r||null===(o=r.hostingDeployment)||void 0===o?void 0:o.__typename)?w.repl.hostingDeployment.id:void 0,be="ready"!==le||x===M.z.Preparing,we=be||!P&&!ye;return(0,i.BX)(c.G,{css:[u.l0.colWithGap(16)],children:[ye?null:(0,i.tZ)(ct,{id:"primaryDomain",title:"Primary domain",information:"You can add more custom domains after deploying",children:(0,i.tZ)(xt,{subdomain:I,deploymentId:Ze,onChange:_,updateValidity:A})}),(0,i.tZ)(ct,{id:"buildCommand",title:"Build command",information:"The build command is the command-line statement that compiles your app at build time.",optional:!0,children:(0,i.tZ)(bt,{id:"buildCommand",value:U,onChange:O,loading:"loading"===le,disabled:be})}),ue?(0,i.tZ)(ct,{id:"runCommand",title:"Run command",information:"The run command is the command-line statement that launches your app after it has been built.",children:(0,i.tZ)(bt,{id:"runCommand",value:W,onChange:H,loading:"loading"===le,disabled:be,error:z})}):null,(0,i.tZ)(ct,{id:"envVars",title:"Deployment secrets",information:"Choose which secrets should be used for your deployment.",children:(0,i.BX)(c.G,{css:[u.l0.colWithGap(12)],children:[$.length>0?$.map((function(e,t){var n=e.name,r=e.value;return(0,i.tZ)(wt,{index:t,name:n,value:r,updateEnvVarName:he,updateEnvVarValue:ve,removeEnvVar:me,disabled:be},t)})):null,(0,i.tZ)(Zt,{onClick:function(){Y((0,Ce.Z)($).concat([{name:"",value:""}]))},type:"deployment secret",loading:"loading"===le,disabled:be})]})}),fe?(0,i.tZ)(ct,{id:"publicDir",title:"Public Directory",information:"The public directory is the root of your static site.",children:(0,i.tZ)(bt,{id:"publicDir",value:te,onChange:ne,loading:"loading"===le,disabled:be,error:ie})}):null,de?(0,i.tZ)(ct,{id:"deploymentAppType",title:"App type",information:"The type of app you'd like to deploy.",children:(0,i.tZ)(kt,{appType:T,onChange:function(e){E(e),J((e===D.Vp.Server||e===D.Vp.Worker)&&e===D.Vp.Worker)}})}):null,(0,i.BX)(c.G,{css:[u.l0.rowWithGap(8)],children:[!be&&w?(0,i.tZ)(R.zx,{text:"Cancel",onClick:y,disabled:be}):null,(0,i.tZ)(c.G,{css:u.l0.flex.grow(1),children:(0,i.tZ)(R.zx,{colorway:"primary",onClick:ge,text:(x===M.z.Preparing?"Preparing":"loading"===le&&"Fetching options")||"ready"===le&&"Deploy"||"",iconLeft:be?(0,i.tZ)(se.Z,{}):(0,i.tZ)(Z.Z,{}),disabled:we})})]})]})},Tt=function(e){var t=e.view,n=e.onViewAction,r=e.onError,o=e.openFile,a=e.data,c=(0,X.kW)(),u=(0,X.hn)(),s=(0,X.Sl)(),d=(0,X.H7)(),f=(0,X.$y)(),p=(0,X.pn)(),h=(0,C.yF)({view:t,data:a},C.kO.DeploymentOptions),v=!(void 0!==p)&&!("string"===typeof u),m=void 0!==f,g=void 0!==s&&void 0!==s,y=m?f.provider:null===h||void 0===h?void 0:h.provider,Z=m?null===f||void 0===f?void 0:f.machineConfiguration:null===h||void 0===h?void 0:h.machineConfiguration,b=y===D.r4.Gce&&m&&!g,w=c===M.z.Ready||c===M.z.Suspended;l.useEffect((function(){ke({context:C.kO.Deployment})}),[]),l.useEffect((function(){c===M.z.Deploying&&t!==C.kO.DeploymentInProgress&&n({type:C.ap.ChangeView,payload:{view:C.kO.DeploymentInProgress}})}),[c,t,n]);var x=null;switch(t){case C.kO.Deployment:if(b||!m)break;x=(0,i.tZ)(k,{children:(0,i.tZ)(R.zx,{disabled:!w,onClick:function(){return n({type:C.ap.ChangeView,payload:{view:C.kO.DeploymentOptions,data:{provider:f.provider}}})},text:"Redeploy",iconLeft:(0,i.tZ)(de.Deploy,{})})});break;case C.kO.DeploymentOptions:if(b)break;if(!y){x=(0,i.tZ)(U.E,{colorway:"warning",icon:(0,i.tZ)(L.Z,{}),text:"Provider not found"});break}x=(0,i.tZ)(k,{children:(0,i.tZ)(St,{isNewDeployment:v,initialSubdomain:null!==d&&void 0!==d?d:"",provider:y,machineConfiguration:Z,onDeploy:function(){return n({type:C.ap.ChangeView,payload:{view:C.kO.DeploymentInProgress}})},onCancel:function(){return n({type:C.ap.ChangeView,payload:{view:C.kO.Deployment}})},onError:r})});break;case C.kO.DeploymentInProgress:x=(0,i.BX)(i.HY,{children:[(0,i.tZ)(qe,{openFile:o,viewBuildLogsOnLoad:!m,onViewLogs:function(){n({type:C.ap.ChangeView,payload:{view:C.kO.Logs}})},onCanceled:function(){n({type:C.ap.ChangeView,payload:{view:C.kO.Deployment}}),r("Build cancelled")},onError:r,context:"mainView"}),w&&m?(0,i.tZ)(k,{children:(0,i.tZ)(R.zx,{onClick:function(){return n({type:C.ap.ChangeView,payload:{view:C.kO.DeploymentOptions,data:{provider:f.provider}}})},text:"Redeploy",iconLeft:(0,i.tZ)(de.Deploy,{})})}):null]})}return(0,i.BX)(i.HY,{children:[(0,i.tZ)(it,{provider:y,machineConfiguration:Z,onViewAction:n}),x,b?(0,i.tZ)(k,{children:(0,i.tZ)(U.E,{colorway:"warning",icon:(0,i.tZ)(ue.Z,{}),text:"Your deployment requires a tier in order to re-deploy"})}):null]})},Et=n(6543),Rt=n(34017),Gt=n(10434),It=n(76232),_t=n(38068),Dt=n(55021),Bt=n(59976),Pt=n(28737),At=n(80731),Lt=n(36443),Ut=[{label:"six hours",key:6},{label:"one day",key:24},{label:"five days",key:120},{label:"one week",key:168},{label:"two weeks",key:336},{label:"thirty days",key:720}],Xt={label:"one week",key:168},Mt=function(e){var t=e.replId,n=(0,l.useState)(Xt),r=n[0],o=r.key,a=r.label,s=n[1],d=(0,l.useState)((0,Et.Z)((0,Rt.Z)(new Date),o-1)),f=d[0],p=d[1],h=(0,Et.Z)((0,Rt.Z)(new Date),23),v=(0,Pt.F)().values,m=[v.global.redDefault,v.global.redDimmer,v.global.redStronger,v.global.redDimmest],g=[v.global.orangeDefault,v.global.orangeDimmer,v.global.orangeStronger,v.global.orangeDimmest],y=[v.global.blueDefault,v.global.blueDimmer,v.global.blueStronger,v.global.blueDimmest],Z=[v.global.greenDefault,v.global.greenDimmer,v.global.greenStronger,v.global.greenDimmest];return l.useEffect((function(){ke({context:C.kO.Analytics})}),[]),(0,i.tZ)(k,{children:(0,i.BX)(c.G,{css:[u.l0.colWithGap(24)],children:[(0,i.tZ)(At.ZE,{items:Ut,label:"Past ".concat(a),icon:(0,i.tZ)(Lt.Z,{}),onAction:function(e){var t,n="string"===typeof e?parseInt(e,10):e;s(null!==(t=Ut.find((function(e){return e.key===n})))&&void 0!==t?t:Xt),p((0,Et.Z)((0,Rt.Z)(new Date),n-1))},cssProps:[u.l0.width("fit-content")],children:Ut.map((function(e){return(0,i.tZ)(At.ck,{children:(0,i.tZ)(c.G,{css:[u.l0.rowWithGap(8),u.l0.align.center,u.l0.color.foregroundDefault],children:(0,i.tZ)(T.xv,{multiline:!1,children:e.label})})},e.key)}))}),(0,i.tZ)(Gt.Z,{replId:t,start:f,hours:o,deployment:!0}),(0,i.BX)(c.G,{css:[u.l0.rowWithGap(24),u.l0.justify.spaceBetween],children:[(0,i.tZ)(c.G,{css:[u.l0.flex.grow(1),{maxWidth:"calc(50% - ".concat(u.TV.space12,")")}],children:(0,i.tZ)(_t.Z,{replId:t,title:"HTTP Statuses (24h)",metric:Dt.RH.Statuses,start:h,hours:24,deployment:!0,colorFn:function(e,t){var n=Number(e);return n<300?Z[t%Z.length]:n<400?y[t%y.length]:n<500?g[t%g.length]:m[t%m.length]}})}),(0,i.tZ)(c.G,{css:[u.l0.flex.grow(1),{maxWidth:"calc(50% - ".concat(u.TV.space12,")")}],children:(0,i.tZ)(Bt.Z,{replId:t,start:f,hours:o,deployment:!0})})]}),(0,i.BX)(c.G,{css:[u.l0.rowWithGap(24),u.l0.justify.spaceBetween],children:[(0,i.tZ)(c.G,{css:[u.l0.flex.grow(1),{maxWidth:"calc(70% - 12px)"}],children:(0,i.tZ)(It.Z,{replId:t,metric:Dt.Pc.Country,start:f,hours:o,count:100,variant:"map",deployment:!0})}),(0,i.BX)(c.G,{css:[u.l0.flex.grow(1),{maxWidth:"calc(30% - 12px)"}],children:[(0,i.tZ)(It.Z,{replId:t,metric:Dt.Pc.Browser,start:f,hours:o,count:100,variant:"pie",deployment:!0}),(0,i.tZ)(It.Z,{replId:t,metric:Dt.Pc.Browser,start:f,hours:o,count:100,variant:"device-pie",deployment:!0})]})]}),(0,i.tZ)(It.Z,{replId:t,metric:Dt.Pc.Url,start:f,hours:o,deployment:!0,count:5}),(0,i.tZ)(It.Z,{replId:t,metric:Dt.Pc.Referrer,start:f,hours:o,deployment:!0,count:5})]})})},Nt=n(86615);function Ot(){var e=(0,W.Z)(["\n  fragment ReplLogLine2 on ReplLog {\n    __typename\n    timestamp\n    line\n  }\n"]);return Ot=function(){return e},e}function Ft(){var e=(0,W.Z)(["\n  query HostingDeploymentLogs2($replId: String!, $deploymentId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        __typename\n        hostingDeploymentLogs(deploymentId: $deploymentId) {\n          ... on ReplLogs {\n            result {\n              ...ReplLogLine2\n            }\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return Ft=function(){return e},e}function Wt(){var e=(0,W.Z)(["\n  subscription HostingDeploymentLogUpdates(\n    $input: HostingDeploymentLogUpdatesInput!\n  ) {\n    hostingDeploymentLogUpdates(input: $input) {\n      ... on ReplLog {\n        line\n        timestamp\n      }\n    }\n  }\n"]);return Wt=function(){return e},e}var Ht={},Vt=(0,H.Ps)(Ot()),zt=(0,H.Ps)(Ft(),Vt);var jt=(0,H.Ps)(Wt());var qt=function(e){var t,n=e.onError,r=(0,X.hn)(),o=(0,X.$y)(),c=function(e){var t=(0,f.Z)({},Ht,e);return V.a(zt,t)}({skip:!r||!o,variables:{replId:null!==(t=null===o||void 0===o?void 0:o.repl.id)&&void 0!==t?t:"",deploymentId:null!==r&&void 0!==r?r:""}}),u=c.data,s=c.loading,d=c.error,p=(0,a.Z)(l.useState(null),2),h=p[0],v=p[1],m=l.useRef([]);l.useEffect((function(){ke({context:C.kO.Logs})}),[]),l.useEffect((function(){if(null===u||void 0===u?void 0:u.repl)if("Repl"===u.repl.__typename){if(u.repl.hostingDeploymentLogs&&"ReplLogs"===u.repl.hostingDeploymentLogs.__typename){var e=u.repl.hostingDeploymentLogs.result;m.current=e,v(e)}}else n("Unexpected typename.")}),[u,n]),l.useEffect((function(){d&&n(d.message)}),[d,n]),function(e){var t=(0,f.Z)({},Ht,e);Nt.m(jt,t)}({variables:{input:{deploymentId:null!==r&&void 0!==r?r:""}},skip:!r||!o,onData:function(e){var t=e.data.data;if("ReplLog"===(null===t||void 0===t?void 0:t.hostingDeploymentLogUpdates.__typename)){var n=t.hostingDeploymentLogUpdates;m.current=[n].concat((0,Ce.Z)(m.current)),v(m.current)}},onError:function(e){n(e.message)}});var g=null;return!s&&h&&(g=h.length>0?(0,i.tZ)($t,{logs:h}):(0,i.tZ)(Yt,{})),r&&o?s?(0,i.tZ)(fe,{loading:!0}):g:(n("No current build found"),null)},$t=function(e){var t=e.logs;return(0,i.tZ)(c.G,{css:[u.l0.overflow("auto"),u.l0.flex.growAndShrink(1)],children:(0,i.tZ)("table",{css:[{borderCollapse:"separate"}],children:(0,i.tZ)("tbody",{children:t.map((function(e,t){var n=[u.l0.font.code,u.l0.fontSize(12),{border:"1px solid transparent",padding:"6px"},t%2===0?[u.l0.backgroundColor.backgroundHigher,{borderTopColor:"".concat(u.TV.backgroundHighest)},{borderBottomColor:"".concat(u.TV.backgroundHighest)}]:null];return(0,i.BX)("tr",{children:[(0,i.tZ)("td",{css:[n,u.l0.color.foregroundDimmest],children:new Date(e.timestamp).toLocaleString()}),(0,i.tZ)("td",{css:[n],children:e.line})]},"logLine-".concat(t))}))})})})},Yt=function(){return(0,i.BX)(c.G,{css:[u.l0.colWithGap(8),u.l0.pt(4)],children:[(0,i.tZ)(T.xv,{css:u.l0.textAlign.center,children:"No logs are available because the most recent build failed before it was promoted."}),(0,i.BX)(T.xv,{color:"dimmer",css:u.l0.textAlign.center,children:["Having trouble?"," ",(0,i.tZ)("a",{href:"https://docs.replit.com/hosting/deployments/troubleshooting",onClick:function(){return ke({context:"troubleshooting_doc"})},children:"Troubleshooting tips"})]})]})},Kt=n(76963),Qt=n(40735),Jt=n(54873),en=n(2041),tn=n(43117),nn=(0,w.X)({container:u.l0.colWithGap(16),pauseAndResumeButtons:u.l0.colWithGap(8),shutDownContainer:u.l0.colWithGap(8),shutDownButton:[u.l0.color.accentNegativeStrongest,u.l0.transition.snappy,(0,d.Z)({backgroundColor:ve.vb.interactiveBackground,borderColor:"transparent"},u.wl.hover,{borderColor:"transparent"})]}),rn=function(e){var t=e.hideResume,n=void 0!==t&&t,r=e.hideSuspend,o=void 0!==r&&r,u=e.onLifecycleCommand,s=(0,X.kW)(),d=(0,X.$y)(),f=(0,X.Sl)(),p=(0,a.Z)(l.useState(!1),2),h=p[0],v=p[1],m=(0,a.Z)(l.useState(!1),2),g=m[0],y=m[1],Z=null!==f,b=(null===d||void 0===d?void 0:d.status)===D.Fe.Resuming,w=(null===d||void 0===d?void 0:d.status)===D.Fe.Suspending,x=(null===d||void 0===d?void 0:d.status)===D.Fe.Suspended,k=b||w||s===M.z.ProcessingLifecycleCommand||s===M.z.Deploying,C=!n&&Z&&(x||b)&&(null===d||void 0===d?void 0:d.hasImageTag),S=!o&&!x&&!b&&(w||s===M.z.Deploying||s===M.z.Ready)&&(null===d||void 0===d?void 0:d.hasImageTag);return(0,i.BX)(i.HY,{children:[(0,i.BX)(c.G,{css:nn.container,children:[(0,i.BX)(c.G,{css:nn.pauseAndResumeButtons,children:[C?(0,i.BX)(i.HY,{children:[(0,i.tZ)(R.zx,{text:b?"Resuming":"Resume",onClick:function(){return u(D.Qc.Resume)},loading:b,disabled:k,iconLeft:b?(0,i.tZ)(se.Z,{}):(0,i.tZ)(Qt.Z,{})}),(0,i.tZ)(T.xv,{color:"dimmer",children:"Your app will become accessible to users again"})]}):null,S?(0,i.BX)(i.HY,{children:[(0,i.tZ)(R.zx,{text:"Pause",onClick:function(){return u(D.Qc.Suspend)},loading:w,disabled:k,iconLeft:w?(0,i.tZ)(se.Z,{}):(0,i.tZ)(Kt.Z,{})}),(0,i.tZ)(T.xv,{color:"dimmer",children:"Your hosting subscription will continue, but all users will lose access to your app"})]}):null]}),(0,i.BX)(c.G,{css:nn.shutDownContainer,children:[(0,i.tZ)(R.zx,{text:"Shut down",colorway:"negative",outlined:!0,css:nn.shutDownButton,onClick:function(){return v(!0)},disabled:g,iconLeft:(0,i.tZ)(Jt.Z,{})}),(0,i.tZ)(T.xv,{color:"dimmer",children:"Your hosting subscription will be canceled, and your hosted app will cease to exist"})]})]}),(0,i.tZ)(en.u,{isOpen:h,onRequestClose:function(){return v(!1)},children:(0,i.tZ)(tn.Z,{confirmLabel:"Yes, delete my deployment",title:"Delete Deployment",isDestructive:!0,onConfirm:function(){y(!0),v(!1),u(D.Qc.Destroy)},onCancel:function(){return v(!1)},children:"This will destroy your deployment and any associated hosting tiers, saved replit.app domain and deployment history. You can always come back and redeploy your repl again."})})]})},on=n(56964),an=n(9125),ln=n(50216);function cn(){var e=(0,W.Z)(["\n  fragment HostingDeploymentDomainsDomain on HostingDeploymentDomain {\n    id\n    state\n    domain\n  }\n"]);return cn=function(){return e},e}function un(){var e=(0,W.Z)(["\n  fragment HostingDeploymentDomainsHostingDeployment on HostingDeployment {\n    id\n    currentBuild {\n      id\n      status\n    }\n    repl {\n      id\n      apexProxy\n    }\n    domains {\n      id\n      ...HostingDeploymentDomainsDomain\n    }\n    legacyReplDomains {\n      id\n      ...HostingDeploymentDomainsDomain\n    }\n  }\n  ","\n"]);return un=function(){return e},e}function sn(){var e=(0,W.Z)(["\n  query HostingDeploymentDomains($id: String!) {\n    hostingDeployment(id: $id) {\n      ... on HostingDeployment {\n        id\n        ...HostingDeploymentDomainsHostingDeployment\n      }\n    }\n  }\n  ","\n"]);return sn=function(){return e},e}function dn(){var e=(0,W.Z)(["\n  mutation LinkHostingDeploymentDomain(\n    $input: LinkHostingDeploymentDomainInput!\n  ) {\n    linkHostingDeploymentDomain(input: $input) {\n      ... on HostingDeployment {\n        id\n        domains {\n          ...HostingDeploymentDomainsDomain\n        }\n      }\n    }\n  }\n  ","\n"]);return dn=function(){return e},e}var fn={},pn=(0,H.Ps)(cn()),hn=(0,H.Ps)(un(),pn),vn=(0,H.Ps)(sn(),hn);var mn=(0,H.Ps)(dn(),pn);function gn(){var e=(0,W.Z)(["\n  query HostingDeploymentSettings($id: String!) {\n    hostingDeployment(id: $id) {\n      ... on HostingDeployment {\n        id\n        ...HostingDeploymentDomainsHostingDeployment\n        currentBuild {\n          id\n          envVars {\n            name\n            value\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return gn=function(){return e},e}var yn={},Zn=(0,H.Ps)(gn(),hn);var bn=n(32508),wn=n.n(bn),xn=n(68973),kn=n(77806),Cn=n(60566),Sn=(0,xn.$)(["paddingRight"]),Tn=Sn.cssVars,En=Sn.styleTokens,Rn=(0,w.X)({inputWrapper:[u.l0.position.relative,u.l0.flex.growAndShrink(1),{input:[{paddingRight:En.paddingRight}]}],copyButton:[u.l0.position.absolute,u.l0.top("50%"),u.l0.right(4),{transform:"translateY(-50%)"}]});function Gn(e){return(0,i.BX)(c.G,{css:Rn.inputWrapper,style:(0,d.Z)({},Tn.paddingRight,e.value?"36px":"8px"),children:[(0,i.tZ)(dt.II,(0,p.Z)((0,f.Z)({},e),{onClick:function(e){return e.currentTarget.select()}})),e.value?(0,i.tZ)(F.h,{css:Rn.copyButton,alt:"Copy",tooltipHidden:!0,onClick:function(){return e.value&&(0,Cn.Z)(e.value)},children:(0,i.tZ)(kn.Z,{})}):null]})}var In=(0,w.X)({root:[u.l0.rowWithGap(8),u.l0.align.center,{label:[u.l0.color.foregroundDimmer,{fontSize:u.TV.fontSizeSmall}],"& > div:nth-of-type(1)":{width:"30%"},"& > div:nth-of-type(2)":{maxWidth:50}}],col:[u.l0.colWithGap(4),u.l0.flex.growAndShrink(1)],records:[u.l0.p(8),u.l0.borderRadius(8),u.l0.colWithGap(4),{border:"1px solid",borderColor:u.TV.outlineDimmer}]});function _n(e){return(0,i.BX)(c.G,{css:In.root,children:[(0,i.BX)(c.G,{css:In.col,children:[(0,i.tZ)(c.G,{tag:"label",children:"Hostname"}),(0,i.tZ)(dt.II,{value:e.hostname,readOnly:!0})]}),(0,i.BX)(c.G,{css:In.col,children:[(0,i.tZ)(c.G,{tag:"label",children:"Type"}),(0,i.tZ)(dt.II,{value:e.type,readOnly:!0})]}),(0,i.BX)(c.G,{css:In.col,children:[(0,i.tZ)(c.G,{tag:"label",children:"Record"}),(0,i.tZ)(Gn,{value:e.record,readOnly:!0})]})]})}function Dn(e){var t="replit-verify=".concat(e.deploymentId);return(0,i.BX)(c.G,{css:In.records,children:[(0,i.tZ)(_n,{hostname:e.hostname,type:"A",record:e.apexProxy}),(0,i.tZ)(_n,{hostname:e.hostname,type:"TXT",record:t})]})}var Bn=n(1050),Pn="https://docs.replit.com/hosting/deployments/custom-domains",An=n(15544),Ln=n(35004),Un=n(91204),Xn=(0,w.X)({root:[u.l0.colWithGap(16)],labelRow:[u.l0.rowWithGap(8),u.l0.align.center],labelText:[u.l0.flex.growAndShrink(1)],controls:[u.l0.rowWithGap(8),u.l0.justify.spaceBetween,{"& > button":[u.l0.flex.growAndShrink(1)]}],domainSection:[u.l0.colWithGap(8)],error:[u.l0.rowWithGap(4),u.l0.align.center],recordsSection:[u.l0.colWithGap(8)],valueRow:[u.l0.borderRadius(8),u.l0.p(8),u.l0.rowWithGap(8),u.l0.align.center,u.l0.justify.spaceBetween,{border:"1px solid",borderColor:u.TV.outlineDimmer}]});function Mn(e){var t=(0,l.useState)(!0),n=t[0],r=t[1],o=(0,l.useState)(""),s=o[0],d=o[1],p=(0,l.useState)(!1),h=p[0],v=p[1],m=(0,a.Z)(function(e){var t=(0,f.Z)({},fn,e);return ln.D(mn,t)}({onCompleted:function(){e.onAdd()}}),2),g=m[0],y=m[1].loading,Z=(0,l.useRef)(null),b=(0,l.useId)(),w=wn()(s,{require_valid_protocol:!1})&&s.split(".").length>=2,x=!w||y,k=w?null:"Enter a valid domain",C=y?(0,i.tZ)(se.Z,{}):(0,i.tZ)(Ln.Z,{});return n||y||(C=(0,i.tZ)(An.Z,{})),(0,i.BX)(c.G,{tag:"form",css:Xn.root,onSubmit:function(t){var i;if(t.preventDefault(),n)return r(!1),void(null===(i=Z.current)||void 0===i||i.focus());var o={hostingDeploymentId:e.deploymentId,domain:s};g({variables:{input:o}})},children:[(0,i.BX)(c.G,{css:Xn.domainSection,children:[(0,i.BX)(c.G,{tag:"label",htmlFor:b,css:Xn.labelRow,children:[w&&!n?(0,i.tZ)(Pe.Z,{color:u.TV.accentPositiveDefault}):null,(0,i.tZ)(T.xv,{color:"dimmer",children:"First, enter your domain"})]}),n?(0,i.tZ)(dt.II,{id:b,autoFocus:!0,placeholder:"example.com",value:s,disabled:y,onChange:function(e){return d(e.currentTarget.value)},onBlur:function(e){return v(Boolean(e.currentTarget.value))}}):(0,i.BX)(c.G,{css:Xn.valueRow,children:[(0,i.tZ)(c.G,{href:"https://"+s,tag:"a",target:"_blank",children:s}),(0,i.tZ)(F.h,{alt:"Edit",onClick:function(){return r(!0)},children:(0,i.tZ)(Bn.Z,{})})]}),k&&h?(0,i.BX)(c.G,{css:Xn.error,children:[(0,i.tZ)(L.Z,{size:12,color:u.TV.orangeDefault}),(0,i.tZ)(T.xv,{variant:"small",children:k})]}):null]}),!n&&w?(0,i.tZ)(Nn,{apexProxy:e.apexProxy,domain:s,deploymentId:e.deploymentId}):null,(0,i.BX)(c.G,{css:Xn.controls,children:[(0,i.tZ)(R.zx,{type:"button",text:"Cancel",onClick:e.onCancel}),(0,i.tZ)(R.zx,{ref:Z,iconLeft:C,colorway:"primary",type:"submit",disabled:x,text:n?"Next":"Link domain"})]})]})}function Nn(e){return(0,i.BX)(c.G,{css:Xn.recordsSection,children:[(0,i.BX)(c.G,{css:Xn.labelRow,children:[(0,i.tZ)(Un.Z,{}),(0,i.BX)(T.xv,{multiline:!0,css:Xn.labelText,children:["Next, add the following records your domain's DNS settings."," ",(0,i.tZ)("a",{target:"_blank",href:Pn,children:"Learn more"})]})]}),(0,i.tZ)(Dn,{apexProxy:e.apexProxy,hostname:e.domain,deploymentId:e.deploymentId})]})}function On(){var e=(0,W.Z)(["\n  mutation HostingDeploymentsUnlinkDomain(\n    $input: UnlinkHostingDeploymentDomainInput!\n  ) {\n    unlinkHostingDeploymentDomain(input: $input) {\n      ... on HostingDeployment {\n        id\n        domains {\n          id\n        }\n      }\n    }\n  }\n"]);return On=function(){return e},e}var Fn={},Wn=(0,H.Ps)(On());var Hn=n(94045),Vn=n(48667),zn=(0,w.X)({root:[u.l0.colWithGap(8),u.l0.borderRadius(8)],domainRow:[u.l0.reset.button,u.l0.rowWithGap(8),u.l0.align.center,u.l0.justify.spaceBetween],expanded:[u.l0.colWithGap(16)],domainWrapper:[u.l0.rowWithGap(8),u.l0.align.center,u.l0.flex.growAndShrink(1),{fontSize:u.TV.fontSizeSubheadDefault,a:{color:u.TV.foregroundDefault}}],statusDot:[u.l0.borderRadius("full"),u.l0.width(8),u.l0.height(8)],status:[u.l0.rowWithGap(4),u.l0.align.center],dnsRecords:[u.l0.colWithGap(4)],hr:{borderTop:"1px solid",borderColor:u.TV.outlineDimmer},buttons:[u.l0.rowWithGap(8),u.l0.justify.spaceBetween,{"& > button":[u.l0.flex.growAndShrink(1)]}]}),jn={verified:{color:u.TV.accentPositiveDefault,text:"Verified"},verifying:{color:u.TV.orangeDefault,text:"Verifying"},failed:{color:u.TV.accentNegativeDefault,text:"Failed"}};function qn(e){var t=e.domain,n=e.deploymentId,r=e.apexProxy,o=(0,l.useState)(!1),u=o[0],s=o[1],d=(0,l.useState)(!1),p=d[0],h=d[1],v=(0,a.Z)(function(e){var t=(0,f.Z)({},fn,e);return an.t(vn,t)}({variables:{id:n},fetchPolicy:"network-only",ssr:!1}),2),m=v[0],g=v[1].loading,y=(0,a.Z)(function(e){var t=(0,f.Z)({},Fn,e);return ln.D(Wn,t)}(),2),Z=y[0],b=y[1].loading;return(0,i.BX)(E.Tg,{elevated:u,style:{padding:u?8:0},css:zn.root,children:[(0,i.BX)(c.G,{css:zn.domainRow,style:{borderBottomLeftRadius:u?0:void 0,borderBottomRightRadius:u?0:void 0},children:[(0,i.BX)(c.G,{css:zn.domainWrapper,children:[(0,i.tZ)("a",{target:"_blank",href:"https://"+t.domain,children:t.domain}),(0,i.BX)(c.G,{css:zn.status,children:[(0,i.tZ)(c.G,{css:zn.statusDot,style:{backgroundColor:jn[t.state].color}}),(0,i.tZ)(T.xv,{color:"dimmer",variant:"small",children:jn[t.state].text})]})]}),(0,i.tZ)(F.h,{alt:"Edit",tooltipHidden:!0,onClick:function(){h(!1),s((function(e){return!e}))},children:u?(0,i.tZ)(Hn.Z,{}):(0,i.tZ)(Bn.Z,{})})]}),u?(0,i.tZ)(c.G,{css:zn.expanded,children:p?(0,i.BX)(i.HY,{children:[(0,i.tZ)(T.xv,{children:"Are you sure you want to unlink this domain?"}),(0,i.BX)(c.G,{css:zn.buttons,children:[(0,i.tZ)(R.zx,{small:!0,outlined:!0,text:"Cancel",onClick:function(){h(!1)}}),(0,i.tZ)(R.zx,{small:!0,disabled:b,text:"Yes, unlink "+t.domain,colorway:"negative",onClick:function(){Z({variables:{input:{hostingDeploymentDomainId:t.id}}})}})]})]}):(0,i.BX)(i.HY,{children:[(0,i.BX)(c.G,{css:zn.dnsRecords,children:[(0,i.tZ)(T.xv,{children:"DNS Settings"}),(0,i.BX)(T.xv,{color:"dimmer",multiline:!0,children:["Add these records to your domain's DNS settings. This take up to 48 hours to fully apply."," ",(0,i.tZ)("a",{target:"_blank",href:Pn,children:"Learn more"})]}),(0,i.tZ)(Dn,{hostname:t.domain,apexProxy:r,deploymentId:n})]}),(0,i.tZ)(c.G,{tag:"hr",css:zn.hr}),(0,i.BX)(c.G,{css:zn.buttons,children:[(0,i.tZ)(R.zx,{iconLeft:g?(0,i.tZ)(se.Z,{}):(0,i.tZ)(Vn.Z,{}),small:!0,outlined:!0,text:"Check status",onClick:function(){m()}}),(0,i.tZ)(R.zx,{iconLeft:(0,i.tZ)(Jt.Z,{}),small:!0,disabled:b,text:"Unlink Domain",colorway:"negative",onClick:function(){h(!0)}})]})]})}):null]})}function $n(){var e=(0,W.Z)(["\n  mutation HostingDeploymentsUnlinkLegacyReplDomain(\n    $input: UnlinkLegacyReplDomainInput!\n  ) {\n    unlinkLegacyReplDomain(input: $input) {\n      ... on Repl {\n        id\n        hostingDeployment {\n          ... on HostingDeployment {\n            id\n            legacyReplDomains {\n              id\n              ...HostingDeploymentDomainsDomain\n            }\n            domains {\n              id\n              ...HostingDeploymentDomainsDomain\n            }\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return $n=function(){return e},e}var Yn={},Kn=(0,H.Ps)($n(),pn);var Qn=(0,w.X)({root:[u.l0.py(8),u.l0.rowWithGap(8),u.l0.align.center],domainLink:[u.l0.flex.growAndShrink(1),u.l0.flex.row,{"& > a":[u.l0.truncate,u.l0.flex.shrink(1),{color:u.TV.foregroundDefault}]}],buttons:[{alignSelf:"end"},u.l0.rowWithGap(8)],confirm:[u.l0.p(8),u.l0.borderRadius(8),u.l0.colWithGap(8),u.l0.justify.spaceBetween],confirmButtons:[u.l0.rowWithGap(8),{"& > button":[u.l0.flex.growAndShrink(1)]}]}),Jn=function(e){var t=e.domain;return(0,i.tZ)("a",{target:"_bank",href:"https://"+t,children:t})};function er(e){var t=e.deploymentId,n=e.domain,r=e.apexProxy,o=(0,a.Z)(function(e){var t=(0,f.Z)({},Yn,e);return ln.D(Kn,t)}(),2),u=o[0],s=o[1].loading,d=(0,l.useState)(!1),p=d[0],h=d[1],v=(0,l.useState)(!1),m=v[0],g=v[1];return p?(0,i.BX)(E.Tg,{elevated:!0,css:Qn.confirm,children:[(0,i.BX)(T.xv,{children:["Are you sure you want to remove ",(0,i.tZ)(Jn,{domain:n.domain}),"?"]}),(0,i.BX)(c.G,{css:Qn.confirmButtons,children:[(0,i.tZ)(R.zx,{text:"Cancel",onClick:function(){return h(!1)},small:!0}),(0,i.tZ)(R.zx,{small:!0,disabled:s,colorway:"red",iconLeft:s?(0,i.tZ)(se.Z,{}):(0,i.tZ)(Jt.Z,{}),text:"Unlink domain",onClick:function(){return u({variables:{input:{replDomainId:n.id}}})}})]})]}):m?(0,i.BX)(E.Tg,{elevated:!0,css:Qn.confirm,children:[(0,i.BX)(c.G,{children:[(0,i.tZ)(T.xv,{variant:"small",color:"dimmer",children:"Transfering"}),(0,i.tZ)(c.G,{css:Qn.domainLink,children:(0,i.tZ)(Jn,{domain:n.domain})})]}),(0,i.tZ)(Nn,{deploymentId:t,domain:n.domain,apexProxy:r}),(0,i.BX)(c.G,{css:Qn.confirmButtons,children:[(0,i.tZ)(R.zx,{text:"Cancel",onClick:function(){return g(!1)},small:!0}),(0,i.tZ)(R.zx,{small:!0,disabled:s,colorway:"primary",iconLeft:s?(0,i.tZ)(se.Z,{}):(0,i.tZ)(An.Z,{}),text:"Complete transfer",onClick:function(){return u({variables:{input:{replDomainId:n.id,transferToHostingDeploymentId:t}}})}})]})]}):(0,i.BX)(c.G,{css:Qn.root,children:[(0,i.tZ)(c.G,{css:Qn.domainLink,children:(0,i.tZ)(Jn,{domain:n.domain})}),(0,i.BX)(c.G,{css:Qn.buttons,children:[(0,i.tZ)(R.zx,{small:!0,text:"Unlink",onClick:function(){return h(!0)},iconLeft:(0,i.tZ)(Jt.Z,{})}),(0,i.tZ)(R.zx,{small:!0,disabled:s,iconLeft:(0,i.tZ)(Ln.Z,{}),colorway:"primary",text:"Transfer to deployment",onClick:function(){return g(!0)}})]})]})}var tr=(0,w.X)({root:[u.l0.colWithGap(8),u.l0.p(8),u.l0.borderRadius(8),{border:"1px solid "+u.TV.outlineDimmer}],header:[u.l0.align.center,u.l0.rowWithGap(8)],list:[{"& > div":{borderTop:"1px solid "+u.TV.outlineDimmest}}]});function nr(e){var t=e.domains,n=e.deploymentId,r=e.apexProxy,o=1===t.length?"domain":"domains";return(0,i.BX)(c.G,{css:tr.root,children:[(0,i.BX)(c.G,{children:[(0,i.BX)(c.G,{css:tr.header,children:[(0,i.tZ)(L.Z,{}),(0,i.BX)(T.xv,{children:["Transfer ",o]})]}),(0,i.BX)(T.xv,{color:"dimmer",children:["You have attached ",t.length," custom ",o," to your development Repl. Please transfer ","domain"===o?"it":"them"," to your deployment for the best user experience."]})]}),(0,i.tZ)(c.G,{css:tr.list,children:t.map((function(e){return(0,i.tZ)(er,{domain:e,deploymentId:n,apexProxy:r},e.id)}))})]})}var rr=(0,w.X)({root:[u.l0.colWithGap(8)],error:[u.l0.center,u.l0.rowWithGap(8)],loading:[u.l0.center],empty:[u.l0.px(16),u.l0.py(32),u.l0.borderRadius(8),u.l0.center,u.l0.colWithGap(8),{border:"1px dashed",borderColor:u.TV.outlineDimmer}],listHeader:[],list:[{"& > div":[u.l0.py(8),{borderTop:"1px solid "+u.TV.outlineDimmest}],"& > div:last-of-type":{borderBottom:"1px solid "+u.TV.outlineDimmest}}],footer:[u.l0.flex.row]});function ir(e){var t,n,r=e.deployment,o=(0,l.useState)(!1),a=o[0],u=o[1],s=(0,l.useState)(void 0),d=s[0],p=s[1];!function(e){var t=(0,f.Z)({},fn,e);V.a(vn,t)}({variables:{id:r.id},fetchPolicy:"cache-and-network",ssr:!1,pollInterval:d,onCompleted:function(e){var t,n;p("HostingDeployment"===(null===(t=e.hostingDeployment)||void 0===t?void 0:t.__typename)&&(null===(n=e.hostingDeployment.domains)||void 0===n?void 0:n.some((function(e){return e.state===me.zt.Verifying})))?3e4:void 0)}});var h=(null===r||void 0===r||null===(t=r.domains)||void 0===t?void 0:t.length)?r.domains:null,v=(null===r||void 0===r?void 0:r.currentBuild.status)===D.Fe.Success,m=null===r||void 0===r?void 0:r.repl.apexProxy;return(0,i.BX)(c.G,{css:rr.root,children:[!a&&(null===r||void 0===r||null===(n=r.legacyReplDomains)||void 0===n?void 0:n.length)&&m?(0,i.tZ)(nr,{domains:r.legacyReplDomains,deploymentId:r.id,apexProxy:m}):null,h&&r?(0,i.tZ)(c.G,{css:rr.list,children:h.map((function(e){return(0,i.tZ)(c.G,{children:(0,i.tZ)(qn,{apexProxy:r.repl.apexProxy,deploymentId:r.id,domain:e})},e.domain)}))}):null,(null===h||void 0===h?void 0:h.length)||a?null:(0,i.tZ)(T.xv,{color:"dimmer",children:"No domains linked"}),a&&m?(0,i.tZ)(Mn,{apexProxy:m,deploymentId:r.id,onAdd:function(){return u(!1)},onCancel:function(){return u(!1)}}):null,v?null:(0,i.tZ)(U.E,{colorway:"warning",icon:(0,i.tZ)(L.Z,{}),text:"You must successfully deploy your project before linking a domain"}),!1===a?(0,i.tZ)(c.G,{css:rr.footer,children:(0,i.tZ)(R.zx,{disabled:!v,iconLeft:(0,i.tZ)(pt.Z,{}),text:"Link a domain",onClick:function(){return u(!0)},outlined:!0,small:!0})}):null]})}var or=(0,w.X)({environmentVariables:{"& > div":{borderTop:"1px solid "+u.TV.outlineDimmest},"& > div:last-of-type":{borderBottom:"1px solid "+u.TV.outlineDimmest}}});function ar(e){var t,n,r=e.deploymentId,i=function(e){var t=(0,a.Z)(l.useState(null),2),n=t[0],r=t[1];return l.useEffect((function(){var t=!1;function n(){return(n=(0,s.Z)((function(){var n;return(0,h.__generator)(this,(function(i){switch(i.label){case 0:return[4,(0,ut.$f)(e)];case 1:return n=i.sent(),t||r(n),[2]}}))}))).apply(this,arguments)}return function(){n.apply(this,arguments)}(),function(){t=!0}}),[e]),n}(e.dotReplit),o=function(e){var t=(0,f.Z)({},yn,e);return V.a(Zn,t)}({variables:{id:r},ssr:!1,fetchPolicy:"cache-and-network"}),c=o.data,u=o.loading,d=o.error,p="HostingDeployment"===(null===c||void 0===c||null===(t=c.hostingDeployment)||void 0===t?void 0:t.__typename)?c.hostingDeployment:null;return"NotFoundError"===(null===c||void 0===c||null===(n=c.hostingDeployment)||void 0===n?void 0:n.__typename)?{data:null,error:"Deployment not found",loading:!1}:null===i||!p&&u?{data:null,erorr:null,loading:!0}:d||!p?{data:null,error:"Something went wrong",loading:!1}:{data:{deploymentConfig:i,deployment:p},error:null,loading:!1}}var lr=function(e){var t=(0,X.mF)(),n=e.onError,r=(0,X.hn)(),o=(0,Ne.Z)().dotReplit;if(!r)return n("No deployment found"),null;var a=function(){var n=(0,s.Z)((function(n){return(0,h.__generator)(this,(function(r){switch(r.label){case 0:return[4,t(n)];case 1:return r.sent(),e.onViewAction({type:C.ap.SendDeploymentLifecycleCommand,payload:n}),[2]}}))}));return function(e){return n.apply(this,arguments)}}();return(0,i.tZ)(cr,{dotReplit:o,deploymentId:r,onLifecycleCommand:a})};function cr(e){l.useEffect((function(){ke({context:C.kO.Settings})}),[]);var t=ar(e);if(t.loading)return(0,i.tZ)(k,{children:(0,i.tZ)(fe,{loading:!0})});if(t.error)return(0,i.tZ)(he,{text:t.error});var n=t.data,r=n.deploymentConfig,o=n.deployment,a=o.currentBuild;return(0,i.tZ)(k,{children:(0,i.BX)(c.G,{css:[u.l0.colWithGap(32)],children:[(0,i.BX)(c.G,{children:[(0,i.tZ)(T.xv,{variant:"subheadDefault",css:[u.l0.pb(8)],children:"Deployment configuration"}),(0,i.BX)(c.G,{css:[u.l0.colWithGap(16)],children:[(0,i.tZ)(ct,{id:"settingsBuildCommand",title:"Build command",information:"The build command is the command-line statement that compiles your app at build time.",children:(0,i.tZ)(dt.II,{value:r.buildCommand?r.buildCommand:"No build command set",css:[r.buildCommand?u.l0.color.greyStrongest:u.l0.color.greyDefault],disabled:!0})}),r.appType!==D.Vp.Static?(0,i.tZ)(ct,{id:"settingsRunCommand",title:"Run command",information:"The run command is the command-line statement that launches your app after it has been built.",children:(0,i.tZ)(dt.II,{value:r.runCommand?r.runCommand:"No run command set",css:[r.runCommand?u.l0.color.greyStrongest:u.l0.color.greyDefault],disabled:!0})}):null,r.appType===D.Vp.Static?(0,i.tZ)(ct,{id:"settingsPublicDir",title:"Public Directory",information:"The public directory is the root of your static site.",children:(0,i.tZ)(dt.II,{value:r.publicDir?r.publicDir:"No public directory set",css:[r.publicDir?u.l0.color.greyStrongest:u.l0.color.greyDefault],disabled:!0})}):null,(0,i.tZ)(ct,{id:"settingsEnvVars",title:"Deployment secrets",information:"Choose which secrets should be used for your deployment.",children:a.envVars.length>0?(0,i.tZ)(c.G,{css:or.environmentVariables,children:a.envVars.map((function(e){var t=e.name,n=e.value;return(0,i.tZ)(on.lg,{secret:{key:t,value:n},readOnly:!0},t)}))}):(0,i.tZ)(dt.II,{value:"No deployment secrets set",css:[u.l0.color.greyDefault],disabled:!0})})]})]}),(0,i.BX)(c.G,{children:[(0,i.tZ)(T.xv,{variant:"subheadDefault",css:[u.l0.pb(8)],children:"Domains"}),(0,i.tZ)(ir,{deployment:o})]}),(0,i.BX)(c.G,{children:[(0,i.tZ)(T.xv,{variant:"subheadDefault",css:[u.l0.pb(8)],children:"Manage deployment"}),(0,i.tZ)(rn,{onLifecycleCommand:e.onLifecycleCommand})]})]})})}var ur=n(48330),sr=n(57837),dr=(0,Je.iv)({filter:"drop-shadow(0px 2px 6px rgba(0, 0, 0, 0.15))"});function fr(){return(0,i.BX)("svg",{width:"56",height:"44",viewBox:"0 0 56 44",fill:"none",xmlns:"http://www.w3.org/2000/svg",css:dr,children:[(0,i.tZ)("path",{d:"M7 42.2858L8 32.6684H14L15 42.2858H24L26 27.1837H32L34 42.2858H43L45 21.699H52L55 3.71436H56V43.0001H1V42.2858H7Z",fill:"url(#paint0_linear_3629_241)"}),(0,i.tZ)("path",{d:"M55 3.71436L52 21.699H45L43 42.2858H34L32 27.1837H26L24 42.2858H15L14 32.6684H8L7 42.2858H1",stroke:"#57ABFF",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,i.tZ)("defs",{children:(0,i.BX)("linearGradient",{id:"paint0_linear_3629_241",x1:"28.5",y1:"3.71436",x2:"28.5",y2:"43.0001",gradientUnits:"userSpaceOnUse",children:[(0,i.tZ)("stop",{stopColor:"#0079F2"}),(0,i.tZ)("stop",{offset:"0.395833",stopColor:"#0079F2"}),(0,i.tZ)("stop",{offset:"0.958333",stopColor:"#0079F2",stopOpacity:"0"})]})})]})}function pr(){return(0,i.BX)("svg",{width:"56",height:"44",viewBox:"0 0 56 44",fill:"none",xmlns:"http://www.w3.org/2000/svg",css:dr,children:[(0,i.BX)("g",{clipPath:"url(#clip0_3629_246)",children:[(0,i.tZ)("rect",{x:"0.5",y:"9.5",width:"55",height:"19",rx:"5.5",fill:"#2B3245"}),(0,i.tZ)("g",{filter:"url(#filter0_dii_3629_246)",children:(0,i.tZ)("path",{d:"M3 15C3 13.3431 4.34315 12 6 12H20C20.5523 12 21 12.4477 21 13V25C21 25.5523 20.5523 26 20 26H6C4.34315 26 3 24.6569 3 23V15Z",fill:"#0079F2"})}),(0,i.tZ)("g",{filter:"url(#filter1_dii_3629_246)",children:(0,i.tZ)("rect",{x:"23",y:"12",width:"12",height:"14",rx:"1",fill:"#0079F2"})}),(0,i.tZ)("g",{filter:"url(#filter2_dii_3629_246)",children:(0,i.tZ)("rect",{x:"37",y:"12",width:"8",height:"14",rx:"1",fill:"#0079F2"})}),(0,i.tZ)("rect",{x:"0.5",y:"9.5",width:"55",height:"19",rx:"5.5",stroke:"#3C445C"})]}),(0,i.BX)("defs",{children:[(0,i.BX)("filter",{id:"filter0_dii_3629_246",x:"-3",y:"6",width:"30",height:"26",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,i.tZ)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,i.tZ)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,i.tZ)("feOffset",{}),(0,i.tZ)("feGaussianBlur",{stdDeviation:"3"}),(0,i.tZ)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,i.tZ)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.341176 0 0 0 0 0.670588 0 0 0 0 1 0 0 0 0.5 0"}),(0,i.tZ)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_3629_246"}),(0,i.tZ)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_3629_246",result:"shape"}),(0,i.tZ)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,i.tZ)("feMorphology",{radius:"2",operator:"dilate",in:"SourceAlpha",result:"effect2_innerShadow_3629_246"}),(0,i.tZ)("feOffset",{dy:"-2"}),(0,i.tZ)("feGaussianBlur",{stdDeviation:"1"}),(0,i.tZ)("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:"-1",k3:"1"}),(0,i.tZ)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.1 0"}),(0,i.tZ)("feBlend",{mode:"normal",in2:"shape",result:"effect2_innerShadow_3629_246"}),(0,i.tZ)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,i.tZ)("feMorphology",{radius:"2",operator:"dilate",in:"SourceAlpha",result:"effect3_innerShadow_3629_246"}),(0,i.tZ)("feOffset",{dy:"2"}),(0,i.tZ)("feGaussianBlur",{stdDeviation:"1"}),(0,i.tZ)("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:"-1",k3:"1"}),(0,i.tZ)("feColorMatrix",{type:"matrix",values:"0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0.1 0"}),(0,i.tZ)("feBlend",{mode:"normal",in2:"effect2_innerShadow_3629_246",result:"effect3_innerShadow_3629_246"})]}),(0,i.BX)("filter",{id:"filter1_dii_3629_246",x:"17",y:"6",width:"24",height:"26",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,i.tZ)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,i.tZ)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,i.tZ)("feOffset",{}),(0,i.tZ)("feGaussianBlur",{stdDeviation:"3"}),(0,i.tZ)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,i.tZ)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.341176 0 0 0 0 0.670588 0 0 0 0 1 0 0 0 0.5 0"}),(0,i.tZ)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_3629_246"}),(0,i.tZ)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_3629_246",result:"shape"}),(0,i.tZ)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,i.tZ)("feMorphology",{radius:"2",operator:"dilate",in:"SourceAlpha",result:"effect2_innerShadow_3629_246"}),(0,i.tZ)("feOffset",{dy:"-2"}),(0,i.tZ)("feGaussianBlur",{stdDeviation:"1"}),(0,i.tZ)("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:"-1",k3:"1"}),(0,i.tZ)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.1 0"}),(0,i.tZ)("feBlend",{mode:"normal",in2:"shape",result:"effect2_innerShadow_3629_246"}),(0,i.tZ)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,i.tZ)("feMorphology",{radius:"2",operator:"dilate",in:"SourceAlpha",result:"effect3_innerShadow_3629_246"}),(0,i.tZ)("feOffset",{dy:"2"}),(0,i.tZ)("feGaussianBlur",{stdDeviation:"1"}),(0,i.tZ)("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:"-1",k3:"1"}),(0,i.tZ)("feColorMatrix",{type:"matrix",values:"0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0.1 0"}),(0,i.tZ)("feBlend",{mode:"normal",in2:"effect2_innerShadow_3629_246",result:"effect3_innerShadow_3629_246"})]}),(0,i.BX)("filter",{id:"filter2_dii_3629_246",x:"31",y:"6",width:"20",height:"26",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,i.tZ)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,i.tZ)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,i.tZ)("feOffset",{}),(0,i.tZ)("feGaussianBlur",{stdDeviation:"3"}),(0,i.tZ)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,i.tZ)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.341176 0 0 0 0 0.670588 0 0 0 0 1 0 0 0 0.5 0"}),(0,i.tZ)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_3629_246"}),(0,i.tZ)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_3629_246",result:"shape"}),(0,i.tZ)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,i.tZ)("feMorphology",{radius:"2",operator:"dilate",in:"SourceAlpha",result:"effect2_innerShadow_3629_246"}),(0,i.tZ)("feOffset",{dy:"-2"}),(0,i.tZ)("feGaussianBlur",{stdDeviation:"1"}),(0,i.tZ)("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:"-1",k3:"1"}),(0,i.tZ)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.1 0"}),(0,i.tZ)("feBlend",{mode:"normal",in2:"shape",result:"effect2_innerShadow_3629_246"}),(0,i.tZ)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,i.tZ)("feMorphology",{radius:"2",operator:"dilate",in:"SourceAlpha",result:"effect3_innerShadow_3629_246"}),(0,i.tZ)("feOffset",{dy:"2"}),(0,i.tZ)("feGaussianBlur",{stdDeviation:"1"}),(0,i.tZ)("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:"-1",k3:"1"}),(0,i.tZ)("feColorMatrix",{type:"matrix",values:"0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0.1 0"}),(0,i.tZ)("feBlend",{mode:"normal",in2:"effect2_innerShadow_3629_246",result:"effect3_innerShadow_3629_246"})]}),(0,i.tZ)("clipPath",{id:"clip0_3629_246",children:(0,i.tZ)("rect",{width:"56",height:"44",fill:"white"})})]})]})}function hr(){return(0,i.BX)("svg",{width:"56",height:"44",viewBox:"0 0 56 44",fill:"none",xmlns:"http://www.w3.org/2000/svg",css:dr,children:[(0,i.BX)("g",{filter:"url(#filter0_i_3745_413)",children:[(0,i.tZ)("path",{d:"M25.5941 5.36199V9.42299H15.7671L15.3021 16.274H15.5501C16.4181 14.228 17.4411 12.833 20.2001 12.833C23.8891 12.833 26.8651 15.375 26.8651 19.715C26.8651 24.117 23.8891 27.372 18.5571 27.372C14.3721 27.372 12.1401 25.419 10.8381 23.218L14.2171 20.552C15.1471 22.226 16.3561 23.59 18.5881 23.59C20.8201 23.59 21.9671 22.195 21.9671 20.087V19.839C21.9671 17.855 20.7271 16.615 18.7121 16.615C17.0381 16.615 15.9221 17.483 15.3641 18.134L11.5511 17.607L12.3571 5.36199H25.5941Z",fill:"#0079F2"}),(0,i.tZ)("path",{d:"M37.3 27.372C31.627 27.372 28.961 23.249 28.961 16.181C28.961 9.11299 31.627 4.98999 37.3 4.98999C42.973 4.98999 45.639 9.11299 45.639 16.181C45.639 23.249 42.973 27.372 37.3 27.372ZM37.3 23.435C39.78 23.435 40.586 21.513 40.586 18.227V14.135C40.586 10.849 39.78 8.92699 37.3 8.92699C34.82 8.92699 34.014 10.849 34.014 14.135V18.227C34.014 21.513 34.82 23.435 37.3 23.435Z",fill:"#0079F2"})]}),(0,i.tZ)("path",{d:"M26.0941 5.36199V4.86199H25.5941H12.3571H11.8889L11.8582 5.32915L11.0522 17.5742L11.0216 18.0386L11.4826 18.1023L15.2956 18.6293L15.5661 18.6667L15.7437 18.4594C16.2372 17.8837 17.2252 17.115 18.7121 17.115C19.6162 17.115 20.2932 17.3912 20.7429 17.8378C21.1923 18.284 21.4671 18.9525 21.4671 19.839V20.087C21.4671 21.0543 21.2045 21.7949 20.7474 22.2897C20.296 22.7782 19.5966 23.09 18.5881 23.09C17.5856 23.09 16.8342 22.7875 16.224 22.3062C15.6019 21.8154 15.1056 21.1218 14.6542 20.3092L14.3688 19.7954L13.9074 20.1595L10.5284 22.8255L10.1852 23.0963L10.4078 23.4726C11.0897 24.6253 12.0259 25.7309 13.3549 26.5465C14.6863 27.3636 16.3832 27.872 18.5571 27.872C21.326 27.872 23.5368 27.0249 25.0582 25.5537C26.5799 24.0821 27.3651 22.031 27.3651 19.715C27.3651 17.4258 26.5773 15.5712 25.2655 14.2889C23.9566 13.0095 22.16 12.333 20.2001 12.333C18.7291 12.333 17.6601 12.708 16.8416 13.4057C16.4855 13.7093 16.1869 14.0658 15.9264 14.4595L16.2343 9.92299H25.5941H26.0941V9.42299V5.36199ZM28.461 16.181C28.461 19.7645 29.1346 22.6836 30.5971 24.7188C32.0798 26.782 34.3264 27.872 37.3 27.872C40.2736 27.872 42.5202 26.782 44.0029 24.7188C45.4654 22.6836 46.139 19.7645 46.139 16.181C46.139 12.5975 45.4654 9.6784 44.0029 7.64321C42.5202 5.57999 40.2736 4.48999 37.3 4.48999C34.3264 4.48999 32.0798 5.57999 30.5971 7.64321C29.1346 9.6784 28.461 12.5975 28.461 16.181ZM40.086 18.227C40.086 19.85 39.883 21.0413 39.4393 21.8144C39.2236 22.1904 38.9536 22.4625 38.6202 22.6444C38.2843 22.8277 37.8553 22.935 37.3 22.935C36.7447 22.935 36.3156 22.8277 35.9798 22.6444C35.6464 22.4625 35.3764 22.1904 35.1607 21.8144C34.717 21.0413 34.514 19.85 34.514 18.227V14.135C34.514 12.512 34.717 11.3207 35.1607 10.5476C35.3764 10.1716 35.6464 9.89946 35.9798 9.71756C36.3156 9.5343 36.7447 9.42699 37.3 9.42699C37.8553 9.42699 38.2843 9.5343 38.6202 9.71756C38.9536 9.89946 39.2236 10.1716 39.4393 10.5476C39.883 11.3207 40.086 12.512 40.086 14.135V18.227Z",stroke:"#57ABFF"}),(0,i.tZ)("defs",{children:(0,i.BX)("filter",{id:"filter0_i_3745_413",x:"9.53223",y:"3.98999",width:"37.1068",height:"25.382",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,i.tZ)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,i.tZ)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),(0,i.tZ)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,i.tZ)("feOffset",{dy:"1"}),(0,i.tZ)("feGaussianBlur",{stdDeviation:"1"}),(0,i.tZ)("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:"-1",k3:"1"}),(0,i.tZ)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.5 0"}),(0,i.tZ)("feBlend",{mode:"normal",in2:"shape",result:"effect1_innerShadow_3745_413"})]})})]})}function vr(){return(0,i.BX)("svg",{width:"56",height:"44",viewBox:"0 0 56 44",fill:"none",xmlns:"http://www.w3.org/2000/svg",css:dr,children:[(0,i.BX)("g",{clipPath:"url(#clip0_3745_412)",children:[(0,i.BX)("g",{filter:"url(#filter0_i_3745_412)",children:[(0,i.tZ)("path",{d:"M18.0982 27H3.03216V23.249H8.86016V8.74099H8.58116L4.17916 14.507L1.20316 12.182L6.38016 5.36199H13.5102V23.249H18.0982V27Z",fill:"#0079F2"}),(0,i.tZ)("path",{d:"M28.006 27.372C22.333 27.372 19.667 23.249 19.667 16.181C19.667 9.11299 22.333 4.98999 28.006 4.98999C33.679 4.98999 36.345 9.11299 36.345 16.181C36.345 23.249 33.679 27.372 28.006 27.372ZM28.006 23.435C30.486 23.435 31.292 21.513 31.292 18.227V14.135C31.292 10.849 30.486 8.92699 28.006 8.92699C25.526 8.92699 24.72 10.849 24.72 14.135V18.227C24.72 21.513 25.526 23.435 28.006 23.435Z",fill:"#0079F2"}),(0,i.tZ)("path",{d:"M46.5939 27.372C40.9209 27.372 38.2549 23.249 38.2549 16.181C38.2549 9.11299 40.9209 4.98999 46.5939 4.98999C52.2669 4.98999 54.9329 9.11299 54.9329 16.181C54.9329 23.249 52.2669 27.372 46.5939 27.372ZM46.5939 23.435C49.0739 23.435 49.8799 21.513 49.8799 18.227V14.135C49.8799 10.849 49.0739 8.92699 46.5939 8.92699C44.1139 8.92699 43.3079 10.849 43.3079 14.135V18.227C43.3079 21.513 44.1139 23.435 46.5939 23.435Z",fill:"#0079F2"})]}),(0,i.tZ)("path",{d:"M18.0982 27.5H18.5982V27V23.249V22.749H18.0982H14.0102V5.36199V4.86199H13.5102H6.38016H6.13196L5.9819 5.05968L0.8049 11.8797L0.506764 12.2724L0.895334 12.576L3.87133 14.901L4.26977 15.2123L4.57658 14.8104L8.36016 9.85444V22.749H3.03216H2.53216V23.249V27V27.5H3.03216H18.0982ZM19.167 16.181C19.167 19.7645 19.8406 22.6836 21.3031 24.7188C22.7858 26.782 25.0324 27.872 28.006 27.872C30.9796 27.872 33.2263 26.782 34.709 24.7188C36.1715 22.6836 36.845 19.7645 36.845 16.181C36.845 12.5975 36.1715 9.6784 34.709 7.64321C33.2263 5.57999 30.9796 4.48999 28.006 4.48999C25.0324 4.48999 22.7858 5.57999 21.3031 7.64321C19.8406 9.6784 19.167 12.5975 19.167 16.181ZM30.792 18.227C30.792 19.85 30.5891 21.0413 30.1454 21.8144C29.9296 22.1904 29.6596 22.4625 29.3262 22.6444C28.9904 22.8277 28.5613 22.935 28.006 22.935C27.4508 22.935 27.0217 22.8277 26.6859 22.6444C26.3525 22.4625 26.0825 22.1904 25.8667 21.8144C25.423 21.0413 25.22 19.85 25.22 18.227V14.135C25.22 12.512 25.423 11.3207 25.8667 10.5476C26.0825 10.1716 26.3525 9.89946 26.6859 9.71756C27.0217 9.5343 27.4508 9.42699 28.006 9.42699C28.5613 9.42699 28.9904 9.5343 29.3262 9.71756C29.6596 9.89946 29.9296 10.1716 30.1454 10.5476C30.5891 11.3207 30.792 12.512 30.792 14.135V18.227ZM37.7549 16.181C37.7549 19.7645 38.4285 22.6836 39.891 24.7188C41.3737 26.782 43.6203 27.872 46.5939 27.872C49.5675 27.872 51.8142 26.782 53.2968 24.7188C54.7594 22.6836 55.4329 19.7645 55.4329 16.181C55.4329 12.5975 54.7594 9.6784 53.2968 7.64321C51.8142 5.57999 49.5675 4.48999 46.5939 4.48999C43.6203 4.48999 41.3737 5.57999 39.891 7.64321C38.4285 9.6784 37.7549 12.5975 37.7549 16.181ZM49.3799 18.227C49.3799 19.85 49.177 21.0413 48.7333 21.8144C48.5175 22.1904 48.2475 22.4625 47.9141 22.6444C47.5783 22.8277 47.1492 22.935 46.5939 22.935C46.0387 22.935 45.6096 22.8277 45.2737 22.6444C44.9404 22.4625 44.6704 22.1904 44.4546 21.8144C44.0109 21.0413 43.8079 19.85 43.8079 18.227V14.135C43.8079 12.512 44.0109 11.3207 44.4546 10.5476C44.6704 10.1716 44.9404 9.89946 45.2737 9.71756C45.6096 9.5343 46.0387 9.42699 46.5939 9.42699C47.1492 9.42699 47.5783 9.5343 47.9141 9.71756C48.2475 9.89946 48.5175 10.1716 48.7333 10.5476C49.177 11.3207 49.3799 12.512 49.3799 14.135V18.227Z",stroke:"#57ABFF"})]}),(0,i.BX)("defs",{children:[(0,i.BX)("filter",{id:"filter0_i_3745_412",x:"-0.189636",y:"3.98999",width:"56.1226",height:"25.382",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,i.tZ)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,i.tZ)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),(0,i.tZ)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,i.tZ)("feOffset",{dy:"1"}),(0,i.tZ)("feGaussianBlur",{stdDeviation:"1"}),(0,i.tZ)("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:"-1",k3:"1"}),(0,i.tZ)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.5 0"}),(0,i.tZ)("feBlend",{mode:"normal",in2:"shape",result:"effect1_innerShadow_3745_412"})]}),(0,i.tZ)("clipPath",{id:"clip0_3745_412",children:(0,i.tZ)("rect",{width:"56",height:"44",fill:"white"})})]})]})}function mr(){return(0,i.BX)("svg",{width:"56",height:"44",viewBox:"0 0 56 44",fill:"none",xmlns:"http://www.w3.org/2000/svg",css:dr,children:[(0,i.tZ)("path",{d:"M1 42H55",stroke:"#57ABFF",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,i.tZ)("g",{filter:"url(#filter0_d_3629_304)",children:(0,i.tZ)("path",{d:"M21 11L35 25M38 18C38 23.5228 33.5228 28 28 28C22.4772 28 18 23.5228 18 18C18 12.4772 22.4772 8 28 8C33.5228 8 38 12.4772 38 18Z",stroke:"#0053A6",strokeWidth:"2"})}),(0,i.tZ)("defs",{children:(0,i.BX)("filter",{id:"filter0_d_3629_304",x:"9",y:"3",width:"38",height:"38",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,i.tZ)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,i.tZ)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,i.tZ)("feOffset",{dy:"4"}),(0,i.tZ)("feGaussianBlur",{stdDeviation:"4"}),(0,i.tZ)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0.32549 0 0 0 0 0.65098 0 0 0 0.5 0"}),(0,i.tZ)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_3629_304"}),(0,i.tZ)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_3629_304",result:"shape"})]})})]})}function gr(){return(0,i.BX)("svg",{width:"56",height:"44",viewBox:"0 0 56 44",fill:"none",xmlns:"http://www.w3.org/2000/svg",css:dr,children:[(0,i.tZ)("circle",{cx:"28",cy:"22",r:"13",fill:"#0053A6"}),(0,i.tZ)("path",{d:"M28 9C30.2851 9 32.5297 9.6023 34.5079 10.7462L28 22L28 9Z",fill:"#0079F2"}),(0,i.tZ)("circle",{cx:"28",cy:"22",r:"10.5",stroke:"#57ABFF",strokeDasharray:"1 4"}),(0,i.tZ)("g",{filter:"url(#filter0_d_3629_309)",children:(0,i.tZ)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M28 36.3334C35.9161 36.3334 42.3333 29.9162 42.3333 22.0001C42.3333 15.1129 37.4759 9.36028 31 7.98119V6C31 5 30 4 29 4H27C26 4 25 5 25 6V7.9812C18.5241 9.36029 13.6667 15.1129 13.6667 22.0001C13.6667 29.9162 20.0839 36.3334 28 36.3334ZM15.6667 22.0001C15.6667 15.1886 21.1885 9.66675 28 9.66675C34.8115 9.66675 40.3333 15.1886 40.3333 22.0001C40.3333 28.8116 34.8115 34.3334 28 34.3334C21.1885 34.3334 15.6667 28.8116 15.6667 22.0001Z",fill:"#0079F2"})}),(0,i.tZ)("g",{filter:"url(#filter1_d_3629_309)",children:(0,i.tZ)("path",{d:"M28 12V22L33 13.3",stroke:"#B2D9FF",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})}),(0,i.BX)("defs",{children:[(0,i.BX)("filter",{id:"filter0_d_3629_309",x:"11.6667",y:"3",width:"32.6667",height:"36.3335",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,i.tZ)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,i.tZ)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,i.tZ)("feOffset",{dy:"1"}),(0,i.tZ)("feGaussianBlur",{stdDeviation:"1"}),(0,i.tZ)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,i.tZ)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.15 0"}),(0,i.tZ)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_3629_309"}),(0,i.tZ)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_3629_309",result:"shape"})]}),(0,i.BX)("filter",{id:"filter1_d_3629_309",x:"25.25",y:"10.25",width:"10.5001",height:"15.5",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,i.tZ)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,i.tZ)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,i.tZ)("feOffset",{dy:"1"}),(0,i.tZ)("feGaussianBlur",{stdDeviation:"1"}),(0,i.tZ)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,i.tZ)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.15 0"}),(0,i.tZ)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_3629_309"}),(0,i.tZ)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_3629_309",result:"shape"})]})]})]})}function yr(){return(0,i.BX)("svg",{width:"56",height:"44",viewBox:"0 0 56 44",fill:"none",xmlns:"http://www.w3.org/2000/svg",css:dr,children:[(0,i.tZ)("path",{d:"M0 37V6H14.5L16 9L17.5 6H37.5L39 8L40.5 6H56V37H0Z",fill:"url(#paint0_linear_3629_271)"}),(0,i.tZ)("path",{d:"M1 6H14.5L16 9L17.5 6H37.5L39 8L40.5 6H55",stroke:"#57ABFF",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,i.tZ)("defs",{children:(0,i.BX)("linearGradient",{id:"paint0_linear_3629_271",x1:"28",y1:"6",x2:"28",y2:"37",gradientUnits:"userSpaceOnUse",children:[(0,i.tZ)("stop",{stopColor:"#0079F2",stopOpacity:"0.7"}),(0,i.tZ)("stop",{offset:"0.958333",stopColor:"#0079F2",stopOpacity:"0"})]})})]})}function Zr(){return(0,i.BX)("svg",{width:"56",height:"44",viewBox:"0 0 56 44",fill:"none",xmlns:"http://www.w3.org/2000/svg",css:dr,children:[(0,i.tZ)("path",{d:"M16 8C16 6.89543 16.8954 6 18 6H37C38.1046 6 39 6.89543 39 8V13H16V8Z",fill:"#0053A6"}),(0,i.tZ)("path",{d:"M16 14H39V27C39 28.1046 38.1046 29 37 29H18C16.8954 29 16 28.1046 16 27V14Z",fill:"#0053A6"}),(0,i.tZ)("g",{filter:"url(#filter0_d_3629_276)",children:(0,i.tZ)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M22.1667 1.6665C22.719 1.6665 23.1667 2.11422 23.1667 2.6665V4.33317H31.8333V2.6665C31.8333 2.11422 32.281 1.6665 32.8333 1.6665C33.3856 1.6665 33.8333 2.11422 33.8333 2.6665V4.33317H36.8333C38.8584 4.33317 40.5 5.97479 40.5 7.99984V26.6665C40.5 28.6915 38.8584 30.3332 36.8333 30.3332H18.1667C16.1416 30.3332 14.5 28.6915 14.5 26.6665V7.99984C14.5 5.97479 16.1416 4.33317 18.1667 4.33317H21.1667V2.6665C21.1667 2.11422 21.6144 1.6665 22.1667 1.6665ZM21.1667 6.33317H18.1667C17.2462 6.33317 16.5 7.07936 16.5 7.99984V12.3332H38.5V7.99984C38.5 7.07936 37.7538 6.33317 36.8333 6.33317H33.8333V7.99984C33.8333 8.55212 33.3856 8.99984 32.8333 8.99984C32.281 8.99984 31.8333 8.55212 31.8333 7.99984V6.33317H23.1667V7.99984C23.1667 8.55212 22.719 8.99984 22.1667 8.99984C21.6144 8.99984 21.1667 8.55212 21.1667 7.99984V6.33317ZM38.5 14.3332H16.5V26.6665C16.5 27.587 17.2462 28.3332 18.1667 28.3332H36.8333C37.7538 28.3332 38.5 27.587 38.5 26.6665V14.3332Z",fill:"#57ABFF"})}),(0,i.BX)("g",{filter:"url(#filter1_d_3629_276)",children:[(0,i.tZ)("path",{d:"M43.0779 26.019C42.2616 23.6789 40.0353 22 37.4169 22C35.7617 22 34.2632 22.6709 33.1785 23.7556L30.2721 26.662M30.2721 26.662V22.666M30.2721 26.662H34.2667",stroke:"#B2D9FF",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,i.tZ)("path",{d:"M31.7706 29.9688C32.5869 32.3089 34.8132 33.9878 37.4316 33.9878C39.0868 33.9878 40.5853 33.3169 41.67 32.2322L44.5764 29.3258M44.5764 29.3258L44.5764 33.3218M44.5764 29.3258L40.5818 29.3258",stroke:"#B2D9FF",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),(0,i.BX)("defs",{children:[(0,i.BX)("filter",{id:"filter0_d_3629_276",x:"12.5",y:"0.666504",width:"30",height:"32.6665",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,i.tZ)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,i.tZ)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,i.tZ)("feOffset",{dy:"1"}),(0,i.tZ)("feGaussianBlur",{stdDeviation:"1"}),(0,i.tZ)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,i.tZ)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.15 0"}),(0,i.tZ)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_3629_276"}),(0,i.tZ)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_3629_276",result:"shape"})]}),(0,i.BX)("filter",{id:"filter1_d_3629_276",x:"27.5221",y:"20.25",width:"19.8043",height:"17.4878",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,i.tZ)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,i.tZ)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,i.tZ)("feOffset",{dy:"1"}),(0,i.tZ)("feGaussianBlur",{stdDeviation:"1"}),(0,i.tZ)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,i.tZ)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.15 0"}),(0,i.tZ)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_3629_276"}),(0,i.tZ)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_3629_276",result:"shape"})]})]})]})}var br=n(77511),wr=n(13961),xr=n(9396),kr=n(70104),Cr=n(78728),Sr=n(38467),Tr=n(70232),Er=function(){var e=(0,X.gg)(),t=e.isDeployableRepl,n=e.reason;return t?null:(0,i.tZ)(U.E,{colorway:"warning",text:n})};function Rr(){var e=(0,W.Z)(["\n  query DeploymentsPaneIntro($id: String!) {\n    repl(id: $id) {\n      ... on Repl {\n        id\n        hostingDeploymentPermissions {\n          canDeployStatic {\n            isDeployable\n            deploymentCount\n            limit\n          }\n        }\n      }\n    }\n    currentUser {\n      id\n      userSubscriptionType\n      usageBasedBilling {\n        ... on UserUsageBasedBillingSummary {\n          capabilities {\n            canUseUsageBasedBilling\n            explanation\n            hasPaymentMethod\n          }\n        }\n      }\n    }\n  }\n"]);return Rr=function(){return e},e}var Gr={},Ir=(0,H.Ps)(Rr());var _r=u.nC.min(440),Dr=(0,Je.iv)([u.l0.reset.button,u.l0.overflow("hidden"),u.l0.position.relative,u.l0.cursor.pointer,u.l0.focusRing,u.l0.borderRadius(8),u.l0.flex.growAndShrink(1)]),Br=(0,w.X)({loading:[Dr,Ae.p.foregroundPulse(),u.l0.border({color:u.TV.backgroundHighest})],self:[Dr,ve.gU.filledAndOutlined,u.l0.border({color:u.TV.outlineDimmer})],selfActive:[Dr,u.l0.backgroundColor.accentPrimaryDimmest,u.l0.border({color:u.TV.accentPrimaryStronger})],disabled:[Dr,u.l0.color.foregroundDimmest],content:[u.l0.p(8),u.l0.colWithGap(4),(0,d.Z)({},_r,u.l0.py(12))],contentRecommended:[u.l0.p(8),u.l0.colWithGap(4),(0,d.Z)({},_r,{paddingTop:12,paddingBottom:20})],recommended:[u.l0.py(4),u.l0.backgroundColor.backgroundHighest],recommendedActive:[u.l0.py(4),u.l0.backgroundColor.accentPrimaryDimmer],icon:[u.l0.display.none,u.l0.color.foregroundDimmer,u.l0.center,(0,d.Z)({},_r,u.l0.display.flex)],iconActive:[u.l0.display.none,u.l0.color.accentPrimaryStrongest,u.l0.center,(0,d.Z)({},_r,u.l0.display.flex)],tiersTitle:[u.l0.rowWithGap(8),u.l0.align.center]});function Pr(e){var t=e.loading,n=e.disabled,r=e.active;return t?Br.loading:n?Br.disabled:r?Br.selfActive:Br.self}function Ar(e){var t,n,r,o,a=e.loading,l=e.active,s=e.provider,d=e.onClick,f=e.canDeploy,p=e.content;switch(s){case D.r4.CloudRun:t=(0,i.tZ)(xr.Z,{size:32}),n=p[D.r4.CloudRun].title,r=p[D.r4.CloudRun].subtitle,o=!0;break;case D.r4.Gce:t=(0,i.tZ)(kr.Z,{size:32}),n=p[D.r4.Gce].title,r=p[D.r4.Gce].subtitle;break;case D.r4.Static:t=(0,i.tZ)(Cr.Z,{size:32}),n=p[D.r4.Static].title,r=p[D.r4.Static].subtitle;break;default:(0,Tr.Z)(s)}var h=void 0!==f&&!f.isDeployable;return(0,i.BX)("button",{css:Pr({loading:a,disabled:h,active:l}),onClick:function(){return d(s)},disabled:a||h,children:[o?(0,i.tZ)(c.G,{css:l?Br.recommendedActive:Br.recommended,children:(0,i.tZ)(T.xv,{variant:"small",children:"Recommended"})}):null,(0,i.BX)(c.G,{css:o?Br.contentRecommended:Br.content,children:[(0,i.tZ)(c.G,{css:l?Br.iconActive:Br.icon,children:t}),(0,i.BX)(c.G,{children:[(0,i.BX)(c.G,{css:[u.l0.rowWithGap(4),u.l0.center],children:[(0,i.tZ)(T.xv,{variant:"subheadDefault",multiline:!1,children:n}),null]}),(0,i.tZ)(T.xv,{multiline:!1,variant:"small",children:r})]}),f?(0,i.tZ)(c.G,{css:[u.l0.position.absolute,u.l0.top(8),u.l0.right(8)],children:(0,i.tZ)(yt.u,{tooltip:"You can have up to ".concat(f.limit," free ").concat(O[s]," deployments live at one time."),children:(0,i.tZ)(De.D,{text:"".concat(f.deploymentCount," / ").concat(f.limit),css:[l?u.l0.backgroundColor.accentPrimaryDefault:u.l0.backgroundColor.backgroundDefault]})})}):null]})]})}var Lr=(0,w.X)({container:[u.l0.colWithGap(12),u.l0.maxWidth(400),{marginLeft:"auto",marginRight:"auto"}],item:{display:"grid",gridTemplateColumns:"56px auto",gap:20},text:[u.l0.flex.growAndShrink(1),u.l0.textAlign.left],onDemandHours:{}});function Ur(e){var t=e.header,n=e.info;return(0,i.BX)(c.G,{css:Lr.container,children:[(0,i.tZ)(T.xv,{variant:"subheadDefault",children:t}),n.map((function(e,t){return(0,i.BX)(c.G,{css:Lr.item,children:[e.icon,(0,i.tZ)(T.xv,{css:Lr.text,children:e.text})]},t)}))]})}var Xr,Mr=[D.r4.Gce,D.r4.CloudRun,D.r4.Static],Nr=(0,w.X)({container:[u.l0.colWithGap(32),u.l0.py(32),u.l0.textAlign.center,u.l0.width("100%"),u.l0.maxWidth(600),{marginLeft:"auto",marginRight:"auto"}],title:[u.l0.colWithGap(4),u.l0.width("100%"),u.l0.maxWidth(288),{marginLeft:"auto",marginRight:"auto"}],providers:[u.l0.colWithGap(8),u.l0.align.stretch,(0,d.Z)({},_r,[u.l0.rowWithGap(12),u.l0.align.center])],cta:[u.l0.width("100%"),u.l0.maxWidth(320),{marginLeft:"auto",marginRight:"auto"}],ctaStatusBanner:[u.l0.textAlign.left],oldCta:[u.l0.px(8),u.l0.colWithGap(16)]}),Or=function(e){var t,n,r=e.replId,o=e.onViewAction,p=e.onError,v=(0,X.gg)().isDeployableRepl,m=(0,Ne.Z)(),g=(0,a.Z)(l.useState(void 0),2),y=g[0],Z=g[1],b=(0,a.Z)(l.useState(!1),2),w=b[0],x=b[1];l.useEffect((function(){ke({context:"intro"})}),[]);var S=(0,N.P5)({controlName:"flag-funky-future",logFlagToAnalytics:!1}),E=(0,N.P5)({controlName:"flag-soft-sun",logFlagToAnalytics:!1}),G=function(e){var t=(0,f.Z)({},Gr,e);return V.a(Ir,t)}({skip:!S,variables:{id:r},onError:function(e){return p(e.message)}}),I=G.loading,_=G.data,B=G.refetch,P=(0,a.Z)(l.useState(!1),2),A=P[0],L=P[1];l.useEffect((function(){S?(0,s.Z)((function(){var e,t;return(0,h.__generator)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,(0,ut.$f)(m.dotReplit)];case 1:return null===(e=n.sent()).appType?(Z(D.r4.CloudRun),[2]):(t=(0,sr.oU)(e.appType))===D.r4.Goval?(p("Did not recognize template deployment provider"),[2]):(Z(t),[3,3]);case 2:return n.sent(),p("Something went wrong"),[3,3];case 3:return[2]}}))}))():Z(D.r4.Gce)}),[S,p,m.dotReplit]);var M,O=function(){if(y)switch(y){case D.r4.Gce:o({type:C.ap.ChangeView,payload:{view:C.kO.ReservedVMTierSelection}});break;case D.r4.CloudRun:if(E){o({type:C.ap.ChangeView,payload:{view:C.kO.OnDemandMachineConfiguration}});break}o({type:C.ap.ChangeView,payload:{view:C.kO.DeploymentOptions,data:{provider:D.r4.CloudRun}}});break;case D.r4.Static:o({type:C.ap.ChangeView,payload:{view:C.kO.DeploymentOptions,data:{provider:D.r4.Static}}});break;default:(0,Tr.Z)(y)}},F=I||A||void 0===y,W=null===_||void 0===_||null===(t=_.currentUser)||void 0===t?void 0:t.userSubscriptionType,H=W===D.HP.Hacker,z=W===D.HP.HackerPro,j=H||z,q="UserUsageBasedBillingSummary"===(null===_||void 0===_||null===(n=_.currentUser)||void 0===n?void 0:n.usageBasedBilling.__typename)?_.currentUser.usageBasedBilling.capabilities:null,$=(0,br.rv)(),Y=function(){return H?(0,i.tZ)(hr,{}):z?(0,i.tZ)(vr,{}):(0,i.tZ)(pr,{})},K=function(){return y===D.r4.Gce?(0,i.tZ)(R.zx,{colorway:"primary",onClick:O,text:"Set up your deployment",disabled:!v,loading:F,css:Nr.cta}):E&&(null===q||void 0===q?void 0:q.explanation)===D.Fp.NeedsSubscription?$?(0,i.tZ)(U.E,{text:"You need a subscription to deploy. Navigate to Account > Billing to upgrade.",colorway:"warning",icon:(0,i.tZ)(de.Warning,{}),css:Nr.ctaStatusBanner}):(0,i.tZ)(Sr.Z,{context:"workspace_hosting_pane",text:"Upgrade your plan to deploy",css:Nr.cta,colorway:"blurple",outlined:!1}):E&&(null===q||void 0===q?void 0:q.explanation)===D.Fp.NeedsPaymentMethod?$?(0,i.tZ)(U.E,{text:"You have used all free usage for this month. Check your email for more information or contact support.",colorway:"warning",icon:(0,i.tZ)(de.Warning,{}),css:Nr.ctaStatusBanner}):(0,i.tZ)(R.zx,{colorway:"primary",text:"Add a payment method",css:Nr.cta,disabled:w,loading:F,iconLeft:(0,i.tZ)(de.CreditCard,{}),onClick:function(){return x(!0)}}):(0,i.BX)(i.HY,{children:[(0,i.tZ)(R.zx,{colorway:"primary",onClick:O,text:"Set up your deployment",disabled:!v,loading:F,css:Nr.cta}),E&&!1===(null===q||void 0===q?void 0:q.hasPaymentMethod)?(0,i.tZ)(U.E,{text:"Please add a payment method to avoid downtime",colorway:"warning",icon:(0,i.tZ)(de.Warning,{}),css:Nr.ctaStatusBanner,onClick:function(){return x(!0)}}):null]})},Q=(M={title:"Deploy to production",subtitle:"Create a live version of your project so people won't be interrupted by changes taking place"},(0,d.Z)(M,D.r4.Gce,{display:!0,title:"Reserved VM",subtitle:"Servers that stay on",header:"Reserved VM is for apps that don't tolerate restarts",info:[{text:"Reserved VM apps have 99.999% uptime, preventing restarts that interrupt apps that rely on information between client sessions",icon:(0,i.tZ)(yr,{})},{text:"Flat monthly price based on your custom power level, starting at $10/month",icon:(0,i.tZ)(Zr,{})}]}),(0,d.Z)(M,D.r4.CloudRun,{display:S,title:"Autoscale",subtitle:"Meet demand exactly",header:"Autoscale is the best choice for most projects",info:[{text:"Automatically scales from zero to any level of demand, making it inexpensive for most apps and effortless for when you go viral",icon:(0,i.tZ)(fr,{})},{text:j?"".concat(z?"100":"50"," compute-hours per month are included in your ").concat(z?"Pro":"Hacker"," plan. Additional usage is billed at $0.000X per compute-second"):"Compute-hours are included in Replit plans, then billed at $0.000X per compute-second",icon:(0,i.tZ)(Y,{})}]}),(0,d.Z)(M,D.r4.Static,{display:S,title:"Static",subtitle:"Easy client-side apps",header:"Static lets you share client-side apps fast, for free",info:[{text:"No server compute means free usage \u2014 you are only responsible for outbound data transfer (included in Replit plans)",icon:(0,i.tZ)(mr,{})},{text:"Extremely fast deploy times allow you to move quickly on your production sites",icon:(0,i.tZ)(gr,{})}]}),M);return(0,i.tZ)(k,{children:(0,i.BX)(c.G,{css:Nr.container,children:[(0,i.BX)(c.G,{css:Nr.title,children:[(0,i.tZ)(T.xv,{variant:"subheadBig",children:Q.title}),(0,i.tZ)(T.xv,{color:"dimmer",children:Q.subtitle})]}),(0,i.BX)(c.G,{css:u.l0.colWithGap(16),children:[(0,i.tZ)(c.G,{css:Nr.providers,children:Mr.map((function(e){if(!Q[e].display)return null;var t=e===D.r4.Static&&"Repl"===(null===_||void 0===_?void 0:_.repl.__typename)?_.repl.hostingDeploymentPermissions.canDeployStatic:void 0;return(0,i.tZ)(Ar,{provider:e,loading:F,active:y===e,onClick:Z,canDeploy:t,content:Q},e)}))}),(0,i.BX)(c.G,{css:u.l0.colWithGap(8),children:[(0,i.tZ)(K,{}),E&&y===D.r4.CloudRun?(0,i.tZ)(T.xv,{color:"dimmer",children:"You have XX compute-hours left this month"}):null,w?(0,i.tZ)(wr.q,{onSuccess:(0,s.Z)((function(){return(0,h.__generator)(this,(function(e){switch(e.label){case 0:return x(!1),L(!0),[4,B()];case 1:return e.sent(),L(!1),[2]}}))}))}):null]}),(0,i.tZ)(Er,{})]}),(0,i.BX)(c.G,{css:u.l0.colWithGap(16),children:[y?(0,i.tZ)(Ur,{header:Q[y].header,info:Q[y].info}):null,(0,i.tZ)(T.xv,{css:u.l0.textAlign.center,children:(0,i.tZ)("a",{href:"https://docs.replit.com/category/deployments",target:"_blank",rel:"noopener",children:"Learn more"})})]})]})})},Fr=n(95308),Wr=n(66195),Hr=function(e){var t=e.replId,n=e.onViewAction,r=(0,X.hn)(),o=(0,X.Sl)(),d=!(void 0!==(0,X.pn)())&&!("string"===typeof r),v=void 0!==o,m=(0,a.Z)(l.useState(!1),2),g=m[0],y=m[1],Z=(0,Wr.P)({step:"not_shown"});l.useEffect((function(){ke({context:"tier_selection"})}),[]),l.useEffect((function(){"checkout_success"!==Z.currentStep.step?"not_shown"===Z.currentStep.step&&Z.goTo({step:"power_up_details",powerUpCategory:"hosting_tier"}):y(!0)}),[Z,t]);var b=(0,X.mF)(),w=!v||!d,x=v&&d;if("not_shown"===Z.currentStep.step)return(0,i.tZ)(i.HY,{});var S=function(){var e=(0,s.Z)((function(){return(0,h.__generator)(this,(function(e){return g?(n({type:C.ap.CheckoutSuccess}),[2]):(n({type:C.ap.GoBack}),[2])}))}));return function(){return e.apply(this,arguments)}}();return(0,i.tZ)(k,{children:(0,i.BX)(c.G,{css:u.l0.colWithGap(16),children:[w?(0,i.tZ)(Fr.s,(0,p.Z)((0,f.Z)({},Z),{analyticsContext:"workspace_hosting_pane",goBack:(0,s.Z)((function(){return(0,h.__generator)(this,(function(e){return"power_up_details"===Z.currentStep.step?g?n({type:C.ap.CheckoutSuccess}):S():Z.goBack(),[2]}))}))})):null,g?(0,i.tZ)(R.zx,{colorway:d?"primary":void 0,onClick:S,text:d?"Deploy your project":"Back to deployment"}):null,x?(0,i.BX)(i.HY,{children:[(0,i.BX)(c.G,{css:[u.l0.rowWithGap(8),u.l0.align.center],children:[(0,i.tZ)(F.h,{alt:"Back",onClick:S,children:(0,i.tZ)(de.ArrowLeft,{})}),(0,i.tZ)(U.E,{colorway:"warning",icon:(0,i.tZ)(L.Z,{}),text:"To upgrade hosting tier, please deploy your repl first."})]}),(0,i.tZ)(rn,{hideResume:!0,hideSuspend:!0,onLifecycleCommand:function(){var e=(0,s.Z)((function(e){return(0,h.__generator)(this,(function(t){switch(t.label){case 0:return[4,b(e)];case 1:return t.sent(),n({type:C.ap.SendDeploymentLifecycleCommand,payload:e}),[2]}}))}));return function(t){return e.apply(this,arguments)}}()})]}):null]})})},Vr=n(94716),zr=(0,w.X)({root:[{borderBottom:"1px solid ".concat(u.TV.outlineDimmest)}],inner:[u.l0.position.relative,{"::before":{content:'""',display:"block",position:"absolute",left:0,width:8,height:"100%",background:"linear-gradient(90deg, ".concat(u.TV.backgroundDefault," 0%, rgba(0,0,0,0) 100%);"),zIndex:1},"::after":{content:'""',display:"block",position:"absolute",right:0,width:8,height:"100%",background:"linear-gradient(270deg, ".concat(u.TV.backgroundDefault," 0%, rgba(0,0,0,0) 100%);"),zIndex:1}}],tabs:[u.l0.flex.row,u.l0.align.center,u.l0.overflowX("auto"),u.l0.pl(8)],tab:[ve.gU.nofill,u.l0.borderRadius(0),u.l0.px(12),u.l0.position.relative,{transition:"none",height:38,marginRight:1,"::after":{content:'""',display:"block",position:"absolute",right:-2,width:1,height:16,backgroundColor:u.TV.outlineDimmest},"&:last-child":{marginRight:0,"::after":{display:"none"}}}]}),jr=function(e){var t=e.tabs,n=e.activeIndex,r=e.onClick;return(0,i.tZ)(E.Tg,{css:zr.root,children:(0,i.tZ)(c.G,{css:zr.inner,children:(0,i.tZ)(c.G,{css:zr.tabs,children:t.map((function(e,t){return(0,i.tZ)(R.zx,{style:{borderBottom:"1px solid "+(n===t?u.TV.foregroundDefault:"transparent")},css:zr.tab,text:e.label,iconLeft:e.icon,onClick:function(){return r(e)}},e.key)}))})})})},qr=n(91398),$r=[1,2,4,8],Yr=[.001,.002,.004,.008],Kr=[[0,3],[0,4],[2,5],[3,6]],Qr=$r.length-1,Jr=1/(2*Qr),ei=(0,qr.cn)(0),ti=(0,qr.cn)((function(e){return $r[e(ei)]})),ni=(0,qr.cn)((function(e){return Yr[e(ei)]})),ri=(0,qr.cn)((function(e){return Kr[e(ei)]})),ii=(0,qr.cn)(0),oi=(0,qr.cn)((function(e){var t=e(hi)[0]/Qr,n=e(hi)[1]/Qr,r=0,i=0;return e(ii)<t&&(r=(t-e(ii))/Jr,i=t-Jr),e(ii)>n&&(r=(e(ii)-n)/Jr,i=n+Jr),{overage:r,point:i}})),ai=[.5,1,2,4,8,16,32],li=[5e-5,1e-4,2e-4,4e-4,8e-4,.0016,.0032],ci=[[0,1],[0,1],[0,2],[0,3],[1,3],[2,3],[3,3]],ui=ai.length-1,si=1/(2*ui),di=(0,qr.cn)(2),fi=(0,qr.cn)((function(e){return ai[e(di)]})),pi=(0,qr.cn)((function(e){return li[e(di)]})),hi=(0,qr.cn)((function(e){return ci[e(di)]})),vi=(0,qr.cn)(0),mi=(0,qr.cn)((function(e){var t=e(ri)[0]/ui,n=e(ri)[1]/ui,r=0,i=0;return e(vi)<t&&(r=(t-e(vi))/si,i=t-si),e(vi)>n&&(r=(e(vi)-n)/si,i=n+si),{overage:r,point:i}})),gi=(0,qr.cn)(null,(function(e,t){var n=e(ei),r=e(hi)[0],i=e(hi)[1];n<r&&t(ei,r),n>i&&t(ei,i)})),yi=(0,qr.cn)(null,(function(e,t){var n=e(di),r=e(ri)[0],i=e(ri)[1];n<r&&t(di,r),n>i&&t(di,i)})),Zi=(0,qr.cn)((function(e){var t=e(hi)[0]/Qr,n=e(hi)[1]/Qr,r=e(ri)[0]/ui,i=e(ri)[1]/ui;return e(ii)<t?(t-e(ii))/Jr:e(ii)>n?(e(ii)-n)/Jr:e(vi)<r?(r-e(vi))/si:e(vi)>i?(e(vi)-i)/si:0})),bi=(0,qr.cn)((function(e){return(e(pi)*Math.pow(10,5)+e(ni)*Math.pow(10,5))/Math.pow(10,5)}));!function(e){e.None="0ms",e.Normal="120ms"}(Xr||(Xr={}));var wi=["ArrowLeft","ArrowRight","Home","End"],xi=(0,Je.iv)({position:"relative",height:"16px",width:"100%",touchAction:"none"}),ki=(0,Je.iv)({position:"absolute",zIndex:2,top:"0",width:"16px",height:"16px",backgroundColor:u.TV.white,borderRadius:"100%",outline:"none",cursor:"pointer",willChange:"left, transition",boxShadow:"0 0 8px rgba(0,0,0,0.15)",":focus":{outline:"2px solid ".concat(u.TV.accentPrimaryDefault),":not(:focus-visible)":{outlineColor:"transparent"}}}),Ci=n(92683);function Si(e,t){var n=(0,a.Z)((0,Ci.KO)(ti),1)[0],r=(0,l.useRef)(null);return(0,l.useImperativeHandle)(t,(function(){return r.current})),n&&r.current&&(r.current.setAttribute("aria-valuemin",String($r[0])),r.current.setAttribute("aria-valuemax",String($r[$r.length-1])),r.current.setAttribute("aria-valuenow",String(n))),(0,l.useMemo)((function(){return(0,i.tZ)("div",{ref:r,role:"slider",tabIndex:0,css:[ki,{left:"calc((100% - 16px) * var(--cpu-progress, 0))",transition:"left var(--cpu-transition-time, 100ms) ease-out"}]})}),[])}var Ti=(0,l.forwardRef)(Si),Ei=n(12808),Ri="min(var(--point), var(--position))",Gi="max(var(--point), var(--position))";function Ii(e,t){var n=(0,Ci.Dv)(oi),r=n.overage,o=n.point,a=(0,Ci.Dv)(ii),c=(0,l.useRef)(null);return(0,l.useEffect)((function(){(0,Ei.A)(c,"--opacity",String(r))}),[r]),(0,l.useEffect)((function(){(0,Ei.A)(c,"--point",String(100*o)+"%")}),[o]),(0,l.useEffect)((function(){(0,Ei.A)(c,"--position",String(100*a)+"%")}),[a]),(0,l.useMemo)((function(){return(0,i.BX)(i.HY,{children:[(0,i.tZ)("div",{ref:t,"aria-hidden":!0,css:{position:"relative",top:"0",width:"100%",height:"16px",margin:"0",cursor:"pointer"}}),(0,i.tZ)("div",{"aria-hidden":!0,css:{position:"absolute",top:"5px",left:"0",width:"100%",height:"6px",margin:"0",overflow:"hidden",pointerEvents:"none",backgroundColor:ve.vb.interactiveBorder,borderRadius:"2px"},children:(0,i.tZ)("div",{ref:c,"aria-hidden":!0,css:{"--opacity":0,"--point":0,"--position":0,backgroundImage:"\n                linear-gradient(\n                  to right, transparent ".concat(Ri,", \n                  ").concat(ve.vb.interactiveBorderHover," ").concat(Ri,", \n                  ").concat(ve.vb.interactiveBorderHover," ").concat(Gi,", \n                  transparent ").concat(Gi," \n                )"),opacity:"var(--opacity)",width:"100%",height:"100%"}})})]})}),[t])}var _i=(0,l.forwardRef)(Ii),Di=(0,w.X)({container:{flexDirection:"row",justifyContent:"space-between",height:6,paddingLeft:8,paddingRight:8},mark:{width:1,backgroundColor:u.TV.outlineStronger}});function Bi(e){var t=e.list;return(0,i.tZ)(c.G,{css:Di.container,children:t.map((function(e){return(0,i.tZ)(c.G,{css:Di.mark},e)}))})}var Pi=n(2757),Ai=Qr;function Li(e){var t=e.setAttrs,n=(0,a.Z)((0,Ci.KO)(ei),2),r=n[0],o=n[1],s=(0,l.useState)(!1),d=s[0],f=s[1],p=(0,l.useRef)(null),h=(0,l.useRef)(null),v=(0,l.useRef)(null),m=(0,l.useCallback)((function(e){t.setTransitionTime(e)}),[t]),g=(0,l.useCallback)((function(e){t.setProgress(e)}),[t]);void 0===r||d||(g(r/Ai),m(Xr.Normal));return(0,l.useEffect)((function(){if(void 0!==r&&h.current&&v.current&&!d){var e=h.current,t=v.current,n=function(n){if(0===n.button){f(!0),t.focus();var r=e.getBoundingClientRect(),i=t.getBoundingClientRect(),a=r.width,l=i.width,c=n.target===e?l/2:n.clientX-i.left,u=null,s=function(e){var t=e-r.left-c,n=Math.max(0,Math.min(1,t/(a-l)));n!==u&&(u=n,g(n),o(Math.round(n*Ai)))};s(n.clientX);var d=function(e){m(Xr.None),s(e.clientX),e.preventDefault(),e.stopPropagation()},p=function(){window.removeEventListener("pointermove",d),window.removeEventListener("pointerup",p),window.removeEventListener("pointercancel",p),m(Xr.Normal),f(!1)};window.addEventListener("pointermove",d),window.addEventListener("pointerup",p),window.addEventListener("pointercancel",p),n.preventDefault(),n.stopPropagation()}};return e.addEventListener("pointerdown",n),t.addEventListener("pointerdown",n),function(){e.removeEventListener("pointerdown",n),t.removeEventListener("pointerdown",n)}}}),[r,d,o,g,m]),(0,l.useEffect)((function(){if(void 0!==r&&v.current&&!d){var e=v.current,t=function(e){if(void 0!==r&&wi.includes(e.key)){var t=r,n=Ai,i=Math.max(0,t-1),a=Math.min(n,t+1),l=null;switch(e.key){case"ArrowLeft":l=i;break;case"ArrowRight":l=a;break;case"Home":l=0;break;case"End":l=n}null!==l&&(o(l),e.preventDefault(),e.stopPropagation())}};return e.addEventListener("keydown",t),function(){e.removeEventListener("keydown",t)}}}),[d,r,o]),(0,l.useMemo)((function(){return(0,i.BX)(c.G,{css:u.l0.colWithGap(8),children:[(0,i.BX)(c.G,{innerRef:p,css:xi,children:[(0,i.tZ)(_i,{ref:h}),(0,i.tZ)(Ti,{ref:v})]}),(0,i.tZ)(Bi,{list:$r})]})}),[])}var Ui=(0,w.X)({container:u.l0.colWithGap(4),label:[u.l0.flex.row,u.l0.justify.spaceBetween],resource:u.l0.fontWeight.medium,cost:[u.l0.rowWithGap(1),u.l0.align.baseline]});function Xi(e){var t=e.setAttrs,n=(0,a.Z)((0,Ci.KO)(ti),1)[0],r=(0,a.Z)((0,Ci.KO)(ni),1)[0],o=(0,Ci.b9)(yi);return(0,l.useEffect)((function(){o()}),[o,n]),(0,i.BX)(c.G,{css:Ui.container,children:[(0,i.BX)(c.G,{css:Ui.label,children:[(0,i.BX)(T.xv,{css:Ui.resource,multiline:!1,children:[n," ",(0,Pi.Z)("vCPU",n)]}),(0,i.BX)(c.G,{css:Ui.cost,children:[(0,i.BX)(T.xv,{color:"dimmer",multiline:!1,children:["$",r]}),(0,i.tZ)(T.xv,{color:"dimmest",variant:"small",multiline:!1,children:"/s"})]})]}),(0,i.tZ)(Li,{setAttrs:t})]})}var Mi="min(var(--point), var(--position))",Ni="max(var(--point), var(--position))";function Oi(e,t){var n=(0,Ci.Dv)(mi),r=n.overage,o=n.point,a=(0,Ci.Dv)(vi),c=(0,l.useRef)(null);return(0,l.useEffect)((function(){(0,Ei.A)(c,"--opacity",String(r))}),[r]),(0,l.useEffect)((function(){(0,Ei.A)(c,"--point",String(100*o)+"%")}),[o]),(0,l.useEffect)((function(){(0,Ei.A)(c,"--position",String(100*a)+"%")}),[a]),(0,l.useMemo)((function(){return(0,i.BX)(i.HY,{children:[(0,i.tZ)("div",{ref:t,"aria-hidden":!0,css:{position:"relative",top:"0",width:"100%",height:"16px",margin:"0",cursor:"pointer"}}),(0,i.tZ)("div",{"aria-hidden":!0,css:{position:"absolute",top:"5px",left:"0",width:"100%",height:"6px",margin:"0",overflow:"hidden",pointerEvents:"none",backgroundColor:ve.vb.interactiveBorder,borderRadius:"2px"},children:(0,i.tZ)("div",{ref:c,"aria-hidden":!0,css:{"--opacity":0,"--point":0,"--position":0,backgroundImage:"\n                linear-gradient(\n                  to right, transparent ".concat(Mi,", \n                  ").concat(ve.vb.interactiveBorderHover," ").concat(Mi,", \n                  ").concat(ve.vb.interactiveBorderHover," ").concat(Ni,", \n                  transparent ").concat(Ni," \n                )"),opacity:"var(--opacity)",width:"100%",height:"100%"}})})]})}),[t])}var Fi=(0,l.forwardRef)(Oi);function Wi(e,t){var n=(0,a.Z)((0,Ci.KO)(fi),1)[0],r=(0,l.useRef)(null);return(0,l.useImperativeHandle)(t,(function(){return r.current})),n&&r.current&&(r.current.setAttribute("aria-valuemin",String(ai[0])),r.current.setAttribute("aria-valuemax",String(ai[ai.length-1])),r.current.setAttribute("aria-valuenow",String(n))),(0,l.useMemo)((function(){return(0,i.tZ)("div",{ref:r,role:"slider",tabIndex:0,css:[ki,{left:"calc((100% - 16px) * var(--ram-progress, 0))",transition:"left var(--ram-transition-time, 100ms) ease-out"}]})}),[])}var Hi=(0,l.forwardRef)(Wi),Vi=ui;function zi(e){var t=e.setAttrs,n=(0,a.Z)((0,Ci.KO)(di),2),r=n[0],o=n[1],s=(0,l.useState)(!1),d=s[0],f=s[1],p=(0,l.useRef)(null),h=(0,l.useRef)(null),v=(0,l.useRef)(null),m=(0,l.useCallback)((function(e){t.setTransitionTime(e)}),[t]),g=(0,l.useCallback)((function(e){t.setProgress(e)}),[t]);void 0===r||d||(g(r/Vi),m(Xr.Normal));return(0,l.useEffect)((function(){if(void 0!==r&&h.current&&v.current&&!d){var e=h.current,t=v.current,n=function(n){if(0===n.button){f(!0),t.focus();var r=e.getBoundingClientRect(),i=t.getBoundingClientRect(),a=r.width,l=i.width,c=n.target===e?l/2:n.clientX-i.left,u=null,s=function(e){var t=e-r.left-c,n=Math.max(0,Math.min(1,t/(a-l)));n!==u&&(u=n,g(n),o(Math.round(n*Vi)))};s(n.clientX);var d=function(e){m(Xr.None),s(e.clientX),e.preventDefault(),e.stopPropagation()},p=function(){window.removeEventListener("pointermove",d),window.removeEventListener("pointerup",p),window.removeEventListener("pointercancel",p),m(Xr.Normal),f(!1)};window.addEventListener("pointermove",d),window.addEventListener("pointerup",p),window.addEventListener("pointercancel",p),n.preventDefault(),n.stopPropagation()}};return e.addEventListener("pointerdown",n),t.addEventListener("pointerdown",n),function(){e.removeEventListener("pointerdown",n),t.removeEventListener("pointerdown",n)}}}),[r,d,o,g,m]),(0,l.useEffect)((function(){if(void 0!==r&&v.current&&!d){var e=v.current,t=function(e){if(void 0!==r&&wi.includes(e.key)){var t=r,n=Vi,i=Math.max(0,t-1),a=Math.min(n,t+1),l=null;switch(e.key){case"ArrowLeft":l=i;break;case"ArrowRight":l=a;break;case"Home":l=0;break;case"End":l=n}null!==l&&(o(l),e.preventDefault(),e.stopPropagation())}};return e.addEventListener("keydown",t),function(){e.removeEventListener("keydown",t)}}}),[d,r,o]),(0,l.useMemo)((function(){return(0,i.BX)(c.G,{css:u.l0.colWithGap(8),children:[(0,i.BX)(c.G,{innerRef:p,css:xi,children:[(0,i.tZ)(Fi,{ref:h}),(0,i.tZ)(Hi,{ref:v})]}),(0,i.tZ)(Bi,{list:ai})]})}),[])}var ji=(0,w.X)({container:u.l0.colWithGap(4),label:[u.l0.flex.row,u.l0.justify.spaceBetween],resource:u.l0.fontWeight.medium,cost:[u.l0.rowWithGap(1),u.l0.align.baseline]});function qi(e){var t=e.setAttrs,n=(0,a.Z)((0,Ci.KO)(fi),1)[0],r=(0,a.Z)((0,Ci.KO)(pi),1)[0],o=(0,Ci.b9)(gi);return(0,l.useEffect)((function(){o()}),[o,n]),(0,i.BX)(c.G,{css:ji.container,children:[(0,i.BX)(c.G,{css:ji.label,children:[(0,i.BX)(T.xv,{css:ji.resource,multiline:!1,children:[n," GiB RAM"]}),(0,i.BX)(c.G,{css:ji.cost,children:[(0,i.BX)(T.xv,{color:"dimmer",multiline:!1,children:["$",r]}),(0,i.tZ)(T.xv,{color:"dimmest",variant:"small",multiline:!1,children:"/s"})]})]}),(0,i.tZ)(zi,{setAttrs:t})]})}var $i="var(--cpu-progress)",Yi="var(--ram-progress)",Ki="min(".concat($i,", ").concat(Yi,")"),Qi="min(".concat("var(--cpu-transition-time)",", ").concat("var(--ram-transition-time)",")"),Ji="calc(calc(".concat(Yi," - ").concat($i,") + 0.00000001)"),eo="max(0, ".concat(Ji," * -1)"),to="calc(".concat(Ki," + ").concat(eo,")"),no="calc(".concat(to," * 100%)"),ro="calc(".concat(Ji," * 100%)"),io=(0,w.X)({container:[u.l0.px(8),u.l0.width("100%"),u.l0.position.absolute,u.l0.top(44),u.l0.transition.snappy,u.l0.zIndex(1)],svg:[u.l0.width("100%"),u.l0.overflow("visible")],line:{transition:"transform max(24ms, ".concat(Qi,") ease"),transform:"translateX(".concat(no,") scaleX(").concat(ro,")"),willChange:"stroke"},overage:{"--opacity":0,opacity:"var(--opacity)",transition:"opacity 80ms ease-out"}}),oo={x1:0,y1:-9,x2:100,y2:55,strokeWidth:3,vectorEffect:"non-scaling-stroke",shapeRendering:"crisp-edges",css:io.line};function ao(){var e=(0,Ci.Dv)(Zi),t=(0,l.useRef)(null);return(0,l.useEffect)((function(){(0,Ei.A)(t,"--opacity",String(Math.pow(e,1/3)))}),[e]),(0,i.tZ)(c.G,{css:io.container,id:"rope",children:(0,i.BX)("svg",{height:46,viewBox:"0 0 100 ".concat(46),fill:"none",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"none",css:io.svg,children:[(0,i.tZ)("line",(0,p.Z)((0,f.Z)({},oo),{stroke:u.TV.outlineDimmer})),(0,i.tZ)("line",(0,p.Z)((0,f.Z)({},oo),{stroke:u.TV.outlineDefault,strokeDasharray:8})),(0,i.BX)("g",{ref:t,css:io.overage,children:[(0,i.tZ)("line",(0,p.Z)((0,f.Z)({},oo),{stroke:u.TV.accentPrimaryDefault})),(0,i.tZ)("line",(0,p.Z)((0,f.Z)({},oo),{stroke:u.TV.accentPrimaryStrongest,strokeDasharray:8}))]})]})})}var lo=(0,w.X)({container:u.l0.colWithGap(16),text:[u.l0.flex.row,u.l0.justify.spaceBetween,u.l0.align.baseline],cost:[u.l0.flex.row,u.l0.align.baseline,u.l0.fontWeight.medium,{gap:3}],builder:[u.l0.colWithGap(8),u.l0.position.relative,{"--cpu-transition-time":Xr.Normal,"--cpu-progress":1,"--ram-transition-time":Xr.Normal,"--ram-progress":1,"#rope":{opacity:0}," *":{transitionTimingFunction:"ease"},":hover, :focus-within":{" #rope":{opacity:1}}}]});function co(){var e=(0,l.useRef)(null),t=(0,Ci.b9)(ii),n=(0,Ci.b9)(vi),r=(0,Ci.Dv)(bi),o={setTransitionTime:function(t){(0,Ei.A)(e,"--cpu-transition-time",t)},setProgress:function(n){(0,Ei.A)(e,"--cpu-progress",n.toString()),t(n)}},a={setTransitionTime:function(t){(0,Ei.A)(e,"--ram-transition-time",t)},setProgress:function(t){(0,Ei.A)(e,"--ram-progress",t.toString()),n(t)}};return(0,i.BX)(c.G,{css:lo.container,children:[(0,i.BX)(c.G,{css:lo.text,children:[(0,i.tZ)(T.xv,{variant:"subheadDefault",multiline:!1,children:"Select resources"}),(0,i.BX)(c.G,{css:lo.cost,children:[(0,i.BX)(T.xv,{variant:"subheadDefault",multiline:!1,children:["$",r,"/s"]}),(0,i.tZ)(T.xv,{multiline:!1,children:"total"})]})]}),(0,i.BX)(c.G,{css:lo.builder,innerRef:e,children:[(0,i.tZ)(ao,{}),(0,i.tZ)(Xi,{setAttrs:o}),(0,i.tZ)(qi,{setAttrs:a})]})]})}var uo=n(22607);function so(){var e=(0,W.Z)(["\n  query OnDemandMachineConfigurations {\n    hostingMachineConfigurations(input: { provider: cloud_run }) {\n      __typename\n      ... on HostingMachineConfigurationsResults {\n        results {\n          ...MachineConfiguration\n        }\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return so=function(){return e},e}var fo={},po=(0,H.Ps)(so(),uo.bN);var ho=function(e){var t=e.onViewAction,n=e.onError,r=(0,Ci.Dv)(ti),o=(0,Ci.Dv)(fi),s=(0,a.Z)(l.useState([]),2),d=s[0],p=s[1],h=function(e){var t=(0,f.Z)({},fo,e);return V.a(po,t)}({onCompleted:function(e){"HostingMachineConfigurationsResults"===e.hostingMachineConfigurations.__typename?e.hostingMachineConfigurations.results&&p(e.hostingMachineConfigurations.results):n("Something went wrong")},onError:function(e){return n(e.message)}}).loading;l.useEffect((function(){ke({context:C.kO.OnDemandMachineConfiguration})}),[]);return(0,N.P5)({controlName:"flag-soft-sun",logFlagToAnalytics:!1})?(0,i.tZ)(k,{children:(0,i.BX)(c.G,{css:u.l0.colWithGap(16),children:[(0,i.BX)(c.G,{css:u.l0.colWithGap(8),children:[(0,i.tZ)(T.xv,{variant:"subheadBig",children:"Autoscale machine configuration"}),(0,i.tZ)(T.xv,{variant:"small",color:"dimmer",children:"Autoscale apps spin up enough machines to meet demand at any point in time. You are billed for the total number of compute-seconds across all machines."})]}),(0,i.tZ)(c.G,{css:u.l0.colWithGap(8),children:h?null:(0,i.tZ)(co,{})}),(0,i.BX)(c.G,{css:u.l0.colWithGap(8),children:[(0,i.tZ)(R.zx,{colorway:"primary",text:"Approve and deploy",iconRight:(0,i.tZ)(de.ArrowRight,{}),onClick:function(){var e=d.filter((function(e){var t=e.vcpu,n=e.memory;return r.toString()===t&&o.toString()===n}));if(e.length){var i=e[0],a=i.id,l=i.label;t({type:C.ap.ChangeView,payload:{view:C.kO.DeploymentOptions,data:{provider:D.r4.CloudRun,machineConfiguration:{id:a,label:l}}}})}else n("An error occurred trying to validate selected machine configuration")},loading:h}),(0,i.tZ)(T.xv,{variant:"small",color:"dimmer",children:"You will be charged each day for the resources used by your deployed app (billed by the second)."})]})]})}):null};var vo=(0,w.X)({root:[{height:"100%"},u.l0.overflow("hidden"),u.l0.position.relative],content:[u.l0.overflow("auto"),u.l0.flex.growAndShrink(1)]}),mo=function(e){var t,n=e.initialView,r=e.onViewUpdate,o=e.onError,u=e.refetch,b=e.openFile,w=e.tabsNavRef,x=e.error,S=(0,ur.Z)(),T=(0,X.hn)(),E=(0,X.Sl)(),R=(0,X.pn)(),G=(0,X.$y)(),I=void 0!==E&&void 0!==E,_=!(void 0!==R)&&!("string"===typeof T),B=G?G.provider:void 0,P=(0,N.P5)({controlName:"flag-deployment-analytics",logFlagToAnalytics:!1}),A=(t={},(0,d.Z)(t,C.kO.Intro,{fc:Or,display:!0}),(0,d.Z)(t,C.kO.ReservedVMTierSelection,{fc:Hr,display:!0}),(0,d.Z)(t,C.kO.OnDemandMachineConfiguration,{fc:ho,display:!0}),(0,d.Z)(t,C.kO.Deployment,{title:"Deployment",icon:Z.Z,fc:Tt,display:!0,tabs:Boolean(G)}),(0,d.Z)(t,C.kO.DeploymentOptions,{alias:C.kO.Deployment}),(0,d.Z)(t,C.kO.DeploymentInProgress,{alias:C.kO.Deployment}),(0,d.Z)(t,C.kO.History,{title:"History",icon:g.Z,fc:Ye,display:!0,tabs:!0}),(0,d.Z)(t,C.kO.Analytics,{title:"Analytics",icon:y.Z,fc:Mt,display:P,tabs:!0}),(0,d.Z)(t,C.kO.Logs,{title:"Logs",icon:m.Z,fc:qt,display:B!==D.r4.Static,tabs:!0}),(0,d.Z)(t,C.kO.Settings,{title:"Settings",icon:v.Z,fc:lr,display:!0,tabs:!0}),t),L=(0,a.Z)(l.useState(function(e){var t=e.initialView,n=e.views,r=e.isNewDeployment,i=e.hasHostingTier;return r?i?{view:C.kO.DeploymentOptions,data:{provider:D.r4.Gce}}:(null===t||void 0===t?void 0:t.view)===C.kO.ReservedVMTierSelection?{view:t.view}:{view:C.kO.Intro}:(0,C.Em)(t)&&t.view in n?t:{view:C.kO.Deployment}}({initialView:n,views:A,isNewDeployment:_,hasHostingTier:I})),2),M=L[0],O=L[1],F=M.view,W=l.useRef(void 0),H=function(){var e=(0,s.Z)((function(e){return(0,h.__generator)(this,(function(t){switch(r(),e.type){case C.ap.SendDeploymentLifecycleCommand:if(e.payload===D.Qc.Destroy)return O({view:C.kO.Intro}),u(),[2];O({view:C.kO.Deployment});break;case C.ap.CheckoutSuccess:O(_?{view:C.kO.DeploymentOptions,data:{provider:D.r4.Gce}}:{view:C.kO.Deployment}),u();break;case C.ap.ChangeView:W.current=M,O(e.payload);break;case C.ap.GoBack:if(W.current)return W.current.view===C.kO.DeploymentInProgress?(O({view:C.kO.Deployment}),[2]):(O(W.current),[2]);O({view:_?C.kO.Intro:C.kO.Deployment})}return[2]}))}));return function(t){return e.apply(this,arguments)}}(),V=function(e){var t=e.views,n=t[e.activeView];if((0,C.BJ)(n)){var r=t[n.alias];return!(0,C.BJ)(r)&&r||null}return n}({views:A,activeView:F})||A[C.kO.Deployment],z=V.fc,j=(0,Vr.Z)(V),q=(0,Vr.Z)(A),$=(0,Vr.Z)(H);(0,l.useEffect)((function(){null===w||void 0===w||w({getTabs:function(){var e;if(null===(e=j.current)||void 0===e?void 0:e.tabs){var t=[],n=!0,r=!1,i=void 0;try{for(var o,l=Object.entries(q.current)[Symbol.iterator]();!(n=(o=l.next()).done);n=!0){var c=(0,a.Z)(o.value,2),u=c[0],s=c[1];"display"in s&&s.display&&(0,C.Zs)(s)&&"title"in s&&t.push({label:s.title,Icon:s.icon,id:u})}}catch(d){r=!0,i=d}finally{try{n||null==l.return||l.return()}finally{if(r)throw i}}return t}return null},setTab:function(e){var t={view:e};(0,C.Em)(t)&&$.current({type:C.ap.ChangeView,payload:t})}})}),[w,j,q,$]);var Y=function(e){var t=e.views,n=e.activeView,r=[],o=t[n],l=o.tabs,c=n;if((0,C.BJ)(o)&&(c=o.alias,l=t[o.alias].tabs),!l)return null;var u=!0,s=!1,d=void 0;try{for(var f,p=Object.entries(t)[Symbol.iterator]();!(u=(f=p.next()).done);u=!0){var h=(0,a.Z)(f.value,2),v=h[0],m=h[1];(0,C.Zs)(m)&&m.display&&((0,C.BJ)(m)||r.push({key:v,label:m.title,icon:(0,i.tZ)(m.icon,{})}))}}catch(g){s=!0,d=g}finally{try{u||null==p.return||p.return()}finally{if(s)throw d}}return{tabs:r,activeIndex:r.findIndex((function(e){return e.key===c}))}}({views:A,activeView:F});return(0,i.BX)(c.G,{css:vo.root,children:[Y?(0,i.tZ)(jr,{onClick:function(e){var t={view:e.key};H({type:C.ap.ChangeView,payload:t})},tabs:Y.tabs,activeIndex:Y.activeIndex}):null,V.display?(0,i.BX)(c.G,{css:vo.content,children:[x?(0,i.tZ)(k,{children:(0,i.tZ)(U.E,{colorway:"warning",icon:(0,i.tZ)(de.Warning,{}),text:x})}):null,(0,i.tZ)(z,(0,p.Z)((0,f.Z)({},V,M),{replId:S,onViewAction:H,onError:o,openFile:b}))]}):null]})};function go(e){var t=e.initialView,n=e.onViewUpdate,r=e.openFile,o=e.tabsNavRef,s=(0,X.m8)(),d=(0,X.kW)(),f=(0,X.ev)(),p=(0,a.Z)(l.useState(null),2),h=p[0],v=p[1];if(d===M.z.Loading)return(0,i.tZ)(c.G,{css:[u.l0.center,u.l0.my(32)],children:(0,i.tZ)(se.Z,{size:16})});var m=h||f;return(0,i.tZ)(mo,{tabsNavRef:o,initialView:t,onViewUpdate:function(){h&&v(null),n()},onError:v,refetch:s,openFile:r,error:m})}var yo=n(27549);var Zo={Content:function(e){var t=e.pane.data,n=e.options.performPaneOperation,r=(0,l.useRef)(function(e){if((0,C.Em)(e)&&(0,C.D1)(e.view))return e}(t)),a=(0,l.useCallback)((function(e){return n({operation:"open",secondary:!0,pane:{type:(0,o.Dp)(e),data:e}})}),[n]),c=(0,l.useState)(null),u=c[0],s=c[1];return(0,yo.L5)((function(){if(u)return{type:"deployments",getTabs:u.getTabs,setTab:u.setTab}}),[u]),(0,i.tZ)(go,{tabsNavRef:s,initialView:r.current,onViewUpdate:function(){r.current&&(r.current=void 0,n({operation:"replace",pane:{type:"deployments"}}))},openFile:a})},Icon:function(e){var t=e.size;return(0,i.tZ)(Z.Z,{size:t})},getTitle:function(){return"Deployments"}}},42916:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(74985),i=(n(50959),n(85368)),o=n(76735),a=n(24743),l={Content:function(){return(0,r.tZ)(i.G,{style:{padding:32},children:(0,r.tZ)(a.Z,{children:"Sorry, this feature is not supported."})})},Icon:function(){return(0,r.tZ)(o.Z,{})},getTitle:function(){return"Unsupported"}}},23807:function(e,t,n){n.d(t,{R:function(){return f},b:function(){return p}});var r=n(74985),i=n(43330),o=n(45285),a=n(78728),l=n(99509),c=n(92683),u=n(10578),s=n(83505),d=n(95587),f={Content:function(e){var t=e.options,n=t.isHidden,a=t.performPaneOperation,f=(0,o.Z)(),h=f.container,v=f.fs,m=f.session,g=f.runner,y=(0,c.Dv)(u.f),Z=(0,u.Z)();return(0,s.Z)({container:h,runner:g,refreshWebView:Z}),(0,d.Z)({runner:g,refreshWebView:Z}),(0,i.x)(p,{run:function(){Z()}}),(0,r.tZ)(l.Z,{fs:v,session:m,runner:g,ref:y,isVisible:!n,openPane:function(e){a({operation:"open",pane:e})}})},Icon:function(e){var t=e.size;return(0,r.tZ)(a.Z,{size:t})},getTitle:function(){return"Webview"}},p={cmdOrCtrlKey:!0,altKey:!1,shiftKey:!1,key:"S"}},13379:function(e,t,n){n.d(t,{U:function(){return pg}});var r=n(74985),i=n(57389),o=n(2272),a=n(50959),l=n(34495),c=n(4421),u=n(84815),s=n(91821),d=n(45285),f=n(48468),p=n(30826),h=n.n(p),v=n(87978),m=n(79339),g=n(39541),y=n(85368),Z=n(61284),b=n(82568),w=n(4561),x=n(92355),k=n(80906),C=n(94716),S=n(27549),T=n(94452),E=n(1809),R=(0,a.memo)(m.Z);var G=(0,b.X)({root:[g.l0.colWithGap(8),g.l0.height("100%"),g.l0.width("100%"),g.l0.overflow("auto"),g.l0.zIndex(2),g.l0.align.center,g.l0.py(16),g.l0.px(16),g.l0.borderRadius(8),(0,i.Z)({margin:"0 auto"},"@media only screen and (min-width: ".concat(c.j.tabletMin,"px)"),g.l0.px(32))],header:[g.l0.rowWithGap(4),g.l0.height(30),g.l0.width("100%"),g.l0.align.center],markdownContainer:[g.l0.width("100%"),{"& .rendered-markdown":[g.l0.flex.column,g.l0.center],"& .rendered-markdown > *":[g.l0.maxWidth(840),g.l0.width("100%")],"& .rendered-markdown > table":g.l0.maxWidth("100%")}]});function I(e){var t=(0,d.Z)().fs,n=(0,o.Z)(function(){var e=(0,a.useRef)(!1),t=(0,a.useRef)(null);return[(0,f.Z)((function(){e.current=!0,t.current&&clearTimeout(t.current),t.current=setTimeout((function(){e.current=!1}),150)}),{type:"throttle",wait:37.5}),e]}(),2),i=n[0],c=n[1],p=(0,a.useState)(e.path),m=p[0],b=p[1],I=(0,C.Z)(m),_=(0,a.useRef)(null),D=(0,x.T)(),B=e.performPaneOperation;(0,S.L5)((function(){return{commands:[{match:T.pl,data:{label:"Open in Editor",icon:(0,r.tZ)(E.Z,{}),type:"action",run:function(){B({operation:"replace",pane:{type:"codeEditor",data:{path:m}}})}}}]}}),[B,m]);var P=e.path;(0,a.useEffect)((function(){P&&b(P)}),[P]);var A=e.isHidden,L=(0,k.p5)();(0,a.useEffect)((function(){if(!A){L.current&&(0,v.gK)(L.current.path)&&b(L.current.path);var e=h()((function(e){(0,l.Z)(e,{behavior:D?"auto":"smooth",scrollMode:"if-needed"})}),100),t=h()((function(t){if(t)if(t.path===I.current){if(!c.current){var n=_.current?function(e,t){var n=e.querySelectorAll(".rendered-markdown [data-sourcepos]");if(!(null===n||void 0===n?void 0:n.length))return null;var r=Array.from(n).reverse(),i=t.line,a=t.column,l=!0,c=!1,u=void 0;try{for(var s,d=r[Symbol.iterator]();!(l=(s=d.next()).done);l=!0){var f=s.value,p=f.dataset.sourcepos;if(!p)throw new Error("Expected data source pos on selected element");var h=(0,o.Z)(p.split("-"),2),v=h[0],m=h[1],g=(0,o.Z)(v.split(":").map(Number),2),y=g[0],Z=g[1],b=(0,o.Z)(m.split(":").map(Number),2),w=b[0],x=b[1];if(i>=y&&a>=Z&&(i<w||i===w&&a<=x))return f}}catch(k){c=!0,u=k}finally{try{l||null==d.return||d.return()}finally{if(c)throw u}}}(_.current,t.position):null;n&&e(n)}}else(0,v.gK)(t.path)&&b(t.path)}),200),n=L.subscribe(t);return function(){t.cancel(),e.cancel(),n()}}}),[L,A,D]);var U=(0,a.useState)(null),X=U[0],M=U[1];return(0,a.useEffect)((function(){if(M(null),m&&(0,v.Mb)(m))return t.watchTextFile(m,{onReady:function(e){var t=e.initialContent;M(t.toString())},onChange:function(e){var t=e.latestContent;M(t)},onMoveOrDelete:function(e){e.eventType===w.kS.Delete&&b(null)}})}),[m,t]),m?null===X?(0,r.tZ)(s.Z,{preventHighlightBorder:!0}):(0,r.BX)(y.G,{css:G.root,innerRef:i,children:[(0,r.BX)(y.G,{css:G.header,children:[(0,r.tZ)(u.Z,{}),(0,r.BX)(Z.xv,{color:"dimmer",multiline:!1,children:["Preview of ",(0,r.tZ)("a",{href:"#".concat(m),children:m})]})]}),(0,r.tZ)(y.G,{innerRef:_,css:G.markdownContainer,children:(0,r.tZ)(R,{path:m,source:X,fs:t,sourcePos:!0})})]}):(0,r.tZ)(y.G,{css:[g.l0.height("100%"),g.l0.width("100%"),g.l0.center],children:(0,r.tZ)(Z.xv,{multiline:!1,children:"No previewed file"})})}var _=n(98215),D={Content:function(e){var t=e.pane,n=e.options;return(0,r.tZ)(I,{path:t.data.path,isHidden:Boolean(n.isHidden),performPaneOperation:n.performPaneOperation})},Icon:function(e){var t=e.size;return(0,r.tZ)(_.Z,{fill:"currentColor",size:t})},getTitle:function(){return"Markdown"}},B=n(4202),P=n(92508),A=n(95085),L=n(4747),U=n(73872),X=n(49514),M=n(77511),N=n(72006),O=n(77637),F=n(92153),W=n(9348),H=n(79032);var V=(0,b.X)({wrapper:[g.l0.position.relative],basic:[g.l0.overflow("hidden"),{"& .xterm":[g.l0.p(8)]}],roundedBottomCorners:{"& .xterm":[g.l0.borderRadius(0,0,8,8)],"& .xterm-viewport":[g.l0.borderRadius(0,0,8,8)]},disabledViewportScrolling:{"& .xterm":{overflow:"hidden"},"& .xterm-scroll-area":{height:"0px !important"}},scrollbackGradient:{position:"absolute",top:0,left:0,right:0,height:100,zIndex:100,pointerEvents:"none",background:"linear-gradient(".concat(g.TV.backgroundRoot,", transparent)")}});function z(e){var t=e.output,n=e.onInput,i=e.openFile,l=e.listFiles,c=e.autoFocus,u=e.maxHeight,s=e.onResizeTerminal,d=e.growToFill,p=void 0!==d&&d,h=e.enableViewportScroll,v=void 0===h||h,m=e.roundedBottomCorners,g=void 0!==m&&m,Z=(0,o.Z)((0,W.Z)({autoFit:!1,scrollback:1e3,size:{rows:10},openFile:i,listFiles:l}),2),b=Z[0],w=Z[1],x=(0,a.useMemo)((function(){return null===b||void 0===b?void 0:b._term}),[b]),k=(0,a.useMemo)((function(){var e,t=null===x||void 0===x?void 0:x._core;return null!==(e=null===t||void 0===t?void 0:t._renderService.dimensions.css.cell)&&void 0!==e?e:{width:0,height:0}}),[x]),S=(0,a.useState)("normal"),T=S[0],E=S[1],R=(0,a.useState)(1),G=R[0],I=R[1],_=(0,a.useState)(!1),D=_[0],B=_[1],P=(0,C.Z)(G),A=(0,C.Z)(D),L=(0,C.Z)(T),U=(0,C.Z)({cols:0,rows:0}),X=(0,C.Z)(0),M=(0,C.Z)(""),N=(0,a.useCallback)((function(){if(b){var e=b.getSize();U.current.cols===e.cols&&U.current.rows===e.rows||s(e)}}),[b,s,U]),O=(0,f.Z)((function(e){var t=e.widthChanged;b&&t&&(b.fit(),N())}),{type:"debounce",wait:200});(0,a.useLayoutEffect)((function(){b&&b.fit()}),[b]),(0,a.useLayoutEffect)((function(){c&&b&&b.focus()}),[b,c]),(0,a.useEffect)((function(){if(b){var e=b.onData((function(e){n(e)}));return function(){e.dispose()}}}),[b,n]),(0,a.useEffect)((function(){if(x){var e=x.buffer.onBufferChange((function(e){E(e.type),"alternate"===e.type&&B(!1)}));return function(){e.dispose()}}}),[x]),(0,a.useEffect)((function(){var e=function(){if(x&&"alternate"!==L.current){var e=x.buffer.active.cursorY;e>P.current&&I(e),x.buffer.active.viewportY>0&&!1===A.current&&B(!0)}};if(x){var t=[x.onLineFeed(e),x.onCursorMove(e)];return function(){t.forEach((function(e){return e.dispose()}))}}}),[x,p,P,A,L]),(0,a.useEffect)((function(){if(x&&b&&u){var e=Math.floor(u/k.height)-1;if(b.getSize().rows!==e&&(x.resize(x.cols,e),N()),p||"alternate"===L.current)I(e);else{var t=function(e){for(var t=1,n=e.buffer.active._buffer.lines._array,r=e.buffer.active.length;r-- >0;){var i=n[r];if(i){for(var o=!1,a=0;a<e.cols;a++)if(0!==i.hasContent(a)){o=!0;break}if(o){t=r+1;break}}}return t}(x);e<t?I(e):t<e&&I(t)}}}),[x,b,u,p,s,I,k,N,L]),(0,a.useEffect)((function(){if(t&&b&&x)if((0,H.FB)(t.substring(0,X.current))!==M.current)b.write("\x1bc"+t,(function(){X.current=t.length,M.current=(0,H.FB)(t)}));else{var e=t.substring(X.current);b.write(e,(function(){M.current=(0,H.FB)(t),X.current=t.length}))}}),[b,x,t,X,M]);var F=(G+1)*k.height+16;return(0,r.BX)(y.G,{innerRef:O,css:V.wrapper,children:[D?(0,r.tZ)(y.G,{css:V.scrollbackGradient}):null,(0,r.tZ)(y.G,{css:[V.basic,g&&V.roundedBottomCorners,!v&&V.disabledViewportScrolling],style:{height:F,maxHeight:u},innerRef:w})]})}var j=n(10841),q=n(54873),$=n(63128),Y=n(96351),K=n(26992),Q=n(76735),J=n(63837),ee=n(66539),te=n(56412),ne=n(63064),re=n(67283),ie=n(78973),oe=n(84358),ae=n(60583),le=n(27691),ce=n(87076),ue=n(81598),se=n(69071),de=n(68973),fe=n(32945),pe=n(52364),he=n(47880),ve=n(53028),me=(0,de.$)(["terminalMinHeight","terminalMaxHeight","terminalBackgroundColor","previewHeight"]),ge=me.cssVars,ye=me.styleTokens,Ze=(0,b.X)({emptyStateWrapper:[g.l0.p(8),g.l0.rowWithGap(8),g.l0.align.center,{"& button":g.l0.width(re.al[j.Ah.IDLE]),"& button span":g.l0.display.block}],outputsListWrapper:[g.l0.height("100%")],outputsListNoScroll:[g.l0.height("100%"),g.l0.overflow("hidden")],outputsListScroll:[g.l0.height("100%"),g.l0.overflowY("scroll")],outputsListSnapToBottom:{scrollSnapType:"y proximity"},scrollSnap:[g.l0.height(1),{pointerEvents:"none",scrollSnapAlign:"end"}],outputBlock:[g.l0.p(4)],outputBlockFullscreen:[g.l0.p(4),g.l0.coverContainer,g.l0.zIndex(10),{background:g.TV.backgroundDefault}],outputBlockWrapper:[g.l0.borderRadius(8),g.l0.border(),g.l0.height("100%")],outputBlockMetadataWrapper:[g.l0.py(4),g.l0.px(8),g.l0.flex.row,g.l0.align.center,g.l0.justify.spaceBetween,g.l0.height(32)],outputBlockMetadataWrapperLeft:[g.l0.rowWithGap(8),g.l0.align.center],outputBlockMetadataWrapperRight:[g.l0.rowWithGap(8),g.l0.align.center],outputBlockTerminalWrapper:[g.l0.flex.growAndShrink(1),g.l0.minHeight(ye.terminalMinHeight),g.l0.borderRadius(0,0,8,8),{backgroundColor:ye.terminalBackgroundColor}],outputBlockTerminalWrapperDone:{opacity:.66},terminalLoadingWrapper:[g.l0.p(8),g.l0.overflow("hidden"),g.l0.height(ye.previewHeight)],terminalLoadingLine:[g.l0.borderRadius(2),le.p.backgroundPulse(),g.l0.height(16),g.l0.mb(4)]});function be(e,t){var n=t-e;return n<1e3?"".concat(Math.floor(n),"ms"):n<6e4?"".concat(Math.floor(n/1e3),"s"):"".concat(Math.floor(n/6e4),"m")}function we(e){var t=e.parsedError,n=e.openPane,i=(0,pe.ql)();return(0,r.tZ)(ce.h,{alt:"Debug with Ghostwriter",onClick:function(){t&&(n({type:"ghostwriterChat"}),i({chatMessage:{type:"debugger",errorType:"console",text:(0,ve.Vh)(t,"debugger")}}))},children:(0,r.tZ)(he.Z,{})})}function xe(e){var t,n=e.isDone,i=e.hasError,o=e.errorTooltipText,a=e.executionPillText,l=e.circleTooltipText,c=void 0===l?"Running...":l,u=e.circleColor,s=void 0===u?g.TV.accentPositiveDefault:u,d=e.duration,f=e.time,p=e.isFullscreen,h=e.onRequestFullscreen,v=e.hasAccessToChatDebugger,m=e.parsedError,b=e.openPane,w=(t=f,(0,te.Z)(new Date(t),"h:mm:ss bbb, MMM dd, yyyy")),x=v&&i&&Boolean(m);return(0,r.BX)(y.G,{css:Ze.outputBlockMetadataWrapper,children:[(0,r.BX)(y.G,{css:Ze.outputBlockMetadataWrapperLeft,children:[n?(0,r.tZ)(ee.u,{tooltip:o,children:i?(0,r.tZ)(Q.Z,{}):(0,r.tZ)(J.Z,{})}):(0,r.tZ)(ee.u,{tooltip:c,children:(0,r.tZ)(K.Z,{color:s})}),x?(0,r.tZ)(we,{parsedError:m,openPane:b}):null,(0,r.tZ)(Y.D,{color:"grey",text:a})]}),(0,r.BX)(y.G,{css:Ze.outputBlockMetadataWrapperRight,children:[(0,r.BX)(Z.xv,{color:"dimmer",variant:"small",children:[d?"".concat(d," on "):"",w]}),(0,r.tZ)(ce.h,{alt:p?"Exit fullscreen":"Enter fullscreen",onClick:function(){h(!p)},children:p?(0,r.tZ)(ue.Z,{}):(0,r.tZ)(se.Z,{})})]})]})}function ke(e){var t,n=e.startTime,i=e.endTime,o=e.localStartTime,l=e.localEndTime,c=e.executionMode,u=e.isDone,s=e.error,d=e.hasError,f=(0,O.Z)(e,["startTime","endTime","localStartTime","localEndTime","executionMode","isDone","error","hasError"]),p=(0,a.useState)((function(){return Date.now()})),h=p[0],v=p[1],m=(0,ne.Z)();return(0,a.useEffect)((function(){if(m.current&&!u){var e=setInterval((function(){v(Date.now())}),100);return function(){clearInterval(e)}}}),[u,m]),n&&i?t=be(n,i):!u&&o?t=be(o,h):u&&l&&(t=be(o,l)),(0,r.tZ)(xe,(0,N.Z)({isDone:u,hasError:d,errorTooltipText:s,executionPillText:null!==c&&void 0!==c?c:"unknown",duration:t,time:null!==n&&void 0!==n?n:o},f))}function Ce(e){var t,n=e.errorTooltipText,i=e.executionPillText,o=e.localStartTime,l=e.localEndTime,c=e.isDone,u=e.hasError,s=e.isFullscreen,d=e.onRequestFullscreen,f=e.circleColor,p=e.circleTooltipText,h=(0,O.Z)(e,["errorTooltipText","executionPillText","localStartTime","localEndTime","isDone","hasError","isFullscreen","onRequestFullscreen","circleColor","circleTooltipText"]),v=(0,a.useState)((function(){return Date.now()})),m=v[0],g=v[1],y=(0,ne.Z)();return(0,a.useEffect)((function(){if(y.current&&!c){var e=setInterval((function(){g(Date.now())}),100);return function(){clearInterval(e)}}}),[c,y]),l?t=be(o,l):!c&&o&&(t=be(o,m)),(0,r.tZ)(xe,(0,N.Z)({isDone:c,hasError:u,errorTooltipText:n,executionPillText:i,duration:t,time:o,isFullscreen:s,onRequestFullscreen:d,circleColor:f,circleTooltipText:p},h))}function Se(e){var t=e.targetHeight,n=Math.min(Math.floor((t-8)/20),4),o=(0,a.useMemo)((function(){return Array.from({length:n}).map((function(e,t){return(0,r.tZ)(y.G,{css:[Ze.terminalLoadingLine,g.l0.width(100*Math.random()+"%")]},t)}))}),[n]);return(0,r.tZ)(y.G,{css:Ze.terminalLoadingWrapper,style:(0,i.Z)({},ge.previewHeight,t+"px"),children:o})}function Te(e){var t=e.type,n=e.output,o=e.error,l=e.startTime,c=e.localStartTime,u=e.localEndTime,s=e.endTime,d=e.isDone,p=e.onInput,h=e.openFile,v=e.listFiles,m=e.autoFocus,Z=e.rootRef,b=e.maxHeight,w=e.isFullscreen,x=e.onRequestFullscreen,k=e.openPane,C=e.onResizeTerminal,S=(0,O.Z)(e,["type","output","error","startTime","localStartTime","localEndTime","endTime","isDone","onInput","openFile","listFiles","autoFocus","rootRef","maxHeight","isFullscreen","onRequestFullscreen","openPane","onResizeTerminal"]),T=(0,a.useRef)(null),E=(0,a.useState)(0),R=E[0],G=E[1],I=(0,a.useState)(!0),_=I[0],D=I[1],B=(0,a.useState)(!1),P=B[0],A=B[1],L=(0,ae.f)(),U=(0,oe.Z)(w||_,P?6e4:500),X=(0,f.Z)((function(e){var t=e.height;w||G(t)}),{type:"debounce",wait:200});(0,a.useEffect)((function(){if(Z.current){var e,t=Z.current,n=function(){A(!0),e&&clearTimeout(e),e=setTimeout((function(){A(!1)}),500)};return t.addEventListener("scroll",n),function(){clearInterval(e),t.removeEventListener("scroll",n)}}}),[Z]),(0,a.useEffect)((function(){if(T.current&&Z.current)return(0,ie.j)(T.current,(function(){return D(!0),function(){D(!1)}}),{root:Z.current,threshold:0})}),[Z,T]);var M=t===j.kH.EXECUTION&&0!==S.exitCode||void 0!==o,F=(0,fe.l)({output:n,hasError:M}),W=F.hasAccessToChatDebugger,H=F.parsedError,V=(0,r.BX)(y.G,{children:["Unknown block type: ",t]});switch(t){case j.kH.EXECUTION:V=(0,r.tZ)(ke,(0,N.Z)({startTime:l,localStartTime:c,endTime:s,localEndTime:u,isDone:d,isFullscreen:w,onRequestFullscreen:x,error:o,hasError:M,hasAccessToChatDebugger:W,parsedError:H,openPane:k},S));break;case j.kH.DEBUGGER:case j.kH.PACKAGER:var q=t===j.kH.PACKAGER?"packager":"debugger",Y=t===j.kH.PACKAGER?"Packager Error":"Debugger Error",K=g.TV.accentPositiveDefault,Q="Running...";if(t===j.kH.DEBUGGER){var J=S.debugState;K="paused"===J?g.TV.yellowDefault:g.TV.accentPositiveDefault,Q="paused"===J?"Paused":"Running..."}V=(0,r.tZ)(Ce,{errorTooltipText:Y,executionPillText:q,localStartTime:c,localEndTime:u,isDone:d,hasError:void 0!==o,isFullscreen:w,onRequestFullscreen:x,circleColor:K,circleTooltipText:Q,hasAccessToChatDebugger:W,parsedError:H,openPane:k})}var ee,te=w?(0,r.tZ)(y.G,{style:{height:R+32+"px"}}):null;return(0,r.BX)(y.G,{css:Ze.outputBlock,innerRef:T,children:[te,(0,r.tZ)(y.G,{css:w&&Ze.outputBlockFullscreen,children:(0,r.BX)($.Tg,{elevated:!0,css:Ze.outputBlockWrapper,children:[V,(0,r.tZ)(y.G,{css:[Ze.outputBlockTerminalWrapper,d&&Ze.outputBlockTerminalWrapperDone],style:(ee={},(0,i.Z)(ee,ge.terminalMinHeight,R+"px"),(0,i.Z)(ee,ge.terminalMaxHeight,w?"none":b+"px"),(0,i.Z)(ee,ge.terminalBackgroundColor,null===L||void 0===L?void 0:L.background),ee),children:!d||U?(0,r.tZ)(y.G,{innerRef:X,children:(0,r.tZ)(z,{output:n,onInput:p,openFile:h,listFiles:v,maxHeight:b,growToFill:w,roundedBottomCorners:!0,enableViewportScroll:w,onResizeTerminal:C,autoFocus:m})}):(0,r.tZ)(Se,{targetHeight:R})})]})})]})}function Ee(){var e=(0,d.Z)().runner,t=(0,a.useState)((function(){return e.getRunState()})),n=t[0],i=t[1];return(0,a.useEffect)((function(){var t=e.onStateChanged((function(e){i(e)}));return function(){return t()}}),[e]),n===j.Ah.OFFLINE?(0,r.tZ)(y.G,{css:Ze.emptyStateWrapper,children:(0,r.tZ)(y.G,{children:"The Repl is booting..."})}):(0,r.BX)(y.G,{css:Ze.emptyStateWrapper,children:[(0,r.tZ)(y.G,{children:"Results of your code will appear here when you"}),(0,r.tZ)(re.ZP,{runner:e}),(0,r.tZ)(y.G,{children:"the project."})]})}function Re(e){var t,n=e.performPaneOperation,i=e.isActive,o=function(e){n({operation:"open",pane:e})},l=(0,d.Z)(),c=l.runner,u=l.fs,s=(0,a.useState)([]),p=s[0],h=s[1],v=(0,a.useState)(0),m=v[0],g=v[1],Z=(0,a.useRef)(null),b=(0,a.useState)(null),w=b[0],x=b[1];if("outputs"!==c.mode)throw new Error("outputs pane actions are only supported with outputs runner");var k=(0,f.Z)((function(e){var t=e.height;g(t)}),{type:"throttle",wait:200}),C=(0,a.useMemo)((function(){return[{type:"action",label:"Clear outputs history",icon:(0,r.tZ)(q.Z,{}),run:function(){return c.clearBlockHistory()}}]}),[c]);(0,S.L5)((function(){return{actions:C}}),[C]);var T=(0,a.useCallback)((function(e){n({operation:"open",secondary:!0,pane:{type:(0,P.Dp)(e),data:e}})}),[n]);(0,a.useEffect)((function(){h(c.getOutputBlocks())}),[c]),(0,a.useEffect)((function(){var e=c.onAllBlocksChanged((function(e){h(e)})),t=c.onBlockChanged((function(e){var t=!p.find((function(t){return t.id===e.id}));t&&Z.current&&Z.current.scrollTo(0,Z.current.scrollHeight),t&&(0===p.length?x(e.id):x(null)),h((0,F.ZP)((function(t){var n=t.findIndex((function(t){return t.id===e.id}));n>=0?t[n]=e:t.push(e)})))}));return function(){t(),e()}}),[c,p]);var E=m-32-8,R=Math.floor(.8*m)-32-8,G=null!==w,I=!0===(null===(t=p[p.length-1])||void 0===t?void 0:t.isDone),_=!G&&!I;return(0,r.tZ)(y.G,{css:Ze.outputsListWrapper,innerRef:k,children:0===p.length?(0,r.tZ)(Ee,{}):(0,r.BX)(y.G,{css:[G?Ze.outputsListNoScroll:Ze.outputsListScroll,_&&Ze.outputsListSnapToBottom],innerRef:Z,children:[p.map((function(e,t){var n=t===p.length-1,a=w===e.id;return(0,r.tZ)(Te,(0,N.Z)({rootRef:Z,isFullscreen:a,onRequestFullscreen:function(t){t?x(e.id):a&&x(null)},maxHeight:a?E:R,onInput:c.sendInput,openFile:T,listFiles:u.listFiles,openPane:o,onResizeTerminal:function(t){e.isDone||e.type!==j.kH.EXECUTION||c.resizeTerminalForBlock(e.id,t)},autoFocus:i&&n},e),e.id)})),_?(0,r.tZ)(y.G,{css:Ze.scrollSnap}):null]})})}var Ge={Content:function(e){var t=e.options,n=(0,M.T3)();return"outputs"===(0,d.Z)().runner.mode&&!n?(0,r.tZ)(Re,{isActive:t.isActive,performPaneOperation:t.performPaneOperation}):(0,r.tZ)(Ie,{isActive:t.isActive,performPaneOperation:t.performPaneOperation})},Icon:function(e){var t=e.size;return(0,r.tZ)(L.Z,{size:t})},getTitle:function(){return"Console"}};function Ie(e){var t=e.isActive,n=e.performPaneOperation,i=(0,d.Z)(),o=i.runner,l=i.packager,c=i.container,u=i.debuggest,s=i.fs,f=a.useRef(null),p=(0,U.Z)(u.mainClient),h=(0,X.K)();a.useEffect((function(){if(p)return p.onOutput((function(e){f.current&&f.current.write(e)}))}),[p]);var v=(0,M.T3)();a.useEffect((function(){if(!v)return o.onLocalRun((function(){var e,n;(null===(e=f.current)||void 0===e||e.clear(),t)&&(null===(n=f.current)||void 0===n||n.focus())}))}),[v,t,o]);var m=(0,S.Wk)();(0,S.L5)((function(){return{type:"runnerOutput",clear:function(){var e;return null===(e=f.current)||void 0===e?void 0:e.clear()},write:function(e){var t;return null===(t=f.current)||void 0===t?void 0:t.write(e)}}}),[f]);var g=a.useCallback((function(e){n({operation:"open",secondary:!0,pane:{type:(0,P.Dp)(e),data:e}})}),[n]);return"html"===o.mode?null:(0,r.tZ)(A.Z,{tracker:h,runner:o,debugClient:p,packager:l,ref:f,onBootStatus:c.client().onBootStatus,openPane:function(e){n({operation:"open",pane:e})},focusOnLoad:t&&!v,focusRef:m,openFile:g,listFiles:s.listFiles})}var _e=n(56964),De=n(13548),Be={Content:function(){return(0,r.tZ)(Pe,{})},Icon:function(e){var t=e.size;return(0,r.tZ)(De.Z,{size:t})},getTitle:function(){return"Secrets"}};function Pe(){var e=(0,d.Z)().fs,t=(0,d.Z)().runner;return(0,r.tZ)(_e.ZP,{readRawEnv:function(){return e.readFile(".env")},writeRawEnv:function(t){return e.writeFile(".env",t)},getRunState:t.getRunState})}var Ae=n(88541),Le=n(65911),Ue=n(13233),Xe=n(48330),Me=n(36443),Ne=n(94045),Oe=n(62755),Fe=n(31854),We=n(46688),He=n(92683);var Ve,ze=n(32104),je=n(45510),qe=n(57913),$e=n(63740);!function(e){e.INSTALL="Install",e.INSTALLED="Installed",e.REMOVE="Remove",e.ERROR="Failed to Install"}(Ve||(Ve={}));var Ye=(0,b.X)({self:[g.l0.p(8),g.l0.borderRadius(8),g.l0.width("100%")],header:[g.l0.flex.row,g.l0.justify.spaceBetween],description:[g.l0.colWithGap(16),g.l0.mt(8)]});function Ke(e){var t=e.onActionClick,n=e.isAlreadyInstalled,i=e.isPackagerRunning,o=e.isIconLoading,l=e.statusMessage,c=e.itemName,u=e.itemDescription,s=e.itemVersion,d=e.itemHomepageURL,f=e.itemLicense,p=e.itemAuthor,h=e.itemDependencies,v=e.htmlItem,m=(0,a.useState)(!1),g=m[0],b=m[1],w=d||f||p||h&&h.length;return(0,r.BX)($.Tg,{css:Ye.self,elevated:!0,children:[(0,r.BX)(y.G,{css:Ye.header,children:[(0,r.tZ)(Z.h4,{variant:"subheadDefault",level:3,children:c}),w?(0,r.tZ)(ce.h,{alt:"Show more about package",tooltipHidden:!0,onClick:function(){return b((function(e){return!e}))},children:(0,r.tZ)(qe.Z,{rotate:g?90:0})}):null]}),(0,r.BX)(y.G,{css:Ye.description,children:[(0,r.tZ)(nt,{title:"Version ".concat(s),value:u||"This package has no description.",showMore:g}),d&&g?(0,r.tZ)(nt,{title:"Website",value:(0,r.tZ)("a",{href:d,rel:"noreferrer noopener",target:"_blank",children:d}),showMore:g}):null,f&&g?(0,r.tZ)(nt,{title:"License",value:f,showMore:g}):null,p&&g?(0,r.tZ)(nt,{title:"Author",value:p,showMore:g}):null,h&&h.length&&g?(0,r.tZ)(nt,{title:"Dependencies",value:(0,r.tZ)("ul",{css:{listStyle:"none"},children:null===h||void 0===h?void 0:h.map((function(e){return(0,r.tZ)("li",{children:e},e||"")}))}),showMore:g}):null,(0,r.tZ)(je.zx,(0,N.Z)({iconLeft:(0,r.tZ)(rt,{isAlreadyInstalled:n,isPackagerRunning:i,isIconLoading:o,htmlItem:!!v}),text:l,onClick:function(){return t()},disabled:i&&!o,loading:o},et(l)))]})]})}var Qe=(0,b.X)({self:[Ye.self,le.p.backgroundPulse(),g.l0.height(128)]});function Je(){return(0,r.tZ)(r.HY,{children:new Array(3).fill(0).map((function(e,t){return(0,r.tZ)($.Tg,{css:Qe.self,elevated:!0},"itemDetailSkeleton".concat(t))}))})}function et(e){switch(e){case Ve.REMOVE:return{colorway:"negative",outlined:!0};case Ve.INSTALLED:return{colorway:"positive",outlined:!0};default:return{}}}var tt=(0,b.X)({self:[g.l0.colWithGap(2)],title:[g.l0.color.foregroundDimmer]});function nt(e){var t=e.title,n=e.value,i=e.showMore;return(0,r.BX)(y.G,{css:tt.self,children:[(0,r.tZ)(Z.xv,{css:tt.title,multiline:!1,children:t}),n?(0,r.tZ)(Z.xv,{maxLines:i?void 0:2,children:n}):null]})}function rt(e){var t=e.isAlreadyInstalled,n=e.isIconLoading,i=e.htmlItem;return n?(0,r.tZ)(ze.Z,{}):t?i?(0,r.tZ)(J.Z,{}):(0,r.tZ)(q.Z,{}):(0,r.tZ)($e.Z,{})}var it,ot=n(57135),at=n(4405),lt=n(96583),ct=n(50968),ut=n(625),st=n(91398),dt=(0,st.cn)({replId:"",packageManagers:{}});!function(e){e.Installing="Installing",e.Uninstalling="Uninstalling",e.Idle="Idle"}(it||(it={}));var ft="index.html";function pt(e,t){return t.some((function(t){var n,r;return(null===(n=t.name)||void 0===n?void 0:n.toLowerCase())===(null===(r=e.name)||void 0===r?void 0:r.toLowerCase())}))}function ht(e){var t=(0,o.Z)((0,He.KO)(dt),2),n=t[0],r=t[1],l=(0,d.Z)(),c=l.fs,u=l.packager;return(0,a.useEffect)((function(){if((null===e||void 0===e?void 0:e.id)&&!n.packageManagers[e.id]){var t="html"===e.id?function(e){var t=(0,ct.u)(it.Idle),n=(0,ct.u)(!1),r=(0,ct.u)([]);function i(){return(i=(0,ot.Z)((function(){return(0,lt.__generator)(this,(function(e){switch(e.label){case 0:return n.current=!0,[4,u()];case 1:return e.sent(),n.current=!1,[2]}}))}))).apply(this,arguments)}function o(){return o=(0,ot.Z)((function(r){return(0,lt.__generator)(this,(function(i){return[2,new Promise(function(){var i=(0,ot.Z)((function(i){var o;return(0,lt.__generator)(this,(function(a){switch(a.label){case 0:return n.current?[2]:(n.current=!0,t.current=it.Installing,[4,e.stat(ft)]);case 1:return a.sent().exists?(o=e.watchTextFile(ft,{onReady:function(a){var l=a.initialContent,c=a.writeChange,s='<script src="'.concat(r.sourceCodeURL,'"><\/script>\n'),d=l,f=d.indexOf("<script");-1===f&&(f=d.indexOf("</body>")),c({from:f,insert:s}),e.flush().then((0,ot.Z)((function(){return(0,lt.__generator)(this,(function(e){switch(e.label){case 0:return[4,u()];case 1:return e.sent(),i(),[2]}}))}))).catch((function(){i()})).finally((function(){o(),t.current=it.Idle,n.current=!1}))},onError:function(){o(),i(),t.current=it.Idle,n.current=!1}}),[2]):[2,i()]}}))}));return function(e){return i.apply(this,arguments)}}())]}))})),o.apply(this,arguments)}function a(){return a=(0,ot.Z)((function(r){return(0,lt.__generator)(this,(function(i){return[2,new Promise(function(){var i=(0,ot.Z)((function(i){var o;return(0,lt.__generator)(this,(function(a){switch(a.label){case 0:return n.current?[2]:(n.current=!0,t.current=it.Uninstalling,[4,e.stat(ft)]);case 1:return a.sent().exists?(o=e.watchTextFile(ft,{onReady:function(a){var l=a.initialContent,c=a.writeChange,s=l,d=0,f=!0,p=!1,h=void 0;try{for(var v,m=s.split("\n")[Symbol.iterator]();!(f=(v=m.next()).done);f=!0){var g,y=v.value;if(g=y.match(/^\s*<script src="https:\/\/cdnjs.cloudflare.com\/ajax\/libs\/(.+)\/(.+)\/(.+).js"><\/script>$/)){var Z=g[1];r.name===Z&&c({from:d,to:d+y.length+1,insert:""})}d+=y.length+1}}catch(b){p=!0,h=b}finally{try{f||null==m.return||m.return()}finally{if(p)throw h}}e.flush().then((0,ot.Z)((function(){return(0,lt.__generator)(this,(function(e){switch(e.label){case 0:return[4,u()];case 1:return e.sent(),i(),[2]}}))}))).catch((function(){i()})).finally((function(){o(),t.current=it.Idle,n.current=!1}))},onError:function(){o(),i(),t.current=it.Idle,n.current=!1}}),[2]):[2,i()]}}))}));return function(e){return i.apply(this,arguments)}}())]}))})),a.apply(this,arguments)}function l(){return(l=(0,ot.Z)((function(e){return(0,lt.__generator)(this,(function(t){switch(t.label){case 0:return[4,fetch("/data/cdnjs/search/".concat(encodeURIComponent(e)),{credentials:"same-origin",headers:{"Content-Type":"application/json",Accept:"application/json"}})];case 1:return[4,t.sent().json()];case 2:return[2,t.sent().map((function(e){return{name:e.name,version:e.version,description:e.description,homepageURL:e.link,sourceCodeURL:e.include}}))]}}))}))).apply(this,arguments)}function c(){return(c=(0,ot.Z)((function(e){var t,n;return(0,lt.__generator)(this,(function(r){switch(r.label){case 0:return[4,fetch("/data/cdnjs/info/".concat(encodeURIComponent(e)),{credentials:"same-origin",headers:{"Content-Type":"application/json",Accept:"application/json"}})];case 1:t=r.sent(),r.label=2;case 2:return r.trys.push([2,4,,5]),[4,t.json()];case 3:return(n=r.sent())?[2,{name:n.name,version:n.version,description:n.description,homepageURL:n.link,sourceCodeURL:n.include}]:[3,5];case 4:return r.sent(),[2,void 0];case 5:return[2]}}))}))).apply(this,arguments)}function u(){return s.apply(this,arguments)}function s(){return(s=(0,ot.Z)((function(){var e;return(0,lt.__generator)(this,(function(t){switch(t.label){case 0:return[4,d()];case 1:return(e=t.sent()).error?r.current=[]:e.packages&&(r.current=e.packages),[2]}}))}))).apply(this,arguments)}function d(){return f.apply(this,arguments)}function f(){return f=(0,ot.Z)((function(){return(0,lt.__generator)(this,(function(t){return[2,new Promise(function(){var t=(0,ot.Z)((function(t){var n,r;return(0,lt.__generator)(this,(function(i){switch(i.label){case 0:return[4,e.stat(ft)];case 1:return i.sent().exists?(n=[],r=e.watchTextFile(ft,{onReady:function(e){var i=e.initialContent,o=!0,a=!1,l=void 0;try{for(var c,u=i.split("\n")[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var s;if(s=c.value.match(/^\s*<script src="https:\/\/cdnjs\.cloudflare\.com\/ajax\/libs\/(.+)\/(.+)\/(.+).js"><\/script>$/)){var d=s[1],f=s[2];n.push({name:d,version:f})}}}catch(p){a=!0,l=p}finally{try{o||null==u.return||u.return()}finally{if(a)throw l}}r(),t({packages:n,error:null})},onError:function(e){r(),t({packages:null,error:e.message})}}),[2]):(t({packages:[],error:null}),[2])}}))}));return function(e){return t.apply(this,arguments)}}())]}))})),f.apply(this,arguments)}return{initialize:function(){return i.apply(this,arguments)},install:function(e){return o.apply(this,arguments)},uninstall:function(e){return a.apply(this,arguments)},search:function(e){return l.apply(this,arguments)},installedPackages:r,isInstalled:function(e){return r.current.some((function(t){var n,r;return(null===(n=t.name)||void 0===n?void 0:n.toLowerCase())===(null===(r=e.name)||void 0===r?void 0:r.toLowerCase())}))},fetchPackageInfo:function(e){return c.apply(this,arguments)},isRunning:n,status:t}}(c):function(e,t){var n=(0,ct.u)(it.Idle),r=(0,ct.u)(!1),i=(0,ct.u)([]);function o(){return(o=(0,ot.Z)((function(){var n;return(0,lt.__generator)(this,(function(o){switch(o.label){case 0:return r.current=!0,[4,e.listSpecfile(t)];case 1:return(n=o.sent()).error?i.current=[]:n.packages&&(i.current=n.packages),r.current=!1,[2]}}))}))).apply(this,arguments)}function a(){return(a=(0,ot.Z)((function(n){return(0,lt.__generator)(this,(function(r){return[2,e.searchPackages(n,t)]}))}))).apply(this,arguments)}function l(){return l=(0,ot.Z)((function(o){var a,l,c;return(0,lt.__generator)(this,(function(u){switch(u.label){case 0:if(r.current)return[2];if((0,ut.j)(ut.U3.PACKAGE_MANAGER_USED,{action:"installed",packageId:o.name}),!o.name)throw new Error("Package has no name");return pt(o,i.current)?[2]:(r.current=!0,n.current=it.Installing,[4,e.addPackages([o],t)]);case 1:return u.sent(),[4,e.listSpecfile(t)];case 2:return a=u.sent(),l=a.packages,c=a.error,n.current=it.Idle,l&&(i.current=l),c&&(i.current=[]),r.current=!1,[2]}}))})),l.apply(this,arguments)}function c(){return c=(0,ot.Z)((function(o){var a,l,c;return(0,lt.__generator)(this,(function(u){switch(u.label){case 0:if(r.current)return[2];if(!o.name)throw new Error("Package has no name");return pt(o,i.current)?((0,ut.j)(ut.U3.PACKAGE_MANAGER_USED,{action:"removed",packageId:o.name}),r.current=!0,n.current=it.Uninstalling,[4,e.removePackages([o.name],t)]):[2];case 1:return u.sent(),[4,e.listSpecfile(t)];case 2:return a=u.sent(),l=a.packages,c=a.error,n.current=it.Idle,l&&(i.current=l),c&&(i.current=[]),r.current=!1,[2]}}))})),c.apply(this,arguments)}function u(){return(u=(0,ot.Z)((function(n){return(0,lt.__generator)(this,(function(r){switch(r.label){case 0:return[4,e.fetchPackageInfo(n,t)];case 1:return[2,r.sent()]}}))}))).apply(this,arguments)}return{initialize:function(){return o.apply(this,arguments)},install:function(e){return l.apply(this,arguments)},uninstall:function(e){return c.apply(this,arguments)},search:function(e){return a.apply(this,arguments)},installedPackages:i,isInstalled:function(e){return pt(e,i.current)},fetchPackageInfo:function(e){return u.apply(this,arguments)},isRunning:r,status:n}}(u,e.id);r({replId:n.replId,packageManagers:(0,at.Z)((0,N.Z)({},n.packageManagers),(0,i.Z)({},e.id,t))})}}),[c,n,null===e||void 0===e?void 0:e.id,u,r]),e&&n.packageManagers[e.id]||null}var vt=(0,b.X)({self:[g.l0.color.foregroundDefault,g.l0.colWithGap(16)],installedHeader:[g.l0.fontSize(g.TV.fontSizeSubheadDefault)],searchUIOuter:[g.l0.flex.row,g.l0.align.center],searchUIInner:[g.l0.flex.grow(1),g.l0.pr(8)],searchResult:[g.l0.flex.column,{gap:g.TV.space8,listStyle:"none",webkitOverflowScrolling:"touch"}],packagerSection:[g.l0.flex.row,g.l0.align.center],packagerSectionExpandHandle:[g.l0.pr(8),{cursor:"pointer",userSelect:"none"}]}),mt=n(43312),gt={fadeIn:{animation:"".concat((0,mt.F4)("from{opacity:0}to{opacity:1}")," 100ms forwards ease-in-out alternate")}};function yt(e){var t=e.loading,n=e.children;return(0,r.tZ)(r.HY,{children:(0,r.tZ)("ul",{css:[vt.searchResult,gt.fadeIn],children:t?(0,r.tZ)(Je,{}):n},t?"packagerLoading":"packagerLoaded")})}var Zt=n(80336),bt=(0,b.X)({self:[g.l0.p(8),g.l0.borderRadius(8),g.l0.colWithGap(16)],header:[g.l0.flex.row,g.l0.align.center,g.l0.justify.spaceBetween],headerTitle:[g.l0.rowWithGap(4),g.l0.align.center]});function wt(e){var t=e.title,n=e.children,i=e.onClose,o=void 0===i?function(){}:i,l=(0,a.useState)(!0),c=l[0],u=l[1];return(0,r.BX)($.Tg,{css:bt.self,elevated:!0,children:[(0,r.BX)(y.G,{css:bt.header,children:[(0,r.BX)(y.G,{css:bt.headerTitle,children:[(0,r.tZ)(Z.h4,{variant:"subheadDefault",level:2,children:t}),(0,r.tZ)(ce.h,{alt:c?"Minimize tip information":"Expand tip information",tooltipHidden:!0,onClick:function(){return u((function(e){return!e}))},children:(0,r.tZ)(qe.Z,{rotate:c?90:0})})]}),(0,r.tZ)(ce.h,{alt:"Dismiss tip",tooltipHidden:!0,onClick:o,children:(0,r.tZ)(Zt.Z,{})})]}),c?(0,r.tZ)(y.G,{children:n}):null]})}var xt=n(18171),kt=n(33064),Ct=(0,b.X)({header:[g.l0.fontSize(g.TV.fontSizeSubheadDefault),g.l0.flex.row,g.l0.align.center,g.l0.justify.spaceBetween,{textTransform:"capitalize"}],headerLeft:[g.l0.rowWithGap(8),g.l0.align.center],headerRight:[g.l0.rowWithGap(8)],loading:[g.l0.height(22),g.l0.width("100%"),g.l0.borderRadius(4),le.p.backgroundPulse()],container:[gt.fadeIn,g.l0.flex.growAndShrink(1)]});function St(e){var t=e.packagerTitle,n=e.error,i=e.loading,o=e.packagesCount,a=e.displayingInstalledPackages,l=e.affectedFile,c=e.openFile,u=e.status,s=(0,xt.Z)((function(){return a?0===o?"No packages installed.":"Installed ".concat(o," packages"):n?"We couldn't search for your packages. Try again.":0===o?"No packages found":o+" packages found"}),[n,o,a]);return(0,r.tZ)(y.G,{css:Ct.container,children:i?(0,r.tZ)(y.G,{css:Ct.loading}):(0,r.BX)(r.HY,{children:[(0,r.BX)(y.G,{css:Ct.header,children:[(0,r.BX)(y.G,{css:Ct.headerLeft,children:[(0,r.tZ)(Z.h4,{variant:"subheadDefault",level:2,children:t}),u===it.Idle?null:(0,r.tZ)(y.G,{children:(0,r.tZ)(ze.Z,{})})]}),(0,r.BX)(y.G,{css:Ct.headerRight,children:[(0,r.tZ)(Z.h4,{level:3,children:s}),o>0&&a&&l?(0,r.tZ)(ce.h,{alt:"Open "+l,tooltipPlacement:"bottom-start",onClick:function(){return c(l)},children:(0,r.tZ)(kt.Z,{})}):null]})]}),0===o?(0,r.BX)(Z.xv,{css:[g.l0.pt(4)],children:["You don\u2019t have any packages installed. Try searching for a package to install, or"," ",(0,r.tZ)("a",{href:"https://docs.replit.com/programming-ide/installing-packages",target:"_blank",rel:"noreferrer",children:"learn more about packages here"}),"."]}):null]})},i?"packagerTitleLoading":"packagerTitleLoaded")}var Tt=n(68825),Et=n(60471),Rt={nodejs:["package.json","package-lock.json","yarn.lock","node_modules"],python:["poetry.lock","pyproject.toml","requirements.txt",".venv/",".local"],ruby:["Gemfile","Gemfile.lock"],java:["pom.xml","target"]};var Gt=n(1468);var It=y.K.li;function _t(e){var t=function(){var e=(0,Tt.Z)(),t=(0,Et.T)(),n=(0,a.useMemo)((function(){var n,r=(null===t||void 0===t?void 0:t.packagers)||[],i=(null===r||void 0===r?void 0:r.map((function(e){var t;return(0,at.Z)((0,N.Z)({},e),{title:e.language,packagerFiles:(null===(t=e.packagerFiles)||void 0===t?void 0:t.length)?e.packagerFiles:null!==(n=Rt[e.language])&&void 0!==n?n:[]})})))||[];return"html"!==(null===e||void 0===e?void 0:e.language)&&"html_beta"!==(null===e||void 0===e?void 0:e.language)||i.push({id:"html",title:"html",name:"HTML Packager",language:"html",packageSearch:!0,guessImports:!1,packagerFiles:[]}),i}),[t,e]);return n}(),n=(0,a.useState)(null),i=n[0],l=n[1],c=(0,d.Z)().packager,u=(0,Xe.Z)(),s=(0,o.Z)((0,He.KO)(dt),2),f=s[0],p=s[1];(0,a.useEffect)((function(){u!==f.replId&&p({replId:u,packageManagers:{}})}),[u,f.replId]),(0,a.useEffect)((function(){!function(e,t){var n=e.map((function(e){return e.id})),r=t.getPackagerIds(),i=!0,o=!1,a=void 0;try{for(var l,c=r[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var u=l.value;u&&-1===n.indexOf(u)&&t.clearPackager(u)}}catch(s){o=!0,a=s}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}}(t,c)}),[t,c]),(0,a.useEffect)((function(){(null===i&&t.length>0||i&&!t.find((function(e){return e.id===i.id})))&&l(t[0])}),[t,i]);var h=(0,a.useState)(""),v=h[0],m=h[1],g=function(e){var t=e.query,n=e.packagerType,r=e.config,i=(0,a.useState)([]),o=i[0],l=i[1],c=(0,a.useState)(),u=c[0],s=c[1],d=(0,a.useState)(!1),f=d[0],p=d[1],h=ht(r),v=(0,a.useState)(null),m=v[0],g=v[1],y=(0,oe.Z)(t,400);return(0,a.useEffect)((function(){if(s(null),""===y)return p(!1),void l([]);p(!0),(0,ut.j)(ut.U3.PACKAGE_MANAGER_USED,{action:"searched",query:y,packagerType:n});var e=!1;return h?(h.search(y).then((function(t){e||(l(t.slice(0,50)),g(h))})).catch((function(t){Gt.c_.captureException(t),e||s(t)})).finally((function(){e||p(!1)})),function(){e=!0}):void 0}),[h,y,n]),{searchResults:o,isLoading:f,error:u,searchResultsPackageManager:m}}({query:v,packagerType:"upm",config:i}),Z=g.searchResults,b=g.isLoading,w=g.searchResultsPackageManager,x=""===v,k=(0,We.Z)("packager","show_packager_about_tooltip"),C=k.shouldDisplay,S=k.register,T=k.dismiss;(0,a.useEffect)((function(){S()}),[S]);var E=(0,We.Z)("packager","show_packager_import_tooltip"),R=E.shouldDisplay,G=E.register,I=E.dismiss;return(0,a.useEffect)((function(){G()}),[G]),(0,r.BX)(y.G,{css:vt.self,children:[(0,r.BX)(y.G,{css:vt.searchUIOuter,children:[(0,r.tZ)(y.G,{css:vt.searchUIInner,children:(0,r.tZ)(Oe.E,{value:v,placeholder:i?"Search ".concat(i.language," packages"):void 0,onClear:function(){return m("")},onChange:function(e){return m(e.target.value)},loading:b})}),t.length>1&&(0,r.tZ)(Fe.P,{items:t,selectedItem:i,onChange:function(e){l(e)},"aria-label":"Select packager configuration"})]}),x?null===t||void 0===t?void 0:t.map((function(t){return(0,r.tZ)(Bt,{config:t,openFile:e.openFile,displayingInstalledPackages:!0},t.id)})):i&&(0,r.tZ)(Dt,{searchResults:Z,packageManager:w,isLoading:b,config:i,openFile:e.openFile}),C&&x?(0,r.BX)(wt,{title:"What are packages?",onClose:function(){return T()},children:["Packages are collections of code that can extend the functionality of your programs. For example, you could add a package to make adding image carousels easier on websites, or a package to manage currency comparisons."," ",(0,r.tZ)("a",{href:"https://docs.replit.com/programming-ide/installing-packages",target:"_blank",rel:"noreferrer",children:"Learn more about packages"})]}):null,x&&R?(0,r.tZ)(wt,{title:"Tip\u2014Auto Import",onClose:function(){return I()},children:"If you know which packages you want to use, you can just import and use them in your files as if they were already installed, and they will be installed automatically the next time you run the Repl."}):null]})}function Dt(e){var t,n=e.searchResults,i=e.packageManager,o=e.isLoading,a=e.config,l=e.openFile,c=null!==(t=(0,U.Z)(null===i||void 0===i?void 0:i.status))&&void 0!==t?t:it.Idle;return(0,r.BX)(r.HY,{children:[(0,r.tZ)(St,{loading:o,packagesCount:n.length,displayingInstalledPackages:!1,affectedFile:a.packagerFiles&&a.packagerFiles[0],openFile:l,status:c}),(0,r.tZ)(y.G,{children:(0,r.tZ)(yt,{loading:o,children:n.map((function(e,t){return(0,r.tZ)(It,{children:(0,r.tZ)(Pt,{packageManager:i,pkg:e})},e.name||"Unknown"+t)}))})})]})}function Bt(e){var t,n=e.config,i=e.displayingInstalledPackages,o=e.openFile,l=ht(n),c=(0,U.Z)(null===l||void 0===l?void 0:l.installedPackages),u=(null===c||void 0===c?void 0:c.length)||0,s=(0,a.useState)(!1),d=s[0],f=s[1],p=null!==(t=(0,U.Z)(null===l||void 0===l?void 0:l.status))&&void 0!==t?t:it.Idle;return(0,a.useEffect)((function(){l&&l.initialize()}),[l]),l&&null!==c?(0,r.BX)(r.HY,{children:[(0,r.BX)(y.G,{css:vt.packagerSection,children:[u>0?(0,r.tZ)(y.G,{onClick:function(){return f((function(e){return!e}))},css:vt.packagerSectionExpandHandle,children:d?(0,r.tZ)(Ne.Z,{}):(0,r.tZ)(Me.Z,{})}):null,(0,r.tZ)(St,{packagerTitle:"".concat(n.language," Packages"),loading:!1,packagesCount:c.length,displayingInstalledPackages:Boolean(i),affectedFile:n.packagerFiles&&n.packagerFiles[0],openFile:o,status:p})]}),d?null:(0,r.tZ)(y.G,{children:(0,r.tZ)(yt,{loading:!1,children:c.map((function(e,t){return(0,r.tZ)(It,{children:(0,r.tZ)(Pt,{packageManager:l,pkg:e})},e.name||"Unknown"+t)}))})})]}):null}function Pt(e){var t=e.packageManager,n=(0,O.Z)(e,["packageManager"]),i=function(e){var t=e.packageManager,n=e.pkg,r=(0,o.Z)(a.useState(!1),2),i=r[0],l=r[1],c=(0,o.Z)(a.useState(null),2),u=c[0],s=c[1];return a.useEffect((function(){if(t&&n.name){var e=!1;return t.fetchPackageInfo(n.name).then((function(t){e||(s(t||null),l(!1))})),function(){e=!0}}s(null)}),[t,n.name]),{isLoading:i,packageInfo:u}}({packageManager:t,pkg:n.pkg}).packageInfo,l=(0,U.Z)(null===t||void 0===t?void 0:t.isRunning)||!1,c=(0,a.useState)(!1),u=c[0],s=c[1],d=(0,ne.Z)(),f=i||n.pkg,p="dependencies"in f&&f.dependencies&&f.dependencies.length>0?f.dependencies.map((function(e){return e.name})):null,h=(0,Ue.Z)().showNotice,v=(null===t||void 0===t?void 0:t.isInstalled(f))||!1;return(0,r.tZ)(Ke,{onActionClick:function(){t&&!l&&(s(!0),v?t.uninstall(f).then((function(){d.current&&s(!1)})):t.install(f).then((function(){d.current&&(h("Installed ".concat(f.name)),s(!1))})))},isAlreadyInstalled:v,isPackagerRunning:l,isIconLoading:u,statusMessage:v?Ve.REMOVE:Ve.INSTALL,itemName:f.name,itemDescription:f.description,itemVersion:f.version,itemHomepageURL:f.homepageURL,itemLicense:f.license,itemAuthor:f.author,itemDependencies:p})}var At,Lt,Ut=n(35273),Xt=n(9970),Mt=n(2757),Nt=n(23319),Ot=n(82325);(0,st.cn)({replId:"",packageManagers:{}});function Ft(){return(0,a.useState)((function(){return(0,st.MT)()}))[0]}!function(e){e.Initializing="Initializing",e.Installing="Installing",e.Uninstalling="Uninstalling",e.Idle="Idle"}(At||(At={})),function(e){e.Install="Install",e.Uninstall="Uninstall"}(Lt||(Lt={}));var Wt=(0,a.createContext)(null);function Ht(){var e=(0,a.useContext)(Wt);if(!e)throw new Error("Expected store in context");return e}var Vt=function(e){return(0,He.b9)(e,{store:Ht()})};function zt(e){return(0,He.Dv)(e,{store:Ht()})}var jt=(0,st.cn)(null);function qt(){return zt(jt)}function $t(){return e=jt,(0,Ot.lV)((0,a.useCallback)((function(t){return t(e)}),[e]),{store:Ht()});var e}(0,st.cn)(null);var Yt=n(24144),Kt=n(12247);function Qt(e){var t=qt(),n=(0,d.Z)(),r=(0,o.Z)(a.useState(null),2),i=r[0],l=r[1];return a.useEffect((function(){if((null===t||void 0===t?void 0:t.id)&&e.name){var r="html"===t.id?Yt.Z:Kt.Z,i=!1,o=function(){var o=(0,ot.Z)((function(){var o;return(0,lt.__generator)(this,(function(a){switch(a.label){case 0:return[4,r.getPackageInfo({id:t.id,name:e.name,packager:n.packager})];case 1:return o=a.sent(),i?[2]:(l(null!==o&&void 0!==o?o:null),[2])}}))}));return function(){return o.apply(this,arguments)}}();return o(),function(){i=!0}}}),[null===t||void 0===t?void 0:t.id,e.name]),i}var Jt=n(24592);function en(e){var t=e.isInstalled,n=e.isInQueue;return e.isCurrentAction?(0,r.tZ)(ze.Z,{}):n?(0,r.tZ)(Jt.Z,{}):t?(0,r.tZ)(q.Z,{}):(0,r.tZ)($e.Z,{})}var tn=y.K.span,nn=(0,b.X)({metadata:[g.l0.colWithGap(2)],metadataSkeleton:[g.l0.colWithGap(8),g.l0.pt(4)],metadataSkeletonVersion:[le.p.foregroundPulse(),g.l0.height(16),g.l0.maxWidth(64),g.l0.borderRadius(4)],metadataSkeletonDescription:[le.p.foregroundPulse(),g.l0.height(16),g.l0.borderRadius(4),g.l0.maxWidth(425)],root:[g.l0.borderRadius(8),g.l0.p(8)],header:[g.l0.flex.row,g.l0.justify.spaceBetween],headerTitle:[g.l0.rowWithGap(8),g.l0.flex.grow(1),g.l0.flex.wrap],headerTitleText:[g.l0.display.inline],headerTitlePills:[g.l0.display.inlineFlex,g.l0.rowWithGap(4)],headerButton:[],content:[g.l0.colWithGap(4)],actions:[g.l0.rowWithGap(8),g.l0.mt(8)],consoleButton:[g.l0.width("calc(50% - ".concat(g.TV.space8,")"))],cancelButton:[g.l0.width("calc(50% - ".concat(g.TV.space8,")"))],actionButton:[g.l0.flex.grow(1),g.l0.flex.shrink(0)]});function rn(e){var t=e.title,n=e.content,i=e.isExpanded;return(0,r.BX)(y.G,{css:nn.metadata,children:[t?(0,r.tZ)(Z.xv,{color:"dimmer",children:t}):null,n?(0,r.tZ)(Z.xv,{maxLines:i?void 0:1,children:n}):null]})}function on(e){var t=e.title,n=void 0===t||t,i=e.content,o=void 0===i||i;return(0,r.BX)(y.G,{css:nn.metadataSkeleton,children:[n?(0,r.tZ)(y.G,{css:nn.metadataSkeletonVersion}):null,o?(0,r.tZ)(y.G,{css:nn.metadataSkeletonDescription}):null]})}function an(e){var t,n=e.pkg,i=e.isMetadataLoading,o=void 0!==i&&i,l=e.openConsole,c=e.pills,u=qt(),s=(0,Nt.te)(null===u||void 0===u?void 0:u.id),d=(0,Nt.pN)(null===u||void 0===u?void 0:u.id),f=(0,Nt.B2)(),p=(0,Nt.cW)(),h=(0,Nt.wY)(),v=(0,a.useMemo)((function(){return Boolean(null!==f&&f.pkgs.find((function(e){return e.name===n.name})))}),[f]),m=(0,a.useMemo)((function(){return p.find((function(e){return e.pkgs.find((function(e){return e.name===n.name}))}))}),[p]),g=Boolean(m),b=(0,a.useMemo)((function(){return Boolean(s.find((function(e){return e.name===n.name})))}),[s]),w=Boolean(n.homepageURL||n.license||n.author||n.dependencies&&n.dependencies.length>0),x=(0,a.useMemo)((function(){return Boolean(d.find((function(e){return e.name===n.name})))}),[d]),k=(0,a.useState)(!1),C=k[0],S=k[1],T=(0,Nt.jh)(),E=(0,Nt.Wx)(),R=(0,Nt.zi)();return(0,r.BX)($.Tg,{css:nn.root,elevated:!0,children:[(0,r.BX)(y.G,{css:nn.header,children:[(0,r.BX)(Z.h4,{css:nn.headerTitle,level:2,variant:"subheadDefault",multiline:!1,children:[(0,r.BX)(tn,{css:nn.headerTitleText,children:[n.name,n.version?(0,r.BX)(Z.xv,{color:"dimmer",children:["@",n.version]}):null]}),c?(0,r.tZ)(y.G,{css:nn.headerTitlePills,children:c}):null]}),w?(0,r.tZ)(ce.h,{css:nn.headerButton,alt:"Show more info",tooltipHidden:!0,onClick:function(){return S((function(e){return!e}))},children:(0,r.tZ)(qe.Z,{rotate:C?90:0})}):null]}),(0,r.tZ)(y.G,{css:nn.content,children:o?(0,r.tZ)(on,{title:!1}):(0,r.BX)(r.HY,{children:[(0,r.tZ)(rn,{content:null!==(t=n.description)&&void 0!==t?t:"This package has no description.",isExpanded:C}),n.homepageURL&&C?(0,r.tZ)(rn,{title:"Website",content:(0,r.tZ)("a",{href:n.homepageURL,rel:"noreferrer noopener",target:"_blank",children:n.homepageURL}),isExpanded:C}):null,n.license&&C?(0,r.tZ)(rn,{title:"License",content:n.license,isExpanded:C}):null,n.author&&C?(0,r.tZ)(rn,{title:"Author",content:n.author,isExpanded:C}):null]})}),(0,r.tZ)(y.G,{css:nn.actions,children:x?(0,r.BX)(r.HY,{children:[(0,r.tZ)(je.zx,{css:nn.consoleButton,text:"Console",onClick:function(){l()},disabled:v||g,colorway:"primary",iconLeft:(0,r.tZ)(L.Z,{})}),(0,r.tZ)(je.zx,{css:nn.actionButton,text:"Try Again",onClick:function(){(null===u||void 0===u?void 0:u.id)&&(h(u.id,[n]),b?E({id:u.id,pkg:n}):T({id:u.id,pkg:n}))},disabled:v||g,colorway:b?"red":void 0,outlined:b,iconLeft:(0,r.tZ)(en,{isInstalled:b,isInQueue:g,isCurrentAction:v})})]}):(0,r.BX)(r.HY,{children:[(0,r.tZ)(je.zx,{css:nn.actionButton,text:v?(null===f||void 0===f?void 0:f.kind)===Nt.TH.Install?"Installing":"Removing":g?(null===m||void 0===m?void 0:m.kind)===Nt.TH.Install?"Waiting to install":"Waiting to remove":b?"Remove":"Install",onClick:function(){(null===u||void 0===u?void 0:u.id)&&(b?E({id:u.id,pkg:n}):T({id:u.id,pkg:n}))},disabled:v||g,colorway:b?"red":void 0,outlined:b,iconLeft:(0,r.tZ)(en,{isInstalled:b,isInQueue:g,isCurrentAction:v})}),g||v?(0,r.tZ)(je.zx,{css:nn.cancelButton,text:"Cancel",onClick:function(){n.name&&R(n.name)},disabled:v}):null]})})]})}function ln(e){var t,n=e.pkg,i=e.openConsole,o=Qt(n),a=o?(0,at.Z)((0,N.Z)({},o),{version:null!==(t=n.spec)&&void 0!==t?t:o.version}):n;return(0,r.tZ)(an,{pkg:a,isMetadataLoading:null===o,openConsole:i})}var cn=(0,b.X)({root:[g.l0.colWithGap(8),{"@container (min-width: 600px)":[g.l0.colWithGap(0),g.l0.align.start,{display:"grid",gridTemplate:"auto / 1fr 1fr",gap:g.TV.space8}],"@container (min-width: 1200px)":[{display:"grid",gridTemplate:"auto / 1fr 1fr 1fr",gap:g.TV.space8}]}]});function un(e){return(0,r.tZ)(y.G,(0,at.Z)((0,N.Z)({},e),{css:cn.root}))}function sn(e){var t=e.name,n=e.openConsole,i=Qt({name:t});return(0,r.tZ)(an,{pkg:null!==i&&void 0!==i?i:{name:t},isMetadataLoading:null===i,openConsole:n,pills:[(0,r.tZ)(Y.D,{text:"Suggested",colorway:"primary"},"suggested")]})}var dn=(0,b.X)({packages:[g.l0.pt(8)],separator:[g.l0.backgroundColor.backgroundHigher,g.l0.height(1),g.l0.borderRadius(1),g.l0.mt(6),{border:"none",marginLeft:"auto",marginRight:"auto",width:"95%"}]});function fn(e){var t=e.openConsole,n=qt(),i=(0,Nt.te)(null===n||void 0===n?void 0:n.id),o=(0,Nt.B2)(),a=(0,Nt.cW)(),l=[];switch(null===n||void 0===n?void 0:n.language){default:return null;case"nodejs":l=["express","discord.js","axios","moment","node-fetch","chalk"];break;case"python3":l=["replit","requests","pandas","discord","matplotlib","flask"]}var c=l.filter((function(e){return!function(e){var t=i.find((function(t){var n;return(null===(n=t.name)||void 0===n?void 0:n.toLowerCase())===e}));if(t)return!0;var n=o&&o.kind===Nt.TH.Install?o.pkgs.find((function(t){var n;return(null===(n=t.name)||void 0===n?void 0:n.toLowerCase())===e})):null;if(n)return!0;var r=!0,l=!1,c=void 0;try{for(var u,s=a[Symbol.iterator]();!(r=(u=s.next()).done);r=!0){var d=u.value;if(d.kind===Nt.TH.Install){var f=d.pkgs.find((function(t){var n;return(null===(n=t.name)||void 0===n?void 0:n.toLowerCase())===e}));if(f)return!0}}}catch(p){l=!0,c=p}finally{try{r||null==s.return||s.return()}finally{if(l)throw c}}return!1}(e)})).map((function(e){return(0,r.tZ)(sn,{name:e,openConsole:t},e)}));return c.length>0?(0,r.BX)(r.HY,{children:[(0,r.tZ)("hr",{css:dn.separator}),(0,r.tZ)(un,{css:dn.packages,children:c})]}):null}var pn=(0,b.X)({root:[g.l0.maxWidth(800),g.l0.width("100%"),{marginLeft:"auto",marginRight:"auto","@container (min-width: 1200px)":[g.l0.maxWidth(1400)]}],header:[g.l0.flex.row,g.l0.justify.spaceBetween,g.l0.py(4)],headerLeft:[g.l0.rowWithGap(4),g.l0.align.center],headerLoadingIcon:[g.l0.px(4)],headerRight:[g.l0.rowWithGap(4)],headerTitle:[{textTransform:"capitalize"}],packages:[g.l0.pt(8)],empty:[g.l0.pt(8),g.l0.colWithGap(8),g.l0.width("100%")],packagesWrapper:[g.l0.colWithGap(8),g.l0.width("100%")]});function hn(e){var t=e.openFile,n=e.openConsole,i=qt(),o=(0,Nt.te)(null===i||void 0===i?void 0:i.id),l=(0,Nt.$z)(null===i||void 0===i?void 0:i.id),c=(0,Nt.cW)(),u=(0,Nt.B2)(),s=(0,a.useState)(!0),d=s[0],f=s[1];if(null===i)return null;if(!l||l===Nt.C0.Uninitialized||l===Nt.C0.Initializing)return(0,r.tZ)(y.G,{css:pn.root,children:(0,r.BX)(y.G,{css:pn.header,children:[(0,r.BX)(y.G,{css:pn.headerLeft,children:[(0,r.tZ)(ee.u,{tooltip:"Loading",children:(0,r.tZ)(y.G,{css:pn.headerLoadingIcon,children:(0,r.tZ)(ze.Z,{})})}),(0,r.BX)(Z.h4,{css:pn.headerTitle,variant:"subheadDefault",level:2,children:[i.language," Packages"]})]}),(0,r.tZ)(y.G,{css:pn.headerRight,children:i.packagerFiles.length>0?(0,r.tZ)(ce.h,{alt:"Open ".concat(i.packagerFiles[0]),onClick:function(){i&&t(i.packagerFiles[0])},children:(0,r.tZ)(kt.Z,{})}):null})]})});var p=u&&u.id===i.id&&u.kind===Nt.TH.Install?u.pkgs:[],h=c.flatMap((function(e){return e.id===i.id&&e.kind===Nt.TH.Install?e.pkgs:[]})),v=(0,Xt.Z)(p).concat((0,Xt.Z)(h),(0,Xt.Z)(o));return(0,r.BX)(y.G,{css:pn.root,children:[(0,r.BX)(y.G,{css:pn.header,children:[(0,r.BX)(y.G,{css:pn.headerLeft,children:[o.length>0?(0,r.tZ)(ce.h,{alt:"Show packages",tooltipHidden:!0,onClick:function(){return f((function(e){return!e}))},children:(0,r.tZ)(qe.Z,{rotate:d?90:0})}):null,(0,r.BX)(Z.h4,{css:pn.headerTitle,variant:"subheadDefault",level:2,children:[i.language," Packages"]})]}),(0,r.tZ)(y.G,{css:pn.headerRight,children:0===o.length?(0,r.tZ)(Z.h4,{level:3,children:"No Packages Installed."}):(0,r.BX)(r.HY,{children:[(0,r.BX)(Z.h4,{level:3,children:["Installed ",o.length," ",(0,Mt.Z)("package",o.length)]}),i.packagerFiles.length>0?(0,r.tZ)(ce.h,{alt:"Open ".concat(i.packagerFiles[0]),onClick:function(){i&&t(i.packagerFiles[0])},children:(0,r.tZ)(kt.Z,{})}):null]})})]}),d?(0,r.BX)(y.G,{css:0===o.length?pn.empty:pn.packagesWrapper,children:[0===o.length?(0,r.BX)(Z.xv,{children:["You don't have any packages installed. Try searching for a package to install, or"," ",(0,r.tZ)("a",{href:"https://docs.replit.com/programming-ide/installing-packages",target:"_blank",rel:"noreferrer",children:"learn more about packages here"}),"."]}):null,o.length>0?(0,r.tZ)(r.HY,{children:(0,r.tZ)(un,{css:pn.packages,children:v.sort((function(e,t){return(null===e||void 0===e?void 0:e.name)?(null===t||void 0===t?void 0:t.name)?e.name.localeCompare(t.name):-1:1})).map((function(e){return(0,r.tZ)(ln,{pkg:e,openConsole:n},e.name)}))})}):null,(0,r.tZ)(fn,{openConsole:n})]}):null]})}var vn=n(5795);function mn(e){var t=e.onResults,n=e.onLoading,i=e.className,o=qt(),l=(0,a.useState)(""),c=l[0],u=l[1],s=(0,a.useRef)(0),f=function(){s.current++,null===t||void 0===t||t(null),null===n||void 0===n||n(!1)},p=function(){var e=(0,d.Z)(),t=$t();return(0,a.useCallback)((function(n){var r=t();return(null===r||void 0===r?void 0:r.id)?("html"===r.id?Yt.Z:Kt.Z).search({id:r.id,query:n,packager:e.packager}):[]}),[])}();return(0,vn.Z)((function(){if(""!==c.trim()){var e=++s.current,r=function(){var r=(0,ot.Z)((function(){var r;return(0,lt.__generator)(this,(function(i){switch(i.label){case 0:return null===n||void 0===n||n(!0),[4,p(c)];case 1:return r=i.sent(),e!==s.current?[2]:(null===t||void 0===t||t(null!==r&&void 0!==r?r:[]),null===n||void 0===n||n(!1),[2])}}))}));return function(){return r.apply(this,arguments)}}();r()}}),[c],500),(0,r.tZ)(y.G,{className:i,children:(0,r.tZ)(Oe.E,{value:c,onChange:function(e){""===e.target.value.trim()&&f(),u(e.target.value)},onClear:function(){u(""),f()},placeholder:o?"Search ".concat(o.language," packages"):void 0})})}var gn=(0,b.X)({root:[g.l0.maxWidth(800),g.l0.width("100%"),{marginLeft:"auto",marginRight:"auto","@container (min-width: 1200px)":[g.l0.maxWidth(1400)]}],skeleton:[g.l0.borderRadius(8),g.l0.p(8),le.p.backgroundPulse(),g.l0.height(128)]});function yn(){return(0,r.tZ)(y.G,{css:gn.root,children:(0,r.tZ)(un,{children:Array.from({length:3},(function(e,t){return(0,r.tZ)($.Tg,{css:gn.skeleton,elevated:!0},"SearchLoading-".concat(t))}))})})}function Zn(e){var t=e.pkg,n=e.openConsole;return(0,r.tZ)(an,{pkg:t,openConsole:n})}var bn=(0,b.X)({root:[g.l0.colWithGap(8),g.l0.maxWidth(800),g.l0.width("100%"),{marginLeft:"auto",marginRight:"auto","@container (min-width: 1200px)":[g.l0.maxWidth(1400)]}],results:[g.l0.colWithGap(8)],empty:[g.l0.flex.row,g.l0.justify.center]});function wn(e){var t=e.results,n=e.openConsole;return(0,r.tZ)(y.G,{css:bn.root,children:(0,r.tZ)(y.G,{css:bn.results,children:0===t.length?(0,r.tZ)(Z.xv,{color:"dimmer",css:bn.empty,children:"No Packages Found"}):(0,r.tZ)(un,{children:t.map((function(e){return(0,r.tZ)(Zn,{pkg:e,openConsole:n},e.name)}))})})})}var xn=(0,b.X)({root:[g.l0.p(8),g.l0.borderRadius(8),g.l0.colWithGap(16)],header:[g.l0.flex.row,g.l0.align.center,g.l0.justify.spaceBetween],headerLeft:[g.l0.rowWithGap(4),g.l0.align.center],headerRight:[],content:[]});function kn(e){var t=e.title,n=e.onClose,i=e.children,o=(0,a.useState)(!0),l=o[0],c=o[1];return(0,r.BX)($.Tg,{elevated:!0,css:xn.root,children:[(0,r.BX)(y.G,{css:xn.header,children:[(0,r.BX)(y.G,{css:xn.headerLeft,children:[(0,r.tZ)(Z.h4,{level:2,variant:"subheadDefault",children:t}),(0,r.tZ)(ce.h,{alt:l?"Minimize tip information":"Expand tip information",tooltipHidden:!0,onClick:function(){return c((function(e){return!e}))},children:(0,r.tZ)(qe.Z,{rotate:l?90:0})})]}),(0,r.tZ)(y.G,{css:xn.headerRight,children:(0,r.tZ)(ce.h,{alt:"Dismiss tip",tooltipHidden:!0,onClick:n,children:(0,r.tZ)(Zt.Z,{})})})]}),l?(0,r.tZ)(y.G,{css:xn.content,children:i}):null]})}var Cn=n(53870);function Sn(e){var t=e.children,n=e.config,i=Vt(jt);return(0,a.useEffect)((function(){(null===n||void 0===n?void 0:n.id)&&i(n)}),[n]),(0,r.tZ)(r.HY,{children:t})}function Tn(e){var t=e.children,n=e.config,i=Ft();return(0,r.tZ)(Wt.Provider,{value:i,children:n?(0,r.tZ)(Sn,{config:n,children:t}):t})}var En=(0,b.X)({root:[g.l0.pt(16),g.l0.p(8),{containerType:"inline-size"}],center:[g.l0.width("100%"),g.l0.maxWidth(600),{marginLeft:"auto",marginRight:"auto"},{"@container (min-width: 400px)":[g.l0.maxWidth("100%")]}],title:[g.l0.maxWidth(800),g.l0.width("100%"),{marginLeft:"auto",marginRight:"auto"}],content:[g.l0.pt(8)],search:[g.l0.rowWithGap(8),g.l0.width(800),g.l0.width("100%"),{marginLeft:"auto",marginRight:"auto","@container (min-width: 400px)":[g.l0.maxWidth(800)]}],searchInput:[g.l0.flex.grow(1)],configSelect:[],packages:[g.l0.pt(16),g.l0.colWithGap(16)]});function Rn(e){var t=e.openFile,n=e.openConsole,i=(0,Cn.I)(),l=(0,o.Z)(function(){var e=(0,Cn.I)(),t=(0,a.useState)(null),n=t[0],r=t[1];return(0,a.useEffect)((function(){e.length>0&&(null==n||!e.find((function(e){return e&&e.id===n.id})))&&r(e[0])}),[n,e]),[n,r]}(),2),c=l[0],u=l[1],s=(0,a.useState)(null),d=s[0],f=s[1],p=(0,a.useState)(!1),h=p[0],v=p[1],m=(0,We.Z)("packager","show_packager_about_tooltip"),g=(0,We.Z)("packager","show_packager_import_tooltip");(0,a.useEffect)((function(){m.register()}),[m.register]),(0,a.useEffect)((function(){g.register()}),[g.register]);return(0,r.tZ)(y.G,{css:En.root,children:(0,r.BX)(y.G,{css:En.center,children:[(0,r.tZ)(Z.h4,{css:En.title,level:2,variant:"subheadBig",children:"Packages"}),(0,r.tZ)(y.G,{css:En.content,children:(0,r.BX)(Tn,{config:c,children:[(0,r.BX)(y.G,{css:En.search,children:[(0,r.tZ)(mn,{css:En.searchInput,onResults:f,onLoading:v}),i.length>1&&(0,r.tZ)(Fe.P,{css:En.configSelect,items:i,selectedItem:c,onChange:function(e){return u(e)},"aria-label":"Select packager configuration"})]}),(0,r.tZ)(y.G,{css:En.packages,children:null!==d?(0,r.tZ)(wn,{results:d,openConsole:n}):h?(0,r.tZ)(yn,{}):(0,r.BX)(r.HY,{children:[m.shouldDisplay?(0,r.BX)(kn,{title:"What are packages?",onClose:m.dismiss,children:["Packages are collections of code that can extend the functionality of your programs. For example, you could add a package to make adding image carousels easier on websites, or a package to manage currency comparisons."," ",(0,r.tZ)("a",{href:"https://docs.replit.com/programming-ide/installing-packages",target:"_blank",rel:"noreferrer",children:"Learn more about packages"})]}):null,g.shouldDisplay?(0,r.tZ)(kn,{title:"Tip\u2014Auto Import",onClose:g.dismiss,children:"If you know which packages you want to use, you can just import and use them in your files as if they were already installed, and they will be installed automatically the next time you run the Repl."}):null,i.map((function(e){return e.id===(null===c||void 0===c?void 0:c.id)?(0,r.tZ)(hn,{openFile:t,openConsole:n},e.id):(0,r.tZ)(Tn,{config:e,children:(0,r.tZ)(hn,{openFile:t,openConsole:n})},e.id)}))]})})]})})]})})}var Gn=(0,b.X)({self:[g.l0.p(8),P.F3],packagerWrapper:g.l0.mt(8)}),In={Content:function(e){var t=e.options;return(0,Ae.P5)({controlName:"flag-packages2",default:!1,logFlagToAnalytics:!1})?(0,r.tZ)(Rn,{openFile:function(e){return t.performPaneOperation({operation:"open",pane:(0,Ut.$E)(e),secondary:!0})},openConsole:function(){t.performPaneOperation({operation:"open",pane:{type:"runnerOutput"},secondary:!0})}}):(0,r.BX)(y.G,{css:Gn.self,children:[(0,r.tZ)(Z.h4,{level:2,variant:"subheadBig",children:"Packages"}),(0,r.tZ)(y.G,{css:Gn.packagerWrapper,children:(0,r.tZ)(_t,{openFile:function(e){return t.performPaneOperation({operation:"open",pane:(0,Ut.$E)(e),secondary:!0})}})})]})},Icon:function(e){var t=e.size;return(0,r.tZ)(Le.Z,{size:t})},getTitle:function(){return"Packages"}},_n=n(70104),Dn=n(55749),Bn=n(39137),Pn=n(31672),An=n(35004),Ln=n(77806),Un=n(60566),Xn=(0,b.X)({button:{width:"fit-content"}});function Mn(e){var t=e.code,n=e.activeFile,i=(0,Pn.Z)(n),o=i?{text:"Insert",iconRight:(0,r.tZ)(An.Z,{}),onClick:function(){return i({code:t,insertAt:"end"})}}:{text:"Copy",iconLeft:(0,r.tZ)(Ln.Z,{}),onClick:function(){return(0,Un.Z)(t)}};return(0,r.tZ)($.Tg,{background:"default",children:(0,r.tZ)(je.zx,(0,N.Z)({small:!0,outlined:!0,css:Xn.button},o))})}var Nn=(0,b.X)({self:g.l0.colWithGap(4),content:[g.l0.rowWithGap(4),g.l0.backgroundColor.backgroundRoot,g.l0.borderRadius(4),g.l0.p(4),g.l0.align.center,{width:"fit-content"}]});function On(e){var t=e.method,n=e.content,i=e.activeFile,o=(0,a.useState)(n),l=o[0],c=o[1];return(0,r.BX)(y.G,{css:Nn.self,children:[(0,r.tZ)(qn,{title:t}),(0,r.tZ)(y.G,{css:Nn.content,children:l.map((function(e,n){var i="".concat(t,"-").concat(n);return"input"===e.type?(0,r.tZ)(Wn,{i:n,value:e.value,placeholder:e.placeholder,setContent:c},i):(0,r.tZ)(Vn,{value:e.value},i)}))}),(0,r.tZ)(Mn,{code:$n(l),activeFile:i})]})}var Fn=(0,b.X)({self:[g.l0.width(64),g.l0.height(24),g.l0.zIndex(1)]});function Wn(e){var t=e.i,n=e.value,i=e.placeholder,o=e.setContent;return(0,r.tZ)(Bn.II,{onChange:function(e){o((function(n){return n.map((function(n,r){return t===r?(0,at.Z)((0,N.Z)({},n),{value:e.target.value}):n}))}))},placeholder:i,value:n||"",css:Fn.self})}var Hn=(0,b.X)({self:[g.l0.borderRadius(0),g.l0.backgroundColor.backgroundRoot],code:[g.l0.font.code,g.l0.color.greyStronger,g.l0.p(4)]});function Vn(e){var t=e.value;return(0,r.tZ)(y.G,{css:Hn.self,children:(0,r.tZ)(Z.xv,{css:Hn.code,multiline:!1,children:t})})}var zn,jn=(0,b.X)({self:g.l0.rowWithGap(4),bold:{fontWeight:g.TV.fontWeightMedium}});function qn(e){var t=e.title,n=(0,o.Z)((0,xt.Z)((function(){var e=(0,Dn.Z)(t.split(" "));return[e[0],e.slice(1).join(" ")]}),[t]),2),i=n[0],a=n[1];return(0,r.BX)(y.G,{css:jn.self,children:[(0,r.tZ)(Z.xv,{css:jn.bold,multiline:!1,children:i}),(0,r.tZ)(Z.xv,{color:"dimmer",multiline:!1,children:a})]})}function $n(e){return e.reduce((function(e,t){return e+(t.value||("input"===t.type?t.placeholder:""))}),"")}!function(e){e.IMPORT="Import the database",e.CREATE="Create a new database",e.SET="Set a key to a value",e.GET="Get a key's value",e.DELETE="Delete a key",e.LIST="List all keys",e.LIST_PREFIX="List keys with a prefix"}(zn||(zn={}));var Yn={language:"Bash",methods:[er(zn.SET,"curl $REPLIT_DB_URL -d '{{key}} = {{value}}'"),er(zn.GET,"curl $REPLIT_DB_URL/{{key}}"),er(zn.DELETE,"curl -XDELETE $REPLIT_DB_URL/{{key}}"),er(zn.LIST,'curl "$REPLIT_DB_URL?prefix={{key}}"')]},Kn={language:"Node",methods:[er(zn.IMPORT,'const Database = require("@replit/database")'),er(zn.CREATE,"const db = new Database()"),er(zn.SET,'db.set("{{key}}", "{{value}}").then(() => {})'),er(zn.GET,'db.get("{{key}}").then(value => {})'),er(zn.DELETE,'db.delete("{{key}}").then(() => {})'),er(zn.LIST,"db.list().then(keys => {})"),er(zn.LIST_PREFIX,'db.list("{{prefix}}").then(matches => {})')]},Qn={language:"Go",methods:[er(zn.IMPORT,'import "github.com/replit/database-go"'),er(zn.SET,'db.Set("{{key}}", "{{value}}")'),er(zn.GET,'value, _ := database.Get("{{key}}")'),er(zn.DELETE,'database.Delete("{{key}}")'),er(zn.LIST,'keys, _ := database.ListKeys("")'),er(zn.LIST_PREFIX,'matches, _ := database.ListKeys("{{prefix}}")')]},Jn={language:"Python",methods:[er(zn.IMPORT,"from replit import db"),er(zn.SET,'db["{{key}}"] = "{{value}}"'),er(zn.GET,'db["{{key}}"]'),er(zn.DELETE,'del db["{{key}}"]'),er(zn.LIST,"keys = db.keys()"),er(zn.LIST_PREFIX,'matches = db.prefix("{{prefix}}")')]};function er(e,t){return{method:e,content:tr(t)}}function tr(e){for(var t=[],n=0;n<e.length;){var r=e.indexOf("{{",n),i=e.indexOf("}}",n);if(-1===r||-1===i){t.push({type:"code",value:e.substring(n)});break}t.push({type:"code",value:e.substring(n,r)}),t.push({type:"input",placeholder:e.substring(r+"{{".length,i)}),n=i+"}}".length}return t}var nr=(0,b.X)({self:g.l0.colWithGap(24),code:[g.l0.font.code,g.l0.color.greyStronger,g.l0.backgroundColor.backgroundRoot,g.l0.p(4),g.l0.borderRadius(4)]});function rr(e){var t=e.activeFile,n=(0,xt.Z)((function(){return function(e){switch(e?(0,v.r6)(e):"bash"){case"js":case"ts":case"tsx":case"jsx":case"mjs":return Kn;case"go":return Qn;case"py":return Jn;default:return Yn}}(t)}),[t]);return(0,r.BX)(y.G,{css:nr.self,children:[(0,r.BX)(Z.xv,{color:"dimmer",children:["You can use the Database from any Repl by making HTTP requests or a client library as outlined below. We\u2019ve set an environment variable called ",(0,r.tZ)("code",{css:nr.code,children:"REPLIT_DB_URL"})," in your Repl if you'd like to interact with the database directly."]}),n.methods.map((function(e){return(0,r.tZ)(On,{method:e.method,content:e.content,activeFile:t},"".concat(n.language).concat(e.method))}))]})}var ir=n(33594),or=(0,b.X)({children:[g.l0.p(12),g.l0.colWithGap(8)]});function ar(e){var t=e.title,n=e.defaultExpanded,i=e.children;return(0,r.tZ)(ir.Q,{defaultExpanded:n,headerContent:(0,r.tZ)(Z.xv,{variant:"subheadDefault",multiline:!1,children:t}),children:(0,r.tZ)(y.G,{css:or.children,children:i})})}var lr=n(84563),cr=(0,mt.F4)("from{opacity:0}to{opacity:1}"),ur=(0,b.X)({self:[g.l0.colWithGap(8),{animation:"".concat(cr," 100ms forwards ease-in-out alternate")}],selfLoadingText:[g.l0.height(16),g.l0.width(48),g.l0.borderRadius(4),le.p.backgroundPulse()],selfLoading:[g.l0.height(12),g.l0.borderRadius(16),le.p.backgroundPulse()],text:[g.l0.rowWithGap(4)],textSpan:[g.l0.width("fit-content"),g.l0.display.inlineFlex]});function sr(e){var t=e.database,n=e.loading,i=(null===t||void 0===t?void 0:t.sizeMB)||0,o=function(e){return"".concat((e=1e6*e/1048576).toFixed(),"/50 MiB")}(i),a=n||!t;return(0,r.tZ)(y.G,{css:ur.self,children:a?(0,r.BX)(r.HY,{children:[(0,r.tZ)(y.G,{css:ur.selfLoadingText}),(0,r.tZ)(y.G,{css:ur.selfLoading})]}):(0,r.BX)(r.HY,{children:[(0,r.BX)(Z.xv,{color:"dimmer",css:ur.text,multiline:!1,children:[(0,r.tZ)(y.K.span,{css:ur.textSpan,children:o}),(0,r.tZ)(y.K.span,{css:ur.textSpan,children:"|"}),(0,r.tZ)(y.K.span,{css:ur.textSpan,children:dr(null===t||void 0===t?void 0:t.keysCount)})]}),(0,r.tZ)(lr.J,{current:i,total:50,tooltip:o})]})},a?"databaseLoadingStats":"databaseLoadedStats")}function dr(e){return"".concat(e=e||0," ").concat((0,Mt.Z)("key",e))}var fr=n(43119),pr=n(71440),hr=n(24635);function vr(){var e=(0,fr.Z)(["\n  fragment DatabaseUsage on Database {\n    id\n    keysCount\n    sizeMB\n  }\n"]);return vr=function(){return e},e}function mr(){var e=(0,fr.Z)(["\n  query Database($replID: String!) {\n    repl(id: $replID) {\n      ... on Repl {\n        id\n        database {\n          id\n          ...DatabaseUsage\n        }\n      }\n    }\n    currentUser {\n      id\n      isLoggedIn\n    }\n  }\n  ","\n"]);return mr=function(){return e},e}var gr={},yr=(0,pr.Ps)(vr()),Zr=(0,pr.Ps)(mr(),yr);function br(){var e,t,n,r=function(e){var t=(0,N.Z)({},gr,e);return hr.a(Zr,t)}({variables:{replID:(0,Xe.Z)()},pollInterval:1e4}),i=r.data,o=r.error,a=r.loading;i&&("Repl"===i.repl.__typename?t=null===i||void 0===i||null===(n=i.repl)||void 0===n?void 0:n.database:e="Could not fetch Database info");return o&&("GraphQL error: You don't have access to this database"===o.message?t=null:e=o.message),{db:t,loading:a,error:e}}var wr=n(30504),xr=n(13716),kr=(0,b.X)({self:[g.l0.colWithGap(16),g.l0.p(8),g.l0.backgroundColor.backgroundDefault,P.F3],link:[g.l0.color.accentPrimaryStronger,g.l0.pr(4)],sectionWrapper:[g.l0.colWithGap(16),g.l0.overflowY("auto"),g.l0.width("100%"),{flex:"1"}]});function Cr(e){var t=e.performPaneOperation,n=br(),i=n.db,o=n.error,a=n.loading,l=(0,xr.R3)();return(0,r.BX)(y.G,{css:kr.self,children:[(0,r.tZ)(Z.h4,{level:2,variant:"subheadBig",children:"Database"}),(0,r.BX)(y.G,{css:kr.sectionWrapper,children:[(0,r.BX)(y.G,{children:[(0,r.BX)(Z.xv,{children:[(0,r.tZ)("a",{href:wr.TT.REPL_DATABASE,target:"_blank",rel:"noopener",onClick:function(e){e.preventDefault(),t({operation:"open",pane:{type:"docs",data:{url:wr.TT.REPL_DATABASE}}})},children:"Replit Database"})," ","is a free, easy to use key-value store. No configuration is necessary, so you can start using it right away."]}),o?(0,r.tZ)(Z.xv,{css:[g.l0.color.accentNegativeStronger],children:o}):null]}),(0,r.tZ)(ar,{title:"Database Info",defaultExpanded:!0,children:(0,r.tZ)(sr,{database:i,loading:a})}),(0,r.tZ)(ar,{title:"Using the database",defaultExpanded:!0,children:(0,r.tZ)(rr,{activeFile:l})})]})]})}var Sr={Content:function(e){var t=e.options.performPaneOperation;return(0,r.tZ)(Cr,{performPaneOperation:t})},Icon:function(e){var t=e.size;return(0,r.tZ)(_n.Z,{size:t})},getTitle:function(){return"Database"}},Tr=n(50216);function Er(){var e=(0,fr.Z)(["\n  mutation CreateNeonDatabase($input: CreateNeonDatabaseInput!) {\n    createNeonDatabase(input: $input) {\n      __typename\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on CreateNeonDatabaseResult {\n        databaseId\n        databaseName\n        projectId\n        connectionString\n        isFrozen\n      }\n    }\n  }\n"]);return Er=function(){return e},e}function Rr(){var e=(0,fr.Z)(["\n  mutation DeleteNeonDatabase($input: DeleteNeonDatabaseInput!) {\n    deleteNeonDatabase(input: $input) {\n      __typename\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on DeleteNeonDatabaseResult {\n        success\n      }\n    }\n  }\n"]);return Rr=function(){return e},e}function Gr(){var e=(0,fr.Z)(["\n  query GetNeonDatabases($input: GetNeonDatabasesInput!) {\n    getNeonDatabases(input: $input) {\n      __typename\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on GetNeonDatabasesResult {\n        databases {\n          databaseId\n          databaseName\n          projectId\n          connectionString\n          isFrozen\n        }\n      }\n    }\n  }\n"]);return Gr=function(){return e},e}function Ir(){var e=(0,fr.Z)(["\n  mutation UnfreezeNeonDatabase($input: UnfreezeNeonDatabaseInput!) {\n    unfreezeNeonDatabase(input: $input) {\n      ... on UnfreezeNeonDatabaseResult {\n        success\n      }\n    }\n  }\n"]);return Ir=function(){return e},e}var _r={},Dr=(0,pr.Ps)(Er());var Br=(0,pr.Ps)(Rr());var Pr=(0,pr.Ps)(Gr());var Ar=(0,pr.Ps)(Ir());var Lr=n(25198),Ur=n(69994),Xr=n(88420),Mr=n(14806),Nr=n(44322),Or=n(18988),Fr=n(34204),Wr=n(52132),Hr={"td,th":{border:"1px solid "+g.TV.outlineDefault}},Vr={"td,th":{paddingLeft:8,paddingTop:8,paddingBottom:8,paddingRight:8,whiteSpace:"nowrap"},"td:first-of-type,th:first-of-type":{paddingLeft:8}},zr={outline:"2px solid ".concat(g.TV.accentPrimaryDefault),outlineOffset:"-2px"},jr=(0,mt.iv)({":focus:focus-visible":zr}),qr=(0,mt.iv)(zr),$r=(0,mt.iv)([Vr,Hr,jr]),Yr=(0,mt.iv)([g.l0.fontWeight.medium,Vr,Hr,jr]),Kr=(0,mt.iv)({"tbody > tr:hover":{backgroundColor:g.TV.backgroundHigher,cursor:"pointer"}});function Qr(e){var t=e.type,n=e.style,i=e.children,o=(0,Nr.LA)().rowGroupProps;return(0,r.tZ)(t,(0,at.Z)((0,N.Z)({},o),{style:n,children:i}))}function Jr(e){var t=e.item,n=e.state,i=e.children,o=(0,a.useRef)(null),l=(0,Nr.Qm)({node:t},n,o).rowProps;return(0,r.tZ)("tr",(0,at.Z)((0,N.Z)({css:Yr},l),{ref:o,children:i}))}function ei(e){var t,n=e.column,i=e.state,o=(0,a.useRef)(null),l=(0,Nr.WY)({node:n},i,o).columnHeaderProps,c=(0,Or.Fx)(),u=c.isFocusVisible,s=c.focusProps;return(0,r.tZ)("th",(0,at.Z)((0,N.Z)({},(0,Fr.dG)(l,s)),{css:[u&&qr,jr],colSpan:n.colspan,style:{textAlign:(null!==(t=n.colspan)&&void 0!==t?t:1)>1?"center":"left"},ref:o,children:n.rendered}))}function ti(e){var t=e.item,n=e.children,i=e.state,o=(0,a.useRef)(null),l=(0,Nr.U)({node:t},i,o).rowProps,c=(0,Or.Fx)(),u=c.isFocusVisible,s=c.focusProps;return(0,r.tZ)("tr",(0,at.Z)((0,N.Z)({css:[u&&qr,$r]},(0,Fr.dG)(l,s)),{ref:o,children:n}))}function ni(e){var t=e.cell,n=e.state,i=(0,a.useRef)(null),o=(0,Nr.fs)({node:t},n,i).gridCellProps,l=(0,Or.Fx)(),c=l.isFocusVisible,u=l.focusProps;return(0,r.tZ)("td",(0,at.Z)((0,N.Z)({},(0,Fr.dG)(o,u)),{css:[c&&qr,jr],ref:i,children:t.rendered}))}function ri(e){var t=e.selectionMode,n=e.selectionBehavior,i=(0,Wr.oy)((0,at.Z)((0,N.Z)({},e),{showSelectionCheckboxes:"multiple"===t&&"replace"!==n})),o=(0,a.useRef)(null),l=i.collection,c=(0,Nr.x6)(e,i,o).gridProps;return(0,r.BX)("table",(0,at.Z)((0,N.Z)({},c),{ref:o,css:[(null===e||void 0===e?void 0:e.onRowAction)&&Kr],style:{borderCollapse:"collapse"},children:[(0,r.tZ)(Qr,{type:"thead",children:l.headerRows.map((function(e){return(0,r.tZ)(Jr,{item:e,state:i,children:(0,Xt.Z)(e.childNodes).map((function(e){return(0,r.tZ)(ei,{column:e,state:i},e.key)}))},e.key)}))}),(0,r.tZ)(Qr,{type:"tbody",children:(0,Xt.Z)(l.body.childNodes).map((function(e){return(0,r.tZ)(ti,{item:e,state:i,children:(0,Xt.Z)(e.childNodes).map((function(e){return(0,r.tZ)(ni,{cell:e,state:i},e.key)}))},e.key)}))})]}))}var ii=function(e){var t=e.ariaTableProps,n=e.rows,i=e.columns;return(0,r.BX)(ri,(0,at.Z)((0,N.Z)({},t),{children:[(0,r.tZ)(Wr.xD,{columns:i,children:function(e){return(0,r.tZ)(Wr.sg,{children:e.value})}}),(0,r.tZ)(Wr.RM,{items:n,children:function(e){return(0,r.tZ)(Wr.X2,{children:function(t){return(0,r.tZ)(Wr.bL,{children:e[t]})}})}})]}))};function oi(e){var t=e.headerColumns,n=e.bodyData,i=e.ariaLabel,o=void 0===i?"Database Table":i,a=e.scrollRef,l=e.onRowAction,c=t.map((function(e,t){return{key:"string"===typeof e?e:"".concat(t),value:e}})),u=n.map((function(e,n){for(var r={id:n},i=0;i<e.length;i++){var o=t[i];r["string"===typeof o?o:"".concat(i)]=e[i]}return r}));return(0,r.tZ)(ii,{ariaTableProps:{selectionMode:"none","aria-label":o,onRowAction:l,scrollRef:a},columns:c,rows:u})}var ai=function(e,t){var n=(0,d.Z)().psql,r=(0,o.Z)(a.useState(),2),i=r[0],l=r[1],c=(0,o.Z)(a.useState(!1),2),u=c[0],s=c[1],f=a.useCallback(function(){var r=(0,ot.Z)((function(){var r;return(0,lt.__generator)(this,(function(i){switch(i.label){case 0:if(!e)return[2];i.label=1;case 1:return i.trys.push([1,,3,4]),s(!0),[4,n.run({query:e,connectionString:t})];case 2:return r=i.sent(),l(r),[3,4];case 3:return s(!1),[7];case 4:return[2]}}))}));return function(){return r.apply(this,arguments)}}(),[t,n,e]);return a.useEffect((function(){f()}),[t,n,e,f]),{data:i,loading:u,refetch:f}},li=function(e){var t=e.rows,n=e.columns;return!Array.isArray(t)||t.length<1?null:{headerColumns:null!==n&&void 0!==n?n:[],bodyData:t.map((function(e){return Object.values(e)}))}},ci=function(e){var t=e.connectionString;return ai("SELECT n.nspname as \"Schema\",\n  c.relname as \"Name\",\n  CASE c.relkind WHEN 'r' THEN 'table' WHEN 'v' THEN 'view' WHEN 'm' THEN 'materialized view' WHEN 'i' THEN 'index' WHEN 'S' THEN 'sequence' WHEN 's' THEN 'special' WHEN 'f' THEN 'foreign table' WHEN 'p' THEN 'partitioned table' WHEN 'I' THEN 'partitioned index' END as \"Type\",\n  pg_catalog.pg_get_userbyid(c.relowner) as \"Owner\",\n  pg_catalog.pg_size_pretty(pg_catalog.pg_total_relation_size(c.oid)) as \"Size\",\n  pg_catalog.obj_description(c.oid, 'pg_class') as \"Description\"\nFROM pg_catalog.pg_class c\n     LEFT JOIN pg_catalog.pg_namespace n ON n.oid = c.relnamespace\nWHERE c.relkind IN ('r','p','v','m','S','f','')\n      AND n.nspname <> 'pg_catalog'\n      AND n.nspname <> 'information_schema'\n      AND n.nspname !~ '^pg_toast'\n  AND pg_catalog.pg_table_is_visible(c.oid)\nORDER BY 1,2;",t)},ui=(0,st.cn)(void 0),si=(0,st.cn)((function(e){var t=e(ui);return null===t||void 0===t?void 0:t.rows.reduce((function(e,t){var n=t.table_name,r=t.column_name;return e[n]||(e[n]=[]),e[n].push(r),e}),{})})),di=n(10035),fi=n(3652),pi=function(e){var t=e.headerTitle,n=e.onGoBack,i=e.children;return(0,r.BX)(y.G,{css:[g.l0.flex.column,g.l0.height("100%")],children:[(0,r.BX)(y.G,{css:[g.l0.flex.row,g.l0.py(16),g.l0.px(8),g.l0.align.center],children:[(0,r.tZ)(ce.h,{alt:"Go back",size:28,type:"button",onClick:n,children:(0,r.tZ)(fi.Z,{})}),(0,r.tZ)(Z.xv,{css:[g.l0.fontSize(16),g.l0.ml(8)],multiline:!1,children:t})]}),(0,r.tZ)(y.G,{css:[g.l0.overflow("auto"),g.l0.height("calc(100% - 60px)")],children:i})]})},hi=function(e){(0,ut.j)(ut.U3.DATABASE_USED,(0,N.Z)({type:"PostgreSQL",provider:"neon"},e))},vi=(0,st.cn)(["databaseManager"]),mi=(0,st.cn)(null,(function(e,t,n){var r=e(vi);t(vi,(0,Xt.Z)(r).concat([n])),hi({action:"pageNav",databasePage:n})})),gi=(0,st.cn)(null,(function(e,t){var n=e(vi);t(vi,n.slice(0,n.length-1))})),yi=(0,st.cn)((function(e){var t=e(vi);return t[t.length-1]})),Zi=function(){return(0,He.b9)(mi)},bi=function(){return(0,He.b9)(gi)},wi=n(5005),xi=n(40696),ki=(0,st.cn)(""),Ci=(0,st.cn)(null),Si=(0,st.cn)(null,(function(e,t,n){var r=n.query;r&&t(ki,r);var i=e(Ci);i&&i.dispatch({changes:{from:0,to:i.state.doc.length,insert:r}})})),Ti=n(85234),Ei=n.n(Ti),Ri=n(56581),Gi=(0,Ri.O4)("replDatabasesQueryHistory",[]),Ii=function(e,t){return!e.isPinned&&t.isPinned?1:e.isPinned&&!t.isPinned?-1:"number"===typeof e.pinnedTimestamp&&"number"===typeof t.pinnedTimestamp?e.pinnedTimestamp-t.pinnedTimestamp:t.timestamp-e.timestamp},_i=function(){return(0,Ot.lV)(a.useCallback((function(e,t,n){if(n){var r={id:Ei()(),data:n,timestamp:Date.now()},i=e(Gi),o=(0,F.ZP)(i,(function(e){!function(e,t){var n=e.findIndex((function(e){return!e.isPinned&&e.data===t.data}));-1!==n?e.splice(n,1,t):e.push(t),e.sort(Ii);var r=e.filter((function(e){return!e.isPinned})).length;if(r>=5){var i=r-5;e.splice(e.length-i,i)}}(e,r)}));t(Gi,o)}}),[]))},Di=n(49129),Bi=n(52367),Pi=n(8345),Ai=n(34227),Li=n(64804),Ui=n(72669),Xi=n(55143),Mi=n(72499),Ni=function(e){var t=e.id,n=e.data,i=e.isPinned,o=function(e){return(0,Ot.lV)(a.useCallback((function(t,n){var r=t(Gi).find((function(t){return t.id===e})),i=(null===r||void 0===r?void 0:r.data)||"";i&&(n(Si,{query:i}),hi({action:"queryHistoryItemSelected"}))}),[e]))}(t),l=function(e){return(0,Ot.lV)(a.useCallback((function(t,n){var r=t(Gi),i=(0,F.ZP)(r,(function(t){var n=t.find((function(t){return t.id===e}));n&&(n.isPinned=!n.isPinned,n.isPinned?n.pinnedTimestamp=Date.now():n.pinnedTimestamp=void 0),t.sort(Ii)}));n(Gi,i),hi({action:"queryHistoryItemPinned"})}),[e]))}(t);return(0,r.BX)(y.G,{css:[{borderTop:"1px solid ".concat(g.TV.outlineDefault),":hover":{background:g.TV.backgroundHigher}},g.l0.flex.row,g.l0.p(8),g.l0.color.foregroundDimmer,g.l0.align.center,g.l0.cursor.pointer],onClick:o,children:[(0,r.tZ)(Z.xv,{css:[g.l0.flex.growAndShrink(1)],multiline:!1,children:n}),(0,r.tZ)(ce.h,{alt:"Pin query",onClick:l,children:i?(0,r.tZ)(Pi.Z,{fill:g.TV.accentPrimaryDefault}):(0,r.tZ)(xi.Z,{})})]})},Oi=function(e){var t=e.onExpand,n=(0,He.Dv)(Gi);return(0,r.tZ)(ir.Q,{onClick:t,headerContent:(0,r.BX)(y.G,{css:[g.l0.rowWithGap(8),g.l0.align.center,g.l0.p(2)],children:[(0,r.tZ)(di.Z,{}),(0,r.tZ)(Z.xv,{css:[g.l0.color.foregroundDimmest],multiline:!1,children:"Query History"})]}),children:(0,r.tZ)(y.G,{css:[g.l0.colWithGap(8),g.l0.height("100%")],children:0===n.length?(0,r.tZ)(y.G,{css:[g.l0.p(8)],children:(0,r.tZ)(Z.xv,{css:[g.l0.color.foregroundDimmer],multiline:!1,children:"No query history"})}):(0,r.tZ)(y.G,{children:n.map((function(e){return(0,r.tZ)(Ni,(0,N.Z)({},e),e.id)}))})})})},Fi=new Mi.R((function(){return(0,Ur.W$)((0,Ui.VV)((0,r.tZ)("div",{css:[{fontFamily:g.TV.fontFamilyCode},g.l0.color.foregroundDimmest],children:"Type PostgreSQL queries here to use the database."})))})),Wi=new Xi.j((function(e){return Mr.Wl.high((0,Xr.sql)((0,N.Z)({dialect:Xr.PostgreSQL},e)))})),Hi=function(e){var t=e.queryResult,n=e.scrollRef;if(null===t||void 0===t?void 0:t.error)return(0,r.tZ)(y.G,{css:g.l0.px(8),children:(0,r.tZ)(Z.xv,{css:[g.l0.color.accentNegativeDefault],children:null===t||void 0===t?void 0:t.error})});if(!(null===t||void 0===t?void 0:t.rows))return null;var i=li(t);if(!i)return(0,r.tZ)(y.G,{css:g.l0.px(8),children:(0,r.tZ)(Z.xv,{css:[g.l0.color.accentPositiveDefault],children:"Query successful, no rows returned"})});var o=i.headerColumns,a=i.bodyData;return(0,r.tZ)(y.G,{css:g.l0.px(8),children:(0,r.tZ)(oi,{headerColumns:o,bodyData:a,scrollRef:n})})},Vi=(0,mt.iv)([g.l0.height("100%"),g.l0.position.relative,g.l0.overflow("auto")]),zi=(0,mt.iv)([g.l0.position.sticky,g.l0.top(0),g.l0.left(0),g.l0.zIndex(1),g.l0.backgroundColor.backgroundDefault]),ji=function(e){var t=e.connectionString,n=(0,o.Z)((0,He.KO)(ki),2),i=n[0],l=n[1],c=(0,Li.Z)(),u=c.ref,s=c.view,f=(0,o.Z)(a.useState(!1),2),p=f[0],h=f[1];a.useEffect((function(){return function(){var e;l(null!==(e=null===s||void 0===s?void 0:s.state.doc.toString())&&void 0!==e?e:"")}}),[l,null===s||void 0===s?void 0:s.state.doc]);var v=(0,He.b9)(Ci);a.useEffect((function(){v(s)}),[v,s]),function(e){var t=e.connectionString,n=ai("SELECT table_name, column_name, data_type FROM information_schema.columns WHERE table_schema = 'public';",t).data,r=(0,He.b9)(ui);a.useEffect((function(){r(n)}),[n,r])}({connectionString:t});var m=(0,He.Dv)(si),Z=(0,Di.Lh)();(0,Bi.Z)({view:s,filePath:"mark.sql",decorations:Z});var b=(0,d.Z)().psql,w=(0,o.Z)(a.useState(),2),x=w[0],k=w[1],C=(0,o.Z)(a.useState(!1),2),S=C[0],T=C[1],E=_i(),R=a.useCallback((function(){function e(){return(e=(0,ot.Z)((function(){var e,n;return(0,lt.__generator)(this,(function(r){switch(r.label){case 0:if(!s)return[2];r.label=1;case 1:return r.trys.push([1,,3,4]),T(!0),e=null===s||void 0===s?void 0:s.state.doc.toString(),E(e),[4,b.run({query:e,connectionString:t})];case 2:return n=r.sent(),k(n),hi({action:"queryRan"}),[3,4];case 3:return T(!1),[7];case 4:return[2]}}))}))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[t,b,E,s]),G=Zi(),I=a.useCallback((function(){G("databaseManager")}),[G]),_=a.useCallback((function(){G("tableSchemas")}),[G]),D=a.useRef(null),B=[Wi.use({schema:m})];return(0,r.tZ)(pi,{headerTitle:"Database Contents",onGoBack:I,children:(0,r.BX)(y.G,{css:[g.l0.colWithGap(8),Vi],innerRef:D,children:[(0,r.BX)(y.G,{css:[g.l0.colWithGap(8),g.l0.px(8),g.l0.pb(8),p?null:zi],children:[(0,r.BX)(y.G,{css:[{border:"1px solid ".concat(g.TV.outlineDefault)},g.l0.borderRadius(2)],children:[(0,r.tZ)(Ai.Z,{ref:u,css:[g.l0.viewStyle,g.l0.backgroundColor.backgroundDefault,g.l0.borderRadius(8),g.l0.overflow("auto"),g.l0.maxHeight(300),{".cm-panel":{zIndex:1}}],initialDoc:i,extensions:[Fi,B]}),(0,r.tZ)(Oi,{expanded:p,onExpand:function(){h((function(e){return!e}))}})]}),(0,r.tZ)(je.zx,{text:"Run Query",iconLeft:S?(0,r.tZ)(ze.Z,{}):(0,r.tZ)(J.Z,{}),onClick:R,disabled:S})]}),(0,r.tZ)(Hi,{queryResult:x,scrollRef:D}),(0,r.tZ)(y.G,{css:[g.l0.colWithGap(8),g.l0.px(8),g.l0.py(8)],children:(0,r.tZ)(je.zx,{css:g.l0.backgroundColor.backgroundDefault,text:"Show All Contents",iconLeft:(0,r.tZ)(wi.Z,{}),onClick:_})})]})})},qi=n(49085),$i=n(34489),Yi=n(22011),Ki=n(56169),Qi="DATABASE_URL",Ji="PGDATABASE",eo="PGHOST",to="PGPORT",no="5432",ro="PGUSER",io="PGPASSWORD",oo=function(e){var t=e.envVarKey,n=e.envVarValue,i=e.isSecret,l=(0,Ki.H)()("db-env-var-".concat(t)),c=(0,o.Z)(a.useState(!1),2),s=c[0],d=c[1],f=!i||s?"text":"password";return(0,r.BX)(y.G,{css:[g.l0.flex.row,g.l0.flex.wrap,g.l0.align.end,g.l0.pb(8),{gap:g.TV.space8}],children:[(0,r.BX)(y.G,{css:[g.l0.colWithGap(8),{flexBasis:250},g.l0.flex.grow(0),g.l0.flex.shrink(1)],children:[(0,r.tZ)("label",{css:g.l0.color.foregroundDimmer,htmlFor:l,children:t}),(0,r.tZ)(Bn.II,{id:l,type:f,readOnly:!0,value:n})]}),(0,r.tZ)(je.zx,{text:"Copy",iconLeft:(0,r.tZ)(qi.Z,{}),onClick:function(){(0,Un.Z)(n),hi({action:"envVarCopied",envVarKey:t,envVarType:"value"})}}),i?(0,r.tZ)(je.zx,{text:"View",iconLeft:(0,r.tZ)(u.Z,{}),onClick:function(){return d((function(e){return!e}))}}):null]})},ao=function(e){var t,n=e.connectionString,r=e.databaseName,o=new URL(n.replace("postgres://","https://")),a=o.host,l=o.username,c=o.password;return t={},(0,i.Z)(t,Qi,n),(0,i.Z)(t,Ji,r),(0,i.Z)(t,eo,a),(0,i.Z)(t,to,no),(0,i.Z)(t,ro,l),(0,i.Z)(t,io,c),t},lo=function(){var e=(0,d.Z)().fs;return a.useCallback((function(t){var n=t.connectionString,r=t.databaseName,i=ao({connectionString:n,databaseName:r});function a(){return a=(0,ot.Z)((function(){var t,n,r,a,l,c,u,s,d,f,p,h,v,m;return(0,lt.__generator)(this,(function(g){switch(g.label){case 0:return[4,e.readFile(".env")];case 1:if(t=g.sent(),n="",t.error){if(t.error!==w.Df.NotFound)throw new Error("Error getting .env");n=""}else n=t.content;r=$i.Z.parse(n.toString()),a=!1,l=(0,N.Z)({},r),c=!0,u=!1,s=void 0;try{for(d=Object.entries(i)[Symbol.iterator]();!(c=(f=d.next()).done);c=!0)p=(0,o.Z)(f.value,2),h=p[0],v=p[1],l[h]!==v&&(a=!0,l[h]=v)}catch(y){u=!0,s=y}finally{try{c||null==d.return||d.return()}finally{if(u)throw s}}return a?(m=$i.Z.serialize(l),[4,e.writeFile(".env",Yi.Z.from(m))]):[2];case 2:return g.sent(),[2]}}))})),a.apply(this,arguments)}!function(){a.apply(this,arguments)}()}),[e])},co=function(e){var t=e.connectionString,n=e.databaseName,i=(0,xt.Z)((function(){return ao({connectionString:t,databaseName:n})}),[t,n]),o=i.PGHOST,l=i.PGUSER,c=i.PGPASSWORD,u=lo();return a.useEffect((function(){u({connectionString:t,databaseName:n})}),[t,n,u]),(0,r.BX)(y.G,{css:[g.l0.colWithGap(8)],children:[(0,r.tZ)(oo,{envVarKey:Qi,envVarValue:t,isSecret:!0}),(0,r.tZ)(oo,{envVarKey:Ji,envVarValue:n}),(0,r.tZ)(oo,{envVarKey:eo,envVarValue:o}),(0,r.tZ)(oo,{envVarKey:to,envVarValue:no}),(0,r.tZ)(oo,{envVarKey:ro,envVarValue:l}),(0,r.tZ)(oo,{envVarKey:io,envVarValue:c,isSecret:!0})]})},uo=["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],so=["B","KB","MB","GB","TB","PB","EB","ZB","YB"];function fo(e,t){var n,r=t||{},i=r.signed,o=void 0!==i&&i,a=r.digitsNumber,l=void 0===a?2:a,c=r.isKib,u=void 0===c||c,s=r.isKibNotation,d=void 0!==s&&s;if(n=o?e<0?"-":"+":"",0===e)return"".concat(n,"0B");var f=u?1024:1e3,p=d?uo:so,h=Math.floor(Math.log(Math.abs(e))/Math.log(f));return"".concat(n).concat(parseFloat(Math.abs(e/Math.pow(f,h)).toFixed(l))).concat(p[h])}var po=n(73162),ho=n(48667),vo=function(e){var t=e.tableData,n=e.scrollRef,i=t.headerColumns,o=t.bodyData,l=Zi(),c=a.useCallback((function(e){var t=parseInt(String(e),10);if(!isNaN(t)){var n=o[t][i.indexOf("Name")];l("table/".concat(n))}}),[l,i,o]);return(0,r.tZ)(oi,{headerColumns:i,bodyData:o,onRowAction:c,scrollRef:n})},mo=function(e){var t=e.psqlQueryResult,n=e.scrollRef,i=t.data;if(t.loading)return(0,r.tZ)(y.G,{css:[g.l0.flex.row,g.l0.justify.center,g.l0.p(32)],children:(0,r.tZ)(ze.Z,{})});if(null===i||void 0===i?void 0:i.error)return(0,r.tZ)(y.G,{css:[g.l0.flex.row,g.l0.justify.center,g.l0.p(32)],children:(0,r.tZ)(Z.xv,{css:[g.l0.color.accentNegativeDefault,g.l0.maxWidth("100%")],children:null===i||void 0===i?void 0:i.error})});var o=i?li(i):null;return o?(0,r.tZ)(vo,{tableData:o,scrollRef:n}):(0,r.tZ)(y.G,{css:[g.l0.flex.row,g.l0.justify.center,g.l0.p(32)],children:(0,r.tZ)(Z.xv,{css:[g.l0.color.accentPositiveDefault,g.l0.maxWidth("100%")],children:"No tables found"})})},go=function(e){var t=e.connectionString,n=bi(),i=a.useRef(null),o=ci({connectionString:t}),l=o.refetch;return(0,r.BX)(y.G,{css:[g.l0.flex.column,g.l0.height("100%")],children:[(0,r.BX)(y.G,{css:[g.l0.flex.row,g.l0.py(16),g.l0.px(8),g.l0.align.center],children:[(0,r.tZ)(ce.h,{alt:"Go back",size:28,type:"button",onClick:n,children:(0,r.tZ)(fi.Z,{})}),(0,r.tZ)(y.G,{css:[g.l0.flex.growAndShrink(1)],children:(0,r.tZ)(Z.xv,{css:[g.l0.fontSize(16),g.l0.ml(8)],multiline:!1,children:"All tables"})}),(0,r.tZ)(ce.h,{alt:"Refresh",size:24,type:"button",onClick:l,children:(0,r.tZ)(ho.Z,{})})]}),(0,r.tZ)(y.G,{css:[g.l0.flex.growAndShrink(1),g.l0.overflow("auto"),g.l0.px(8)],innerRef:i,children:(0,r.tZ)(mo,{psqlQueryResult:o,scrollRef:i})})]})},yo="1px solid "+g.TV.outlineDefault,Zo=(0,mt.iv)([g.l0.p(8),g.l0.backgroundColor.backgroundDefault,g.l0.align.center,g.l0.borderRadius(0),{borderLeft:yo,borderRight:yo,borderBottom:yo},{":not([disabled])":{":focus":{boxShadow:"none",outline:"2px solid ".concat(g.TV.accentPrimaryDefault),outlineOffset:"-2px"},":hover":{backgroundColor:g.TV.backgroundHigher}}}]),bo=function(e){var t=e.connectionString,n=ci({connectionString:t}),i=n.data,l=n.loading,c=(0,o.Z)(a.useState(!1),2),u=c[0],s=c[1],d=a.useCallback((function(){s(!0)}),[]),f=i?li(i):null,p=a.useRef(null);if(!f||l)return null;var h=f.bodyData.length,v=f.headerColumns,m=f.bodyData,Z=h-5>0&&!u;return(0,r.tZ)(r.HY,{children:(0,r.BX)(y.G,{css:[g.l0.overflow("auto"),g.l0.display.grid],innerRef:p,children:[(0,r.tZ)(vo,{tableData:{headerColumns:v,bodyData:u?m:m.slice(0,5)},scrollRef:p}),Z?(0,r.tZ)(je.zx,{text:"".concat(h-5," more"),css:Zo,onClick:d}):null]})})},wo=n(14351),xo=10*Math.pow(1024,3),ko=wo.z4["neon-database-preview"],Co=(0,wo.qJ)(ko),So="".concat(ko.toLocaleString()," Cycles (").concat(Co,") / day"),To="https://docs.replit.com/hosting/databases/postgresql-on-replit",Eo=function(e){var t=e.dbSize,n=e.totalSize,i=t,o=n,a=fo(t),l=fo(n),c=(0,xt.Z)((function(){return(0,st.cn)(i)}),[i]),u=(0,xt.Z)((function(){return(0,st.cn)(o)}),[o]);return(0,r.BX)(r.HY,{children:[(0,r.BX)(Z.xv,{css:g.l0.color.foregroundDimmer,multiline:!1,children:[a,"/",l]}),(0,r.tZ)(po.hF,{totalAtom:u,currentAtom:c,limitText:"".concat(a," / ").concat(l),inactive:!1,measure:"MB"})]})},Ro=function(e){var t,n,i=e.connectionString,o=ai("SELECT sum(pg_database_size(datname)) FROM pg_database;",i),a=o.data,l=o.loading,c=ai("SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' ORDER BY table_name;",i),u=c.data,s=c.loading,d=parseInt(null!==(n=null===(t=null===a||void 0===a?void 0:a.rows[0])||void 0===t?void 0:t.sum)&&void 0!==n?n:"0",10),f=null===u||void 0===u?void 0:u.rows.length;return(0,r.BX)(y.G,{css:g.l0.rowWithGap(8),children:[s?null:(0,r.BX)(Z.xv,{multiline:!1,children:[f," ",1===f?"table":"tables"]}),l?null:(0,r.tZ)(Eo,{dbSize:d,totalSize:xo})]})},Go=function(e){var t=e.connectionString,n=e.onOpenDatabaseViewerClick;return(0,r.BX)(y.G,{css:[g.l0.colWithGap(8)],children:[(0,r.tZ)(Ro,{connectionString:t}),(0,r.tZ)(bo,{connectionString:t}),(0,r.tZ)(je.zx,{text:"See Database Contents",iconLeft:(0,r.tZ)(wi.Z,{}),onClick:n})]})},Io=n(87762),_o=function(e){var t=e.size,n=void 0===t?16:t;return(0,r.BX)("svg",{viewBox:"0 0 128 36",preserveAspectRatio:"xMidYMin",height:n,fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.tZ)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 6.207A6.207 6.207 0 0 1 6.207 0h23.586A6.207 6.207 0 0 1 36 6.207v20.06c0 3.546-4.488 5.085-6.664 2.286l-6.805-8.754v10.615A5.586 5.586 0 0 1 16.945 36H6.207A6.207 6.207 0 0 1 0 29.793V6.207Zm6.207-1.241c-.686 0-1.241.555-1.241 1.24v23.587c0 .686.555 1.242 1.24 1.242h10.925c.343 0 .434-.278.434-.621V16.18c0-3.547 4.488-5.086 6.665-2.286l6.805 8.753V6.207c0-.686.064-1.241-.621-1.241H6.207Z",fill:"#12FFF7"}),(0,r.tZ)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 6.207A6.207 6.207 0 0 1 6.207 0h23.586A6.207 6.207 0 0 1 36 6.207v20.06c0 3.546-4.488 5.085-6.664 2.286l-6.805-8.754v10.615A5.586 5.586 0 0 1 16.945 36H6.207A6.207 6.207 0 0 1 0 29.793V6.207Zm6.207-1.241c-.686 0-1.241.555-1.241 1.24v23.587c0 .686.555 1.242 1.24 1.242h10.925c.343 0 .434-.278.434-.621V16.18c0-3.547 4.488-5.086 6.665-2.286l6.805 8.753V6.207c0-.686.064-1.241-.621-1.241H6.207Z",fill:"url(#a)"}),(0,r.tZ)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 6.207A6.207 6.207 0 0 1 6.207 0h23.586A6.207 6.207 0 0 1 36 6.207v20.06c0 3.546-4.488 5.085-6.664 2.286l-6.805-8.754v10.615A5.586 5.586 0 0 1 16.945 36H6.207A6.207 6.207 0 0 1 0 29.793V6.207Zm6.207-1.241c-.686 0-1.241.555-1.241 1.24v23.587c0 .686.555 1.242 1.24 1.242h10.925c.343 0 .434-.278.434-.621V16.18c0-3.547 4.488-5.086 6.665-2.286l6.805 8.753V6.207c0-.686.064-1.241-.621-1.241H6.207Z",fill:"url(#b)"}),(0,r.tZ)("path",{d:"M29.793 0A6.207 6.207 0 0 1 36 6.207v20.06c0 3.546-4.488 5.085-6.664 2.286l-6.805-8.754v10.615A5.586 5.586 0 0 1 16.945 36a.62.62 0 0 0 .62-.62v-19.2c0-3.547 4.488-5.086 6.665-2.286l6.805 8.753V1.241C31.035.556 30.479 0 29.793 0Z",fill:"#B9FFB3"}),(0,r.tZ)("path",{d:"M60.686 10.6v9.416l-9.13-9.416h-4.752V26h4.334V15.88L61.082 26h3.938V10.6h-4.334ZM73.054 22.568V19.84h9.702v-3.278h-9.702v-2.53h11.77V10.6H68.632V26h16.434v-3.432H73.054ZM96.583 26.506c6.094 0 10.054-2.992 10.054-8.206 0-5.214-3.96-8.206-10.054-8.206S86.551 13.086 86.551 18.3c0 5.214 3.938 8.206 10.032 8.206Zm0-3.652c-3.388 0-5.478-1.65-5.478-4.554 0-2.904 2.112-4.554 5.478-4.554 3.388 0 5.478 1.65 5.478 4.554 0 2.904-2.09 4.554-5.478 4.554ZM123.249 10.6v9.416l-9.13-9.416h-4.752V26h4.334V15.88L123.645 26h3.938V10.6h-4.334Z",fill:"currentColor"}),(0,r.BX)("defs",{children:[(0,r.BX)("linearGradient",{id:"a",x1:"36",y1:"36",x2:"4.345",y2:"0",gradientUnits:"userSpaceOnUse",children:[(0,r.tZ)("stop",{stopColor:"#B9FFB3"}),(0,r.tZ)("stop",{offset:"1",stopColor:"#B9FFB3",stopOpacity:"0"})]}),(0,r.BX)("linearGradient",{id:"b",x1:"36",y1:"36",x2:"14.617",y2:"27.683",gradientUnits:"userSpaceOnUse",children:[(0,r.tZ)("stop",{stopColor:"#1A1A1A",stopOpacity:".9"}),(0,r.tZ)("stop",{offset:"1",stopColor:"#1A1A1A",stopOpacity:"0"})]})]})]})},Do=(0,mt.iv)([g.l0.color.foregroundDimmest,{textDecoration:"underline"}]),Bo=function(){return(0,r.tZ)(y.G,{css:[g.l0.colWithGap(8),g.l0.py(8),g.l0.width("100%")],children:(0,r.BX)(y.G,{css:[g.l0.rowWithGap(8),g.l0.align.center,g.l0.justify.spaceBetween],children:[(0,r.tZ)("a",{target:"_blank",href:To,css:Do,children:"Docs"}),(0,r.BX)(y.G,{css:[g.l0.rowWithGap(8),g.l0.align.center],children:[(0,r.tZ)(Z.xv,{css:[g.l0.fontSize(14)],multiline:!1,children:"Powered by"}),(0,r.tZ)(_o,{})]})]})})},Po=function(e){var t=e.psqlQueryResult,n=e.tableName,i=e.connectionString,o=e.scrollRef,a=t.data,l=t.loading,c=function(e){var t=e.tableName,n=e.connectionString,r=ai(function(e){return"SELECT table_name, column_name, data_type FROM information_schema.columns WHERE table_schema = 'public' AND table_name = '".concat(e.replace(/"/g,'""'),"';")}(t),n).data;return r}({tableName:n,connectionString:i});if(l)return(0,r.tZ)(y.G,{css:[g.l0.flex.row,g.l0.justify.center,g.l0.p(32)],children:(0,r.tZ)(ze.Z,{})});if(null===a||void 0===a?void 0:a.error)return(0,r.tZ)(y.G,{css:[g.l0.flex.row,g.l0.justify.center,g.l0.p(32)],children:(0,r.tZ)(Z.xv,{css:[g.l0.color.accentNegativeDefault,g.l0.maxWidth("100%")],children:null===a||void 0===a?void 0:a.error})});var u=a?li(a):null;if(!u)return(0,r.tZ)(y.G,{css:[g.l0.flex.row,g.l0.justify.center,g.l0.p(32)],children:(0,r.tZ)(Z.xv,{css:[g.l0.color.accentPositiveDefault,g.l0.maxWidth("100%")],children:"No rows"})});var s=u.headerColumns,d=u.bodyData;return(0,r.tZ)(oi,{headerColumns:s.map((function(e,t){var n,i=null===c||void 0===c||null===(n=c.rows)||void 0===n?void 0:n.find((function(t){return t.column_name===e})),o=null===i||void 0===i?void 0:i.data_type,a=o?(0,r.tZ)(Y.D,{text:o}):null;return(0,r.BX)(y.G,{css:[g.l0.rowWithGap(8),g.l0.align.center],children:[(0,r.tZ)(Z.xv,{multiline:!1,children:e}),a]},t)})),bodyData:d,scrollRef:o})},Ao=function(e){var t=e.tableName,n=e.connectionString,i=bi(),o=a.useRef(null),l=ai('SELECT * FROM "'.concat(t.replace(/"/g,'""'),'" LIMIT ').concat(500),n),c=l.refetch;return(0,r.BX)(y.G,{css:[g.l0.flex.column,g.l0.height("100%")],children:[(0,r.BX)(y.G,{css:[g.l0.flex.row,g.l0.py(16),g.l0.px(8),g.l0.align.center],children:[(0,r.tZ)(ce.h,{alt:"Go back",size:28,type:"button",onClick:i,children:(0,r.tZ)(fi.Z,{})}),(0,r.tZ)(y.G,{css:[g.l0.flex.growAndShrink(1)],children:(0,r.tZ)(Z.xv,{css:[g.l0.fontSize(16),g.l0.ml(8)],multiline:!1,children:t})}),(0,r.tZ)(ce.h,{alt:"Refresh",size:24,type:"button",onClick:c,children:(0,r.tZ)(ho.Z,{})})]}),(0,r.tZ)(y.G,{css:[g.l0.flex.growAndShrink(1),g.l0.overflow("auto"),g.l0.px(8)],innerRef:o,children:(0,r.tZ)(Po,{psqlQueryResult:l,tableName:t,connectionString:n,scrollRef:o})})]})},Lo=function(e){var t=e.cyclesLow;return(0,r.BX)(r.HY,{children:[(0,r.tZ)(Z.xv,{css:[g.l0.fontSize(12),g.l0.color.foregroundDimmest],children:"You\u2019re paying ".concat(So)}),t?(0,r.tZ)(y.G,{children:(0,r.tZ)(Lr.E,{icon:(0,r.tZ)(Q.Z,{}),colorway:"warning",text:"If your database use continues, you will be out of\n Cycles in [X] days and access to your database will be paused. \n Buy more Cycles or add a recurring Cycles subscription to prevent that from happening."})}):null]})},Uo=n(8622),Xo=n(20811),Mo=n(26721),No=n(82108),Oo=n(66016),Fo=n(48506);var Wo=n(49810),Ho=n(47900),Vo=(0,st.cn)(null),zo=(0,st.cn)(null),jo=function(e){var t=e.title,n=e.children,i=e.isAccordion,o=e.sectionStyles;return(0,r.tZ)(y.G,{css:[g.l0.colWithGap(8),g.l0.pt(8),{borderTopWidth:1,borderTopStyle:"solid",borderTopColor:g.TV.outlineDefault},o],children:i?(0,r.tZ)(ir.Q,{headerContent:(0,r.tZ)(y.G,{css:[g.l0.rowWithGap(8),g.l0.align.center],children:(0,r.tZ)(Z.xv,{variant:"subheadDefault",multiline:!1,children:t})}),children:(0,r.tZ)(y.G,{css:[g.l0.p(12),g.l0.colWithGap(8),g.l0.height("100%")],children:n})}):(0,r.BX)(r.HY,{children:[(0,r.tZ)(Z.xv,{multiline:!1,css:[g.l0.fontSize(g.TV.fontSizeSubheadDefault),g.l0.fontWeight.medium],children:t}),n]})})},qo=function(e){var t,n=e.neonDatabases,i=e.onDatabaseDeleted,l=e.onDatabaseUnfreezed,c=n[0],u=(0,Ue.Z)().showError,s=(0,Xe.Z)(),d=function(){var e=a.useContext(Fo.Z);if(!e)throw new Error("Expected Repl info to be in context");return e.slug}(),f=(0,He.Dv)(yi),p=Zi(),h=a.useCallback((function(){p("queryEditor")}),[p]),v=(0,o.Z)(function(e){var t=(0,N.Z)({},_r,e);return Tr.D(Br,t)}(),2),m=v[0],b=v[1].loading,w=a.useCallback((function(){G(!0)}),[]),x=(0,No.Z)({forceFetch:!1}),k=x.cycles,C=x.formattedBalanceValue,S="number"===typeof k&&k>ko,T=a.useCallback((0,ot.Z)((function(){var e,t,n;return(0,lt.__generator)(this,(function(r){switch(r.label){case 0:return[4,m({variables:{input:{replId:s,databaseId:c.databaseId}}})];case 1:return e=r.sent(),t=e.data,n=e.errors,G(!1),n&&n.length>0?(u("Error when deleting Neon database: ".concat(null===n||void 0===n?void 0:n.join())),hi({action:"removed",success:!1}),[2]):"DeleteNeonDatabaseResult"!==(null===t||void 0===t?void 0:t.deleteNeonDatabase.__typename)?(u("Error: ".concat(null===t||void 0===t?void 0:t.deleteNeonDatabase.message)),hi({action:"removed",success:!1}),[2]):((null===t||void 0===t?void 0:t.deleteNeonDatabase.success)?(i(),hi({action:"removed",success:!0})):(u("Error: Delete Neon Database failed."),hi({action:"removed",success:!1})),[2])}}))})),[m,c.databaseId,i,s,u]),E=(0,o.Z)(a.useState(!1),2),R=E[0],G=E[1],I=a.useCallback((function(){G(!1)}),[]),_=(0,o.Z)(a.useState(!1),2),D=_[0],B=_[1],P=a.useCallback((function(){B(!0)}),[]),A=(0,o.Z)(function(e){var t=(0,N.Z)({},_r,e);return Tr.D(Ar,t)}(),2),L=A[0],U=A[1].loading,X=a.useCallback((0,ot.Z)((function(){var e,t,n;return(0,lt.__generator)(this,(function(r){switch(r.label){case 0:return[4,L({variables:{input:{neonProjectId:c.projectId,replId:s}}})];case 1:return e=r.sent(),t=e.data,(n=e.errors)&&n.length>0?(u("Error when unfreezing Neon database: ".concat(null===n||void 0===n?void 0:n.join())),hi({action:"unfreeze",success:!1}),[2]):"UnfreezeNeonDatabaseResult"!==(null===t||void 0===t?void 0:t.unfreezeNeonDatabase.__typename)?(u("Error: Unfreezes Neon Database failed."),hi({action:"unfreeze",success:!1}),[2]):((null===t||void 0===t?void 0:t.unfreezeNeonDatabase.success)?(l(),hi({action:"unfreeze",success:!0})):(u("Error: Unfreezes Neon Database failed."),hi({action:"unfreeze",success:!1})),[2])}}))})),[c.projectId,l,s,u,L]),M=(0,He.Dv)(zo),O=ao({connectionString:c.connectionString,databaseName:c.databaseName}).PGHOST.split(".")[0],F=M||"".concat(c.connectionString,"/").concat(c.databaseName,"?sslmode=require&options=project%3D").concat(O);if("queryEditor"===f)return(0,r.tZ)(ji,{connectionString:F});if("tableSchemas"===f)return(0,r.tZ)(go,{connectionString:F});if(f.startsWith("table/")){var W=f.slice(f.indexOf("/")+1);return(0,r.tZ)(Ao,{tableName:W,connectionString:F})}return t=c.isFrozen?(0,r.BX)(r.HY,{children:[(0,r.BX)(y.G,{css:[g.l0.rowWithGap(8),g.l0.align.center],children:[(0,r.tZ)(y.G,{css:[g.l0.width(8),g.l0.height(8),g.l0.backgroundColor.foregroundDimmer,g.l0.borderRadius("full")]}),(0,r.tZ)(Z.xv,{css:[g.l0.color.foregroundDimmest],multiline:!1,children:"Database paused"})]}),(0,r.BX)(Z.xv,{css:[g.l0.fontSize(12),g.l0.color.foregroundDimmest],children:["Databases cost ",So]}),(0,r.BX)(y.G,{css:[g.l0.colWithGap(8),g.l0.align.center],children:[(0,r.tZ)(De.Z,{size:32,fill:g.TV.foregroundDimmest,css:g.l0.mt(32)}),(0,r.BX)(Z.xv,{variant:"subheadDefault",css:[g.l0.my(16)],multiline:!1,children:["Your Database is paused. You have ",C," cycles."]}),(0,r.BX)(Z.xv,{children:["Access to your databases will be paused until you"," ",S?"use cycles to resume database":"refill your Cycles balance","."]}),S?(0,r.tZ)(je.zx,{css:g.l0.pt(8),iconLeft:(0,r.tZ)(Oo.Z,{}),onClick:X,disabled:U,text:"Unpause Database",colorway:"primary"}):null,(0,r.tZ)(je.zx,{css:g.l0.pt(8),iconLeft:(0,r.tZ)(Uo.Z,{}),onClick:P,text:S?"Buy more cycles":"Buy Cycles"})]}),(0,r.tZ)(Mo.Z,{noPadding:!0,isOpen:D,maxWidth:Xo.W,onRequestClose:function(){return B(!1)},fitContent:!0,replTitle:d,uponPurchaseGoTo:"workspace",context:"workspace_postgresql_pane",initialTab:"cycles"})]}):(0,r.BX)(r.HY,{children:[(0,r.BX)(y.G,{css:[g.l0.rowWithGap(8),g.l0.align.center],children:[(0,r.tZ)(y.G,{css:[g.l0.width(8),g.l0.height(8),g.l0.backgroundColor.accentPositiveStronger,g.l0.borderRadius("full"),{filter:"drop-shadow(0 0 6px ".concat(g.TV.accentPositiveStronger,")")}]}),(0,r.tZ)(Z.xv,{css:[g.l0.color.accentPositiveStronger],multiline:!1,children:"Database connected"})]}),(0,r.tZ)(Lo,{}),(0,r.tZ)(jo,{title:"Database Info",children:(0,r.tZ)(Go,{connectionString:F,onOpenDatabaseViewerClick:h})}),(0,r.tZ)(jo,{title:"Using the database",isAccordion:!0,children:(0,r.tZ)(Ho.ZP,{css:[Wo.Z,g.l0.maxWidth("100%")],children:"\nPostgreSQL is a powerful open source relational database system that is widely used in web applications and other software development projects. You can easily create a production-ready PostgreSQL database directly within Replit. For more information on PostgreSQL, visit the [official documentation](https://www.postgresql.org/docs/). Repls use PostgreSQL version 15.\n\nHere is some information to help you get started:\n\n1. Replit databases are backed by [Neon](https://neon.tech/). The [Neon documentation](https://neon.tech/docs/connect/connect-from-any-app#connection-examples) provides guides on how to connect various frameworks, such as Django, to your PostgreSQL database.\n\n1. Environment Variables: We provided environment variables `DATABASE_URL`, `PGDATABASE`, `PGHOST`, `PGHOST`, `PGPORT`, `PGUSER`, `PGPASSWORD`. Provide these values to your framework of choice to connect to your database.\n\n1. Connection pooling: If you need to enable connection pooling for any reason, contact us at support@repl.it.\n\n1. Compute lifecycle: Neon databases go to sleep after 5 minutes of inactivity. You may experience disconnects or reconnects depending on your client.\n"})}),(0,r.tZ)(jo,{title:"Environment variables",isAccordion:!0,children:(0,r.tZ)(co,{connectionString:F,databaseName:c.databaseName})})]}),(0,r.BX)(y.G,{css:[g.l0.colWithGap(0),g.l0.height("100%"),g.l0.p(8)],children:[(0,r.tZ)(y.G,{css:[g.l0.colWithGap(16),g.l0.flex.grow(1),g.l0.flex.shrink(0)],children:t}),(0,r.tZ)(y.G,{css:[g.l0.pt(16)],children:R||b?(0,r.BX)($.Tg,{css:[g.l0.p(8),g.l0.colWithGap(8)],elevated:!0,children:[(0,r.tZ)(Z.xv,{children:"Removing this database will remove access to the data for this Repl, and remove the daily Cycles subscription of ".concat(So,".")}),(0,r.tZ)(Lr.E,{icon:(0,r.tZ)(Q.Z,{}),colorway:"warning",text:"This action cannot be undone."}),(0,r.tZ)(je.zx,{text:"Yes, Remove Database",colorway:"negative",disabled:b,iconLeft:(0,r.tZ)(q.Z,{}),onClick:T}),(0,r.tZ)(je.zx,{text:"Cancel",disabled:b,onClick:I})]}):(0,r.tZ)(je.zx,{css:[g.l0.py(8)],text:"Remove Database",disabled:b,iconLeft:(0,r.tZ)(q.Z,{}),onClick:w})}),(0,r.tZ)(Bo,{})]})},$o=n(86302),Yo=n(45157),Ko=n(93658),Qo=n(5889),Jo=n(32973),ea="Buy Cycles & Create a DB",ta="Use Cycles to create a DB",na='Press "'.concat(ea,'" to initiate a daily Cycles subscription and activate a Neon Database. You will be redirected to our payment processor.\n'),ra='Press "'.concat(ta,'" to initiate a daily Cycles subscription and activate a Neon Database.'),ia=function(e){var t=e.onDatabaseCreated,n=(0,Xe.Z)(),i=(0,Ue.Z)().showError,l=(0,o.Z)(function(e){var t=(0,N.Z)({},_r,e);return Tr.D(Dr,t)}(),2),c=l[0],u=l[1].loading,s=(0,No.Z)({forceFetch:!0}),d=s.cycles,f=s.loading,p=null!=d&&d>=ko,h=f?"Loading Cycles Balance":p?ta:ea,v=p?ra:na,m=a.useCallback((0,ot.Z)((function(){var e,r,o,a,l,u,s,d,f;return(0,lt.__generator)(this,(function(p){switch(p.label){case 0:return[4,c({variables:{input:{replId:n}}})];case 1:return e=p.sent(),r=e.data,(o=e.errors)&&o.length>0?(i("Error when creating Neon database: ".concat(null===o||void 0===o?void 0:o.join())),hi({action:"created",success:!1}),[2]):"CreateNeonDatabaseResult"!==(null===r||void 0===r?void 0:r.createNeonDatabase.__typename)?(i("Error: ".concat(null===r||void 0===r?void 0:r.createNeonDatabase.message)),hi({action:"created",success:!1}),[2]):(a=r.createNeonDatabase,l=a.databaseId,u=a.databaseName,s=a.connectionString,d=a.projectId,f=a.isFrozen,t({__typename:"NeonDatabase",databaseId:l,databaseName:u,connectionString:s,projectId:d,isFrozen:f}),hi({action:"created",success:!0}),[2])}}))})),[c,n,i,t]),b=(0,o.Z)(a.useState(!1),2),w=b[0],x=b[1],k=a.useCallback((0,ot.Z)((function(){return(0,lt.__generator)(this,(function(e){return x(!0),[2]}))})),[]),C=a.useCallback((0,ot.Z)((function(){return(0,lt.__generator)(this,(function(e){return x(!1),[2]}))})),[]),S=a.useCallback((0,ot.Z)((function(){return(0,lt.__generator)(this,(function(e){switch(e.label){case 0:return[4,m()];case 1:return e.sent(),x(!1),[2]}}))})),[m]);return(0,r.BX)(y.G,{css:[g.l0.colWithGap(0),g.l0.height("100%"),g.l0.align.center,g.l0.p(8)],children:[(0,r.BX)(y.G,{css:[g.l0.colWithGap(16),g.l0.flex.grow(1),g.l0.flex.shrink(0),g.l0.maxWidth(600)],children:[(0,r.BX)(y.G,{css:[g.l0.colWithGap(8),g.l0.align.center],children:[(0,r.tZ)(y.G,{css:[g.l0.p(16)],children:(0,r.tZ)(Qo.Z,{src:"/public/images/db_illustration.png",width:"144px",height:"144px",alt:"FPO visual"})}),(0,r.tZ)(Z.xv,{css:[g.l0.fontSize(16),g.l0.fontWeight.bold],multiline:!1,children:"Fully-managed PostgreSQL database"}),(0,r.tZ)(Z.xv,{css:[g.l0.fontSize(14)],multiline:!1,children:"10GB of fast read/write storage"}),(0,r.BX)(y.G,{css:[g.l0.rowWithGap(8),g.l0.align.center],children:[(0,r.tZ)(Z.xv,{css:[g.l0.fontSize(14)],multiline:!1,children:So}),(0,r.tZ)(ce.h,{alt:v,size:24,children:(0,r.tZ)(Ko.Z,{})})]})]}),(0,r.BX)($.Tg,{css:[g.l0.colWithGap(8),g.l0.mb(8)],background:"default",children:[(0,r.tZ)(je.zx,{text:h,colorway:"primary",iconLeft:(0,r.tZ)(_n.Z,{}),disabled:f||u,onClick:k}),(0,r.tZ)($o.Z,{outlined:!0,href:To,target:"_blank",text:"Learn More",iconRight:(0,r.tZ)(Jo.Z,{})})]}),(0,r.tZ)("hr",{css:[g.l0.my(16),{borderColor:g.TV.outlineDefault}]}),(0,r.tZ)(Z.xv,{css:[g.l0.fontSize(12),g.l0.color.foregroundDimmest],children:v}),(0,r.tZ)(Yo.Z,{isOpen:w,onRequestClose:C,onRequestPowerUp:S,uponPurchaseGoTo:"workspace",context:"workspace_postgresql_pane",powerUp:"neon-database-preview"})]}),(0,r.tZ)(Bo,{})]})},oa=function(){var e=(0,Xe.Z)(),t=(0,Ue.Z)().showError,n=(0,d.Z)().psql,i=(0,o.Z)(a.useState([]),2),l=i[0],c=i[1],u=function(e){var t=(0,N.Z)({},_r,e);return hr.a(Pr,t)}({variables:{input:{replId:e}},fetchPolicy:"no-cache",onCompleted:function(e){"GetNeonDatabasesResult"!==e.getNeonDatabases.__typename?t("Error: ".concat(e.getNeonDatabases.message)):c(e.getNeonDatabases.databases)}}),s=u.loading,f=u.refetch,p=lo(),h=a.useCallback(function(){var e=(0,ot.Z)((function(e){var r,i,o;return(0,lt.__generator)(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),c([e]),[4,n.ensureNixPsqlPackageInstalled(!0)];case 1:return a.sent(),r=e.connectionString,i=e.databaseName,p({connectionString:r,databaseName:i}),[3,3];case 2:return o=a.sent(),t("Error: ".concat(o.message)),[3,3];case 3:return[2]}}))}));return function(t){return e.apply(this,arguments)}}(),[n,p,t]),v=(0,He.Dv)(Vo);return v?(0,r.tZ)(qo,{neonDatabases:[v],onDatabaseDeleted:f,onDatabaseUnfreezed:f}):s?(0,r.tZ)(y.G,{css:[g.l0.flex.row,g.l0.justify.center,g.l0.p(32)],children:(0,r.tZ)(ze.Z,{})}):l.length?(0,r.tZ)(qo,{neonDatabases:l,onDatabaseDeleted:f,onDatabaseUnfreezed:f}):(0,r.tZ)(ia,{onDatabaseCreated:h})},aa=n(78707),la={Content:function(){return(0,r.tZ)(oa,{})},Icon:function(e){var t=e.size;return(0,r.tZ)(aa.Z,{size:t})},getTitle:function(){return"PostgreSQL"}},ca=n(23807),ua=n(78728),sa=n(79686),da={Content:function(){return(0,r.tZ)(fa,{})},Icon:function(e){var t=e.size;return(0,r.tZ)(ua.Z,{size:t})},getTitle:function(){return"Output"}};function fa(){var e=(0,d.Z)(),t=e.fs,n=e.container;return(0,r.tZ)(y.G,{css:[g.l0.flex.growAndShrink(1)],children:(0,r.tZ)(sa.Z,{fs:t,container:n})})}var pa=n(27495),ha=n(10671),va={Content:function(e){var t,n=e.pane;return(0,r.tZ)(ma,{initialPwd:null===(t=n.data)||void 0===t?void 0:t.initialPwd})},Icon:function(e){var t=e.size;return(0,r.tZ)(ha.Z,{size:t})},getTitle:function(){return"Shell"}};function ma(e){var t=e.initialPwd,n=(0,d.Z)().container,i=(0,o.Z)(a.useState(!1),2),l=i[0],c=i[1],u=(0,o.Z)((0,pa.St)({container:n,initialPwd:t,onOutput:(0,a.useCallback)((function(){c(!0)}),[c])}),3),s=u[0],f=u[1],p=u[2];return(0,S.Wk)((function(){return s}),[s]),(0,S.L5)((function(){if(s&&l)return{type:"shell",exec:function(e){p(e+"\n")}}}),[s,p,l]),(0,r.tZ)(pa.N2,{shell:s,shellRef:f})}var ga=n(86763),ya=n.n(ga),Za=n(28737);function ba(){var e=(0,fr.Z)(["\n  query WorkspaceDrawCurrentUser {\n    currentUser {\n      id\n      username\n    }\n  }\n"]);return ba=function(){return e},e}function wa(){var e=(0,fr.Z)(["\n  mutation sawDrawCtaToursSeen($name: String!) {\n    toursSeen(name: $name) {\n      name\n      success\n    }\n  }\n"]);return wa=function(){return e},e}var xa={},ka=(0,pr.Ps)(ba());wa();var Ca=n(24746),Sa=n(84630),Ta=function(e,t,n){var r;if(!e)return[];var i=t(e.getSceneElementsIncludingDeleted()),o=e.getAppState();return(r=n.reduce((function(e,t){var n,r,a;return t.id===(null===(n=o.editingElement)||void 0===n?void 0:n.id)||t.id===(null===(r=o.resizingElement)||void 0===r?void 0:r.id)||t.id===(null===(a=o.draggingElement)||void 0===a?void 0:a.id)||(i[t.id]&&i[t.id].version>t.version?(e.push(i[t.id]),delete i[t.id]):i[t.id]&&i[t.id].version===t.version&&i[t.id].versionNonce!==t.versionNonce?(i[t.id].versionNonce<t.versionNonce?e.push(i[t.id]):e.push(t),delete i[t.id]):(e.push(t),delete i[t.id])),e}),[])).concat.apply(r,(0,Xt.Z)(Object.values(i)))},Ea=function(){var e,t,n=new Promise((function(n,r){e=n,t=r}));return n.resolve=e,n.reject=t,n},Ra=function(e){return e.reduce((function(e,t){return e[t.id]=t,e}),{})},Ga=n(92674),Ia=n.n(Ga);function _a(e){var t,i=e.fs,l=e.presence,c=e.broadcast,u=e.filePath,s=(0,a.useState)(void 0),d=s[0],f=s[1],p=(0,a.useRef)((function(e){return(0,Xt.Z)(e)})),h=(0,a.useRef)((function(e){return-1})),v=(0,a.useRef)({readyPromise:Ea()}),m=(0,a.useRef)({promise:null});(0,a.useEffect)((function(){Promise.all([n.e(6655),n.e(3668)]).then(n.t.bind(n,63668,23)).then((function(e){p.current=function(t){return t.filter((function(t){return t.isDeleted||!e.isInvisiblySmallElement(t)}))},h.current=e.getSceneVersion,f(e.Excalidraw)}))}),[]);var Z=function(){return v.current},b=function(e){var t=(0,N.Z)({},xa,e);return hr.a(ka,t)}({ssr:!1}),w=b.data,x=b.loading,k=(null===w||void 0===w||null===(t=w.currentUser)||void 0===t?void 0:t.username)||"",C=(0,Za.F)().isDarkColorScheme,S=(0,Ca.Z)({presence:l}),T=(0,Sa.Z)(),E=null===T||void 0===T?void 0:T.color,R=(0,a.useState)(new Map),G=R[0],I=R[1],_=(0,a.useState)(-1),D=_[0],B=_[1],P=(0,a.useRef)(Ia()()).current;(0,a.useEffect)((function(){function e(){return e=(0,ot.Z)((function(){var e,t;return(0,lt.__generator)(this,(function(n){switch(n.label){case 0:return w&&w.currentUser?[4,v.current.readyPromise]:[2];case 1:return n.sent(),e=Z().getAppState().collaborators,t=new Map,S.forEach((function(n){var r;if(n.username!==(null===w||void 0===w||null===(r=w.currentUser)||void 0===r?void 0:r.username)){var i=e.get(n.username)||{};t.set(n.username,(0,at.Z)((0,N.Z)({},i),{username:n.username,color:{background:n.color,foreground:n.color}}))}})),Z().updateScene({collaborators:t}),[2]}}))})),e.apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[w,S]);var A=function(){var e=(0,ot.Z)((function(e,t){var n,r,i,o,a,l;return(0,lt.__generator)(this,(function(s){t||(e=e.filter((function(e){return!G.has(e.id)||e.version>G.get(e.id)}))),n=!0,r=!1,i=void 0;try{for(o=e[Symbol.iterator]();!(n=(a=o.next()).done);n=!0)l=a.value,G.set(l.id,l.version),I(new Map(G))}catch(d){r=!0,i=d}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return c.broadcastMessage(P,{text:JSON.stringify({elements:e,path:u})}),[2]}))}));return function(t,n){return e.apply(this,arguments)}}();(0,a.useEffect)((function(){if(c)return c.onBroadcastReceived(P,(function(e){var t=e.username,n=e.text,r=JSON.parse(n);if(r.path===u)if(r.collaborator&&v.current){var i=Z().getAppState().collaborators;i.set(t,(0,at.Z)((0,N.Z)({},i.get(t),r.collaborator),{username:t})),Z().updateScene({collaborators:i})}else if(r.elements){var o=Ta(Z(),Ra,r.elements);B(h.current(o)),Z().updateScene({elements:o})}else if(r.removePresence){var a=Z().getAppState().collaborators;a.delete(r.removePresence),Z().updateScene({collaborators:a})}}))}),[c,u,P]),(0,a.useEffect)((function(){function e(){return e=(0,ot.Z)((function(){return(0,lt.__generator)(this,(function(e){return u&&i?(m.current.promise=new Promise(function(){var e=(0,ot.Z)((function(e){var t,n,r,a,l;return(0,lt.__generator)(this,(function(c){switch(c.label){case 0:return[4,Promise.all([i.readFile(u),v.current.readyPromise])];case 1:return t=o.Z.apply(void 0,[c.sent(),1]),"content"in(n=t[0])&&(r=n.content.toString(),a=JSON.parse(r||"{}"),l=Z().getAppState(),a.appState=(0,N.Z)({},l),a.scrollToContent=!0,e(a)),[2]}}))}));return function(t){return e.apply(this,arguments)}}()),[2]):[2]}))})),e.apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[u,i]);var L=(0,a.useCallback)(ya()(function(){var e=(0,ot.Z)((function(e,t){var n;return(0,lt.__generator)(this,(function(r){switch(r.label){case 0:return n=e.filter((function(e){return!e.isDeleted})),u?[4,i.writeFile(u,Yi.Z.from(JSON.stringify({elements:n,files:t})))]:[3,2];case 1:r.sent(),r.label=2;case 2:return[2]}}))}));return function(t,n){return e.apply(this,arguments)}}(),350),[u]);return(0,r.tZ)(y.G,{css:{position:"relative",height:"100%",width:"100%",flex:1,boxShadow:E?"0 3px 0 3px ".concat(E):"none",backgroundColor:g.TV.backgroundDefault,"& .excalidraw [title~=Library]":{display:"none"}},onMouseLeave:function(){c.broadcastMessage(P,{text:JSON.stringify({removePresence:k,path:u})})},children:d&&!x?(0,r.tZ)(d,{ref:v,UIOptions:{canvasActions:{loadScene:!1}},isCollaborating:!0,theme:C?"dark":"light",initialData:m.current.promise,onPointerUpdate:function(e){var t=e.pointer,n=Z().getAppState().selectedElementIds||{};c.broadcastMessage(P,{text:JSON.stringify({collaborator:{pointer:t,selectedElementIds:n},path:u})})},onChange:function(e,t,n){!function(e){h.current(e)>D&&(D>-1&&A(p.current(e),!1),B(h.current(e)))}(e),B(h.current(e)),h.current(e)>D&&L(e,n)},user:{name:k}}):null})}function Da(e){var t=e.fs,n=e.presence,i=e.broadcast,o=e.filePath;return(0,r.tZ)(_a,{fs:t,presence:n,broadcast:i,filePath:o},o)}var Ba=n(3947),Pa={Content:function(e){var t=e.pane,n=e.options.performPaneOperation;return(0,r.tZ)(Aa,{path:t.data.path,performPaneOperation:n})},Icon:function(e){var t=e.size;return(0,r.tZ)(Ba.Z,{size:t})},getTitle:function(e){return(0,v.UO)(e.data.path)}};function Aa(e){var t=e.path,n=e.performPaneOperation,i=(0,d.Z)(),o=i.fs,a=i.broadcast,l=i.presence,c=(0,Ut.Mp)({path:t,performPaneOperation:n});return(0,S.L5)((function(){if(c)return{commands:c}}),[c]),(0,r.BX)(r.HY,{children:[(0,r.tZ)(Ut.HK,{path:t,performPaneOperation:n}),(0,r.tZ)(Ut.VY,{children:(0,r.tZ)(Da,{fs:o,broadcast:a,presence:l,filePath:t})})]})}var La=n(18196),Ua=n(83005),Xa={Content:function(e){var t=e.pane,n=e.options;return(0,r.tZ)(Ma,{path:t.data.path,performPaneOperation:n.performPaneOperation})},Icon:function(e){var t=e.pane,n=e.size;return(0,r.tZ)(Ua.Z,{path:t.data.path,size:n})},getTitle:function(e){return(0,v.UO)(e.data.path)}};function Ma(e){var t=e.path,n=e.performPaneOperation,i=(0,d.Z)().fs,o=(0,Ut.Mp)({path:t,performPaneOperation:n}),a=o?(0,Xt.Z)(o):[],l={match:T.pl,data:{label:"Open in Editor",icon:(0,r.tZ)(E.Z,{}),type:"action",run:function(){n({operation:"replace",pane:{type:"codeEditor",data:{path:t}}})}}};return(0,v.B4)(t)&&a.push(l),(0,S.L5)((function(){if(o)return{commands:a}}),[o]),(0,r.BX)(r.HY,{children:[(0,r.tZ)(Ut.HK,{path:t,performPaneOperation:n}),(0,r.tZ)(Ut.VY,{centered:!0,children:(0,r.tZ)(La.Z,{filePath:t,fs:i})})]})}var Na=n(84607),Oa=n(12404),Fa=n(85281),Wa=n(38567),Ha=n(70232),Va=n(73377),za=n(81962),ja=n(73299),qa=n(63181);function $a(e){return!!e&&("string"===typeof e?e.includes(qa.Kd):e.fetch.includes(qa.Kd))}function Ya(e){return e.endsWith(".git")?e.slice(0,-4):e}function Ka(e){if(!e)return null;var t="string"===typeof e?e:e.fetch;return $a(t)?Ya(t):null}function Qa(){var e=(0,Wa.Z)(function(){var e=(0,ot.Z)((function(e){return(0,lt.__generator)(this,(function(t){return[2,{connectedToGithub:Ja(e),error:null}]}))}));return function(t){return e.apply(this,arguments)}}());return null==e||e.error?null:e.connectedToGithub}function Ja(e){return e.hasProfile(Va.rG.GITHUB)}var el=n(33105),tl=n(89562),nl=n(9353);function rl(e,t){(0,ut.j)(nl.U3.GIT_FEATURE_USED,(0,N.Z)({action:e,source:"git-pane"},t))}function il(e){var t=e.label,n=void 0===t?"Connect to GitHub":t,i=e.allowReconnect,o=void 0!==i&&i,l=e.callback,c=(0,a.useState)(!1),u=c[0],s=c[1],f=(0,d.Z)().git,p=Qa(),h=(0,el.v)({onAuth:function(){rl("github-user-connected"),s(!1),f.refreshProfiles({preferredProvider:Va.rG.GITHUB}),null===l||void 0===l||l()}});return p&&!o?(0,r.tZ)(je.zx,{text:"Connected to GitHub",colorway:"primary",iconLeft:(0,r.tZ)(J.Z,{}),disabled:!0}):(0,r.tZ)(je.zx,{text:u||null===p?"Connecting...":n,colorway:"primary",iconLeft:u?(0,r.tZ)(ze.Z,{}):(0,r.tZ)(tl.Z,{}),loading:u,onClick:function(){s(!0),h()}})}var ol=(0,mt.iv)(g.l0.p(4),g.l0.colWithGap(8),g.l0.borderRadius(0,0,8,8)),al=(0,mt.iv)(g.l0.rowWithGap(8),g.l0.align.center,g.l0.justify.end);function ll(e){var t=e.description,n=e.remedies,i=e.error;return(0,r.BX)($.Tg,{css:ol,elevated:!0,children:[(0,r.tZ)(Z.xv,{children:t}),(0,r.BX)(y.G,{css:al,children:[n,(0,r.tZ)(je.zx,{text:"Dismiss",iconLeft:(0,r.tZ)(Zt.Z,{}),onClick:i.dismiss})]})]})}function cl(e){switch(e.type){case Va.aq.UNKNOWN_NOT_GIT:return"Unknown Error";case Va.aq.UNKNOWN:return"Unknown Git Error";case Va.aq.NOT_INITIALIZED:case Va.aq.UNAUTHENTICATED:case Va.aq.INDEX_FILE_CORRUPT:case Va.aq.UNKNOWN_REMOTE:case Va.aq.INDEX_LOCKED:case Va.aq.NO_COMMITS:case Va.aq.PATH_MATCHED_NO_FILES:case Va.aq.USER_NOT_CONFIGURED:case Va.aq.INVALID_REFERENCE:case Va.aq.BRANCH_ALREADY_EXISTS:case Va.aq.MERGE_CONFLICT:case Va.aq.HEAD_DETACHED:case Va.aq.DIRTY_WORKTREE:case Va.aq.PUSH_REJECTED:case Va.aq.PROTECTED_BRANCH:case Va.aq.REMOTE_ALREADY_EXISTS:case Va.aq.ALREADY_INITIALIZED:case Va.aq.TIMEOUT:return"Git Error";default:return"Unknown Error"}}function ul(e){var t=e.error,n=(0,Wa.Z)(function(){var e=(0,ot.Z)((function(e){var n,i,o,a,l,c,u,s,d;return(0,lt.__generator)(this,(function(f){switch(f.label){case 0:switch(t.type){case Va.aq.UNKNOWN_NOT_GIT:return[3,1];case Va.aq.UNKNOWN:return[3,2];case Va.aq.CHANNEL_CLOSED:return[3,3];case Va.aq.NOT_INITIALIZED:return[3,4];case Va.aq.UNAUTHENTICATED:return[3,5];case Va.aq.INDEX_FILE_CORRUPT:return[3,7];case Va.aq.UNKNOWN_REMOTE:return[3,8];case Va.aq.INDEX_LOCKED:return[3,9];case Va.aq.NO_COMMITS:return[3,10];case Va.aq.PATH_MATCHED_NO_FILES:return[3,11];case Va.aq.USER_NOT_CONFIGURED:return[3,12];case Va.aq.INVALID_REFERENCE:return[3,13];case Va.aq.BRANCH_ALREADY_EXISTS:return[3,14];case Va.aq.MERGE_CONFLICT:return[3,15];case Va.aq.UPSTREAM_NOT_SET:return[3,16];case Va.aq.HEAD_DETACHED:return[3,17];case Va.aq.DIRTY_WORKTREE:return[3,18];case Va.aq.PROTECTED_BRANCH:return[3,19];case Va.aq.PUSH_REJECTED:return[3,20];case Va.aq.REMOTE_ALREADY_EXISTS:return[3,21];case Va.aq.TIMEOUT:return[3,22];case Va.aq.ALREADY_INITIALIZED:return[3,23]}return[3,24];case 1:return n="Unknown error from the Git service. This is probably a bug in the app.",i=null,[3,25];case 2:return n="There was an unrecognized fatal error with Git. This is probably a bug in the app.",i=null,[3,25];case 3:return n="The command was interrupted. Please try again.",i=null,[3,25];case 4:return n="There isn't a Git repository in the Repl's root directory.",i=null,[3,25];case 5:return[4,e.getRemotes()];case 6:if((o=f.sent()).error)return[2,o];if(0!==o.remotes.size){a=!1,l=!0,c=!1,u=void 0;try{for(s=o.remotes.values()[Symbol.iterator]();!(l=(d=s.next()).done);l=!0)if($a(d.value)){a=!0;break}}catch(p){c=!0,u=p}finally{try{l||null==s.return||s.return()}finally{if(c)throw u}}if(a)return Ja(e)?(n="Failed to authenticate with the remote. Please ensure that Replit has access to this repository on GitHub.",i=(0,r.tZ)(il,{label:"Update GitHub Repository Access",callback:t.dismiss,allowReconnect:!0}),[3,25]):(n="Failed to authenticate with the remote. You have not connected your Replit account to GitHub, so Replit may not have access to the remote repository. Please connect your account to GitHub and try again.",i=(0,r.tZ)(il,{label:"Connect to GitHub",callback:t.dismiss,allowReconnect:!0}),[3,25])}return n="Failed to authenticate with the remote.",i=null,[3,25];case 7:return n="The Git index file is corrupt. This can happen if the index file is manually edited, or if the Git repository is corrupted.",i=null,[3,25];case 8:return n="The remote specified isn't configured.",i=null,[3,25];case 9:return n="Git tried to perform an action but the index lockfile still exists. This means Git either crashed previously or is still running an action.",i=null,[3,25];case 10:return n="There are no commits in the repository.",i=null,[3,25];case 11:return n="The path specified didn't match any files.",i=null,[3,25];case 12:return n="There isn't any user information configured for Git.",i=null,[3,25];case 13:return n="An unknown/invalid reference was specified. This is usually a branch, but it could be something else, such as a tag.",i=null,[3,25];case 14:return n="The branch specified already exists.",i=null,[3,25];case 15:return n="There was an unexpected merge conflict.",i=null,[3,25];case 16:return n="The upstream branch isn't set.",i=null,[3,25];case 17:return n="The HEAD is detached. You have a commit checked out, not a branch.",i=null,[3,25];case 18:return n="There are uncommitted changes.",i=null,[3,25];case 19:return n="This operation cannot be performed on a protected branch.",i=null,[3,25];case 20:return n="The push was rejected by the remote. This is usually because the remote has commits that aren't in the local repository.",i=null,[3,25];case 21:return n="The remote specified already exists.",i=null,[3,25];case 22:return n="The remote operation timed out.",i=null,[3,25];case 23:return n="There is already a Git repository in the Repl's root directory.",i=null,[3,25];case 24:return n="We ran into an unknown error that we don't have a description for. This is probably a bug with the app.",i=null,[3,25];case 25:return[2,{description:n,remedies:i,error:null}]}}))}));return function(t){return e.apply(this,arguments)}}(),[t],{refresh:!1});if(!n)return(0,r.tZ)(ll,{description:null,remedies:null,error:t});if(n.error){return(0,r.tZ)(ll,{description:"Unknown error from the Git service. This is probably a bug in the app.",remedies:null,error:t})}var i=n.description,o=n.remedies;return(0,r.tZ)(ll,{description:i,remedies:o,error:t})}var sl=(0,mt.iv)({pointerEvents:"all"},g.l0.p(1),g.l0.backgroundColor.accentNegativeDimmer,g.l0.borderRadius(8),g.l0.shadow(3)),dl=(0,mt.iv)(g.l0.py(4),g.l0.px(8),g.l0.display.flex,g.l0.flex.row,g.l0.align.center,g.l0.justify.spaceBetween,g.l0.color.accentNegativeStrongest),fl=(0,mt.iv)(g.l0.rowWithGap(4),g.l0.align.center),pl=(0,mt.iv)({opacity:.75},g.l0.font.code),hl=(0,mt.iv)(g.l0.pt(4),g.l0.pb(8),g.l0.px(8),g.l0.colWithGap(8),g.l0.backgroundColor.backgroundHigher,g.l0.borderRadius(0,0,8,8));function vl(e){var t=e.error;return(0,r.BX)(y.G,{css:sl,children:[(0,r.BX)(y.G,{css:dl,children:[(0,r.BX)(y.G,{css:fl,children:[(0,r.tZ)(Q.Z,{}),(0,r.tZ)(Z.xv,{variant:"subheadDefault",multiline:!1,children:cl(t)})]}),(0,r.tZ)(Z.xv,{css:pl,multiline:!1,children:t.type})]}),(0,r.tZ)(y.G,{css:hl,children:(0,r.tZ)(ul,{error:t})})]})}var ml=(0,a.createContext)(null);function gl(){var e=(0,a.useContext)(ml);if(!e)throw new Error("Expected store in context");return e}var yl=(0,st.cn)([]),Zl=(0,st.cn)((function(e){return e(yl)}),(function(e,t,n){var r=e(yl),i=Math.random().toString(36).substring(7),o={id:i,type:n,dismiss:function(){var n=e(yl).filter((function(e){return e.id!==i}));t(yl,n)}};t(yl,[o].concat((0,Xt.Z)(r)))}));function bl(){return(0,He.b9)(Zl,{store:gl()})}var wl=(0,mt.iv)({pointerEvents:"none"},{transition:"background-color 100ms"},g.l0.position.absolute,g.l0.top(0),g.l0.bottom(0),g.l0.left(0),g.l0.right(0),g.l0.p(8),g.l0.colWithGap(16),g.l0.zIndex(10));function xl(){var e=(0,He.Dv)(Zl,{store:gl()});return(0,r.tZ)(y.G,{style:{backgroundColor:e.length>0?"rgba(0, 0, 0, 0.25)":"transparent"},css:wl,children:e.map((function(e){return(0,r.tZ)(vl,{error:e},e.id)}))})}var kl=n(9327),Cl=n(45851),Sl=n(12260),Tl=n(33814);function El(){var e=(0,a.useState)(!1),t=e[0],n=e[1],i=(0,d.Z)().git,o=function(){var e=(0,a.useState)(!1),t=e[0],n=e[1],r=(0,d.Z)().git;return(0,a.useEffect)((function(){return r.onBusyChange(n)}),[r]),t}(),l=bl(),c=(0,Wa.Z)(function(){var e=(0,ot.Z)((function(e){var t;return(0,lt.__generator)(this,(function(n){switch(n.label){case 0:return[4,e.getRemotes()];case 1:return(t=n.sent()).error?(l(t.error),[2,t]):[2,{hasRemotes:t.remotes.size>0,error:null}]}}))}));return function(t){return e.apply(this,arguments)}}(),[l]);if(null===c||void 0===c?void 0:c.error)return null;var u=!!c&&c.hasRemotes,s=o||t||null===c;function f(){return(f=(0,ot.Z)((function(){var e;return(0,lt.__generator)(this,(function(t){switch(t.label){case 0:return i.isBusy()||s?[2]:(n(!0),u?[4,i.fetch()]:[3,2]);case 1:(e=t.sent()).error?l(e.error):rl("remote-fetched"),t.label=2;case 2:return[4,i.refreshProfiles()];case 3:return t.sent(),i.forceRefresh(),setTimeout((function(){return n(!1)}),500),[2]}}))}))).apply(this,arguments)}var p=u?"Refresh and Fetch":"Refresh";return(0,r.tZ)(ce.h,{alt:p,size:24,onClick:function(){return f.apply(this,arguments)},disabled:s,children:s?(0,r.tZ)(ze.Z,{}):(0,r.tZ)(ho.Z,{})})}var Rl,Gl=n(24478);!function(e){e.SUCCESS="SUCCESS",e.WARNING="WARNING",e.FAILED="FAILED",e.OFF="OFF"}(Rl||(Rl={}));var Il=(0,b.X)({root:[g.l0.rowWithGap(8),g.l0.align.center,g.l0.py(4)],circle:[g.l0.width(8),g.l0.height(8),g.l0.borderRadius("full")]});var _l=function(e){var t,n,i,o=e.display,a=void 0===o?"inline":o,l=(0,O.Z)(e,["display"]);switch(l.status){case Rl.SUCCESS:t=g.TV.accentPositiveStronger,n=g.TV.accentPositiveStronger;break;case Rl.WARNING:t=g.TV.yellowStronger,n=g.TV.yellowStronger;break;case Rl.FAILED:t=g.TV.accentNegativeStronger,n=g.TV.accentNegativeStronger;break;case Rl.OFF:t=g.TV.greyStronger,n=g.TV.greyStronger}var c=(0,r.BX)(y.G,{onClick:null!==(i=l.onClick)&&void 0!==i?i:function(){},css:[Il.root,l.onClick?{cursor:"pointer"}:{}],children:[(0,r.tZ)("div",{css:Il.circle,style:{backgroundColor:t,boxShadow:"0px 0px 6px ".concat(n)}}),"inline"===a?(0,r.tZ)(Z.xv,{color:"dimmer",multiline:!1,children:l.content}):null]});return"tooltip"===a&&(c=(0,r.tZ)(ee.u,{tooltip:l.content,children:c})),c},Dl=(0,mt.iv)(g.l0.color.orangeStronger,g.l0.fontWeight.medium);function Bl(e){var t=e.text,n=e.className;return(0,r.tZ)("span",{className:n,css:Dl,children:t})}var Pl=(0,mt.iv)(g.l0.color.purpleStronger,g.l0.fontWeight.medium);function Al(e){var t=e.text,n=e.className;return(0,r.tZ)("span",{className:n,css:Pl,children:t})}var Ll=(0,mt.iv)(g.l0.fontWeight.medium);function Ul(e){var t,n=e.id,i=e.hash,o=void 0===i||i,a=e.className;return t=o?"string"===typeof n&&n.startsWith("#")?n:"#".concat(n):"string"===typeof n&&n.startsWith("#")?n.slice(1):"".concat(n),(0,r.tZ)("span",{className:a,css:Ll,children:t})}var Xl=(0,mt.iv)(g.l0.fontWeight.medium);function Ml(e){var t=e.hash,n=e.length,i=void 0===n?8:n,o=e.className;return(0,r.tZ)("span",{className:o,css:Xl,children:t.slice(0,i+1)})}function Nl(e){var t=e.subject,n=e.quoted,i=void 0!==n&&n,o=e.className;return(0,r.tZ)("span",{className:o,children:i?'"'.concat(t,'"'):t})}var Ol=(0,mt.iv)({whiteSpace:"pre-wrap"},{fontSize:g.TV.fontSizeSmall},g.l0.font.code);function Fl(e){var t=e.body,n=e.className;return(0,r.tZ)("pre",{className:n,css:Ol,children:t})}var Wl=(0,b.X)({headingWrapper:[g.l0.display.inlineFlex,g.l0.rowWithGap(4),g.l0.align.center,g.l0.flex.shrink(1),g.l0.overflow("hidden")],headingRemote:[{verticalAlign:"text-bottom"},g.l0.mr(4),g.l0.color.foregroundDimmest],headingCurrent:[g.l0.px(4)],text:[g.l0.fontWeight.medium],remote:[{verticalAlign:"text-bottom"},{fontSize:g.TV.fontSizeSmall},g.l0.mr(4),g.l0.color.foregroundDimmest],current:[g.l0.position.relative,g.l0.top("-1px"),g.l0.display.inlineFlex,g.l0.pl(2),g.l0.pr(8)],icon:[{verticalAlign:"baseline !important"},g.l0.mr(4)]});function Hl(e){var t=e.name,n=e.remote,i=e.current,o=void 0!==i&&i,a=e.heading,l=void 0!==a&&a,c=e.icon,u=void 0!==c&&c,s=e.onClick,d=e.className,f=null;return!0===u||!u&&o?f=o?(0,r.tZ)("span",{css:l?Wl.headingCurrent:Wl.current,children:(0,r.tZ)(_l,{display:"tooltip",content:"This is your current branch.",status:Rl.SUCCESS})}):l?(0,r.tZ)(Gl.Z,{size:16}):(0,r.tZ)(Gl.Z,{css:Wl.icon,size:12}):u&&(f=u),l?(0,r.BX)("div",{css:Wl.headingWrapper,children:[f,(0,r.BX)(Z.xv,{variant:"subheadDefault",multiline:!1,children:[n?(0,r.BX)(r.HY,{children:[(0,r.tZ)("span",{css:Wl.headingRemote,children:n}),(0,r.tZ)("span",{css:Wl.headingRemote,children:"/"})]}):null,s?(0,r.tZ)(Ql,{label:"View branch",onClick:s,children:t}):(0,r.tZ)("span",{children:t})]})]}):(0,r.BX)("span",{className:d,css:Wl.text,children:[f,n?(0,r.tZ)("span",{css:Wl.remote,children:n}):null,s?(0,r.tZ)(Ql,{label:"View branch",onClick:s,children:t}):(0,r.tZ)("span",{children:t})]})}var Vl=(0,mt.iv)(g.l0.color.foregroundDimmest),zl=(0,mt.iv)({"& > span":{display:"inline-block"}});function jl(e){var t=e.path,n=e.prefix,i=e.onClick,o=e.className,a=(0,v.UO)(t),l=!i&&(a===t||null!==n&&n+a===t);return(0,r.tZ)("span",{css:zl,children:(0,r.tZ)(ee.u,{maxWidth:"auto",tooltip:(0,r.tZ)($l,{path:t,openable:Boolean(i)}),isDisabled:l,children:i?(0,r.BX)(Ql,{label:"Open ".concat(a),onClick:i,className:o,children:[n?(0,r.tZ)("span",{css:Vl,children:n}):null,(0,r.tZ)("span",{children:a})]}):(0,r.BX)("span",{className:o,children:[n?(0,r.tZ)("span",{css:Vl,children:n}):null,(0,r.tZ)("span",{children:a})]})})})}var ql=(0,b.X)({tooltip:[g.l0.display.inlineFlex,g.l0.rowWithGap(4),g.l0.align.center],path:[{fontSize:g.TV.fontSizeSmall},g.l0.font.code]});function $l(e){var t=e.path,n=e.openable,i=void 0===n||n;return(0,r.BX)("span",{css:ql.tooltip,children:[i?(0,r.tZ)("span",{children:"Open"}):null,(0,r.tZ)("span",{css:ql.path,children:t})]})}var Yl,Kl=(0,mt.iv)({cursor:"pointer","&:hover":{textDecoration:"underline"}});function Ql(e){var t=e.label,n=e.onClick,i=e.className,o=e.children;return(0,r.tZ)("span",{className:i,css:Kl,role:"button",tabIndex:-1,"aria-label":t,onClick:n,onKeyDown:function(e){"Enter"!==e.key&&" "!==e.key||null===n||void 0===n||n()},children:o})}!function(e){e.DASHBOARD="DASHBOARD",e.BRANCH="BRANCH",e.CURRENT_BRANCH="CURRENT_BRANCH",e.SETTINGS="SETTINGS"}(Yl||(Yl={}));var Jl=(0,b.X)({container:[g.l0.height(36),g.l0.px(8),g.l0.py(4),g.l0.rowWithGap(8),g.l0.backgroundColor.backgroundDefault,g.l0.align.center,g.l0.justify.spaceBetween,g.l0.zIndex(1),{borderBottom:"1px solid ".concat(g.TV.outlineDimmer)}],left:[g.l0.rowWithGap(4),g.l0.align.center,g.l0.flex.growAndShrink(1)],right:[g.l0.rowWithGap(8),g.l0.align.center],back:{marginLeft:-4}});function ec(e){var t=e.mode,n=e.branch,i=e.switchMode,o=e.onBack,l=e.onSearchOpen,c=e.onSearchClose,u=e.onSearchChange,s=(0,a.useState)(!1),d=s[0],f=s[1],p=function(){return i({mode:Yl.SETTINGS})},h=t===Yl.DASHBOARD||t===Yl.BRANCH||t===Yl.CURRENT_BRANCH,v=(0,a.useCallback)((function(){if(!h)throw new Error("Cannot open search in this mode");rl("search-started",{mode:t===Yl.DASHBOARD?"branches":"commits"}),f(!0),null===l||void 0===l||l()}),[h,t,l]),m=(0,a.useCallback)((function(){f(!1),null===c||void 0===c||c()}),[c]),g=null,b=null;if(d)g=(0,r.tZ)(ac,{mode:t,onSearchChange:u,closeSearch:m}),b=(0,r.tZ)(oc,{closeSearch:m});else switch(t){case Yl.DASHBOARD:g=(0,r.BX)(r.HY,{children:[(0,r.tZ)(Cl.Z,{size:16}),(0,r.tZ)(Z.xv,{variant:"subheadDefault",multiline:!1,children:"Repository"})]}),b=(0,r.BX)(r.HY,{children:[(0,r.tZ)(ic,{openSettings:p}),(0,r.tZ)(rc,{openSearch:v}),(0,r.tZ)(El,{})]});break;case Yl.BRANCH:case Yl.CURRENT_BRANCH:if(null===n)throw new Error("Tried to show branch in header, but branch is null");g=(0,r.BX)(r.HY,{children:[(0,r.tZ)(nc,{switchMode:i}),(0,r.tZ)(Hl,{name:n.name,remote:n.type===Fa.HO.REMOTE?n.remote:null,current:t===Yl.CURRENT_BRANCH,heading:!0})]}),b=(0,r.BX)(r.HY,{children:[(0,r.tZ)(ic,{openSettings:p}),(0,r.tZ)(rc,{openSearch:v}),(0,r.tZ)(El,{})]});break;case Yl.SETTINGS:g=(0,r.BX)(r.HY,{children:[(0,r.tZ)(tc,{onBack:o,alt:"Back"}),(0,r.tZ)(Z.xv,{variant:"subheadDefault",multiline:!1,children:"Settings"})]})}return(0,r.BX)(y.G,{css:Jl.container,children:[(0,r.tZ)(y.G,{css:Jl.left,children:g}),(0,r.tZ)(y.G,{css:Jl.right,children:b})]})}function tc(e){var t=e.onBack,n=e.alt;return(0,r.tZ)(ce.h,{css:Jl.back,alt:n,size:28,onClick:t,children:(0,r.tZ)(kl.Z,{})})}function nc(e){var t=e.switchMode;return(0,r.tZ)(tc,{css:Jl.back,onBack:function(){return t({mode:Yl.DASHBOARD})},alt:"Back to dashboard"})}function rc(e){var t=e.openSearch;return(0,r.tZ)(ce.h,{alt:"Search (coming soon!)",size:24,onClick:t,disabled:!0,children:(0,r.tZ)(Sl.Z,{})})}function ic(e){var t=e.openSettings;return(0,r.tZ)(ce.h,{alt:"Settings",size:24,onClick:t,children:(0,r.tZ)(Tl.Z,{})})}function oc(e){var t=e.closeSearch;return(0,r.tZ)(je.zx,{css:[g.l0.p(4),{background:"none"}],text:"Cancel",onClick:t})}function ac(e){var t=e.mode,n=e.onSearchChange,i=e.closeSearch,o=t===Yl.DASHBOARD?"Search for branches...":"Search for commits...";return(0,r.BX)("div",{css:[g.l0.position.relative,g.l0.flex.grow(1)],children:[(0,r.tZ)(Sl.Z,{css:[g.l0.position.absolute,g.l0.left(8),g.l0.top(8)],color:g.TV.foregroundDimmest}),(0,r.tZ)(Bn.II,{css:[g.l0.width("100%"),g.l0.pl(32),g.l0.py(4),g.l0.borderRadius(4),{border:"none"}],autoFocus:!0,placeholder:o,onBlur:function(e){e.target.value.trim()||i()},onChange:function(e){return t=e.target.value,void(null===n||void 0===n||n(t));var t},onKeyDown:function(e){"Escape"===e.key&&i()}})]})}function lc(){return(0,r.BX)(y.G,{children:[(0,r.tZ)(Z.xv,{multiline:!1,children:"Unsupported state: you are applying a mailbox patch."}),(0,r.tZ)(Z.xv,{multiline:!1,children:"Please finish the patch manually."})]})}function cc(){return(0,r.BX)(y.G,{children:[(0,r.tZ)(Z.xv,{multiline:!1,children:"Unsupported state: you are in the middle of a bisect."}),(0,r.tZ)(Z.xv,{multiline:!1,children:"Please finish the bisect manually."})]})}var uc=/\s\(#(\d+)\)$/,sc=/^Revert "(.+)"/,dc=/^This reverts commit ([a-f0-9]+)(?:, reversing changes made to ([a-f0-9]+))?\./;function fc(e){var t=sc.exec(e.subject),n=dc.exec(e.body);if(t&&n){var r,i=n[1],o=t[1],a=uc.exec(o);return a&&(r=parseInt(a[1],10)),{hash:i,subject:o,pr:r}}return null}var pc=/\B#\d+\b/g,hc=/^Merged? pull request (#\d+\b)/,vc=/^Merge branch '(.+)'/,mc=/into (.+)$/;var gc=n(33280),yc=n(88132),Zc=n(28199),bc=20,wc=(0,mt.iv)({minHeight:bc,minWidth:bc,display:"flex",alignItems:"center",justifyContent:"center"});function xc(e){var t=function(e){switch(e){case"none":default:return null;case"commit":return(0,r.tZ)(Cc,{});case"revert":return(0,r.tZ)(Tc,{});case"merge":return(0,r.tZ)(Dc,{});case"boundary":return(0,r.tZ)(Pc,{});case"collapsed":return(0,r.tZ)(Xc,{})}}(e.type);return t?(0,r.tZ)("div",{css:wc,children:t}):null}var kc=(0,mt.iv)({height:4,width:4,backgroundColor:g.TV.foregroundDefault,borderRadius:"50%"});function Cc(){return(0,r.tZ)("div",{css:kc})}var Sc=(0,mt.iv)({display:"flex",height:bc,width:bc,backgroundColor:g.TV.orangeDimmest,borderRadius:"50%",alignItems:"center",justifyContent:"center"});function Tc(){return(0,r.tZ)("div",{css:Sc,children:(0,r.tZ)(Zc.Z,{size:12,color:g.TV.orangeStrongest})})}var Ec=(0,mt.iv)({display:"flex",height:bc,width:bc,backgroundColor:g.TV.purpleDimmest,borderRadius:"50%",alignItems:"center",justifyContent:"center"}),Rc=(0,mt.iv)({position:"relative",height:9,width:13}),Gc={position:"absolute",top:0,height:9,width:9,border:"1px solid ".concat(g.TV.purpleStrongest),borderRadius:"50%"},Ic=(0,mt.iv)((0,at.Z)((0,N.Z)({},Gc),{left:0})),_c=(0,mt.iv)((0,at.Z)((0,N.Z)({},Gc),{right:0}));function Dc(){return(0,r.tZ)("div",{css:Ec,children:(0,r.BX)("div",{css:Rc,children:[(0,r.tZ)("div",{css:Ic}),(0,r.tZ)("div",{css:_c})]})})}var Bc=(0,mt.iv)({height:6,width:6,backgroundColor:g.TV.backgroundDefault,border:"1px solid ".concat(g.TV.backgroundHighest),borderRadius:"50%"});function Pc(){return(0,r.tZ)("div",{css:Bc})}var Ac=(0,mt.iv)({display:"flex",height:bc,width:bc,backgroundColor:g.TV.backgroundHighest,borderRadius:"50%",alignItems:"center",justifyContent:"center"}),Lc=(0,mt.iv)({display:"flex",alignItems:"center",justifyContent:"center","div + div":{marginLeft:1}}),Uc=(0,mt.iv)({width:3,height:3,backgroundColor:g.TV.foregroundDimmer,borderRadius:"50%"});function Xc(){return(0,r.tZ)("div",{css:Ac,children:(0,r.BX)("div",{css:Lc,children:[(0,r.tZ)("div",{css:Uc}),(0,r.tZ)("div",{css:Uc}),(0,r.tZ)("div",{css:Uc})]})})}function Mc(e){var t=e.boundaryTop,n=void 0!==t&&t,i=e.boundaryBottom,o=void 0!==i&&i,a=e.joint,l=void 0===a?"top":a,c=e.hideTop,u=void 0!==c&&c,s=e.hideBottom,d=void 0!==s&&s;if(u&&d)return null;if(n===o&&!u&&!d)return(0,r.tZ)(Hc,{top:0,bottom:0,dashed:n&&o});var f=u?null:(0,r.tZ)(Nc,{start:"top",joint:l,dashed:n}),p=d?null:(0,r.tZ)(Nc,{start:"bottom",joint:l,dashed:o});return(0,r.BX)(r.HY,{children:[f,p]})}function Nc(e){var t,n,o=e.start,a=e.joint,l=e.dashed,c=void 0!==l&&l,u="center"===a?(t={},(0,i.Z)(t,o,0),(0,i.Z)(t,"height","50%"),t):(n={},(0,i.Z)(n,o,0),(0,i.Z)(n,o===a?"height":a,8),n);return(0,r.tZ)(Hc,(0,at.Z)((0,N.Z)({},u),{dashed:c}))}var Oc=(0,mt.iv)({position:"absolute",left:0,width:18}),Fc=(0,mt.iv)({borderRight:"1px solid ".concat(g.TV.outlineDimmest)}),Wc=(0,mt.iv)({borderRight:"1px dashed ".concat(g.TV.outlineDimmest)});function Hc(e){var t=e.top,n=e.bottom,i=e.height,o=e.dashed,a=void 0!==o&&o;return(0,r.tZ)("div",{css:[Oc,a?Wc:Fc,{top:t,bottom:n,height:i}]})}var Vc=n(17807),zc=(0,b.X)({container:{position:"relative",marginLeft:30,marginRight:4,paddingLeft:6,userSelect:"none"},containerInteractive:[Vc.gU.nofill,{position:"relative",marginLeft:30,marginRight:4,paddingLeft:6,userSelect:"none"}],nodeFoldedIconContainer:{position:"absolute",top:"50%",transform:"translateY(-50%)",right:8,zIndex:1,opacity:0,"div:hover > &":{transition:"opacity 120ms ease-out",opacity:1}},nodeUnFoldedIconContainer:{position:"absolute",top:"50%",transform:"translateY(-50%)",right:8,zIndex:1},nodeContentContainer:[g.l0.colWithGap(4),{position:"relative",paddingTop:8,paddingBottom:8,paddingRight:8}],nodeHeader:{display:"block",height:bc},nodeUnfoldedContentSurface:[g.l0.mt(4),g.l0.mb(8),g.l0.p(8),g.l0.borderRadius(8),{marginLeft:36,marginRight:8,overflowX:"hidden"}],unfoldedContentContainer:[g.l0.position.relative]});function jc(e){var t=e.boundaryTop,n=void 0!==t&&t,i=e.boundaryBottom,o=void 0!==i&&i,l=e.hideConnectorTop,c=void 0!==l&&l,u=e.hideConnectorBottom,s=void 0!==u&&u,d=e.joint,f=void 0===d?"top":d,p=e.marker,h=e.header,v=e.unfoldedContent,m=e.children,Z=e.className,b=(0,a.useState)(!0),w=b[0],x=b[1];return(0,r.BX)(y.G,{className:Z,css:g.l0.position.relative,children:[(0,r.tZ)(Mc,{boundaryTop:n,boundaryBottom:o,joint:f,hideTop:c,hideBottom:s}),p?(0,r.tZ)($c,{joint:f,children:p}):null,v?(0,r.BX)(y.G,{css:zc.containerInteractive,role:"button",tabIndex:0,onClick:function(){x(!w)},onKeyDown:function(e){"Enter"!==e.key&&" "!==e.key||x(!w)},children:[w?(0,r.tZ)("div",{css:zc.nodeFoldedIconContainer,children:(0,r.tZ)(Me.Z,{})}):(0,r.tZ)("div",{css:zc.nodeUnFoldedIconContainer,children:(0,r.tZ)(Ne.Z,{})}),(0,r.BX)(y.G,{css:zc.nodeContentContainer,children:[h?(0,r.tZ)(y.G,{css:zc.nodeHeader,children:h}):null,m?(0,r.tZ)(y.G,{children:m}):null]})]}):(0,r.tZ)(y.G,{css:zc.container,children:(0,r.BX)(y.G,{css:zc.nodeContentContainer,children:[h?(0,r.tZ)(y.G,{css:zc.nodeHeader,children:h}):null,m?(0,r.tZ)(y.G,{children:m}):null]})}),!v||w?null:(0,r.BX)(y.G,{css:zc.unfoldedContentContainer,children:[s?null:(0,r.tZ)(Hc,{top:0,bottom:0,dashed:o}),(0,r.tZ)($.Tg,{css:zc.nodeUnfoldedContentSurface,elevated:!0,children:v})]})]})}var qc=(0,b.X)({top:{position:"absolute",top:8,left:18,transform:"translateX(-50%)"},bottom:{position:"absolute",bottom:8,left:18,transform:"translateX(-50%)"},center:{position:"absolute",top:"50%",left:18,transform:"translateX(-50%) translateY(-50%)"}});function $c(e){var t=e.joint,n=void 0===t?"top":t,i=e.children;return(0,r.tZ)("div",{css:qc[n],children:i})}var Yc=(0,mt.iv)(g.l0.rowWithGap(8),g.l0.align.center,g.l0.justify.spaceBetween,g.l0.height("100%")),Kc=(0,mt.iv)(g.l0.rowWithGap(4),g.l0.center),Qc=(0,mt.iv)(g.l0.flex.shrink(0));function Jc(e){var t=e.text,n=(0,O.Z)(e,["text"]);return(0,r.tZ)(jc,(0,N.Z)({marker:(0,r.tZ)(xc,{type:"boundary"}),joint:"center",header:(0,r.BX)(y.G,{css:Yc,children:[(0,r.tZ)(gc.R,{}),(0,r.BX)(y.G,{css:Kc,children:[(0,r.tZ)(yc.Z,{size:12,color:g.TV.foregroundDimmest}),(0,r.tZ)(Z.xv,{css:Qc,variant:"small",color:"dimmest",multiline:!1,children:t})]}),(0,r.tZ)(gc.R,{})]})},n))}var eu=n(3923),tu=n(90349),nu=n(79597),ru=n(17705),iu=n(9125);function ou(){var e=(0,fr.Z)(["\n  query GitUserImageByUsername($username: String!) {\n    userByUsername(username: $username) {\n      id\n      image\n    }\n  }\n"]);return ou=function(){return e},e}var au={},lu=(0,pr.Ps)(ou());var cu=n(7914);function uu(e){var t=e.name,n=e.email,i=e.allowPlaceholderAvatar,o=void 0!==i&&i,a=e.color,l=void 0===a?"default":a,c=e.small,u=void 0!==c&&c,s=e.flip,d=void 0!==s&&s;return(0,r.BX)(y.G,{css:[g.l0.rowWithGap(4),g.l0.align.baseline,d?g.l0.flex.rowReverse:g.l0.flex.row,g.l0.flex.shrink(1)],children:[(0,r.tZ)(su,{email:n,name:t,enablePlaceholder:o,small:u}),(0,r.tZ)(Z.xv,{multiline:!1,css:[g.l0.fontWeight.medium],color:l,variant:u?"small":"text",children:t})]})}function su(e){var t=e.name,n=e.email,i=e.enablePlaceholder,l=void 0!==i&&i,c=e.small,u=void 0!==c&&c,s=(0,o.Z)(function(e){var t=(0,N.Z)({},au,e);return iu.t(lu,t)}({initialFetchPolicy:"cache-and-network",nextFetchPolicy:"cache-first",ssr:!1}),1)[0],d=(0,a.useState)(null),f=d[0],p=d[1];return(0,a.useEffect)((function(){var e=function(){var e=(0,ot.Z)((function(){var e,t,r,i,a,l,c,u,d,f,h,v,m;return(0,lt.__generator)(this,(function(g){switch(g.label){case 0:return n.endsWith("@".concat(nu.O))?(e=n.split("@")[0],t=(0,o.Z)(e.split("+"),2),t[0],r=t[1],i=(0,cu.vt)("https://github.com/".concat(r,".png")),p(i),[3,4]):[3,1];case 1:return n.endsWith("@".concat(nu.J))?(c=n.split("@")[0],u=(0,o.Z)(c.split("-"),2),u[0],d=u[1],[4,s({variables:{username:d}})]):[3,3];case 2:return f=g.sent(),(h=null===(a=f.data)||void 0===a||null===(l=a.userByUsername)||void 0===l?void 0:l.image)&&p(h),[3,4];case 3:v=(0,H.FB)(n),(m=new URL("https://gravatar.com/avatar/".concat(v))).searchParams.append("d","404"),p(m.toString()),g.label=4;case 4:return[2]}}))}));return function(){return e.apply(this,arguments)}}();e()}),[n,s]),(0,a.useMemo)((function(){var e=u?12:16;return null===f?l?(0,r.tZ)(ru.Z,{css:{alignSelf:"center"},size:e}):null:(0,r.tZ)(tu.q,{css:{alignSelf:"center"},username:t,src:f,onError:function(){return p(null)},size:e})}),[f,l,u,t])}var du=(0,b.X)({definitionList:{display:"grid",gridTemplateColumns:"auto 1fr",paddingLeft:g.TV.space4,"> dt":{display:"flex",alignItems:"center",paddingBottom:g.TV.space2},"> dd":{marginLeft:g.TV.space12,paddingBottom:g.TV.space2}},listHeader:[g.l0.fontWeight.medium],content:[g.l0.colWithGap(8)],description:[g.l0.colWithGap(8)],commitList:[g.l0.colWithGap(2),g.l0.pl(4)]});function fu(e){var t=e.commit,n=e.info,i=void 0===n?null:n,o=t.committer.name!==t.author.name&&t.committer.email!==t.author.email,a=Math.abs(t.author.date-t.committer.date)>6e4,l=!t.body,c=null,u=null;return i&&"type"in i?(c=i,"pull-request"===i.type&&(i.reverts&&(u=i.reverts),i.subject&&(l=!0))):i&&(u=i),(0,r.BX)(y.G,{css:du.content,children:[l?null:(0,r.BX)(y.G,{css:du.description,children:[(0,r.tZ)(Z.xv,{children:(0,r.tZ)(Fl,{body:t.body})}),(0,r.tZ)(gc.R,{css:g.l0.backgroundColor.outlineDimmer})]}),(0,r.BX)(y.G,{children:[(0,r.tZ)(Z.xv,{css:du.listHeader,multiline:!1,children:"Author"}),(0,r.BX)("dl",{css:du.definitionList,children:[(0,r.tZ)("dt",{children:"Name:"}),(0,r.tZ)("dd",{children:t.author.name}),(0,r.tZ)("dt",{children:"Email:"}),(0,r.tZ)("dd",{children:t.author.email})]})]}),o?(0,r.BX)(y.G,{children:[(0,r.tZ)(Z.xv,{css:du.listHeader,multiline:!1,children:"Committer"}),(0,r.BX)("dl",{css:du.definitionList,children:[(0,r.tZ)("dt",{children:"Name:"}),(0,r.tZ)("dd",{children:t.committer.name}),(0,r.tZ)("dt",{children:"Email:"}),(0,r.tZ)("dd",{children:t.committer.email})]})]}):null,(0,r.BX)(y.G,{children:[(0,r.tZ)(Z.xv,{css:du.listHeader,multiline:!1,children:"Commit"}),(0,r.BX)("dl",{css:du.definitionList,children:[a?(0,r.BX)(r.HY,{children:[(0,r.tZ)("dt",{children:"Authored:"}),(0,r.tZ)("dd",{children:(0,r.tZ)(eu.E,{date:t.author.date,dateFormat:"absolute"})}),(0,r.tZ)("dt",{children:"Committed:"}),(0,r.tZ)("dd",{children:(0,r.tZ)(eu.E,{date:t.committer.date,dateFormat:"absolute"})})]}):(0,r.BX)(r.HY,{children:[(0,r.tZ)("dt",{children:"Date:"}),(0,r.tZ)("dd",{children:(0,r.tZ)(eu.E,{date:t.author.date,dateFormat:"absolute"})})]}),(0,r.tZ)("dt",{children:"Hash:"}),(0,r.tZ)("dd",{children:t.hash}),c&&"pull-request"===c.type?(0,r.BX)(r.HY,{children:[(0,r.tZ)("dt",{children:"PR:"}),(0,r.BX)("dd",{children:["#",c.id]})]}):null,c&&"branch"===c.type?(0,r.BX)(r.HY,{children:[(0,r.tZ)("dt",{children:"Merged:"}),(0,r.tZ)("dd",{children:c.source}),c.target?(0,r.BX)(r.HY,{children:[(0,r.tZ)("dt",{children:"Into:"}),(0,r.tZ)("dd",{children:c.target})]}):null]}):null,u?(0,r.BX)(r.HY,{children:[(0,r.tZ)("dt",{children:"Reverted:"}),(0,r.tZ)("dd",{children:u.hash})]}):null]})]}),c&&"simple"===c.type?(0,r.BX)(y.G,{children:[(0,r.tZ)(Z.xv,{css:du.listHeader,multiline:!1,children:"Merged"}),(0,r.BX)(y.G,{css:du.commitList,children:[(0,r.tZ)(Z.xv,{multiline:!1,children:c.a}),(0,r.tZ)(Z.xv,{multiline:!1,children:c.b})]})]}):null,c&&"octopus"===c.type?(0,r.BX)(y.G,{children:[(0,r.tZ)(Z.xv,{css:du.listHeader,multiline:!1,children:"Merged"}),(0,r.tZ)(y.G,{css:du.commitList,children:c.parents.map((function(e,t){return(0,r.tZ)(Z.xv,{multiline:!1,children:e},t)}))})]}):null]})}function pu(e){var t=e.commit,n=(0,O.Z)(e,["commit"]);return(0,r.tZ)(jc,(0,at.Z)((0,N.Z)({marker:(0,r.tZ)(xc,{type:"commit"}),header:(0,r.tZ)(Z.xv,{css:g.l0.fontWeight.medium,multiline:!1,children:(0,r.tZ)(Nl,{subject:t.subject})}),unfoldedContent:(0,r.tZ)(fu,{commit:t})},n),{children:(0,r.BX)(y.G,{css:[g.l0.rowWithGap(8),g.l0.align.baseline],children:[(0,r.tZ)(uu,{name:t.author.name,email:t.author.email,color:"dimmer",allowPlaceholderAvatar:!0,small:!0}),(0,r.tZ)(eu.E,{date:t.author.date,textColor:"dimmest",textVariant:"small"})]})}))}var hu=n(63651);function vu(e){var t,n=e.commit,i=e.info,o=(0,O.Z)(e,["commit","info"]);return"branch"!==i.type&&(t="pull-request"===i.type&&i.subject?i.subject:n.subject),(0,r.tZ)(jc,(0,at.Z)((0,N.Z)({marker:(0,r.tZ)(xc,{type:"merge"}),header:(0,r.BX)(Z.xv,{css:[g.l0.rowWithGap(4),g.l0.align.baseline],multiline:!1,children:[(0,r.tZ)(Al,{text:"merged"}),(0,r.tZ)(mu,{info:i,hash:n.hash,subject:n.subject})]}),unfoldedContent:(0,r.tZ)(fu,{commit:n,info:i})},o),{children:(0,r.BX)(y.G,{css:[g.l0.colWithGap(8)],children:[t?(0,r.tZ)(Z.xv,{color:"dimmer",variant:"small",multiline:!1,children:(0,r.tZ)(Nl,{subject:t})}):null,(0,r.BX)(y.G,{css:[g.l0.rowWithGap(8),g.l0.align.baseline,g.l0.flex.shrink(1)],children:[(0,r.tZ)(uu,{name:n.author.name,email:n.author.email,color:"dimmer",allowPlaceholderAvatar:!0,small:!0}),(0,r.tZ)(eu.E,{date:n.author.date,textColor:"dimmest",textVariant:"small"})]})]})}))}function mu(e){var t=e.info,n=e.hash,i=e.subject,o=(0,r.tZ)("span",{css:g.l0.fontWeight.medium,children:i});switch(t.type){case"pull-request":return(0,r.BX)(r.HY,{children:[(0,r.tZ)("span",{children:"pull request"}),(0,r.tZ)(Ul,{id:t.id}),t.reverts&&t.reverts.pr?(0,r.BX)(r.HY,{children:[(0,r.tZ)("span",{children:"-"}),(0,r.tZ)(Bl,{text:"reverts"}),(0,r.tZ)(Ul,{id:t.reverts.pr})]}):null]});case"branch":return t.target?(0,r.BX)(r.HY,{children:[(0,r.tZ)(Hl,{name:t.source}),(0,r.tZ)("span",{children:"into"}),(0,r.tZ)(Hl,{name:t.target})]}):(0,r.BX)(r.HY,{children:[(0,r.tZ)("span",{children:"branch"}),(0,r.tZ)(Hl,{name:t.source})]});case"simple":return(0,r.BX)(r.HY,{children:[(0,r.tZ)(Ml,{hash:t.a}),(0,r.tZ)(hu.Z,{css:{alignSelf:"center"},size:12}),(0,r.tZ)(Ml,{hash:t.b})]});case"octopus":return(0,r.BX)(r.HY,{children:[(0,r.tZ)("span",{children:"commit"}),(0,r.tZ)(Ml,{hash:n}),(0,r.BX)("span",{children:["(",t.parents.length," parents)"]})]});default:return o}}function gu(e){var t=e.commit,n=e.info,i=(0,O.Z)(e,["commit","info"]);return(0,r.tZ)(jc,(0,at.Z)((0,N.Z)({marker:(0,r.tZ)(xc,{type:"revert"}),header:(0,r.BX)(Z.xv,{css:[g.l0.rowWithGap(4),g.l0.align.baseline],multiline:!1,children:[(0,r.tZ)(Bl,{text:"reverted"}),(0,r.tZ)(Ml,{hash:n.hash}),(0,r.tZ)(Nl,{subject:n.subject,quoted:!0})]}),unfoldedContent:(0,r.tZ)(fu,{commit:t,info:n})},i),{children:(0,r.BX)(y.G,{css:[g.l0.rowWithGap(8),g.l0.align.baseline],children:[(0,r.tZ)(uu,{name:t.author.name,email:t.author.email,color:"dimmer",allowPlaceholderAvatar:!0,small:!0}),(0,r.tZ)(eu.E,{date:t.author.date,textColor:"dimmest",textVariant:"small"})]})}))}function yu(e){var t=e.button,n=(0,O.Z)(e,["button"]);return(0,r.tZ)(jc,(0,at.Z)((0,N.Z)({marker:(0,r.tZ)(xc,{type:"boundary"}),joint:"center"},n),{children:(0,r.tZ)(y.G,{children:t})}))}function Zu(e){var t=e.items;return(0,r.tZ)(y.G,{children:t.map((function(e,n){return function(e,t){var n=e[t],i=0===t,o=t===e.length-1;if("boundary"===n.type)return(0,r.tZ)(Jc,{text:n.text,hideConnectorTop:i,hideConnectorBottom:o,boundaryTop:!0,boundaryBottom:!0},n.text);if("button"===n.type)return(0,r.tZ)(yu,{button:n.button,hideConnectorTop:i,hideConnectorBottom:o,boundaryTop:!0,boundaryBottom:!0},n.key);var a=e[t-1]?e[t-1].type:null,l=e[t+1]?e[t+1].type:null,c="commit"!==a,u="commit"!==l;return(0,r.tZ)(bu,{commit:n.commit,hideConnectorTop:i,hideConnectorBottom:o,boundaryTop:c,boundaryBottom:u},n.commit.hash)}(t,n)}))})}function bu(e){var t=e.commit,n=(0,O.Z)(e,["commit"]),i=function(e){if("GitHub"===e.committer.name&&"noreply@github.com"===e.committer.email){var t=e.subject.match(pc);if(t){var n,r=parseInt(t[t.length-1].slice(1),10);if(r)return uc.test(e.subject)&&(n=e.subject.replace(uc,"").trim()),!n&&hc.test(e.subject)&&e.body&&-1===e.body.indexOf("\n")&&(n=e.body),{type:"pull-request",id:r,subject:n,reverts:fc(e)}}}if(hc.test(e.subject)){var i,o=hc.exec(e.subject);if(o)return e.body&&-1===e.body.indexOf("\n")&&(i=e.body),{type:"pull-request",id:parseInt(o[1].slice(1),10),subject:i,reverts:fc(e)}}if(vc.test(e.subject)){var a=vc.exec(e.subject);if(a){var l=mc.exec(e.subject);return{type:"branch",source:a[1],target:l?l[1]:null}}}return e.parents&&e.parents.length>2?{type:"octopus",parents:e.parents}:e.parents&&e.parents.length>1?{type:"simple",a:e.parents[0],b:e.parents[1]}:null}(t);if(i)return(0,r.tZ)(vu,(0,N.Z)({info:i,commit:t},n));var o=fc(t);return o?(0,r.tZ)(gu,(0,N.Z)({info:o,commit:t},n)):(0,r.tZ)(pu,(0,N.Z)({commit:t},n))}var wu=(0,mt.F4)({from:{opacity:0},to:{opacity:1}}),xu=(0,mt.iv)({animation:"".concat(wu," 0.125s 0.25s linear backwards")},g.l0.flex.grow(1),g.l0.display.flex,g.l0.center);function ku(){return(0,r.tZ)(y.G,{css:xu,children:(0,r.tZ)(ze.Z,{size:48})})}var Cu=n(32985);var Su=n(84682);function Tu(e){var t,n,i,o,l,c,u=e.status,s=e.gotoPendingState,f=(0,a.useState)(!1),p=f[0],h=f[1],v=bl(),m=(0,d.Z)().git,g=u.branch,y=null!==(o=null===(t=u.upstream)||void 0===t?void 0:t.branch)&&void 0!==o?o:null,Z=null!==(l=null===(n=u.upstream)||void 0===n?void 0:n.behind)&&void 0!==l?l:0,b=null!==(c=null===(i=u.upstream)||void 0===i?void 0:i.ahead)&&void 0!==c?c:0,w=u.changes.length>0,x=(0,Wa.Z)(function(){var e=(0,ot.Z)((function(e){var t,n;return(0,lt.__generator)(this,(function(r){switch(r.label){case 0:return g&&y&&Z&&!w?[4,e.canMergeBranches(g,y)]:[2,{canPull:!1,mode:Su.T.FF_ONLY,error:null}];case 1:return(t=r.sent()).error?(v(t.error),[2,t]):(n=Su.T.FF_ONLY,b>0&&(n=t.canMerge?Su.T.REBASE:Su.T.MERGE),[2,{canPull:!0,mode:n,error:null}])}}))}));return function(t){return e.apply(this,arguments)}}(),[v,g,y,Z,b,w],{keepStaleResult:!1});if(null===x||void 0===x?void 0:x.error)return null;var k,C,S,T=null===x,E=null!==(k=null===x||void 0===x?void 0:x.canPull)&&void 0!==k&&k,R=null!==(C=null===x||void 0===x?void 0:x.mode)&&void 0!==C?C:Su.T.FF_ONLY;function G(){return(G=(0,ot.Z)((function(){var e;return(0,lt.__generator)(this,(function(t){switch(t.label){case 0:return p?[2]:(h(!0),[4,m.pull({mode:R,allowConflicts:!0})]);case 1:return e=t.sent(),m.forceRefresh(),e.error?(v(e.error),h(!1)):(e.hasConflicts&&s(),rl("upstream-pulled")),[2]}}))}))).apply(this,arguments)}return p?S="Pulling...":g?w?S="Cannot pull with uncommitted changes":0===Z?S="Nothing to pull":T?S="Checking for merge conflicts\u2026":E?(S="Pull ".concat(Z," ").concat((0,Mt.Z)("commit",Z)),R===Su.T.REBASE?S+=" with rebase":R===Su.T.MERGE&&(S+=" with merge")):S="Cannot pull due to merge conflict":S="Cannot pull - the HEAD is detached",(0,r.tZ)(je.zx,{text:S,iconLeft:T||p?(0,r.tZ)(ze.Z,{}):(0,r.tZ)($e.Z,{}),onClick:function(){return G.apply(this,arguments)},loading:T||p,disabled:!E})}var Eu=n(88467);function Ru(e){var t,n,i,o,l,c=e.status,u=(0,a.useState)(!1),s=u[0],f=u[1],p=bl(),h=(0,d.Z)().git,v=null===c.branch,m=null!==(i=null===(t=c.upstream)||void 0===t?void 0:t.behind)&&void 0!==i?i:0,g=null!==(o=null===(n=c.upstream)||void 0===n?void 0:n.ahead)&&void 0!==o?o:0,y=v||m>0||0===g;function Z(){return(Z=(0,ot.Z)((function(){var e;return(0,lt.__generator)(this,(function(t){switch(t.label){case 0:return y||s?[2]:(f(!0),[4,h.push()]);case 1:return e=t.sent(),h.forceRefresh(),e.error?(p(e.error),f(!1)):rl("upstream-pushed"),[2]}}))}))).apply(this,arguments)}return l=s?"Pushing...":v?"Cannot push - the HEAD is detached":0===g?"Nothing to push":m>0?"Cannot push due to unpulled changes":"Push ".concat(g," ").concat((0,Mt.Z)("commit",g)),(0,r.tZ)(je.zx,{text:l,iconLeft:s?(0,r.tZ)(ze.Z,{}):(0,r.tZ)(Eu.Z,{}),onClick:function(){return Z.apply(this,arguments)},disabled:y,loading:s})}function Gu(e){var t=e.branch,n=(0,a.useState)(!1),i=n[0],o=n[1],l=bl(),c=(0,d.Z)().git;function u(){return(u=(0,ot.Z)((function(){var e;return(0,lt.__generator)(this,(function(n){switch(n.label){case 0:return i?[2]:(o(!0),[4,c.switchBranch(t)]);case 1:return(e=n.sent()).error?(l(e.error),o(!1)):(c.forceRefresh(),rl("branch-switched")),[2]}}))}))).apply(this,arguments)}(0,a.useEffect)((function(){return o(!1)}),[t]);var s=i?"Switching to branch...":"Switch to Branch";return(0,r.tZ)(je.zx,{text:s,colorway:"primary",onClick:function(){return u.apply(this,arguments)},iconLeft:i?(0,r.tZ)(ze.Z,{}):(0,r.tZ)(Gl.Z,{}),loading:i})}var Iu=n(49760);function _u(e){for(var t=e.split("/").slice(0,-1),n=[],r=0;r<t.length;r++){var i=t.slice(r).join("/")+"/";0!==r&&(i="\u2026/"+i),n.push(i)}return n.reverse()}function Du(e){if(0===e.length)return new Map;if(1===e.length)return new Map([[e[0],null]]);var t=new Map,n=!0,r=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done);n=!0){var c=a.value,u=(0,v.UO)(c),s=t.get(u);s||(s=[],t.set(u,s)),s.push(c)}}catch(Z){r=!0,i=Z}finally{try{n||null==l.return||l.return()}finally{if(r)throw i}}var d=new Map,f=!0,p=!1,h=void 0;try{for(var m,g=function(){var e=function(e){var t=[],i=new Map,a=!0,l=!1,c=void 0;try{for(var u,s=n[Symbol.iterator]();!(a=(u=s.next()).done);a=!0){var f=(0,o.Z)(u.value,2),p=f[0],h=f[1];if(!r.has(p)){var v=h[e];v||(v=h[h.length-1]),t.push(v),i.set(v,p)}}}catch(Z){l=!0,c=Z}finally{try{a||null==s.return||s.return()}finally{if(l)throw c}}if(0===t.length)return"break";var m=!0,g=!1,y=void 0;try{for(var b,w=function(){var e=b.value,n=i.get(e);if(void 0===n)throw new Error("Unpopulated segment map");1===t.filter((function(t){return t===e})).length&&(r.add(n),d.set(n,e))},x=t[Symbol.iterator]();!(m=(b=x.next()).done);m=!0)w()}catch(Z){g=!0,y=Z}finally{try{m||null==x.return||x.return()}finally{if(g)throw y}}},t=(0,o.Z)(m.value,2)[1];if(1===t.length)return d.set(t[0],null),"continue";var n=new Map,r=new Set,i=0,a=!0,l=!1,c=void 0;try{for(var u,s=t[Symbol.iterator]();!(a=(u=s.next()).done);a=!0){var f=u.value;if(-1!==f.indexOf("/")){var p=_u(f);n.set(f,p),p.length>i&&(i=p.length)}else d.set(f,null),r.add(f)}}catch(Z){l=!0,c=Z}finally{try{a||null==s.return||s.return()}finally{if(l)throw c}}for(var h=0;h<=i;h++){if("break"===e(h))break}if(r.size!==t.length){var v=!0,g=!1,y=void 0;try{for(var b,w=t[Symbol.iterator]();!(v=(b=w.next()).done);v=!0){var x=b.value;if(!r.has(x)){var k=x.split("/").slice(0,-1).join("/");d.set(x,k)}}}catch(Z){g=!0,y=Z}finally{try{v||null==w.return||w.return()}finally{if(g)throw y}}}},y=t[Symbol.iterator]();!(f=(m=y.next()).done);f=!0)g()}catch(Z){p=!0,h=Z}finally{try{f||null==y.return||y.return()}finally{if(p)throw h}}return d}var Bu=n(59884),Pu=(0,b.X)({actionsIndex:[g.l0.height(24),g.l0.align.center,g.l0.borderRadius(4)],actionsWorktree:[g.l0.height(24),g.l0.flex.row,g.l0.align.center,g.l0.borderRadius(4)],unstage:[g.l0.height(24),g.l0.width(24),g.l0.borderRadius(2)],stage:[g.l0.px(12),g.l0.height(24),g.l0.width(24),g.l0.borderRadius(2)],reset:[g.l0.pl(16),g.l0.pr(12),g.l0.height(24),g.l0.width(24),g.l0.borderRadius(2)],resetIcon:{transform:"scale(0.85)"},divider:[g.l0.height("75%"),g.l0.width(1),g.l0.backgroundColor.outlineStronger]});function Au(e){var t=e.file,n=e.list,i=e.stageFiles,o=e.restoreFiles,l=e.disabled,c=void 0!==l&&l,u=(0,a.useState)(!1),s=u[0],d=u[1],f=(0,a.useState)(!1),p=f[0],h=f[1];function v(){return(v=(0,ot.Z)((function(){return(0,lt.__generator)(this,(function(e){switch(e.label){case 0:return c?[2]:(d(!0),[4,i({reset:[t.path]})]);case 1:return e.sent(),d(!1),[2]}}))}))).apply(this,arguments)}function m(){return(m=(0,ot.Z)((function(){return(0,lt.__generator)(this,(function(e){switch(e.label){case 0:return c?[2]:(d(!0),[4,i({add:[t.path]})]);case 1:return e.sent(),d(!1),[2]}}))}))).apply(this,arguments)}function g(){return(g=(0,ot.Z)((function(){return(0,lt.__generator)(this,(function(e){switch(e.label){case 0:return c||"worktree"!==n?[2]:(h(!0),[4,o(t.path)]);case 1:return e.sent(),h(!1),[2]}}))}))).apply(this,arguments)}return c=c||p||s,"index"===n?(0,r.tZ)($.Tg,{elevated:!0,css:Pu.actionsIndex,children:(0,r.tZ)(ce.h,{css:Pu.unstage,alt:"Unstage changes",size:18,tooltipDelay:"long",onClick:function(){return v.apply(this,arguments)},disabled:c,children:s?(0,r.tZ)(ze.Z,{}):(0,r.tZ)(Bu.Z,{})})}):(0,r.BX)($.Tg,{elevated:!0,css:Pu.actionsWorktree,children:[(0,r.tZ)(ce.h,{css:Pu.reset,alt:"Reset changes",size:18,tooltipDelay:"long",onClick:function(){return g.apply(this,arguments)},disabled:c,children:p?(0,r.tZ)(ze.Z,{}):(0,r.tZ)(Zc.Z,{css:Pu.resetIcon})}),(0,r.tZ)("div",{css:Pu.divider}),(0,r.tZ)(ce.h,{css:Pu.stage,alt:"Stage changes",size:18,tooltipDelay:"long",onClick:function(){return m.apply(this,arguments)},disabled:c,children:s?(0,r.tZ)(ze.Z,{}):(0,r.tZ)(Uo.Z,{})})]})}var Lu=(0,b.X)({path:[g.l0.rowWithGap(8),g.l0.flex.growAndShrink(1),g.l0.align.center],source:[g.l0.color.foregroundDimmest],sourceArrow:[g.l0.mx(8)]});function Uu(e){var t=e.path,n=e.prefix,i=e.source,o=e.onClick;return(0,r.BX)(y.G,{css:Lu.path,children:[(0,r.tZ)(Ua.Z,{path:t}),(0,r.BX)(Z.xv,{multiline:!1,children:[(0,r.tZ)(jl,{path:t,prefix:n,onClick:o}),i?(0,r.BX)("span",{css:Lu.source,children:[(0,r.tZ)("span",{css:Lu.sourceArrow,children:"\u2190"}),(0,r.tZ)(jl,{path:i})]}):null]})]})}var Xu=(0,mt.iv)({width:60,height:24},g.l0.display.flex,g.l0.center,g.l0.borderRadius(4),g.l0.fontSize(g.TV.fontSizeSmall));function Mu(e){var t,n,i;switch(e.type){case Iu.h.ADDED:case Iu.h.UNTRACKED:t="Added",n=g.TV.greenDimmest,i=g.TV.greenStrongest;break;case Iu.h.MODIFIED:t="Modified",n=g.TV.yellowDimmest,i=g.TV.yellowStrongest;break;case Iu.h.DELETED:t="Deleted",n=g.TV.redDimmest,i=g.TV.redStrongest;break;case Iu.h.RENAMED:t="Renamed",n=g.TV.tealDimmest,i=g.TV.tealStrongest;break;case Iu.h.COPIED:t="Copy",n=g.TV.limeDimmest,i=g.TV.limeStrongest;break;default:return null}return(0,r.tZ)(y.G,{style:{backgroundColor:n,color:i},css:Xu,children:(0,r.tZ)("span",{children:t})})}var Nu=(0,mt.iv)(g.l0.py(2),g.l0.rowWithGap(4),g.l0.align.center);function Ou(e){var t,n=e.file,i=e.list,o=e.stageFiles,a=e.restoreFiles,l=e.pathMap,c=e.disabled,u=void 0!==c&&c,s=e.onFilePathClick,d=null===l||void 0===l?void 0:l.get(n.path),f=null===(t=n.source)||void 0===t?void 0:t.path,p="index"===i?n.type.index:n.type.worktree,h=(0,xt.Z)((function(){if(p!==Iu.h.DELETED)return function(){return s(n.path)}}),[n.path,s,p]);return(0,r.BX)(y.G,{css:Nu,children:[(0,r.tZ)(Uu,{path:n.path,prefix:d,source:f,onClick:h}),(0,r.tZ)(Mu,{type:p}),(0,r.tZ)(Au,{file:n,list:i,stageFiles:o,restoreFiles:a,disabled:u})]})}var Fu=(0,b.X)({actions:[g.l0.rowWithGap(2),g.l0.backgroundColor.backgroundHighest,g.l0.borderRadius(8)],buttonReset:[g.l0.borderRadius(8,0,0,8)],buttonStage:[g.l0.borderRadius(0,8,8,0)],divider:[g.l0.my(8),g.l0.width(1),g.l0.backgroundColor.outlineStronger]});function Wu(e){var t=e.type,n=e.stageFiles,i=e.restoreFiles,o=e.disabled,l=void 0!==o&&o,c=(0,a.useState)(!1),u=c[0],s=c[1],d=(0,a.useState)(!1),f=d[0],p=d[1];function h(){return v.apply(this,arguments)}function v(){return(v=(0,ot.Z)((function(){return(0,lt.__generator)(this,(function(e){switch(e.label){case 0:return l?[2]:(s(!0),[4,n({all:"index"!==t})]);case 1:return e.sent(),s(!1),[2]}}))}))).apply(this,arguments)}function m(){return(m=(0,ot.Z)((function(){return(0,lt.__generator)(this,(function(e){switch(e.label){case 0:return l||"worktree"!==t?[2]:(p(!0),[4,i(!0)]);case 1:return e.sent(),p(!1),[2]}}))}))).apply(this,arguments)}return l=l||f||u,"index"===t?(0,r.tZ)(je.zx,{text:"Unstage All",iconLeft:u?(0,r.tZ)(ze.Z,{}):(0,r.tZ)(Bu.Z,{}),onClick:h,disabled:l,loading:u,small:!0}):(0,r.BX)(y.G,{css:Fu.actions,children:[(0,r.tZ)(je.zx,{css:Fu.buttonReset,text:"Reset All",iconLeft:f?(0,r.tZ)(ze.Z,{}):(0,r.tZ)(Zc.Z,{}),onClick:function(){return m.apply(this,arguments)},disabled:l,loading:f,small:!0}),(0,r.tZ)("div",{css:Fu.divider}),(0,r.tZ)(je.zx,{css:Fu.buttonStage,text:"Stage All",iconLeft:u?(0,r.tZ)(ze.Z,{}):(0,r.tZ)(Uo.Z,{}),onClick:h,disabled:l,loading:u,small:!0})]})}var Hu=n(94629),Vu=(0,b.X)({list:[g.l0.pt(4),g.l0.pb(8),g.l0.colWithGap(4)],listFolded:[g.l0.py(4)],header:[g.l0.px(8),g.l0.rowWithGap(4),g.l0.align.center],headerFoldable:[g.l0.py(4),g.l0.pl(4),g.l0.pr(8),g.l0.rowWithGap(4),g.l0.align.center],headerText:[g.l0.flex.grow(1)],body:[g.l0.px(8),g.l0.maxHeight("50vh"),g.l0.overflowY("auto")]});function zu(e){var t,n=e.files,i=e.type,o=e.stageFiles,l=e.restoreFiles,c=e.onFilePathClick,u=e.pathMap,s=e.foldable,d=void 0!==s&&s,f=e.disabled,p=void 0!==f&&f,h=(0,a.useState)(!1),v=h[0],m=h[1],g=(0,a.useRef)(null),Z=(0,a.useRef)(null),b=(0,Hu.MG)({count:n.length,getScrollElement:function(){return Z.current},getItemKey:function(e){return n[e].path},estimateSize:function(){return 28},overscan:20}),w=b.getVirtualItems();return d&&v?(0,r.tZ)(y.G,{css:Vu.listFolded,children:(0,r.BX)(y.G,{css:d?Vu.headerFoldable:Vu.header,children:[(0,r.tZ)(ju,{files:n,type:i,setFolded:m,foldable:!0,folded:!0}),(0,r.tZ)(Wu,{type:i,stageFiles:o,restoreFiles:l,disabled:p})]})}):(0,r.BX)(y.G,{innerRef:g,css:Vu.list,children:[(0,r.BX)(y.G,{css:d?Vu.headerFoldable:Vu.header,children:[(0,r.tZ)(ju,{files:n,type:i,setFolded:m,foldable:d}),(0,r.tZ)(Wu,{type:i,stageFiles:o,restoreFiles:l,disabled:p})]}),(0,r.tZ)(y.K.div,{ref:Z,css:Vu.body,children:(0,r.tZ)("div",{style:{minHeight:b.getTotalSize()},children:(0,r.tZ)("div",{style:{transform:"translateY(".concat(null===(t=w[0])||void 0===t?void 0:t.start,"px)"),willChange:"transform"},children:w.map((function(e){var t=n[e.index];return(0,r.tZ)("div",{"data-index":e.index,children:(0,r.tZ)(Ou,{file:t,list:i,stageFiles:o,restoreFiles:l,onFilePathClick:c,pathMap:u,disabled:p},t.path)},e.key)}))})})})]})}function ju(e){var t=e.files,n=e.type,i=e.setFolded,o=e.foldable,a=void 0!==o&&o,l=e.folded,c=void 0!==l&&l,u="index"===n?"staged":"changed",s=(0,Mt.Z)("file",t.length),d="".concat(t.length," ").concat(u," ").concat(s);return a&&c?(0,r.BX)(r.HY,{children:[(0,r.tZ)(ce.h,{alt:"Show list",onClick:function(){return i(!1)},children:(0,r.tZ)(Me.Z,{})}),(0,r.tZ)(Z.xv,{css:Vu.headerText,multiline:!1,children:d})]}):(0,r.BX)(r.HY,{children:[a?(0,r.tZ)(ce.h,{alt:"Hide list",onClick:function(){return i(!0)},children:(0,r.tZ)(Ne.Z,{color:g.TV.foregroundDimmest})}):null,(0,r.tZ)(Z.xv,{css:Vu.headerText,color:"dimmest",multiline:!1,children:d})]})}var qu=n(60803),$u=n(2041),Yu=(0,b.X)({container:[g.l0.colWithGap(8)],buttons:[g.l0.rowWithGap(8),g.l0.justify.end],restoringBoth:[g.l0.colWithGap(12)],listContainer:[g.l0.colWithGap(4)],list:[g.l0.px(4),g.l0.colWithGap(2)]});function Ku(e){var t=e.show,n=e.files,i=e.pathMap,o=e.callback,l=(0,C.Z)(o),c=(0,a.useCallback)((function(){var e;null===(e=l.current)||void 0===e||e.call(l,!0)}),[l]),u=(0,a.useCallback)((function(){var e;null===(e=l.current)||void 0===e||e.call(l,!1)}),[l]);return(0,r.tZ)($u.u,{isOpen:t,onRequestClose:u,children:t?(0,r.BX)(y.G,{css:Yu.container,children:[(0,r.BX)(Z.h4,{level:2,children:["Discard ",(0,Mt.Z)("Change",n.length)]}),(0,r.tZ)(Qu,{files:n,pathMap:i}),(0,r.BX)(y.G,{css:Yu.buttons,children:[(0,r.tZ)(je.zx,{text:"Cancel",iconLeft:(0,r.tZ)(qu.Z,{}),onClick:u}),(0,r.tZ)(je.zx,{text:"Discard ".concat((0,Mt.Z)("Change",n.length)),iconLeft:(0,r.tZ)(Zc.Z,{}),colorway:"negative",onClick:c})]})]}):null})}function Qu(e){var t=e.files,n=e.pathMap,i=[],o=[],a=!0,l=!1,c=void 0;try{for(var u,s=t[Symbol.iterator]();!(a=(u=s.next()).done);a=!0){var d=u.value;d.type.worktree===Iu.h.UNTRACKED?o.push(d):i.push(d)}}catch(f){l=!0,c=f}finally{try{a||null==s.return||s.return()}finally{if(l)throw c}}return!i.length&&o.length?(0,r.BX)(y.G,{css:Yu.listContainer,children:[(0,r.tZ)(Z.xv,{children:1===o.length?"Do you want to permanently delete this file?":"Do you want to permanently delete these files?"}),(0,r.tZ)(Ju,{files:o,pathMap:n})]}):i.length&&!o.length?(0,r.BX)(y.G,{css:Yu.listContainer,children:[(0,r.tZ)(Z.xv,{children:1===i.length?"Do you want to undo the changes to this file?":"Do you want to undo the changes to these files?"}),(0,r.tZ)(Ju,{files:i,pathMap:n})]}):(0,r.BX)(y.G,{css:Yu.restoringBoth,children:[i.length?(0,r.BX)(y.G,{css:Yu.listContainer,children:[(0,r.BX)(Z.h4,{level:3,children:["Tracked ",(0,Mt.Z)("File",i.length)]}),(0,r.tZ)(Z.xv,{multiline:!1,children:1===i.length?"This file will have its changes undone.":"These files will have their changes undone."}),(0,r.tZ)(Ju,{files:i,pathMap:n})]}):null,o.length?(0,r.BX)(y.G,{css:Yu.listContainer,children:[(0,r.BX)(Z.h4,{level:3,children:["Untracked ",(0,Mt.Z)("File",o.length)]}),(0,r.tZ)(Z.xv,{multiline:!1,children:1===o.length?"This file will be permanently deleted.":"These files will be permanently deleted."}),(0,r.tZ)(Ju,{files:o,pathMap:n})]}):null]})}function Ju(e){var t=e.files,n=e.pathMap,i=(0,a.useMemo)((function(){return t.length>20?t.slice(0,20):t}),[t]);return(0,r.tZ)(y.G,{children:(0,r.BX)("ul",{css:Yu.list,children:[i.map((function(e){var t;return(0,r.tZ)("li",{children:(0,r.tZ)(Uu,{path:e.path,prefix:n.get(e.path),source:null===(t=e.source)||void 0===t?void 0:t.path})},e.path)})),t.length<=20?null:(0,r.tZ)("li",{children:(0,r.BX)(Z.xv,{color:"dimmer",children:["... ",t.length-20," more"," ",(0,Mt.Z)("file",t.length-20)]})})]})})}var es=[{"& > span:first-child":[g.l0.flex.grow(1),g.l0.textAlign.left]},{"& > span":[g.l0.flex.shrink(1)]}],ts=(0,b.X)({buttonFolded:[es,g.l0.height("auto"),g.l0.py(8),g.l0.fontWeight.medium],buttonUnfolded:[es,g.l0.height("auto"),g.l0.py(8),g.l0.fontWeight.medium,g.l0.border({color:g.TV.outlineDimmer,direction:"bottom"}),g.l0.borderRadius(8,8,0,0)],container:[g.l0.flex.grow(1),g.l0.borderRadius(8)],lists:[g.l0.borderRadius(0,0,8,8)],divider:[g.l0.height(1),g.l0.minHeight(1),g.l0.width("100%"),g.l0.backgroundColor.outlineDimmer],autoStageMessage:[g.l0.pt(4),g.l0.pb(8),g.l0.px(4),g.l0.center],noChangesMessage:[g.l0.py(16),g.l0.px(4),g.l0.center],buttonText:[g.l0.flex.grow(1)],details:[g.l0.rowWithGap(4),g.l0.fontWeight.normal,g.l0.color.foregroundDimmest]});function ns(e){var t=e.status,n=e.stageFiles,i=e.restoreFiles,o=e.onStagedFileClick,l=e.disabled,c=void 0!==l&&l,u=(0,a.useState)(!1),s=u[0],d=u[1],f=(0,a.useState)(!1),p=f[0],h=f[1],v=(0,a.useState)(!1),m=v[0],g=v[1],b=(0,a.useMemo)((function(){return Du(t.changes.map((function(e){return e.path})))}),[t]),w=(0,a.useMemo)((function(){var e=[],n=[],r=!0,i=!1,o=void 0;try{for(var a,l=t.changes[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value;c.staged&&e.push(c),c.type.worktree!==Iu.h.UNMODIFIED&&n.push(c)}}catch(u){i=!0,o=u}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return[e,n]}),[t.changes]),x=w[0],k=w[1],C=x.length>0&&k.length>0,S=function(e){var t=(0,a.useState)((function(){return{show:!1,files:[]}})),n=t[0],i=t[1],o=(0,a.useCallback)((function(e){return new Promise((function(t){0===e.length&&t(!1),i({show:!0,files:e,callback:function(e){i({show:!1,files:[],callback:void 0}),t(e)}})}))}),[]);return{openRestoreConfirmationModal:o,restoreConfirmationModal:(0,a.useMemo)((function(){return(0,r.tZ)(Ku,(0,at.Z)((0,N.Z)({},n),{pathMap:e}))}),[n,e])}}(b),T=S.openRestoreConfirmationModal,E=S.restoreConfirmationModal,R=(0,a.useCallback)(function(){var e=(0,ot.Z)((function(e){return(0,lt.__generator)(this,(function(t){switch(t.label){case 0:return"all"in e?(h(!0),[4,n(e)]):[3,2];case 1:return t.sent(),h(!1),[3,4];case 2:return[4,n(e)];case 3:t.sent(),t.label=4;case 4:return[2]}}))}));return function(t){return e.apply(this,arguments)}}(),[n]),G=(0,a.useCallback)(function(){var e=(0,ot.Z)((function(e){var t,n;return(0,lt.__generator)(this,(function(r){switch(r.label){case 0:return!0!==e?[3,4]:(g(!0),[4,T(k)]);case 1:return r.sent()?[4,i(e)]:[3,3];case 2:r.sent(),r.label=3;case 3:return g(!1),[3,8];case 4:if("string"===typeof e){if(!(n=k.find((function(t){return t.path===e}))))throw g(!1),new Error("Could not find file in worktree list");t=[n]}else t=k.filter((function(t){return e.includes(t.path)}));return[4,T(t)];case 5:return r.sent()?[4,i(e)]:[3,7];case 6:r.sent(),r.label=7;case 7:g(!1),r.label=8;case 8:return[2]}}))}));return function(t){return e.apply(this,arguments)}}(),[T,i,k]);return s?(0,r.tZ)(rs,{setFolded:d,changeCount:k.length,stagedCount:x.length,disabled:c,folded:!0}):0===x.length&&0===k.length?(0,r.BX)(y.G,{style:{opacity:c?.725:void 0},css:ts.container,children:[(0,r.tZ)(rs,{setFolded:d,changeCount:k.length,stagedCount:x.length,disabled:c}),(0,r.tZ)($.Tg,{css:ts.lists,elevated:!0,children:(0,r.tZ)(y.G,{css:ts.noChangesMessage,children:(0,r.tZ)(Z.xv,{color:"dimmest",multiline:!1,children:"No changed or staged files."})})})]}):(0,r.BX)(r.HY,{children:[(0,r.BX)(y.G,{style:{opacity:c?.725:void 0},css:ts.container,children:[(0,r.tZ)(rs,{setFolded:d,changeCount:k.length,stagedCount:x.length,disabled:c}),(0,r.BX)($.Tg,{css:ts.lists,elevated:!0,children:[0===x.length?null:(0,r.tZ)(zu,{type:"index",files:x,stageFiles:R,restoreFiles:G,onFilePathClick:o,pathMap:b,foldable:C,disabled:c||p||m}),C?(0,r.tZ)("div",{css:ts.divider}):null,0===k.length?null:(0,r.BX)(r.HY,{children:[(0,r.tZ)(zu,{type:"worktree",files:k,stageFiles:R,restoreFiles:G,onFilePathClick:o,pathMap:b,foldable:C,disabled:c||p||m}),C?null:(0,r.tZ)(y.G,{css:ts.autoStageMessage,children:(0,r.tZ)(Z.xv,{variant:"small",color:"dimmest",multiline:!1,children:"Committing will automatically stage your changes."})})]})]})]}),E]})}function rs(e){var t=e.folded,n=void 0!==t&&t,i=e.setFolded,o=e.changeCount,a=e.stagedCount,l=e.disabled,c=void 0!==l&&l;return(0,r.tZ)(je.zx,{css:n?ts.buttonFolded:ts.buttonUnfolded,text:"Staging Area",secondaryText:(0,r.tZ)(is,{folded:n,changeCount:o,stagedCount:a}),onClick:function(){return i(!n)},iconRight:n?(0,r.tZ)(Me.Z,{}):(0,r.tZ)(Ne.Z,{}),disabled:c,small:!0})}function is(e){var t=e.folded,n=e.changeCount,i=e.stagedCount;if(!t)return null;var o=n>0,a=i>0;return o||a?(0,r.BX)("span",{css:ts.details,children:[o?(0,r.BX)("span",{children:[n," ",(0,Mt.Z)("change",n)]}):null,o&&a?(0,r.tZ)("span",{children:"/"}):null,a?(0,r.BX)("span",{children:[i," staged"]}):null]}):(0,r.tZ)("span",{css:ts.details,children:(0,r.tZ)("span",{children:"no changes"})})}var os=n(95434),as=n(47518),ls=n(45353),cs=n(82001),us=n(15823),ss=n(95245),ds=(0,mt.iv)({height:32,width:"100%",resize:"none",border:"none"}),fs=(0,mt.iv)({width:"100%",resize:"none",border:"none"}),ps=(0,b.X)({surface:[g.l0.p(8),g.l0.colWithGap(12),g.l0.borderRadius(0,0,8,8)],button:[g.l0.height("auto"),g.l0.py(8),g.l0.fontWeight.medium,g.l0.borderRadius(8,8,0,0),g.l0.justify.start,g.l0.border({color:g.TV.outlineDimmer,direction:"bottom"}),{"> span:first-child":{flexGrow:1,textAlign:"start"}}],requiredText:[g.l0.display.inlineFlex,g.l0.rowWithGap(4)],subjectField:[g.l0.colWithGap(8)],bodyField:[g.l0.colWithGap(8)],subjectInput:ds,bodyInput:fs,subjectInputDisabled:[ds,{opacity:.5}],bodyInputDisabled:[fs,{opacity:.5}],required:[g.l0.color.accentNegativeStronger],keyCombo:[g.l0.display.inlineFlex,g.l0.rowWithGap(4),g.l0.flex.grow(1),g.l0.align.center],keyComboText:[g.l0.fontWeight.normal,g.l0.color.foregroundDimmest]});function hs(e){var t=e.message,n=e.disabled,i=void 0!==n&&n,o=e.onMessageChange,l=e.onCommitShortcut,c=function(e,t){e=e.replaceAll("\n"," "),o(e+(t?"\n\n"+t:""))},u=(0,a.useState)(!0),s=u[0],d=u[1],f=(0,a.useState)(!1),p=f[0],h=f[1],v=(0,a.useState)(!1),m=v[0],g=v[1],Z=(0,a.useRef)(null),b=(0,a.useRef)(null),w=(0,Dn.Z)(t.split("\n\n")),x=w[0],k=void 0===x?"":x,C=w.slice(1).join("\n\n"),S=(0,ss.d)(),T=(0,ls.gf)(us.CN.gitCommit.id);return(0,cs.ow)(us.CT,m),(0,ls.Il)((function(){return[us.CN.gitCommit.id,{run:function(){null===l||void 0===l||l()},scope:us.CT,bubble:!1}]}),[l]),(0,r.BX)(y.G,{children:[(0,r.tZ)(je.zx,{css:ps.button,text:(0,r.BX)("span",{css:ps.requiredText,children:[(0,r.tZ)("span",{children:"Commit Message"}),s?(0,r.tZ)(Zs,{}):null]}),secondaryText:S||!T?void 0:(0,r.BX)("span",{css:ps.keyCombo,children:[(0,r.tZ)("span",{css:ps.keyComboText,children:"Commit:"}),(0,r.tZ)(ls.bM,{keyCombo:T,small:!0})]}),iconRight:s?(0,r.tZ)(Me.Z,{}):(0,r.tZ)(Ne.Z,{}),onClick:function(){return d((function(e){return!e}))},small:!0}),(0,r.BX)($.Tg,{css:ps.surface,elevated:!0,children:[(0,r.tZ)(ms,{ref:Z,value:k,compact:s,disabled:i,onChange:function(e){c(e,C)},onNewline:function(){if(s)d(!1),h(!0);else{if(!b.current)return;b.current.focus(),b.current.setSelectionRange(0,0)}},onFocus:function(){g(!0)},onBlur:function(){g(!1)}}),s&&!C?null:(0,r.tZ)(ys,{ref:b,value:C,compact:s,disabled:i,onChange:function(e){var t;(c(k,e),s&&!e)?null===(t=Z.current)||void 0===t||t.focus():s&&d(!1)},onBackspaceWhenEmpty:function(){Z.current&&Z.current.focus()},onFocus:function(){p&&h(!1),g(!0)},onBlur:function(){g(!1)},autoFocus:p})]})]})}function vs(e,t){var n=e.value,i=e.compact,o=void 0!==i&&i,a=e.disabled,l=void 0!==a&&a,c=e.onChange,u=e.onNewline,s=e.onFocus,d=e.onBlur;return(0,r.BX)(y.G,{css:ps.subjectField,children:[o?null:(0,r.tZ)(Z.xv,{variant:"small",color:"dimmer",multiline:!1,children:(0,r.BX)("span",{css:ps.requiredText,children:[(0,r.tZ)("span",{children:"Summary"}),(0,r.tZ)(Zs,{})]})}),(0,r.tZ)(Bn.B,{ref:t,css:l?ps.subjectInputDisabled:ps.subjectInput,placeholder:"Summary of your commit...",value:n,disabled:l,onChange:function(e){return null===c||void 0===c?void 0:c(e.currentTarget.value)},onKeyDown:function(e){"Enter"!==e.key||e.defaultPrevented||(e.preventDefault(),e.stopPropagation(),null===u||void 0===u||u())},onFocus:s,onBlur:d})]})}var ms=(0,a.forwardRef)(vs);function gs(e,t){var n=e.value,i=e.compact,o=void 0!==i&&i,a=e.disabled,l=void 0!==a&&a,c=e.autoFocus,u=void 0!==c&&c,s=e.onChange,d=e.onBackspaceWhenEmpty,f=e.onFocus,p=e.onBlur,h=(0,os.Z)().ref;return(0,r.BX)(y.G,{css:ps.bodyField,children:[o?null:(0,r.tZ)(Z.xv,{variant:"small",color:"dimmer",multiline:!1,children:"Description"}),(0,r.tZ)(Bn.B,{ref:o?t:(0,as.l)(t,h),css:l?ps.bodyInputDisabled:ps.bodyInput,placeholder:"Description of your commit...",value:n,disabled:l,onChange:function(e){return null===s||void 0===s?void 0:s(e.currentTarget.value)},onKeyDown:function(e){"Backspace"===e.key&&""===n&&(e.preventDefault(),e.stopPropagation(),null===d||void 0===d||d())},onFocus:f,onBlur:p,autoFocus:u})]})}var ys=(0,a.forwardRef)(gs);function Zs(){return(0,r.tZ)(ee.u,{tooltip:"This field is required.",placement:"top",children:(0,r.tZ)("span",{css:ps.required,children:"*"})})}var bs=(0,mt.iv)(g.l0.colWithGap(8));function ws(e){var t=e.status,n=e.onStagedFileClick,i=(0,a.useState)(t),o=i[0],l=i[1],c=(0,a.useState)(""),u=c[0],s=c[1],f=(0,a.useState)(0),p=f[0],h=f[1],v=(0,a.useState)(!1),m=v[0],g=v[1],b=bl();(0,a.useEffect)((function(){return l(t)}),[t]);var w=(0,d.Z)().git;if(!o||!o.changes.length)return(0,r.tZ)(y.G,{css:bs,children:(0,r.tZ)(Z.xv,{color:"dimmest",multiline:!1,children:"There are no changes to commit."})});var x=o.changes.length,k=o.changes.filter((function(e){return e.staged})).length;function C(){return(C=(0,ot.Z)((function(e){var t,n;return(0,lt.__generator)(this,(function(r){switch(r.label){case 0:return m?[2]:(h((function(e){return e+1})),[4,w.stageFiles(e)]);case 1:return(t=r.sent()).error?[3,3]:[4,w.status()];case 2:return(n=r.sent()).error?b(n.error):l(n),w.forceRefresh(),[3,4];case 3:b(t.error),r.label=4;case 4:return h((function(e){return e-1})),[2]}}))}))).apply(this,arguments)}function S(){return S=(0,ot.Z)((function(e){var t,n;return(0,lt.__generator)(this,(function(r){switch(r.label){case 0:return m?[2]:(h((function(e){return e+1})),[4,w.restoreFiles(e)]);case 1:return(t=r.sent()).error?[3,3]:[4,w.status()];case 2:return(n=r.sent()).error?b(n.error):l(n),w.forceRefresh(),[3,4];case 3:b(t.error),r.label=4;case 4:return h((function(e){return e-1})),[2]}}))})),S.apply(this,arguments)}function T(){return E.apply(this,arguments)}function E(){return(E=(0,ot.Z)((function(){var e,t;return(0,lt.__generator)(this,(function(n){switch(n.label){case 0:return m||0===x||p>0?[2]:(g(!0),0!==k?[3,2]:[4,w.stageFiles({all:!0})]);case 1:n.sent(),n.label=2;case 2:return[4,w.commit({message:u})];case 3:return(e=n.sent()).error?(g(!1),b(e.error),[3,6]):[3,4];case 4:return rl("commit-created",{hasDescription:-1!==u.trim().indexOf("\n\n")}),[4,w.status()];case 5:t=n.sent(),g(!1),t.error?b(t.error):(s(""),l(t)),w.forceRefresh(),n.label=6;case 6:return[2]}}))}))).apply(this,arguments)}var R="Nothing to commit";if(m)R="Committing...";else if(k>0){var G=(0,Mt.Z)("change",k);R="Commit ".concat(k," staged ").concat(G)}else x>0&&0===k&&(R="Stage and commit all changes");var I=!u||0===x||p>0||m;return(0,r.BX)(y.G,{css:bs,children:[(0,r.tZ)(hs,{message:u,disabled:m,onMessageChange:s,onCommitShortcut:T}),(0,r.tZ)(ns,{status:o,stageFiles:function(e){return C.apply(this,arguments)},restoreFiles:function(e){return S.apply(this,arguments)},onStagedFileClick:n,disabled:m}),(0,r.tZ)(je.zx,{text:R,onClick:T,disabled:I,loading:m,colorway:"primary",iconLeft:(0,r.tZ)(J.Z,{}),stretch:!0})]})}var xs=(0,b.X)({warning:[g.l0.align.start],header:[g.l0.fontWeight.bold]});function ks(){var e=(0,Ae.P5)({controlName:"flag-disable-github-import",logFlagToAnalytics:!1});return(0,r.BX)(r.HY,{children:[(0,r.tZ)(Lr.E,{css:xs.warning,icon:(0,r.tZ)(Q.Z,{}),colorway:"warning",text:(0,r.BX)(r.HY,{children:[(0,r.tZ)("span",{css:xs.header,children:"Can't push or pull from GitHub"}),(0,r.tZ)("br",{}),(0,r.tZ)("span",{children:"This Repl has a GitHub repository as a remote, but you are not connected to GitHub."})]})}),e?null:(0,r.tZ)(il,{})]})}var Cs=n(2447),Ss=(0,mt.iv)(g.l0.flex.shrink(1));function Ts(e){var t=e.date,n=(0,a.useState)(null),i=n[0],o=n[1];return(0,a.useEffect)((function(){if(t){var e=function(){var e=new Date,n="just now";e.getTime()-t.getTime()>6e4&&(n=(0,Cs.Z)(t,e,{addSuffix:!0})),n=n.replace(/minutes?/,"min"),o(n)};e();var n=setInterval(e,6e4);return function(){clearInterval(n),o(null)}}}),[t]),i?(0,r.BX)(Z.xv,{css:Ss,color:"dimmest",variant:"small",multiline:!1,children:["last fetched ",i]}):null}function Es(e){var t=e.hasRemoteMergeConflict,n=e.hasUnpulledCommits,i=e.hasUnpushedCommits,o=e.workTreeDirty,a=[];return o&&n&&a.push("Can't pull: you have uncommitted changes"),t&&(n||i)&&(n&&i?(o||a.push("Warning: pulling will start a merge with conflicts"),a.push("Can't push: unpulled changes must be merged first")):n?o||a.push("Warning: pulling will start a merge with conflicts"):i&&a.push("Can't push: merge conflict with remote")),(0,r.tZ)(r.HY,{children:a.map((function(e){return(0,r.tZ)(Lr.E,{text:e,colorway:"warning",icon:(0,r.tZ)(Q.Z,{})},e)}))})}var Rs=(0,mt.iv)(g.l0.mx(8));function Gs(e){var t=e.ahead,n=e.behind;if(!t&&!n)return(0,r.tZ)(Z.xv,{color:"dimmest",multiline:!1,children:"Nothing to pull or push"});var i=null,o=null;if(n){var a=(0,Mt.Z)("commit",n);i="".concat(n," ").concat(a," to pull")}if(t){var l=(0,Mt.Z)("commit",t);o="".concat(t," ").concat(l," to push")}return(0,r.BX)(Z.xv,{color:"dimmer",variant:"small",multiline:!1,children:[i?(0,r.tZ)("span",{children:i}):null,i&&o?(0,r.tZ)("span",{css:Rs,children:"\u2022"}):null,o?(0,r.tZ)("span",{children:o}):null]})}var Is=(0,b.X)({container:[g.l0.flex.grow(1)],branch:[g.l0.mr(4),g.l0.color.foregroundDefault,g.l0.fontWeight.medium,{"&:hover":{textDecoration:"underline"}}],divider:[g.l0.color.foregroundDimmest],text:[g.l0.ml(4),g.l0.color.foregroundDimmest]});function _s(e){var t=e.upstream,n=e.remotes,i=(0,a.useMemo)((function(){return function(e,t){var n=null,r=null;if((0,za.Z)(e,Map)){var i=(0,ja.Tg)(t),o=i[0];if(n=i[1],!o||!n)return null;var a=e.get(o);if(!a)return null;r=Ka(a)}else n=t,r=Ka(e);return r&&$a(r)?"".concat(r,"/tree/").concat(n):null}(n,t)}),[t,n]);return(0,r.BX)(Z.xv,{css:Is.container,variant:"small",multiline:!1,children:[i?(0,r.tZ)("a",{css:Is.branch,href:i,target:"_blank",children:t}):(0,r.tZ)("span",{css:Is.branch,children:t}),(0,r.tZ)("span",{css:Is.divider,children:"\u2022"}),(0,r.tZ)("span",{css:Is.text,children:"upstream"})]})}var Ds=(0,b.X)({container:[g.l0.borderRadius(8)],loading:[g.l0.height(64),le.p.backgroundPulse(),g.l0.borderRadius(8)],header:[g.l0.py(4),g.l0.px(8),g.l0.rowWithGap(8),g.l0.align.center,g.l0.flex.shrink(1),g.l0.border({color:g.TV.outlineDimmer,direction:"bottom"})],fetch:{border:"none"},body:[g.l0.px(8),g.l0.pt(8),g.l0.pb(12),g.l0.colWithGap(8)],buttons:[g.l0.rowWithGap(8),g.l0.flex.grow(1)],sync:[g.l0.flex.grow(1)],pullPush:[g.l0.flex.row],pull:[g.l0.pr(12),g.l0.borderRadius(8,0,0,8),g.l0.border({color:g.TV.outlineDefault,direction:"right"})],push:[g.l0.borderRadius(0,8,8,0)]});function Bs(e){return Ps.apply(this,arguments)}function Ps(){return(Ps=(0,ot.Z)((function(e){var t,n;return(0,lt.__generator)(this,(function(r){switch(r.label){case 0:return t=null,[4,Promise.race([e,new Promise((function(e){return t=setTimeout((function(){Gt.c_.withScope((function(e){e.setTag("gitPane",!0),Gt.c_.captureException(new Error("Remote update operation timed out"))})),e({error:Va.aq.TIMEOUT})}),9e4)}))])];case 1:return n=r.sent(),t&&clearTimeout(t),[2,n]}}))}))).apply(this,arguments)}function As(e){var t=e.remotes,n=e.gotoPendingState,i=(0,a.useState)(!1),o=i[0],l=i[1],c=(0,a.useState)(!1),u=c[0],s=c[1],f=(0,a.useState)(!1),p=f[0],h=f[1],v=(0,a.useState)(!1),m=v[0],g=v[1],Z=(0,d.Z)().git,b=(0,Wa.Z)(function(){var e=(0,ot.Z)((function(e){var t,n,r,i,o,a,l,c,u,s,d,f,p,h,v,m,g,y;return(0,lt.__generator)(this,(function(Z){switch(Z.label){case 0:return i={upstream:null,hasUnpulledCommits:!1,hasUnpushedCommits:!1,hasRemoteMergeConflict:!1,pullMode:Su.T.FF_ONLY,canPull:!1,canPush:!1,workTreeDirty:!1,needGitHubConnection:!1,ahead:0,behind:0,lastFetched:null},[4,e.getRepositoryState()];case 1:return(o=Z.sent()).error?[2,o]:(a=o.state,o.type!==Oa.y5.NORMAL?[2,{error:Va.aq.INVALID_STATE}]:(a!==Oa.yG.DIRTY_WORKTREE&&a!==Oa.yG.DIRTY_INDEX||(i.workTreeDirty=!0),[4,e.status()]));case 2:return(l=Z.sent()).error?[2,l]:(c=l.branch,u=null===(t=l.upstream)||void 0===t?void 0:t.branch,d=null!==(s=null===(n=l.upstream)||void 0===n?void 0:n.ahead)&&void 0!==s?s:0,p=null!==(f=null===(r=l.upstream)||void 0===r?void 0:r.behind)&&void 0!==f?f:0,c?(i.ahead=d,i.behind=p,u?(i.upstream=u,i.hasUnpulledCommits=p>0,i.hasUnpushedCommits=d>0,[4,e.lastFetched()]):[3,7]):[2,{error:Va.aq.HEAD_DETACHED}]);case 3:return(h=Z.sent()).error?[2,h]:(i.lastFetched=h.lastFetched,[4,e.canMergeBranches(c,u)]);case 4:return(v=Z.sent()).error?[2,v]:(v.canMerge||(i.hasRemoteMergeConflict=!0),e.hasProfile(Va.rG.GITHUB)?[3,6]:(m=(0,Cu.CH)(u))?[4,e.getRemotes()]:[2,{error:Va.aq.INVALID_REFERENCE}]);case 5:if((g=Z.sent()).error)return[2,g];if(!(y=g.remotes.get(m)))return[2,{error:Va.aq.INVALID_REFERENCE}];$a(y)&&(i.needGitHubConnection=!0),Z.label=6;case 6:!i.hasUnpulledCommits||i.workTreeDirty||i.needGitHubConnection||(i.canPull=!0),!i.hasUnpushedCommits||i.hasUnpulledCommits||i.needGitHubConnection||(i.canPush=!0),d>0&&(i.pullMode=i.hasRemoteMergeConflict?Su.T.MERGE:Su.T.REBASE),Z.label=7;case 7:return[2,(0,at.Z)((0,N.Z)({},i),{error:null})]}}))}));return function(t){return e.apply(this,arguments)}}()),w=bl();if((0,a.useEffect)((function(){(null===b||void 0===b?void 0:b.error)&&w(b.error)}),[null===b||void 0===b?void 0:b.error,w]),!b)return(0,r.tZ)($.Tg,{css:Ds.loading,elevated:!0});if(b.error||!b.upstream)return null;var x=b.upstream,k=b.hasUnpulledCommits,C=b.hasUnpushedCommits,S=b.hasRemoteMergeConflict,T=b.pullMode,E=b.canPull,R=b.canPush,G=b.workTreeDirty,I=b.needGitHubConnection,_=b.ahead,D=b.behind,B=b.lastFetched;if(I)return(0,r.BX)($.Tg,{css:Ds.container,elevated:!0,children:[(0,r.BX)(y.G,{css:Ds.header,children:[(0,r.tZ)(_s,{upstream:x,remotes:t}),(0,r.tZ)(je.zx,{css:Ds.fetch,text:"Fetch",iconLeft:(0,r.tZ)(ho.Z,{}),disabled:!0,outlined:!0,small:!0})]}),(0,r.tZ)(y.G,{css:Ds.body,children:(0,r.tZ)(ks,{})})]});var P=o||u||p||m,A=!x||I||P,L=!E||P,U=!R||P,X=!E&&!R||S||P;function M(){return(M=(0,ot.Z)((function(){var e;return(0,lt.__generator)(this,(function(t){switch(t.label){case 0:return A?[2]:(l(!0),[4,Bs(Z.fetch())]);case 1:return e=t.sent(),Z.forceRefresh(),l(!1),e.error?w(e.error):rl("remote-fetched"),[2]}}))}))).apply(this,arguments)}function O(){return(O=(0,ot.Z)((function(){var e;return(0,lt.__generator)(this,(function(t){switch(t.label){case 0:return L?[2]:(s(!0),[4,Bs(Z.pull({mode:T,allowConflicts:!0}))]);case 1:return e=t.sent(),s(!1),e.error?w(e.error):(e.hasConflicts&&n(),Z.forceRefresh(),rl("upstream-pulled")),[2]}}))}))).apply(this,arguments)}function F(){return(F=(0,ot.Z)((function(){var e;return(0,lt.__generator)(this,(function(t){switch(t.label){case 0:return U?[2]:(h(!0),[4,Bs(Z.push())]);case 1:return e=t.sent(),Z.forceRefresh(),h(!1),e.error?w(e.error):rl("upstream-pushed"),[2]}}))}))).apply(this,arguments)}function W(){return(W=(0,ot.Z)((function(){var e,t;return(0,lt.__generator)(this,(function(n){switch(n.label){case 0:return X?[2]:(g(!0),E?[4,Bs(Z.pull({mode:T}))]:[3,2]);case 1:if((e=n.sent()).error)return w(e.error),g(!1),[2];rl("upstream-pulled"),n.label=2;case 2:return R?[4,Z.push()]:[3,4];case 3:if((t=n.sent()).error)return w(t.error),g(!1),[2];rl("upstream-pushed"),n.label=4;case 4:return Z.forceRefresh(),g(!1),[2]}}))}))).apply(this,arguments)}return(0,r.BX)($.Tg,{css:Ds.container,elevated:!0,children:[(0,r.BX)(y.G,{css:Ds.header,children:[(0,r.tZ)(_s,{upstream:x,remotes:t}),(0,r.tZ)(Ts,{date:B}),(0,r.tZ)(je.zx,{css:Ds.fetch,text:"Fetch",iconLeft:o?(0,r.tZ)(ze.Z,{}):(0,r.tZ)(ho.Z,{}),onClick:function(){return M.apply(this,arguments)},loading:o,disabled:A,outlined:!0,small:!0})]}),(0,r.BX)(y.G,{css:Ds.body,children:[(0,r.tZ)(Es,{hasRemoteMergeConflict:S,hasUnpulledCommits:k,hasUnpushedCommits:C,workTreeDirty:G}),(0,r.tZ)(Gs,{ahead:_,behind:D}),(0,r.BX)(y.G,{css:Ds.buttons,children:[(0,r.tZ)(je.zx,{css:Ds.sync,text:"Synchronize",iconLeft:m?(0,r.tZ)(ze.Z,{}):(0,r.tZ)(hu.Z,{rotate:90}),onClick:function(){return W.apply(this,arguments)},loading:m,disabled:X,small:!0}),(0,r.BX)(y.G,{css:Ds.pullPush,children:[(0,r.tZ)(je.zx,{css:Ds.pull,text:"Pull",iconLeft:u?(0,r.tZ)(ze.Z,{}):(0,r.tZ)($e.Z,{}),onClick:function(){return O.apply(this,arguments)},loading:u,disabled:L,small:!0}),(0,r.tZ)(je.zx,{css:Ds.push,text:"Push",iconLeft:p?(0,r.tZ)(ze.Z,{}):(0,r.tZ)(Eu.Z,{}),onClick:function(){return F.apply(this,arguments)},loading:p,disabled:U,small:!0})]})]})]})]})}var Ls=n(9396);function Us(e){var t=e.branch,n=(0,a.useState)(!1),i=n[0],o=n[1],l=bl(),c=(0,d.Z)().git,u=(0,Wa.Z)(function(){var e=(0,ot.Z)((function(e){var t,n,r;return(0,lt.__generator)(this,(function(i){switch(i.label){case 0:return[4,e.getRemotes()];case 1:return(t=i.sent()).error?(l(t.error),[2,t]):(n=t.remotes,r="",(null===n||void 0===n?void 0:n.size)&&(r=n.has("origin")?"origin":n.keys().next().value),[2,{remote:r,error:null}])}}))}));return function(t){return e.apply(this,arguments)}}(),[l],{keepStaleResult:!1});if(null===u||void 0===u?void 0:u.error)return null;var s,f=u?u.remote:null,p=null===f,h=t.type!==Fa.HO.LOCAL||!f;function v(){return(v=(0,ot.Z)((function(){var e;return(0,lt.__generator)(this,(function(t){switch(t.label){case 0:return!f||i?[2]:(o(!0),[4,c.push({publish:{remote:f}})]);case 1:return(e=t.sent()).error?(o(!1),l(e.error)):(c.forceRefresh(),rl("branch-published-to-remote")),[2]}}))}))).apply(this,arguments)}return s=i?"Publishing...":t.type!==Fa.HO.LOCAL?"Branch has already been published":p?"Checking if branch can be published...":f?"Publish branch as '".concat(f,"/").concat(t.name,"'"):"No remotes to publish to",(0,r.tZ)(je.zx,{text:s,iconLeft:p||i?(0,r.tZ)(ze.Z,{}):(0,r.tZ)(Ls.Z,{}),onClick:function(){return v.apply(this,arguments)},loading:p||i,disabled:h})}var Xs=(0,mt.iv)({border:"none"},g.l0.height("auto"),g.l0.py(4),g.l0.px(8));function Ms(e){var t=e.branch,n=e.remotes,i=(0,a.useMemo)((function(){if(t.type===Fa.HO.LOCAL)return[null,null,null];var e=n.get(t.remote);if(!e)return[null,null,null];var r=Ka(e),i=function(e){var t="string"===typeof e?e:e.fetch;if($a(t)){var n=(t=Ya(t)).split("/");if(n.length<2)return null;var r=n[n.length-2],i=n[n.length-1];return"".concat(r,"/").concat(i)}return null}(e);return[r,i,$a(r)]}),[t,n]),o=i[0],l=i[1],c=i[2];return o&&l?(0,r.tZ)($o.Z,{css:Xs,text:l,href:o,target:"_blank",iconLeft:c?(0,r.tZ)(tl.Z,{}):void 0,iconRight:(0,r.tZ)(Jo.Z,{}),outlined:!0,small:!0}):null}var Ns=(0,b.X)({view:[g.l0.pt(4),g.l0.pb(8),g.l0.px(4),g.l0.colWithGap(8),g.l0.flex.grow(1)],sectionContainer:[g.l0.colWithGap(8)],section:[g.l0.pt(8),g.l0.pb(16),g.l0.px(8),g.l0.colWithGap(8),g.l0.border({color:g.TV.outlineDimmest,direction:"bottom"})],remoteUpdatesHeader:[g.l0.rowWithGap(8),g.l0.align.center,g.l0.justify.spaceBetween],reviewChangesHeader:[g.l0.rowWithGap(8),g.l0.align.center],changesPill:[g.l0.fontWeight.bold],headerText:[g.l0.fontWeight.medium]});function Os(e){var t,n,i=e.status,l=e.remotes,c=e.branch,u=e.onStagedFileClick,s=e.gotoPendingState,d=e.current,f=void 0!==d&&d,p=function(e,t,n){var r=bl(),i=(0,Wa.Z)(function(){var r=(0,ot.Z)((function(r){var i,a,l,c,u,s,d,f,p;return(0,lt.__generator)(this,(function(h){switch(h.label){case 0:return e?!e.tracking||0===t&&0===n?(i=(0,Cu.bF)(e,!0),[4,r.log({max:100,revRange:i})]):[3,2]:[2,{error:null}];case 1:return(a=h.sent()).error?[2,a]:[2,{log:a.commits,error:null}];case 2:return l=(0,Cu.bF)(e),[4,Promise.all([r.log({max:100,revRange:e.name}),r.log({max:100,revRange:"".concat(e.name,"..").concat(l)}),r.log({max:100,revRange:"".concat(l,"..").concat(e.name)})])];case 3:return c=h.sent(),u=(0,o.Z)(c,3),s=u[0],d=u[1],f=u[2],(p=s.error||d.error||f.error)?[2,{error:p}]:[2,{log:s.commits,onlyRemote:d.commits,onlyLocal:f.commits,error:null}]}}))}));return function(e){return r.apply(this,arguments)}}(),[e,t,n]);return(0,a.useMemo)((function(){if(!i)return null;if(i.error)return r(i.error),{error:i.error};var e=i.log,t=i.onlyRemote,n=i.onlyLocal;if(!t&&!n)return{log:e,error:null};if(e){var o=new Set;if(t){var a=!0,l=!1,c=void 0;try{for(var u,s=t[Symbol.iterator]();!(a=(u=s.next()).done);a=!0){var d=u.value;o.add(d.hash)}}catch(y){l=!0,c=y}finally{try{a||null==s.return||s.return()}finally{if(l)throw c}}}if(n){var f=!0,p=!1,h=void 0;try{for(var v,m=n[Symbol.iterator]();!(f=(v=m.next()).done);f=!0){var g=v.value;o.add(g.hash)}}catch(y){p=!0,h=y}finally{try{f||null==m.return||m.return()}finally{if(p)throw h}}}e=e.filter((function(e){return!o.has(e.hash)}))}return{log:e,onlyRemote:t,onlyLocal:n,error:null}}),[r,i])}(c,f?null===i||void 0===i||null===(t=i.upstream)||void 0===t?void 0:t.behind:void 0,f?null===i||void 0===i||null===(n=i.upstream)||void 0===n?void 0:n.ahead:void 0),h=!!l&&l.size>0,v=(null===c||void 0===c?void 0:c.type)===Fa.HO.LOCAL,m=(0,a.useMemo)((function(){if(!p||p.error)return[];var e,t,n,o=[],a=p.log,l=void 0===a?[]:a,c=p.onlyRemote,u=void 0===c?[]:c,d=p.onlyLocal,h=void 0===d?[]:d,v=l.length>0,m=u.length>0,g=h.length>0;m&&(o.push({type:"boundary",text:"Not pulled from remote"}),f&&i&&o.push({type:"button",key:"pull-button",button:(0,r.tZ)(Tu,{status:i,gotoPendingState:s})}),(e=o).push.apply(e,(0,Xt.Z)(Fs(u))));g&&(o.push({type:"boundary",text:"Not pushed to remote"}),f&&i&&o.push({type:"button",key:"push-button",button:(0,r.tZ)(Ru,{status:i})}),(t=o).push.apply(t,(0,Xt.Z)(Fs(h))));v&&((m||g)&&o.push({type:"boundary",text:"Up to date with remote"}),(n=o).push.apply(n,(0,Xt.Z)(Fs(l))));return o}),[p,i,f,s]);return c?(0,r.BX)(y.G,{css:Ns.view,children:[(0,r.BX)(y.G,{css:Ns.sectionContainer,children:[f?null:(0,r.tZ)(y.G,{css:Ns.section,children:(0,r.tZ)(Gu,{branch:c})}),v&&h?(0,r.tZ)(y.G,{css:Ns.section,children:(0,r.tZ)(Us,{branch:c})}):null,f&&!v&&l&&h?(0,r.BX)(y.G,{css:Ns.section,children:[(0,r.BX)(y.G,{css:Ns.remoteUpdatesHeader,children:[(0,r.tZ)(Z.xv,{css:Ns.headerText,multiline:!1,children:"Remote Updates"}),(0,r.tZ)(Ms,{branch:c,remotes:l})]}),(0,r.tZ)(As,{remotes:l,gotoPendingState:s})]}):null,f&&i?(0,r.BX)(y.G,{css:Ns.section,children:[(0,r.BX)(y.G,{css:Ns.reviewChangesHeader,children:[(0,r.tZ)(Y.D,{css:Ns.changesPill,colorway:i.changes.length<=0?"grey":"primary",text:i.changes.length.toString()}),(0,r.tZ)(Z.xv,{css:Ns.headerText,multiline:!1,children:"Review Changes"})]}),(0,r.tZ)(ws,{status:i,onStagedFileClick:u})]}):null]}),p?(0,r.tZ)(Zu,{items:m}):(0,r.tZ)(ku,{})]}):(0,r.tZ)("div",{children:"No branch"})}function Fs(e){return e.map((function(e){return{type:"commit",commit:e}}))}function Ws(){return(0,r.BX)(y.G,{children:[(0,r.tZ)(Z.xv,{multiline:!1,children:"Unsupported state: you are in the middle of a cherry-pick."}),(0,r.tZ)(Z.xv,{multiline:!1,children:"Please finish the cherry-pick manually."})]})}var Hs=(0,mt.iv)(Vc.gU.nofill,g.l0.py(12),g.l0.px(8),g.l0.colWithGap(2),g.l0.justify.center,g.l0.borderRadius(8),g.l0.flex.shrink(1));function Vs(e){var t=e.branch,n=e.current,i=void 0!==n&&n,o=e.onPreview;return(0,r.BX)(y.G,{css:Hs,tabIndex:0,role:"button","aria-label":"Preview branch ".concat((0,Cu.bF)(t,!0)),onClick:o,onKeyDown:function(e){"Enter"!==e.key&&" "!==e.key||null===o||void 0===o||o()},children:[(0,r.tZ)(Z.xv,{multiline:!1,children:(0,r.tZ)(Hl,{name:t.name,remote:t.type===Fa.HO.REMOTE?t.remote:null,current:i,onClick:o,icon:!0})}),(0,r.tZ)(js,{branch:t})]})}var zs=(0,mt.iv)(g.l0.rowWithGap(8),g.l0.align.baseline,g.l0.flex.shrink(1));function js(e){var t=e.branch;return(0,r.BX)(y.G,{css:zs,children:[(0,r.tZ)(uu,{name:t.commit.author.name,email:t.commit.author.email,color:"dimmest",allowPlaceholderAvatar:!0}),(0,r.tZ)(eu.E,{date:t.commit.author.date,textColor:"dimmest",textVariant:"small"})]})}var qs=(0,mt.iv)({verticalAlign:"middle"},g.l0.justify.spaceBetween),$s=(0,mt.iv)(g.l0.display.flex),Ys=(0,mt.iv)(g.l0.p(4),g.l0.flex.row,g.l0.align.center,g.l0.justify.spaceBetween),Ks=(0,mt.iv)({verticalAlign:"middle"},g.l0.justify.spaceBetween,g.l0.borderRadius(8,8,0,0)),Qs=(0,mt.iv)(g.l0.borderRadius(8)),Js=(0,mt.iv)(g.l0.borderRadius(0,0,8,8));function ed(e){var t=e.name,n=e.branches,i=e.current,o=void 0===i?null:i,l=e.switchMode,c=e.foldable,u=void 0!==c&&c,s=e.folded,d=void 0!==s&&s,f=(0,a.useState)(!!u&&d),p=f[0],h=f[1],v=(0,a.useMemo)((function(){return n.map((function(e){return(0,r.tZ)(Vs,{branch:e,current:(0,Fa.p3)(e,o),onPreview:function(){return l({mode:Yl.BRANCH,branch:e})}},(0,Cu.Qj)(e))}))}),[n,o,l]);return p?(0,r.tZ)(je.zx,{css:qs,text:t,iconRight:(0,r.tZ)(Me.Z,{}),onClick:function(){return h(!1)},big:!0}):u?(0,r.BX)(y.G,{css:$s,children:[(0,r.tZ)(je.zx,{css:Ks,text:t,iconRight:(0,r.tZ)(Ne.Z,{}),onClick:function(){return h(!0)},big:!0}),(0,r.tZ)($.Tg,{css:Js,elevated:!0,children:v})]}):(0,r.BX)(y.G,{css:$s,children:[(0,r.tZ)(y.G,{css:Ys,children:(0,r.tZ)(Z.xv,{variant:"subheadDefault",multiline:!1,children:t})}),(0,r.tZ)($.Tg,{css:Qs,elevated:!0,children:v})]})}var td=(0,mt.iv)(g.l0.p(8),g.l0.colWithGap(8),g.l0.borderRadius(8)),nd=(0,mt.iv)(g.l0.rowWithGap(4)),rd=(0,mt.iv)(g.l0.flex.grow(1));function id(){var e=function(){i(!0),c("")},t=(0,a.useState)(!0),n=t[0],i=t[1],o=(0,a.useState)(""),l=o[0],c=o[1],u=(0,a.useState)(!1),s=u[0],f=u[1],p=bl(),h=(0,d.Z)().git;function v(){return m.apply(this,arguments)}function m(){return(m=(0,ot.Z)((function(){var e;return(0,lt.__generator)(this,(function(t){switch(t.label){case 0:return n||!l||s?[2]:(f(!0),[4,h.createBranch({name:l,checkout:!0})]);case 1:return(e=t.sent()).error?(p(e.error),f(!1)):(h.forceRefresh(),f(!1),c(""),i(!0),rl("branch-created")),[2]}}))}))).apply(this,arguments)}if(n)return(0,r.tZ)(je.zx,{text:"Create Branch",iconLeft:(0,r.tZ)(Uo.Z,{}),onClick:function(){return i(!1)}});var g=!l||!(0,Cu.Dc)(l);return(0,r.BX)($.Tg,{css:td,elevated:!0,children:[(0,r.tZ)(ad,{value:l,onChange:c,onSubmit:v,onCancel:e,disabled:s}),(0,r.BX)(y.G,{css:nd,children:[(0,r.tZ)(je.zx,{css:rd,text:"Cancel",onClick:e,disabled:s}),(0,r.tZ)(je.zx,{css:rd,text:"Create Branch",colorway:"primary",iconLeft:(0,r.tZ)(Uo.Z,{}),onClick:v,loading:s,disabled:g})]})]})}var od=(0,mt.iv)({opacity:.75});function ad(e){var t=e.value,n=e.disabled,i=e.onChange,o=e.onSubmit,a=e.onCancel,l=function(e){(0,Cu.dC)(e)&&(null===i||void 0===i||i(e))};return(0,r.tZ)(Bn.II,{value:t,css:n?od:void 0,disabled:n,placeholder:"Enter a name for your new branch",onChange:function(e){return l(e.currentTarget.value)},onKeyDown:function(e){return function(e,n){switch(e){case"Enter":null===o||void 0===o||o(),n();break;case"Escape":null===a||void 0===a||a(),n();break;case" ":if(""===t){n();break}l(t+"-"),n()}}(e.key,(function(){return e.preventDefault()}))},onBlur:function(){""===t&&(null===a||void 0===a||a())},autoFocus:!0})}function ld(e){var t=e.currentBranch,n=e.switchMode,i=bl(),o=(0,Wa.Z)(function(){var e=(0,ot.Z)((function(e){var t,n,r,o,a,l,c,u,s,d,f,p,h,v,m,g,y,Z,b,w;return(0,lt.__generator)(this,(function(x){switch(x.label){case 0:return[4,e.listBranches()];case 1:return(t=x.sent()).error?(i(t.error),[2,t]):[4,e.findDefaultBranches()];case 2:if((n=x.sent()).error)return i(n.error),[2,n];r=t.branches,o=new Set,a=!0,l=!1,c=void 0;try{for(u=function(){var e=d.value,t=r.find((function(t){return(0,Cu.Pi)(t,e)}));t&&o.add(t)},s=n.refs[Symbol.iterator]();!(a=(d=s.next()).done);a=!0)u()}catch(k){l=!0,c=k}finally{try{a||null==s.return||s.return()}finally{if(l)throw c}}f=Date.now()-5184e6,p=[],h=[],v=!0,m=!1,g=void 0;try{for(y=r[Symbol.iterator]();!(v=(Z=y.next()).done);v=!0)b=Z.value,o.has(b)||(b.commit.author.date>f?p.push(b):h.push(b))}catch(k){m=!0,g=k}finally{try{v||null==y.return||y.return()}finally{if(m)throw g}}return w=Array.from(o),[2,{active:p,stale:h,important:w,error:null}]}}))}));return function(t){return e.apply(this,arguments)}}(),[i]);if(!o)return(0,r.tZ)(ku,{});if(o.error)return(0,r.tZ)("div",{children:o.error});var a=o.active,l=o.stale,c=o.important;return(0,r.tZ)(y.G,{css:[g.l0.colWithGap(8)],children:(0,r.BX)(y.G,{css:[g.l0.pb(8),g.l0.px(8),g.l0.colWithGap(16)],children:[t?(0,r.BX)(y.G,{css:g.l0.colWithGap(8),children:[(0,r.tZ)(ed,{branches:[t],current:t,name:"Current",switchMode:n}),(0,r.tZ)(id,{})]}):null,0===c.length?null:(0,r.tZ)(ed,{branches:c,current:t,name:"Important",switchMode:n}),0===a.length?null:(0,r.tZ)(ed,{branches:a,current:t,name:"Active",switchMode:n,foldable:!0}),0===l.length?null:(0,r.tZ)(ed,{branches:l,current:t,name:"Stale",switchMode:n,foldable:!0,folded:!0})]})})}function cd(){return(0,r.BX)(y.G,{children:[(0,r.tZ)(Z.xv,{multiline:!1,children:"Unsupported state: your HEAD is currently detached."}),(0,r.tZ)(Z.xv,{multiline:!1,children:"Please checkout a branch."})]})}var ud=n(34938),sd=n(62841),dd=(0,b.X)({container:[g.l0.colWithGap(4)],file:[g.l0.rowWithGap(8),g.l0.align.center],fileLeft:[g.l0.rowWithGap(8),g.l0.flex.grow(1),g.l0.align.center],filePrefix:[g.l0.color.foregroundDimmest]});function fd(e){var t=e.files,n=e.uniquePathMap,i=e.onFileClick,a=[];if((0,za.Z)(t,Map)){var l=!0,c=!1,u=void 0;try{for(var s,d=t[Symbol.iterator]();!(l=(s=d.next()).done);l=!0){var f=(0,o.Z)(s.value,2),p=f[0],h=f[1],v=n.get(p);a.push({path:p,prefix:v,resolved:h})}}catch(T){c=!0,u=T}finally{try{l||null==d.return||d.return()}finally{if(c)throw u}}}else{var m=!0,b=!1,w=void 0;try{for(var x,k=t[Symbol.iterator]();!(m=(x=k.next()).done);m=!0){var C=x.value,S=n.get(C);a.push({path:C,prefix:S,resolved:!0})}}catch(T){b=!0,w=T}finally{try{m||null==k.return||k.return()}finally{if(b)throw w}}}return(0,r.tZ)(y.G,{css:dd.container,children:a.map((function(e){var t=e.path,n=e.prefix,o=e.resolved;return(0,r.BX)(y.G,{css:dd.file,children:[(0,r.BX)(y.G,{css:dd.fileLeft,children:[(0,r.tZ)(Ua.Z,{path:t}),(0,r.tZ)(Z.xv,{multiline:!1,children:(0,r.tZ)(jl,{path:t,prefix:n,onClick:function(){return i(t)}})})]}),o?(0,r.tZ)(J.Z,{color:g.TV.greenStronger}):(0,r.tZ)(Q.Z,{color:g.TV.orangeStronger})]},t)}))})}function pd(e){var t=e.hasConflicts?(0,r.BX)(r.HY,{children:[(0,r.tZ)("span",{css:g.l0.fontWeight.medium,children:"Resolve all conflicts to complete merge."}),(0,r.tZ)("br",{}),(0,r.tZ)("span",{children:"You can't do anything else until the merge has been completed or aborted."})]}):(0,r.BX)(r.HY,{children:[(0,r.tZ)("span",{css:g.l0.fontWeight.medium,children:"You are in the middle of a merge."}),(0,r.tZ)("br",{}),(0,r.tZ)("span",{children:"You can't do anything else until the merge has been completed or aborted. You have no conflicts to resolve, so the merge can be completed without any further action."})]});return(0,r.tZ)(Lr.E,{colorway:"warning",icon:(0,r.tZ)(Q.Z,{}),text:t})}var hd=n(6454),vd=(0,b.X)({container:[g.l0.rowWithGap(4),g.l0.align.center,g.l0.justify.spaceBetween],left:[{flexBasis:0,flexGrow:1},g.l0.colWithGap(8)],right:{flexBasis:0,flexGrow:1},branch:[g.l0.p(8),g.l0.rowWithGap(4),g.l0.flex.grow(1),g.l0.center,g.l0.borderRadius(8)]});function md(e){var t,n=e.branch,i=e.refs,a=e.refsAreBranches,l=e.isUpstreamPull;if(!i.length)return null;if(l){var c=(0,o.Z)((0,ja.Tg)(i[0]),2),u=c[0],s=c[1];u&&s&&(t=(0,r.tZ)($.Tg,{css:vd.branch,elevated:!0,children:(0,r.tZ)(Hl,{remote:u,name:s,icon:!0,heading:!0})}))}return t||(t=i.map((function(e){return(0,r.tZ)($.Tg,{css:vd.branch,elevated:!0,children:(0,r.tZ)(Hl,{name:e,icon:!!a||(0,r.tZ)(hd.Z,{size:16}),heading:!0})},e)}))),(0,r.BX)(y.G,{css:vd.container,children:[(0,r.tZ)(y.G,{css:vd.left,children:t}),(0,r.tZ)(An.Z,{size:24,color:g.TV.foregroundDimmest}),(0,r.tZ)(y.G,{css:vd.right,children:(0,r.tZ)($.Tg,{css:vd.branch,elevated:!0,children:(0,r.tZ)(Hl,{name:n,icon:!0,current:!0,heading:!0})})})]})}var gd=(0,b.X)({container:[g.l0.colWithGap(12),g.l0.pt(16),g.l0.pb(8),g.l0.px(8)],fakePaneHeader:[g.l0.p(8),g.l0.rowWithGap(8),g.l0.backgroundColor.backgroundDefault,g.l0.align.center,{borderBottom:"1px solid ".concat(g.TV.outlineDimmer)}],conflictResolution:[g.l0.colWithGap(16)],listContainer:[g.l0.p(8),g.l0.colWithGap(8),g.l0.borderRadius(8)],list:[g.l0.pb(8),g.l0.colWithGap(8)],listDisabled:[{opacity:.5},g.l0.pb(8),g.l0.colWithGap(8)],listHeader:[g.l0.pb(4),g.l0.flex.grow(1),g.l0.border({color:g.TV.outlineDimmer,direction:"bottom"})],listFiles:[g.l0.px(8)],includeOtherFiles:[{cursor:"pointer",maxWidth:"max-content",userSelect:"none"},g.l0.rowWithGap(8)],buttons:[g.l0.colWithGap(8)]});function yd(e){var t=e.onFileClick,n=e.gotoPendingState,i=(0,a.useState)(!0),l=i[0],c=i[1],u=(0,a.useState)(!1),s=u[0],f=u[1],p=(0,a.useState)(!1),h=p[0],v=p[1],m=s||h,b=bl(),w=(0,d.Z)().git,x=(0,Ki.D)(),k=function(){var e=(0,Wa.Z)(function(){var e=(0,ot.Z)((function(e){var t,n,r,i,a,l,c,u,s,d,f,p,h,v,m,g,y,Z,b,w;return(0,lt.__generator)(this,(function(x){switch(x.label){case 0:return[4,e.status()];case 1:return(t=x.sent()).error?[2,t]:(n=t.branch)?[4,e.getConflictingFiles()]:[2,{error:Va.aq.HEAD_DETACHED}];case 2:return(r=x.sent()).error?[2,r]:(i=r.files,[4,e.getMergingRefs()]);case 3:if((a=x.sent()).error)return[2,a];l=a.commits,c=a.branches,u=c.length>0,s=u?c:l,d=t.changes.filter((function(e){return!e.unmerged})).map((function(e){return e.path})),f=!0,p=!0,h=!1,v=void 0;try{for(m=i[Symbol.iterator]();!(p=(g=m.next()).done);p=!0)if(!(0,o.Z)(g.value,2)[1]){f=!1;break}}catch(k){h=!0,v=k}finally{try{p||null==m.return||m.return()}finally{if(h)throw v}}return y=Du(t.changes.map((function(e){return e.path}))),Z=i.size>0,b=d.length>0,w=null!==t.upstream&&1===c.length&&c[0]===t.upstream.branch,[2,{refs:s,branch:n,conflictingFiles:i,otherChangedFiles:d,refsAreBranches:u,allIsResolved:f,uniquePathMap:y,hasConflicts:Z,hasOtherChanges:b,isUpstreamPull:w,error:null}]}}))}));return function(t){return e.apply(this,arguments)}}());return e}();if((0,a.useEffect)((function(){(null===k||void 0===k?void 0:k.error)&&b(k.error)}),[null===k||void 0===k?void 0:k.error,b]),!k)return(0,r.tZ)(ku,{});if(k.error)return null;var C=k.refs,S=k.branch,T=k.conflictingFiles,E=k.otherChangedFiles,R=k.refsAreBranches,G=k.allIsResolved,I=k.uniquePathMap,_=k.hasConflicts,D=k.hasOtherChanges,B=k.isUpstreamPull;function P(){return P=(0,ot.Z)((function(){var e,t,r,i,o,a,c,u,s,d,p;return(0,lt.__generator)(this,(function(h){switch(h.label){case 0:if(!G||m)return[2];f(!0),e=[],t=!0,r=!1,i=void 0;try{for(o=T.keys()[Symbol.iterator]();!(t=(a=o.next()).done);t=!0)c=a.value,e.push(c)}catch(v){r=!0,i=v}finally{try{t||null==o.return||o.return()}finally{if(r)throw i}}return l&&(u=e).push.apply(u,(0,Xt.Z)(E)),[4,w.stageFiles({all:!1})];case 1:return(s=h.sent()).error?(b(s.error),f(!1),[2]):[4,w.stageFiles({add:e})];case 2:return(d=h.sent()).error?(b(d.error),f(!1),[2]):[4,w.mergeContinue()];case 3:return(p=h.sent()).error?[4,w.stageFiles({all:!1})]:[3,5];case 4:return h.sent(),b(p.error),f(!1),[3,6];case 5:n(),w.forceRefresh(),h.label=6;case 6:return[2]}}))})),P.apply(this,arguments)}function A(){return(A=(0,ot.Z)((function(){var e;return(0,lt.__generator)(this,(function(t){switch(t.label){case 0:return m?[2]:(v(!0),[4,w.mergeAbort()]);case 1:return(e=t.sent()).error?(b(e.error),v(!1)):(n(),w.forceRefresh()),[2]}}))}))).apply(this,arguments)}var L=B?"Complete in-progress pull":"Complete in-progress merge";return _&&(L=B?"Resolve pull conflicts":"Resolve merge conflicts"),(0,r.BX)(y.G,{children:[(0,r.BX)(y.G,{css:gd.fakePaneHeader,children:[(0,r.tZ)(sd.Z,{}),(0,r.tZ)(Z.xv,{variant:"subheadDefault",multiline:!1,children:L})]}),(0,r.BX)(y.G,{css:gd.container,children:[(0,r.tZ)(md,{branch:S,refs:C,refsAreBranches:R,isUpstreamPull:B}),(0,r.tZ)(pd,{hasConflicts:_}),(0,r.BX)($.Tg,{css:gd.listContainer,elevated:!0,children:[(0,r.BX)(y.G,{css:gd.list,children:[(0,r.tZ)(y.G,{css:gd.listHeader,children:(0,r.tZ)(Z.xv,{css:g.l0.fontWeight.medium,multiline:!1,children:"Conflicting Files"})}),(0,r.tZ)(y.G,{css:gd.listFiles,children:_?(0,r.tZ)(fd,{files:T,uniquePathMap:I,onFileClick:t}):(0,r.tZ)(Z.xv,{variant:"small",color:"dimmest",multiline:!1,children:"There are no conflicting files in this merge."})})]}),D?(0,r.BX)(y.G,{css:l?gd.list:gd.listDisabled,children:[(0,r.tZ)(y.G,{css:gd.listHeader,children:(0,r.tZ)(Z.xv,{css:g.l0.fontWeight.medium,multiline:!1,children:"Other Changed Files"})}),(0,r.tZ)(y.G,{css:gd.listFiles,children:(0,r.tZ)(fd,{files:E,uniquePathMap:I,onFileClick:t})})]}):null]}),(0,r.BX)(y.G,{css:gd.includeOtherFiles,tag:"label",children:[(0,r.tZ)(ud.X,{id:x,checked:l,onChange:function(e){return c(e.target.checked)}}),(0,r.tZ)(Z.xv,{multiline:!1,children:"Include other changed files in commit"})]}),(0,r.BX)(y.G,{css:gd.buttons,children:[(0,r.tZ)(je.zx,{text:B?"Complete pull":"Complete merge and commit",colorway:"primary",iconLeft:s?(0,r.tZ)(ze.Z,{}):(0,r.tZ)(sd.Z,{}),disabled:!G||m,loading:s,onClick:function(){return P.apply(this,arguments)}}),(0,r.tZ)(je.zx,{text:B?"Abort pull":"Abort merge",colorway:"negative",iconLeft:h?(0,r.tZ)(ze.Z,{}):(0,r.tZ)(qu.Z,{}),disabled:m,loading:h,onClick:function(){return A.apply(this,arguments)}})]})]})]})}function Zd(){var e=(0,a.useState)(!1),t=e[0],n=e[1],i=bl(),o=(0,d.Z)().git;function l(){return(l=(0,ot.Z)((function(){var e;return(0,lt.__generator)(this,(function(r){switch(r.label){case 0:return t?[2]:(n(!0),[4,o.init()]);case 1:return(e=r.sent()).error?(n(!1),i(e.error)):(o.forceRefresh(),rl("repository-initialized")),[2]}}))}))).apply(this,arguments)}var c=t?"Initializing...":"Initialize Git Repository";return(0,r.tZ)(je.zx,{text:c,iconLeft:t?(0,r.tZ)(ze.Z,{}):(0,r.tZ)(Na.Z,{}),colorway:"primary",loading:t,onClick:function(){return l.apply(this,arguments)}})}var bd=(0,mt.iv)(g.l0.height("100%"),g.l0.p(16),g.l0.colWithGap(16),g.l0.center),wd=(0,mt.iv)(g.l0.colWithGap(16),g.l0.center,g.l0.flex.shrink(1));function xd(){return(0,r.BX)(y.G,{css:bd,children:[(0,r.BX)(y.G,{css:wd,children:[(0,r.tZ)(Qo.Z,{alt:"A potted plant morphing into a branching graph like structure",src:"/public/images/git/git_uninitialized_art.svg",height:300,width:280,objectFit:"contain"}),(0,r.tZ)(Z.xv,{variant:"subheadDefault",multiline:!1,children:"Version control for your Repl."})]}),(0,r.tZ)(Zd,{})]})}function kd(){return(0,r.BX)(y.G,{children:[(0,r.tZ)(Z.xv,{multiline:!1,children:"Unsupported state: you are in the middle of a rebase."}),(0,r.tZ)(Z.xv,{multiline:!1,children:"Please finish the rebase manually."})]})}function Cd(){return(0,r.BX)(y.G,{children:[(0,r.tZ)(Z.xv,{multiline:!1,children:"Unsupported state: you are in the middle of a revert."}),(0,r.tZ)(Z.xv,{multiline:!1,children:"Please finish the revert manually."})]})}var Sd=n(81669),Td=n(48511),Ed=n(9247),Rd=(0,mt.iv)(g.l0.rowWithGap(8),g.l0.align.center);function Gd(e){var t=e.username,n=e.avatar;return(0,r.BX)(y.G,{css:Rd,children:[(0,r.tZ)(Ed.Z,{url:null!==n&&void 0!==n?n:"/images/evalbot/evalbot_24"}),(0,r.tZ)(Z.xv,{variant:"subheadDefault",multiline:!1,children:t})]})}var Id=n(90171),_d=(0,b.X)({list:{"> div:first-child":g.l0.borderRadius(8,8,0,0),"> div:last-child":[g.l0.borderRadius(0,0,8,8),{border:"none"}]},profile:[Vc.gU.filled,g.l0.flex.row,g.l0.justify.spaceBetween,g.l0.p(12),g.l0.borderRadius(0),g.l0.border({color:g.TV.outlineDefault,direction:"bottom"})],information:[g.l0.colWithGap(4),g.l0.flex.shrink(1)],informationRow:[g.l0.rowWithGap(8),g.l0.align.center],email:[g.l0.flex.shrink(1)],connectToGithubContainer:[g.l0.colWithGap(4),g.l0.p(12),g.l0.backgroundColor.backgroundHigher],divider:[g.l0.backgroundColor.outlineDefault],connectToGitHubTitle:[g.l0.rowWithGap(4),g.l0.align.center],notConnectedText:[g.l0.pb(4)],settingsButton:{background:"transparent",border:"none","&:hover":{textDecoration:"underline"}},radio:{pointerEvents:"none"}});function Dd(e){var t=e.profiles,n=e.current,i=e.showConnectToGithub,o=e.onSelectProvider,a=(0,Ae.P5)({controlName:"flag-disable-github-import",logFlagToAnalytics:!1}),l=(0,Id.useRouter)(),c=(0,M.Vg)(l),u=(0,Ki.D)();return(0,r.BX)(Td.E,{name:u,css:_d.list,value:null!==n&&void 0!==n?n:"",children:[t.map((function(e){var t;t=e.provider===Va.rG.GITHUB?"GitHub":"Default Profile";var i=void 0;return e.provider===Va.rG.GITHUB&&(i=c?"/mobile/auth/github/app_permissions":"/auth/github/app_permissions?close=1"),(0,r.tZ)(Bd,{profile:e,providerName:t,current:e.provider===n,onSelectProvider:o,settingsURL:i},e.provider)})),i?(0,r.BX)(y.G,{css:_d.connectToGithubContainer,children:[(0,r.tZ)(y.G,{css:_d.connectToGitHubTitle,children:(0,r.tZ)(Gd,{username:"GitHub Account"})}),(0,r.tZ)(Z.xv,{color:"dimmest",css:_d.notConnectedText,multiline:!1,children:"Your GitHub account is not connected."}),a?null:(0,r.tZ)(il,{})]}):null]})}function Bd(e){var t=e.profile,n=e.current,i=e.providerName,o=e.settingsURL,a=e.onSelectProvider,l=t.provider,c=t.username,u=t.email,s=t.avatar,d=(0,Ki.D)();return(0,r.BX)(y.G,{onClick:function(){return a(l)},css:_d.profile,children:[(0,r.BX)(y.G,{css:_d.information,children:[(0,r.BX)(y.G,{css:_d.informationRow,children:[(0,r.tZ)(Gd,{username:c,avatar:s}),o?(0,r.tZ)($o.Z,{css:_d.settingsButton,text:"".concat(i," Settings"),iconRight:(0,r.tZ)(Jo.Z,{}),href:o,target:"_blank",outlined:!0,small:!0}):(0,r.tZ)(Z.xv,{color:"dimmest",variant:"small",multiline:!1,children:i})]}),(0,r.tZ)(Z.xv,{color:"dimmest",css:_d.email,multiline:!1,children:u})]}),(0,r.tZ)(Td.Y,{css:_d.radio,id:d,checked:n,value:l})]})}var Pd=(0,mt.iv)(g.l0.flex.column);function Ad(){var e=(0,d.Z)().git,t=(0,Wa.Z)(function(){var e=(0,ot.Z)((function(e){var t,n,r,i,o;return(0,lt.__generator)(this,(function(a){return t=e.getCurrentProfile(),n=e.getProfiles(),i=null!==(r=null===t||void 0===t?void 0:t.provider)&&void 0!==r?r:null,o=!e.hasProfile(Va.rG.GITHUB),[2,{profiles:n,current:i,hasGitHub:o,error:null}]}))}));return function(t){return e.apply(this,arguments)}}());if(!t||t.error)return null;var n=t.profiles,i=t.current,o=t.hasGitHub;return(0,r.tZ)(y.G,{css:Pd,children:(0,r.tZ)(Dd,{profiles:n,current:i,showConnectToGithub:o,onSelectProvider:function(t){e.setCurrentProfile(t),t===Va.rG.REPLIT_DEFAULT?rl("profile-changed",{profile:"replit"}):t===Va.rG.GITHUB&&rl("profile-changed",{profile:"github"})}})})}var Ld=n(75920),Ud=n(14654),Xd=n(51631);function Md(){var e=(0,fr.Z)(["\n  query GithubRemoteConfigRepl($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        description\n        isPrivate\n        slug\n        url\n      }\n    }\n  }\n"]);return Md=function(){return e},e}function Nd(){var e=(0,fr.Z)(['\n  query GithubRemoteConfigUser {\n    currentUser {\n      ... on CurrentUser {\n        id\n        gitHubInfo {\n          accessToken\n        }\n        repositories(count: 1, after: "0") {\n          ... on RepositoryConnection {\n            items {\n              id\n            }\n          }\n        }\n      }\n    }\n  }\n']);return Nd=function(){return e},e}function Od(){var e=(0,fr.Z)(["\n  mutation GithubRemoteConfigCreateGithubRepo($input: CreateGithubRepoInput!) {\n    createGithubRepo(input: $input) {\n      ... on CreateGithubRepoResult {\n        remoteUrl\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return Od=function(){return e},e}var Fd={},Wd=(0,pr.Ps)(Md());Nd();var Hd=(0,pr.Ps)(Od());var Vd=(0,mt.iv)(g.l0.color.accentNegativeStronger,g.l0.pl(4));function zd(e){var t=e.remoteName,n=e.updateRemote,i=(0,d.Z)().git,l=Qa(),c=(0,Ki.H)(),u=(0,Xe.Z)(),s=(0,a.useRef)(null),f=(0,a.useRef)(null),p=(0,a.useState)(),h=p[0],v=p[1],m=function(e){var t=(0,N.Z)({},Fd,e);return hr.a(Wd,t)}({variables:{replId:u}}).data,b="Repl"===(null===m||void 0===m?void 0:m.repl.__typename)?m.repl:{slug:void 0,description:void 0,isPrivate:void 0,url:void 0},w=b.slug,x=b.description,k=b.isPrivate,C=b.url,S=(0,o.Z)(function(e){var t=(0,N.Z)({},Fd,e);return Tr.D(Hd,t)}(),2),T=S[0],E=S[1].loading,R=(0,el.v)({onAuth:function(){rl("github-user-connected")}}),G=(0,a.useState)(null===k||void 0===k||k),I=G[0],_=G[1],D=(0,a.useState)(w),B=D[0],P=D[1],A=(0,a.useState)(),L=A[0],U=A[1],X=(0,a.useState)(null!==x&&void 0!==x?x:C&&"Repository for https://replit.com".concat(C)),M=X[0],O=X[1],F=(0,a.useState)(),W=F[0],H=F[1],V=function(){var e=(0,ot.Z)((function(e){var r,o,a;return(0,lt.__generator)(this,(function(l){switch(l.label){case 0:return[4,i.getRemotes()];case 1:return(r=l.sent()).error?(v("Error finding current remotes, ".concat(r.error)),[2]):r.remotes.has(t)?[4,i.setRemoteURL({remote:t,url:e})]:[3,3];case 2:return(o=l.sent()).error?(v("Error (".concat(o.error,") setting ").concat(t," to use ").concat(e," as a remote.")),[2]):(n(e),rl("remote-edited"),[2]);case 3:return[4,i.addRemote({name:t,url:e})];case 4:return(a=l.sent()).error?(v("Error (".concat(a.error,") adding ").concat(t," ").concat(e," as a remote.")),[2]):(n(e),rl("remote-added"),[2])}}))}));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=(0,ot.Z)((function(){var e,t,n,r;return(0,lt.__generator)(this,(function(i){switch(i.label){case 0:return U(void 0),H(void 0),v(void 0),B?(0,Cu.GE)(B)?[4,T({variables:{input:{name:B,description:null!==x&&void 0!==x?x:null,homepage:"replit.com".concat(C),isPrivate:I,ownerType:Xd.xJ.User}}})]:(U("Invalid remote name."),[2]):[2];case 1:return r=i.sent(),"UnauthorizedError"===(null===(e=r.data)||void 0===e?void 0:e.createGithubRepo.__typename)||"UserError"===(null===(t=r.data)||void 0===t?void 0:t.createGithubRepo.__typename)?(v(r.data.createGithubRepo.message),[2]):("CreateGithubRepoResult"===(null===(n=r.data)||void 0===n?void 0:n.createGithubRepo.__typename)&&(V(r.data.createGithubRepo.remoteUrl),rl("github-repository-published")),[2])}}))}));return function(){return e.apply(this,arguments)}}();return l?(0,r.BX)(y.G,{children:[(0,r.tZ)(Z.xv,{color:"dimmest",multiline:!1,children:"Repository name"}),(0,r.tZ)(Bn.II,{ref:s,label:"Repository name",name:"Repository name",placeholder:"Enter repository name",value:B,onChange:function(e){U(void 0),P(e.target.value)},"aria-label":"Enter a name for the GitHub repository to be created for this Repl.",onKeyDown:function(e){var t;"Enter"===e.key&&(e.preventDefault(),null===(t=f.current)||void 0===t||t.focus())}}),(0,r.tZ)(Z.xv,{css:Vd,multiline:!1,children:L}),(0,r.tZ)(Sd.Z,{height:1}),(0,r.tZ)(Z.xv,{color:"dimmest",multiline:!1,children:"Repository description"}),(0,r.tZ)(Bn.B,{ref:f,maxLength:350,label:"Repository description",name:"Repository description",placeholder:"Enter repository description",value:null!==M&&void 0!==M?M:void 0,onChange:function(e){H(void 0),O(e.target.value)},"aria-label":"Enter a description for the GitHub repository to be created for this Repl."}),(0,r.tZ)(Z.xv,{css:Vd,multiline:!1,children:W}),(0,r.tZ)(Sd.Z,{height:1}),(0,r.tZ)(Z.xv,{color:"dimmest",multiline:!1,children:"Privacy"}),(0,r.BX)(Ld.hE,{tag:"fieldset",id:c("privacy"),name:c("privacy"),value:I,onChange:function(e){return _(e)},row:!0,css:[g.l0.width("100%")],children:[(0,r.tZ)(Ld.rK,{id:c("false"),value:!1,text:"Public",icon:(0,r.tZ)(Ud.Z,{})}),(0,r.tZ)(Ld.rK,{id:c("true"),value:!0,text:"Private",icon:(0,r.tZ)(De.Z,{})})]}),(0,r.tZ)(Sd.Z,{height:2}),(0,r.tZ)(je.zx,{text:E?"Creating Repository on GitHub\u2026":"Create Repository on GitHub",colorway:"primary",iconLeft:(0,r.tZ)(tl.Z,{}),onClick:z,loading:E}),h?(0,r.tZ)(Z.xv,{css:Vd,maxLines:2,multiline:!1,children:h}):null]}):(0,r.tZ)(y.G,{children:(0,r.tZ)(je.zx,{colorway:"primary",iconLeft:(0,r.tZ)(tl.Z,{}),text:"Connect to GitHub",onClick:R})})}var jd=(0,mt.iv)(g.l0.rowWithGap(4)),qd=(0,mt.iv)(g.l0.flex.growAndShrink(1)),$d=(0,mt.iv)(g.l0.color.accentNegativeStronger,g.l0.pl(4));function Yd(e){var t=e.initialRemoteUrl,n=e.remoteName,i=e.updateRemote,o=(0,d.Z)().git,l=(0,a.useState)(),c=l[0],u=l[1];(0,a.useEffect)((function(){u(void 0)}),[t]);var s=(0,a.useState)(),f=s[0],p=s[1],h=(0,a.useState)(!1),v=h[0],m=h[1],g=function(){var e=(0,ot.Z)((function(){var e,t,r,a;return(0,lt.__generator)(this,(function(l){switch(l.label){case 0:if(l.trys.push([0,5,6,7]),!c)return[2];if(m(!0),!(0,Cu.LY)(c))throw Error("Invalid remote url.");return[4,o.getRemotes()];case 1:if((e=l.sent()).error)throw Error("Error finding current remotes, ".concat(e.error));return e.remotes.has(n)?[4,o.setRemoteURL({remote:n,url:c})]:[3,3];case 2:if((t=l.sent()).error)throw Error("Error (".concat(t.error,") setting ").concat(n," to use ").concat(c," as a remote."));return rl("remote-edited"),i(c),[2];case 3:return[4,o.addRemote({name:n,url:c})];case 4:if((r=l.sent()).error)throw Error("Error (".concat(r.error,") adding ").concat(n," ").concat(c," as a remote."));return rl("remote-added"),[3,7];case 5:return a=l.sent(),p(a.message),[3,7];case 6:return m(!1),[7];case 7:return[2]}}))}));return function(){return e.apply(this,arguments)}}();return(0,r.BX)(y.G,{children:[(0,r.tZ)(Bn.II,{label:"Remote URL",name:"Remote URL",placeholder:"Enter Remote URL",value:null!==c&&void 0!==c?c:t,autoComplete:"off",autoCorrect:"off",onChange:function(e){p(void 0),u(e.target.value)},inputMode:"url","aria-label":"Set remote URL to ".concat(c),onKeyDown:function(e){"Enter"===e.key&&g()}}),f?(0,r.tZ)(Z.xv,{variant:"small",css:$d,multiline:!1,children:f}):null,c&&c!==t?(0,r.BX)(r.HY,{children:[(0,r.tZ)(Sd.Z,{height:1}),(0,r.BX)(y.G,{css:jd,children:[(0,r.tZ)(je.zx,{css:qd,text:"Cancel",iconLeft:(0,r.tZ)(Zt.Z,{}),onClick:function(){return u(void 0)}}),(0,r.tZ)(je.zx,{css:qd,text:v?"Saving\u2026":"Save",loading:v,colorway:"primary",iconLeft:(0,r.tZ)(J.Z,{}),onClick:g})]})]}):null]})}var Kd=(0,mt.iv)(g.l0.border({width:1,color:g.TV.outlineDimmer}),g.l0.borderRadius(8)),Qd=(0,mt.iv)(Vc.gU.filled,g.l0.flex.row,g.l0.justify.spaceBetween,g.l0.align.center,g.l0.px(8),g.l0.py(4),g.l0.borderRadius(8,8,0,0)),Jd=(0,mt.iv)(g.l0.borderRadius(8,8,0,0)),ef=(0,mt.iv)(g.l0.borderRadius(8)),tf=(0,mt.iv)(g.l0.p(8)),nf=(0,mt.iv)(g.l0.flex.growAndShrink(1));function rf(e){var t=e.title,n=e.expanded,i=e.content,o=e.onClick;return(0,r.BX)(y.G,{css:Kd,children:[(0,r.BX)(y.G,{css:[Qd,n?Jd:ef],onClick:o,children:[(0,r.tZ)(y.G,{css:nf,children:(0,r.tZ)(Z.xv,{variant:"subheadDefault",multiline:!1,children:t})}),n?(0,r.tZ)(Ne.Z,{size:20}):(0,r.tZ)(Me.Z,{size:20})]}),n?(0,r.tZ)(y.G,{css:tf,children:i}):null]})}var of,af="origin";function lf(){var e=(0,Wa.Z)(function(){var e=(0,ot.Z)((function(e){var t,n,r,i,a;return(0,lt.__generator)(this,(function(l){switch(l.label){case 0:return[4,e.getRemotes()];case 1:return(t=l.sent()).error?[2,{url:void 0,name:af,error:t.error}]:(r=(0,o.Z)(null!==(n=t.remotes.values())&&void 0!==n?n:void 0,1),(i=r[0])?[2,{url:i.push||i.fetch,name:null!==(a=i.name)&&void 0!==a?a:af,error:null}]:[2,{url:void 0,name:af,error:null}])}}))}));return function(t){return e.apply(this,arguments)}}());return null==e?(0,r.BX)(y.G,{css:g.l0.center,children:[(0,r.tZ)(Z.xv,{color:"dimmest",multiline:!1,children:"Loading remote information."}),(0,r.tZ)(ku,{})]}):(null===e||void 0===e?void 0:e.error)?null:(0,r.tZ)(cf,{initialRemoteUrl:null===e||void 0===e?void 0:e.url,remoteName:null===e||void 0===e?void 0:e.name})}function cf(e){var t=e.initialRemoteUrl,n=e.remoteName,i=(0,a.useState)(t),o=i[0],l=i[1],c=(0,a.useState)(),u=c[0],s=c[1],d=function(e){l(e)};return(0,r.BX)(y.G,{children:[(0,r.tZ)(Z.xv,{variant:"subheadDefault",multiline:!1,children:"Remote"}),(0,r.tZ)(Sd.Z,{height:1}),(0,r.tZ)(Yd,{remoteName:n,initialRemoteUrl:o,updateRemote:d}),(0,r.tZ)(Sd.Z,{height:2}),(0,r.tZ)(rf,{title:"GitHub",expanded:u===of.GitHub,onClick:function(){return s((function(e){return e===of.GitHub?void 0:of.GitHub}))},content:(0,r.tZ)(zd,{remoteName:n,updateRemote:d})})]})}!function(e){e[e.GitHub=0]="GitHub"}(of||(of={}));var uf=(0,mt.iv)(g.l0.px(16));function sf(){return(0,r.BX)(y.G,{css:uf,children:[(0,r.tZ)(Sd.Z,{height:2}),(0,r.tZ)(lf,{}),(0,r.tZ)(Sd.Z,{height:2}),(0,r.tZ)(df,{})]})}function df(){return(0,r.BX)(y.G,{children:[(0,r.tZ)(Z.xv,{variant:"subheadDefault",multiline:!1,children:"Commit author"}),(0,r.tZ)(Sd.Z,{height:1}),(0,r.tZ)(Ad,{})]})}var ff=(0,mt.iv)(g.l0.colWithGap(16),g.l0.p(8),g.l0.pt(16)),pf=(0,mt.iv)(g.l0.colWithGap(16)),hf=(0,mt.iv)(g.l0.rowWithGap(8));function vf(){var e=(0,a.useState)(!1),t=e[0],n=e[1],i=(0,a.useState)("Initial Commit"),o=i[0],l=i[1],c=(0,a.useState)(!0),u=c[0],s=c[1],f=bl(),p=(0,d.Z)().git,h=(0,Ki.D)();function v(){return(v=(0,ot.Z)((function(){var e,r,i;return(0,lt.__generator)(this,(function(a){switch(a.label){case 0:return t?[2]:(n(!0),u?[4,p.stageFiles({all:!0})]:[3,2]);case 1:return r=a.sent(),[3,4];case 2:return[4,p.stageFiles({all:!1})];case 3:r=a.sent(),a.label=4;case 4:return(e=r).error?(f(e.error),n(!1),[3,7]):[3,5];case 5:return[4,p.commit({message:o})];case 6:(i=a.sent()).error?(f(i.error),n(!1)):p.forceRefresh(),a.label=7;case 7:return[2]}}))}))).apply(this,arguments)}return(0,r.BX)(y.G,{children:[(0,r.tZ)(gf,{}),(0,r.BX)(y.G,{css:ff,children:[(0,r.tZ)(Lr.E,{colorway:"orange",icon:(0,r.tZ)(Q.Z,{}),text:"Your current branch doesn't have any commits. You need to make an initial commit before continuing."}),(0,r.BX)(y.G,{css:pf,children:[(0,r.tZ)(hs,{message:o,onMessageChange:l,disabled:t}),(0,r.BX)(y.G,{css:hf,tag:"label",children:[(0,r.tZ)(ud.X,{id:h,checked:u,onChange:function(e){return s(e.target.checked)}}),(0,r.tZ)(Z.xv,{multiline:!1,children:"Include all files in commit"})]}),(0,r.tZ)(je.zx,{text:t?"Committing...":"Create initial commit",iconLeft:t?(0,r.tZ)(ze.Z,{}):(0,r.tZ)(J.Z,{}),colorway:"primary",disabled:!o,loading:t,onClick:function(){return v.apply(this,arguments)}})]})]})]})}var mf=(0,mt.iv)(g.l0.px(8),g.l0.py(4),g.l0.rowWithGap(8),g.l0.backgroundColor.backgroundDefault,g.l0.align.center,{borderBottom:"1px solid ".concat(g.TV.outlineDimmer)});function gf(){var e=bl(),t=(0,Wa.Z)(function(){var t=(0,ot.Z)((function(t){var n;return(0,lt.__generator)(this,(function(r){switch(r.label){case 0:return[4,t.status()];case 1:return(n=r.sent()).error&&e(n.error),[2,n]}}))}));return function(e){return t.apply(this,arguments)}}(),[e]);return(null===t||void 0===t?void 0:t.error)?null:(0,r.BX)(y.G,{css:mf,children:[(0,r.tZ)(ce.h,{alt:"Back to dashboard",size:18,disabled:!0,children:(0,r.tZ)(kl.Z,{})}),(null===t||void 0===t?void 0:t.branch)?(0,r.tZ)(Hl,{name:t.branch,current:!0,heading:!0}):null]})}function yf(e){var t=e.error;return(0,r.BX)(y.G,{children:[(0,r.tZ)(Z.xv,{multiline:!1,children:"Failed to start the Git pane."}),(0,r.BX)(Z.xv,{multiline:!1,children:["Error: ",t]})]})}var Zf=(0,mt.iv)(g.l0.position.relative,g.l0.display.flex,g.l0.height("100%")),bf=(0,mt.iv)(g.l0.flex.growAndShrink(1),g.l0.overflow("auto"));function wf(e){var t=e.isActive,n=void 0!==t&&t,i=e.performPaneOperation,o=(0,a.useRef)(),l=(0,a.useState)(Yl.CURRENT_BRANCH),c=l[0],u=l[1],s=(0,a.useState)(null),f=s[0],p=s[1],h=(0,a.useState)(!1),v=h[0],m=h[1];!function(e){var t=(0,d.Z)().git;(0,a.useEffect)((function(){e&&t.forceRefresh()}),[e,t])}(n);var g=(0,Wa.Z)(function(){var e=(0,ot.Z)((function(e){var t,n,r,i,o,a,l,c,u;return(0,lt.__generator)(this,(function(s){switch(s.label){case 0:return[4,e.getRepositoryState()];case 1:return(t=s.sent()).error?[2,t]:(n=t.state,r=t.type,i=null,o=null,a=null,r===Oa.y5.INITIALIZING?[3,5]:[4,e.status()]);case 2:return(l=s.sent()).error?[2,l]:(i=l,[4,e.getRemotes()]);case 3:return(c=s.sent()).error?[2,c]:(o=c.remotes,i.branch?[4,e.getBranch(i.branch)]:[3,5]);case 4:if((u=s.sent()).error)return[2,u];a=u.branch,s.label=5;case 5:return[2,{state:n,type:r,status:i,remotes:o,currentBranch:a,error:null}]}}))}));return function(t){return e.apply(this,arguments)}}()),y=!g||g.error?null:g.currentBranch,Z=(0,a.useCallback)((function(e){switch(u(e),e){case Yl.DASHBOARD:rl("pane-mode-changed",{mode:"dashboard"});break;case Yl.BRANCH:rl("pane-mode-changed",{mode:"branch"});break;case Yl.CURRENT_BRANCH:rl("pane-mode-changed",{mode:"current-branch"});break;case Yl.SETTINGS:rl("pane-mode-changed",{mode:"settings"})}}),[]),b=(0,a.useCallback)((function(){o.current?(Z(o.current),o.current=void 0):Z(Yl.DASHBOARD)}),[Z]),w=(0,a.useCallback)((function(e){var t=function(e){o.current=c,Z(e)};switch(e.mode){case Yl.DASHBOARD:t(Yl.DASHBOARD);break;case Yl.BRANCH:if((0,Fa.p3)(e.branch,y)){t(Yl.CURRENT_BRANCH);break}p(e.branch),t(Yl.BRANCH);break;case Yl.CURRENT_BRANCH:t(Yl.CURRENT_BRANCH);break;case Yl.SETTINGS:t(Yl.SETTINGS)}}),[Z,c,y]),x=(0,a.useCallback)((function(e){var t=(0,P.Dp)({path:e});i({operation:"open",pane:{type:t,data:{path:e}}})}),[i]),k=(0,a.useCallback)((function(){m(!0)}),[]);if(c===Yl.BRANCH&&(0,Fa.p3)(f,y)&&Z(Yl.CURRENT_BRANCH),(0,a.useEffect)((function(){return m(!1)}),[g]),v||!g||g.error)return(0,r.tZ)(xf,{children:(null===g||void 0===g?void 0:g.error)?(0,r.tZ)(yf,{error:g.error}):(0,r.tZ)(ku,{})});var C=g.status,S=g.remotes,T=g.state;switch(g.type){case Oa.y5.INITIALIZING:case Oa.y5.INTERMEDIATE:case Oa.y5.DETACHED_HEAD:return(0,r.tZ)(xf,{children:(0,r.tZ)(kf,{state:T,onFileClick:x,gotoPendingState:k})});case Oa.y5.NORMAL:return c===Yl.BRANCH&&!f||c===Yl.CURRENT_BRANCH&&!y?(0,r.tZ)(xf,{header:(0,r.tZ)(ec,{mode:Yl.DASHBOARD,branch:null,switchMode:w,onBack:b}),children:(0,r.tZ)(ld,{currentBranch:null,switchMode:w})}):(0,r.tZ)(xf,{header:(0,r.tZ)(ec,{mode:c,branch:c===Yl.CURRENT_BRANCH?y:f,switchMode:w,onBack:b}),children:(0,r.tZ)(Cf,{mode:c,status:C,remotes:S,previewBranch:f,currentBranch:y,switchMode:w,onStagedFileClick:x,gotoPendingState:k})})}}function xf(e){var t=e.header,n=e.children,i=(0,a.useState)((function(){return(0,st.MT)()}))[0];return(0,r.tZ)(ml.Provider,{value:i,children:(0,r.BX)(y.G,{css:Zf,children:[(0,r.tZ)(xl,{}),t,(0,r.tZ)(y.G,{css:bf,children:n})]})})}function kf(e){var t=e.state,n=e.onFileClick,i=e.gotoPendingState;switch(t){case Oa.yG.NOT_INITIALIZED:return(0,r.tZ)(xd,{});case Oa.yG.ON_UNBORN_BRANCH:return(0,r.tZ)(vf,{});case Oa.yG.MERGING:return(0,r.tZ)(yd,{onFileClick:n,gotoPendingState:i});case Oa.yG.REBASING:return(0,r.tZ)(kd,{});case Oa.yG.REVERTING:return(0,r.tZ)(Cd,{});case Oa.yG.CHERRY_PICKING:return(0,r.tZ)(Ws,{});case Oa.yG.APPLYING_MAILBOX:return(0,r.tZ)(lc,{});case Oa.yG.BISECTING:return(0,r.tZ)(cc,{});case Oa.yG.DETACHED_HEAD:return(0,r.tZ)(cd,{});default:return null}}function Cf(e){var t=e.mode,n=e.status,i=e.remotes,o=e.previewBranch,a=e.currentBranch,l=e.switchMode,c=e.onStagedFileClick,u=e.gotoPendingState;switch(t){case Yl.DASHBOARD:return(0,r.tZ)(ld,{currentBranch:a,switchMode:l});case Yl.BRANCH:return(0,r.tZ)(Os,{status:n,branch:o,remotes:i,onStagedFileClick:c,gotoPendingState:u});case Yl.CURRENT_BRANCH:return(0,r.tZ)(Os,{status:n,remotes:i,branch:a,onStagedFileClick:c,gotoPendingState:u,current:!0});case Yl.SETTINGS:return(0,r.tZ)(sf,{});default:(0,Ha.Z)(t)}}var Sf={Content:function(e){var t=e.options,n=t.isActive,i=t.performPaneOperation;return(0,r.tZ)(wf,{isActive:n,performPaneOperation:i})},Icon:function(e){var t=e.size;return(0,r.tZ)(Na.Z,{size:t})},getTitle:function(){return"Git"}},Tf=n(21303),Ef=n(43668);function Rf(e){var t=e.reversed,n=void 0!==t&&t,i=e.hideName,o=void 0!==i&&i,l=e.color,c=void 0===l?"default":l,u=(0,Tf.bA)(),s=(0,a.useMemo)((function(){return[n?g.l0.rowReverseWithGap(4):g.l0.rowWithGap(4),g.l0.align.center]}),[n]);if(!u)return null;if(0===u.count)return(0,r.BX)(y.G,{css:s,children:[(0,r.tZ)(Ef.Z,{size:24}),(0,r.tZ)(Z.xv,{color:c,multiline:!1,children:"Server Authored"})]});var d=u.changes[u.version];if(!u.users)return(0,r.BX)(y.G,{css:s,children:[(0,r.tZ)(tu.q,{size:24,src:"/public/images/ghost.svg",username:"Unknown"}),o?null:(0,r.tZ)(Z.xv,{color:c,multiline:!1,children:"Unknown"})]});var f=u.users[d.userId];return f?(0,r.BX)(y.G,{css:s,children:[(0,r.tZ)(tu.q,{size:24,src:f.image,username:f.username}),o?null:(0,r.tZ)(Z.xv,{color:c,multiline:!1,children:f.username})]}):d.timestamp>16546464e5?(0,r.BX)(y.G,{css:s,children:[(0,r.tZ)(Ef.Z,{size:24}),o?null:(0,r.tZ)(Z.xv,{color:c,multiline:!1,children:"Server Authored"})]}):(0,r.BX)(y.G,{css:s,children:[(0,r.tZ)(tu.q,{size:24,src:"/public/images/ghost.svg",username:"Unknown"}),o?null:(0,r.tZ)(Z.xv,{color:c,multiline:!1,children:"Unknown"})]})}function Gf(){var e=(0,fr.Z)(["\n  query WorkspaceHistory2Users($ids: [Int!]!) {\n    currentUser {\n      id\n      username\n      image\n    }\n    usersByIds(ids: $ids) {\n      id\n      username\n      image\n    }\n  }\n"]);return Gf=function(){return e},e}function If(){var e=(0,fr.Z)(["\n  query WorkspaceHistory2CurrentUserDate {\n    currentUser {\n      id\n      timeCreated\n    }\n  }\n"]);return If=function(){return e},e}var _f=(0,pr.Ps)(Gf());If();var Df=n(4821),Bf=n(66091),Pf=n(5683),Af=n(83451),Lf=n(45347),Uf=function(e){(0,Pf.Z)(n,e);var t=(0,Lf.Z)(n);function n(e){var r;return(0,Bf.Z)(this,n),(r=t.call(this,e)).name="UserError",r}return n}((0,Af.Z)(Error));function Xf(e,t,n){return new Promise((function(r,i){try{var o=e.watchTextFile(t,{onReady:function(){var e=(0,ot.Z)((function(e){var t,a;return(0,lt.__generator)(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),[4,n(e)];case 1:return t=l.sent(),r(t),[3,3];case 2:return a=l.sent(),i(a),[3,3];case 3:return o(),[2]}}))}));return function(t){return e.apply(this,arguments)}}()})}catch(a){i(a)}}))}var Mf,Nf=Df.I;function Of(e,t){return Ff.apply(this,arguments)}function Ff(){return Ff=(0,ot.Z)((function(e,t){var n,r,i,o,a,l,c,u,s,d,f,p,h,v,m,g,y,Z;return(0,lt.__generator)(this,(function(b){switch(b.label){case 0:n=new Set,r=!0,i=!1,o=void 0;try{for(a=t[Symbol.iterator]();!(r=(l=a.next()).done);r=!0)(c=l.value).userId&&n.add(c.userId)}catch(w){i=!0,o=w}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return 0===n.size?[2,{}]:n.size>=Nf?[2,Mf.TooManyUsersRequestedError]:[4,e.query({query:_f,variables:{ids:Array.from(n)}})];case 1:if(u=b.sent(),s=u.data,d=u.error)throw d;f=s.currentUser?[s.currentUser].concat((0,Xt.Z)(s.usersByIds)):s.usersByIds,p={},h=!0,v=!1,m=void 0;try{for(g=f[Symbol.iterator]();!(h=(y=g.next()).done);h=!0)Z=y.value,p[Z.id]={id:Z.id,username:Z.username,image:Z.image}}catch(w){v=!0,m=w}finally{try{h||null==g.return||g.return()}finally{if(v)throw m}}return[2,p]}}))})),Ff.apply(this,arguments)}function Wf(){return Wf=(0,ot.Z)((function(e,t,n){var r,i,o;return(0,lt.__generator)(this,(function(a){switch(a.label){case 0:return[4,Xf(e,n,function(){var e=(0,ot.Z)((function(e){var t,n;return(0,lt.__generator)(this,(function(r){return t=e.fetchChanges,0===(n=e.version)?[2,{isDisposed:!1,result:[]}]:[2,t(1,n,"")]}))}));return function(t){return e.apply(this,arguments)}}())];case 1:return(r=a.sent()).isDisposed?[2,{data:null,handledError:"File deleted or removed."}]:(i=r.result,[4,Of(t,i)]);case 2:return(o=a.sent())===Mf.TooManyUsersRequestedError?[2,{data:{changes:i,users:null},handledError:null}]:[2,{data:{changes:i,users:o},handledError:null}]}}))})),Wf.apply(this,arguments)}function Hf(e,t,n){return Xf(e,t,function(){var t=(0,ot.Z)((function(t){var r,i,o,a,l,c,u,s,d;return(0,lt.__generator)(this,(function(f){switch(f.label){case 0:if(r=t.fetchChanges,i=t.writeChange,o=t.version,n>o)throw new Error("Cannot restore to a version that does not exist");if(n===o)return[2];a=null,f.label=1;case 1:return f.trys.push([1,3,,4]),[4,r(1,o,"")];case 2:if((l=f.sent()).isDisposed)throw new Uf("File deleted or removed.");return a=l.result,[3,4];case 3:throw f.sent(),new Uf("Something went wrong while restoring the file. It is possible that a bad connection is to blame. Please try again.");case 4:c=(0,Dn.Z)(a.slice(n,a.length).reverse()),u=c[0],s=c.slice(1),d=s.reduce((function(e,t){return e.compose(t.invertedChanges)}),u.invertedChanges);try{i(d)}catch(p){throw Gt.c_.captureException(p),new Uf("Something went wrong while restoring the file. Maybe the file changed while you were restoring it? Please try again.")}return[4,e.flush()];case 5:return f.sent(),[2]}}))}));return function(e){return t.apply(this,arguments)}}())}!function(e){e.TooManyUsersRequestedError="too_many_users"}(Mf||(Mf={}));var Vf=n(46889),zf=(0,mt.iv)({display:"grid",gridTemplateColumns:"auto 1fr",rowGap:"0.5rem",columnGap:"1rem","> dt":{display:"flex",alignItems:"center",fontWeight:"bold"}});function jf(e){var t=e.onCloseHistory,n=(0,Ue.Z)().showError,i=(0,a.useState)(!1),o=i[0],l=i[1],c=(0,a.useState)(!1),u=c[0],s=c[1],f=(0,d.Z)().fs,p=(0,Tf.bA)(),h=(0,Vf.j)(),v="Restore",m=!0;function b(){return(b=(0,ot.Z)((function(){var e,r,i;return(0,lt.__generator)(this,(function(o){switch(o.label){case 0:if(!p||!f||u)return[2];o.label=1;case 1:return o.trys.push([1,3,4,5]),s(!0),(0,Vf.p)("versionRestored"),e=p.filePath,r=p.version,[4,Hf(f,e,r+1)];case 2:return o.sent(),t(),[3,5];case 3:return i=o.sent(),(0,za.Z)(i,Uf)?(n(i.message),[2]):(h(i,"restore"),[3,5]);case 4:return l(!1),s(!1),[7];case 5:return[2]}}))}))).apply(this,arguments)}return p?0===p.count?(v="No history",m=!0):u||o?(v="Restoring...",m=!0):p.playing?(v="Playing...",m=!0):p.version===p.count-1?(v="Viewing latest",m=!0):(v="Restore to here",m=!1):(v="Loading...",m=!0),(0,r.BX)(r.HY,{children:[(0,r.tZ)(je.zx,{text:v,disabled:m,onClick:function(){return l(!0)},colorway:"primary",iconLeft:(0,r.tZ)(di.Z,{})}),p&&0!==p.count&&(0,r.tZ)($u.u,{isOpen:o,onRequestClose:function(){u||l(!1)},children:(0,r.BX)(y.G,{css:g.l0.colWithGap(24),children:[(0,r.tZ)(Z.h4,{variant:"headerDefault",level:2,children:"Restore file version"}),(0,r.tZ)($.Tg,{elevated:!0,css:[g.l0.px(16),g.l0.py(12),g.l0.borderRadius(8)],children:(0,r.BX)("dl",{css:zf,children:[(0,r.tZ)("dt",{children:"File"}),(0,r.tZ)("dd",{children:p.filePath}),(0,r.tZ)("dt",{children:"Version"}),(0,r.BX)("dd",{children:[p.version+1,(0,r.BX)("span",{css:[g.l0.color.foregroundDimmest],children:[(0,r.tZ)("span",{css:g.l0.mx(8),children:"/"}),p.count]})]}),(0,r.tZ)("dt",{children:"Date"}),(0,r.tZ)("dd",{children:(0,r.tZ)(eu.E,{date:p.changes[p.version].timestamp,dateFormat:"absolute"})}),(0,r.tZ)("dt",{children:"Author"}),(0,r.tZ)("dd",{children:(0,r.tZ)(Rf,{})})]})}),(0,r.tZ)(Lr.E,{icon:(0,r.tZ)(Ko.Z,{}),colorway:"positive",text:"Restoring is non-destructive. The restored content will become a new version at the end of history. You can always go back to the version you just had."}),(0,r.BX)(y.G,{css:[g.l0.rowWithGap(8),g.l0.justify.end],children:[(0,r.tZ)(je.zx,{text:"Cancel",disabled:u,onClick:function(){return l(!1)}}),(0,r.tZ)(je.zx,{text:u?"Restoring Version...":"Restore Version",disabled:u,colorway:"primary",onClick:function(){return b.apply(this,arguments)},iconLeft:(0,r.tZ)(di.Z,{})})]})]})})]})}var qf=n(12808);function $f(e,t){var n=(0,Tf.bA)(),i=(0,a.useRef)(null);(0,a.useImperativeHandle)(t,(function(){return i.current})),n&&i.current&&(i.current.setAttribute("aria-valuemin","1"),i.current.setAttribute("aria-valuemax",String(n.count)),i.current.setAttribute("aria-valuenow",String(n.version+1)));var o=(0,a.useMemo)((function(){return(0,r.tZ)("div",{ref:i,role:"slider",tabIndex:0,css:{position:"absolute",top:"0",left:"calc((100% - 16px) * var(--scrubber-progress, 0))",width:"16px",height:"16px",backgroundColor:g.TV.accentPrimaryDefault,borderRadius:"100%",outline:"none",cursor:"pointer",transition:"left var(--scrubber-transition-time, 100ms) ease-out",willChange:"left, transition",":focus":{boxShadow:"0 0 0 1px ".concat(g.TV.foregroundDefault," inset")}}})}),[]);return n&&n.count>1?o:null}var Yf=(0,a.forwardRef)($f);function Kf(e,t){var n=(0,Tf.bA)(),i=(0,a.useMemo)((function(){return(0,r.BX)(r.HY,{children:[(0,r.tZ)("div",{ref:t,"aria-hidden":!0,css:{position:"relative",top:"0",width:"100%",height:"16px",margin:"0",cursor:"pointer"}}),(0,r.tZ)("div",{"aria-hidden":!0,css:{position:"absolute",top:"6px",left:"0",width:"100%",height:"4px",margin:"0",overflow:"hidden",pointerEvents:"none",backgroundColor:g.TV.backgroundHighest,borderRadius:"2px"},children:(0,r.tZ)("div",{"aria-hidden":!0,css:{position:"absolute",top:"0",left:"0",width:"100%",height:"4px",margin:"0",pointerEvents:"none",backgroundColor:g.TV.accentPrimaryDefault,transformOrigin:"left",transform:"scaleX(var(--scrubber-progress, 0))",transition:"transform var(--scrubber-transition-time, 100ms) ease-out",willChange:"transform, transition"}})})]})}),[t]),o=(0,a.useMemo)((function(){return(0,r.tZ)("div",{ref:t,"aria-hidden":!0,css:{width:"100%",height:"16px",pointerEvents:"none"},children:(0,r.tZ)("div",{css:{position:"absolute",width:"100%",height:"4px",top:"6px",left:"0",backgroundColor:g.TV.backgroundHighest,borderRadius:"2px"}})})}),[t]);return n&&n.count>1?i:o}var Qf,Jf=(0,a.forwardRef)(Kf),ep=["ArrowLeft","ArrowRight","Home","End"];function tp(){var e=(0,Tf.bA)(),t=(0,Tf._Z)(),n=(0,a.useState)(!1),i=n[0],o=n[1],l=(0,a.useRef)(null),c=(0,a.useRef)(null),u=(0,a.useRef)(null),s=function(e){(0,qf.A)(l,"--scrubber-transition-time",e)},d=function(e){(0,qf.A)(l,"--scrubber-progress",e.toString())};if(e&&!i){var f=e.version/(e.count-1);d(f),e.playing?s("50ms"):s("100ms")}return(0,a.useEffect)((function(){if(e&&c.current&&u.current&&!i){var n=c.current,r=u.current,a=function(i){if(0===i.button){o(!0),r.focus();var a=n.getBoundingClientRect(),l=r.getBoundingClientRect(),c=a.width,u=l.width,f=i.target===n?u/2:i.clientX-l.left,p=null,h=function(n){var r=n-a.left-f,i=Math.max(0,Math.min(1,r/(c-u)));i!==p&&(p=i,d(i),t({version:Math.round(i*(e.count-1)),playing:!1}))};h(i.clientX);var v=function(e){s("0ms"),h(e.clientX),e.preventDefault(),e.stopPropagation()},m=function(){window.removeEventListener("pointermove",v),window.removeEventListener("pointerup",m),window.removeEventListener("pointercancel",m),s("100ms"),o(!1)};window.addEventListener("pointermove",v),window.addEventListener("pointerup",m),window.addEventListener("pointercancel",m),i.preventDefault(),i.stopPropagation()}};return n.addEventListener("pointerdown",a),r.addEventListener("pointerdown",a),function(){n.removeEventListener("pointerdown",a),r.removeEventListener("pointerdown",a)}}}),[e,t,i]),(0,a.useEffect)((function(){if(e&&u.current&&!i){var n=u.current,r=function(n){if(e&&ep.includes(n.key)){var r=n.shiftKey?10:1,i=e.version,o=e.count-1,a=Math.max(0,i-r),l=Math.min(o,i+r),c=null;switch(n.key){case"ArrowLeft":c=a;break;case"ArrowRight":c=l;break;case"Home":c=0;break;case"End":c=o}null!==c&&(t({version:c,playing:!1}),n.preventDefault(),n.stopPropagation())}};return n.addEventListener("keydown",r),function(){n.removeEventListener("keydown",r)}}}),[e,t,i]),(0,a.useMemo)((function(){return(0,r.BX)(y.G,{innerRef:l,css:{position:"relative",height:"16px",width:"100%",touchAction:"none","--scrubber-progress":1,"--scrubber-transition-time":"100ms",":hover, :focus-within":{filter:"brightness(1.1)"},":hover:focus-within":{filter:"brightness(1.2)"}},children:[(0,r.tZ)(Jf,{ref:c}),(0,r.tZ)(Yf,{ref:u})]})}),[])}!function(e){e.None="0ms",e.Normal="100ms",e.Fast="50ms"}(Qf||(Qf={}));var np=n(57843);function rp(e){var t=(0,a.useState)({data:null,loading:!0,error:null,handledError:null}),n=t[0],r=t[1],i=(0,d.Z)().fs,o=(0,np.x)();return(0,a.useEffect)((function(){if(e){r({data:null,loading:!0,error:null,handledError:null});var t=!1;return function(e,t,n){return Wf.apply(this,arguments)}(i,o,e).then((function(e){var n=e.data,i=e.handledError;t||r(i?{data:null,loading:!1,error:null,handledError:i}:{data:n,loading:!1,error:null,handledError:null})})).catch((function(e){t||((0,za.Z)(e,Error)||(e=new Error(e)),r({data:null,loading:!1,error:e,handledError:null}))})),function(){t=!0}}r({data:null,loading:!1,error:null,handledError:null})}),[e,i,o]),n}function ip(e){var t=e.onClose;return(0,r.tZ)(je.zx,{text:"Cancel",onClick:function(){(0,Vf.p)("historyExplicitlyClosed"),t()}})}var op=n(35458),ap=(0,mt.iv)({filter:"grayscale(100%) opacity(0.5)",pointerEvents:"none"});function lp(){var e,t="/replEnvironmentMobile"===(0,Id.useRouter)().pathname,n=(0,Tf.bA)(),i=(0,Tf._Z)(),o=(0,Ki.H)(),a=!n||0===n.count;return(0,r.BX)(y.G,{css:[g.l0.rowWithGap(8),g.l0.align.center,a?ap:null],children:[(0,r.tZ)(op.Z,{id:o("diffButton"),isOn:null!==(e=null===n||void 0===n?void 0:n.comparing)&&void 0!==e&&e,onChange:function(e){if(!a){var t=e.target.checked;i({comparing:t})}}}),(0,r.tZ)("label",{css:[{cursor:"pointer",userSelect:"none"},g.l0.flex.column,g.l0.align.center],htmlFor:o("diffButton"),children:(0,r.tZ)(Z.xv,{multiline:!1,children:t?"Compare":"Compare Latest"})})]})}function cp(){var e=(0,Tf.bA)(),t=0,n=0;e&&0!==e.count&&(t=e.version+1,n=e.count);var i=e?"default":"dimmer";return(0,r.BX)(y.G,{css:[g.l0.rowWithGap(4),g.l0.justify.spaceBetween],children:[(0,r.tZ)(Z.xv,{css:{minWidth:"2ch",textAlign:"right"},color:i,multiline:!1,children:t}),(0,r.tZ)(Z.xv,{css:{width:"1ch",textAlign:"center"},color:"dimmer",multiline:!1,children:"/"}),(0,r.tZ)(Z.xv,{css:{minWidth:"2ch",textAlign:"left"},color:"dimmer",multiline:!1,children:n})]})}var up=n(40735),sp=n(76963);function dp(e){if(e<0)throw new Error('Require at least zero ops to compute pace, got "'+e+'"');return 1/Math.log(e+2)*100}function fp(){var e,t,n,i,o=(0,Tf.bA)(),l=(0,Tf._Z)(),c=(null!==(t=null===o||void 0===o||null===(e=o.changes)||void 0===e?void 0:e.length)&&void 0!==t?t:1)-1,u=null!==(n=null===o||void 0===o?void 0:o.version)&&void 0!==n?n:0,s=null!==(i=null===o||void 0===o?void 0:o.playing)&&void 0!==i&&i,d=!o||0===o.count,f=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:dp,i=(0,a.useState)(!1),o=i[0],l=i[1],c=(0,a.useCallback)((function(){t(1)}),[t]),u=(0,a.useCallback)((function(){e+1>n?l(!1):t(e+1)}),[t,e,n]),s=function(){l(!0)},d=function(){l(!1)};return(0,a.useEffect)((function(){if(o){var e=setTimeout((function(){u()}),r(n));return function(){return clearTimeout(e)}}}),[o,u,r,n]),{isPlaying:o,start:s,stop:d,reset:c}}(u,(function(e){return l({version:e})}),c),p=f.isPlaying,h=f.start,v=f.stop;(0,a.useEffect)((function(){p&&!s?v():!p&&s&&h()}),[s,p,h,v]);var m="Loading...";return o&&(p?m="Pause":o.version===o.count-1?m="Play file history from beginning":0===o.version?m="Play file history":o.version>0&&(m="Play file history from here")),(0,r.tZ)(ce.h,{alt:m,size:24,disabled:d,onClick:function(){l(u===c?{version:0,playing:!0}:{playing:!s})},children:p?(0,r.tZ)(sp.Z,{}):(0,r.tZ)(up.Z,{})})}function pp(){return(0,r.BX)(y.G,{css:[g.l0.rowWithGap(4),g.l0.align.center],children:[(0,r.tZ)(fp,{}),(0,r.tZ)(hp,{}),(0,r.tZ)(cp,{}),(0,r.tZ)(vp,{})]})}function hp(){var e=(0,Tf.bA)(),t=(0,Tf._Z)(),n=!e||0===e.version||0===e.count;return(0,r.tZ)(ce.h,{alt:"Move backwards one version",size:24,disabled:n,onClick:function(){e&&e.version>0&&t({version:e.version-1})},children:(0,r.tZ)(kl.Z,{})})}function vp(){var e=(0,Tf.bA)(),t=(0,Tf._Z)(),n=!e||e.version===e.count-1||0===e.count;return(0,r.tZ)(ce.h,{alt:"Move forwards one version",size:24,disabled:n,onClick:function(){e&&e.version<e.count-1&&t({version:e.version+1})},children:(0,r.tZ)(qe.Z,{})})}function mp(){var e=(0,Tf.bA)();if(!e||0===e.count)return null;var t=e.changes[e.version].timestamp;return(0,r.tZ)(eu.E,{textColor:"dimmer",dateFormat:"switch",date:t})}function gp(e){var t=e.filePath,n=e.onCloseHistory,i="/replEnvironmentMobile"===(0,Id.useRouter)().pathname,o=i?g.l0.borderRadius(0):g.l0.borderRadius(0,0,8,8),l=(0,Tf.bA)(),c=(0,Tf._Z)(),u=(0,Tf.Ai)(),s=(0,Vf.j)(),d=rp(t),f=d.data,p=d.loading,h=d.error;return(0,a.useEffect)((function(){if(h)s(h,"history2-index",{filePath:t});else if(f&&!p)return c({filePath:t,changes:f.changes,users:f.users}),(0,Vf.p)("historyLoaded"),function(){u()}}),[t,f,p,h,s,c,u]),(0,r.BX)(y.G,{css:[g.l0.colWithGap(8),g.l0.p(8),g.l0.zIndex(3),g.l0.overflow("hidden"),o,g.l0.backgroundColor.backgroundDefault,{borderTop:"2px solid ".concat(g.TV.backgroundHigher),boxShadow:"rgba(2, 2, 3, 0.125) 0px -16px 32px 0px"}],children:[(0,r.BX)($.Tg,{css:[g.l0.position.relative,g.l0.colWithGap(4),g.l0.px(12),g.l0.pt(8),g.l0.pb(8),g.l0.align.center,g.l0.borderRadius(8),g.l0.overflow("hidden")],elevated:!0,children:[(0,r.tZ)(tp,{}),(0,r.BX)(y.G,{css:[g.l0.display.flex,g.l0.flex.row,g.l0.align.center,g.l0.justify.spaceBetween,g.l0.width("100%")],children:[(0,r.tZ)(pp,{}),l&&l.count>0?(0,r.BX)(y.G,{css:[g.l0.rowWithGap(4),g.l0.align.center],children:[(0,r.tZ)(mp,{}),p||i?null:(0,r.tZ)(Z.xv,{color:"dimmer",multiline:!1,children:"\u2022"}),(0,r.tZ)(Rf,{color:"dimmer",hideName:i,reversed:!0})]}):null]})]}),(0,r.BX)(y.G,{css:[g.l0.display.flex,g.l0.flex.row],children:[(0,r.tZ)(yp,{justify:"flex-start",children:(0,r.tZ)(lp,{})}),(0,r.BX)(yp,{justify:"flex-end",children:[(0,r.tZ)(ip,{onClose:n}),(0,r.tZ)(jf,{onCloseHistory:n})]})]})]})}function yp(e){var t=e.children,n=e.justify;return(0,r.tZ)("div",{css:{display:"flex",flexGrow:1,flexBasis:0,alignItems:"center",justifyContent:n,columnGap:g.TV.space8,minWidth:0},children:t})}var Zp=n(68935),bp=n(52682),wp=n(47581),xp=n(63230),kp=(0,wp.B)();function Cp(e){if((0,za.Z)(e,Mr.YW)){var t=e.state.field(kp.state,!1);return{compareTo:t,changed:e.startState.field(kp.state,!1)!==t}}return{compareTo:e.field(kp.state,!1),changed:!1}}function Sp(e,t){e.state.field(kp.state,!1)!==t&&e.dispatch({effects:kp.effect.of(t)})}var Tp,Ep,Rp=Mr.QQ.define({create:function(){return null},update:function(e,t){var n=Cp(t),r=n.compareTo,i=n.changed;if(!r)return null;if(!t.docChanged&&!i)return e;var o=t.state.doc.toString();return new xp.PO(o,r)}}),Gp=null!==(Tp=globalThis.requestIdleCallback)&&void 0!==Tp?Tp:globalThis.requestAnimationFrame,Ip=null!==(Ep=globalThis.cancelIdleCallback)&&void 0!==Ep?Ep:globalThis.cancelAnimationFrame,_p=Ur.p.line({class:"cm-diff-deleted"}),Dp=function(e){(0,Pf.Z)(n,e);var t=(0,Lf.Z)(n);function n(e,r){var i;return(0,Bf.Z)(this,n),(i=t.call(this)).insertion=e,i.highlight=r,i}var r=n.prototype;return r.destroy=function(){this.pendingHighlight&&Ip(this.pendingHighlight)},r.toDOM=function(){var e=document.createElement("div");return e.className="cm-diff-inserted cm-line",this.updateDOM(e),e},r.eq=function(e){return!e.pendingHighlight&&this.insertion===e.insertion},r.updateDOM=function(e){var t=this;return this.pendingHighlight&&(Ip(this.pendingHighlight),this.pendingHighlight=null),this.insertion.length?e.textContent=this.insertion:e.innerHTML="&nbsp;",this.highlight&&this.insertion.length&&(this.pendingHighlight=Gp((function(){if(t.highlight){t.pendingHighlight=null;try{var n=t.highlight();e.innerHTML="",e.append(n)}catch(r){}}}))),!0},n}(Ur.l9),Bp=Mr.QQ.define({create:function(){return Ur.p.none},update:function(e,t){var n=t.state.field(Rp,!1);if(!n)return Ur.p.none;var r=Cp(t).changed;if(!t.docChanged&&!r)return e.map(t.changes);var i=[],o=function(e,t){i.push({from:e,to:e,value:t})},a=n.startInsertions();if(a){var l=!0,c=!1,u=void 0;try{for(var s,d=function(){var e=s.value,n=new Dp(e.content,(function(){return Pp(t.state,e.content)}));o(0,Ur.p.widget({widget:n,side:-1,block:!0}))},f=a[Symbol.iterator]();!(l=(s=f.next()).done);l=!0)d()}catch(Z){c=!0,u=Z}finally{try{l||null==f.return||f.return()}finally{if(c)throw u}}}var p=!0,h=!1,v=void 0;try{for(var m,g=function(){var e=m.value;if(e.isDeleted&&o(e.from,_p),e.insertions){var n=!0,r=!1,i=void 0;try{for(var a,l=function(){var n=a.value,r=new Dp(n.content,(function(){return Pp(t.state,n.content)}));o(e.to,Ur.p.widget({widget:r,side:1,block:!0}))},c=e.insertions[Symbol.iterator]();!(n=(a=c.next()).done);n=!0)l()}catch(Z){r=!0,i=Z}finally{try{n||null==c.return||c.return()}finally{if(r)throw i}}}},y=n.lines()[Symbol.iterator]();!(p=(m=y.next()).done);p=!0)g()}catch(Z){h=!0,v=Z}finally{try{p||null==y.return||y.return()}finally{if(h)throw v}}return Ur.p.set(i,!0)},provide:function(e){return Ur.tk.decorations.from(e)}});function Pp(e,t){var n,r=document.createDocumentFragment(),i=null===(n=e.facet(Zp.dK))||void 0===n?void 0:n.parser;if(!i){var o=document.createElement("span");return o.textContent=t,r.append(o),r}var a=i.parse(t),l={style:function(t){return(0,Zp.QN)(e,t)}},c=0;if((0,bp.bW)(a,l,(function(e,n,i){if(e>c){var o=document.createElement("span");o.textContent=t.slice(c,e),r.append(o)}var a=document.createElement("span");a.className=i,a.textContent=t.slice(e,n),r.append(a),c=n})),c<t.length){var u=document.createElement("span");u.textContent=t.slice(c),r.append(u)}return r}var Ap,Lp=function(e){(0,Pf.Z)(n,e);var t=(0,Lf.Z)(n);function n(e){var r;return(0,Bf.Z)(this,n),(r=t.call(this)).line=e,r}var r=n.prototype;return r.eq=function(e){return this.line===e.line},r.toDOM=function(){var e=document.createElement("div");return e.className="cm-diff-gutter-element-fallback",e.innerText=this.line.toString(),e},n}(Ur.SJ),Up=function(e){(0,Pf.Z)(n,e);var t=(0,Lf.Z)(n);function n(e,r){var i;return(0,Bf.Z)(this,n),(i=t.call(this)).elementClass="cm-diff-gutter-block",i.lines=e,r&&(i.preceding=r),i}var r=n.prototype;return r.eq=function(e){var t,n,r,i;if((null===(t=this.lines)||void 0===t?void 0:t.length)!==(null===e||void 0===e||null===(n=e.lines)||void 0===n?void 0:n.length))return!1;if((null===(r=this.preceding)||void 0===r?void 0:r.length)!==(null===e||void 0===e||null===(i=e.preceding)||void 0===i?void 0:i.length))return!1;if(this.preceding&&e.preceding)for(var o=0;o<this.preceding.length;o++){var a=this.preceding[o],l=e.preceding[o];if(a.height!==l.height||a.left!==l.left||a.right!==l.right)return!1}if(this.lines&&e.lines)for(var c=0;c<this.lines.length;c++){var u=this.lines[c],s=e.lines[c];if(u.height!==s.height||u.left!==s.left||u.right!==s.right)return!1}return!0},r.toDOM=function(){var e,t=this,n=document.createElement("div");if(this.preceding){var r=this.preceding.slice().reverse(),i=0,o=!0,a=!1,l=void 0;try{for(var c,u=r[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var s=c.value;i+=s.height;var d=this.piece(s);d.style.position="absolute",d.style.top="-".concat(i,"px"),n.prepend(d)}}catch(p){a=!0,l=p}finally{try{o||null==u.return||u.return()}finally{if(a)throw l}}}var f=this.lines.map((function(e){return t.piece(e)}));return(e=n).append.apply(e,(0,Xt.Z)(f)),n},r.piece=function(e){var t=e.height,n=e.left,r=e.right,i=document.createElement("span");i.className="cm-diff-gutter-part",null!==n&&(i.innerText=n.toString());var o=document.createElement("span");o.className="cm-diff-gutter-part",null!==r&&(o.innerText=r.toString());var a=document.createElement("div");return a.className="cm-diff-gutter-element",a.style.height="".concat(t,"px"),a.append(i,o),null!==n&&null!==r||(null===r&&a.classList.add("cm-diff-gutter-deleted"),null===n&&a.classList.add("cm-diff-gutter-inserted")),a},n}(Ur.SJ),Xp=(0,Ur.v5)({class:"cm-lineNumbers cm-diff-gutter",markers:function(e){var t=e.viewportLineBlocks,n=[],r=Cp(e.state).compareTo,i=e.state.field(Rp,!1),o=function(e,t){n.push({from:e,to:e,value:t})};if(!r||!i){var a=!0,l=!1,c=void 0;try{for(var u,s=t[Symbol.iterator]();!(a=(u=s.next()).done);a=!0){var d=u.value,f=e.state.doc.lineAt(d.from).number;if(d.type===Ur.kH.Text)o(d.from,new Lp(f));else if(Array.isArray(d.type)){var p=!0,h=!1,v=void 0;try{for(var m,g=d.type[Symbol.iterator]();!(p=(m=g.next()).done);p=!0){var y=m.value;if(y.type===Ur.kH.Text){o(y.from,new Lp(f));break}}}catch(ie){h=!0,v=ie}finally{try{p||null==g.return||g.return()}finally{if(h)throw v}}}}}catch(ie){l=!0,c=ie}finally{try{a||null==s.return||s.return()}finally{if(l)throw c}}return Mr.Xs.of(n,!0)}var Z=!0,b=!1,w=void 0;try{for(var x,k=t[Symbol.iterator]();!(Z=(x=k.next()).done);Z=!0){var C=x.value,S=[],T=e.state.doc.lineAt(C.from).number,E=i.line(T);if(E){var R,G=e.defaultLineHeight,I=E.offset,_=E.isDeleted,D=E.insertions,B=1===T?i.startInsertions():null,P=B?B.length:0,A=B?[]:null;if(Array.isArray(C.type)&&C.type.length>=P+(null!==(R=null===D||void 0===D?void 0:D.length)&&void 0!==R?R:0)+1){for(var L=0;L<C.type.length;L++){var U=C.type[L];if((null===U||void 0===U?void 0:U.type)===Ur.kH.Text){if(B&&A)for(var X=0;X<B.length;X++){var M,N=B[X],O=C.type[L-X-1];A.push({height:null!==(M=null===O||void 0===O?void 0:O.height)&&void 0!==M?M:G,left:null,right:N.number})}if(S.push({height:U.height,left:T,right:_?null:T+I}),D)for(var F=0;F<D.length;F++){var W,H=D[F],V=C.type[L+F+1];S.push({height:null!==(W=null===V||void 0===V?void 0:V.height)&&void 0!==W?W:G,left:null,right:H.number})}break}}o(C.from,new Up(S,A))}else{if(B&&A){var z=!0,j=!1,q=void 0;try{for(var $,Y=B[Symbol.iterator]();!(z=($=Y.next()).done);z=!0){var K=$.value;A.push({height:G,left:null,right:K.number})}}catch(ie){j=!0,q=ie}finally{try{z||null==Y.return||Y.return()}finally{if(j)throw q}}}if(S.push({height:C.height,left:T,right:_?null:T+I}),D){var Q=!0,J=!1,ee=void 0;try{for(var te,ne=D[Symbol.iterator]();!(Q=(te=ne.next()).done);Q=!0){var re=te.value;S.push({height:G,left:null,right:re.number})}}catch(ie){J=!0,ee=ie}finally{try{Q||null==ne.return||ne.return()}finally{if(J)throw ee}}}o(C.from,new Up(S,A))}}}}catch(ie){b=!0,w=ie}finally{try{Z||null==k.return||k.return()}finally{if(b)throw w}}return Mr.Xs.of(n,!0)},lineMarkerChange:function(e){if(e.docChanged)return!0;var t=!0,n=!1,r=void 0;try{for(var i,o=e.transactions[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){if(Cp(i.value).changed)return!0}}catch(a){n=!0,r=a}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}return!1},initialSpacer:function(e){return new Lp(e.state.doc.lines)},updateSpacer:function(e,t){var n=t.state.doc.lines;return Cp(t.state).compareTo?new Up([{height:0,left:n,right:n}]):new Lp(n)}}),Mp="#0053A644",Np="#c93c3733",Op=[Ur.tk.theme({".cm-diff-inserted":{backgroundColor:Mp},".cm-diff-deleted":{backgroundColor:Np},".cm-diff-gutter .cm-diff-gutter-block":{position:"relative",padding:"0"},".cm-diff-gutter-element":{display:"flex",width:"100%",alignItems:"center",columnGap:"8px",padding:"0 6px",borderLeft:"4px solid transparent"},".cm-diff-gutter-part":{display:"inline-block",height:"100%",width:"50%",textAlign:"center"},".cm-diff-gutter-inserted":{backgroundColor:Mp,borderLeftColor:"#0053A6"},".cm-diff-gutter-deleted":{backgroundColor:Np,borderLeftColor:"#c93c37"},".cm-diff-gutter + .cm-foldGutter":{width:"0",transform:"translateX(-12px)",overflow:"visible"},".cm-diff-gutter .cm-diff-gutter-element":{paddingRight:"16px"},".cm-diff-gutter .cm-diff-gutter-element-fallback":{paddingRight:"12px"}}),kp.state,Rp,Bp,Xp,(0,Zp.mi)({openText:"\u25bc",closedText:"\u25b6\ufe0e"})],Fp=n(57988),Wp=function(){function e(t){var n=this;(0,Bf.Z)(this,e),this.view=t,this.overlay=document.createElement("div"),this.overlay.className="cm-overlay-generic",this.overlay.style.pointerEvents="none",this.overlay.style.contain="size style",this.overlay.setAttribute("aria-hidden","true"),this.view.scrollDOM.appendChild(this.overlay),this.elements=new Map,this.measureRequest={key:this,read:function(){var e=[],t=n.view.scrollDOM.getBoundingClientRect(),r=n.view.scrollDOM.scrollTop,i=n.view.scrollDOM.scrollLeft,o=!0,a=!1,l=void 0;try{for(var c,u=n.elements.values()[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var s=c.value,d=s.dom,f=s.pos,p=s.offsetX,h=s.offsetY,v=n.view.coordsAtPos(f),m=n.view.lineBlockAt(f);if(v){var g=m.top-r+t.top+n.view.documentPadding.top,y=Math.round((v.top-g)/n.view.defaultLineHeight)*n.view.defaultLineHeight+g,Z=i+v.left-t.left+p,b=r+y-t.top+h;e.push({dom:d,x:Z,y:b})}else e.push({dom:d,x:null,y:null})}}catch(w){a=!0,l=w}finally{try{o||null==u.return||u.return()}finally{if(a)throw l}}return e},write:function(e){var t=!0,n=!1,r=void 0;try{for(var i,o=function(){var e=i.value,t=e.dom,n=e.x,r=e.y;if(null===n||null===r)return t.style.visibility="hidden",t.style.transition="none","continue";t.style.visibility="",t.style.transform="translate(".concat(n,"px, ").concat(r,"px)"),t.style.transition.startsWith("none")&&requestAnimationFrame((function(){t.style.transition=""}))},a=e[Symbol.iterator]();!(t=(i=a.next()).done);t=!0)o()}catch(l){n=!0,r=l}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}}}}var t=e.prototype;return t.destroy=function(){this.view.scrollDOM.removeChild(this.overlay)},t.map=function(e){if(e.geometryChanged||e.viewportChanged){if(e.docChanged){var t=Array.from(this.elements.values()),n=!0,r=!1,i=void 0;try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value,c=e.changes.mapPos(l.pos,-1,Mr.gc.TrackDel);c?l.pos=c:this.removeElement(l.dom)}}catch(u){r=!0,i=u}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}}this.view.requestMeasure(this.measureRequest)}},t.addElement=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(!this.elements.has(e)){var i={dom:e,pos:t,offsetX:n,offsetY:r};return this.elements.set(e,i),this.overlay.appendChild(e),e.style.visibility="hidden",e.style.position="absolute",e.style.top="0",e.style.left="0",e.style.willChange="transform",e.style.transition="none",this.view.requestMeasure(this.measureRequest),i}},t.removeElement=function(e){this.elements.has(e)&&(this.elements.delete(e),e.parentNode===this.overlay&&this.overlay.removeChild(e))},t.updateElement=function(e,t){var n=t.pos,r=t.offsetX,i=t.offsetY,o=this.elements.get(e);o&&(void 0!==n&&(o.pos=n),void 0!==r&&(o.offsetX=r),void 0!==i&&(o.offsetY=i),this.view.requestMeasure(this.measureRequest))},t.clear=function(){this.elements.clear(),this.overlay.innerHTML=""},e}();!function(e){e[e.Insertion=0]="Insertion",e[e.Deletion=1]="Deletion"}(Ap||(Ap={}));var Hp=Symbol.iterator,Vp=function(){function e(t){(0,Bf.Z)(this,e),this.map=new Map,this.duration=t}var t=e.prototype;return t.set=function(e,t,n,r,i){var o=this.map.get(e);o||(o=new Map,this.map.set(e,o)),o.set(t,{from:e,to:t,time:n,type:r,cursor:i})},t.get=function(e,t){var n=this.map.get(e);if(n)return n.get(t)},t.update=function(t){var n=Date.now(),r=new e(this.duration),i=!0,o=!1,a=void 0;try{for(var l,c=this[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var u=l.value;if(!(n-u.time>this.duration)){var s=t.changes.mapPos(u.from,-1,Mr.gc.TrackDel),d=t.changes.mapPos(u.to,-1,Mr.gc.TrackDel);if(null!==s&&null!==d){var f=u.cursor;t.docChanged&&(f=!1),r.set(s,d,u.time,u.type,f)}}}}catch(p){o=!0,a=p}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}return t.changes.iterChangedRanges((function(e,t,i,o){var a=i!==o?Ap.Insertion:Ap.Deletion;r.set(i,o,n,a,!0)}),!0),r},t.cursors=function(){var e,t,n,r,i,o,a;return(0,lt.__generator)(this,(function(l){switch(l.label){case 0:e=!0,t=!1,n=void 0,l.label=1;case 1:l.trys.push([1,6,7,8]),r=this[Symbol.iterator](),l.label=2;case 2:return(e=(i=r.next()).done)?[3,5]:(o=i.value).cursor?[4,{type:o.type,pos:o.to}]:[3,4];case 3:l.sent(),l.label=4;case 4:return e=!0,[3,2];case 5:return[3,8];case 6:return a=l.sent(),t=!0,n=a,[3,8];case 7:try{e||null==r.return||r.return()}finally{if(t)throw n}return[7];case 8:return[2]}}))},t[Hp]=function(){var e=[],t=!0,n=!1,r=void 0;try{for(var i,o=this.map.values()[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value,l=!0,c=!1,u=void 0;try{for(var s,d=a.values()[Symbol.iterator]();!(l=(s=d.next()).done);l=!0){var f=s.value;e.push(f)}}catch(p){c=!0,u=p}finally{try{l||null==d.return||d.return()}finally{if(c)throw u}}}}catch(p){n=!0,r=p}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}return e[Symbol.iterator]()},e}(),zp=1e3,jp="cm-flash-insertion",qp="cm-flash-deletion",$p="cm-flash-element",Yp=Ur.tk.theme((0,i.Z)({},".".concat(jp,", .").concat(qp),{display:"inline-block"}));function Kp(e){return Ur.p.mark({class:qp,tagName:$p,attributes:{"data-time":e.toString()}})}function Qp(e,t){var n=e===Ap.Insertion?"rgba(0, 100, 255, 1)":"rgba(255, 32, 32, 1)",r=document.createElement("div");return r.style.width="3px",r.style.height=t,r.style.borderRadius="1px",r.style.backgroundColor=n,r.animate&&r.animate({opacity:[1,0]},{duration:500,delay:400,fill:"forwards"}),r}var Jp=function(e){(0,Pf.Z)(n,e);var t=(0,Lf.Z)(n);function n(){return(0,Bf.Z)(this,n),t.apply(this,arguments)}var r=n.prototype;return r.isNested=function(){for(var e=this.parentElement;e&&!e.classList.contains("cm-line");){if((0,za.Z)(e,n)&&e.type===this.type)return!0;e=e.parentElement}return!1},r.stop=function(){var e,t;null===(e=this.animation)||void 0===e||null===(t=e.cancel)||void 0===t||t.call(e)},r.play=function(){var e=this.isPlaying;if(this.stop(),!this.isNested()){var t=Date.now()-parseInt(this.getAttribute("data-time")||"0",10);if(!(t>zp)){var n=this.type===Ap.Insertion?"rgba(100, 255, 0, 0.3)":"rgba(255, 32, 32, 0.25)",r={backgroundColor:e?[n,n,"transparent"]:["transparent",n,"transparent"],offset:[0,.05,1]},i={id:"cm-flash-anim",duration:zp,easing:"ease-in-out",delay:-t};this.animate&&(this.animation=this.animate(r,i))}}},r.connectedCallback=function(){this.play()},r.attributeChangedCallback=function(e,t,n){"data-time"===e&&n&&this.play()},(0,Fp.Z)(n,[{key:"type",get:function(){return this.classList.contains(jp)?Ap.Insertion:Ap.Deletion}},{key:"isPlaying",get:function(){var e;return"running"===(null===(e=this.animation)||void 0===e?void 0:e.playState)}}],[{key:"observedAttributes",get:function(){return["data-time"]}}]),n}((0,Af.Z)(HTMLElement));customElements.get($p)||customElements.define($p,Jp);var eh=function(){function e(t){(0,Bf.Z)(this,e),this.view=t,this.prevFlashes=new Vp(zp),this.decorations=Ur.p.set([]),this.hasRenderedOnce=!1,this.overlay=new Wp(t)}var t=e.prototype;return t.destroy=function(){this.overlay.destroy()},t.update=function(e){if(this.hasRenderedOnce){var t,n=this.prevFlashes.update(e),r=[],i=!0,o=!1,a=void 0;try{for(var l,c=n[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var u=l.value;switch(u.type){case Ap.Insertion:r.push({from:u.from,to:u.to,value:(t=u.time,Ur.p.mark({class:jp,tagName:$p,attributes:{"data-time":t.toString()}}))});break;case Ap.Deletion:var s=e.state.wordAt(u.from);s&&r.push({from:s.from,to:u.to,value:Kp(u.time)})}}}catch(w){o=!0,a=w}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}this.overlay.clear();var d=this.view.defaultLineHeight.toString()+"px",f=!0,p=!1,h=void 0;try{for(var v,m=n.cursors()[Symbol.iterator]();!(f=(v=m.next()).done);f=!0){var g=v.value,y=g.type,Z=g.pos,b=Qp(y,d);this.overlay.addElement(b,Z)}}catch(w){p=!0,h=w}finally{try{f||null==m.return||m.return()}finally{if(p)throw h}}this.prevFlashes=n,this.decorations=Ur.p.set(r,!0)}else e.docChanged&&(this.hasRenderedOnce=!0)},e}(),th=Ur.lg.fromClass(eh,{decorations:function(e){return e.decorations}}),nh=Mr.Wl.lowest([Yp,th]),rh=n(74121),ih=n(52491),oh=n(20864),ah=function(){function e(t){(0,Bf.Z)(this,e),this.changes=[],this.forward=[],this.inverted=[],this.locations=[];var n=!0,r=!1,i=void 0;try{for(var o,a=this,l=function(){var e=o.value,t=e.changes,n=e.invertedChanges,r=null,i=!1;t.iterChangedRanges((function(e,t,n,o){i||(r||(r=o),n!==o&&(i=!0))})),a.forward.push(t),a.inverted.push(n),a.locations.push(r)},c=t[Symbol.iterator]();!(n=(o=c.next()).done);n=!0)l()}catch(u){r=!0,i=u}finally{try{n||null==c.return||c.return()}finally{if(r)throw i}}}var t=e.prototype;return t.slice=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.length;if(e>this.length||t>this.length||e<0||t<0)throw new Error("Invalid version range");if(e===t){if(0===this.length)return[Mr.as.empty(0),null];var n=this.forward[e].newLength;return[Mr.as.empty(n),null]}var r,i=lh(e<t?this.forward.slice(e,t):this.inverted.slice(t,e).reverse()),o=e<t?e:t-1,a=null!==(r=this.locations[o])&&void 0!==r?r:null;return null!==a&&a>i.newLength&&(a=i.newLength),[i,a]},t.get=function(e){if(e>this.length||e<0)throw new Error("Invalid version");return this.changes[e]},t.documentFor=function(e){if(e>this.length||e<0)throw new Error("Invalid version");if(0===this.length)return"";var t=(0,o.Z)(this.slice(0,e),1)[0],n=Mr.xv.of([""]);return t.apply(n).sliceString(0)},(0,Fp.Z)(e,[{key:"length",get:function(){return this.forward.length}}]),e}();function lh(e){if(0===e.length)return Mr.as.empty(0);if(1===e.length)return e[0];var t=(0,Dn.Z)(e),n=t[0],r=t.slice(1),i=n,o=!0,a=!1,l=void 0;try{for(var c,u=r[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var s=c.value;i=i.compose(s)}}catch(d){a=!0,l=d}finally{try{o||null==u.return||u.return()}finally{if(a)throw l}}return i}function ch(e,t){var n=(0,a.useMemo)((function(){return(null===t||void 0===t?void 0:t.changes)?new ah(t.changes):null}),[null===t||void 0===t?void 0:t.changes]),r=(0,a.useMemo)((function(){return n?n.documentFor(n.length):null}),[n]),i=(0,a.useRef)({current:-1,next:0,pending:!1});(0,a.useEffect)((function(){if(e)return function(){i.current.pending=!1,i.current={current:-1,next:0,pending:!1}}}),[e]),(0,a.useEffect)((function(){if(e&&t&&n){t.comparing?Sp(e,r):Sp(e,null);var a=i.current;a.next=t.version,a.pending||a.current===a.next||(a.pending=!0,requestAnimationFrame((function(){!1!==a.pending&&(a.pending=!1,e&&n&&a.current!==a.next&&(!function(e,t,n,r){var i=(0,o.Z)(t.slice(n+1,r+1),2),a=i[0],l=i[1];if(a.length!==e.state.doc.length){var c=(0,o.Z)(t.slice(0,r+1),1)[0];if(c.length!==e.state.doc.length)throw new Error("Unresolvable mismatch between changes and document");return e.dispatch({changes:{from:0,to:e.state.doc.length}}),void e.dispatch({changes:c})}e.dispatch({changes:a,effects:l?Ur.tk.scrollIntoView(l,{yMargin:10}):void 0})}(e,n,a.current,a.next),a.current=a.next))})))}}),[e,t,n,r])}var uh=n(88253),sh=[nh,Op];function dh(e){var t=e.filePath,n=(0,Tf.bA)(),i=(0,Li.Z)(),o=i.ref,l=i.view;(0,rh.VD)(l),(0,Tf._H)(l);var c=(0,Vf.j)();(0,ih.Y)({view:l}),ch(l,n);var u=(0,Id.useRouter)(),s=(0,M.Vg)(u),d=uh.U.use(s),f=(0,a.useMemo)((function(){return[d,sh]}),[d]);return(0,r.tZ)("div",{css:oh.ev,children:(0,r.tZ)("div",{css:oh.ac,children:n&&0===n.count?(0,r.tZ)(fh,{}):(0,r.tZ)("div",{css:oh.ac,children:(0,r.tZ)(Ai.Z,{ref:o,css:oh.Mp,filePath:t,extensions:f,initializing:!n,onException:function(e){c(e,"viewer-codemirror")},readOnly:!0,noHistory:!0,hideGutter:!0})})})})}function fh(){return(0,r.tZ)("div",{css:[oh.ac,{display:"flex",alignItems:"center",justifyContent:"center"}],children:(0,r.tZ)("span",{children:"This file has no history."})})}var ph={Content:function(e){var t=e.pane,n=e.options;return(0,r.tZ)(hh,(0,at.Z)((0,N.Z)({},t.data),{performPaneOperation:n.performPaneOperation}))},Icon:function(e){var t=e.size;return(0,r.tZ)(di.Z,{size:t})},getTitle:function(e){return e.data.path?"History - ".concat((0,v.UO)(e.data.path)):"History - no file open"}};function hh(e){var t=e.path,n=e.performPaneOperation,i=(0,a.useState)((function(){return(0,st.MT)()}))[0],o=(0,a.useState)((function(){return(0,st.MT)()}))[0],l=(0,Ut.Mp)({path:t,performPaneOperation:n});(0,S.L5)((function(){if(l)return{commands:l}}),[l]);var c=(0,xt.Z)((function(){return function(){n({operation:"replace",pane:{type:"codeEditor",data:{path:t}}})}}),[t,n]);return t?(0,r.tZ)(rh.Cl.Provider,{value:i,children:(0,r.tZ)(Tf.ox.Provider,{value:o,children:(0,r.BX)("div",{css:{position:"relative",display:"flex",flexDirection:"column",overflowY:"hidden",height:"100%",width:"100%"},children:[(0,r.tZ)(Ut.HK,{path:t,performPaneOperation:n}),(0,r.tZ)(dh,{filePath:t}),(0,r.tZ)(gp,{filePath:t,onCloseHistory:c})]})})}):null}var vh=n(1050),mh=n(91715),gh=n.n(mh),yh=n(89025),Zh=n(86785),bh=(0,b.X)({create:[g.l0.colWithGap(8),g.l0.p(8)],pedit:{width:"100%",height:"100%"},canvas:{width:"100%",height:"100%",outline:"none",position:"absolute",top:0,left:0},upgradeButton:[g.l0.position.absolute,g.l0.top(8),g.l0.left("50%"),{transform:"translateX(-50%)"}]});function wh(e){var t=e.data,n=e.onSave,i=a.useRef(null),l=a.useRef(null),c=(0,d.Z)().fs,u=(0,Ue.Z)(),s=u.showError,p=u.showConfirm,h=(0,o.Z)(a.useState(!1),2),v=h[0],m=h[1],g=(0,f.Z)((function(){var e=i.current;if(!e)return null;e.width=e.offsetWidth,e.height=e.offsetHeight;var t=e.getContext("2d");t&&(t.imageSmoothingEnabled=!1)}),{type:"debounce",wait:100});return a.useEffect((function(){var e=i.current;if(e){e.width=e.offsetWidth,e.height=e.offsetHeight;var r=gh()({canvas:e,data:t}),o=function(){return n(r.save())};return r.on("change",o),r.on("save",o),r.on("export",(function(){return m(!0)})),l.current=r,e.focus(),function(){r&&r.cleanUp(),l.current&&(l.current=null)}}}),[t,n,i]),(0,r.BX)(r.HY,{children:[(0,r.tZ)("canvas",{css:bh.canvas,ref:function(e){i.current=e,g(e)},tabIndex:0}),(0,r.tZ)($u.u,{isOpen:v,onRequestClose:function(){return m(!1)},children:(0,r.tZ)(yh.Z,{prompt:"Export",desc:"What name to give to the exported file?",placeholder:"filename",type:"text",onCancel:function(){return m(!1)},onConfirm:function(e){if(l.current){var t="".concat(e,".png"),n=l.current.curFrame().toPNG();c.writeFile(t,Yi.Z.from(n)).then((function(e){e.error?s("Failed to write to file ".concat(t)):(p("Successfully exported to ".concat(t)),m(!1))}))}else m(!1)}})})]})}function xh(e){var t=e.activeFile,n=(0,d.Z)().fs,i=(0,o.Z)(a.useState(!0),2),l=i[0],c=i[1],u=(0,o.Z)(a.useState(null),2),s=u[0],f=u[1],p=(0,Ue.Z)().showError,h=t.endsWith(".kbmsprite");a.useEffect((function(){var e=!1;function r(){return(r=(0,ot.Z)((function(){var r,i,o;return(0,lt.__generator)(this,(function(a){switch(a.label){case 0:return[4,n.readFile(t)];case 1:return r=a.sent(),c(!1),e?[2]:r.error?(p("failed to read ".concat(t)),[2]):(i=r.content.toString(),o=i&&JSON.parse(i),f(h?(0,Zh.C)(o):o),[2])}}))}))).apply(this,arguments)}return function(){r.apply(this,arguments)}(),function(){e=!0}}),[n,t,p,h]);var v=a.useCallback(function(){var e=(0,ot.Z)((function(e){return(0,lt.__generator)(this,(function(r){switch(r.label){case 0:return h?[4,(0,Zh.u)(e)]:[3,2];case 1:e=r.sent(),r.label=2;case 2:return[4,n.writeFile(t,Yi.Z.from(JSON.stringify(e)))];case 3:return r.sent().error&&p("Failed to save ".concat(t,", please try again")),[2]}}))}));return function(t){return e.apply(this,arguments)}}(),[n,t,p,h]);return l?(0,r.tZ)(ze.Z,{}):s?(0,r.tZ)(wh,{data:s,onSave:v}):(0,r.tZ)(kh,{onCreate:function(e){return f(e)}})}function kh(e){var t=e.onCreate,n=(0,o.Z)(a.useState(""),2),i=n[0],l=n[1],c=(0,o.Z)(a.useState(""),2),u=c[0],s=c[1],d=Number(i),f=Number(u),p=d>0&&f>0;return(0,r.BX)(y.G,{css:bh.create,children:[(0,r.tZ)(Z.xv,{variant:"subheadDefault",multiline:!1,children:"Create a Pedit file"}),(0,r.tZ)(Bn.II,{placeholder:"width",value:i,onChange:function(e){return l(e.target.value)}}),(0,r.tZ)(Bn.II,{placeholder:"height",value:u,onChange:function(e){return s(e.target.value)}}),(0,r.tZ)(je.zx,{text:"Create",disabled:!p,onClick:function(){t({width:Math.ceil(d),height:Math.ceil(f)})}})]})}var Ch={Content:function(e){var t=e.pane,n=e.options.performPaneOperation;return(0,r.tZ)(Sh,{path:t.data.path,performPaneOperation:n})},Icon:function(e){var t=e.size;return(0,r.tZ)(vh.Z,{size:t})},getTitle:function(e){return(0,v.UO)(e.data.path)}};function Sh(e){var t=e.path,n=e.performPaneOperation,i=(0,Ut.Mp)({path:t,performPaneOperation:n});return(0,S.L5)((function(){if(i)return{commands:i}}),[i]),(0,r.BX)(r.HY,{children:[(0,r.tZ)(Ut.HK,{path:t,performPaneOperation:n}),(0,r.tZ)(Ut.VY,{children:(0,r.tZ)(xh,{activeFile:t})})]})}var Th=n(71603),Eh=n(53472),Rh={Content:function(e){var t=e.options,n=function(){var e=i().find((function(e){var t=(0,o.Z)(e,2);t[0];return"runnerOutput"===t[1].type}));if(e)return e[0]},i=(0,Eh.nC)(),a=(0,S.dr)();return(0,r.tZ)(y.G,{css:[g.l0.p(8),P.F3],children:(0,r.tZ)(Th.Z,{getRunnerOutput:function(){var e=n();if(e||t.performPaneOperation({operation:"open",secondary:!0,pane:{type:"runnerOutput"}}),e=n()){var r=a(e);if("runnerOutput"===(null===r||void 0===r?void 0:r.type))return r}}})})},Icon:function(e){var t=e.size;return(0,r.tZ)(J.Z,{size:t})},getTitle:function(){return"Unit Tests"}},Gh=n(12470),Ih=n(14292),_h=n(22642),Dh=n(16988),Bh=n(2954),Ph=n(6009),Ah=n(21225),Lh=function(e){var t=e.title,n=e.json,i=e.initialExpanded,o=void 0===i||i,l=(0,a.useState)(o),c=l[0],u=l[1];return(0,r.tZ)(ir.Q,{expanded:c,onClick:function(){return u((function(e){return!e}))},headerContent:(0,r.tZ)(y.G,{css:[g.l0.rowWithGap(8),g.l0.align.center],children:(0,r.tZ)(Z.xv,{variant:"subheadDefault",multiline:!1,children:t})}),children:(0,r.tZ)(y.G,{css:[g.l0.p(12),g.l0.colWithGap(8),g.l0.height("100%")],children:(0,r.tZ)(Bh.Z,{json:n})})})},Uh=function(e){var t=e.title,n=e.text,i=(0,a.useState)(!0),o=i[0],l=i[1];return(0,r.tZ)(ir.Q,{expanded:o,onClick:function(){return l((function(e){return!e}))},headerContent:(0,r.tZ)(y.G,{css:[g.l0.rowWithGap(8),g.l0.align.center],children:(0,r.tZ)(Z.xv,{variant:"subheadDefault",multiline:!1,children:t})}),children:(0,r.tZ)(y.G,{css:[g.l0.p(12),g.l0.colWithGap(8),g.l0.height("100%")],children:(0,r.tZ)(Z.xv,{css:[g.l0.fontSize(16),{whiteSpace:"pre-wrap"}],children:n})})})},Xh=n(49520),Mh=n(6394),Nh=n(16022),Oh=n(98059);function Fh(){var e=(0,fr.Z)(["\n  query AdminPanelGitView {\n    currentUser {\n      id\n      gitHubInfo {\n        accessToken\n        installations {\n          id\n          type\n          avatarUrl\n          name\n        }\n        userInfo {\n          name\n          email\n          avatarUrl\n        }\n      }\n    }\n  }\n"]);return Fh=function(){return e},e}var Wh={},Hh=(0,pr.Ps)(Fh());function Vh(e){var t=e.event,n=t.input,i=t.output,o=t.error,l=t.start,c=t.end,u=t.cached,s=(0,a.useState)(!0),d=s[0],f=s[1],p=(0,a.useCallback)((function(){return f((function(e){return!e}))}),[]),h="bash"===n[0]&&"-c"===n[1]?n.slice(2).join(" "):n.join(" "),v=i.trimEnd();return(0,r.BX)(y.G,{css:[(0,Nh.ec)(o?"negative":"positive"),u?{opacity:.75}:void 0,g.l0.borderRadius(8)],children:[(0,r.BX)(y.G,{onClick:p,onKeyDown:function(e){"Enter"!==e.key&&" "!==e.key||p()},tabIndex:0,css:[g.l0.rowWithGap(4),g.l0.justify.spaceBetween,g.l0.py(4),g.l0.px(8),g.l0.font.code,g.l0.cursor.pointer],children:[(0,r.BX)("span",{css:{whiteSpace:"pre-wrap",wordBreak:"break-word"},children:["$ ",h]}),(0,r.BX)("span",{css:[g.l0.color.foregroundDimmer,g.l0.flex.shrink(0)],children:[o?(0,r.tZ)("span",{css:[g.l0.mr(16)],children:o}):null,u?(0,r.tZ)("span",{children:"CACHED"}):(0,r.BX)("span",{children:[c-l," ms"]})]})]}),d?null:(0,r.tZ)(y.G,{css:[g.l0.px(2),g.l0.pb(2),g.l0.borderRadius(0,0,8,8)],children:(0,r.tZ)($.Tg,{elevated:!0,css:[g.l0.p(8),g.l0.borderRadius(8)],children:(0,r.tZ)(Mh.Z,{code:v})})})]})}var zh=n(58424),jh=n(68282),qh=n(99453);function $h(e){var t=e.t,n=e.children;return(0,r.BX)("span",{css:{display:"flex",alignItems:"flex-start",columnGap:"0.5rem"},children:[(0,r.BX)(Z.xv,{css:{minWidth:"8em"},multiline:!1,children:[t,":"," "]}),(0,r.tZ)("span",{children:n})]})}var Yh=n(44171),Kh=n(91476);function Qh(e){return"in"===e.dir?(0,r.tZ)(y.G,{css:g.l0.color.greenStrongest,children:"\u2192"}):"out"===e.dir?(0,r.tZ)(y.G,{css:g.l0.color.redStrongest,children:"\u2190"}):(0,r.tZ)(y.G,{css:g.l0.color.magentaStrongest,children:"\u26a0"})}var Jh=a.memo((function(e){var t,n=e.log,i=e.timeRef,l=e.setTimeRef,c=null!==(t=n.cmd.channel)&&void 0!==t?t:0,u=(0,a.useMemo)((function(){var e=(0,N.Z)({},n.cmd);return delete e.channel,e}),[n]),s=JSON.stringify(u,null,2),d=i?n.timestamp-i:n.timestamp,f=(0,o.Z)((0,qh.Z)(!0),2),p=f[0],h=f[1];return(0,r.BX)(y.G,{css:[g.l0.my(4),g.l0.mx(4)],children:[(0,r.tZ)(y.G,{role:"button",onClick:h,onKeyDown:h,tabIndex:0,css:[n.highlighted?g.l0.backgroundColor.accentPositiveDimmer:null,g.l0.flex.row,g.l0.rowWithGap(4),{"&:hover":{cursor:"pointer",".link":{textDecoration:"underline"}}}],children:(0,r.BX)(y.G,{css:[g.l0.flex.grow(1),g.l0.rowWithGap(4),{maxWidth:"100%"}],children:[(0,r.tZ)(Z.xv,{className:"icon",multiline:!1,children:Qh(n)}),(0,r.tZ)(Z.xv,{className:"link",multiline:!1,children:(0,r.BX)("code",{children:["#",c," - ",n.channel.service,n.channel.name?"::".concat(n.channel.name):""]})}),(0,r.tZ)(Z.xv,{css:[g.l0.flex.growAndShrink(1),{opacity:.5}],multiline:!1,children:(0,r.tZ)("code",{style:{overflow:"hidden",textOverflow:"ellipsis"},children:s})}),null!=d&&(0,r.tZ)(y.G,{onClick:function(){l(n.timestamp)},css:{opacity:.5},children:(0,r.tZ)(Z.xv,{css:[g.l0.fontSize(13),{cursor:"pointer"}],multiline:!1,children:n.timestamp===i?"(reference)":(0,r.BX)(r.HY,{children:[d.toFixed(0)," ms"]})})})]})}),!p&&(0,r.tZ)(r.HY,{children:void 0!==u&&(0,r.tZ)(Kh.g,{name:"cmd",src:u})})]})})),ev=function(e){var t=e.logs,n=e.timeRef,i=e.setTimeRef;return(0,r.BX)("div",{className:"log-list",children:[t.map((function(e){return(0,r.tZ)(Jh,{log:e,timeRef:n,setTimeRef:i},e.index)})),(0,r.tZ)("div",{className:"bottom-anchor"})]})};function tv(e){return"in"===e||"out"===e||""===e}var nv=function(e){var t=e.filters,n=e.updateFilters;return(0,r.BX)(y.G,{css:g.l0.colWithGap(4),children:[(0,r.tZ)(Z.xv,{variant:"subheadDefault",multiline:!1,children:"Regex (regex,flags):"}),(0,r.tZ)(Bn.II,{id:"regex",onChange:function(e){var t=null;if(e.currentTarget.value){var r=(0,o.Z)(e.currentTarget.value.split(","),2),i=r[0],a=r[1];try{t=new RegExp(i,a)}catch(l){}}n({regexp:t})},placeholder:"\\w+,gi"}),(0,r.tZ)(Z.xv,{variant:"subheadDefault",multiline:!1,children:"Directions:"}),(0,r.tZ)(Td.E,{css:g.l0.rowWithGap(16),name:"direction",value:t.direction,onChange:function(e){var t=e.target.value;n({direction:tv(t)?t:""})},children:[{val:"",text:"Both"},{val:"in",text:"In"},{val:"out",text:"Out"}].map((function(e){return(0,r.BX)(y.G,{css:[g.l0.rowWithGap(8)],children:[(0,r.tZ)(Td.Y,{id:e.val,value:e.val}),(0,r.tZ)("label",{htmlFor:e.val,children:e.text})]},e.val)}))}),(0,r.tZ)(Z.xv,{variant:"subheadDefault",multiline:!1,children:"Filter style:"}),(0,r.tZ)(Td.E,{css:g.l0.rowWithGap(16),name:"filter-style",value:t.highlightOnly?"highlight":"filter",onChange:function(e){return n({highlightOnly:"highlight"===e.target.value})},children:[{val:"highlight",text:"Highlight"},{val:"filter",text:"Filter"}].map((function(e){return(0,r.BX)(y.G,{css:[g.l0.rowWithGap(8)],children:[(0,r.tZ)(Td.Y,{id:e.val,value:e.val}),(0,r.tZ)("label",{htmlFor:e.val,children:e.text})]},e.val)}))})]})},rv=n(48306),iv=n.n(rv),ov=n(63763),av=n(89479),lv=n(11969),cv=n(94971),uv=n(27522),sv=n(19791);function dv(){var e=(0,fr.Z)(["\n  fragment AdminPanelRepl on Repl {\n    id\n    title\n    description\n    isProject\n    isPrivate\n    timeCreated\n    timeUpdated\n    slug\n    url\n    language\n    user {\n      id\n    }\n    config {\n      isServer\n      isVnc\n    }\n    isRenamed\n    isProjectFork\n    folderId\n    isOwner\n    origin {\n      id\n    }\n    source {\n      release {\n        id\n        repl {\n          id\n          url\n          templateLabel\n        }\n      }\n    }\n  }\n"]);return dv=function(){return e},e}function fv(){var e=(0,fr.Z)(["\n  query AdminPanelReplView($replId: String!) {\n    repl(id: $replId) {\n      ...AdminPanelRepl\n    }\n  }\n  ","\n"]);return fv=function(){return e},e}var pv={},hv=(0,pr.Ps)(dv()),vv=(0,pr.Ps)(fv(),hv);var mv=n(49287),gv=n(47726),yv=n(29457);function Zv(e){var t=e.sessionId,n=(0,a.useState)(!1),i=n[0],o=n[1],l=(0,a.useState)(""),c=l[0],u=l[1],s=(0,a.useState)(!1),d=s[0],f=s[1],p=(0,Ue.Z)().showConfirm,h=(0,Ki.H)();return null==t?(0,r.tZ)(y.G,{children:(0,r.tZ)(Z.xv,{multiline:!1,children:"Something went wrong... no RUM session found... Try refreshing the page"})}):(0,r.BX)(y.G,{css:[g.l0.colWithGap(8)],children:[(0,r.BX)(Z.xv,{variant:"small",multiline:!1,children:["RUM Session ID: ",t]}),(0,r.tZ)(Z.xv,{variant:"headerDefault",multiline:!1,children:"Submit an Issue"}),(0,r.BX)(y.G,{css:[g.l0.colWithGap(16)],children:[(0,r.tZ)(Bn.B,{id:h("message"),placeholder:"What can we do better?",value:c,onChange:function(e){return u(e.target.value)},disabled:i}),(0,r.BX)(y.G,{css:[g.l0.rowWithGap(8)],children:[(0,r.tZ)(ud.X,{id:h("issueInRecording"),checked:d,onChange:function(e){return f(e.target.checked)}}),(0,r.tZ)("label",{htmlFor:h("issueInRecording"),children:(0,r.tZ)(Z.xv,{multiline:!1,children:"Issue is demoed in recording"})})]}),(0,r.tZ)(je.zx,{onClick:function(){var e=Ei()();o(!0),(0,yv.fc)({name:"replitOnReplit:issue",context:{message:c,issueInRecording:d,customEventId:e}}),p("Issue submitted! Have a cookie \ud83c\udf6a",5e3),setTimeout((function(){o(!1),u(""),f(!1)}),5e3)},text:"Submit",disabled:i||0===c.trim().length,colorway:"primary"})]})]})}var bv,wv;!function(e){e.Repl="repl",e.Logs="logs",e.LSP="lsp",e.AI="ai",e.GhostwriterChat="aiChat",e.AST="ast",e.Git="git",e.History2="history2",e.Metadata="metadata",e.Override="override",e.DDRum="rum"}(bv||(bv={}));var xv=(wv={},(0,i.Z)(wv,bv.Repl,(function(){var e,t,n,i,o,a,l,c,u=(0,Xe.Z)(),s=function(e){var t=(0,N.Z)({},pv,e);return hr.a(vv,t)}({variables:{replId:u}}).data,d="Repl"===(null===s||void 0===s?void 0:s.repl.__typename)?JSON.parse(JSON.stringify(s.repl)):void 0;d&&(delete d.__typename,null===(e=d.user)||void 0===e||delete e.__typename,null===(t=d.origin)||void 0===t||delete t.__typename,delete d.config.__typename,null===(n=d.source)||void 0===n||delete n.__typename,null===(i=d.source)||void 0===i||null===(o=i.release)||void 0===o||delete o.__typename,null===(a=d.source)||void 0===a||null===(l=a.release)||void 0===l||null===(c=l.repl)||void 0===c||delete c.__typename);return(0,r.BX)(y.G,{css:[g.l0.colWithGap(16),g.l0.p(4)],children:[(0,r.tZ)(mv.Z,{replId:u}),(0,r.tZ)("div",{className:"jsx-3187c500f6b377b0",children:d?(0,r.tZ)(Bh.Z,{json:d}):null}),(0,r.tZ)(iv(),{id:"3187c500f6b377b0",children:"pre.jsx-3187c500f6b377b0{white-space:pre-wrap;word-wrap:break-word}"})]})})),(0,i.Z)(wv,bv.Logs,(function(e){var t=e.isHidden,n=(0,o.Z)((0,qh.Z)(!1),2),i=n[0],l=n[1],c=(0,a.useState)(null),u=c[0],s=c[1],d=(0,He.Dv)(Yh.Sj),f=(0,o.Z)((0,He.KO)(Yh.a0),2),p=f[0],h=f[1],v=(0,o.Z)((0,He.KO)(Yh.ot),2),m=v[0],Z=v[1],b=(0,He.b9)(Yh.UB);return t?null:(0,r.BX)(y.G,{css:[g.l0.colWithGap(8)],children:[(0,r.BX)(y.G,{css:[g.l0.colWithGap(8),g.l0.position.sticky,g.l0.top(0),g.l0.px(4),g.l0.pb(8),g.l0.backgroundColor.backgroundDefault],children:[(0,r.tZ)(je.zx,{colorway:p?void 0:"positive",onClick:function(){h((function(e){return!e}))},text:p?"Stop logging goval":"Start logging goval"}),(0,r.BX)(y.G,{css:[g.l0.rowWithGap(4),g.l0.justify.spaceBetween],children:[(0,r.tZ)(je.zx,{onClick:l,text:i?"Hide filters":"Show filters"}),u?(0,r.tZ)(je.zx,{onClick:function(){return s(null)},text:"Reset Time Ref"}):null,(0,r.tZ)(ce.h,{alt:"Download as JSON",onClick:function(){var e="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(d)),t=document.createElement("a");t.setAttribute("href",e);var n=(new Date).toISOString();t.setAttribute("download","logs-".concat(n.slice(0,n.indexOf(".")).replaceAll("-","").replaceAll(":",""),".json")),t.click()},size:32,children:(0,r.tZ)($e.Z,{})}),(0,r.tZ)(je.zx,{colorway:"negative",onClick:function(){return b()},text:"Clear logs"})]}),i?(0,r.tZ)(nv,{filters:m,updateFilters:function(e){Z((0,N.Z)({},m,e))}}):null]}),(0,r.tZ)(y.G,{css:[g.l0.flex.growAndShrink(1),g.l0.overflow("auto"),g.l0.height("100%")],children:(0,r.tZ)(ev,{logs:d,timeRef:u,setTimeRef:s})})]})})),(0,i.Z)(wv,bv.LSP,Kh.L),(0,i.Z)(wv,bv.AI,Xh.ho),(0,i.Z)(wv,bv.GhostwriterChat,(function(){var e=(0,Dh.v)(),t=(0,Xe.Z)(),n=(0,Ah.ae)(),i=(0,xr.R3)(),l=(0,pe.Og)(),c=(0,pe.Cd)(),u=(0,o.Z)((0,Ph.Kz)(),1)[0],s=(0,o.Z)((0,Ph.u0)(),1)[0],f="chat-".concat(n,".json"),p=(0,a.useState)(".ghostwriter/".concat(f)),h=p[0],v=p[1],m=(0,d.Z)().fs,b=(0,Ue.Z)().showError,w=(0,o.Z)((0,pe.zu)(),2),x=w[0],k=w[1],C=(0,a.useCallback)((function(){return JSON.stringify({chatModel:e,chatId:n,replId:t,messages:x},null,2)}),[e,n,t,x]),S=(0,a.useCallback)((0,ot.Z)((function(){var e,t,n;return(0,lt.__generator)(this,(function(r){switch(r.label){case 0:e=C(),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,m.writeFile(h,Yi.Z.from(e))];case 2:if((t=r.sent()).error)throw new Error("fs error: ".concat(t.error));return[3,4];case 3:return n=r.sent(),b(n.message),[3,4];case 4:return[2]}}))})),[C,m,h,b]),T=(0,a.useCallback)((0,ot.Z)((function(){var e,t,n;return(0,lt.__generator)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,m.readFile(h)];case 1:if((e=r.sent()).error)throw new Error("fs error: ".concat(e.error));if(t=JSON.parse(e.content.toString()),!Array.isArray(t.messages))throw new Error("invalid chat JSON");return k(t.messages),[3,3];case 2:return n=r.sent(),b(n.message),[3,3];case 3:return[2]}}))})),[h,m,k,b]);return(0,r.tZ)(y.G,{css:g.l0.height("100%"),children:(0,r.BX)(Gh.mQ,{css:[{width:"100%"}],children:[(0,r.BX)(Gh.td,{withDividers:!1,children:[(0,r.tZ)(Gh.OK,{iconLeft:(0,r.tZ)(Ih.Z,{}),children:"File Context"}),(0,r.tZ)(Gh.OK,{iconLeft:(0,r.tZ)(Ih.Z,{}),children:"Debugger"}),(0,r.tZ)(Gh.OK,{iconLeft:(0,r.tZ)(_h.Z,{}),children:"Messages"})]}),(0,r.BX)(Gh.nP,{children:[(0,r.BX)(Gh.x4,{children:[(0,r.tZ)(Lh,{title:"active file",json:i}),(0,r.tZ)(Lh,{title:"last stop reason",json:c}),(0,r.tZ)(Uh,{title:"last prompt",text:l})]}),(0,r.BX)(Gh.x4,{children:[(0,r.tZ)(Lh,{title:"buffered output",json:u}),(0,r.tZ)(Lh,{title:"debug error context",json:s})]}),(0,r.tZ)(Gh.x4,{children:(0,r.BX)(y.G,{css:[g.l0.colWithGap(8),g.l0.m(8)],children:[(0,r.BX)($.Tg,{background:"higher",css:[g.l0.borderRadius(8),g.l0.colWithGap(8),g.l0.p(8)],children:[(0,r.tZ)(Z.xv,{multiline:!1,children:"Chat History"}),(0,r.tZ)(Bn.II,{type:"text",value:h,onChange:function(e){v(e.target.value)}}),(0,r.BX)(y.G,{css:[g.l0.rowWithGap(8),g.l0.flex.wrap],children:[(0,r.tZ)(je.zx,{text:"Download",colorway:"primary",iconLeft:(0,r.tZ)($e.Z,{}),onClick:function(){var e=C(),t="data:text/json;charset=utf-8,"+encodeURIComponent(e),n=document.createElement("a");n.setAttribute("href",t),n.setAttribute("download","".concat(f)),n.click()}}),(0,r.tZ)(je.zx,{text:"Save to Repl",onClick:S,iconLeft:(0,r.tZ)($e.Z,{})}),(0,r.tZ)(je.zx,{text:"Load from Repl",onClick:T,iconLeft:(0,r.tZ)(Eu.Z,{})})]})]}),(0,r.BX)(y.G,{css:[g.l0.colWithGap(8)],children:[(0,r.tZ)("label",{css:g.l0.color.foregroundDimmer,htmlFor:"gw-debug-chatModel",children:"Chat Model"}),(0,r.tZ)(Bn.II,{id:"gw-debug-chatModel",type:"text",readOnly:!0,value:e})]}),(0,r.BX)(y.G,{css:[g.l0.colWithGap(8)],children:[(0,r.tZ)("label",{css:g.l0.color.foregroundDimmer,htmlFor:"gw-debug-replId",children:"Repl Id"}),(0,r.tZ)(Bn.II,{id:"gw-debug-replId",type:"text",readOnly:!0,value:t})]}),(0,r.BX)(y.G,{css:[g.l0.colWithGap(8)],children:[(0,r.tZ)("label",{css:g.l0.color.foregroundDimmer,htmlFor:"gw-debug-chatId",children:"Chat Id"}),(0,r.tZ)(Bn.II,{id:"gw-debug-chatId",type:"text",readOnly:!0,value:n})]})]})})]})]})})})),(0,i.Z)(wv,bv.AST,ih.Z),(0,i.Z)(wv,bv.Git,(function(){var e=(0,a.useState)([]),t=e[0],n=e[1],i=function(e){var t=(0,N.Z)({},Wh,e);return hr.a(Hh,t)}().data,o=(0,U.Z)(Oh.e);return(0,a.useEffect)((function(){o&&n((function(e){return e.length&&e[0].key===o.key?e:[o].concat((0,Xt.Z)(e)).slice(0,100)}))}),[o]),(0,r.BX)(y.G,{css:[g.l0.p(8)],children:[(0,r.BX)($.Tg,{elevated:!0,css:[g.l0.borderRadius(8),g.l0.p(8),g.l0.mb(8)],children:[(0,r.tZ)("span",{children:"Git Service Connection Info"}),(0,r.tZ)("pre",{children:(null===i||void 0===i?void 0:i.currentUser)?JSON.stringify(i,(function(e,t){return"accessToken"===e?"censored":t}),2):"No gitHubInfo"})]}),(0,r.tZ)(y.G,{css:[g.l0.colWithGap(4)],children:t.length?t.map((function(e){return(0,r.tZ)(Vh,{event:e},e.key)})):"No events yet..."})]})})),(0,i.Z)(wv,bv.History2,(function(){var e=(0,U.Z)(Tf.BI)(),t=(0,U.Z)(Tf.Jp)(),n=(0,o.Z)((0,qh.Z)(!1),2),i=n[0],a=n[1];if(!e)return null;var l=e.filePath,c=e.changes,u=e.users,s=e.version,d=e.playing,f=e.count,p=c[s],h=null===u||void 0===u?void 0:u[p.userId],v=p.timestamp,m=i&&t?function(e,t){try{return(0,jh.ed)(e,t).op}catch(n){return n}}(p.changes,t.state.doc.sliceString(0)):null;return(0,r.BX)(y.G,{css:[g.l0.colWithGap(16),g.l0.p(4)],children:[(0,r.BX)(y.G,{css:[g.l0.colWithGap(4)],children:[(0,r.tZ)($h,{t:"File",children:(0,r.tZ)("pre",{children:l})}),(0,r.BX)($h,{t:"Version",children:[s," / ",f-1]}),(0,r.tZ)($h,{t:"Playing",children:(0,r.tZ)(zh.Z,{children:d?"true":"false"})}),(0,r.tZ)($h,{t:"Date",children:(0,r.tZ)(eu.E,{date:v})})]}),h?(0,r.BX)(y.G,{children:[(0,r.tZ)($h,{t:"Author",children:h.username}),(0,r.BX)(y.G,{css:[g.l0.pl(8),g.l0.colWithGap(4)],children:[(0,r.tZ)($h,{t:"ID",children:h.id}),(0,r.tZ)($h,{t:"Name",children:h.username}),(0,r.tZ)($h,{t:"Image",children:(0,r.tZ)("a",{href:h.image,children:h.image})})]})]}):null,(0,r.BX)(y.G,{css:[g.l0.rowWithGap(8),{alignItems:"center"}],children:[(0,r.tZ)(op.Z,{id:"toggleIsShowingChanges",isOn:i,onChange:a}),(0,r.tZ)("label",{children:"Changes"})]}),p?null:"No changes",i&&p?(0,r.tZ)(r.HY,{children:(0,r.BX)(y.G,{children:[(0,r.tZ)($h,{t:"Changeset",children:(0,r.tZ)("pre",{children:JSON.stringify(p,null,2)})}),t?(0,r.tZ)(r.HY,{children:(0,r.BX)(y.G,{css:[g.l0.mt(4)],children:[(0,r.tZ)($h,{t:"OT",children:(0,r.tZ)("pre",{children:JSON.stringify(m,null,2)})}),(0,r.tZ)("p",{children:(0,r.BX)("small",{children:["Note that the OT value is translated ",(0,r.tZ)("em",{children:"back"})," to an operational transformation from the CodeMirror changeset."]})})]})}):null]})}):null]})})),(0,i.Z)(wv,bv.Metadata,(function(){var e=(0,d.Z)().container;(0,av.Z)();var t=e.getConnectionMetadata();if(!t)return(0,r.tZ)("div",{children:"no token yet, wait for connection"});var n=t.token,i=new URL(t.conmanURL).host,o='./conman-repl -t "'.concat(n,'" -u ').concat(i);return(0,r.BX)("div",{className:"jsx-2e9ac5ab034fc317 token-viewer",children:[(0,r.BX)(y.G,{css:g.l0.rowWithGap(2),children:[(0,r.BX)(Z.xv,{css:g.l0.flex.shrink(1),multiline:!1,children:["conman Repl command: ",(0,r.tZ)(zh.Z,{children:o})]}),(0,r.tZ)(ce.h,{alt:"Copy to clipboard",onClick:function(){return(0,Un.Z)(o)},children:(0,r.tZ)(qi.Z,{})})]}),(0,r.BX)("div",{className:"jsx-2e9ac5ab034fc317",children:["metadata:",(0,r.tZ)("pre",{className:"jsx-2e9ac5ab034fc317",children:JSON.stringify(t,null,2)})]}),(0,r.tZ)("br",{className:"jsx-2e9ac5ab034fc317"}),(0,r.tZ)("br",{className:"jsx-2e9ac5ab034fc317"}),(0,r.BX)("div",{className:"jsx-2e9ac5ab034fc317",children:["parsed token:",(0,r.tZ)("pre",{className:"jsx-2e9ac5ab034fc317",children:JSON.stringify((0,ov.he)(t.token),null,2)})]}),(0,r.tZ)("br",{className:"jsx-2e9ac5ab034fc317"}),(0,r.tZ)("br",{className:"jsx-2e9ac5ab034fc317"}),(0,r.tZ)(iv(),{id:"2e9ac5ab034fc317",children:".token-viewer.jsx-2e9ac5ab034fc317{height:100%;overflow:auto;padding:10px}pre.jsx-2e9ac5ab034fc317{white-space:pre-wrap;word-wrap:break-word}"})]})})),(0,i.Z)(wv,bv.Override,(function(){var e=(0,o.Z)(a.useState(lv.Z.get("gurl","string")||""),2),t=e[0],n=e[1],i=(0,o.Z)(a.useState(""),2),l=i[0],c=i[1],u=function(){var e=(0,He.b9)(Vo),t=(0,He.b9)(zo);return(0,a.useCallback)((function(n){if(!n)return e(null),void t(null);e({connectionString:n,databaseId:-1,databaseName:"Admin Override",isFrozen:!1,projectId:"mock-project-id-does-not-exist",__typename:"NeonDatabase"}),t(n)}),[t,e])}();return(0,r.BX)("div",{style:{height:"100%",overflow:"auto"},children:[(0,r.tZ)(cv.ZP,{label:"Custom gurl",placeholder:"ws://localhost:8080",value:t,onChange:function(e){return n(e.currentTarget.value)}}),(0,r.BX)("pre",{children:["metadata override preview:",JSON.stringify((0,sv.t)(t),null,2)]}),(0,r.tZ)("br",{}),(0,r.BX)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,r.tZ)(uv.Z,{color:"positive",onClick:function(){lv.Z.set("gurl",t),window.location.reload()},children:"Set gurl and reload"}),(0,r.tZ)(uv.Z,{color:"orange",onClick:function(){lv.Z.remove("gurl"),window.location.reload()},children:"Unset gurl and reload"})]}),(0,r.tZ)("br",{}),(0,r.tZ)("br",{}),(0,r.tZ)("div",{children:lv.Z.get("gurl","string")?"currently in localStorage: ".concat(lv.Z.get("gurl","string")):'No gurl set in local storage, using default gurl for this user, check "Token" tab for details'}),(0,r.tZ)("br",{}),(0,r.tZ)("br",{}),"Gurl order of precedence:",(0,r.BX)("ol",{style:{margin:20},children:[(0,r.tZ)("li",{children:"\u2018gurl\u2019 in localStorage (set above)"}),(0,r.BX)("li",{children:["If in development webapp and a there\u2019s a response from",(0,r.tZ)("code",{children:"https://currenthost:4563"})," or",(0,r.tZ)("code",{children:"http://currenthost:4560"}),", then it will use that."]}),(0,r.BX)("li",{children:["default is ",(0,r.tZ)("code",{children:"wss://eval.<usercluster>.replit.com"})]})]}),(0,r.BX)(y.G,{css:[g.l0.pt(16),g.l0.border({direction:"top"})],children:[(0,r.tZ)(Z.xv,{multiline:!1,children:"Override Database"}),(0,r.tZ)(cv.ZP,{type:"text",value:l,onChange:function(e){c(e.target.value)}}),(0,r.tZ)(y.G,{css:[g.l0.rowWithGap(8)],children:(0,r.tZ)(uv.Z,{color:"positive",onClick:function(){u(l)},children:"Override Postgres connection string"})})]})]})})),(0,i.Z)(wv,bv.DDRum,(function(){var e,t=null===(e=gv.v.getInternalContext())||void 0===e?void 0:e.session_id,n=gv.v.getInitConfiguration(),i=null!=n&&100===n.sampleRate,o=(0,a.useState)(null!=t),l=o[0],c=o[1];return(0,r.tZ)(y.G,{css:[g.l0.colWithGap(16),g.l0.p(4)],children:i?(0,r.BX)(r.HY,{children:[(0,r.tZ)(je.zx,{onClick:l?function(){gv.v.stopSessionReplayRecording(),document.cookie="_dd_s=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",window.location.href=window.location.href.split("?")[0]}:function(){(0,yv.Oo)({name:"replitOnReplit"}),setTimeout((function(){c(!0)}),1e3)},text:l?"\ud83d\udd34 Recording... Click to stop and reload page":"Start Recording",colorway:l?void 0:"primary",css:(0,N.Z)({},l&&le.p.backgroundPulse(g.TV.redDimmest,g.TV.redDimmer))}),l?(0,r.tZ)(Zv,{sessionId:t}):null]}):(0,r.tZ)(je.zx,{onClick:function(){window.location.href=window.location.href.split("?")[0].split("#")[0]+"?rum=1"},text:"Click to reload and start recording",colorway:"primary"})})})),wv),kv=Object.values(bv);function Cv(e){var t=e.paneOptions,n=(0,a.useState)(bv.Repl),i=n[0],l=n[1],c=kv.map((function(e){return(0,r.tZ)(je.zx,{colorway:e===i?"primary":void 0,onClick:function(){return l(e)},text:e},e)}));return(0,r.BX)($.Tg,{background:"default",css:[g.l0.colWithGap(8),g.l0.p(4),g.l0.height("100%")],children:[(0,r.tZ)(y.G,{css:{flexWrap:"wrap",flexDirection:"row",gap:"4px"},children:c}),(0,r.tZ)(y.G,{css:[g.l0.flex.growAndShrink(1),g.l0.overflow("auto")],children:Object.entries(xv).map((function(e){var n=(0,o.Z)(e,2),a=n[0],l=n[1];return(0,r.tZ)(y.G,{css:a!==i&&g.l0.display.none,children:a===bv.Override&&i!==bv.Override?null:(0,r.tZ)(l,{isHidden:t.isHidden||i!==a})},a)}))})]})}var Sv=n(50575),Tv={Content:function(e){var t=e.options;return(0,r.tZ)(Cv,{paneOptions:t})},Icon:function(e){var t=e.size;return(0,r.tZ)(Sv.Z,{color:"red",size:t})},getTitle:function(){return"Debug"}},Ev=n(19065),Rv=n(98355),Gv=n(41120),Iv=n(57467);function _v(){var e=(0,fr.Z)(["\n  query SshConfigurator($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        slug\n        user {\n          id\n          username\n        }\n      }\n    }\n  }\n"]);return _v=function(){return e},e}var Dv={},Bv=(0,pr.Ps)(_v());var Pv=n(56997),Av=["ssh-dsa","ssh-ecdsa","ssh-ed25519","ssh-rsa"];function Lv(e){return function(t){t.stopPropagation(),e(t)}}function Uv(e,t){if(!e)return"Please add a key for this secret";if(!e.trim())return"The key must include a non-space character";if(t.includes(e))return"You already have this key";var n=e.split(" ");return 3!==n.length?"This seems to be an invalid key.":Av.includes(n[0])?null:"Key type is not valid."}function Xv(e){return(0,r.BX)(y.G,{css:[g.l0.colWithGap(4)],children:[(0,r.tZ)("label",{htmlFor:e.id,children:(0,r.tZ)(Z.xv,{variant:"small",color:"dimmer",multiline:!1,children:e.label})}),e.children,e.error?(0,r.BX)(y.G,{css:[g.l0.rowWithGap(2),g.l0.align.center],children:[(0,r.tZ)(Iv.Z,{}),(0,r.tZ)(Z.xv,{variant:"small",css:g.l0.color.accentNegativeStrongest,multiline:!1,children:e.error})]}):null]})}function Mv(e){var t=e.authorizedKey,n=e.otherKeys,i=e.onUpdateKey,l=e.onSave,c=(0,o.Z)(a.useState(),2),u=c[0],s=c[1],d=a.useRef(null),f=function(){var e=Uv(t.key,n);if(e)return s(e),void(d.current&&d.current.focus());l()};a.useEffect((function(){u&&(Uv(t.key,n)||s(null))}),[t.key,u,n]);var p=Lv((function(e){"Enter"===e.key&&(e.preventDefault(),f())})),h=(0,ss.d)(),v=(0,Ki.H)()("key"),m='ssh-keygen -t ed25519 -f ~/.ssh/replit -q -N "" && cat ~/.ssh/replit.pub';return(0,r.BX)($.Tg,{elevated:!0,css:[g.l0.p(16),g.l0.borderRadius(8),g.l0.colWithGap(16)],children:[n&&0!==n.length?null:(0,r.tZ)(Z.xv,{children:"Before you can SSH to your Repl, you need to add an SSH key."}),(0,r.tZ)(Xv,{id:v,label:"Key (in OpenSSH Public Key format)",error:u,children:(0,r.tZ)(Bn.II,{id:v,ref:d,name:"key",value:t.key,spellCheck:!1,onChange:function(e){i(e.currentTarget.value)},onKeyDown:p})}),Pv.ED||h?(0,r.tZ)(y.G,{css:[g.l0.colWithGap(8)],children:(0,r.BX)(Z.xv,{children:["Need a hand? The"," ",(0,r.tZ)("a",{href:"https://docs.replit.com/power-ups/ssh",target:"_blank",children:"SSH documentation"})," ","provides information about generating SSH keys."]})}):(0,r.BX)(y.G,{css:[g.l0.colWithGap(8)],children:[(0,r.tZ)(Z.xv,{children:"Need a hand? Generate a key:"}),(0,r.BX)($.Tg,{tag:"pre",elevated:!0,css:[g.l0.borderRadius(8),g.l0.p(8),g.l0.rowWithGap(8),g.l0.justify.spaceBetween,g.l0.align.center],children:[(0,r.tZ)(Z.xv,{multiline:!1,css:[g.l0.overflow("auto"),g.l0.font.code,g.l0.flex.growAndShrink(1),{"::-webkit-scrollbar":[g.l0.display.none]}],maxLines:1,children:m}),(0,r.tZ)(ce.h,{onClick:function(){return(0,Un.Z)(m)},alt:"Copy",children:(0,r.tZ)(Ln.Z,{})})]}),(0,r.tZ)(Z.xv,{children:"Paste the result in the form above."})]}),(0,r.tZ)(y.G,{css:[g.l0.rowWithGap(8),g.l0.justify.spaceBetween],children:(0,r.tZ)(y.G,{css:g.l0.rowWithGap(8),children:(0,r.tZ)(je.zx,{colorway:"primary",onClick:Lv(f),text:"Add SSH Key"})})})]})}function Nv(e){var t=e.onAdd,n=e.otherKeys,i=(0,o.Z)(a.useState({key:""}),2),l=i[0],c=i[1];return(0,r.tZ)(Mv,{authorizedKey:l,otherKeys:n,onUpdateKey:function(e){c((function(t){return t?(0,at.Z)((0,N.Z)({},t),{key:e}):t}))},onSave:function(){c({key:""}),l.key&&t(l)}})}function Ov(e){var t=e.authorizedKey,n=e.onDelete;return(0,r.BX)(y.G,{css:[Vc.gU.filled,g.l0.p(8),g.l0.rowWithGap(8),g.l0.align.center,g.l0.justify.spaceBetween,g.l0.borderRadius(8)],children:[(0,r.tZ)(Rv.Z,{size:24}),(0,r.BX)(Z.xv,{css:[g.l0.flex.growAndShrink(1)],maxLines:1,multiline:!1,children:[t.keytype," ",t.key.substring(0,8),"...",t.key.substring(t.key.length-8)," ",t.comment]}),(0,r.tZ)(ce.h,{onClick:function(){return n(t)},alt:"Delete",size:28,children:(0,r.tZ)(Gv.Z,{})})]})}function Fv(e){if(!e.length)return null;var t=e.split(" ");return t.length<3?null:{keytype:t[0],key:t[1],comment:t[2]}}function Wv(e){var t=e.sshUser,n=e.sshHostname;return(0,r.BX)(r.HY,{children:[(0,r.tZ)(Z.xv,{children:"When configuring your SSH client to connect to this Repl, you will need the following configuration values:"}),(0,r.BX)(y.G,{css:g.l0.colWithGap(2),children:[(0,r.tZ)(Z.xv,{multiline:!1,children:"Hostname"}),(0,r.BX)($.Tg,{tag:"pre",elevated:!0,css:[g.l0.borderRadius(8),g.l0.p(8),g.l0.rowWithGap(8)],children:[(0,r.tZ)(Z.xv,{multiline:!1,css:[g.l0.overflow("auto"),g.l0.font.code,g.l0.flex.growAndShrink(1),{"::-webkit-scrollbar":[g.l0.display.none]}],maxLines:1,children:n}),(0,r.tZ)(ce.h,{onClick:function(){return(0,Un.Z)(n)},alt:"Copy",children:(0,r.tZ)(Ln.Z,{})})]})]}),(0,r.BX)(y.G,{css:g.l0.colWithGap(2),children:[(0,r.tZ)(Z.xv,{multiline:!1,children:"Username"}),(0,r.BX)($.Tg,{tag:"pre",elevated:!0,css:[g.l0.borderRadius(8),g.l0.p(8),g.l0.rowWithGap(8)],children:[(0,r.tZ)(Z.xv,{multiline:!1,css:[g.l0.overflow("auto"),g.l0.font.code,g.l0.flex.growAndShrink(1),{"::-webkit-scrollbar":[g.l0.display.none]}],maxLines:1,children:t}),(0,r.tZ)(ce.h,{onClick:function(){return(0,Un.Z)(t)},alt:"Copy",children:(0,r.tZ)(Ln.Z,{})})]})]})]})}function Hv(e){var t,n=e.repl,i=e.onlyCommand,o=void 0===i||i,a=(0,ss.d)();if("Repl"!==n.__typename)return null;var l=n.id,c="".concat(n.slug,".").concat(null===(t=n.user)||void 0===t?void 0:t.username,".repl.co"),u="ssh -i ~/.ssh/replit ".concat(l,"@").concat(c),s="Host ".concat(c,"\n  User ").concat(l,"\n  IdentityFile ~/.ssh/replit"),d="ssh ".concat(c);return Pv.ED||a?o?null:(0,r.BX)(y.G,{css:g.l0.colWithGap(16),children:[(0,r.tZ)(Ev.Z,{level:4,children:"Client Configuration"}),(0,r.tZ)(Wv,{sshUser:l,sshHostname:c}),(0,r.BX)(Z.xv,{children:["For more detailed configuration instructions",Pv.ED?" on Windows":null,", check the"," ",(0,r.tZ)("a",{href:"https://docs.replit.com/power-ups/ssh",target:"_blank",children:"SSH Power-Up documentation"}),"."]})]}):(0,r.tZ)(y.G,{css:g.l0.colWithGap(16),children:o?(0,r.BX)(r.HY,{children:[(0,r.tZ)(Ev.Z,{level:4,children:"Quick-Start SSH Command"}),(0,r.BX)($.Tg,{tag:"pre",elevated:!0,css:[g.l0.borderRadius(8),g.l0.p(8),g.l0.rowWithGap(8)],children:[(0,r.tZ)(Z.xv,{multiline:!1,css:[g.l0.overflow("auto"),g.l0.font.code,g.l0.flex.growAndShrink(1),{"::-webkit-scrollbar":[g.l0.display.none]}],maxLines:1,children:u}),(0,r.tZ)(ce.h,{onClick:function(){return(0,Un.Z)(u)},alt:"Copy",children:(0,r.tZ)(Ln.Z,{})})]})]}):(0,r.BX)(r.HY,{children:[(0,r.tZ)(Ev.Z,{level:4,children:"Client Configuration"}),(0,r.tZ)(Wv,{sshUser:l,sshHostname:c}),(0,r.tZ)(Ev.Z,{level:5,children:"SSH Configuration File"}),(0,r.BX)(Z.xv,{children:["You can add this snippet to your SSH configuration file (typically"," ",(0,r.tZ)(Z.xv,{css:[g.l0.font.code,g.l0.display.inline,g.l0.align.baseline],children:"~/.ssh/config"}),"):"]}),(0,r.BX)($.Tg,{tag:"pre",elevated:!0,css:[g.l0.borderRadius(8),g.l0.p(8),g.l0.rowWithGap(8)],children:[(0,r.tZ)(Z.xv,{css:[g.l0.overflow("auto"),g.l0.font.code,g.l0.flex.growAndShrink(1),{"::-webkit-scrollbar":[g.l0.display.none]}],children:s}),(0,r.tZ)(ce.h,{onClick:function(){return(0,Un.Z)(s)},alt:"Copy",children:(0,r.tZ)(Ln.Z,{})})]}),(0,r.tZ)(Z.xv,{children:"Then, to connect to your Repl you can simply run:"}),(0,r.BX)($.Tg,{tag:"pre",elevated:!0,css:[g.l0.borderRadius(8),g.l0.p(8),g.l0.rowWithGap(8)],children:[(0,r.tZ)(Z.xv,{multiline:!1,css:[g.l0.overflow("auto"),g.l0.font.code,g.l0.flex.growAndShrink(1),{"::-webkit-scrollbar":[g.l0.display.none]}],maxLines:1,children:d}),(0,r.tZ)(ce.h,{onClick:function(){return(0,Un.Z)(d)},alt:"Copy",children:(0,r.tZ)(Ln.Z,{})})]})]})})}function Vv(e){return zv.apply(this,arguments)}function zv(){return(zv=(0,ot.Z)((function(e){return(0,lt.__generator)(this,(function(t){switch(t.label){case 0:return[4,e.createDir(".config")];case 1:return t.sent(),[4,e.createDir(".config/ssh")];case 2:return t.sent(),[2]}}))}))).apply(this,arguments)}function jv(e){var t=e.fs,n=(0,ne.Z)(),i=(0,o.Z)(a.useState(null),2),l=i[0],c=i[1],u=function(e){var t=(0,N.Z)({},Dv,e);return hr.a(Bv,t)}({variables:{replId:(0,Xe.Z)()}}).data,s="Repl"===(null===u||void 0===u?void 0:u.repl.__typename)?u.repl:null;a.useEffect((function(){function e(){return(e=(0,ot.Z)((function(){var e,r;return(0,lt.__generator)(this,(function(i){switch(i.label){case 0:return[4,Vv(t)];case 1:return i.sent(),[4,t.readFile(".config/ssh/.authorized_keys")];case 2:if((e=i.sent()).error===w.Df.NotFound)return n.current&&c({}),[2];if(e.error)throw new Error("Error getting .authorized_keys");return n.current?(r={},e.content.toString().split("\n").forEach((function(e){if(!e.startsWith("#")){var t=Fv(e);null!==t&&(r[t.key]=t)}})),c(r),[2]):[2]}}))}))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[t,c,n]);var d=function(){var e=(0,ot.Z)((function(e){var n,r;return(0,lt.__generator)(this,(function(i){switch(i.label){case 0:if(!l)throw new Error("trying to write authorized keys before loading");return n=function(e,t){var n=(0,N.Z)({},e);if("add"===t.type){var r=Fv(t.key);r&&(n[r.key]=r)}else delete n[t.key];return n}(l,e),c(n),r="# generated file, use the SSH tool instead of editing\n"+Object.values(n).map((function(e){return"".concat((t=e).keytype," ").concat(t.key," ").concat(t.comment);var t})).join("\n"),[4,t.writeFile(".config/ssh/.authorized_keys",Yi.Z.from(r))];case 1:return i.sent(),[2]}}))}));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=(0,ot.Z)((function(e){return(0,lt.__generator)(this,(function(t){switch(t.label){case 0:return[4,d((0,N.Z)({type:"add"},e))];case 1:return t.sent(),(0,ut.j)(ut.U3.SSH_CONFIGURATOR_USED,{action:"added"}),[2]}}))}));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=(0,ot.Z)((function(e){return(0,lt.__generator)(this,(function(t){switch(t.label){case 0:return[4,d({type:"delete",key:e.key})];case 1:return t.sent(),(0,ut.j)(ut.U3.SSH_CONFIGURATOR_USED,{action:"deleted"}),[2]}}))}));return function(t){return e.apply(this,arguments)}}();return l&&s?(0,r.tZ)(y.G,{css:g.l0.colWithGap(32),children:(0,r.BX)(y.G,{css:g.l0.colWithGap(16),children:[Object.keys(l).length>0?(0,r.tZ)(Hv,{repl:s,onlyCommand:!0}):null,(0,r.tZ)(Ev.Z,{level:4,children:"Manage SSH Keys"}),Object.values(l).map((function(e){return(0,r.tZ)(Ov,{authorizedKey:e,onDelete:p},e.key)})),(0,r.tZ)(Nv,{onAdd:f,otherKeys:Object.keys(l)}),Object.keys(l).length>0?(0,r.tZ)(Hv,{repl:s,onlyCommand:!1}):null]})}):(0,r.tZ)(y.G,{css:[g.l0.center,g.l0.coverContainer],children:(0,r.tZ)(ze.Z,{size:24})})}function qv(e){var t=e.children;return(0,r.tZ)(y.G,{css:[g.l0.height("100%"),g.l0.overflowY("auto"),P.F3],children:(0,r.BX)(y.G,{css:[g.l0.p(8),g.l0.colWithGap(8),g.l0.flex.grow(1)],children:[(0,r.tZ)(y.G,{css:[g.l0.rowWithGap(8)],children:(0,r.tZ)(Ev.Z,{truncate:!0,level:4,children:"SSH Configuration"})}),(0,r.BX)(Z.xv,{variant:"small",color:"dimmer",children:["Add authorized keys to configure SSH access to this Repl."," ",(0,r.tZ)("a",{href:"https://docs.replit.com/power-ups/ssh",target:"_blank",children:"Learn more here"}),"."]}),(0,r.tZ)(y.G,{css:[g.l0.flex.grow(1),g.l0.py(8),g.l0.position.relative],children:t})]})})}var $v=n(91291),Yv={Content:function(){return(0,r.tZ)(Kv,{})},Icon:function(e){var t=e.size;return(0,r.tZ)($v.Z,{size:t})},getTitle:function(){return"SSH"}};function Kv(){var e=(0,d.Z)().fs;return(0,r.tZ)(qv,{children:(0,r.tZ)(jv,{fs:e})})}var Qv=n(86411),Jv=n(54414),em=n(21568),tm=n(13902),nm=n(18180),rm=n(64918),im=n(12171),om=n(88161);var am=n(71284),lm=n(97130),cm=n(37425),um=new Xi.j((function(e){function t(){return(t=(0,ot.Z)((function(e){return(0,lt.__generator)(this,(function(e){return[2,null]}))}))).apply(this,arguments)}var n=(0,am.ys)({defaultKeymap:!1,icons:!1,addToOptions:[lm.t],override:[function(e){return t.apply(this,arguments)}]});return n})),sm=new Mi.R((function(){return(0,Ur.W$)((0,Ui.VV)((0,r.tZ)("div",{css:[{fontFamily:g.TV.fontFamilyDefault},g.l0.color.foregroundDimmest],children:"Ask a question about your code\u2026"})))})),dm=new Xi.j((function(e){if("number"===typeof e)return Mr.yy.transactionFilter.of((function(t){if(t.docChanged&&t.newDoc.length>e){var n=0,r=[];return t.changes.iterChanges((function(i,o,a,l,c){var u=l-a-(o-i),s=t.startState.doc.length+n+u;if(s<=e){var d=c;r.push({from:i,to:o,insert:d})}else{var f=c.slice(0,c.length-(s-e));n+=f.length,r.push({from:i,to:o,insert:f})}n+=u})),{changes:r,scrollIntoView:!0}}return t}))})),fm=new Xi.j((function(e,t){var n=Ur.tk.domEventHandlers({keydown:function(e,n){"Enter"!==e.key||e.shiftKey||(e.preventDefault(),t())}});return[Ur.tk.updateListener.of((function(t){if(t.docChanged&&"function"===typeof e){var n=t.state.doc.toString();e(n,t)}})),n]})),pm=Ur.tk.theme((0,i.Z)({"&":{backgroundColor:g.TV.backgroundHighest,fontFamily:g.TV.fontFamilyDefault,borderRadius:g.TV.borderRadius8,height:"100%"},"& .cm-content":{fontFamily:g.TV.fontFamilyDefault},"& .cm-scroller":{fontFamily:g.TV.fontFamilyDefault}},"& .".concat(cm.ll),{display:"none"})),hm=(0,b.X)({inputContainer:[g.l0.borderRadius(8),Vc.gU.filledAndOutlined,{"@media (hover: hover)":{":not([disabled])":{"&:not([disabled])":{cursor:"text"},":focus-within":(0,N.Z)({},g._X,{outlineOffset:-1,":not(:focus-visible)":{outlineColor:g.TV.accentPrimaryDefault}})}}}],codeMirror:[g.l0.borderRadius(8),g.l0.maxHeight(300),g.l0.overflow("auto")]}),vm=(0,a.forwardRef)((function(e,t){var n=e.value,i=e.maxLength,o=e.onSubmit,l=e.onChange,c=e.onFocus,u=(0,Li.Z)(),s=u.ref,f=u.view,p=(0,d.Z)().fs,h=um.use(p),v=dm.use(i);(0,a.useImperativeHandle)(t,(function(){return{focus:function(){null===f||void 0===f||f.contentDOM.focus(),null===f||void 0===f||f.dispatch({selection:{anchor:f.state.doc.length}})}}})),(0,a.useEffect)((function(){f&&f.state.doc.toString()!==n&&f.dispatch({changes:{from:0,to:f.state.doc.length,insert:n}})}),[n,f]);var m=fm.use(l,o),g=(0,a.useMemo)((function(){return[m,v,h]}),[m,v,h]);return(0,r.tZ)(y.G,{css:hm.inputContainer,children:(0,r.tZ)(Ai.Z,{onFocus:c,language:"markdown",ref:s,css:hm.codeMirror,hideGutter:!0,autocomplete:!1,extensions:[pm,sm].concat((0,Xt.Z)(g))})})})),mm=n(26752),gm=n(37834),ym=(0,b.X)({surface:[g.l0.flex.growAndShrink(0),g.l0.borderRadius(0,0,8,8),{borderTop:"1px solid ".concat(g.TV.outlineDimmer)}],feedback:[g.l0.flex.rowReverse,g.l0.pb(4)],messageBoxContainer:[g.l0.p(8)],messageBoxSubContainer:[g.l0.rowWithGap(8),g.l0.align.center],messageBoxInputContainer:[g.l0.flex.growAndShrink(1),g.l0.maxHeight(300)],messageBoxInput:[g.l0.height(32),g.l0.align.start,{resize:"vertical",width:"100%",flexGrow:1}],inputCharacterCount:[g.l0.flex.row,g.l0.align.center,g.l0.rowWithGap(4),g.l0.color.foregroundDimmer],inputCharacterCountMax:[g.l0.flex.row,g.l0.align.center,g.l0.rowWithGap(4),g.l0.color.accentNegativeStronger],inputButton:[g.l0.backgroundColor.blueDefault,g.l0.borderRadius(8),{"@media (hover: hover)":{":not([disabled]):hover":{backgroundColor:g.TV.blueDefault}}}],upgradeButton:[g.l0.m(8)]}),Zm=function(){var e=(0,a.useState)(!1),t=e[0],n=e[1];return(0,r.BX)(r.HY,{children:[(0,r.tZ)(je.zx,{colorway:"primary",onClick:function(e){e.preventDefault(),n(!0)},text:"Upgrade now",iconLeft:(0,r.tZ)(mm.Z,{}),css:ym.upgradeButton}),(0,r.tZ)(Yo.Z,{context:"ghostwriter_chat_metered_trial",isOpen:t,onRequestClose:function(){n(!1)},uponPurchaseGoTo:"workspace",powerUp:"ghostwriter"})]})},bm=function(e){var t=e.currentUser,n=e.inputRef,i=e.model,l=Boolean((0,Id.useRouter)().query.hideChatInput),c=(0,os.Z)(),u=c.ref,s=c.update,d=(0,o.Z)((0,pe.Jc)(),2),f=d[0],p=d[1],h=(0,pe.gp)(),v=(0,pe.ql)(),m=(0,nm.d)(),g=(0,M.Vg)((0,Id.useRouter)()),Z=(0,pe.J)(),b=(0,a.useState)(!1),w=b[0],x=b[1],k=(0,gm.v)(),C=(0,rm.yL)(i).messageCharacters,S=(0,Ae.P5)({controlName:"flag-ghostwriter-prompt-editor",logFlagToAnalytics:!1}),T=function(e){if(e.preventDefault(),!f)return null;p(""),requestAnimationFrame((function(){s()})),v({chatMessage:{type:"chat",text:f}})},E=function(){(0,ut.j)(ut.U3.GHOSTWRITER_CHAT_INPUT_FOCUSED)},R=function(e){var t=e.enableBridge,n=e.model,r=e.sendChatMessage,i=e.abortResponse,l=(0,o.Z)((0,pe.Jc)(),2),c=l[0],u=(l[1],(0,pe.J)()),s=(0,pe.gp)(),d=(0,Ae.P5)({controlName:"flag-mb-gw-chat-bridge",logFlagToAnalytics:!0});(0,a.useEffect)((function(){if(t&&d){var e=function(e){return(0,im.I6)(e,(function(e){var t=e.type;switch(t){case om.cF.GHOSTWRITER_CHAT_SEND:r(e.chatMessage),(0,im.gU)(e.id);break;case om.cF.GHOSTWRITER_CHAT_ABORT_RESPONSE:i(),(0,im.gU)(e.id);break;default:(0,Ha.Z)(t)}}))};return window.addEventListener("message",e),function(){return window.removeEventListener("message",e)}}}),[i,r,t,d]);var f=(0,a.useCallback)((function(){var e={messageType:om.cF.GHOSTWRITER_CHAT_FOCUS_INPUT};(0,im.bG)(e,Ia()())}),[]);return(0,a.useEffect)((function(){var e=(0,rm.yL)(n).messageCharacters,t={messageType:om.cF.GHOSTWRITER_CHAT_STATE,chatInputText:c,isSending:s,showStopGenerating:u,characterLimit:e};(0,im.bG)(t,Ia()())}),[c,n,u,d,s]),{focusNativeMobileInput:f}}({enableBridge:m&&g,model:i,sendChatMessage:function(e){v({chatMessage:{type:"chat",text:e}})},abortResponse:function(){I&&D()}}).focusNativeMobileInput,G=(0,a.useCallback)((function(){var e;(E(),k(!1),g)?R():null===(e=n.current)||void 0===e||e.focus()}),[n,R,k,g]);(0,a.useEffect)((function(){g&&m&&G()}),[n,m,R,G]),(0,a.useEffect)((function(){if(h||x(!1),w){var e=setTimeout((function(){x(!1)}),2e3);return function(){clearTimeout(e)}}}),[h,w]),(0,a.useEffect)((function(){p((function(e){return e.slice(0,C)}))}),[p,C]);var I=(0,tm.j3)(),_=(0,tm.em)(),D=(0,a.useCallback)((function(){(0,ut.j)(ut.U3.GHOSTWRITER_CHAT_RESPONSE_STOPPED),_(),G()}),[_,G]),B=f.length===C;return l?null:(0,r.tZ)($.Tg,{elevated:!0,css:ym.surface,children:m?(0,r.BX)(y.G,{css:ym.messageBoxContainer,children:[(0,r.tZ)(y.G,{css:ym.feedback,children:(0,r.BX)(y.G,{css:B?ym.inputCharacterCountMax:ym.inputCharacterCount,children:[B?(0,r.tZ)(Q.Z,{}):void 0,(0,r.tZ)(Qv.Z,{maxLength:C,value:f,hideLabel:!0,fontSize:"inherit"})]})}),(0,r.BX)(y.G,{css:ym.messageBoxSubContainer,tag:"form",disabled:h,onSubmit:T,children:[(0,r.tZ)(tu.q,{src:t.image,username:t.username,size:24}),(0,r.tZ)(y.G,{css:ym.messageBoxInputContainer,children:S?(0,r.tZ)(vm,{value:f,ref:n,maxLength:C,onChange:function(e){p(e)},onSubmit:function(){f&&(h?x(!0):(p(""),v({chatMessage:{type:"chat",text:f}})))},onFocus:function(){E(),k(!1)}}):(0,r.tZ)(Bn.B,{type:"text",inputMode:"text",maxLength:C,placeholder:"Ask a question about your code\u2026",ref:(0,as.l)(u,n),css:ym.messageBoxInput,onChange:function(e){p(e.target.value)},value:f,onFocus:function(){E(),k(!1)},onKeyDown:function(e){"Enter"===e.key&&(e.preventDefault(),e.shiftKey?(p((function(e){var t,r;return e.slice(0,null===n||void 0===n||null===(t=n.current)||void 0===t?void 0:t.selectionStart)+"\n"+e.slice(null===n||void 0===n||null===(r=n.current)||void 0===r?void 0:r.selectionEnd,e.length)})),requestAnimationFrame((function(){s()}))):h?x(!0):T(e))}})}),Z?(0,r.tZ)(ce.h,{size:28,alt:"Stop generating",onClick:D,tooltipContents:w?"You cannot send a message while another message is sending.":void 0,tooltipOpen:!!w||void 0,children:(0,r.tZ)(em.Z,{})}):(0,r.tZ)(ce.h,{alt:"Send message",size:28,type:"submit",disabled:h,css:ym.inputButton,children:(0,r.tZ)(Jv.Z,{})})]})]}):(0,r.tZ)(Zm,{})})},wm=n(66769),xm=n(45317),km=function(e){var t=e.inputRef,n=e.text,i=e.promptToFill,a=(0,o.Z)((0,pe.Jc)(),2)[1];return(0,r.tZ)(je.zx,{iconLeft:(0,r.tZ)(Jv.Z,{}),text:n,onClick:function(){!function(){var e;a(i),(0,ut.j)(ut.U3.GHOSTWRITER_CHAT_EXAMPLE_CLICKED,{prompt:i}),null===t||void 0===t||null===(e=t.current)||void 0===e||e.focus()}()}})},Cm=[{text:'"How do I scrape a website for <a> tags?"',promptToFill:"How do I scrape a website for <a> tags?"},{text:'"Write a login page in HTML and CSS"',promptToFill:"Write a login page in HTML and CSS"},{text:(0,r.BX)(r.HY,{children:['"How can I improve the code in ',(0,r.tZ)("em",{children:"filename.js"}),'?"']}),promptToFill:"How can I improve the code in "},{text:'"How do I use the pandas apply function?"',promptToFill:"How do I use the pandas apply function?"}],Sm=function(e){var t=e.inputRef,n=e.samplesNumber,i=(0,xt.Z)((function(){return Cm.sort((function(){return Math.random()-.5}))}),[]);return(0,r.tZ)(r.HY,{children:i.map((function(e,n){return(0,r.tZ)(km,{inputRef:t,text:e.text,promptToFill:e.promptToFill},n)})).slice(0,n)})},Tm=(0,b.X)({messageEmptyStateSamplePrompts:[g.l0.rowWithGap(8),g.l0.flex.wrap,g.l0.align.center,{gap:xm.TV.space8}],messageEmptyState:[g.l0.colWithGap(16),g.l0.overflow("auto"),g.l0.flex.growAndShrink(1)]}),Em=function(e){var t=e.inputRef,n=e.username,i=(0,r.tZ)(y.G,{css:Tm.messageEmptyStateSamplePrompts,children:(0,r.tZ)(Sm,{inputRef:t,samplesNumber:3})});return(0,r.tZ)(y.G,{css:Tm.messageEmptyState,role:"log",children:(0,r.tZ)(wm.v,{message:{id:"empty-state",type:"chat",loading:!1,text:"Hey @".concat(n,", I\u2019m Ghostwriter, Replit\u2019s AI pair programmer. I\u2019m here to answer questions about your code and assist your thinking!"),author:{username:"Ghostwriter",image:"/public/images/ghostwriter/blurple-circle.svg"},attribution:"Assistant"},postMessageComponent:i})})},Rm=function(){return(0,r.BX)(y.G,{css:[g.l0.colWithGap(16),g.l0.align.center,g.l0.p(24),g.l0.height("100%"),g.l0.justify.center],children:[(0,r.tZ)(y.G,{css:[g.l0.maxWidth(200)],children:(0,r.tZ)(Qo.Z,{src:"/public/images/ghostwriter/orb.jpg",css:[{userSelect:"none",mixBlendMode:"screen",filter:"brightness(110%) saturate(1.2)",maskImage:"linear-gradient(".concat(g.TV.backgroundRoot,", transparent)")}],width:200,height:200,objectFit:"contain","aria-hidden":"true",alt:"",draggable:!1})}),(0,r.tZ)(Z.xv,{variant:"subheadBig",multiline:!1,children:"Chat with Ghostwriter"}),(0,r.BX)(y.G,{css:[g.l0.rowWithGap(8),g.l0.align.center],children:[(0,r.tZ)(ze.Z,{}),(0,r.tZ)(Z.xv,{color:"dimmer",multiline:!1,children:"Loading\u2026"})]})]})},Gm=n(51624),Im=n(69365),_m=n(23262),Dm=n(94236),Bm=n(90273),Pm=n(94178),Am=n(40207),Lm=n(39691),Um=n(32343);function Xm(e){return(0,r.tZ)(Io.Z,(0,at.Z)((0,N.Z)({viewBox:"0 0 11 12",fill:"none"},e),{children:(0,r.tZ)("path",{d:"M5.25 0.721688C5.4047 0.632371 5.5953 0.632371 5.75 0.721688L9.94615 3.14434C10.1009 3.23365 10.1962 3.39872 10.1962 3.57735V8.42265C10.1962 8.60128 10.1009 8.76635 9.94615 8.85566L5.75 11.2783C5.5953 11.3676 5.4047 11.3676 5.25 11.2783L1.05385 8.85566C0.899148 8.76635 0.803848 8.60128 0.803848 8.42265V3.57735C0.803848 3.39872 0.899147 3.23365 1.05385 3.14434L5.25 0.721688Z",stroke:xm.TV.foregroundDefault})}))}var Mm=n(9020),Nm=n(5790),Om=n(10601);function Fm(){var e=(0,fr.Z)(["\n  query GhostwriterChatModelQuota {\n    currentUser {\n      id\n      userPowerUpsByType {\n        ... on UserPowerUpsTypes {\n          ghostwriter {\n            chatModelQuota {\n              refreshDate\n              tokensUsed\n              tokenLimit\n            }\n          }\n        }\n      }\n    }\n  }\n"]);return Fm=function(){return e},e}var Wm={},Hm=(0,pr.Ps)(Fm());var Vm=n(67194),zm=(0,b.X)({container:[g.l0.rowWithGap(4),g.l0.flex.wrap,g.l0.border({direction:"bottom",color:g.TV.outlineDimmest})],headerLeftContainer:[g.l0.rowWithGap(4),g.l0.flex.growAndShrink(1),g.l0.p(8)],headerText:[g.l0.height(12),g.l0.fontSize(12),g.l0.color.foregroundDimmer,{lineHeight:1}],advancedButton:[{border:"none",borderRadius:0}],advancedPopover:[g.l0.borderRadius(8),g.l0.p(8),g.l0.backgroundColor.backgroundHigher,g.l0.maxWidth(340)],advancedPopoverLoading:[g.l0.flex.row,g.l0.justify.center,g.l0.width(340)],advancedPopoverTopSection:[g.l0.rowWithGap(4),g.l0.pb(12),g.l0.align.center,g.l0.justify.spaceBetween],quotaLimitStatusBanner:[g.l0.pb(8)],measureBarContainer:[g.l0.colWithGap(4),g.l0.flex.growAndShrink(1),g.l0.pl(16)],measureBar:[g.l0.rowWithGap(8),g.l0.align.center],quotaUsagePercentageText:[g.l0.color.blurpleStronger,g.l0.fontSize(12)],advancedPopoverMeasureBarAnnotation:[g.l0.textAlign.right],advancedPopoverText:[g.l0.color.foregroundDimmest],advancedPopoverHeader:[g.l0.fontWeight.medium],modelSelectionButtonGroup:[g.l0.border({width:1,color:g.TV.outlineDimmer}),{"& > label":{width:"88px",height:"28px"},"& span":{fontSize:"12px"},"&:hover svg":{fill:"none !important"}}],blurpleText:[g.l0.color.blurpleStronger],gwAdvancedButtonGroupIcon:[g.l0.mr(4)]}),jm=function(e){var t=(0,Um.Z)({},e);return(0,r.tZ)(Xm,(0,at.Z)((0,N.Z)({css:zm.gwAdvancedButtonGroupIcon},t),{size:12}))},qm=function(){var e,t,n=function(e){var t=(0,N.Z)({},Wm,e);return hr.a(Hm,t)}(),i=n.data,o=n.loading,l=(0,Vm.zW)(),c=(0,Lm.T9)(),u=c.useAdvancedModel,s=c.setUseAdvancedModel,d=[{id:(0,a.useId)(),value:!0,text:"Advanced"},{id:(0,a.useId)(),value:!1,text:"Basic"}],f=null;if(o)f=(0,r.tZ)(y.G,{css:zm.advancedPopoverLoading,children:(0,r.tZ)(ze.Z,{})});else if("UserPowerUpsTypes"===(null===i||void 0===i||null===(e=i.currentUser)||void 0===e?void 0:e.userPowerUpsByType.__typename)&&(null===(t=null===i||void 0===i?void 0:i.currentUser.userPowerUpsByType.ghostwriter)||void 0===t?void 0:t.chatModelQuota)){var p=i.currentUser.userPowerUpsByType.ghostwriter.chatModelQuota,h=new Date(p.refreshDate),v="number"===typeof(null===l||void 0===l?void 0:l.userTokenUsage)?null===l||void 0===l?void 0:l.userTokenUsage:p.tokensUsed,m=p.tokenLimit;v>m&&(v=m);var b=(0,Om.Z)(h,new Date),w="".concat(b," ").concat((0,Mt.Z)("day",b)),x="Refills in ".concat(w),k="".concat(Math.round((m-v)/m*100),"%"),C=v>=m,S=Math.floor((m-v)/2070),T="About ".concat(S," ").concat((0,Mt.Z)("message",S));f=(0,r.tZ)(r.HY,{children:(0,r.BX)(y.G,{css:zm.advancedPopover,children:[(0,r.BX)(y.G,{css:zm.advancedPopoverTopSection,children:[(0,r.tZ)(y.G,{children:(0,r.tZ)(Z.xv,{css:zm.advancedPopoverHeader,children:"Default model"})}),(0,r.tZ)(Ld.hE,{name:"ghostwriter-chat-header-model-selection",css:zm.modelSelectionButtonGroup,value:u,onChange:function(e){s(e),(0,ut.j)(ut.U3.GHOSTWRITER_CHAT_MODEL_CHANGED,{source:"header",model:e?"advanced":"default"})},row:!0,children:d.map((function(e){return(0,r.tZ)(Ld.rK,{id:e.id,value:e.value,text:e.text,icon:e.value?(0,r.tZ)(jm,{}):void 0},e.id)}))})]}),C&&u?(0,r.tZ)(y.G,{css:zm.quotaLimitStatusBanner,children:(0,r.tZ)(Lr.E,{icon:(0,r.tZ)(Q.Z,{}),text:"Using the Basic model until usage refills.",colorway:"orange"})}):null,(0,r.BX)(y.G,{css:[zm.advancedPopoverTopSection,g.l0.align.start],children:[(0,r.BX)(y.G,{children:[(0,r.tZ)(Z.xv,{css:zm.advancedPopoverHeader,children:"Usage left"}),u?(0,r.tZ)(Z.xv,{css:[zm.advancedPopoverText],children:x}):null]}),u?(0,r.BX)(y.G,{css:zm.measureBarContainer,children:[(0,r.BX)(y.G,{css:zm.measureBar,children:[(0,r.tZ)(Z.xv,{css:zm.quotaUsagePercentageText,children:k}),(0,r.tZ)(lr.J,{total:m,current:m-v,color:g.TV.blurpleDefault,tooltip:k})]}),(0,r.tZ)(Z.xv,{css:[zm.advancedPopoverText,zm.advancedPopoverMeasureBarAnnotation],children:T})]}):(0,r.tZ)(Z.xv,{css:zm.blurpleText,children:"Unlimited messages"})]}),u?(0,r.tZ)(Z.xv,{css:zm.advancedPopoverText,children:"The Advanced model is great for complex code generation, editing, and explanation."}):(0,r.tZ)(Z.xv,{css:zm.advancedPopoverText,children:"The Basic model is faster and useful for common tasks like writing boilerplate code or reformatting data."})]})})}else f=(0,r.tZ)(y.G,{css:zm.advancedPopoverTopSection,children:(0,r.tZ)(Z.xv,{css:zm.advancedPopoverText,children:"Advanced model usage is not available"})});return(0,r.tZ)(y.G,{css:zm.advancedPopover,children:f})},$m=function(){var e=(0,a.useState)(!1),t=e[0],n=e[1],i=(0,Ah.Cp)(),o=(0,Lm.T9)().useAdvancedModel;return(0,r.BX)(y.G,{css:zm.container,children:[(0,r.BX)(y.G,{css:zm.headerLeftContainer,children:[(0,r.tZ)(Z.xv,{css:zm.headerText,children:new Date("number"===typeof i?i:Date.now()).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!0})}),(0,r.tZ)(Z.xv,{css:zm.headerText,children:"Session"})]}),(0,r.BX)(Nm.x,{label:"Notifications",noArrow:!0,isOpen:t,onOpenChange:function(e){(0,ut.j)(ut.U3.GHOSTWRITER_CHAT_SETTINGS_TOGGLED,{state:e?"opened":"closed"}),n(e)},placement:"bottom",children:[(0,r.tZ)(je.zx,{small:!0,css:zm.advancedButton,outlined:!0,onClick:function(){return n((function(e){return!e}))},iconLeft:o?(0,r.tZ)(Xm,{}):void 0,iconRight:t?(0,r.tZ)(Mm.ChevronUp,{}):(0,r.tZ)(Mm.ChevronDown,{}),text:"Model settings"}),(0,r.tZ)(qm,{})]})]})},Ym=n(70714),Km=n(94169),Qm=(0,b.X)({headerWrapper:[g.l0.rowWithGap(4),g.l0.align.center],feedbackContent:[g.l0.backgroundColor.backgroundHigher,g.l0.colWithGap(4),g.l0.borderRadius(8),g.l0.py(4),g.l0.px(8)],messagePreview:[g.l0.colWithGap(4),g.l0.borderRadius(4),g.l0.py(4),g.l0.px(8),Ym.V.ghostwriterPurpleBackground,g.l0.border({color:g.TV.blurpleDefault,style:"solid",direction:"left",width:2})],userFeedbackWrapper:[g.l0.rowWithGap(4),g.l0.align.center,g.l0.justify.start],userFeedbackText:[g.l0.flex.growAndShrink(1),g.l0.width("100%")]}),Jm=function(e){var t=e.message,n=e.currentUser,i=e.autoScroll,o=t.author,c=t.useAdvancedModel,u=t.text,s=t.feedbackProvidedMessage;if(!n)throw new Error("Expecting a current user to render a feedback message");if(!s)throw new Error("Expecting a feedback provided message to render a feedback message");var d=(0,a.useRef)(null),f=(0,Im.rM)();(0,a.useLayoutEffect)((function(){i&&d.current&&requestAnimationFrame((function(){i&&d.current&&((0,l.Z)(d.current,{behavior:"auto",scrollMode:"always"}),f(!0))}))}));var p={username:n.username,image:n.image};return(0,r.BX)(y.G,{css:Ym.V.messageWrapper,children:[(0,r.BX)(y.G,{css:Qm.headerWrapper,children:[(0,r.tZ)(Km.Z,{author:o,advancedGwAvatar:c}),(0,r.tZ)(Z.xv,{multiline:!1,children:"recorded feedback"}),(0,r.tZ)(Mm.Check,{color:g.TV.greenStronger})]}),(0,r.BX)(y.G,{css:Qm.feedbackContent,children:[(0,r.tZ)(y.G,{css:Qm.messagePreview,children:(0,r.tZ)(Z.xv,{multiline:!1,maxLines:1,children:s.text})}),(0,r.BX)(y.G,{css:Qm.userFeedbackWrapper,children:[(0,r.tZ)(Km.Z,{smallAvatar:!0,author:p,showUsername:!1}),(0,r.tZ)(Z.xv,{css:Qm.userFeedbackText,children:u})]})]}),(0,r.tZ)(y.G,{innerRef:d})]})},eg=(0,b.X)({banner:[g.l0.position.absolute,g.l0.top(32),g.l0.right(4),g.l0.width(270),g.l0.align.start,g.l0.zIndex(2)]}),tg=function(){var e=(0,o.Z)((0,Vm.h9)(),2),t=e[0],n=e[1],i=(0,Vm.zW)();if(!t||!i)return null;var a=(0,Om.Z)(new Date(i.advancedModelLimitRefreshTs),new Date),l=a>0?"in ".concat(a," ").concat((0,Mt.Z)("day",i.userTokenUsage)):"today";return(0,r.tZ)(Lr.E,{css:eg.banner,icon:(0,r.tZ)(Q.Z,{}),text:"You hit your weekly Advanced model usage limit. Ghostwriter will use the Basic model until your limit resets ".concat(l),colorway:"warning",closeAction:function(){n(!1)},closable:!0})};function ng(e){var t,n=(0,M.T3)(),i=(0,o.Z)((0,pe.zu)(),1)[0],l=i.filter((function(e){return"feedback"!==e.type})),c=(0,Lm.Ne)(),u=c.currentUserData,s=c.currentUserLoading,d=c.currentUserError,f=c.chatModel,p=(0,a.useState)(!1),h=p[0],v=p[1],m=null===u||void 0===u||null===(t=u.currentUser)||void 0===t?void 0:t.isStaff,Z=(0,o.Z)((0,Am.RN)(),2),b=Z[0],w=Z[1],x=(0,pe.ZT)(),k=(0,xt.Z)((function(){return[{type:"action",label:"Clear chat history",icon:(0,r.tZ)(q.Z,{}),run:function(){(0,ut.j)(ut.U3.GHOSTWRITER_CHAT_CLEARED),x()}}]}),[x]),C=(0,xt.Z)((function(){var e=[{match:T.pl,data:{type:"action",icon:(0,r.tZ)(Bm.Z,{}),label:"Share feedback",run:function(){return v(!0)}}}];if(m){var t={match:T.pl,data:{type:"action",icon:(0,r.tZ)(Sv.Z,{fill:b?g.TV.accentPrimaryDefault:g.TV.foregroundDefault}),label:"Toggle debug mode",run:function(){w((function(e){return!e}))}}};e.push(t)}return e}),[b,w,m]),E=(0,a.useRef)(null);(0,S.Wk)((function(){return E.current}),[]),(0,S.L5)((function(){return{actions:k,commands:C}}),[k,C]);var R=(0,a.useRef)(null),G=(0,o.Z)((0,Im.Z_)(),2),I=G[0],_=G[1],D=(0,o.Z)((0,Im.Z9)(),2),B=D[0],P=D[1],A=(0,a.useCallback)((function(){B?P(!1):null==R.current||R.current.scrollHeight-R.current.scrollTop!==R.current.clientHeight?_(!1):_(!0)}),[B,_,P]),L=(0,Ae.P5)({controlName:"flag-ghostwriter-model-selection",logFlagToAnalytics:!0});return s?(0,r.tZ)(Rm,{}):d||!(null===u||void 0===u?void 0:u.currentUser)?(0,r.BX)(y.G,{children:["error:"," ",(null===d||void 0===d?void 0:d.message)||"User not found, please log in or reload"]}):(0,r.BX)(y.G,{css:[g.l0.flex.column,g.l0.maxHeight("100%"),g.l0.maxWidth("100%"),g.l0.flex.grow(1),g.l0.position.relative],dataCy:"ghostwriter-chat",children:[(0,r.tZ)(tg,{}),(0,r.tZ)(Dm.Z,{isOpen:h,setOpen:v,feature:_m.l.GhostWriter}),L?(0,r.tZ)($m,{}):null,i.length?(0,r.tZ)(r.HY,{children:(0,r.tZ)(y.G,{innerRef:R,css:[g.l0.colWithGap(16),g.l0.overflow("auto"),g.l0.flex.growAndShrink(1),g.l0.pt(12)],onScroll:A,role:"log",children:i.map((function(t,o){return"feedback"===t.type?(0,r.tZ)(Jm,{message:t,currentUser:u.currentUser,autoScroll:I&&o===i.length-1&&(e.paneIsActive||!n)}):(0,r.tZ)(wm.v,{message:t,autoScroll:I&&o===i.length-1&&(e.paneIsActive||!n),isLastAssistantMessage:"Assistant"===t.attribution&&l[l.length-1].id===t.id},t.id)}))})}):(0,r.tZ)(Em,{inputRef:E,username:u.currentUser.username}),(0,r.tZ)(bm,{currentUser:u.currentUser,inputRef:E,model:f})]})}var rg=function(e){var t=(0,Ae.P5)({controlName:"flag-killswitch-ghostwriter-chat",logFlagToAnalytics:!1});return(0,Gm.e)({performPaneOperation:e.performPaneOperation}),(0,r.tZ)(r.HY,{children:t?(0,r.tZ)(Pm.Z,{textVariant:"headerDefault",showImage:!0}):(0,r.tZ)(ng,{paneIsActive:e.paneIsActive})})},ig={Content:function(e){var t=e.options;return(0,r.tZ)(rg,{paneIsActive:t.isActive,performPaneOperation:t.performPaneOperation})},Icon:function(e){var t=e.size;return(0,r.tZ)(he.Z,{size:t})},getTitle:function(){return"Ghostwriter"}},og=n(42916),ag=n(93461),lg=n(28103),cg=(0,b.X)({item:[Vc.gU.listItem,g.l0.reset.button,g.l0.justify.spaceBetween,g.l0.px(8),g.l0.py(4)],itemMain:[g.l0.flex.growAndShrink(1)],itemSecondary:[g.l0.color.foregroundDimmest],flex:[g.l0.rowWithGap(8),g.l0.align.center],message:[g.l0.flex.shrink(1),g.l0.overflowX("hidden"),{textOverflow:"ellipsis",whiteSpace:"nowrap"}],rightContent:[g.l0.rowWithGap(4),g.l0.align.center]});function ug(e){var t=e.problem,n=e.onClick,i=(0,O.Z)(e,["problem","onClick"]),o=t.range.start.line+1,a=t.range.start.character;return(0,r.BX)(y.G,{css:[cg.flex,cg.item],onClick:n?function(){return n(t)}:void 0,children:[(0,r.BX)(y.G,{css:[cg.flex,cg.itemMain],children:[(0,r.tZ)(lg.Z,{severity:t.severity}),(0,r.tZ)(Z.xv,{css:cg.message,children:t.message})]}),(0,r.BX)(y.G,{css:cg.rightContent,children:[(0,r.tZ)(y.G,{css:cg.itemSecondary,children:(0,r.tZ)(Z.xv,{children:"Ln ".concat(o,", Col ").concat(a+1)})}),(0,r.tZ)(y.G,{children:null===i||void 0===i?void 0:i.rightContent})]})]})}var sg=(0,b.X)({badge:[g.l0.backgroundColor.greyDimmest,g.l0.borderRadius(2),g.l0.minWidth(18)],container:[g.l0.p(8)],header:[g.l0.py(4),g.l0.justify.spaceBetween,g.l0.flex.grow(1),g.l0.pr(16)],item:[Vc.gU.listItem,g.l0.reset.button,g.l0.justify.spaceBetween,g.l0.px(8),g.l0.py(4)],itemMain:[g.l0.flex.growAndShrink(1)],itemSecondary:[g.l0.color.foregroundDimmest],flex:[g.l0.rowWithGap(8),g.l0.align.center],message:[g.l0.flex.shrink(1),g.l0.overflowX("hidden"),{textOverflow:"ellipsis",whiteSpace:"nowrap"}]});function dg(e){var t=e.isActive,n=e.performPaneOperation,o=(0,a.useState)({}),l=o[0],c=o[1],u=(0,Eh.nC)(),s=(0,S.dr)(),d=(0,a.useCallback)((function(){var e=!0,t=!1,n=void 0;try{for(var r,o=function(){var e,t=r.value;if("codeEditor"!==t[1].type)return"continue";var n=s(t[0]);if(!n||"codeEditor"!==n.type)return"continue";var o=t[1].data.path,a=null===(e=n.fetchProblems)||void 0===e?void 0:e.call(n);o&&a&&c((function(e){return(0,at.Z)((0,N.Z)({},e),(0,i.Z)({},o,a))}))},a=u()[Symbol.iterator]();!(e=(r=a.next()).done);e=!0)o()}catch(l){t=!0,n=l}finally{try{e||null==a.return||a.return()}finally{if(t)throw n}}}),[s,u]);return(0,a.useEffect)((function(){t&&d()}),[t,d]),(0,S.L5)((function(){return{type:"problems",updateProblems:function(e,t){c((function(n){return(0,at.Z)((0,N.Z)({},n),(0,i.Z)({},e,t))}))}}}),[c]),(0,r.BX)(y.G,{css:sg.container,children:[Object.values(l).some((function(e){return e.length>0}))?null:(0,r.tZ)(Z.xv,{children:"No problems detected in this workspace"}),Object.keys(l).map((function(e){return 0===l[e].length?null:(0,r.tZ)(ir.Q,{chevron:"end",defaultExpanded:!0,headerContent:(0,r.BX)(y.G,{css:[sg.flex,sg.header],children:[(0,r.BX)(y.G,{css:sg.flex,children:[(0,r.tZ)(Ua.Z,{path:e}),(0,r.tZ)(Z.xv,{children:e})]}),(0,r.tZ)(y.G,{css:sg.badge,children:l[e].length})]}),children:(0,r.tZ)(y.G,{children:l[e].map((function(t,i){var o=t.range.start.line+1,a=t.range.start.character;return(0,r.tZ)(ug,{problem:t,onClick:function(){n({operation:"open",pane:{type:"codeEditor",data:{path:e,line:o,col:a}},secondary:!0})}},"".concat(o,"-").concat(a,"-").concat(i))}))})},e)}))]})}var fg={Content:function(e){var t=e.options,n=t.isActive,i=t.performPaneOperation;return(0,r.tZ)(dg,{isActive:n,performPaneOperation:i})},Icon:function(){return(0,r.tZ)(ag.Z,{})},getTitle:function(){return"Problems"}};function pg(){return{filetree:og.Z,codeEditor:B.D,webview:ca.R,media:Xa,pedit:Ch,vnc:da,unitTests:Rh,adminPanel:Tv,runnerOutput:Ge,shell:va,packager:In,envEditor:Be,draw:Pa,git:Sf,history:ph,database:Sr,neon:la,markdown:D,sshConfigurator:Yv,ghostwriterChat:ig,problems:fg}}},92508:function(e,t,n){n.d(t,{kz:function(){return k},F3:function(){return h},fK:function(){return b},ME:function(){return s},DQ:function(){return f},Dp:function(){return c},WQ:function(){return p},Ur:function(){return d},RX:function(){return u},b:function(){return m},v:function(){return r},Se:function(){return x}});var r={filetree:!0,codeEditor:!0,database:!0,neon:!0,replAuth:!0,webview:!0,media:!0,vnc:!0,pedit:!0,education:!0,runnerOutput:!0,unitTests:!0,autograder:!0,markdown:!0,shell:!0,packager:!0,envEditor:!0,commands:!0,draw:!0,preferences:!0,adminPanel:!0,git:!0,history:!0,kaboombar:!0,instructions:!0,debugger:!0,tutorial:!0,config:!0,threadInbox:!0,extension:!0,extensionStore:!0,docs:!0,videoPlayer:!0,chat:!0,deployments:!0,modules:!0,sshConfigurator:!0,multiplayer:!0,ghostwriterChat:!0,submitEduRepl:!0,searchReplace:!0,extensionDevtools:!0,problems:!0},i=n(4561),o=n(43312),a=n(39541),l=n(87978);function c(e){var t=e.path;return t?(0,l.T3)(t)?"media":(0,l.sL)(t)?"draw":(0,l.IQ)(t)?"pedit":"codeEditor":"codeEditor"}function u(e){return"codeEditor"===e||"media"===e||"pedit"===e||"draw"===e||"history"===e}function s(e){return e.filter((function(e){return e.type===i.Tv.File})).map((function(e){return{type:c({path:e.path}),data:{path:e.path}}}))}function d(e){return u(e.type)}function f(e){return d(e)?e.data.path:null}function p(e){return"extension"===e.type}var h=(0,o.iv)([a.l0.width("100%"),a.l0.maxWidth(600),{marginLeft:"auto",marginRight:"auto"}]),v=["autograder","education","instructions","markdown","threadInbox","extensionStore","chat","docs","webview","vnc","runnerOutput","git","packager","envEditor","debugger","tutorial","kaboombar","database","neon","replAuth","autograder","unitTests","education","preferences","deployments","ghostwriterChat","extensionDevtools","problems"];function m(e){return v.includes(e)}var g=n(74985),y=n(50959),Z={type:"commands",data:{autoFocus:!1}};function b(e){var t=e.config;return{Icon:function(e){var n=e.pane,r=e.size,i=void 0===r?16:r,o=t[n.type]?n:Z,a=t[o.type].Icon;return(0,g.tZ)(a,{pane:o,size:i})},Content:function(e){var n=e.pane,r=e.options,i=t[n.type]?n:Z,o=t[i.type].Content;return(0,g.tZ)(o,{pane:i,options:r})},getTitle:function(e){var n=t[e.type]?e:Z;return t[n.type].getTitle(n)}}}var w=(0,y.createContext)(null);function x(){var e=(0,y.useContext)(w);if(!e)throw new Error("Expected PaneUI in context");return e}var k=w.Provider},80906:function(e,t,n){n.d(t,{NH:function(){return c},Qt:function(){return s},R3:function(){return u},_s:function(){return o},p5:function(){return d}});var r=n(91398),i=n(42082),o=(0,r.cn)(null),a=(0,r.cn)((function(e){var t=e(o);return(null===t||void 0===t?void 0:t.isVisible)?t.path:null})),l=(0,r.cn)(null,(function(e,t,n,r){switch(r.type){case"focus":return void t(o,{hasFocus:!0,isVisible:!0,position:r.position,path:n});case"update":return void t(o,{hasFocus:r.hasFocus,isVisible:!0,position:r.position,path:n});case"blur":var i;return void t(o,(function(e){return{hasFocus:!1,isVisible:Boolean(null===e||void 0===e?void 0:e.isVisible),position:null!==(i=null===e||void 0===e?void 0:e.position)&&void 0!==i?i:{line:1,column:1,offset:0},path:n}}));case"unmount":return void t(o,null);case"hidden":var a;return void t(o,(function(e){return{hasFocus:!1,isVisible:!1,position:null!==(a=null===e||void 0===e?void 0:e.position)&&void 0!==a?a:{line:1,column:1,offset:0},path:n}}));case"unhidden":var l;return void t(o,(function(e){return{hasFocus:Boolean(null===e||void 0===e?void 0:e.hasFocus),isVisible:!1,position:null!==(l=null===e||void 0===e?void 0:e.position)&&void 0!==l?l:{line:1,column:1,offset:0},path:n}}))}}));function c(){return(0,i.$X)(l)}function u(){return(0,i.Hg)(a)}function s(){return(0,i.XD)(o)}function d(){return(0,i.yL)(o)}},13716:function(e,t,n){n.d(t,{eA:function(){return P},_s:function(){return S._s},ex:function(){return v},aG:function(){return B.aG},zo:function(){return Z},t9:function(){return _},R3:function(){return S.R3},pV:function(){return g},Qt:function(){return S.Qt},AA:function(){return b},Y_:function(){return x},b2:function(){return G},ev:function(){return k},Bx:function(){return y},VX:function(){return m},OM:function(){return D},Cp:function(){return R},_o:function(){return C},Gg:function(){return h},QH:function(){return w}});var r=n(74985),i=n(42082),o=n(9970),a=n(92153),l=n(91398),c=n(18171),u=(0,l.cn)(null),s=(0,l.cn)([]),d=(0,l.cn)(null,(function(e,t,n){var r=e(s),i=[n].concat((0,o.Z)(r.filter((function(e){return e!==n})))).slice(0,20);t(s,i)})),f=(0,l.cn)(null,(function(e,t,n){var r=e(s),i=r.indexOf(n.path);-1!==i&&t(s,(0,a.ZP)(r,(function(e){"delete"===n.type?e.splice(i,1):e.splice(i,1,n.to)})))})),p=(0,l.cn)(null);function h(){return(0,i.$X)(f)}function v(){return(0,i.Hg)(u)}function m(){return(0,i.$X)(u)}function g(){return(0,i.XD)(u)}function y(){return(0,i.Hg)(s)}function Z(){return(0,i.$X)(d)}function b(){return(0,i.XD)(s)}function w(){var e=(0,i.yL)(u);return(0,c.Z)((function(){return function(t){return e.subscribe(t)}}),[e])}function x(){return(0,i.yL)(u)}function k(){return(0,i.Hg)(p)}function C(){return(0,i.$X)(p)}var S=n(80906),T=(0,l.cn)({chat:"unread"}),E=(0,l.cn)(null,(function(e,t,n){t(T,(function(e){return(0,a.ZP)(e,(function(e){n.indicatorType?e[n.paneType]=n.indicatorType:delete e[n.paneType]}))}))}));function R(){return(0,i.$X)(E)}function G(e){var t=e.paneType;return(0,i.Hg)(function(e){var t=e.paneType;return(0,c.Z)((function(){return(0,l.cn)((function(e){return t?e(T)[t]:void 0}))}),[t])}({paneType:t}))}var I=(0,n(56581).O4)("areHiddenFilesVisible",!1);function _(){return(0,i.Hg)(I)}function D(){return(0,i.$X)(I)}var B=n(59937);function P(e){var t=(0,i.ns)();return(0,r.tZ)(i.B3.Provider,{value:t,children:e.children})}},27549:function(e,t,n){n.d(t,{L5:function(){return g},Wk:function(){return E},Xq:function(){return _},Y6:function(){return y},bS:function(){return R},c4:function(){return k},dr:function(){return Z},u1:function(){return x}});var r=n(57135),i=n(9970),o=n(96583),a=n(50959),l=n(91398),c=n(92153),u=n(18171),s=n(56581),d=n(94716),f=n(42082),p=n(77511),h=n(53472),v=(0,l.cn)({}),m=(0,l.cn)(null,(function(e,t,n){t(v,(function(e){return(0,c.ZP)(e,(function(e){null===n.actions?delete e[n.paneId]:e[n.paneId]=n.actions}))}))}));function g(e,t){var n=I(),r=(0,f.$X)(m),o=(0,d.Z)(e);(0,a.useEffect)((function(){var e;return r({paneId:n,actions:null!==(e=o.current())&&void 0!==e?e:null}),function(){r({paneId:n,actions:null})}}),[r,n,o].concat((0,i.Z)(t)))}function y(e){var t=(0,u.Z)((function(){return(0,s.kv)(v,(function(t){return e?t[e]:{}}))}),[e]);return(0,f.Hg)(t)}function Z(){var e=(0,f.XD)(v);return(0,a.useCallback)((function(t){var n;return null!==(n=e()[t])&&void 0!==n?n:null}),[e])}var b=(0,l.cn)(new Map),w=(0,l.cn)(null,(function(e,t,n,r){t(b,(function(e){var t=new Map(e);return null===r?t.delete(n):r&&t.set(n,r),t}))}));function x(){return(0,f.$X)(w)}function k(){var e=function(){var e=(0,f.rF)();return(0,a.useCallback)((function(t){var n=(0,s.kv)(v,(function(e){return e[t]}));return e(n)}),[e])}();return(0,a.useCallback)(function(){var t=(0,r.Z)((function(t){return(0,o.__generator)(this,(function(n){return[2,new Promise((function(n){var r=e(t);if(r.current)n(r.current);else var i=r.subscribe((function(e){e&&(n(e),i())}))}))]}))}));return function(e){return t.apply(this,arguments)}}(),[e])}var C=(0,l.cn)(new Map),S=(0,l.cn)(null,(function(e,t,n){t(C,(function(e){return(0,c.ZP)(e,(function(e){null===n.focus?e.delete(n.paneId):e.set(n.paneId,n.focus)}))}))}));function T(e){var t=document.activeElement;return!(!e||!t)&&(e!==t&&e.contains(t))}function E(e,t){var n=(0,d.Z)(e),r=I(),o=(0,p.T3)(),l=(0,a.useRef)(!o),c=(0,f.$X)(S),u=(0,f.XD)(h.J1),s=(0,f.XD)(b),v=(0,a.useState)(null),m=v[0],g=v[1];return(0,a.useEffect)((function(){n.current&&g(n.current())}),t?(0,i.Z)(t):[]),(0,a.useEffect)((function(){var e=function(e){u()===r&&e.target!==s().get(r)&&(l.current=!1)};return document.body.addEventListener("focus",e,!0),function(){document.body.removeEventListener("focus",e,!0)}}),[u,s,r]),(0,a.useEffect)((function(){if(m){var e=function(){m.focus()};return l.current&&u()===r&&!T(s().get(r))&&e(),c({paneId:r,focus:e}),function(){c({paneId:r,focus:null})}}}),[m,c,r,u,s,o]),g}function R(){var e=(0,f.XD)(C),t=(0,f.XD)(b);return(0,u.Z)((function(){return function(n){var r=e().get(n),i=t().get(n);T(i)||(r?r():null===i||void 0===i||i.focus())}}),[e,t])}var G=(0,a.createContext)(null);function I(){var e=(0,a.useContext)(G);if(!e)throw new Error("Expected pane id in context");return e}var _=G.Provider},53472:function(e,t,n){n.d(t,{J1:function(){return p},Np:function(){return R},Vu:function(){return I},WU:function(){return h},Xo:function(){return D},fg:function(){return P},gv:function(){return _},jY:function(){return B},nC:function(){return G}});var r=n(2272),i=n(9970),o=n(92508),a=n(81202),l=n.n(a),c=n(92153),u=n(50959),s=n(91398),d=n(42082),f=n(18171),p=(0,s.cn)(null);function h(){return(0,d.XD)(p)}var v=(0,s.cn)(new Map),m=(0,s.cn)([]),g=(0,s.cn)(null,(function(e,t,n){t(v,(function(e){return(0,c.ZP)(e,(function(e){var t=e.get(n.paneId),r=Date.now();if(t){var i=t.panes.at(-1);t.lastActiveAt=r,l()(n.pane,i)||t.panes.push(n.pane)}else e.set(n.paneId,{panes:[n.pane],lastActiveAt:r})}))})),t(p,n.paneId)})),y=(0,s.cn)(null,(function(e,t,n){var r=e(p),i=e(v).get(n);i&&t(m,(function(e){return(0,c.ZP)(e,(function(e){e.push(i.panes)}))})),t(v,(function(e){return(0,c.ZP)(e,(function(e){e.delete(n)}))})),r===n&&t(p,null)})),Z=(0,s.cn)(null,(function(e,t,n){t(v,(function(e){return(0,c.ZP)(e,(function(e){var t=e.get(n);t&&(t.lastActiveAt=Date.now())}))})),t(p,n)})),b=(0,s.cn)(null,(function(e,t){t(p,null)})),w=(0,s.cn)((function(e){return(0,i.Z)(e(v).values()).sort((function(e,t){return t.lastActiveAt-e.lastActiveAt})).map((function(e){return e.panes}))})),x=(0,s.cn)((function(e){var t=e(v),n=[];return t.forEach((function(e,t){var r=e.panes.at(-1);r&&n.push([t,r,e.lastActiveAt])})),n.sort((function(e,t){return e[2]-t[2]}))})),k=(0,s.cn)((function(e){var t=[],n=!0,i=!1,a=void 0;try{for(var l,c=e(x)[Symbol.iterator]();!(n=(l=c.next()).done);n=!0){var u=(0,r.Z)(l.value,2),s=(u[0],u[1]),d=(0,o.Ur)(s)?s.data.path:null;d&&t.push(d)}}catch(f){i=!0,a=f}finally{try{n||null==c.return||c.return()}finally{if(i)throw a}}return t})),C=(0,s.cn)((function(e){var t=[],n=!0,r=!1,o=void 0;try{for(var a,l=e(w)[Symbol.iterator]();!(n=(a=l.next()).done);n=!0){var c,u=a.value;u.length<=1||(c=t).push.apply(c,(0,i.Z)(u.slice(0,-1)))}}catch(y){r=!0,o=y}finally{try{n||null==l.return||l.return()}finally{if(r)throw o}}var s=!0,d=!1,f=void 0;try{for(var p,h=e(m)[Symbol.iterator]();!(s=(p=h.next()).done);s=!0){var v,g=p.value;(v=t).push.apply(v,(0,i.Z)(g))}}catch(y){d=!0,f=y}finally{try{s||null==h.return||h.return()}finally{if(d)throw f}}return t})),S=(0,s.cn)(null,(function(e,t){var n=e(m).flat().pop();return t(m,(function(e){return(0,c.ZP)(e,(function(e){var t=e.pop();t&&t.pop()}))})),n})),T=(0,s.cn)((function(e){var t=[],n=!0,r=!1,i=void 0;try{for(var a,l=e(C)[Symbol.iterator]();!(n=(a=l.next()).done);n=!0){var c=a.value,u=(0,o.Ur)(c)?c.data.path:null;u&&t.push(u)}}catch(s){r=!0,i=s}finally{try{n||null==l.return||l.return()}finally{if(r)throw i}}return t})),E=((0,s.cn)((function(e){return(0,i.Z)(e(k)).concat((0,i.Z)(e(T)))})),(0,s.cn)((function(e){var t=e(p);if(!t)return null;var n=e(v).get(t);return(null===n||void 0===n?void 0:n.panes.at(-1))||null})));(0,s.cn)((function(e){var t=e(E);return t&&(0,o.Ur)(t)&&t.data.path||null}));function R(e,t){var n=(0,d.$X)(g),r=(0,d.$X)(y);(0,u.useEffect)((function(){n({paneId:e,pane:t})}),[n,e,t]),(0,u.useEffect)((function(){return function(){r(e)}}),[r,e])}function G(){return(0,d.XD)(x)}function I(){return(0,d.Hg)(k)}function _(){return(0,d.$X)(S)}function D(){return(0,d.$X)(Z)}function B(){return(0,d.$X)(b)}function P(){var e=(0,d.yL)(k);return(0,f.Z)((function(){return function(t){return new Promise((function(n,r){var i=e.subscribe((function(e){e.includes(t)||(i(),n())}))}))}}),[e])}},59937:function(e,t,n){n.d(t,{aG:function(){return G},HQ:function(){return E},e_:function(){return P}});var r=n(57135),i=n(2272),o=n(9970),a=n(96583),l=n(81202),c=n.n(l),u=n(50255),s=n(92153),d=n(91398),f=n(56581),p=n(42082),h=n(12379),v=n(43119),m=n(71440);function g(){var e=(0,v.Z)(["\n  query WorkspaceSessionPresence($userIds: [Int!]!) {\n    usersByIds(ids: $userIds) {\n      id\n      image\n    }\n  }\n"]);return g=function(){return e},e}var y=(0,m.Ps)(g());var Z=n(86763),b=n.n(Z),w=n(57370),x=n(18171),k=n(50959);function C(e,t){var n={timestamp:Math.floor(Date.now()/1e3),activeFile:null},r=e.get(t.id);r?r.sessions.set(t.session,n):e.set(t.id,{id:t.id,username:t.name,color:(0,u.i7)((0,o.Z)(e.values())),roles:t.roles,sessions:new Map([[t.session,n]])})}var S=(0,d.cn)(new Map),T=(0,f.kv)(S,(function(e){var t=new Map,n=!0,r=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done);n=!0){var c=(0,i.Z)(a.value,2)[1],u=null,s=!0,d=!1,f=void 0;try{for(var p,h=c.sessions[Symbol.iterator]();!(s=(p=h.next()).done);s=!0){var v=(0,i.Z)(p.value,2)[1];v.activeFile&&(u&&u.timestamp>v.timestamp||(u=v))}}catch(y){d=!0,f=y}finally{try{s||null==h.return||h.return()}finally{if(d)throw f}}if(null===u||void 0===u?void 0:u.activeFile){var m=t.get(u.activeFile),g={id:c.id,username:c.username,image:c.image,color:c.color,roles:c.roles};m?m.push(g):t.set(u.activeFile,[g])}}}catch(y){r=!0,o=y}finally{try{n||null==l.return||l.return()}finally{if(r)throw o}}return t}),c());function E(){return(0,p.yL)(T)}var R=(0,f.kv)(S,(function(e){return(0,o.Z)(e.values()).map((function(e){return{id:e.id,username:e.username,color:e.color,image:e.image}}))}),c());function G(){return(0,p.Hg)(R)}function I(e){var t=e.id,n=e.name,r=e.session,i=e.roles;return t&&n&&r&&i?{id:t,name:n,session:r,roles:i}:null}function _(e){var t=e.seconds,n=e.nanos;return"number"!==typeof t||"number"!==typeof n?null:(0,u.gs)({seconds:t,nanos:n})}var D=(0,d.cn)(null,(function(e,t,n,r){t(S,(function(e){return(0,s.ZP)(e,(function(e){var t;if(null===(t=n.roster)||void 0===t?void 0:t.user){var o=!0,a=!1,l=void 0;try{for(var c,u=n.roster.user[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var s=I(c.value);null!==s&&((null===s||void 0===s?void 0:s.id)!==r&&C(e,s))}}catch(x){a=!0,l=x}finally{try{o||null==u.return||u.return()}finally{if(a)throw l}}}else if(n.join){var d=I(n.join);if(!d)return;if(d.id===r)return;C(e,d)}else if(n.part){var f=n.part,p=f.id,h=f.session;if(!p||!h)return;!function(e,t){var n=e.get(t.id);n&&(1===n.sessions.size?e.delete(t.id):n.sessions.delete(t.session))}(e,{id:p,session:h})}else if(n.fileOpened){var v=n.fileOpened,m=v.session,g=v.userId,y=v.file,Z=n.fileOpened.timestamp?_(n.fileOpened.timestamp):null;if(!Z||!m||!g||!y)return;!function(e,t){var n=e.get(t.userId);if(n){var r=n.sessions.get(t.session);r?(r.timestamp=t.timestamp,r.activeFile=t.file):n.sessions.set(t.session,{timestamp:t.timestamp,activeFile:t.file})}}(e,{timestamp:Z,session:m,userId:g,file:y})}else if(n.sessionTimestampUpdated){var b=n.sessionTimestampUpdated.session,w=n.sessionTimestampUpdated.timestamp?_(n.sessionTimestampUpdated.timestamp):null;if(!w||!b)return;!function(e,t){var n=t.session,r=t.timestamp,o=!0,a=!1,l=void 0;try{for(var c,u=e[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var s=(0,i.Z)(c.value,2)[1].sessions.get(n);if(s){s.timestamp=r;break}}}catch(x){a=!0,l=x}finally{try{o||null==u.return||u.return()}finally{if(a)throw l}}}(e,{timestamp:w,session:b})}else;}))}))})),B=(0,d.cn)(null,function(){var e=(0,r.Z)((function(e,t){var n,r,o,l,c,u,d,f,p,v,m;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:n=[],r=e(S),o=!0,l=!1,c=void 0;try{for(u=r[Symbol.iterator]();!(o=(d=u.next()).done);o=!0)f=(0,i.Z)(d.value,2),p=f[0],f[1].image||n.push(p)}catch(g){l=!0,c=g}finally{try{o||null==u.return||u.return()}finally{if(l)throw c}}return n.length?[4,null===h.l||void 0===h.l?void 0:h.l.query({query:y,variables:{userIds:n}})]:[2];case 1:return v=a.sent(),(m=null===v||void 0===v?void 0:v.data.usersByIds)?(t(S,(function(e){return(0,s.ZP)(e,(function(e){var t=!0,n=!1,r=void 0;try{for(var i,o=m[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value,l=e.get(a.id);l&&(l.image=a.image)}}catch(g){n=!0,r=g}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}}))})),[2]):[2]}}))}));return function(t,n){return e.apply(this,arguments)}}());function P(){var e=(0,w.d)(),t=(0,p.$X)(B),n=(0,p.$X)(D),r=(0,p.yL)(S);return(0,k.useEffect)((function(){t();var e=b()(t,2e3);return r.subscribe((function(){return e()}))}),[t,r]),(0,x.Z)((function(){return function(t){e&&n(t,e)}}),[n,e])}},42082:function(e,t,n){n.d(t,{$X:function(){return h},B3:function(){return u},Hg:function(){return d},XD:function(){return v},ns:function(){return c},rF:function(){return p},yL:function(){return f}});var r=n(50959),i=n(91398),o=n(92683),a=n(82325),l=n(13525);function c(){return(0,r.useState)((function(){return(0,i.MT)()}))[0]}var u=(0,r.createContext)(null);function s(){var e=(0,r.useContext)(u);if(!e)throw new Error("Expected store in context");return e}function d(e){return(0,o.Dv)(e,{store:s()})}function f(e){return(0,l.b)(e,s())}function p(){var e=s();return(0,r.useCallback)((function(t){return(0,l.c)(e,t)}),[e])}var h=function(e){return(0,o.b9)(e,{store:s()})};function v(e){return(0,a.lV)((0,r.useCallback)((function(t){return t(e)}),[e]),{store:s()})}},23763:function(e,t,n){n.d(t,{a9:function(){return a},kM:function(){return l}});var r=n(91398),i=n(42082),o=(0,r.cn)(null);function a(){return(0,i.$X)(o)}function l(){return(0,i.Hg)(o)}},98416:function(e,t,n){n.d(t,{OO:function(){return r},Uw:function(){return i},vw:function(){return o}});var r="replit-code-v1-3b",i={"replit-code-v1-3b":{},"replit-repltuned-v1-3b":{},"self-hosted-santa-1b":{infill:!0},"gwtraining-test1":{},"gwtraining-test2":{},"gwtraining-test3":{},"language-dependent":{},"gpt-3.5-turbo":{implementation:"chat-as-completion",implementationSettings:{model:"gpt-3.5-turbo"}},"google-augdev-001":{implementation:"google-model-as-completion",infill:!0},"code-gecko@001":{implementation:"google-vertex-model-as-completion",implementationSettings:{model:"code-gecko@001"},infill:!0}},o=new Set(Object.keys(i))},4821:function(e,t,n){n.d(t,{I:function(){return i},z:function(){return r}});var r=100,i=250},95844:function(e,t,n){n.d(t,{L:function(){return c}});var r=n(66091),i=n(57988),o=n(2272),a=function e(t,n){(0,r.Z)(this,e),this.next=null,this.prev=null,this.key=t,this.data=n},l=function(){function e(){(0,r.Z)(this,e),this.size_=0,this.head=null,this.tail=null}var t=e.prototype;return t.addFront=function(e){this.tail||(this.tail=e),this.head&&(this.head.prev=e),e.next=this.head,this.head=e,this.size_++},t.popBack=function(){if(!this.tail)return null;var e=this.tail;return this.tail=e.prev,this.size_--,e.prev&&(e.prev.next=null,e.prev=null),e},t.moveToFront=function(e){this.head!==e&&(this.tail===e&&(this.tail=e.prev),e.next&&(e.next.prev=e.prev,e.next=null),e.prev&&(e.prev.next=e.next,e.prev=null),this.size_--,this.addFront(e))},(0,i.Z)(e,[{key:"size",get:function(){return this.size_}}]),e}(),c=function(){function e(t){(0,r.Z)(this,e),this.items=Object.create(null),this.evictList=new l,this.maxSize=t}var t=e.prototype;return t.update=function(e,t){var n=this.items[e];if(n)return this.evictList.moveToFront(n),n.data=t(n.data),n.data;for(;this.evictList.size>=this.maxSize;){var r=this.evictList.popBack();if(!r)throw new Error("invariant violation: could not pop back of the list");delete this.items[r.key]}var i=new a(e,t());return this.evictList.addFront(i),this.items[e]=i,i.data},t.getOrAdd=function(e,t){return this.update(e,(function(e){return null!==e&&void 0!==e?e:t}))},t.entries=function(){return Object.entries(this.items).map((function(e){var t=(0,o.Z)(e,2);return[t[0],t[1].data]}))},t.set=function(e,t){this.update(e,(function(){return t}))},t.get=function(e){var t=this.items[e];return t?t.data:null},t.has=function(e){return e in this.items},(0,i.Z)(e,[{key:"size",get:function(){return this.evictList.size}}]),e}()},63181:function(e,t,n){n.d(t,{F5:function(){return d},Hk:function(){return u},Kd:function(){return s},N$:function(){return c},Ob:function(){return l},Vl:function(){return a},Vt:function(){return r},ig:function(){return i},lF:function(){return o}});var r=/^([A-Za-z0-9_]{1,15})\/?$/,i=/^([%A-Za-z0-9]+|-)*\/?$/,o=/^([A-Za-z\d](?:[A-Za-z\d]|-){0,38})\/?$/,a=/^https:\/\/(www\.)?youtube\.com(\/(c|channel|user|@(\w)+))*(\/([A-Za-z0-9_-]+))*(\/?)$/,l=/^(.{2,32}#[0-9]{4})$|^([a-zA-Z0-9_.]{2,32})$/,c="https://twitter.com/",u="https://www.linkedin.com/in/",s="https://github.com/",d=/\/$/}}]);
//# sourceMappingURL=2963-5ccf6e96e9906b1e.js.map